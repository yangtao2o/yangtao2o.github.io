<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hiï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ~</title>
      <link href="/2048/10/24/hello-world/"/>
      <url>/2048/10/24/hello-world/</url>
      
        <content type="html"><![CDATA[<p>æ¬¢è¿<a href="/2048/10/24/hello-world/">åœ¨æ­¤</a>ç•™è¨€ï¼Œæˆ–è€…å»<a href="/friends/">å‹é“¾</a>çœ‹çœ‹å¤§å®¶ ~</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨æ˜¯æ€ä¹ˆç¼“å­˜èµ„æºçš„</title>
      <link href="/2020/03/27/web-cache/"/>
      <url>/2020/03/27/web-cache/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶æ¥åšä¸ªç®€è¦çš„æ€»ç»“ï¼šé¦–å…ˆé€šè¿‡ <code>Cache-Control</code> éªŒè¯å¼ºç¼“å­˜æ˜¯å¦å¯ç”¨ï¼›å¦‚æœå¼ºç¼“å­˜å¯ç”¨ï¼Œç›´æ¥ä½¿ç”¨ï¼›å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå³å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„<code>If-Modified-Since</code>æˆ–è€…<code>If-None-Match</code>è¿™äº›æ¡ä»¶è¯·æ±‚å­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°ã€‚è‹¥èµ„æºæ›´æ–°ï¼Œè¿”å›èµ„æºå’Œ<strong>200 çŠ¶æ€ç </strong>ï¼›å¦åˆ™ï¼Œè¿”å›<strong>304</strong>ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜è·å–èµ„æº</p></blockquote><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æµè§ˆå™¨ç¼“å­˜ï¼ˆBrower Cachingï¼‰æ˜¯æµè§ˆå™¨åœ¨æœ¬åœ°ç£ç›˜å¯¹ç”¨æˆ·æœ€è¿‘è¯·æ±‚è¿‡çš„æ–‡æ¡£è¿›è¡Œå­˜å‚¨ï¼Œå½“è®¿é—®è€…å†æ¬¡è®¿é—®åŒä¸€é¡µé¢æ—¶ï¼Œæµè§ˆå™¨å°±å¯ä»¥ç›´æ¥ä»æœ¬åœ°ç£ç›˜åŠ è½½æ–‡æ¡£ã€‚è¿™æ ·åšçš„å¥½å¤„æœ‰ï¼š<strong>å‡å°‘å†—ä½™æ•°æ®ä¼ è¾“ã€å‡å°‘æœåŠ¡å™¨è´Ÿæ‹…ã€åŠ å¿«å®¢æˆ·ç«¯åŠ è½½ç½‘é¡µçš„é€Ÿåº¦</strong>ã€‚</p><p>æµè§ˆå™¨çš„ç¼“å­˜è§„åˆ™åˆ†ä¸ºä¸¤å¤§å—ï¼š<strong>å¼ºåˆ¶ç¼“å­˜</strong>å’Œ<strong>åå•†ç¼“å­˜</strong>ã€‚å¯¹äºæŸä¸ªæ–‡ä»¶æ¥è¯´ï¼Œå…·ä½“æ˜¯é‡‡ç”¨å“ªç§ç¼“å­˜æ–¹å¼ï¼Œç”± HTTP Response Headers è®¾ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ meta æ ‡ç­¾ï¼Œä½†æ˜¯ç°åœ¨è¶Šæ¥è¶Šå¤šæµè§ˆå™¨å¿½ç•¥è®¾ç½®ç¼“å­˜çš„ meta æ ‡ç­¾ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èé€šè¿‡ HTTP Response Headers è®¾ç½®ã€‚</p><h2 id="å¼ºåˆ¶ç¼“å­˜"><a href="#å¼ºåˆ¶ç¼“å­˜" class="headerlink" title="å¼ºåˆ¶ç¼“å­˜"></a>å¼ºåˆ¶ç¼“å­˜</h2><p>é¦–å…ˆå®¢æˆ·ç«¯ä¼šæ£€æŸ¥æœ¬åœ°ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ‰€è¦è¯·æ±‚çš„æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±ä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚</p><p>HTTP Response Headers ä¸­ <code>Cache-Control</code> å’Œ <code>Expires</code> å­—æ®µéƒ½è¡¨ç¤ºå¯¹æœ¬èµ„æºå¯åŠ¨å¼ºåˆ¶ç¼“å­˜ï¼Œå…¶ä¸­ Cache-Control æ˜¯ http1.1 æ ‡å‡†ä¸­çš„å­—æ®µï¼Œè€Œ Expires æ˜¯ http1.0 çš„å­—æ®µï¼ŒCache-Control ä¼˜å…ˆçº§æ›´é«˜ï¼Œä½¿ç”¨æ›´å¹¿æ³›ã€‚</p><h3 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h3><p><strong>Expires</strong> å³è¿‡æœŸæ—¶é—´ï¼Œå­˜åœ¨äºæœåŠ¡ç«¯è¿”å›çš„å“åº”å¤´ä¸­ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æ¥ä»ç¼“å­˜é‡Œé¢è·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚ï¼Œå¦‚ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Expires</span>: Wed, 22 Nov 2019 08:41:00 GMT</span><br></pre></td></tr></table></figure><h3 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h3><p><strong>Cache-Control</strong> çš„å€¼çš„å•ä½ä¸ºç§’ï¼Œå…³é”®å­— <code>max-age</code> è¡¨ç¤ºå¯ä»¥è¢«ç¼“å­˜å¤šé•¿æ—¶é—´ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cache-control</span>: max-age=36029314</span><br></pre></td></tr></table></figure><p>ç™¾åº¦é¦–é¡µåŠ è½½çš„ä¸€ä¸ªèµ„æºè¿”å›å¤´ä¸­å‡ºç°äº† Cache-Control å­—æ®µï¼Œå½“ Cache-Control å€¼è®¾ä¸º <code>max-age=300</code> æ—¶ï¼Œåˆ™ä»£è¡¨åœ¨è¿™ä¸ªè¯·æ±‚æ­£ç¡®è¿”å›æ—¶é—´ï¼ˆæµè§ˆå™¨ä¹Ÿä¼šè®°å½•ä¸‹æ¥ï¼‰çš„ 5 åˆ†é’Ÿå†…å†æ¬¡åŠ è½½èµ„æºï¼Œå°±ä¼šå‘½ä¸­å¼ºç¼“å­˜ã€‚</p><p>å¸¸ç”¨çš„è®¾ç½®å€¼ï¼š</p><ul><li><code>no-cache</code>ï¼š ä¸ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚éœ€è¦ä½¿ç”¨ç¼“å­˜åå•†ï¼Œå…ˆä¸æœåŠ¡å™¨ç¡®è®¤è¿”å›çš„å“åº”æ˜¯å¦è¢«æ›´æ”¹ï¼Œå¦‚æœä¹‹å‰çš„å“åº”ä¸­å­˜åœ¨ ETagï¼Œé‚£ä¹ˆè¯·æ±‚çš„æ—¶å€™ä¼šä¸æœåŠ¡ç«¯éªŒè¯ï¼Œå¦‚æœèµ„æºæœªè¢«æ›´æ”¹ï¼Œåˆ™å¯ä»¥é¿å…é‡æ–°ä¸‹è½½ã€‚</li><li><code>no-store</code>ï¼š ç›´æ¥ç¦æ­¢æµè§ˆå™¨ç¼“å­˜æ•°æ®ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¯¥èµ„æºï¼Œéƒ½ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯æ¬¡éƒ½ä¼šä¸‹è½½å®Œæ•´çš„èµ„æºã€‚</li><li><code>public</code>ï¼š å¯ä»¥è¢«æ‰€æœ‰çš„ç”¨æˆ·ç¼“å­˜ï¼ŒåŒ…æ‹¬ç»ˆç«¯ç”¨æˆ·å’Œ CDN ç­‰ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€‚</li><li><code>private</code>ï¼š åªèƒ½è¢«ç»ˆç«¯ç”¨æˆ·çš„æµè§ˆå™¨ç¼“å­˜ï¼Œä¸å…è®¸ CDN ç­‰ä¸­ç»§ç¼“å­˜æœåŠ¡å™¨å¯¹å…¶ç¼“å­˜ã€‚</li><li><code>s-maxage</code>ï¼šè¿™å’Œ max-age é•¿å¾—æ¯”è¾ƒåƒï¼Œä½†æ˜¯åŒºåˆ«åœ¨äº s-maxage æ˜¯é’ˆå¯¹ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ—¶é—´ã€‚</li><li><code>must-revalidate</code>ï¼šæ˜¯ç¼“å­˜å°±ä¼šæœ‰è¿‡æœŸçš„æ—¶å€™ï¼ŒåŠ ä¸Šè¿™ä¸ªå­—æ®µä¸€æ—¦ç¼“å­˜è¿‡æœŸï¼Œå°±å¿…é¡»å›åˆ°æºæœåŠ¡å™¨éªŒè¯ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šå½“ Expires å’Œ Cache-Control åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼ŒCache-Control ä¼šä¼˜å…ˆè€ƒè™‘ã€‚</p><p>å½“ç„¶ï¼Œè¿˜å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå½“èµ„æºç¼“å­˜æ—¶é—´è¶…æ—¶äº†ï¼Œä¹Ÿå°±æ˜¯å¼ºç¼“å­˜å¤±æ•ˆäº†ï¼Œæ¥ä¸‹æ¥æ€ä¹ˆåŠï¼Ÿæ²¡é”™ï¼Œè¿™æ ·å°±è¿›å…¥åˆ°ç¬¬äºŒçº§å±éšœâ€”â€”åå•†ç¼“å­˜äº†ã€‚</p><h2 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h2><p>å¼ºç¼“å­˜å¤±æ•ˆä¹‹åï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ç›¸åº”çš„ç¼“å­˜ tag æ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®è¿™ä¸ª tagï¼Œæ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œè¿™å°±æ˜¯åå•†ç¼“å­˜ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œè¿™æ ·çš„ç¼“å­˜ tag åˆ†ä¸ºä¸¤ç§: <strong>Last-Modified</strong> å’Œ <strong>ETag</strong>ã€‚è¿™ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œå¹¶ä¸å­˜åœ¨è°å¯¹è°æœ‰ç»å¯¹çš„ä¼˜åŠ¿ï¼Œè·Ÿä¸Šé¢å¼ºç¼“å­˜çš„ä¸¤ä¸ª tag ä¸ä¸€æ ·ã€‚</p><h3 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h3><p>èµ„æºè¢«æœåŠ¡å™¨è¿”å›æ—¶ï¼ŒHTTP Response Headers ä¸­çš„ <strong>Last-Modified</strong> è¿”å›å¤´æ ‡è¯†äº†æ­¤èµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</p><p>æµè§ˆå™¨å†æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œä¼šå°†ä¸Šæ¬¡ <strong>Last-Modified</strong> çš„å€¼ä½œä¸º <strong>if-Modified-Since</strong> å¤´çš„å€¼å‘é€ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼ŒæŸ¥çœ‹æœ€åä¿®æ”¹æ—¶é—´ä»¥åèµ„æºæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼š</p><ul><li>æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå°±è¿”å› <strong>304</strong>ï¼Œä»ç¼“å­˜è¯»å–</li><li>ä¿®æ”¹è¿‡ï¼Œè¿”å›çŠ¶æ€ <strong>200</strong> ä»¥åŠæ•´ä¸ªèµ„æº</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">last-modified</span>: Wed, 13 Nov 2019 15:16:37 GMT</span><br></pre></td></tr></table></figure><h3 id="Etag"><a href="#Etag" class="headerlink" title="Etag"></a>Etag</h3><p><strong>ETag</strong> æ˜¯æœåŠ¡å™¨æ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œç»™æ–‡ä»¶ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ï¼Œåªè¦é‡Œé¢çš„å†…å®¹æœ‰æ”¹åŠ¨ï¼Œè¿™ä¸ªå€¼å°±ä¼šå˜ã€‚æœåŠ¡å™¨é€šè¿‡å“åº”å¤´æŠŠè¿™ä¸ªå€¼ç»™æµè§ˆå™¨ã€‚</p><p>æµè§ˆå™¨æ¥æ”¶åˆ° ETag çš„å€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸º<strong>If-None-Match</strong>è¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå¹¶æ”¾åˆ°è¯·æ±‚å¤´ä¸­ï¼Œç„¶åå‘ç»™æœåŠ¡å™¨ã€‚</p><p>æœåŠ¡å™¨æ¥æ”¶åˆ° If-None-Match åï¼Œä¼šè·ŸæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„ ETag è¿›è¡Œæ¯”å¯¹ï¼š</p><ul><li>ä¸¤è€…ä¸ä¸€æ ·ï¼Œè¯´æ˜è¦æ›´æ–°äº†ã€‚è¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„ HTTP è¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·</li><li>å¦åˆ™è¿”å› 304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ç”¨ç¼“å­˜</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">etag</span>: W/"36BE6ECF0746FFAC5024A69C27141E08"</span><br></pre></td></tr></table></figure><h3 id="ä¸¤è€…å¯¹æ¯”"><a href="#ä¸¤è€…å¯¹æ¯”" class="headerlink" title="ä¸¤è€…å¯¹æ¯”"></a>ä¸¤è€…å¯¹æ¯”</h3><p><strong>ç²¾åº¦ä¸Š</strong>Etag è¦ä¼˜äº Last-Modifiedã€‚Last-Modified çš„æ—¶é—´å•ä½æ˜¯ç§’ï¼Œå¦‚æœæŸä¸ªæ–‡ä»¶åœ¨ 1 ç§’å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆä»–ä»¬çš„ Last-Modified å…¶å®å¹¶æ²¡æœ‰ä½“ç°å‡ºæ¥ä¿®æ”¹ï¼Œä½†æ˜¯ Etag æ¯æ¬¡éƒ½ä¼šæ”¹å˜ç¡®ä¿äº†ç²¾åº¦ã€‚</p><p><strong>æ€§èƒ½ä¸Š</strong>ï¼ŒLast-Modified è¦ä¼˜äº Etagï¼Œæ¯•ç«Ÿ Last-Modified åªéœ€è¦è®°å½•æ—¶é—´ï¼Œè€Œ Etag éœ€è¦æœåŠ¡å™¨é€šè¿‡ç®—æ³•æ¥è®¡ç®—å‡ºä¸€ä¸ª hash å€¼ã€‚</p><p><strong>ä¼˜å…ˆçº§ä¸Š</strong>ï¼ŒæœåŠ¡å™¨æ ¡éªŒä¼˜å…ˆè€ƒè™‘ Etagã€‚</p><h2 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜"></a>æµè§ˆå™¨ç¼“å­˜</h2><p>æµè§ˆå™¨ç¼“å­˜è¿™ä¸€å—ï¼Œæœ€é‡è¦çš„æ˜¯èƒ½åŒºåˆ†å¼€<strong>å¼ºåˆ¶ç¼“å­˜</strong>å’Œ<strong>åå•†ç¼“å­˜</strong>ï¼š</p><ul><li>å®Œå…¨ä¸å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ˜¯å¼ºåˆ¶ç¼“å­˜</li><li>æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ˜¯åå•†ç¼“å­˜ï¼Œæ¶‰åŠåˆ° 304 çš„éƒ½æ˜¯åå•†ç¼“å­˜</li></ul><p>æ€»ç»“ä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜çš„å…¨è¿‡ç¨‹ï¼š</p><p>æµè§ˆå™¨ç¬¬ä¸€æ¬¡åŠ è½½èµ„æºï¼ŒæœåŠ¡å™¨è¿”å› 200ï¼Œæµè§ˆå™¨ä»æœåŠ¡å™¨ä¸‹è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶ç¼“å­˜ä½èµ„æºæ–‡ä»¶ä¸ response header ä»¥ä¾›ä¸‹æ¬¡åŠ è½½æ—¶å¯¹æ¯”ä½¿ç”¨ï¼›</p><p>ä¸‹ä¸€æ¬¡åŠ è½½èµ„æºæ—¶ï¼Œç”±äºå¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆçº§è¾ƒé«˜ï¼Œå…ˆæ¯”è¾ƒå½“å‰æ—¶é—´ä¸ä¸Šä¸€æ¬¡è¿”å› 200 æ—¶çš„æ—¶é—´å·®ï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡ cache-control è®¾ç½®çš„ max-ageï¼Œåˆ™æ²¡æœ‰è¿‡æœŸï¼Œå¹¶å‘½ä¸­<strong>å¼ºç¼“å­˜</strong>ï¼Œç›´æ¥ä»æœ¬åœ°è¯»å–èµ„æºã€‚å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ HTTP1.1ï¼Œåˆ™ä½¿ç”¨ expires å¤´åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼›</p><p>å¦‚æœèµ„æºå·²è¿‡æœŸï¼Œåˆ™è¡¨æ˜å¼ºåˆ¶ç¼“å­˜æ²¡æœ‰è¢«å‘½ä¸­ï¼Œåˆ™å¼€å§‹<strong>åå•†ç¼“å­˜</strong>ï¼Œå‘æœåŠ¡å™¨å‘é€å¸¦æœ‰ <code>If-None-Match</code> å’Œ <code>If-Modified-Since</code> çš„è¯·æ±‚ï¼›</p><p>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä¼˜å…ˆæ ¹æ® Etag çš„å€¼åˆ¤æ–­è¢«è¯·æ±‚çš„æ–‡ä»¶æœ‰æ²¡æœ‰åšä¿®æ”¹ï¼ŒEtag å€¼ä¸€è‡´åˆ™æ²¡æœ‰ä¿®æ”¹ï¼Œå‘½ä¸­åå•†ç¼“å­˜ï¼Œè¿”å› <strong>304</strong>ï¼›å¦‚æœä¸ä¸€è‡´åˆ™æœ‰æ”¹åŠ¨ï¼Œç›´æ¥è¿”å›æ–°çš„èµ„æºæ–‡ä»¶å¸¦ä¸Šæ–°çš„ Etag å€¼å¹¶è¿”å› <strong>200</strong>ï¼›</p><p>å¦‚æœæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚æ²¡æœ‰ Etag å€¼ï¼Œåˆ™å°† <code>If-Modified-Since</code> å’Œè¢«è¯·æ±‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´åšæ¯”å¯¹ï¼Œä¸€è‡´åˆ™å‘½ä¸­åå•†ç¼“å­˜ï¼Œè¿”å› 304ï¼›ä¸ä¸€è‡´åˆ™è¿”å›æ–°çš„ <code>last-modified</code> å’Œæ–‡ä»¶å¹¶è¿”å› 200ã€‚</p><h2 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h2><h3 id="ç‚¹å‡»åˆ·æ–°æŒ‰é’®æˆ–è€…æŒ‰-F5"><a href="#ç‚¹å‡»åˆ·æ–°æŒ‰é’®æˆ–è€…æŒ‰-F5" class="headerlink" title="ç‚¹å‡»åˆ·æ–°æŒ‰é’®æˆ–è€…æŒ‰ F5"></a>ç‚¹å‡»åˆ·æ–°æŒ‰é’®æˆ–è€…æŒ‰ F5</h3><p>æµè§ˆå™¨ç›´æ¥å¯¹æœ¬åœ°çš„ç¼“å­˜æ–‡ä»¶è¿‡æœŸï¼Œä½†æ˜¯ä¼šå¸¦ä¸Š<code>If-Modifed-Since</code>ï¼Œ<code>If-None-Match</code>ï¼Œè¿™å°±æ„å‘³ç€æœåŠ¡å™¨ä¼šå¯¹æ–‡ä»¶æ£€æŸ¥æ–°é²œåº¦ï¼Œè¿”å›ç»“æœå¯èƒ½æ˜¯ 304ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ 200ã€‚</p><h3 id="ç”¨æˆ·æŒ‰-Ctrl-F5"><a href="#ç”¨æˆ·æŒ‰-Ctrl-F5" class="headerlink" title="ç”¨æˆ·æŒ‰ Ctrl+F5"></a>ç”¨æˆ·æŒ‰ Ctrl+F5</h3><p>æµè§ˆå™¨ä¸ä»…ä¼šå¯¹æœ¬åœ°æ–‡ä»¶è¿‡æœŸï¼Œè€Œä¸”ä¸ä¼šå¸¦ä¸Š <code>If-Modifed-Since</code>ï¼Œ<code>If-None-Match</code>ï¼Œç›¸å½“äºä¹‹å‰ä»æ¥æ²¡æœ‰è¯·æ±‚è¿‡ï¼Œè¿”å›ç»“æœæ˜¯ 200ã€‚</p><h3 id="åœ°å€æ å›è½¦"><a href="#åœ°å€æ å›è½¦" class="headerlink" title="åœ°å€æ å›è½¦"></a>åœ°å€æ å›è½¦</h3><p>æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæŒ‰ç…§æ­£å¸¸æµç¨‹ï¼Œæœ¬åœ°æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œç„¶åæœåŠ¡å™¨æ£€æŸ¥æ–°é²œåº¦ï¼Œæœ€åè¿”å›å†…å®¹ã€‚</p><p>æœ€åè¿˜å¯ä»¥æåˆ°ï¼Œä½ æ³¨æ„åˆ°å¾ˆå¤šç½‘ç«™çš„èµ„æºåé¢éƒ½åŠ äº†ç‰ˆæœ¬å·ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ï¼šæ¯æ¬¡å‡çº§äº† JS æˆ– CSS æ–‡ä»¶åï¼Œä¸ºäº†é˜²æ­¢æµè§ˆå™¨è¿›è¡Œç¼“å­˜ï¼Œå¼ºåˆ¶æ”¹å˜ç‰ˆæœ¬å·ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨å°±ä¼šé‡æ–°ä¸‹è½½æ–°çš„ JS æˆ– CSS æ–‡ä»¶ ï¼Œä»¥ä¿è¯ç”¨æˆ·èƒ½å¤ŸåŠæ—¶è·å¾—ç½‘ç«™çš„æœ€æ–°æ›´æ–°ã€‚</p><h3 id="ç¼“å­˜çš„èµ„æºéƒ½å­˜åœ¨å“ªé‡Œ"><a href="#ç¼“å­˜çš„èµ„æºéƒ½å­˜åœ¨å“ªé‡Œ" class="headerlink" title="ç¼“å­˜çš„èµ„æºéƒ½å­˜åœ¨å“ªé‡Œ"></a>ç¼“å­˜çš„èµ„æºéƒ½å­˜åœ¨å“ªé‡Œ</h3><p>æŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ï¼š</p><ul><li><p><strong>Service Worker</strong>ï¼šè¿è¡Œåœ¨ JavaScript ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè™½ç„¶ç”±äºè„±ç¦»äº†æµè§ˆå™¨çª—ä½“æ— æ³•ç›´æ¥è®¿é—® DOMï¼Œä½†æ˜¯å®ƒå¯ä»¥å®Œæˆç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æ¨é€ã€ç½‘ç»œä»£ç†ç­‰åŠŸèƒ½ã€‚</p></li><li><p><strong>Memory Cache</strong>ï¼šå°±æ˜¯å†…å­˜ç¼“å­˜ï¼Œå®ƒçš„æ•ˆç‡æœ€å¿«ï¼Œä½†æ˜¯å­˜æ´»æ—¶é—´æœ€çŸ­ï¼Œä½ ä¸€å…³æ‰æµè§ˆå™¨ Memory Cache é‡Œçš„æ–‡ä»¶å°±è¢«æ¸…ç©ºäº†ã€‚</p></li><li><p><strong>Disk Cacheï¼šCache</strong> èµ„æºè¢«å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œå­˜æ´»æ—¶é—´æ¯” Memory Cache è¦æŒä¹…å¾ˆå¤šã€‚</p></li><li><p><strong>Push Cache</strong>ï¼šå³æ¨é€ç¼“å­˜ï¼Œè¿™æ˜¯æµè§ˆå™¨ç¼“å­˜çš„æœ€åä¸€é“é˜²çº¿ã€‚å®ƒæ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œè™½ç„¶ç°åœ¨åº”ç”¨çš„å¹¶ä¸å¹¿æ³›ï¼Œä½†éšç€ HTTP/2 çš„æ¨å¹¿ï¼Œå®ƒçš„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›ã€‚</p></li></ul><h2 id="Node-æ¼”ç¤º"><a href="#Node-æ¼”ç¤º" class="headerlink" title="Node æ¼”ç¤º"></a>Node æ¼”ç¤º</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> md5 = <span class="built_in">require</span>(<span class="string">"md5"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> html = fs.readFileSync(<span class="string">"index.html"</span>, <span class="string">"utf-8"</span>);</span><br><span class="line">  <span class="keyword">const</span> script = fs.readFileSync(<span class="string">"script.js"</span>, <span class="string">"utf-8"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (req.url === <span class="string">"/"</span>) &#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">      <span class="string">"Content-Type"</span>: <span class="string">"text/html"</span></span><br><span class="line">    &#125;);</span><br><span class="line">    res.write(html);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (req.url === <span class="string">"/script.js"</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> etag = md5(script);</span><br><span class="line">    <span class="keyword">const</span> lastMidified = lastUpdatedDate(<span class="string">"./script.js"</span>);</span><br><span class="line">    <span class="keyword">const</span> ifNoneMatch = req.headers[<span class="string">"if-none-match"</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> statusCode = ifNoneMatch === etag ? <span class="number">304</span> : <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">    res.writeHead(statusCode, &#123;</span><br><span class="line">      <span class="string">"Content-Type"</span>: <span class="string">"text/javascript"</span>,</span><br><span class="line">      <span class="string">"Cache-Control"</span>: <span class="string">"no-cache"</span>,</span><br><span class="line">      <span class="string">"Last-Modified"</span>: lastMidified,</span><br><span class="line">      Etag: etag</span><br><span class="line">    &#125;);</span><br><span class="line">    res.write(script);</span><br><span class="line">  &#125;</span><br><span class="line">  res.end();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lastUpdatedDate</span>(<span class="params">file</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; mtime &#125; = fs.statSync(file);</span><br><span class="line">  <span class="keyword">return</span> mtime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.createServer(handle).listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.imooc.com/read/68/article/1558" target="_blank" rel="noopener">æµè§ˆå™¨æ˜¯æ€ä¹ˆç¼“å­˜èµ„æºçš„</a></li><li><a href="http://47.98.159.95/my_blog/perform/001.html#%E5%BC%BA%E7%BC%93%E5%AD%98" target="_blank" rel="noopener">èƒ½ä¸èƒ½è¯´ä¸€è¯´å‰ç«¯ç¼“å­˜</a></li><li><a href="https://www.jianshu.com/p/4667d0425878" target="_blank" rel="noopener">æµè§ˆå™¨ç¼“å­˜ cache-control etag</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ</title>
      <link href="/2020/03/26/node-5-util/"/>
      <url>/2020/03/26/node-5-util/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ğŸ“¦ 5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ ğŸ‰ ğŸ‰ ğŸ‰</p></blockquote><a id="more"></a><h2 id="1ã€Chalk"><a href="#1ã€Chalk" class="headerlink" title="1ã€Chalk"></a>1ã€Chalk</h2><p>Githubï¼š<a href="https://github.com/chalk/chalk" target="_blank" rel="noopener">chalk</a></p><p>è¿™æ˜¯ä¸€ä¸ªèƒ½ç»™ä½ çš„ log æŸ“è‰²çš„åº“,è®©ä½ çš„ä»£ç é“èµ·æ¥ !!</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">"chalk"</span>);</span><br><span class="line"><span class="keyword">const</span> log = <span class="built_in">console</span>.log;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Combine styled and normal strings</span></span><br><span class="line">log(chalk.blue(<span class="string">"Hello"</span>) + <span class="string">" World"</span> + chalk.red(<span class="string">"!"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Compose multiple styles using the chainable API</span></span><br><span class="line">log(chalk.blue.bgRed.bold(<span class="string">"Hello world!"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pass in multiple arguments</span></span><br><span class="line">log(chalk.blue(<span class="string">"Hello"</span>, <span class="string">"World!"</span>, <span class="string">"Foo"</span>, <span class="string">"bar"</span>, <span class="string">"biz"</span>, <span class="string">"baz"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Nest styles</span></span><br><span class="line">log(chalk.red(<span class="string">"Hello"</span>, chalk.underline.bgBlue(<span class="string">"world"</span>) + <span class="string">"!"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Nest styles of the same type even (color, underline, background)</span></span><br><span class="line">log(</span><br><span class="line">  chalk.green(</span><br><span class="line">    <span class="string">"I am a green line "</span> +</span><br><span class="line">      chalk.blue.underline.bold(<span class="string">"with a blue substring"</span>) +</span><br><span class="line">      <span class="string">" that becomes green again!"</span></span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2015 template literal</span></span><br><span class="line">log(<span class="string">`</span></span><br><span class="line"><span class="string">CPU: <span class="subst">$&#123;chalk.red(<span class="string">"90%"</span>)&#125;</span></span></span><br><span class="line"><span class="string">RAM: <span class="subst">$&#123;chalk.green(<span class="string">"40%"</span>)&#125;</span></span></span><br><span class="line"><span class="string">DISK: <span class="subst">$&#123;chalk.yellow(<span class="string">"70%"</span>)&#125;</span></span></span><br><span class="line"><span class="string">`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2015 tagged template literal</span></span><br><span class="line">log(chalk<span class="string">`</span></span><br><span class="line"><span class="string">CPU: &#123;red <span class="subst">$&#123;cpu.totalPercent&#125;</span>%&#125;</span></span><br><span class="line"><span class="string">RAM: &#123;green <span class="subst">$&#123;(ram.used <span class="regexp">/ ram.total) * 100&#125;%&#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">DISK: &#123;rgb(255,131,0) $&#123;(disk.used /</span> disk.total) * <span class="number">100</span>&#125;</span>%&#125;</span></span><br><span class="line"><span class="string">`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use RGB colors in terminal emulators that support it.</span></span><br><span class="line">log(chalk.keyword(<span class="string">"orange"</span>)(<span class="string">"Yay for orange colored text!"</span>));</span><br><span class="line">log(chalk.rgb(<span class="number">123</span>, <span class="number">45</span>, <span class="number">67</span>).underline(<span class="string">"Underlined reddish color"</span>));</span><br><span class="line">log(chalk.hex(<span class="string">"#DEADED"</span>).bold(<span class="string">"Bold gray!"</span>));</span><br></pre></td></tr></table></figure><h2 id="2ã€Inquirer-js"><a href="#2ã€Inquirer-js" class="headerlink" title="2ã€Inquirer.js"></a>2ã€Inquirer.js</h2><p>Githubï¼š<a href="https://github.com/SBoudrias/Inquirer.js" target="_blank" rel="noopener">Inquirer.js</a></p><p>ä¸€ä¸ªéå¸¸å¥½çœ‹çš„äº¤äº’å¼å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢,ç”¨å®ƒæ¥å®šåˆ¶ä½ çš„ CLI å§ ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inquirer = <span class="built_in">require</span>(<span class="string">"inquirer"</span>);</span><br><span class="line">inquirer</span><br><span class="line">  .prompt([</span><br><span class="line">    <span class="comment">/* Pass your questions in here */</span></span><br><span class="line">  ])</span><br><span class="line">  .then(<span class="function"><span class="params">answers</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Use user feedback for... whatever!!</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.isTtyError) &#123;</span><br><span class="line">      <span class="comment">// Prompt couldn't be rendered in the current environment</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Something else when wrong</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>Checkbox list examplesï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inquirer = <span class="built_in">require</span>(<span class="string">"inquirer"</span>);</span><br><span class="line"></span><br><span class="line">inquirer</span><br><span class="line">  .prompt([</span><br><span class="line">    &#123;</span><br><span class="line">      type: <span class="string">"checkbox"</span>,</span><br><span class="line">      message: <span class="string">"Select toppings"</span>,</span><br><span class="line">      name: <span class="string">"toppings"</span>,</span><br><span class="line">      choices: [</span><br><span class="line">        <span class="keyword">new</span> inquirer.Separator(<span class="string">" = The Meats = "</span>),</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Pepperoni"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Ham"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Ground Meat"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Bacon"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> inquirer.Separator(<span class="string">" = The Cheeses = "</span>),</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Mozzarella"</span>,</span><br><span class="line">          checked: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Cheddar"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Parmesan"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> inquirer.Separator(<span class="string">" = The usual ="</span>),</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Mushroom"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Tomato"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> inquirer.Separator(<span class="string">" = The extras = "</span>),</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Pineapple"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Olives"</span>,</span><br><span class="line">          disabled: <span class="string">"out of stock"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">"Extra cheese"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      validate: <span class="function"><span class="keyword">function</span>(<span class="params">answer</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (answer.length &lt; <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">"You must choose at least one topping."</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ])</span><br><span class="line">  .then(<span class="function"><span class="params">answers</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(answers, <span class="literal">null</span>, <span class="string">"  "</span>));</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">? Select toppings (Press &lt;space&gt; to select, &lt;a&gt; to toggle</span><br><span class="line"> all, &lt;i&gt; to invert selection)</span><br><span class="line">  = The Meats =</span><br><span class="line">â¯â—¯ Pepperoni</span><br><span class="line"> â—¯ Ham</span><br><span class="line"> â—¯ Ground Meat</span><br><span class="line"> â—¯ Bacon</span><br><span class="line">  = The Cheeses =</span><br><span class="line"> â—‰ Mozzarella</span><br><span class="line">(Move up and down to reveal more choices)</span><br></pre></td></tr></table></figure><h2 id="3ã€Ora"><a href="#3ã€Ora" class="headerlink" title="3ã€Ora"></a>3ã€Ora</h2><p>Githubï¼š<a href="https://github.com/sindresorhus/ora" target="_blank" rel="noopener">ora</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ora = <span class="built_in">require</span>(<span class="string">"ora"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spinner = ora(<span class="string">"Loading unicorns"</span>).start();</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  spinner.color = <span class="string">"cyan"</span>;</span><br><span class="line">  spinner.text = <span class="string">"Loading rainbows"</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  spinner.text = <span class="string">"Loading success"</span>;</span><br><span class="line">  spinner.succeed();</span><br><span class="line">  <span class="comment">// spinner.fail();</span></span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼ˆicon æ˜¯æœ‰å¯¹åº”é¢œè‰²çš„ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â § Loading rainbows</span><br><span class="line">âœ” Loading success</span><br></pre></td></tr></table></figure><h2 id="4ã€figlet-js"><a href="#4ã€figlet-js" class="headerlink" title="4ã€figlet.js"></a>4ã€figlet.js</h2><p>Githubï¼š<a href="https://github.com/patorjk/figlet.js" target="_blank" rel="noopener">figlet.js</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> figlet = <span class="built_in">require</span>(<span class="string">"figlet"</span>);</span><br><span class="line"></span><br><span class="line">figlet(<span class="string">"Hello World!!"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Something went wrong..."</span>);</span><br><span class="line">    <span class="built_in">console</span>.dir(err);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> _   _      _ _        __        __         _     _ _ _</span><br><span class="line">| | | | ___| | | ___   \ \      / /__  _ __| | __| | | |</span><br><span class="line">| |_| |/ _ \ | |/ _ \   \ \ /\ / / _ \| '__| |/ _` | | |</span><br><span class="line">|  _  |  __/ | | (_) |   \ V  V / (_) | |  | | (_| |_|_|</span><br><span class="line">|_| |_|\___|_|_|\___/     \_/\_/ \___/|_|  |_|\__,_(_|_)</span><br></pre></td></tr></table></figure><h2 id="5ã€boxen"><a href="#5ã€boxen" class="headerlink" title="5ã€boxen"></a>5ã€boxen</h2><p>Githubï¼š<a href="https://github.com/sindresorhus/boxen" target="_blank" rel="noopener">boxen</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> boxen = <span class="built_in">require</span>(<span class="string">"boxen"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(boxen(<span class="string">"Hello World"</span>, &#123; <span class="attr">padding</span>: <span class="number">1</span>, <span class="attr">borderColor</span>: <span class="string">"yellow"</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  boxen(<span class="string">"I LOVE YOU"</span>, &#123;</span><br><span class="line">    padding: <span class="number">1</span>,</span><br><span class="line">    margin: <span class="number">1</span>,</span><br><span class="line">    borderStyle: <span class="string">"classic"</span>,</span><br><span class="line">    borderColor: <span class="string">"red"</span>,</span><br><span class="line">    backgroundColor: <span class="string">"magenta"</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ•ˆæœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚                 â”‚</span><br><span class="line">â”‚   Hello World   â”‚</span><br><span class="line">â”‚                 â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">   +----------------+</span><br><span class="line">   |                |</span><br><span class="line">   |   I LOVE YOU   |</span><br><span class="line">   |                |</span><br><span class="line">   +----------------+</span><br></pre></td></tr></table></figure><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><ul><li><a href="https://juejin.im/post/5de4b6caf265da05fc66d9af" target="_blank" rel="noopener">ğŸ“¦ 5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ ğŸ‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸèµ„æºå…±äº« CORS</title>
      <link href="/2020/03/25/cross-cors/"/>
      <url>/2020/03/25/cross-cors/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„ Web åº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚ â€” MDN</p></blockquote><a id="more"></a><h2 id="ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦-CORS"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦-CORS" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ CORS"></a>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ CORS</h2><p>å…è®¸åœ¨ä¸‹åˆ—åœºæ™¯ä¸­ä½¿ç”¨è·¨åŸŸ HTTP è¯·æ±‚ï¼š</p><ul><li>ç”± <code>XMLHttpRequest</code> æˆ– <code>Fetch</code> å‘èµ·çš„è·¨åŸŸ HTTP è¯·æ±‚</li><li>Web å­—ä½“ (CSS ä¸­é€šè¿‡ <code>@font-face</code> ä½¿ç”¨è·¨åŸŸå­—ä½“èµ„æº)</li><li><code>WebGL</code> è´´å›¾</li><li>ä½¿ç”¨ drawImage å°† Images/video ç”»é¢ç»˜åˆ¶åˆ° <code>canvas</code></li></ul><h2 id="ä¸¤ç§è¯·æ±‚"><a href="#ä¸¤ç§è¯·æ±‚" class="headerlink" title="ä¸¤ç§è¯·æ±‚"></a>ä¸¤ç§è¯·æ±‚</h2><p>æµè§ˆå™¨å°† CORS è¯·æ±‚åˆ†æˆä¸¤ç±»ï¼š<strong>ç®€å•è¯·æ±‚</strong>ï¼ˆsimple requestï¼‰å’Œ<strong>éç®€å•è¯·æ±‚</strong>ï¼ˆnot-so-simple requestï¼‰ã€‚</p><p>åªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ï¼ˆä¸ä¼šè§¦å‘ CORS é¢„æ£€è¯·æ±‚ï¼‰ã€‚</p><ul><li><p>è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼š<code>HEAD</code>ã€<code>GET</code>ã€<code>POST</code></p></li><li><p>HTTP çš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š</p><ul><li>Accept</li><li>Accept-Language</li><li>Content-Language</li><li>Last-Event-ID</li><li>Content-Typeï¼ˆåªé™äºä¸‰ä¸ªå€¼ï¼‰<ul><li><code>application/x-www-form-urlencoded</code></li><li><code>multipart/form-data</code></li><li><code>text/plain</code></li></ul></li></ul></li></ul><p>å‡¡æ˜¯ä¸åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±å±äºéç®€å•è¯·æ±‚ã€‚</p><h2 id="CORS-å¦‚ä½•å·¥ä½œ"><a href="#CORS-å¦‚ä½•å·¥ä½œ" class="headerlink" title="CORS å¦‚ä½•å·¥ä½œ"></a>CORS å¦‚ä½•å·¥ä½œ</h2><p>é¦–å…ˆï¼Œæµè§ˆå™¨åˆ¤æ–­è¯·æ±‚æ˜¯ç®€å•è¯·æ±‚è¿˜æ˜¯å¤æ‚è¯·æ±‚ï¼ˆéç®€å•è¯·æ±‚ï¼‰ã€‚</p><p>å¦‚æœæ˜¯å¤æ‚è¯·æ±‚ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒçœŸæ­£çš„è¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆä½¿ç”¨ OPTIONS æ–¹æ³•å‘é€ä¸€ä¸ª<strong>é¢„æ£€è¯·æ±‚</strong> (preflight request)ï¼ŒOPTIONS æ˜¯ <code>HTTP/1.1</code> åè®®ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œç”¨ä»¥ä»æœåŠ¡å™¨è·å–æ›´å¤šä¿¡æ¯ã€‚</p><p>è¯¥æ–¹æ³•ä¸ä¼šå¯¹æœåŠ¡å™¨èµ„æºäº§ç”Ÿå½±å“ï¼Œé¢„æ£€è¯·æ±‚ä¸­åŒæ—¶æºå¸¦äº†ä¸‹é¢ä¸¤ä¸ªé¦–éƒ¨å­—æ®µï¼š</p><ul><li><code>Access-Control-Request-Method</code>: è¿™ä¸ªå­—æ®µè¡¨æ˜äº†è¯·æ±‚çš„æ–¹æ³•ï¼›</li><li><code>Access-Control-Request-Headers</code>: è¿™ä¸ªå­—æ®µè¡¨æ˜äº†è¿™ä¸ªè¯·æ±‚çš„ Headersï¼›</li><li><code>Origin</code>: è¿™ä¸ªå­—æ®µè¡¨æ˜äº†è¯·æ±‚å‘å‡ºçš„åŸŸã€‚</li></ul><p>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œä¼šä»¥ <code>Access-Control-* response headers</code> çš„å½¢å¼å¯¹å®¢æˆ·ç«¯è¿›è¡Œå›å¤ï¼š</p><ul><li><code>Access-Control-Allow-Origin</code>: èƒ½å¤Ÿè¢«å…è®¸å‘å‡ºè¿™ä¸ªè¯·æ±‚çš„åŸŸåï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>*</code>æ¥è¡¨æ˜å…è®¸æ‰€æœ‰åŸŸåï¼›</li><li><code>Access-Control-Allow-Methods</code>: ç”¨é€—å·åˆ†éš”çš„è¢«å…è®¸çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ï¼›</li><li><code>Access-Control-Allow-Headers</code>: ç”¨é€—å·åˆ†éš”çš„è¢«å…è®¸çš„è¯·æ±‚å¤´éƒ¨å­—æ®µçš„åˆ—è¡¨ï¼›</li><li><code>Access-Control-Max-Age</code>: è¿™ä¸ª<strong>é¢„æ£€è¯·æ±‚èƒ½è¢«ç¼“å­˜çš„æœ€é•¿æ—¶é—´</strong>ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…ï¼ŒåŒä¸€ä¸ªè¯·æ±‚ä¸ä¼šå†æ¬¡å‘å‡ºé¢„æ£€è¯·æ±‚ã€‚</li></ul><h2 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h2><p>å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡º CORS è¯·æ±‚ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œè‡ªåŠ¨å¢åŠ ä¸€ä¸ª Origin å­—æ®µï¼Œç”¨æ¥è¯´æ˜è¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚æœåŠ¡å™¨æ‹¿åˆ°è¯·æ±‚ä¹‹åï¼Œåœ¨å›åº”æ—¶å¯¹åº”åœ°æ·»åŠ <code>Access-Control-Allow-Origin</code>å­—æ®µï¼Œå¦‚æœ Origin ä¸åœ¨è¿™ä¸ªå­—æ®µçš„èŒƒå›´ä¸­ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šå°†å“åº”æ‹¦æˆªã€‚</p><p><strong>Access-Control-Allow-Credentials</strong>ã€‚è¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€ Cookieï¼Œå¯¹äºè·¨åŸŸè¯·æ±‚ï¼Œæµè§ˆå™¨å¯¹è¿™ä¸ªå­—æ®µé»˜è®¤å€¼è®¾ä¸º falseï¼Œè€Œå¦‚æœéœ€è¦æ‹¿åˆ°æµè§ˆå™¨çš„ Cookieï¼Œéœ€è¦æ·»åŠ è¿™ä¸ªå“åº”å¤´å¹¶è®¾ä¸º true, å¹¶ä¸”åœ¨å‰ç«¯ä¹Ÿéœ€è¦è®¾ç½®<code>withCredentials</code>å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.withCredentials = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p><strong>Access-Control-Expose-Headers</strong>ã€‚è¿™ä¸ªå­—æ®µæ˜¯ç»™ <code>XMLHttpRequest</code> å¯¹è±¡èµ‹èƒ½ï¼Œè®©å®ƒä¸ä»…å¯ä»¥æ‹¿åˆ°åŸºæœ¬çš„ 6 ä¸ªå“åº”å¤´å­—æ®µï¼ˆåŒ…æ‹¬<code>Cache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedå’ŒPragma</code>ï¼‰, è¿˜èƒ½æ‹¿åˆ°è¿™ä¸ªå­—æ®µå£°æ˜çš„å“åº”å¤´å­—æ®µã€‚æ¯”å¦‚è¿™æ ·è®¾ç½®:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Access-Control-Expose-Headers</span>: aaa</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆåœ¨å‰ç«¯å¯ä»¥é€šè¿‡ <code>XMLHttpRequest.getResponseHeader(&#39;aaa&#39;)</code> æ‹¿åˆ° aaa è¿™ä¸ªå­—æ®µçš„å€¼ã€‚</p><h3 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h3><p>æ¯”å¦‚ä¸‹é¢å¼€å¯ä¸€ä¸ªç«¯å£ä¸º 8001 çš„æœåŠ¡ï¼Œå»è¯·æ±‚ç«¯å£ä¸º 8000 çš„æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">"http://127.0.0.1:8000"</span>;</span><br><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">username</span>: <span class="string">"example"</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> myHeaders = <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">  <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  method: <span class="string">"POST"</span>,</span><br><span class="line">  headers: myHeaders,</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(data),</span><br><span class="line">  mode: <span class="string">"cors"</span></span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(res.postData)); <span class="comment">//&#123;username: "example"&#125;</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ç«¯å£ä¸º 8000 çš„æœåŠ¡ç«¯è®¾ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span>,</span><br><span class="line">    <span class="string">"Access-Control-Allow-Origin"</span>: <span class="string">"*"</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">let</span> resData = &#123;&#125;;</span><br><span class="line">  <span class="keyword">let</span> postData = [];</span><br><span class="line">  req.on(<span class="string">"data"</span>, chunk =&gt; &#123;</span><br><span class="line">    postData.push(chunk);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  req.on(<span class="string">"end"</span>, () =&gt; &#123;</span><br><span class="line">    resData.postData = Buffer.concat(postData).toString();</span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(resData));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><h2 id="éç®€å•è¯·æ±‚"><a href="#éç®€å•è¯·æ±‚" class="headerlink" title="éç®€å•è¯·æ±‚"></a>éç®€å•è¯·æ±‚</h2><p>éç®€å•è¯·æ±‚ç›¸å¯¹è€Œè¨€ä¼šæœ‰äº›ä¸åŒï¼Œä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢: <strong>é¢„æ£€è¯·æ±‚</strong>å’Œ<strong>å“åº”å­—æ®µ</strong>ã€‚</p><h3 id="é¢„æ£€è¯·æ±‚"><a href="#é¢„æ£€è¯·æ±‚" class="headerlink" title="é¢„æ£€è¯·æ±‚"></a>é¢„æ£€è¯·æ±‚</h3><p>æ¯”å¦‚ä½¿ç”¨ PUT è¯·æ±‚æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">"http://127.0.0.1:8000"</span>;</span><br><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">username</span>: <span class="string">"example"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myHeaders = <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">  <span class="string">"X-Custom-Header"</span>: <span class="string">"xxx"</span></span><br><span class="line">&#125;);</span><br><span class="line">fetch(url, &#123;</span><br><span class="line">  method: <span class="string">"PUT"</span>,   <span class="comment">// æ”¹æˆ PUT</span></span><br><span class="line">  headers: myHeaders,</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(data),</span><br><span class="line">  mode: <span class="string">"cors"</span></span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(res.postData)); <span class="comment">//&#123;username: "example"&#125;</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>Node éƒ¨åˆ†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">  <span class="string">"Content-Type"</span>: <span class="string">"text/json"</span>,</span><br><span class="line">  <span class="string">"Access-Control-Allow-Origin"</span>: <span class="string">"*"</span>,</span><br><span class="line">  <span class="string">"Access-Control-Allow-Methods"</span>: <span class="string">"PUT, POST, GET"</span>,</span><br><span class="line">  <span class="string">"Access-Control-Allow-Headers"</span>: <span class="string">"X-Custom-Header"</span>,</span><br><span class="line">  <span class="string">"Access-Control-Max-Age"</span>: <span class="number">2000</span>,</span><br><span class="line">  <span class="string">"Access-Control-Allow-Credentials"</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å½“è¿™æ®µä»£ç æ‰§è¡Œåï¼Œé¦–å…ˆä¼šå‘é€<strong>é¢„æ£€è¯·æ±‚</strong>ã€‚è¿™ä¸ªé¢„æ£€è¯·æ±‚çš„è¯·æ±‚è¡Œå’Œè¯·æ±‚ä½“æ˜¯ä¸‹é¢è¿™ä¸ªæ ¼å¼:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">OPTIONS</span> <span class="string">/</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: 127.0.0.1:8000</span><br><span class="line"><span class="attribute">Access-Control-Request-Method</span>: PUT</span><br><span class="line"><span class="attribute">Access-Control-Request-Headers</span>: x-custom-header</span><br><span class="line"><span class="attribute">Origin</span>: http://127.0.0.1:8001</span><br></pre></td></tr></table></figure><p>é¢„æ£€è¯·æ±‚çš„æ–¹æ³•æ˜¯<code>OPTIONS</code>ï¼ŒåŒæ—¶ä¼šåŠ ä¸Š Origin æºåœ°å€å’Œ Host ç›®æ ‡åœ°å€ï¼Œè¿™å¾ˆç®€å•ã€‚åŒæ—¶ä¹Ÿä¼šåŠ ä¸Šä¸¤ä¸ªå…³é”®çš„å­—æ®µ:</p><ul><li><code>Access-Control-Request-Method</code>, åˆ—å‡º CORS è¯·æ±‚ç”¨åˆ°å“ªä¸ª HTTP æ–¹æ³•</li><li><code>Access-Control-Request-Headers</code>ï¼ŒæŒ‡å®š CORS è¯·æ±‚å°†è¦åŠ ä¸Šä»€ä¹ˆè¯·æ±‚å¤´</li></ul><p>è¿™æ˜¯é¢„æ£€è¯·æ±‚ã€‚æ¥ä¸‹æ¥æ˜¯<strong>å“åº”å­—æ®µ</strong>ã€‚</p><p>å“åº”å­—æ®µä¹Ÿåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å¯¹äº<strong>é¢„æ£€è¯·æ±‚çš„å“åº”</strong>ï¼Œä¸€éƒ¨åˆ†æ˜¯å¯¹äº<strong>CORS è¯·æ±‚çš„å“åº”</strong>ã€‚</p><p><strong>é¢„æ£€è¯·æ±‚çš„å“åº”</strong>ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span>: text/json</span><br><span class="line"><span class="attribute">Access-Control-Allow-Origin</span>: *</span><br><span class="line"><span class="attribute">Access-Control-Allow-Methods</span>: PUT, POST, GET</span><br><span class="line"><span class="attribute">Access-Control-Allow-Headers</span>: X-Custom-Header</span><br><span class="line"><span class="attribute">Access-Control-Max-Age</span>: 2000</span><br><span class="line"><span class="attribute">Access-Control-Allow-Credentials</span>: true</span><br><span class="line"><span class="attribute">Date</span>: Fri, 27 Mar 2020 08:16:58 GMT</span><br><span class="line"><span class="attribute">Connection</span>: keep-alive</span><br><span class="line"><span class="attribute">Transfer-Encoding</span>: chunked</span><br></pre></td></tr></table></figure><p>åœ¨é¢„æ£€è¯·æ±‚çš„å“åº”è¿”å›åï¼Œå¦‚æœè¯·æ±‚ä¸æ»¡è¶³å“åº”å¤´çš„æ¡ä»¶ï¼Œåˆ™è§¦å‘<code>XMLHttpRequest</code>çš„<code>onerror</code>æ–¹æ³•ï¼Œå½“ç„¶åé¢çœŸæ­£çš„ CORS è¯·æ±‚ä¹Ÿä¸ä¼šå‘å‡ºå»äº†ã€‚</p><p><strong>CORS è¯·æ±‚çš„å“åº”</strong>ï¼šç°åœ¨å®ƒå’Œç®€å•è¯·æ±‚çš„æƒ…å†µæ˜¯ä¸€æ ·çš„ã€‚æµè§ˆå™¨è‡ªåŠ¨åŠ ä¸Š Origin å­—æ®µï¼ŒæœåŠ¡ç«¯å“åº”å¤´è¿”å› <code>Access-Control-Allow-Origin</code>ã€‚åœ¨è®¾ç½®çš„<code>Access-Control-Max-Age: 2000</code>é‡Œæ˜¯ä¸ä¼šå†æ¬¡å‘é€é¢„æ£€è¯·æ±‚çš„ï¼Œé™¤éæ—¶é—´è¿‡æœŸã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://juejin.im/post/5e76bd516fb9a07cce750746#heading-67" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿæµè§ˆå™¨å¦‚ä½•æ‹¦æˆªå“åº”ï¼Ÿå¦‚ä½•è§£å†³</a></li><li>é˜®ä¸€å³° <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£</a></li><li>MDN <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">HTTP è®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">ä½¿ç”¨ Fetch</a></li><li><a href="https://coding.imooc.com/learn/list/225.html" target="_blank" rel="noopener">HTTPåè®®åŸç†+å®è·µWebå¼€å‘å·¥ç¨‹å¸ˆå¿…å­¦</a> - æ…•è¯¾ç½‘ä»˜è´¹è¯¾ç¨‹</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸè§£å†³æ–¹æ¡ˆ JSONP</title>
      <link href="/2020/03/25/cross-jsonp/"/>
      <url>/2020/03/25/cross-jsonp/</url>
      
        <content type="html"><![CDATA[<blockquote><p>JSONP è¯·æ±‚æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨äº† â€œAjax è¯·æ±‚ä¼šå—åˆ°åŒæºç­–ç•¥é™åˆ¶ï¼Œè€Œ script æ ‡ç­¾è¯·æ±‚ä¸ä¼šâ€ è¿™ä¸€ç‚¹æ¥ç»•è¿‡åŒæºç­–ç•¥ã€‚</p></blockquote><a id="more"></a><h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p>ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>åŒæºç­–ç•¥æŒ‡çš„æ˜¯ï¼šåè®®+åŸŸå+ç«¯å£ä¸‰è€…çš†ç›¸åŒï¼Œå¯ä»¥è§†ä¸ºåœ¨åŒä¸€ä¸ªåŸŸï¼Œå¦åˆ™ä¸ºä¸åŒåŸŸã€‚åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚</p><p>ä½œç”¨æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚</p><p>æ‰€é™åˆ¶çš„è·¨åŸŸäº¤äº’åŒ…æ‹¬ï¼š</p><ul><li>Cookieã€LocalStorageã€IndexdDB ç­‰å­˜å‚¨å†…å®¹ï¼›</li><li>DOM èŠ‚ç‚¹ï¼›</li><li>Ajax è¯·æ±‚ã€‚</li></ul><h2 id="Ajax-ä¸ºä»€ä¹ˆä¸èƒ½è·¨åŸŸ"><a href="#Ajax-ä¸ºä»€ä¹ˆä¸èƒ½è·¨åŸŸ" class="headerlink" title="Ajax ä¸ºä»€ä¹ˆä¸èƒ½è·¨åŸŸ"></a>Ajax ä¸ºä»€ä¹ˆä¸èƒ½è·¨åŸŸ</h2><p>Ajax å…¶å®å°±æ˜¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª GET æˆ– POST è¯·æ±‚ï¼Œç„¶åå–å¾—æœåŠ¡å™¨å“åº”ç»“æœï¼Œè¿”å›å®¢æˆ·ç«¯ã€‚Ajax è·¨åŸŸè¯·æ±‚ï¼Œåœ¨æœåŠ¡å™¨ç«¯ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œåªæ˜¯æœåŠ¡ç«¯å“åº”æ•°æ®è¿”å›ç»™æµè§ˆå™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ ¹æ®å“åº”å¤´çš„<code>Access-Control-Allow-Origin</code>å­—æ®µçš„å€¼æ¥åˆ¤æ–­æ˜¯å¦æœ‰æƒé™è·å–æ•°æ®ã€‚å› æ­¤ï¼ŒæœåŠ¡ç«¯å¦‚æœæ²¡æœ‰è®¾ç½®è·¨åŸŸå­—æ®µè®¾ç½®ï¼Œè·¨åŸŸæ˜¯æ²¡æœ‰æƒé™è®¿é—®ï¼Œæ•°æ®è¢«æµè§ˆå™¨ç»™æ‹¦æˆªäº†ã€‚</p><p>æ‰€ä»¥ï¼Œè¦è§£å†³çš„é—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•ä»å®¢æˆ·ç«¯æ‹¿åˆ°è¿”å›çš„æ•°æ®</strong>ï¼Ÿ</p><p>å…¶å®ï¼Œåœ¨åŒæºç­–ç•¥çš„åŸºç¡€ä¸Šï¼Œé€‰æ‹©æ€§åœ°ä¸ºåŒæºç­–ç•¥å¼€æ”¾äº†ä¸€äº›åé—¨ã€‚ä¾‹å¦‚ imgã€scriptã€style ç­‰æ ‡ç­¾ï¼Œéƒ½å…è®¸è·¨åŸŸå¼•ç”¨èµ„æºã€‚</p><p>æ‰€ä»¥ï¼Œ JSONP æ¥äº†ã€‚</p><h2 id="JSONP-å®ç°"><a href="#JSONP-å®ç°" class="headerlink" title="JSONP å®ç°"></a>JSONP å®ç°</h2><p>JSONP(JSON with Paddingï¼ˆå¡«å……ï¼‰)æ˜¯ JSON çš„ä¸€ç§â€œä½¿ç”¨æ¨¡å¼â€ï¼Œæœ¬è´¨ä¸æ˜¯ Ajax è¯·æ±‚ï¼Œæ˜¯ script æ ‡ç­¾è¯·æ±‚ã€‚JSONP è¯·æ±‚æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨äº† â€œAjax è¯·æ±‚ä¼šå—åˆ°åŒæºç­–ç•¥é™åˆ¶ï¼Œè€Œ script æ ‡ç­¾è¯·æ±‚ä¸ä¼šâ€ è¿™ä¸€ç‚¹æ¥ç»•è¿‡åŒæºç­–ç•¥ã€‚</p><p>ç®€å• JSONP å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jsonp</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(req) &#123;</span><br><span class="line">    <span class="keyword">this</span>.url = req.url;</span><br><span class="line">    <span class="keyword">this</span>.callbackName = req.callbackName;</span><br><span class="line">  &#125;</span><br><span class="line">  create() &#123;</span><br><span class="line">    <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.url&#125;</span>?callback=<span class="subst">$&#123;<span class="keyword">this</span>.callbackName&#125;</span>`</span>;</span><br><span class="line">    script.src = url;</span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(script);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Jsonp(&#123;</span><br><span class="line">  url: <span class="string">"http://127.0.0.1:8000/"</span>,</span><br><span class="line">  callbackName: <span class="string">"getMsg"</span></span><br><span class="line">&#125;).create();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMsg</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;data.name&#125;</span>, and <span class="subst">$&#123;data.age&#125;</span> years old.`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯ï¼ˆNodeï¼‰:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  <span class="keyword">const</span> query = querystring.parse(url.split(<span class="string">"?"</span>)[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> &#123; callback &#125; = query;</span><br><span class="line">  <span class="keyword">const</span> data = &#123;</span><br><span class="line">    name: <span class="string">"Yang Min"</span>,</span><br><span class="line">    age: <span class="string">"8"</span></span><br><span class="line">  &#125;;</span><br><span class="line">  res.end(<span class="string">`<span class="subst">$&#123;callback&#125;</span>('<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>')`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><p>å‰ç«¯åˆ©ç”¨ <code>http-server -p 8001 .</code>ï¼Œå¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œç„¶å Node ä¹Ÿå¼€å¯ä¸€ä¸ªç«¯å£ä¸º 8000 çš„æœåŠ¡ï¼Œè¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">My name is Yang Min, and 8 years old.</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ª-JSONP-çš„æ­¥éª¤å®è´¨"><a href="#ä¸€ä¸ª-JSONP-çš„æ­¥éª¤å®è´¨" class="headerlink" title="ä¸€ä¸ª JSONP çš„æ­¥éª¤å®è´¨"></a>ä¸€ä¸ª JSONP çš„æ­¥éª¤å®è´¨</h3><p>å®¢æˆ·ç«¯å‘é€ script è¯·æ±‚ï¼Œå‚æ•°ä¸­å¸¦ç€å¤„ç†è¿”å›æ•°æ®çš„å›è°ƒå‡½æ•°çš„åå­— (é€šå¸¸æ˜¯ callback)ï¼Œå¦‚è¯·æ±‚ script çš„ url æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/?callback=getMsg</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œä»¥å›è°ƒå‡½æ•°åå’Œè¿”å›æ•°æ®ç»„æˆç«‹å³æ‰§è¡Œå‡½æ•°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šå…¶ä¸­ callback çš„å€¼æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„å›è°ƒå‡½æ•°çš„åå­—ï¼Œå‡è®¾å›è°ƒå‡½æ•°çš„åå­—æ˜¯ getMsgï¼Œè¿”å›è„šæœ¬çš„å†…å®¹å°±æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getMsg(<span class="string">"&#123;name: 'Yang Min', age: '8'&#125;"</span>);</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯æ”¶åˆ° JavaScript è„šæœ¬å†…å®¹åï¼Œç«‹å³æ‰§è¡Œè„šæœ¬ï¼Œè¿™æ ·å°±å®ç°äº†è·å–è·¨åŸŸæœåŠ¡å™¨æ•°æ®çš„ç›®çš„ã€‚</p><p>å¾ˆæ˜æ˜¾ï¼Œç”±äº JSONP æŠ€æœ¯æœ¬è´¨ä¸Šåˆ©ç”¨äº† script è„šæœ¬è¯·æ±‚ï¼Œæ‰€ä»¥åªèƒ½å®ç° GET è·¨åŸŸè¯·æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ JSONP è·¨åŸŸçš„æœ€å¤§é™åˆ¶ã€‚</p><p>ç”±äº server äº§ç”Ÿçš„å“åº”ä¸º json æ•°æ®çš„åŒ…è£…ï¼ˆæ•…ç§°ä¹‹ä¸º jsonpï¼Œå³ json paddingï¼‰ï¼Œå½¢å¦‚ï¼š<code>getMsg(&quot;{name: &#39;Yang Min&#39;, age: &#39;8&#39;}&quot;)</code></p><h2 id="JSONP-å°è£…"><a href="#JSONP-å°è£…" class="headerlink" title="JSONP å°è£…"></a>JSONP å°è£…</h2><p>å®¢æˆ·ç«¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jsonp = <span class="function">(<span class="params">&#123; url, params, callbackName &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> generateURL = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> dataStr = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">      dataStr += <span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>&amp;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dataStr += <span class="string">`callback=<span class="subst">$&#123;callbackName&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;dataStr&#125;</span>`</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å›è°ƒå‡½æ•°åç§°</span></span><br><span class="line">    callbackName =</span><br><span class="line">      callbackName ||</span><br><span class="line">      <span class="string">"cb"</span> +</span><br><span class="line">        <span class="built_in">Math</span>.random()</span><br><span class="line">          .toString()</span><br><span class="line">          .replace(<span class="string">"."</span>, <span class="string">""</span>);</span><br><span class="line">    <span class="keyword">let</span> scriptEle = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    scriptEle.src = generateURL();</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(scriptEle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»‘å®šåˆ° window ä¸Šï¼Œä¸ºäº†åé¢è°ƒç”¨</span></span><br><span class="line">    <span class="built_in">window</span>[callbackName] = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(data);</span><br><span class="line">      <span class="comment">// script æ‰§è¡Œå®Œäº†ï¼Œæˆä¸ºæ— ç”¨å…ƒç´ ï¼Œéœ€è¦æ¸…é™¤</span></span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(scriptEle);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">jsonp(&#123;</span><br><span class="line">  url: <span class="string">"http://127.0.0.1:8000/"</span>,</span><br><span class="line">  params: &#123;</span><br><span class="line">    name: <span class="string">"Yang Min"</span>,</span><br><span class="line">    age: <span class="string">"8"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  callbackName: <span class="string">"getData"</span></span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">JSON</span>.parse(data))</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data); <span class="comment">// &#123;name: "Yang Min", age: "8"&#125;</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>Node ç«¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  <span class="keyword">const</span> query = querystring.parse(url.split(<span class="string">"?"</span>)[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> &#123; name, age, callback &#125; = query;</span><br><span class="line">  <span class="keyword">const</span> data = &#123;</span><br><span class="line">    name,</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">  res.end(<span class="string">`<span class="subst">$&#123;callback&#125;</span>('<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>')`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><h2 id="jQuery-ä¸­çš„-JSONP"><a href="#jQuery-ä¸­çš„-JSONP" class="headerlink" title="jQuery ä¸­çš„ JSONP"></a>jQuery ä¸­çš„ JSONP</h2><p>Node éƒ¨åˆ†ä¸å˜ï¼Œä½¿ç”¨ jQuery(3.4.1) å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAjaxData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">    url: <span class="string">"http://127.0.0.1:8000/"</span>,</span><br><span class="line">    dataType: <span class="string">"jsonp"</span>, <span class="comment">//ç”± JSON æ”¹ä¸º JSONP</span></span><br><span class="line">    jsonp: <span class="string">"callback"</span>, <span class="comment">//ä¼ é€’ç»™è¯·æ±‚å¤„ç†ç¨‹åºæˆ–é¡µé¢çš„ï¼Œæ ‡è¯†jsonpå›è°ƒå‡½æ•°å(ä¸€èˆ¬ä¸º:callback)</span></span><br><span class="line">    jsonpCallback: <span class="string">"getData"</span>, <span class="comment">//callbackçš„functionåç§°ï¼ŒæˆåŠŸå°±ä¼šç›´æ¥èµ° success æ–¹æ³•</span></span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">      data = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;data.name&#125;</span>, and <span class="subst">$&#123;data.age&#125;</span> years old.`</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"Error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">getAjaxData();</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å»¶è¿Ÿå¯¹è±¡é‡æ–°å†™ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAjaxData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> def = $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">    url: <span class="string">"http://127.0.0.1:8000/"</span>,</span><br><span class="line">    dataType: <span class="string">"jsonp"</span>,</span><br><span class="line">    jsonp: <span class="string">"callback"</span>,</span><br><span class="line">    jsonpCallback: <span class="string">"getData"</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  def</span><br><span class="line">    .done(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      data = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;data.name&#125;</span>, and <span class="subst">$&#123;data.age&#125;</span> years old.`</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .fail(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JSONP-ç¼ºç‚¹"><a href="#JSONP-ç¼ºç‚¹" class="headerlink" title="JSONP ç¼ºç‚¹"></a>JSONP ç¼ºç‚¹</h2><ul><li>åªæ”¯æŒ GET è¯·æ±‚</li><li>åªæ”¯æŒè·¨åŸŸ HTTP è¯·æ±‚è¿™ç§æƒ…å†µï¼Œä¸èƒ½è§£å†³ä¸åŒåŸŸçš„ä¸¤ä¸ªé¡µé¢ä¹‹é—´å¦‚ä½•è¿›è¡Œ JavaScript è°ƒç”¨çš„é—®é¢˜</li><li>è°ƒç”¨å¤±è´¥çš„æ—¶å€™ä¸ä¼šè¿”å›å„ç§ HTTP çŠ¶æ€ç ã€‚</li><li>å®‰å…¨æ€§ï¼Œä¸‡ä¸€å‡å¦‚æä¾› JSONP çš„æœåŠ¡å­˜åœ¨é¡µé¢æ³¨å…¥æ¼æ´ï¼Œå³å®ƒè¿”å›çš„ javascript çš„å†…å®¹è¢«äººæ§åˆ¶çš„ã€‚</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://juejin.im/post/5e76bd516fb9a07cce750746#heading-67" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿæµè§ˆå™¨å¦‚ä½•æ‹¦æˆªå“åº”ï¼Ÿå¦‚ä½•è§£å†³</a></li><li><a href="https://segmentfault.com/a/1190000009773724" target="_blank" rel="noopener">jsonp è·¨åŸŸåŸç†åˆ†æ</a> - åˆ†æäº† Ajax å’Œ jsonp ä¹‹é—´çš„å…³ç³»</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node ä¸­é—´ä»¶åŸç†</title>
      <link href="/2020/03/20/node-middleware/"/>
      <url>/2020/03/20/node-middleware/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Koa å’Œ Express çš„è®¾è®¡é£æ ¼éå¸¸ç±»ä¼¼ï¼Œåº•å±‚ä¹Ÿéƒ½æ˜¯å…±ç”¨çš„åŒä¸€å¥— HTTP åŸºç¡€åº“ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªæ˜¾è‘—çš„åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„é»˜è®¤å¼‚æ­¥è§£å†³æ–¹æ¡ˆä¹‹å¤–ï¼Œä¸»è¦çš„ç‰¹ç‚¹è¿˜æœ‰ä¸‹é¢å‡ ä¸ªã€‚</p></blockquote><a id="more"></a><h2 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a>Middleware</h2><p>Koa çš„ä¸­é—´ä»¶å’Œ Express ä¸åŒï¼ŒKoa é€‰æ‹©äº†æ´‹è‘±åœˆæ¨¡å‹ã€‚</p><p><img src="https://ae01.alicdn.com/kf/H6d60d151712d4e1e8dfc887f5839c7ecz.png" alt="ä¸­é—´ä»¶æ´‹è‘±å›¾"></p><p>æ‰€æœ‰çš„è¯·æ±‚ç»è¿‡ä¸€ä¸ªä¸­é—´ä»¶çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œå¯¹æ¯” Express å½¢å¼çš„ä¸­é—´ä»¶ï¼ŒKoa çš„æ¨¡å‹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°åç½®å¤„ç†é€»è¾‘ï¼Œå¯¹æ¯” Koa å’Œ Express çš„ Compress ä¸­é—´ä»¶å°±å¯ä»¥æ˜æ˜¾çš„æ„Ÿå—åˆ° Koa ä¸­é—´ä»¶æ¨¡å‹çš„ä¼˜åŠ¿ã€‚</p><h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>å’Œ Express åªæœ‰ Request å’Œ Response ä¸¤ä¸ªå¯¹è±¡ä¸åŒï¼ŒKoa å¢åŠ äº†ä¸€ä¸ª Context çš„å¯¹è±¡ï¼Œä½œä¸ºè¿™æ¬¡è¯·æ±‚çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆåœ¨ Koa 1 ä¸­ä¸ºä¸­é—´ä»¶çš„ thisï¼Œåœ¨ Koa 2 ä¸­ä½œä¸ºä¸­é—´ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€æ¬¡è¯·æ±‚ç›¸å…³çš„ä¸Šä¸‹æ–‡éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚ç±»ä¼¼ traceId è¿™ç§éœ€è¦è´¯ç©¿æ•´ä¸ªè¯·æ±‚ï¼ˆåœ¨åç»­ä»»ä½•ä¸€ä¸ªåœ°æ–¹è¿›è¡Œå…¶ä»–è°ƒç”¨éƒ½éœ€è¦ç”¨åˆ°ï¼‰çš„å±æ€§å°±å¯ä»¥æŒ‚è½½ä¸Šå»ã€‚ç›¸è¾ƒäº request å’Œ response è€Œè¨€æ›´åŠ ç¬¦åˆè¯­ä¹‰ã€‚</p><p>åŒæ—¶ Context ä¸Šä¹ŸæŒ‚è½½äº† Request å’Œ Response ä¸¤ä¸ªå¯¹è±¡ã€‚å’Œ Express ç±»ä¼¼ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æä¾›äº†å¤§é‡çš„ä¾¿æ·æ–¹æ³•è¾…åŠ©å¼€å‘ï¼Œä¾‹å¦‚</p><ul><li>get request.query</li><li>get request.hostname</li><li>set response.body</li><li>set response.status</li></ul><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><p>é€šè¿‡åŒæ­¥æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç å¸¦æ¥çš„å¦å¤–ä¸€ä¸ªéå¸¸å¤§çš„å¥½å¤„å°±æ˜¯å¼‚å¸¸å¤„ç†éå¸¸è‡ªç„¶ï¼Œä½¿ç”¨ <code>try catch</code> å°±å¯ä»¥å°†æŒ‰ç…§è§„èŒƒç¼–å†™çš„ä»£ç ä¸­çš„æ‰€æœ‰é”™è¯¯éƒ½æ•è·åˆ°ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥å¾ˆä¾¿æ·çš„ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">onerror</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    ctx.app.emit(<span class="string">"error"</span>, err);</span><br><span class="line">    ctx.body = <span class="string">"server error"</span>;</span><br><span class="line">    ctx.status = err.status || <span class="number">500</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€è¦å°†è¿™ä¸ªä¸­é—´ä»¶æ”¾åœ¨å…¶ä»–ä¸­é—´ä»¶ä¹‹å‰ï¼Œå°±å¯ä»¥æ•è·å®ƒä»¬æ‰€æœ‰çš„åŒæ­¥æˆ–è€…å¼‚æ­¥ä»£ç ä¸­æŠ›å‡ºçš„å¼‚å¸¸äº†ã€‚</p><p>æ³¨ï¼šä»¥ä¸Šæ‰€æœ‰çš†æ¥è‡ª<a href="https://eggjs.org/zh-cn/intro/egg-and-koa.html" target="_blank" rel="noopener">Egg.js ä¸ Koa</a></p><h2 id="ä¸­é—´ä»¶æ¨¡æ‹Ÿ"><a href="#ä¸­é—´ä»¶æ¨¡æ‹Ÿ" class="headerlink" title="ä¸­é—´ä»¶æ¨¡æ‹Ÿ"></a>ä¸­é—´ä»¶æ¨¡æ‹Ÿ</h2><h3 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> slice = <span class="built_in">Array</span>.prototype.slice;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LikeExpress</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// å­˜æ”¾ä¸­é—´ä»¶çš„åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">this</span>.routes = &#123;</span><br><span class="line">      all: [], <span class="comment">// app.use(...)</span></span><br><span class="line">      get: [], <span class="comment">// app.get(...)</span></span><br><span class="line">      post: [] <span class="comment">// app.post(...)</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  register(path) &#123;</span><br><span class="line">    <span class="keyword">const</span> info = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> path === <span class="string">"string"</span>) &#123;</span><br><span class="line">      info.path = path;</span><br><span class="line">      <span class="comment">// ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œè½¬æ¢ä¸ºæ•°ç»„ï¼Œå­˜å…¥ stack</span></span><br><span class="line">      info.stack = slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      info.path = <span class="string">"/"</span>;</span><br><span class="line">      <span class="comment">// ä»ç¬¬ä¸€ä¸ªå‚æ•°å¼€å§‹ï¼Œè½¬æ¢ä¸ºæ•°ç»„ï¼Œå­˜å…¥ stack</span></span><br><span class="line">      info.stack = slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> info;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  use() &#123;</span><br><span class="line">    <span class="keyword">const</span> info = <span class="keyword">this</span>.register.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">this</span>.routes.all.push(info);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  get() &#123;</span><br><span class="line">    <span class="keyword">const</span> info = <span class="keyword">this</span>.register.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">this</span>.routes.get.push(info);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  post() &#123;</span><br><span class="line">    <span class="keyword">const</span> info = <span class="keyword">this</span>.register.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">this</span>.routes.post.push(info);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  match(method, url) &#123;</span><br><span class="line">    <span class="keyword">let</span> stack = [];</span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">"/favicon.ico"</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> stack;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å– routes</span></span><br><span class="line">    <span class="keyword">let</span> curRoutes = [];</span><br><span class="line">    curRoutes = curRoutes.concat(<span class="keyword">this</span>.routes.all);</span><br><span class="line">    curRoutes = curRoutes.concat(<span class="keyword">this</span>.routes[method]);</span><br><span class="line"></span><br><span class="line">    curRoutes.forEach(<span class="function"><span class="params">routeInfo</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (url.indexOf(routeInfo.path) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// url === '/api/get-cookie' ä¸” routeInfo.path === '/'</span></span><br><span class="line">        <span class="comment">// url === '/api/get-cookie' ä¸” routeInfo.path === '/api'</span></span><br><span class="line">        <span class="comment">// url === '/api/get-cookie' ä¸” routeInfo.path === '/api/get-cookie'</span></span><br><span class="line">        stack = stack.concat(routeInfo.stack);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> stack;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¸å¿ƒçš„ next æœºåˆ¶</span></span><br><span class="line">  handle(req, res, stack) &#123;</span><br><span class="line">    <span class="keyword">const</span> next = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ‹¿åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä¸­é—´ä»¶</span></span><br><span class="line">      <span class="keyword">const</span> middleware = stack.shift();</span><br><span class="line">      <span class="keyword">if</span> (middleware) &#123;</span><br><span class="line">        <span class="comment">// æ‰§è¡Œä¸­é—´ä»¶å‡½æ•°</span></span><br><span class="line">        middleware(req, res, next);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  callback() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">      res.json = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        res.setHeader(<span class="string">"Content-type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line">        res.end(<span class="built_in">JSON</span>.stringify(data));</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">const</span> url = req.url;</span><br><span class="line">      <span class="keyword">const</span> method = req.method.toLowerCase();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> resultList = <span class="keyword">this</span>.match(method, url);</span><br><span class="line">      <span class="keyword">this</span>.handle(req, res, resultList);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  listen(...args) &#123;</span><br><span class="line">    <span class="keyword">const</span> server = http.createServer(<span class="keyword">this</span>.callback());</span><br><span class="line">    server.listen(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥å‚å‡½æ•°</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> LikeExpress();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Koa"><a href="#Koa" class="headerlink" title="Koa"></a>Koa</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„åˆä¸­é—´ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">middlewareList</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">ctx</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> fn = middlewareList[i];</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(</span><br><span class="line">          fn(ctx, dispatch.bind(<span class="literal">null</span>, i + <span class="number">1</span>)) <span class="comment">// promise</span></span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dispatch(<span class="number">0</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LikeKoa2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.middlewareList = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  use(fn) &#123;</span><br><span class="line">    <span class="keyword">this</span>.middlewareList.push(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  createContext(req, res) &#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = &#123;</span><br><span class="line">      req,</span><br><span class="line">      res</span><br><span class="line">    &#125;;</span><br><span class="line">    ctx.query = req.query;</span><br><span class="line">    <span class="keyword">return</span> ctx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleRequest(ctx, fn) &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(ctx);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  callback() &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = compose(<span class="keyword">this</span>.middlewareList);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> ctx = <span class="keyword">this</span>.createContext(req, res);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.handleRequest(ctx, fn);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  listen(...args) &#123;</span><br><span class="line">    <span class="keyword">const</span> server = http.createServer(<span class="keyword">this</span>.callback());</span><br><span class="line">    server.listen(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = LikeKoa2;</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®å®è·µ"><a href="#é¡¹ç›®å®è·µ" class="headerlink" title="é¡¹ç›®å®è·µ"></a>é¡¹ç›®å®è·µ</h2><p><a href="https://github.com/yangtao2o/node-blog-express-koa2" target="_blank" rel="noopener">Node.js ä»é›¶å¼€å‘ web serveråšå®¢é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨expressã€koa2é‡æ„</a></p>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cookieã€Sessionã€LocalStorageã€SessionStorage</title>
      <link href="/2020/03/20/cookie-session/"/>
      <url>/2020/03/20/cookie-session/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Session æ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ï¼›<br>Cookie æ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç° Session çš„ä¸€ç§æ–¹å¼ï¼›<br>LocalStorage æ˜¯ Web Storage API çš„ä¸€ç§ç±»å‹ï¼Œèƒ½åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨é”®å€¼å¯¹æ•°æ®ï¼›<br>SessionStorage åªå­˜å‚¨å½“å‰ä¼šè¯é¡µ(tab é¡µ)çš„æ•°æ®ï¼Œä¸€æ—¦ç”¨æˆ·å…³é—­å½“å‰é¡µæˆ–è€…æµè§ˆå™¨ï¼Œæ•°æ®å°±è‡ªåŠ¨è¢«æ¸…é™¤æ‰äº†ã€‚</p></blockquote><a id="more"></a><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>åœ¨ç½‘ç«™ä¸­ï¼Œhttp è¯·æ±‚æ˜¯æ— çŠ¶æ€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å³ä½¿ç¬¬ä¸€æ¬¡å’ŒæœåŠ¡å™¨è¿æ¥åå¹¶ä¸”ç™»å½•æˆåŠŸåï¼Œç¬¬äºŒæ¬¡è¯·æ±‚æœåŠ¡å™¨ä¾ç„¶ä¸èƒ½çŸ¥é“å½“å‰è¯·æ±‚æ˜¯å“ªä¸ªç”¨æˆ·ã€‚</p><p>cookie çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€æ¬¡ç™»å½•åæœåŠ¡å™¨è¿”å›ä¸€äº›æ•°æ®ï¼ˆcookieï¼‰ç»™æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨ä¿å­˜åœ¨æœ¬åœ°ï¼Œå½“è¯¥ç”¨æˆ·å‘é€ç¬¬äºŒæ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨çš„æŠŠä¸Šæ¬¡è¯·æ±‚å­˜å‚¨çš„ cookie æ•°æ®è‡ªåŠ¨çš„æºå¸¦ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡æµè§ˆå™¨æºå¸¦çš„æ•°æ®å°±èƒ½åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å“ªä¸ªäº†ã€‚</p><p>cookie å­˜å‚¨çš„æ•°æ®é‡æœ‰é™ï¼Œä¸åŒçš„æµè§ˆå™¨æœ‰ä¸åŒçš„å­˜å‚¨å¤§å°ï¼Œä½†ä¸€èˆ¬ä¸è¶…è¿‡ 4KBã€‚å› æ­¤ä½¿ç”¨ cookie åªèƒ½å­˜å‚¨ä¸€äº›å°é‡çš„æ•°æ®ã€‚</p><p><strong>Cookie çš„ä¼˜ç‚¹ï¼š</strong></p><ul><li>èƒ½ç”¨äºå’ŒæœåŠ¡ç«¯é€šä¿¡</li><li>å½“ cookie å¿«è¦è‡ªåŠ¨è¿‡æœŸæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°è®¾ç½®è€Œä¸æ˜¯åˆ é™¤</li></ul><p><strong>Cookie ç¼ºç‚¹ï¼š</strong></p><ul><li>å¢åŠ äº†æ–‡æ¡£ä¼ è¾“çš„è´Ÿè½½</li><li>åªèƒ½å­˜å‚¨å°‘é‡çš„æ•°æ®</li><li>åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²</li><li>æ½œåœ¨çš„ å®‰å…¨é—®é¢˜ï¼ˆé€šè¿‡æœåŠ¡ç«¯è®¾ç½® httpOnlyï¼‰</li></ul><p>è§£å†³åŠæ³•ï¼šWeb Storage API (Local and Session Storage)ã€‚</p><p>åˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°å’Œåˆ é™¤ Cookieï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»å–</span></span><br><span class="line"><span class="built_in">document</span>.cookie;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹/æ›´æ–°</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"testname=Yangtao"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ï¼Œè®¾ç½®expiresçš„è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"testname=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"</span>;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯è®¾ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> getAndSetCookie = &#123;</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.checkCookie();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¾ç½®cookieï¼ŒåŒä¸€åŸŸåéƒ½å¯è·å–</span></span><br><span class="line">    setCookie: <span class="function"><span class="keyword">function</span>(<span class="params">name, value, exdays</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> exdays = exdays || <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">      d.setTime(d.getTime() + exdays * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">      <span class="built_in">document</span>.cookie =</span><br><span class="line">        name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + <span class="string">";path=/;expires="</span> + d.toGMTString();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è¯»å–cookiesï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è®¾ç½®çš„name</span></span><br><span class="line">    getCookie: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> name = name + <span class="string">"="</span>;</span><br><span class="line">      <span class="keyword">var</span> ca = <span class="built_in">document</span>.cookie.split(<span class="string">";"</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ca.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> c = ca[i].trim();</span><br><span class="line">        <span class="keyword">if</span> (c.indexOf(name) == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> c.substring(name.length, c.length);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    checkCookie: <span class="function"><span class="keyword">function</span>(<span class="params">pc</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> user = <span class="keyword">this</span>.getCookie(<span class="string">"msgCookie"</span>);</span><br><span class="line">      <span class="keyword">if</span> (user == <span class="string">""</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.setCookie(<span class="string">"msgCookie"</span>, <span class="string">"msgCookie"</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// init</span></span><br><span class="line">  getAndSetCookie.init();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>Node è®¾ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å– cookie è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="keyword">const</span> getCookieExpires = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">d.setTime(d.getTime() + <span class="number">24</span> _ <span class="number">60</span> _ <span class="number">60</span> \* <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">return</span> d.toGMTString();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®</span></span><br><span class="line">res.setHeader(</span><br><span class="line"><span class="string">"Set-Cookie"</span>,</span><br><span class="line"><span class="string">`username=<span class="subst">$&#123;data.username&#125;</span>; path=/; httpOnly; expires=<span class="subst">$&#123;getCookieExpires()&#125;</span>`</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æ cookie</span></span><br><span class="line">req.cookie = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> cookieStr = req.headers.cookie || <span class="string">""</span>; <span class="comment">// "k1=v1; k2=v2; k3=v3"</span></span><br><span class="line">cookieStr.split(<span class="string">";"</span>).forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!item) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> str = item.split(<span class="string">"="</span>);</span><br><span class="line">  <span class="keyword">const</span> key = str[<span class="number">0</span>].trim();</span><br><span class="line">  <span class="keyword">const</span> val = str[<span class="number">1</span>].trim();</span><br><span class="line"></span><br><span class="line">  req.cookie[key] = val;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>session å’Œ cookie çš„ä½œç”¨æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†å­˜å‚¨ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ã€‚ä¸åŒçš„æ˜¯ï¼Œcookie æ˜¯å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œè€Œ session å­˜å‚¨åœ¨æœåŠ¡å™¨ã€‚</p><p>å­˜å‚¨åœ¨æœåŠ¡å™¨çš„æ•°æ®ä¼šæ›´åŠ çš„å®‰å…¨ï¼Œä¸å®¹æ˜“è¢«çªƒå–ã€‚ä½†å­˜å‚¨åœ¨æœåŠ¡å™¨ä¹Ÿæœ‰ä¸€å®šçš„å¼Šç«¯ï¼Œå°±æ˜¯ä¼šå ç”¨æœåŠ¡å™¨çš„èµ„æºï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº† redisã€‚</p><p><strong>Session çš„é—®é¢˜ï¼š</strong></p><ul><li>session æ˜¯ä¸€ä¸ªå˜é‡å­˜åœ¨ nodejs è¿›ç¨‹å†…å­˜ä¸­</li><li>è¿›ç¨‹å†…å­˜æœ‰é™ï¼Œè®¿é—®é‡è¿‡å¤§ï¼Œå†…å­˜å®¹æ˜“æš´å¢</li><li>çº¿ä¸Šå¤šä¸ºå¤šè¿›ç¨‹ï¼Œè¿›ç¨‹é—´å†…å­˜æ— æ³•å…±äº«</li><li>å¯ä»¥å€ŸåŠ© redis è§£å†³</li></ul><h2 id="Cookie-Session"><a href="#Cookie-Session" class="headerlink" title="Cookie+Session"></a>Cookie+Session</h2><p>cookie å’Œ session çš„ä½¿ç”¨å·²ç»å‡ºç°äº†ä¸€äº›éå¸¸æˆç†Ÿçš„æ–¹æ¡ˆã€‚åœ¨å¦‚ä»Šçš„å¸‚åœºæˆ–è€…ä¼ä¸šé‡Œï¼Œä¸€èˆ¬æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š</p><p><strong>1ã€å­˜å‚¨åœ¨æœåŠ¡ç«¯</strong></p><p>é€šè¿‡ cookie å­˜å‚¨ä¸€ä¸ª session_idï¼Œç„¶åå…·ä½“çš„æ•°æ®åˆ™æ˜¯ä¿å­˜åœ¨ session ä¸­ã€‚å¦‚æœç”¨æˆ·å·²ç»ç™»å½•ï¼Œåˆ™æœåŠ¡å™¨ä¼šåœ¨ cookie ä¸­ä¿å­˜ä¸€ä¸ª session_idï¼Œä¸‹æ¬¡å†æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šæŠŠè¯¥ session_id æºå¸¦ä¸Šæ¥ï¼ŒæœåŠ¡å™¨æ ¹æ® session_id åœ¨ session åº“ä¸­è·å–ç”¨æˆ·çš„ session æ•°æ®ã€‚å°±èƒ½çŸ¥é“è¯¥ç”¨æˆ·åˆ°åº•æ˜¯è°ï¼Œä»¥åŠä¹‹å‰ä¿å­˜çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ã€‚è¿™ç§ä¸“ä¸šæœ¯è¯­å«åš <code>server side session</code>ã€‚</p><p><strong>2ã€å°† session æ•°æ®åŠ å¯†ï¼Œç„¶åå­˜å‚¨åœ¨ cookie ä¸­</strong></p><p>è¿™ç§ä¸“ä¸šæœ¯è¯­å«åš <code>client side session</code>ã€‚</p><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>å­˜å‚¨åœ¨æµè§ˆå™¨çš„ä¸€æ®µå­—ç¬¦ä¸²</li><li>è·¨åŸŸä¸å…±äº«</li><li>å¯ä»¥å­˜å‚¨ç»“æ„åŒ–æ•°æ®ï¼Œæ ¼å¼ä¸ºï¼šâ€k1=v1; k2=v2; k3=v3â€</li><li>æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ JavaScript ä¿®æ”¹ cookieï¼ˆæœ‰é™åˆ¶ï¼‰</li><li>æ¯æ¬¡å‘é€ http è¯·æ±‚ï¼Œéƒ½å°†è¯·æ±‚åŸŸçš„ cookie ä¸€èµ·å‘ç»™ server</li><li>server å¯ä»¥ä¿®æ”¹ cookieï¼Œå¹¶è¿”ç»™æµè§ˆå™¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SESSION_DATA = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> needSetCookie = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è§£æ session</span></span><br><span class="line">  <span class="keyword">let</span> userId = req.cookie.userid;</span><br><span class="line">  <span class="keyword">if</span> (userId) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!SESSION_DATA[userId]) &#123;</span><br><span class="line">      SESSION_DATA[userId] = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    needSetCookie = <span class="literal">true</span>;</span><br><span class="line">    userId = <span class="string">`<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>_<span class="subst">$&#123;<span class="built_in">Math</span>.random()&#125;</span>`</span>;</span><br><span class="line">    SESSION_DATA[userId] = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  req.session = SESSION_DATA[userId];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ“ä½œ cookie</span></span><br><span class="line">  <span class="keyword">if</span> (needSetCookie) &#123;</span><br><span class="line">    res.setHeader(</span><br><span class="line">      <span class="string">"Set-Cookie"</span>,</span><br><span class="line">      <span class="string">`userid=<span class="subst">$&#123;userId&#125;</span>; path=/; httpOnly; expires=<span class="subst">$&#123;getCookieExpires()&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–usernameå¹¶èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (data.username) &#123;</span><br><span class="line">    req.session.username = data.username;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SuccessModel();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç„¶åè¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (req.session.username) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(</span><br><span class="line">      <span class="keyword">new</span> SuccessModel(&#123;</span><br><span class="line">        session: req.session</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>è¯¦ç»†å†…å®¹ï¼š</strong><a href="https://github.com/yangtao2o/node-blog-express-koa2/blob/master/docs/signin.md" target="_blank" rel="noopener">ç™»å½•</a></p><h2 id="LocalStorage"><a href="#LocalStorage" class="headerlink" title="LocalStorage"></a>LocalStorage</h2><p>Local Storage æ˜¯ Web Storage API çš„ä¸€ç§ç±»å‹ï¼Œèƒ½åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚</p><p>Local Storage å› æä¾›äº†æ›´ç›´è§‚å’Œå®‰å…¨çš„ API æ¥å­˜å‚¨ç®€å•çš„æ•°æ®ï¼Œè¢«è§†ä¸ºæ›¿ä»£ Cookies çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ä»æŠ€æœ¯ä¸Šè¯´ï¼Œå°½ç®¡ Local Storage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²åŒ–çš„ JSON æ•°æ®ã€‚è¿™å°±æ„å‘³ç€ï¼ŒLocal Storage èƒ½æ¯” Cookies å­˜å‚¨æ›´å¤æ‚çš„æ•°æ®ã€‚</p><p>åˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°å’Œåˆ é™¤ Local Storageï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">"Bob"</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line">localStorage.setItem(<span class="string">"user"</span>, <span class="built_in">JSON</span>.stringify(user));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Read (Single)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">"user"</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update</span></span><br><span class="line"><span class="keyword">const</span> updatedUser = &#123; <span class="attr">name</span>: <span class="string">"Bob"</span>, <span class="attr">age</span>: <span class="number">24</span> &#125;;</span><br><span class="line"></span><br><span class="line">localStorage.setItem(<span class="string">"user"</span>, <span class="built_in">JSON</span>.stringify(updatedUser));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Delete</span></span><br><span class="line">localStorage.removeItem(<span class="string">"user"</span>);</span><br></pre></td></tr></table></figure><p><strong>Local Storage çš„ä¼˜ç‚¹ï¼š</strong>ç›¸æ¯”äº Cookieï¼Œå…¶æä¾›äº†æ›´ç›´è§‚åœ°æ¥å£æ¥å­˜å‚¨æ•°æ®æ›´å®‰å…¨,èƒ½å­˜å‚¨æ›´å¤šæ•°æ®ã€‚</p><p><strong>Local Storage çš„ç¼ºç‚¹ï¼š</strong>åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼Œæµè§ˆå™¨æ”¯æŒ<code>IE8+/Edge/Firefox 2+/Chrome/Safari 4+/Opera 11.5+(caniuse)</code></p><h2 id="SessionStorage"><a href="#SessionStorage" class="headerlink" title="SessionStorage"></a>SessionStorage</h2><p>Session Storage å’Œ Local Storage éå¸¸ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ Session Storage åªå­˜å‚¨å½“å‰ä¼šè¯é¡µ(tab é¡µ)çš„æ•°æ®ï¼Œä¸€æ—¦ç”¨æˆ·å…³é—­å½“å‰é¡µæˆ–è€…æµè§ˆå™¨ï¼Œæ•°æ®å°±è‡ªåŠ¨è¢«æ¸…é™¤æ‰äº†ã€‚</p><p>åˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°å’Œåˆ é™¤ Session Storageï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">'Bob'</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;sessionStorage.setItem(<span class="string">'user'</span>, <span class="built_in">JSON</span>.stringify(user))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Read (Single)</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">JSON</span>.parse(sessionStorage.getItem(<span class="string">'user'</span>)) )</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update</span></span><br><span class="line"><span class="keyword">const</span> updatedUser = &#123; <span class="attr">name</span>: <span class="string">'Bob'</span>, <span class="attr">age</span>: <span class="number">24</span> &#125;</span><br><span class="line"></span><br><span class="line">sessionStorage.setItem(<span class="string">'user'</span>, <span class="built_in">JSON</span>.stringify(updatedUser))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Delete</span></span><br><span class="line">sessionStorage.removeItem(<span class="string">'user'</span>)</span><br></pre></td></tr></table></figure><p>sessionStorageã€localStorageã€cookie éƒ½æ˜¯åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨çš„æ•°æ®ã€‚</p><p>å…¶ä¸­ï¼ŒsessionStorage çš„æ¦‚å¿µå¾ˆç‰¹åˆ«ï¼Œå¼•å…¥äº†ä¸€ä¸ªâ€œæµè§ˆå™¨çª—å£â€çš„æ¦‚å¿µï¼ŒsessionStorage æ˜¯åœ¨åŒæºçš„åŒçª—å£ä¸­ï¼Œå§‹ç»ˆå­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦è¿™ä¸ªæµè§ˆå™¨çª—å£æ²¡æœ‰å…³é—­ï¼Œå³ä½¿åˆ·æ–°é¡µé¢æˆ–è¿›å…¥åŒæºå¦ä¸€ä¸ªé¡µé¢ï¼Œæ•°æ®ä»ç„¶å­˜åœ¨ï¼Œå…³é—­çª—å£å sessionStorage å°±ä¼šè¢«é”€æ¯ï¼ŒåŒæ—¶â€œç‹¬ç«‹â€æ‰“å¼€çš„ä¸åŒçª—å£ï¼Œå³ä½¿åŒä¸€é¡µé¢ï¼ŒsessionStorage å¯¹è±¡ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p><h2 id="å®¢æˆ·ç«¯å­˜å‚¨æ–¹å¼å¼‚åŒ"><a href="#å®¢æˆ·ç«¯å­˜å‚¨æ–¹å¼å¼‚åŒ" class="headerlink" title="å®¢æˆ·ç«¯å­˜å‚¨æ–¹å¼å¼‚åŒ"></a>å®¢æˆ·ç«¯å­˜å‚¨æ–¹å¼å¼‚åŒ</h2><p><strong>cookieï¼ŒsessionStorage å’Œ localStorage çš„åŒºåˆ«ï¼Ÿ</strong></p><ul><li>cookie æ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Š çš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰- cookie æ•°æ®å§‹ç»ˆåœ¨åŒæºçš„ http è¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œè®°ä¼šåœ¨æµ è§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’</li><li>sessionStorage å’Œ localStorage ä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ° ä¿å­˜</li></ul><p><strong>å­˜å‚¨å¤§å°ï¼š</strong></p><ul><li>cookie æ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡ 4k</li><li>sessionStorage å’Œ localStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯” cookie å¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ° 5M æˆ–æ›´å¤§</li></ul><p><strong>æœ‰æ•ˆæœŸï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰ï¼š</strong></p><ul><li>localStorage: å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ®</li><li>sessionStorage: æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤</li><li>cookie: è®¾ç½®çš„ cookie è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li>è‡ªå·±åšå®¢é¡¹ç›®ä¸­<a href="https://github.com/yangtao2o/node-blog-express-koa2/blob/master/docs/signin.md" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ cookie</a></li><li><a href="https://www.zhihu.com/question/19786827" target="_blank" rel="noopener">COOKIE å’Œ SESSION æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="https://baijiahao.baidu.com/s?id=1652697788741886713&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">æµ…è°ˆ cookieï¼ŒsessionStorageï¼ŒlocalStorage</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http </tag>
            
            <tag> web </tag>
            
            <tag> cookie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understanding JavaScript Bind ()</title>
      <link href="/2020/03/16/js-bind/"/>
      <url>/2020/03/16/js-bind/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¦‚ä½•å°†â€œthisâ€çš„ä¸Šä¸‹æ–‡ä¿ç•™åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Ÿæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦ä½¿ç”¨<code>Function.prototype.bind()</code>ã€‚èµ„æ–™åœ°å€ï¼š<a href="https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/" target="_blank" rel="noopener">Understanding JavaScript Bind ()</a></p></blockquote><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React è®¾è®¡æ€æƒ³ã€è½¬è½½ã€‘</title>
      <link href="/2020/03/16/react-design-ideass/"/>
      <url>/2020/03/16/react-design-ideass/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¯‘è€…åºï¼šæœ¬æ–‡æ˜¯ React æ ¸å¿ƒå¼€å‘è€…ã€æœ‰ React API ç»ˆç»“è€…ä¹‹ç§°çš„ Sebastian MarkbÃ¥ge æ’°å†™ï¼Œé˜è¿°äº†ä»–è®¾è®¡ React çš„åˆè¡·ã€‚é˜…è¯»æ­¤æ–‡ï¼Œä½ èƒ½ç«™åœ¨æ›´é«˜çš„é«˜åº¦æ€è€ƒ React çš„è¿‡å»ã€ç°åœ¨å’Œæœªæ¥ã€‚<br>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/reactjs/react-basic" target="_blank" rel="noopener">https://github.com/reactjs/react-basic</a></p></blockquote><a id="more"></a><p>æˆ‘å†™æ­¤æ–‡æ˜¯æƒ³æ­£å¼åœ°é˜è¿°æˆ‘å¿ƒä¸­ React çš„<a href="http://baike.baidu.com/view/2333986.htm" target="_blank" rel="noopener">å¿ƒæ™ºæ¨¡å‹</a>ã€‚ç›®çš„æ˜¯è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šè¿™æ ·è®¾è®¡ Reactï¼ŒåŒæ—¶ä½ ä¹Ÿå¯ä»¥æ ¹æ®è¿™äº›è®ºç‚¹åæ¨å‡º Reactã€‚</p><p>ä¸å¯å¦è®¤ï¼Œæ­¤æ–‡ä¸­çš„éƒ¨åˆ†è®ºæ®æˆ–å‰æå°šå­˜äº‰è®®ï¼Œè€Œä¸”éƒ¨åˆ†ç¤ºä¾‹çš„è®¾è®¡å¯èƒ½å­˜åœ¨ bug æˆ–ç–å¿½ã€‚è¿™åªæ˜¯æ­£å¼ç¡®å®šå®ƒçš„æœ€åˆé˜¶æ®µã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„å®Œå–„å®ƒçš„æƒ³æ³•å¯ä»¥éšæ—¶æäº¤ pull requestã€‚æœ¬æ–‡ä¸ä¼šä»‹ç»æ¡†æ¶ç»†èŠ‚ä¸­çš„å¥‡æŠ€æ·«å·§ï¼Œç›¸ä¿¡è¿™æ ·èƒ½æçº²æŒˆé¢†ï¼Œè®©ä½ çœ‹æ¸… React ç”±ç®€å•åˆ°å¤æ‚çš„è®¾è®¡è¿‡ç¨‹ã€‚</p><p>React.js çš„çœŸå®å®ç°ä¸­å……æ»¡äº†å…·ä½“é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ¸è¿›å¼çš„è§£æ³•ï¼Œç®—æ³•ä¼˜åŒ–ï¼Œå†å²é—ç•™ä»£ç ï¼Œdebug å·¥å…·ä»¥åŠå…¶ä»–ä¸€äº›å¯ä»¥è®©å®ƒçœŸçš„å…·æœ‰é«˜å¯ç”¨æ€§çš„å†…å®¹ã€‚è¿™äº›ä»£ç å¯èƒ½å¹¶ä¸ç¨³å®šï¼Œå› ä¸ºæœªæ¥æµè§ˆå™¨çš„å˜åŒ–å’ŒåŠŸèƒ½æƒé‡çš„å˜åŒ–éšæ—¶é¢ä¸´æ”¹å˜ã€‚æ‰€ä»¥å…·ä½“çš„ä»£ç å¾ˆéš¾å½»åº•è§£é‡Šæ¸…æ¥šã€‚</p><p>æˆ‘åå‘äºé€‰æ‹©ä¸€ç§æˆ‘èƒ½å®Œå…¨ hold ä½çš„ç®€æ´çš„å¿ƒæ™ºæ¨¡å‹æ¥ä½œä»‹ç»ã€‚</p><h2 id="å˜æ¢ï¼ˆTransformationï¼‰"><a href="#å˜æ¢ï¼ˆTransformationï¼‰" class="headerlink" title="å˜æ¢ï¼ˆTransformationï¼‰"></a>å˜æ¢ï¼ˆTransformationï¼‰</h2><p>è®¾è®¡ React çš„æ ¸å¿ƒå‰ææ˜¯è®¤ä¸º UI åªæ˜¯æŠŠæ•°æ®é€šè¿‡æ˜ å°„å…³ç³»å˜æ¢æˆå¦ä¸€ç§å½¢å¼çš„æ•°æ®ã€‚åŒæ ·çš„è¾“å…¥å¿…ä¼šæœ‰åŒæ ·çš„è¾“å‡ºã€‚è¿™æ°å¥½å°±æ˜¯çº¯å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NameBox</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">fontWeight</span>: <span class="string">"bold"</span>, <span class="attr">labelContent</span>: name &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;Sebastian MarkbÃ¥ge&apos; -&gt;</span><br><span class="line">&#123; fontWeight: &apos;bold&apos;, labelContent: &apos;Sebastian MarkbÃ¥ge&apos; &#125;;</span><br></pre></td></tr></table></figure><h2 id="æŠ½è±¡ï¼ˆAbstractionï¼‰"><a href="#æŠ½è±¡ï¼ˆAbstractionï¼‰" class="headerlink" title="æŠ½è±¡ï¼ˆAbstractionï¼‰"></a>æŠ½è±¡ï¼ˆAbstractionï¼‰</h2><p>ä½ ä¸å¯èƒ½ä»…ç”¨ä¸€ä¸ªå‡½æ•°å°±èƒ½å®ç°å¤æ‚çš„ UIã€‚é‡è¦çš„æ˜¯ï¼Œä½ éœ€è¦æŠŠ UI æŠ½è±¡æˆå¤šä¸ªéšè—å†…éƒ¨ç»†èŠ‚ï¼Œåˆå¯å¤ç”¨çš„å‡½æ•°ã€‚é€šè¿‡åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°æ¥å®ç°å¤æ‚çš„ UIï¼Œè¿™å°±æ˜¯æŠ½è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyUserBox</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    borderStyle: <span class="string">"1px solid blue"</span>,</span><br><span class="line">    childContent: [<span class="string">"Name: "</span>, NameBox(user.firstName + <span class="string">" "</span> + user.lastName)]</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; firstName: &apos;Sebastian&apos;, lastName: &apos;MarkbÃ¥ge&apos; &#125; -&gt;</span><br><span class="line">&#123;</span><br><span class="line">  borderStyle: &apos;1px solid blue&apos;,</span><br><span class="line">  childContent: [</span><br><span class="line">    &apos;Name: &apos;,</span><br><span class="line">    &#123; fontWeight: &apos;bold&apos;, labelContent: &apos;Sebastian MarkbÃ¥ge&apos; &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ç»„åˆï¼ˆCompositionï¼‰"><a href="#ç»„åˆï¼ˆCompositionï¼‰" class="headerlink" title="ç»„åˆï¼ˆCompositionï¼‰"></a>ç»„åˆï¼ˆCompositionï¼‰</h2><p>ä¸ºäº†çœŸæ­£è¾¾åˆ°é‡ç”¨çš„ç‰¹æ€§ï¼Œåªé‡ç”¨å¶å­ç„¶åæ¯æ¬¡éƒ½ä¸ºä»–ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨æ˜¯ä¸å¤Ÿçš„ã€‚ä½ è¿˜éœ€è¦å¯ä»¥åŒ…å«å…¶ä»–æŠ½è±¡çš„å®¹å™¨å†æ¬¡è¿›è¡Œç»„åˆã€‚æˆ‘ç†è§£çš„â€œç»„åˆâ€å°±æ˜¯å°†ä¸¤ä¸ªæˆ–è€…å¤šä¸ªä¸åŒçš„æŠ½è±¡åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBox</span>(<span class="params">children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    borderStyle: <span class="string">"1px solid blue"</span>,</span><br><span class="line">    children: children</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserBox</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBox([<span class="string">"Name: "</span>, NameBox(user.firstName + <span class="string">" "</span> + user.lastName)]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çŠ¶æ€ï¼ˆStateï¼‰"><a href="#çŠ¶æ€ï¼ˆStateï¼‰" class="headerlink" title="çŠ¶æ€ï¼ˆStateï¼‰"></a>çŠ¶æ€ï¼ˆStateï¼‰</h2><p>UI ä¸å•å•æ˜¯å¯¹æœåŠ¡å™¨ç«¯æˆ–ä¸šåŠ¡é€»è¾‘çŠ¶æ€çš„å¤åˆ¶ã€‚å®é™…ä¸Šè¿˜æœ‰å¾ˆå¤šçŠ¶æ€æ˜¯é’ˆå¯¹å…·ä½“çš„æ¸²æŸ“ç›®æ ‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ª text field ä¸­æ‰“å­—ã€‚å®ƒä¸ä¸€å®šè¦å¤åˆ¶åˆ°å…¶ä»–é¡µé¢æˆ–è€…ä½ çš„æ‰‹æœºè®¾å¤‡ã€‚æ»šåŠ¨ä½ç½®è¿™ä¸ªçŠ¶æ€æ˜¯ä¸€ä¸ªå…¸å‹çš„ä½ å‡ ä¹ä¸ä¼šå¤åˆ¶åˆ°å¤šä¸ªæ¸²æŸ“ç›®æ ‡çš„ã€‚</p><p>æˆ‘ä»¬å€¾å‘äºä½¿ç”¨ä¸å¯å˜çš„æ•°æ®æ¨¡å‹ã€‚æˆ‘ä»¬æŠŠå¯ä»¥æ”¹å˜ state çš„å‡½æ•°ä¸²è”èµ·æ¥ä½œä¸ºåŸç‚¹æ”¾ç½®åœ¨é¡¶å±‚ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyNameBox</span>(<span class="params">user, likes, onClick</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBox([</span><br><span class="line">    <span class="string">"Name: "</span>,</span><br><span class="line">    NameBox(user.firstName + <span class="string">" "</span> + user.lastName),</span><br><span class="line">    <span class="string">"Likes: "</span>,</span><br><span class="line">    LikeBox(likes),</span><br><span class="line">    LikeButton(onClick)</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ç»†èŠ‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> likes = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOneMoreLike</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  likes++;</span><br><span class="line">  rerender();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"></span><br><span class="line">FancyNameBox(</span><br><span class="line">  &#123; <span class="attr">firstName</span>: <span class="string">"Sebastian"</span>, <span class="attr">lastName</span>: <span class="string">"MarkbÃ¥ge"</span> &#125;,</span><br><span class="line">  likes,</span><br><span class="line">  addOneMoreLike</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šæœ¬ä¾‹æ›´æ–°çŠ¶æ€æ—¶ä¼šå¸¦æ¥å‰¯ä½œç”¨ï¼ˆaddOneMoreLike å‡½æ•°ä¸­ï¼‰ã€‚æˆ‘å®é™…çš„æƒ³æ³•æ˜¯å½“ä¸€ä¸ªâ€œupdateâ€ä¼ å…¥æ—¶æˆ‘ä»¬è¿”å›ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„çŠ¶æ€ï¼Œä½†é‚£æ ·ä¼šæ¯”è¾ƒå¤æ‚ã€‚æ­¤ç¤ºä¾‹å¾…æ›´æ–°</em></p><h2 id="Memoization"><a href="#Memoization" class="headerlink" title="Memoization"></a>Memoization</h2><p>å¯¹äºçº¯å‡½æ•°ï¼Œä½¿ç”¨ç›¸åŒçš„å‚æ•°ä¸€æ¬¡æ¬¡è°ƒç”¨æœªå…å¤ªæµªè´¹èµ„æºã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°çš„ memorized ç‰ˆæœ¬ï¼Œç”¨æ¥è¿½è¸ªæœ€åä¸€ä¸ªå‚æ•°å’Œç»“æœã€‚è¿™æ ·å¦‚æœæˆ‘ä»¬ç»§ç»­ä½¿ç”¨åŒæ ·çš„å€¼ï¼Œå°±ä¸éœ€è¦åå¤æ‰§è¡Œå®ƒäº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memoize</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cachedArg;</span><br><span class="line">  <span class="keyword">var</span> cachedResult;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cachedArg === arg) &#123;</span><br><span class="line">      <span class="keyword">return</span> cachedResult;</span><br><span class="line">    &#125;</span><br><span class="line">    cachedArg = arg;</span><br><span class="line">    cachedResult = fn(arg);</span><br><span class="line">    <span class="keyword">return</span> cachedResult;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> MemoizedNameBox = memoize(NameBox);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NameAndAgeBox</span>(<span class="params">user, currentTime</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBox([</span><br><span class="line">    <span class="string">"Name: "</span>,</span><br><span class="line">    MemoizedNameBox(user.firstName + <span class="string">" "</span> + user.lastName),</span><br><span class="line">    <span class="string">"Age in milliseconds: "</span>,</span><br><span class="line">    currentTime - user.dateOfBirth</span><br><span class="line">  ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ—è¡¨ï¼ˆListsï¼‰"><a href="#åˆ—è¡¨ï¼ˆListsï¼‰" class="headerlink" title="åˆ—è¡¨ï¼ˆListsï¼‰"></a>åˆ—è¡¨ï¼ˆListsï¼‰</h2><p>å¤§éƒ¨åˆ† UI éƒ½æ˜¯å±•ç¤ºåˆ—è¡¨æ•°æ®ä¸­ä¸åŒ item çš„åˆ—è¡¨ç»“æ„ã€‚è¿™æ˜¯ä¸€ä¸ªå¤©ç„¶çš„å±‚çº§ã€‚</p><p>ä¸ºäº†ç®¡ç†åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ª item çš„ state ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›é€ ä¸€ä¸ª Map å®¹çº³å…·ä½“ item çš„ stateã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserList</span>(<span class="params">users, likesPerUser, updateUserLikes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> users.map(<span class="function"><span class="params">user</span> =&gt;</span></span><br><span class="line">    FancyNameBox(user, likesPerUser.get(user.id), () =&gt;</span><br><span class="line">      updateUserLikes(user.id, likesPerUser.get(user.id) + <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> likesPerUser = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateUserLikes</span>(<span class="params">id, likeCount</span>) </span>&#123;</span><br><span class="line">  likesPerUser.set(id, likeCount);</span><br><span class="line">  rerender();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UserList(data.users, likesPerUser, updateUserLikes);</span><br></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šç°åœ¨æˆ‘ä»¬å‘ FancyNameBox ä¼ äº†å¤šä¸ªä¸åŒçš„å‚æ•°ã€‚è¿™æ‰“ç ´äº†æˆ‘ä»¬çš„ memoization å› ä¸ºæˆ‘ä»¬æ¯æ¬¡åªèƒ½å­˜å‚¨ä¸€ä¸ªå€¼ã€‚æ›´å¤šç›¸å…³å†…å®¹åœ¨ä¸‹é¢ã€‚</em></p><h2 id="è¿ç»­æ€§ï¼ˆContinuationsï¼‰"><a href="#è¿ç»­æ€§ï¼ˆContinuationsï¼‰" class="headerlink" title="è¿ç»­æ€§ï¼ˆContinuationsï¼‰"></a>è¿ç»­æ€§ï¼ˆContinuationsï¼‰</h2><p>ä¸å¹¸çš„æ˜¯ï¼Œè‡ªä» UI ä¸­æœ‰å¤ªå¤šçš„åˆ—è¡¨ï¼Œæ˜ç¡®çš„ç®¡ç†å°±éœ€è¦å¤§é‡çš„é‡å¤æ€§æ ·æ¿ä»£ç ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨è¿Ÿä¸€äº›å‡½æ•°çš„æ‰§è¡Œï¼Œè¿›è€ŒæŠŠä¸€äº›æ¨¡æ¿ç§»å‡ºä¸šåŠ¡é€»è¾‘ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨â€œæŸ¯é‡ŒåŒ–â€ï¼ˆJavaScript ä¸­çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener"><code>bind</code></a>ï¼‰ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä»æ ¸å¿ƒçš„å‡½æ•°å¤–é¢ä¼ é€’ stateï¼Œè¿™æ ·å°±æ²¡æœ‰æ ·æ¿ä»£ç äº†ã€‚</p><p>ä¸‹é¢è¿™æ ·å¹¶æ²¡æœ‰å‡å°‘æ ·æ¿ä»£ç ï¼Œä½†è‡³å°‘æŠŠå®ƒä»å…³é”®ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyUserList</span>(<span class="params">users</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBox(UserList.bind(<span class="literal">null</span>, users));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> box = FancyUserList(data.users);</span><br><span class="line"><span class="keyword">const</span> resolvedChildren = box.children(likesPerUser, updateUserLikes);</span><br><span class="line"><span class="keyword">const</span> resolvedBox = &#123;</span><br><span class="line">  ...box,</span><br><span class="line">  children: resolvedChildren</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="State-Map"><a href="#State-Map" class="headerlink" title="State Map"></a>State Map</h2><p>ä¹‹å‰æˆ‘ä»¬çŸ¥é“å¯ä»¥ä½¿ç”¨ç»„åˆé¿å…é‡å¤æ‰§è¡Œç›¸åŒçš„ä¸œè¥¿è¿™æ ·ä¸€ç§é‡å¤æ¨¡å¼ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ‰§è¡Œå’Œä¼ é€’ state é€»è¾‘æŒªåŠ¨åˆ°è¢«å¤ç”¨å¾ˆå¤šçš„ä½å±‚çº§çš„å‡½æ•°ä¸­å»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBoxWithState</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  children,</span></span></span><br><span class="line"><span class="function"><span class="params">  stateMap,</span></span></span><br><span class="line"><span class="function"><span class="params">  updateState</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBox(</span><br><span class="line">    children.map(<span class="function"><span class="params">child</span> =&gt;</span> child.continuation(</span><br><span class="line">      stateMap.get(child.key),</span><br><span class="line">      updateState</span><br><span class="line">    ))</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserList</span>(<span class="params">users</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> users.map(<span class="function"><span class="params">user</span> =&gt;</span> &#123;</span><br><span class="line">    continuation: FancyNameBox.bind(<span class="literal">null</span>, user),</span><br><span class="line">    key: user.id</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyUserList</span>(<span class="params">users</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBoxWithState.bind(<span class="literal">null</span>,</span><br><span class="line">    UserList(users)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> continuation = FancyUserList(data.users);</span><br><span class="line">continuation(likesPerUser, updateUserLikes);</span><br></pre></td></tr></table></figure><h2 id="Memoization-Map"><a href="#Memoization-Map" class="headerlink" title="Memoization Map"></a>Memoization Map</h2><p>ä¸€æ—¦æˆ‘ä»¬æƒ³åœ¨ä¸€ä¸ª memoization åˆ—è¡¨ä¸­ memoize å¤šä¸ª item å°±ä¼šå˜å¾—å¾ˆå›°éš¾ã€‚å› ä¸ºä½ éœ€è¦åˆ¶å®šå¤æ‚çš„ç¼“å­˜ç®—æ³•æ¥å¹³è¡¡è°ƒç”¨é¢‘ç‡å’Œå†…å­˜å æœ‰ç‡ã€‚</p><p>è¿˜å¥½ UI åœ¨åŒä¸€ä¸ªä½ç½®ä¼šç›¸å¯¹çš„ç¨³å®šã€‚ç›¸åŒçš„ä½ç½®ä¸€èˆ¬æ¯æ¬¡éƒ½ä¼šæ¥å—ç›¸åŒçš„å‚æ•°ã€‚è¿™æ ·ä»¥æ¥ï¼Œä½¿ç”¨ä¸€ä¸ªé›†åˆæ¥åš memoization æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ç­–ç•¥ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨å¯¹å¾… state åŒæ ·çš„æ–¹å¼ï¼Œåœ¨ç»„åˆçš„å‡½æ•°ä¸­ä¼ é€’ä¸€ä¸ª memoization ç¼“å­˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memoize</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">arg, memoizationCache</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (memoizationCache.arg === arg) &#123;</span><br><span class="line">      <span class="keyword">return</span> memoizationCache.result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> result = fn(arg);</span><br><span class="line">    memoizationCache.arg = arg;</span><br><span class="line">    memoizationCache.result = result;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBoxWithState</span>(<span class="params">children, stateMap, updateState, memoizationCache</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> FancyBox(</span><br><span class="line">    children.map(<span class="function"><span class="params">child</span> =&gt;</span></span><br><span class="line">      child.continuation(</span><br><span class="line">        stateMap.get(child.key),</span><br><span class="line">        updateState,</span><br><span class="line">        memoizationCache.get(child.key)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MemoizedFancyNameBox = memoize(FancyNameBox);</span><br></pre></td></tr></table></figure><h2 id="ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic-Effectsï¼‰"><a href="#ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic-Effectsï¼‰" class="headerlink" title="ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰"></a>ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰</h2><p>å¤šå±‚æŠ½è±¡éœ€è¦å…±äº«çç¢æ•°æ®æ—¶ï¼Œä¸€å±‚å±‚ä¼ é€’æ•°æ®éå¸¸éº»çƒ¦ã€‚å¦‚æœèƒ½æœ‰ä¸€ç§æ–¹å¼å¯ä»¥åœ¨å¤šå±‚æŠ½è±¡ä¸­å¿«æ·åœ°ä¼ é€’æ•°æ®ï¼ŒåŒæ—¶åˆä¸éœ€è¦ç‰µæ¶‰åˆ°ä¸­é—´å±‚çº§ï¼Œé‚£è¯¥æœ‰å¤šå¥½ã€‚React ä¸­æˆ‘ä»¬æŠŠå®ƒå«åšâ€œcontextâ€ã€‚</p><p>æœ‰æ—¶å€™æ•°æ®ä¾èµ–å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æŠ½è±¡æ ‘è‡ªä¸Šè€Œä¸‹è¿›è¡Œã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨å¸ƒå±€ç®—æ³•ä¸­ï¼Œä½ éœ€è¦åœ¨å®ç°ä»–ä»¬çš„ä½ç½®ä¹‹å‰äº†è§£å­èŠ‚ç‚¹çš„å¤§å°ã€‚</p><p>ç°åœ¨ï¼Œè¿™ä¸ªä¾‹å­æœ‰ä¸€ç‚¹è¶…çº²ã€‚æˆ‘ä¼šä½¿ç”¨ <a href="http://math.andrej.com/eff/" target="_blank" rel="noopener">ä»£æ•°æ•ˆåº”</a> è¿™ä¸ªç”±æˆ‘å‘èµ·çš„ <a href="https://esdiscuss.org/topic/one-shot-delimited-continuations-with-effect-handlers" target="_blank" rel="noopener">ECMAScript æ–°ç‰¹æ€§æè®®</a>ã€‚å¦‚æœä½ å¯¹å‡½æ•°å¼ç¼–ç¨‹å¾ˆç†Ÿæ‚‰ï¼Œå®ƒä»¬ åœ¨é¿å…ç”± monad å¼ºåˆ¶å¼•å…¥çš„ä»ªå¼ä¸€æ ·çš„ç¼–ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ThemeBorderColorRequest</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBox</span>(<span class="params">children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> color = raise <span class="keyword">new</span> ThemeBorderColorRequest();</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    borderWidth: <span class="string">'1px'</span>,</span><br><span class="line">    borderColor: color,</span><br><span class="line">    children: children</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BlueTheme</span>(<span class="params">children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">try</span> &#123;</span><br><span class="line">    children();</span><br><span class="line">  &#125; <span class="keyword">catch</span> effect ThemeBorderColorRequest -&gt; [, continuation] &#123;</span><br><span class="line">    continuation(<span class="string">'blue'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> BlueTheme(</span><br><span class="line">    FancyUserList.bind(<span class="literal">null</span>, data.users)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/react-guide/react-basic" target="_blank" rel="noopener">React è®¾è®¡æ€æƒ³</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gulp è‡ªåŠ¨åŒ–æ„å»º</title>
      <link href="/2020/03/14/gulp-v4/"/>
      <url>/2020/03/14/gulp-v4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Gulp è‡ªåŠ¨åŒ–æ„å»ºçš„ä¸€äº›è¿‡ç¨‹ï¼Œä»¥åŠå…¶ä»–æ’ä»¶çš„ç»“åˆä½¿ç”¨ç­‰</p></blockquote><a id="more"></a><h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h2><ul><li><a href="https://www.gulpjs.com.cn/docs/getting-started/quick-start/" target="_blank" rel="noopener">Gulp å¿«é€Ÿå…¥é—¨æŒ‡å—</a></li><li><a href="https://github.com/yangtao2o/gulp-project/tree/master/src/mygulp" target="_blank" rel="noopener">Github Demo</a></li></ul><h3 id="å¯¼å‡º"><a href="#å¯¼å‡º" class="headerlink" title="å¯¼å‡º"></a>å¯¼å‡º</h3><p>é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>gulpfile.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultTask</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"success"</span>);</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = defaultTask;</span><br></pre></td></tr></table></figure><p>gulp å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  gulp-project git:(master) âœ— gulp</span><br><span class="line">[17:06:29] Using gulpfile ~/Documents/GitHub/gulp-project/gulpfile.js</span><br><span class="line">[17:06:29] Starting <span class="string">'default'</span>...</span><br><span class="line">success</span><br><span class="line">[17:06:29] Finished <span class="string">'default'</span> after 2.67 ms</span><br></pre></td></tr></table></figure><h3 id="Gulpfile-åˆ†å‰²"><a href="#Gulpfile-åˆ†å‰²" class="headerlink" title="Gulpfile åˆ†å‰²"></a>Gulpfile åˆ†å‰²</h3><blockquote><p>Node çš„æ¨¡å—è§£æåŠŸèƒ½å…è®¸ä½ å°† gulpfile.jsâ€™ æ–‡ä»¶æ›¿æ¢ä¸ºåŒæ ·å‘½åä¸º gulpfile.js çš„ç›®å½•ï¼Œè¯¥ç›®å½•ä¸­åŒ…å«äº†ä¸€ä¸ªåä¸º index.js çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶è¢«å½“ä½œ gulpfile.js ä½¿ç”¨ã€‚å¹¶ä¸”ï¼Œè¯¥ç›®å½•ä¸­è¿˜å¯ä»¥åŒ…å«å„ä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼ˆtaskï¼‰æ¨¡å—ã€‚ â€” å®˜æ–¹æ–‡æ¡£</p></blockquote><p>åˆ›å»º <code>gulpfile.js</code>ç›®å½•ï¼Œ<code>gulpfile.js</code>ç›®å½•ä¸‹æ–°å»º <code>index.js</code></p><h3 id="ç»„åˆä»»åŠ¡"><a href="#ç»„åˆä»»åŠ¡" class="headerlink" title="ç»„åˆä»»åŠ¡"></a>ç»„åˆä»»åŠ¡</h3><ul><li>series() å…è®¸å°†å¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡ç»„åˆä¸ºä¸€ä¸ªæ›´å¤§çš„æ“ä½œ</li><li>å¯¹äºå¸Œæœ›ä»¥æœ€å¤§å¹¶å‘æ¥è¿è¡Œçš„ä»»åŠ¡ï¼ˆtasksï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ parallel() æ–¹æ³•å°†å®ƒä»¬ç»„åˆèµ·æ¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; series, parallel &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clean</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cssTranspile</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cssMinify</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsTranspile</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsBundle</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsMinify</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">publish</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">build</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = series(</span><br><span class="line">  clean,</span><br><span class="line">  parallel(cssTranspile, series(jsTranspile, jsBundle)),</span><br><span class="line">  parallel(cssMinify, jsMinify),</span><br><span class="line">  publish</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[16:50:36] Starting <span class="string">'default'</span>...</span><br><span class="line">[16:50:36] Starting <span class="string">'clean'</span>...</span><br><span class="line">[16:50:36] Finished <span class="string">'clean'</span> after 606 Î¼s</span><br><span class="line">[16:50:36] Starting <span class="string">'cssTranspile'</span>...</span><br><span class="line">[16:50:36] Finished <span class="string">'cssTranspile'</span> after 199 Î¼s</span><br><span class="line">[16:50:36] Starting <span class="string">'jsTranspile'</span>...</span><br><span class="line">[16:50:36] Finished <span class="string">'jsTranspile'</span> after 131 Î¼s</span><br><span class="line">[16:50:36] Starting <span class="string">'jsBundle'</span>...</span><br><span class="line">[16:50:36] Finished <span class="string">'jsBundle'</span> after 125 Î¼s</span><br><span class="line">[16:50:36] Starting <span class="string">'cssMinify'</span>...</span><br><span class="line">[16:50:36] Starting <span class="string">'jsMinify'</span>...</span><br><span class="line">[16:50:36] Finished <span class="string">'cssMinify'</span> after 183 Î¼s</span><br><span class="line">[16:50:36] Finished <span class="string">'jsMinify'</span> after 218 Î¼s</span><br><span class="line">[16:50:36] Starting <span class="string">'publish'</span>...</span><br><span class="line">[16:50:36] Finished <span class="string">'publish'</span> after 115 Î¼s</span><br><span class="line">[16:50:36] Finished <span class="string">'default'</span> after 4.55 ms</span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªç»„åˆæ“ä½œæ‰§è¡Œæ—¶ï¼Œè¿™ä¸ªç»„åˆä¸­çš„æ¯ä¸€ä¸ªä»»åŠ¡æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½ä¼šè¢«æ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is INCORRECT</span></span><br><span class="line"><span class="keyword">const</span> &#123; series, parallel &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> clean = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> css = series(clean, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> javascript = series(clean, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">exports.default = parallel(css, javascript);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[17:02:45] Starting <span class="string">'default'</span>...</span><br><span class="line">[17:02:45] Starting <span class="string">'clean'</span>...</span><br><span class="line">[17:02:45] Starting <span class="string">'clean'</span>...</span><br><span class="line">[17:02:45] Finished <span class="string">'clean'</span> after 850 Î¼s</span><br><span class="line">[17:02:45] Starting <span class="string">'&lt;anonymous&gt;'</span>...</span><br><span class="line">[17:02:45] Finished <span class="string">'clean'</span> after 2.04 ms</span><br><span class="line">[17:02:45] Starting <span class="string">'&lt;anonymous&gt;'</span>...</span><br><span class="line">[17:02:45] Finished <span class="string">'&lt;anonymous&gt;'</span> after 563 Î¼s</span><br><span class="line">[17:02:45] Finished <span class="string">'&lt;anonymous&gt;'</span> after 438 Î¼s</span><br><span class="line">[17:02:45] Finished <span class="string">'default'</span> after 7.67 ms</span><br></pre></td></tr></table></figure><p>é‡æ„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is INCORRECT</span></span><br><span class="line"><span class="keyword">const</span> &#123; series, parallel &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> clean = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> css = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> javascript = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.default = series(clean, parallel(css, javascript));</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[17:04:48] Starting <span class="string">'default'</span>...</span><br><span class="line">[17:04:48] Starting <span class="string">'clean'</span>...</span><br><span class="line">[17:04:48] Finished <span class="string">'clean'</span> after 546 Î¼s</span><br><span class="line">[17:04:48] Starting <span class="string">'css'</span>...</span><br><span class="line">[17:04:48] Starting <span class="string">'javascript'</span>...</span><br><span class="line">[17:04:48] Finished <span class="string">'css'</span> after 242 Î¼s</span><br><span class="line">[17:04:48] Finished <span class="string">'javascript'</span> after 285 Î¼s</span><br><span class="line">[17:04:48] Finished <span class="string">'default'</span> after 3.4 ms</span><br></pre></td></tr></table></figure><h3 id="å¼‚æ­¥æ‰§è¡Œ"><a href="#å¼‚æ­¥æ‰§è¡Œ" class="headerlink" title="å¼‚æ­¥æ‰§è¡Œ"></a>å¼‚æ­¥æ‰§è¡Œ</h3><blockquote><p>Node åº“ä»¥å¤šç§æ–¹å¼å¤„ç†å¼‚æ­¥åŠŸèƒ½ã€‚æœ€å¸¸è§çš„æ¨¡å¼æ˜¯ error-first callbacksï¼Œä½†æ˜¯ä½ è¿˜å¯èƒ½ä¼šé‡åˆ° streamsã€promisesã€event emittersã€child processes, æˆ– observablesã€‚gulp ä»»åŠ¡ï¼ˆtaskï¼‰è§„èŒƒåŒ–äº†æ‰€æœ‰è¿™äº›ç±»å‹çš„å¼‚æ­¥åŠŸèƒ½ã€‚ â€” å®˜æ–¹æ–‡æ¡£</p></blockquote><ul><li>è¿”å› stream</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; src, dest &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">streamTask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> src(<span class="string">"*.js"</span>).pipe(dest(<span class="string">"output"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = streamTask;</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç°ï¼Œæ ¹ç›®å½•ä¸‹ä¼šçœ‹åˆ° output ç›®å½•ï¼ŒåŠæ ¹ç›®å½•ä¸‹æ‰€æœ‰ä»¥ <code>*js</code>ç»“å°¾çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®å½•ã€‚</p><ul><li>è¿”å› promise</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promiseTask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="string">"the value is ignored"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = promiseTask;</span><br></pre></td></tr></table></figure><h3 id="è¿”å›-event-emitter"><a href="#è¿”å›-event-emitter" class="headerlink" title="è¿”å› event emitter"></a>è¿”å› event emitter</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; EventEmitter &#125; = <span class="built_in">require</span>(<span class="string">"events"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eventEmitterTask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> emitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> emitter.emit(<span class="string">"finish"</span>), <span class="number">250</span>);</span><br><span class="line">  <span class="keyword">return</span> emitter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = eventEmitterTask;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-callback"><a href="#ä½¿ç”¨-callback" class="headerlink" title="ä½¿ç”¨ callback"></a>ä½¿ç”¨ callback</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callbackTask</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// `cb()` should be called by some async work</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = callbackTask;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-async-await"><a href="#ä½¿ç”¨-async-await" class="headerlink" title="ä½¿ç”¨ async/await"></a>ä½¿ç”¨ async/await</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncAwaitTask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; version &#125; = fs.readFileSync(<span class="string">"package.json"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"version"</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="string">"some result"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.default = asyncAwaitTask;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ’ä»¶"><a href="#ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; src, dest &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> uglify = <span class="built_in">require</span>(<span class="string">"gulp-uglify"</span>);</span><br><span class="line"><span class="keyword">const</span> rename = <span class="built_in">require</span>(<span class="string">"gulp-rename"</span>);</span><br><span class="line"></span><br><span class="line">exports.default = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> src(<span class="string">"src/assets/**/*.js"</span>)</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(rename(&#123; <span class="attr">extname</span>: <span class="string">".min.js"</span> &#125;))</span><br><span class="line">    .pipe(dest(<span class="string">"output/"</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="browsersync"><a href="#browsersync" class="headerlink" title="browsersync"></a>browsersync</h3><ul><li><a href="http://www.browsersync.cn/docs/gulp/#gulp-install" target="_blank" rel="noopener">Browsersync + Gulp.js</a></li></ul><p>ä¸‹è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install browser-sync gulp --save-dev</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; task, watch &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> browserSync = <span class="built_in">require</span>(<span class="string">"browser-sync"</span>).create();</span><br><span class="line"><span class="keyword">const</span> reload = browserSync.reload;</span><br><span class="line"><span class="keyword">const</span> serve = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  browserSync.init(&#123;</span><br><span class="line">    server: &#123;</span><br><span class="line">      baseDir: <span class="string">"./src"</span>,</span><br><span class="line">      https: <span class="literal">true</span>,</span><br><span class="line">      directory: <span class="literal">true</span> <span class="comment">//ä»ä¸ç›®å½•åˆ—è¡¨çš„åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ–‡ä»¶å³æˆ</span></span><br><span class="line">      <span class="comment">// index: "index.html"  //ä»åº”ç”¨ç¨‹åºç›®å½•ä¸­æä¾›æ–‡ä»¶ï¼ŒæŒ‡å®šç‰¹å®šæ–‡ä»¶åä¸ºç´¢å¼•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    port: <span class="number">8080</span>,</span><br><span class="line">    notify: <span class="literal">false</span> <span class="comment">// å¼€å¯é™é»˜æ¨¡å¼</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  watch(<span class="string">"src/*.html"</span>).on(<span class="string">"change"</span>, reload);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">task(serve);</span><br></pre></td></tr></table></figure><p>æœ¬åœ°ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; src, dest, watch, series, parallel &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> uglify = <span class="built_in">require</span>(<span class="string">"gulp-uglify"</span>);</span><br><span class="line"><span class="keyword">const</span> rename = <span class="built_in">require</span>(<span class="string">"gulp-rename"</span>);</span><br><span class="line"><span class="keyword">const</span> browserSync = <span class="built_in">require</span>(<span class="string">"browser-sync"</span>).create();</span><br><span class="line"><span class="keyword">const</span> reload = browserSync.reload;</span><br><span class="line"><span class="keyword">const</span> jsWatcher = watch(<span class="string">"src/**/*.js"</span>);</span><br><span class="line"><span class="keyword">const</span> cssWatcher = watch(<span class="string">"src/**/*.css"</span>);</span><br><span class="line"><span class="keyword">const</span> htmlWatcher = watch(<span class="string">"src/**/*.html"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> clean = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> css = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> javascript = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// body omitted</span></span><br><span class="line">  cb();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serve = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  browserSync.init(&#123;</span><br><span class="line">    server: &#123;</span><br><span class="line">      baseDir: <span class="string">"./src"</span>,</span><br><span class="line">      <span class="comment">// https: true,</span></span><br><span class="line">      directory: <span class="literal">true</span> <span class="comment">//ä»ä¸ç›®å½•åˆ—è¡¨çš„åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ–‡ä»¶å³æˆï¼Œå¦‚æœè¦æŒ‡å®šæ–‡ä»¶ï¼Œå¯æ³¨é‡Šæ‰</span></span><br><span class="line">      <span class="comment">// index: "index.html"  //ä»åº”ç”¨ç¨‹åºç›®å½•ä¸­æä¾›æ–‡ä»¶ï¼ŒæŒ‡å®šç‰¹å®šæ–‡ä»¶åä¸ºç´¢å¼•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    port: <span class="number">8080</span>,</span><br><span class="line">    notify: <span class="literal">false</span> <span class="comment">// å¼€å¯é™é»˜æ¨¡å¼</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬ globs å¹¶åœ¨å‘ç”Ÿæ›´æ”¹æ—¶è¿è¡Œä»»åŠ¡</span></span><br><span class="line">jsWatcher.on(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">path, stats</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`File <span class="subst">$&#123;path&#125;</span> was changed`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">cssWatcher.on(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">path, stats</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`File <span class="subst">$&#123;path&#125;</span> was changed`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">htmlWatcher.on(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">path, stats</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`File <span class="subst">$&#123;path&#125;</span> was changed`</span>);</span><br><span class="line">  reload(); <span class="comment">// Reloading Browsers</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">exports.build = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> src(<span class="string">"src/assets/**/*.js"</span>)</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(rename(&#123; <span class="attr">extname</span>: <span class="string">".min.js"</span> &#125;))</span><br><span class="line">    .pipe(dest(<span class="string">"output/"</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.serve = serve;</span><br><span class="line"></span><br><span class="line">exports.default = series(clean, parallel(css, javascript));</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ ¹ç›®å½•ä¸‹çš„<code>package.json</code>ï¼Œä¿®æ”¹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "dev": "gulp",</span><br><span class="line">  "build": "gulp build",</span><br><span class="line">  "serve": "gulp serve"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure><h2 id="Gulp-SASS"><a href="#Gulp-SASS" class="headerlink" title="Gulp + SASS"></a>Gulp + SASS</h2><p>-<a href="https://www.sass.hk/install/" target="_blank" rel="noopener">å¦‚ä½•å®‰è£… Sass</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass gulp-sass --save-dev</span><br></pre></td></tr></table></figure><p><code>gulpfile.js</code> æ–‡ä»¶ä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; src, dest, watch &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> sass = <span class="built_in">require</span>(<span class="string">"gulp-sass"</span>);</span><br><span class="line">sass.compiler = <span class="built_in">require</span>(<span class="string">"node-sass"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scss</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> src(scssGlobSrc)</span><br><span class="line">    .pipe(sass(&#123; <span class="attr">outputStyle</span>: <span class="string">"expanded"</span> &#125;).on(<span class="string">"error"</span>, sass.logError))</span><br><span class="line">    .pipe(dest(<span class="string">"dist/sass"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.scss = scss;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ï¼š<code>gulp scss</code>ã€‚</p><h2 id="Gulp-Browsersync"><a href="#Gulp-Browsersync" class="headerlink" title="Gulp + Browsersync"></a>Gulp + Browsersync</h2><ul><li><a href="http://www.browsersync.cn/docs/gulp/" target="_blank" rel="noopener">Browsersync + Gulp.js</a></li></ul><p>ä¸‹è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install browser-sync gulp --save-dev</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; task, watch &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> browserSync = <span class="built_in">require</span>(<span class="string">"browser-sync"</span>).create();</span><br><span class="line"><span class="keyword">const</span> reload = browserSync.reload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serve = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  browserSync.init(&#123;</span><br><span class="line">    server: &#123;</span><br><span class="line">      baseDir: <span class="string">"./src"</span>,</span><br><span class="line">      https: <span class="literal">true</span>,</span><br><span class="line">      directory: <span class="literal">true</span> <span class="comment">//ä»ä¸ç›®å½•åˆ—è¡¨çš„åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ–‡ä»¶å³æˆ</span></span><br><span class="line">      <span class="comment">// index: "index.html"  //ä»åº”ç”¨ç¨‹åºç›®å½•ä¸­æä¾›æ–‡ä»¶ï¼ŒæŒ‡å®šç‰¹å®šæ–‡ä»¶åä¸ºç´¢å¼•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    port: <span class="number">8080</span>,</span><br><span class="line">    notify: <span class="literal">false</span> <span class="comment">// å¼€å¯é™é»˜æ¨¡å¼</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  watch(<span class="string">"src/*.html"</span>).on(<span class="string">"change"</span>, reload);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.serve = serve;</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp serve</span><br></pre></td></tr></table></figure><h2 id="Gulp-TypeScript"><a href="#Gulp-TypeScript" class="headerlink" title="Gulp + TypeScript"></a>Gulp + TypeScript</h2><p>æ ¹ç›®å½•ä¸‹åˆå§‹åŒ–ï¼š<code>tsc --init</code>ã€‚</p><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D typescript gulp-typescript</span><br></pre></td></tr></table></figure><p>é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ts = <span class="built_in">require</span>(<span class="string">"gulp-typescript"</span>);</span><br><span class="line"><span class="keyword">const</span> tsProject = ts.createProject(<span class="string">"tsconfig.json"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">typescript</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> tsProject</span><br><span class="line">    .src()</span><br><span class="line">    .pipe(tsProject())</span><br><span class="line">    .js.pipe(dest(<span class="string">"dist/ts"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.typescript = typescript;</span><br></pre></td></tr></table></figure><p>src ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ <code>main.ts</code>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Student &#123;</span><br><span class="line">  fullName: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> firstName: <span class="built_in">string</span>, <span class="keyword">public</span> lastName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.fullName = <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span> `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  firstName: <span class="built_in">string</span>;</span><br><span class="line">  lastName: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greeter</span>(<span class="params">person: Person</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hello, <span class="subst">$&#123;person.firstName&#125;</span> <span class="subst">$&#123;person.lastName&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> Student(<span class="string">"Yang"</span>, <span class="string">"Tao"</span>);</span><br><span class="line"></span><br><span class="line">greeter(user);</span><br><span class="line"><span class="built_in">console</span>.log(user.fullName);</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp typescript</span><br></pre></td></tr></table></figure><h2 id="Riot"><a href="#Riot" class="headerlink" title="Riot"></a>Riot</h2><ul><li><a href="http://eux.baidu.com/blog/fe/riot-js-%E6%A1%86%E6%9E%B6%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">Riot.js æ¡†æ¶æ·±å…¥è§£æ</a></li><li><a href="https://cloud.tencent.com/developer/article/1019472" target="_blank" rel="noopener">riot.js æ•™ç¨‹ã€ä¸€ã€‘ç®€ä»‹</a></li><li><a href="https://riot.js.org/documentation/" target="_blank" rel="noopener">RIOT</a>æ–‡æ¡£</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gulp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zepto-core-1.1.6 æºç æ³¨é‡Šã€è½¬è½½ã€‘</title>
      <link href="/2020/03/13/zepto-v1.6.6/"/>
      <url>/2020/03/13/zepto-v1.6.6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸæ–‡ï¼š<a href="https://www.kancloud.cn/wangfupeng/zepto-design-srouce/173692" target="_blank" rel="noopener">zepto-core-1.1.6 æºç æ³¨é‡Š</a></p></blockquote><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="literal">undefined</span>,</span><br><span class="line">    key,</span><br><span class="line">    $,</span><br><span class="line">    classList,</span><br><span class="line">    <span class="comment">// è·å–æ•°ç»„çš„slice å’Œ filterï¼ˆè¿”å›æ•°ç»„ä¸­çš„æ»¡è¶³å›è°ƒå‡½æ•°ä¸­æŒ‡å®šçš„æ¡ä»¶çš„å…ƒç´ ï¼‰æ–¹æ³•</span></span><br><span class="line">    emptyArray = [],</span><br><span class="line">    slice = emptyArray.slice,</span><br><span class="line">    filter = emptyArray.filter,</span><br><span class="line">    <span class="built_in">document</span> = <span class="built_in">window</span>.document,</span><br><span class="line">    elementDisplay = &#123;&#125;,</span><br><span class="line">    classCache = &#123;&#125;,</span><br><span class="line">    cssNumber = &#123;</span><br><span class="line">      <span class="string">"column-count"</span>: <span class="number">1</span>,</span><br><span class="line">      columns: <span class="number">1</span>,</span><br><span class="line">      <span class="string">"font-weight"</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">"line-height"</span>: <span class="number">1</span>,</span><br><span class="line">      opacity: <span class="number">1</span>,</span><br><span class="line">      <span class="string">"z-index"</span>: <span class="number">1</span>,</span><br><span class="line">      zoom: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span></span><br><span class="line">    fragmentRE = <span class="regexp">/^\s*&lt;(\w+|!)[^&gt;]*&gt;/</span>,</span><br><span class="line">    <span class="comment">// åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt;  ä¸åŒ¹é… &lt;img src=""/&gt; &lt;p&gt;123&lt;/p&gt;</span></span><br><span class="line">    singleTagRE = <span class="regexp">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/</span>,</span><br><span class="line">    <span class="comment">// å•æ ‡ç­¾</span></span><br><span class="line">    tagExpanderRE = <span class="regexp">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/gi</span>,</span><br><span class="line">    <span class="comment">// body html</span></span><br><span class="line">    rootNodeRE = <span class="regexp">/^(?:body|html)$/i</span>,</span><br><span class="line">    <span class="comment">// å¤§å†™å­—æ¯</span></span><br><span class="line">    capitalRE = <span class="regexp">/([A-Z])/g</span>,</span><br><span class="line">    <span class="comment">// special attributes that should be get/set via method calls</span></span><br><span class="line">    <span class="comment">// åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§</span></span><br><span class="line">    methodAttributes = [</span><br><span class="line">      <span class="string">"val"</span>,</span><br><span class="line">      <span class="string">"css"</span>,</span><br><span class="line">      <span class="string">"html"</span>,</span><br><span class="line">      <span class="string">"text"</span>,</span><br><span class="line">      <span class="string">"data"</span>,</span><br><span class="line">      <span class="string">"width"</span>,</span><br><span class="line">      <span class="string">"height"</span>,</span><br><span class="line">      <span class="string">"offset"</span></span><br><span class="line">    ],</span><br><span class="line">    adjacencyOperators = [<span class="string">"after"</span>, <span class="string">"prepend"</span>, <span class="string">"before"</span>, <span class="string">"append"</span>],</span><br><span class="line">    table = <span class="built_in">document</span>.createElement(<span class="string">"table"</span>),</span><br><span class="line">    tableRow = <span class="built_in">document</span>.createElement(<span class="string">"tr"</span>),</span><br><span class="line">    <span class="comment">// æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨</span></span><br><span class="line">    containers = &#123;</span><br><span class="line">      tr: <span class="built_in">document</span>.createElement(<span class="string">"tbody"</span>),</span><br><span class="line">      tbody: table,</span><br><span class="line">      thead: table,</span><br><span class="line">      tfoot: table,</span><br><span class="line">      td: tableRow,</span><br><span class="line">      th: tableRow,</span><br><span class="line">      <span class="comment">// é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div</span></span><br><span class="line">      <span class="string">"*"</span>: <span class="built_in">document</span>.createElement(<span class="string">"div"</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// interactive ï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">    readyRE = <span class="regexp">/complete|loaded|interactive/</span>,</span><br><span class="line">    <span class="comment">// åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    simpleSelectorRE = <span class="regexp">/^[\w-]*$/</span>,</span><br><span class="line">    class2type = &#123;&#125;,</span><br><span class="line">    toString = class2type.toString,</span><br><span class="line">    zepto = &#123;&#125;,</span><br><span class="line">    camelize,</span><br><span class="line">    uniq,</span><br><span class="line">    tempParent = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>),</span><br><span class="line">    <span class="comment">// å±æ€§è½¬æ¢ä¸º camalCase æ ¼å¼ã€‚</span></span><br><span class="line">    <span class="comment">// $.fn.prop æ–¹æ³•ç”¨åˆ°äº†</span></span><br><span class="line">    propMap = &#123;</span><br><span class="line">      tabindex: <span class="string">"tabIndex"</span>,</span><br><span class="line">      readonly: <span class="string">"readOnly"</span>,</span><br><span class="line">      <span class="keyword">for</span>: <span class="string">"htmlFor"</span>,</span><br><span class="line">      class: "className",</span><br><span class="line">      maxlength: <span class="string">"maxLength"</span>,</span><br><span class="line">      cellspacing: <span class="string">"cellSpacing"</span>,</span><br><span class="line">      cellpadding: <span class="string">"cellPadding"</span>,</span><br><span class="line">      rowspan: <span class="string">"rowSpan"</span>,</span><br><span class="line">      colspan: <span class="string">"colSpan"</span>,</span><br><span class="line">      usemap: <span class="string">"useMap"</span>,</span><br><span class="line">      frameborder: <span class="string">"frameBorder"</span>,</span><br><span class="line">      contenteditable: <span class="string">"contentEditable"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯arrçš„å‡½æ•°</span></span><br><span class="line">    isArray =</span><br><span class="line">      <span class="built_in">Array</span>.isArray ||</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> object <span class="keyword">instanceof</span> <span class="built_in">Array</span>;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125;</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ element æ˜¯å¦ç¬¦åˆ selector çš„é€‰æ‹©è¦æ±‚</span></span><br><span class="line">  zepto.matches = <span class="function"><span class="keyword">function</span>(<span class="params">element, selector</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// selectoræœ‰å€¼ï¼Œelementæœ‰å€¼ï¼Œelementæ˜¯æ™®é€šDOMèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (!selector || !element || element.nodeType !== <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// elem.matchesSelector('.item')</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­å½“å‰çš„ elem æ˜¯å¦ç¬¦åˆä¼ å…¥çš„ selector çš„è¦æ±‚</span></span><br><span class="line">    <span class="keyword">var</span> matchesSelector =</span><br><span class="line">      element.webkitMatchesSelector ||</span><br><span class="line">      element.mozMatchesSelector ||</span><br><span class="line">      element.oMatchesSelector ||</span><br><span class="line">      element.matchesSelector;</span><br><span class="line">    <span class="keyword">if</span> (matchesSelector) <span class="keyword">return</span> matchesSelector.call(element, selector);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµè§ˆå™¨ä¸æ”¯æŒ matchesSelector</span></span><br><span class="line">    <span class="comment">// fall back to performing a selector:</span></span><br><span class="line">    <span class="keyword">var</span> match,</span><br><span class="line">      parent = element.parentNode,</span><br><span class="line">      temp = !parent;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šæ–‡å®šä¹‰ tempParent = document.createElement('div'),</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰parentï¼Œparentèµ‹å€¼ä¸ºä¸€ä¸ªdivï¼Œç„¶åå°†å½“å‰å…ƒç´ åŠ å…¥åˆ°è¿™ä¸ªdivä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (temp) &#123;</span><br><span class="line">      parent = tempParent;</span><br><span class="line">      tempParent.appendChild(element);</span><br><span class="line">      <span class="comment">// (parent = tempParent).appendChild(element); è¿™ç§å†™æ³•ä¸æ˜“è¯»</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡ qsa è·å–åŒ¹é…çš„å…ƒç´ ï¼Œåˆ¤æ–­å…¶ä¸­æœ‰æ²¡æœ‰ element</span></span><br><span class="line">    match = ~zepto.qsa(parent, selector).indexOf(element);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (temp) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰parentæ—¶ï¼Œä¹‹å‰æ‰§è¡Œè¿‡  tempParent.appendChild(element);</span></span><br><span class="line">      <span class="comment">// æ­¤æ—¶è¦ç§»é™¤å­å…ƒç´ </span></span><br><span class="line">      tempParent.removeChild(element);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// temp &amp;&amp; tempParent.removeChild(element)  // è¿™ç§å†™æ³•ä¸æ˜“è¯»</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›æœ€ç»ˆçš„åŒ¹é…ç»“æœï¼Œç»è¿‡ qsa åˆ¤æ–­çš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> match;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj == <span class="literal">null</span></span><br><span class="line">      ? <span class="built_in">String</span>(obj) <span class="comment">// null undefined</span></span><br><span class="line">      : class2type[toString.call(obj)] || <span class="string">"object"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹æ–‡å®šä¹‰ï¼š</span></span><br><span class="line">    <span class="comment">// // Populate the class2type map</span></span><br><span class="line">    <span class="comment">// $.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) &#123;</span></span><br><span class="line">    <span class="comment">//   class2type[ "[object " + name + "]" ] = name.toLowerCase()</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> type(value) == <span class="string">"function"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// windowçš„ç‰¹ç‚¹ï¼šwindow.window === window</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isWindow</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj != <span class="literal">null</span> &amp;&amp; obj == obj.window;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// document.nodeType === 9</span></span><br><span class="line">  <span class="comment">// elem.DOCUMENT_NODE ä¹Ÿç­‰äº 9 ï¼ˆè¿™é‡Œç›´æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯9ä¹Ÿè¡Œï¼Ÿï¼Ÿï¼Ÿï¼‰</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isDocument</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj != <span class="literal">null</span> &amp;&amp; obj.nodeType == obj.DOCUMENT_NODE;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> type(obj) == <span class="string">"object"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åŸºæœ¬çš„objectï¼šObject.getPrototypeOf(obj) == Object.prototype</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      isObject(obj) &amp;&amp;</span><br><span class="line">      !isWindow(obj) &amp;&amp;</span><br><span class="line">      <span class="built_in">Object</span>.getPrototypeOf(obj) == <span class="built_in">Object</span>.prototype</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">likeArray</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> obj.length == <span class="string">"number"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç­›é€‰æ•°ç»„ï¼Œè¸¢å‡º null undefined å…ƒç´ </span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">compact</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> filter.call(array, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item != <span class="literal">null</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸‹æ–‡å®šä¹‰ï¼š</span></span><br><span class="line">  <span class="comment">// $.fn = &#123;</span></span><br><span class="line">  <span class="comment">//    concat: emptyArray.concat,</span></span><br><span class="line">  <span class="comment">// $.fn.concat.apply([], array) â€”â€” æ— è®º array æ˜¯ä¸æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ</span></span><br><span class="line">  <span class="comment">// ä¾‹å¦‚ $.fn.concat.call([], 'abc') è¿”å›çš„æ˜¯ ['abc']</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array.length &gt; <span class="number">0</span> ? $.fn.concat.apply([], array) : array;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// camelize å·²åœ¨ä¸Šæ–‡å®šä¹‰</span></span><br><span class="line">  <span class="comment">// ç”¨äº css çš„ camalCase è½¬æ¢ï¼Œä¾‹å¦‚ background-color è½¬æ¢ä¸º backgroundColor</span></span><br><span class="line">  camelize = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/-+(.)?/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match, chr</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> chr ? chr.toUpperCase() : <span class="string">""</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dasherize</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">      .replace(<span class="regexp">/::/g</span>, <span class="string">"/"</span>)</span><br><span class="line">      .replace(<span class="regexp">/([A-Z]+)([A-Z][a-z])/g</span>, <span class="string">"$1_$2"</span>)</span><br><span class="line">      .replace(<span class="regexp">/([a-z\d])([A-Z])/g</span>, <span class="string">"$1_$2"</span>)</span><br><span class="line">      .replace(<span class="regexp">/_/g</span>, <span class="string">"-"</span>)</span><br><span class="line">      .toLowerCase();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// uniqå˜é‡å·²ç»åœ¨å‰é¢å®šä¹‰</span></span><br><span class="line">  <span class="comment">// ç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3]</span></span><br><span class="line">  uniq = <span class="function"><span class="keyword">function</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> filter.call(array, <span class="function"><span class="keyword">function</span>(<span class="params">item, idx</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> array.indexOf(item) == idx;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ classCache = &#123;&#125;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">classRE</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name <span class="keyword">in</span> classCache</span><br><span class="line">      ? classCache[name]</span><br><span class="line">      : (classCache[name] = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|\\s)"</span> + name + <span class="string">"(\\s|$)"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//   abc: /(^|\s)abc(\s|$)/,  // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc '</span></span><br><span class="line">    <span class="comment">//   xyz: /(^|\s)abc(\s|$)/,</span></span><br><span class="line">    <span class="comment">//   ...</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼ å…¥ä¸€ä¸ª css çš„ name å’Œ valueï¼Œåˆ¤æ–­è¿™ä¸ª value æ˜¯å¦éœ€è¦å¢åŠ  'px'</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">maybeAddPx</span>(<span class="params">name, value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// dasherize(name) å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span></span><br><span class="line">    <span class="comment">// \!cssNumber[dasherize(name)] åˆ¤æ–­è½¬æ¢å‡ºæ¥çš„ css name æ˜¯å¦å†è¿™ä¸ªæ•°ç»„ä¹‹å¤–</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> value == <span class="string">"number"</span> &amp;&amp; !cssNumber[dasherize(name)]</span><br><span class="line">      ? <span class="comment">// å¦‚æœ value æ˜¯æ•°å­—ï¼Œå¹¶ä¸” name ä¸åœ¨ cssNumber æ•°ç»„ä¹‹å†…ï¼Œå°±éœ€è¦åŠ  'px'ï¼Œå¦åˆ™ä¸éœ€è¦</span></span><br><span class="line">        <span class="comment">// ä¾‹å¦‚ 'width'ã€'font-size' å°±éœ€è¦åŠ  'px'ï¼Œ 'font-weight' å°±ä¸éœ€è¦åŠ </span></span><br><span class="line">        value + <span class="string">"px"</span></span><br><span class="line">      : value;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰æ–‡å®šä¹‰----------------------</span></span><br><span class="line">    <span class="comment">// cssNumber = &#123;</span></span><br><span class="line">    <span class="comment">//   'column-count': 1,</span></span><br><span class="line">    <span class="comment">//   'columns': 1,</span></span><br><span class="line">    <span class="comment">//   'font-weight': 1,</span></span><br><span class="line">    <span class="comment">//   'line-height': 1,</span></span><br><span class="line">    <span class="comment">//   'opacity': 1,</span></span><br><span class="line">    <span class="comment">//   'z-index': 1,</span></span><br><span class="line">    <span class="comment">//   'zoom': 1</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="comment">// function dasherize(str) &#123;</span></span><br><span class="line">    <span class="comment">//   return str.replace(/::/g, '/')</span></span><br><span class="line">    <span class="comment">//             .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')</span></span><br><span class="line">    <span class="comment">//             .replace(/([a-z\d])([A-Z])/g, '$1_$2')</span></span><br><span class="line">    <span class="comment">//             .replace(/_/g, '-')</span></span><br><span class="line">    <span class="comment">//             .toLowerCase()</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ä¸€ä¸ªå…ƒç´ çš„é»˜è®¤ display æ ·å¼å€¼ï¼Œå¯èƒ½çš„ç»“æœæ˜¯ï¼šinline block inline-block table .... ï¼ˆnone è½¬æ¢ä¸º blockï¼‰</span></span><br><span class="line">  <span class="comment">// $.fn.show æ–¹æ³•ä¸­ç”¨åˆ°äº†</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">defaultDisplay</span>(<span class="params">nodeName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element, display;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰æ–‡å®šä¹‰ elementDisplay = &#123;&#125;</span></span><br><span class="line">    <span class="keyword">if</span> (!elementDisplay[nodeName]) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœ elementDisplay å¯¹è±¡ä¸­ï¼Œæ²¡æœ‰å­˜å‚¨ nodeName çš„ä¿¡æ¯</span></span><br><span class="line">      <span class="comment">// åˆ™æ–°å»ºä¸€ä¸ª nodeName å…ƒç´ ï¼Œæ·»åŠ åˆ° body ä¸­</span></span><br><span class="line">      element = <span class="built_in">document</span>.createElement(nodeName);</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(element);</span><br><span class="line">      <span class="comment">// è·å–å®ƒçš„é»˜è®¤çš„ display æ ·å¼ä¿¡æ¯ã€‚</span></span><br><span class="line">      display = getComputedStyle(element, <span class="string">""</span>).getPropertyValue(<span class="string">"display"</span>);</span><br><span class="line">      <span class="comment">// æ¥ç€é©¬ä¸Šç§»é™¤å…ƒç´ ï¼ï¼ï¼</span></span><br><span class="line">      element.parentNode.removeChild(element);</span><br><span class="line">      <span class="comment">// 'none' æ¢æˆ 'block'ï¼Œå¦å¤–è¿˜å¯èƒ½æ˜¯ 'inline' 'inline-block' 'table' ç­‰ç­‰...</span></span><br><span class="line">      display == <span class="string">"none"</span> &amp;&amp; (display = <span class="string">"block"</span>);</span><br><span class="line">      <span class="comment">// å­˜å‚¨ä¸‹æ¥</span></span><br><span class="line">      elementDisplay[nodeName] = display;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸‹æ–‡å®šä¹‰</span></span><br><span class="line">      <span class="comment">// var nativeGetComputedStyle = getComputedStyle;</span></span><br><span class="line">      <span class="comment">// window.getComputedStyle = function(element)&#123;</span></span><br><span class="line">      <span class="comment">//   try &#123;</span></span><br><span class="line">      <span class="comment">//     return nativeGetComputedStyle(element)</span></span><br><span class="line">      <span class="comment">//   &#125; catch(e) &#123;</span></span><br><span class="line">      <span class="comment">//     return null</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      <span class="comment">// è§£é‡Šï¼š</span></span><br><span class="line">      <span class="comment">// å¦‚æœæµè§ˆå™¨æ”¯æŒ getComputedStyle åˆ™ä½¿ç”¨ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå°±è¿”å› null</span></span><br><span class="line">      <span class="comment">// getComputedStyle(elem, 'ä¼ªç±»ï¼Œå¦‚ :link') è¿”å›ä¸€ä¸ª CSSStyleDeclaration å¯¹è±¡ï¼Œé‡Œé¢å­˜å‚¨äº†å…ƒç´ çš„æ ·å¼ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ getPropertyValue('name') æ–¹æ³•è·å–</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€ç»ˆè¿”å› display ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> elementDisplay[nodeName];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œæ•°ç»„å½¢å¼</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">children</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æœ‰äº›æµè§ˆå™¨æ”¯æŒ elem.children è·å–å­å…ƒç´ ï¼Œæœ‰äº›ä¸æ”¯æŒ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"children"</span> <span class="keyword">in</span> element</span><br><span class="line">      ? <span class="comment">// ä¸Šæ–‡å®šä¹‰ slice = [].slice</span></span><br><span class="line">        <span class="comment">// slice.call(likeArr) å¯ä»¥å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„</span></span><br><span class="line">        slice.call(element.children)</span><br><span class="line">      : <span class="comment">// æµè§ˆå™¨ä¸æ”¯æŒ elem.children åªèƒ½é€šè¿‡ elem.childNodes è·å–å­å…ƒç´ </span></span><br><span class="line">        <span class="comment">// åªå» node.nodeType == 1 çš„å­å…ƒç´ ï¼Œé€šè¿‡ $.map æ‹¼æ¥æˆæ•°ç»„</span></span><br><span class="line">        <span class="comment">// $.map ä¸‹æ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) &#123;....&#125;</span></span><br><span class="line">        <span class="comment">// $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„</span></span><br><span class="line">        $.map(element.childNodes, <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (node.nodeType == <span class="number">1</span>) <span class="keyword">return</span> node;</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125;</span></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) &#123; /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `$.zepto.fragment` takes a html string and an optional tag name</span></span><br><span class="line">  <span class="comment">// to generate DOM nodes nodes from the given html string.</span></span><br><span class="line">  <span class="comment">// The generated DOM nodes are returned as an array.</span></span><br><span class="line">  <span class="comment">// This function can be overriden in plugins for example to make</span></span><br><span class="line">  <span class="comment">// it compatible with browsers that don't support the DOM fully.</span></span><br><span class="line">  zepto.fragment = <span class="function"><span class="keyword">function</span>(<span class="params">html, name, properties</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">      @html: å¾…å¤„ç†çš„htmlå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">      @name: é€šè¿‡ name å¯åœ¨ containers ä¸­æŸ¥æ‰¾å®¹å™¨èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¼ å…¥ï¼Œå–å¾—çš„å®¹å™¨é»˜è®¤ä¸º div</span></span><br><span class="line"><span class="comment">      @properties: èŠ‚ç‚¹å±æ€§å¯¹è±¡</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> dom, nodes, container;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼šsingleTagRE = /^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/,   // åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt;  ä¸åŒ¹é… &lt;img src=""/&gt; &lt;p&gt;123&lt;/p&gt;</span></span><br><span class="line">    <span class="comment">// å¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™ç›´æ¥ç”¨è¯¥æ ‡ç­¾åˆ›å»ºå…ƒç´ </span></span><br><span class="line">    <span class="comment">// RegExp.$1 è¡¨ç¤ºæ­£åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼Œåœ¨æ­¤å³ (\w+) åŒ¹é…çš„å†…å®¹ï¼Œ</span></span><br><span class="line">    <span class="comment">// A special case optimization for a single tag</span></span><br><span class="line">    <span class="keyword">if</span> (singleTagRE.test(html)) dom = $(<span class="built_in">document</span>.createElement(<span class="built_in">RegExp</span>.$<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!dom) &#123;</span><br><span class="line">      <span class="comment">// è¯´æ˜ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œdomæœªè¢«èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ tagExpanderRE = /&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig,   // å•æ ‡ç­¾</span></span><br><span class="line">      <span class="comment">// å°† &lt;p/&gt;æˆ–&lt;p /&gt;ï¼Œæ›¿æ¢ä¸º &lt;p&gt;&lt;/p&gt;ï¼Œå°†&lt;p abc/&gt;æ›¿æ¢ä¸º&lt;p&gt;abc&lt;/p&gt;</span></span><br><span class="line">      <span class="comment">// &lt;input/&gt; ï¼ˆåœ¨ tagExpanderRE ä¸­å®šä¹‰ï¼‰çš„ä¸æ›¿æ¢</span></span><br><span class="line">      <span class="keyword">if</span> (html.replace) html = html.replace(tagExpanderRE, <span class="string">"&lt;$1&gt;&lt;/$2&gt;"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// fragmentRE = /^\s*&lt;(\w+|!)[^&gt;]*&gt;/,   // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span></span><br><span class="line">      <span class="comment">// å¦‚æœ name æœªä¼ å…¥ï¼Œåˆ™èµ‹å€¼ä¸º html çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾</span></span><br><span class="line">      <span class="keyword">if</span> (name === <span class="literal">undefined</span>) name = fragmentRE.test(html) &amp;&amp; <span class="built_in">RegExp</span>.$<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰</span></span><br><span class="line">      <span class="comment">// æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨</span></span><br><span class="line">      <span class="comment">// containers = &#123;</span></span><br><span class="line">      <span class="comment">//   'tr': document.createElement('tbody'),</span></span><br><span class="line">      <span class="comment">//   'tbody': table,</span></span><br><span class="line">      <span class="comment">//   'thead': table,</span></span><br><span class="line">      <span class="comment">//   'tfoot': table,</span></span><br><span class="line">      <span class="comment">//   'td': tableRow,</span></span><br><span class="line">      <span class="comment">//   'th': tableRow,</span></span><br><span class="line">      <span class="comment">// é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div</span></span><br><span class="line">      <span class="comment">//   '*': document.createElement('div')</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      <span class="keyword">if</span> (!(name <span class="keyword">in</span> containers)) name = <span class="string">"*"</span>;</span><br><span class="line"></span><br><span class="line">      container = containers[name];</span><br><span class="line">      container.innerHTML = <span class="string">""</span> + html; <span class="comment">// è½¬å˜ä¸ºå­—ç¬¦ä¸²çš„å¿«æ·æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// éå† container çš„å­å…ƒç´ ï¼ˆå…ˆè½¬æ¢ä¸ºæ•°ç»„å½¢å¼ï¼‰</span></span><br><span class="line">      <span class="comment">// è¿”å›çš„åŒæ—¶ï¼Œå°†æ¯ä¸ªå­å…ƒç´ ç§»é™¤ã€‚</span></span><br><span class="line">      <span class="comment">// $.each è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ•°ç»„ slice.call(container.childNodes)</span></span><br><span class="line">      dom = $.each(slice.call(container.childNodes), <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        container.removeChild(<span class="keyword">this</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èµ‹å€¼å±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (isPlainObject(properties)) &#123;</span><br><span class="line">      <span class="comment">// å…ˆå°†domè½¬æ¢ä¸º zepto å¯¹è±¡</span></span><br><span class="line">      nodes = $(dom);</span><br><span class="line"></span><br><span class="line">      $.each(properties, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line">        <span class="comment">// åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§</span></span><br><span class="line">        <span class="comment">// methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],</span></span><br><span class="line">        <span class="keyword">if</span> (methodAttributes.indexOf(key) &gt; <span class="number">-1</span>) nodes[key](value);</span><br><span class="line">        <span class="comment">// æ»¡è¶³ methodAttributes çš„ï¼Œé€šè¿‡æ–¹æ³•èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">else</span> nodes.attr(key, value); <span class="comment">// å¦åˆ™ï¼Œé€šè¿‡å±æ€§å¤åˆ¶</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€ç»ˆè¿”å›çš„domå¯èƒ½æœ‰ä¸¤ç§å½¢å¼</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ï¼Œå¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªzeptoå¯¹è±¡ dom = $(document.createElement(RegExp.$1))</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒï¼Œå¦‚æœ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªDOMèŠ‚ç‚¹çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">return</span> dom;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125;</span></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) &#123; /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ &#125;</span></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto.fragment = function(html, name, properties) &#123; /* é€šè¿‡htmlå­—ç¬¦ä¸²è·å–æ–‡æ¡£ç¢ç‰‡ */ &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// `$.zepto.Z` swaps out the prototype of the given `dom` array</span></span><br><span class="line">  <span class="comment">// of nodes with `$.fn` and thus supplying all the Zepto functions</span></span><br><span class="line">  <span class="comment">// to the array. Note that `__proto__` is not supported on Internet</span></span><br><span class="line">  <span class="comment">// Explorer. This method can be overriden in plugins.</span></span><br><span class="line">  zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</span><br><span class="line">    dom = dom || [];</span><br><span class="line">    <span class="comment">// å°† dom éšå¼åŸå‹å¼ºåˆ¶æ”¹ä¸º $.fn</span></span><br><span class="line">    <span class="comment">// ä¸‹æ–‡ zepto.Z.prototype = $.fn   å› æ­¤ï¼Œdom.__proto__ = $.fn å³ dom.__proto__ = zepto.Z.prototype  å¯ä»¥ä¸è¾ƒçœŸçš„è®¤ä¸º zepto.Z å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆä½†æ„Ÿè§‰è¿™ä¹ˆè®¾è®¡ï¼Œæœ‰äº›è¹©è„šï¼‰</span></span><br><span class="line">    dom.__proto__ = $.fn;</span><br><span class="line">    dom.selector = selector || <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">return</span> dom;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `$.zepto.isZ` should return `true` if the given object is a Zepto</span></span><br><span class="line">  <span class="comment">// collection. This method can be overriden in plugins.</span></span><br><span class="line">  zepto.isZ = <span class="function"><span class="keyword">function</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸Šæ–‡ dom.__proto__ = $.fn</span></span><br><span class="line">    <span class="comment">// ä¸‹æ–‡ zepto.Z.prototype = $.fn</span></span><br><span class="line">    <span class="comment">// å¯çŸ¥ï¼šdom.__proto__ === $.fn === zepto.Z.prototype</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å› æ­¤ï¼Œzeptoå¯¹è±¡éƒ½ç¬¦åˆ object instanceof zepto.Z</span></span><br><span class="line">    <span class="keyword">return</span> object <span class="keyword">instanceof</span> zepto.Z;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and</span></span><br><span class="line">  <span class="comment">// takes a CSS selector and an optional context (and handles various</span></span><br><span class="line">  <span class="comment">// special cases).</span></span><br><span class="line">  <span class="comment">// This method can be overriden in plugins.</span></span><br><span class="line">  zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dom;</span><br><span class="line">    <span class="comment">// If nothing given, return an empty Zepto collection</span></span><br><span class="line">    <span class="keyword">if</span> (!selector) <span class="keyword">return</span> zepto.Z();</span><br><span class="line">    <span class="comment">// Optimize for string selectors</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">"string"</span>) &#123;</span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ï¼š</span></span><br><span class="line">      <span class="comment">// ç¬¬ä¸€ï¼Œä¸€æ®µ html ä»£ç ï¼Œæ—¨åœ¨é€šè¿‡zeptoç”Ÿæˆdomå¯¹è±¡</span></span><br><span class="line">      <span class="comment">// ç¬¬äºŒï¼Œä¸€æ®µæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ—¨åœ¨é€šè¿‡zeptoæŸ¥æ‰¾domå¯¹è±¡</span></span><br><span class="line">      <span class="comment">// å°†æŸ¥è¯¢ç»“æœå­˜å‚¨åˆ° dom å˜é‡ä¸­</span></span><br><span class="line"></span><br><span class="line">      selector = selector.trim();</span><br><span class="line">      <span class="comment">// If it's a html fragment, create nodes from it</span></span><br><span class="line">      <span class="comment">// Note: In both Chrome 21 and Firefox 15, DOM error 12</span></span><br><span class="line">      <span class="comment">// is thrown if the fragment doesn't begin with &lt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line">      <span class="comment">// å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span></span><br><span class="line">      <span class="comment">// fragmentRE = /^\s*&lt;(\w+|!)[^&gt;]*&gt;/,</span></span><br><span class="line">      <span class="keyword">if</span> (selector[<span class="number">0</span>] == <span class="string">"&lt;"</span> &amp;&amp; fragmentRE.test(selector))</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ï¼ŒRegExp.$1å–å‡ºæ¥çš„å°±æ˜¯ç¬¬ä¸€ä¸ªæ ‡ç­¾åç§°ï¼Œå³æ­£åˆ™ä¸­ (\w+|!) å¯¹åº”çš„å†…å®¹</span></span><br><span class="line">        <span class="comment">// ç¬¬äºŒï¼Œæ­¤æ—¶çš„ context åº”è¯¥ä¼ å…¥çš„æ˜¯csså±æ€§å¯¹è±¡ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰</span></span><br><span class="line">        (dom = zepto.fragment(selector, <span class="built_in">RegExp</span>.$<span class="number">1</span>, context)), (selector = <span class="literal">null</span>);</span><br><span class="line">      <span class="comment">// If there's a context, create a collection on that context first, and select</span></span><br><span class="line">      <span class="comment">// nodes from there</span></span><br><span class="line">      <span class="comment">// å¦‚æœ selector ä¸æ˜¯htmlå­—ç¬¦ä¸²æ ‡ç­¾ï¼Œå¹¶ä¸” context æœ‰å€¼ï¼Œåˆ™ä»contextä¸­æŸ¥æ‰¾</span></span><br><span class="line">      <span class="comment">// find åº”è¯¥æ˜¯åœ¨ $.fn ä¸­å®šä¹‰çš„ï¼Œæœ‰å¾…è§£è¯»ï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector);</span><br><span class="line">      <span class="comment">// If it's a CSS selector, use it to select nodes.</span></span><br><span class="line">      <span class="comment">// é™¤äº†ä»¥ä¸Šæƒ…å†µï¼Œå°±ä»æ•´ä¸ª document æ‰§è¡Œ qsa çš„æŸ¥æ‰¾</span></span><br><span class="line">      <span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If a function is given, call it when the DOM is ready</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™dom readyæ—¶æ‰§è¡Œï¼Œ</span></span><br><span class="line">    <span class="comment">// readyæ–¹æ³•åº”è¯¥åœ¨ $.fn ä¸­å®šä¹‰ï¼Œæœ‰å¾…è§£æ¯’</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isFunction(selector)) <span class="keyword">return</span> $(<span class="built_in">document</span>).ready(selector);</span><br><span class="line">    <span class="comment">// If a Zepto collection is given, just return it</span></span><br><span class="line">    <span class="comment">// ä¼ å…¥çš„å‚æ•°æœ¬èº«å°±å·²ç»æ˜¯ zepto å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (zepto.isZ(selector)) <span class="keyword">return</span> selector;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// compactå‡½æ•°ï¼šè¸¢å‡ºæ•°ç»„ä¸­ == null çš„å…ƒç´ </span></span><br><span class="line">      <span class="comment">// normalize array if an array of nodes is given</span></span><br><span class="line">      <span class="keyword">if</span> (isArray(selector)) dom = compact(selector);</span><br><span class="line">      <span class="comment">// å¦‚æœä¼ å…¥çš„æ˜¯objectï¼Œç›´æ¥å¼ºåˆ¶å¡è¿›ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">      <span class="comment">// Wrap DOM nodes.</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (isObject(selector)) (dom = [selector]), (selector = <span class="literal">null</span>);</span><br><span class="line">      <span class="comment">// åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­</span></span><br><span class="line">      <span class="comment">// ä»æ­¤å¾€ä¸‹ï¼Œæ„Ÿè§‰å’Œä¸Šæ–‡ selector æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œé‡å¤äº†</span></span><br><span class="line">      <span class="comment">// ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">      <span class="comment">// fragmentRE.test å³åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ html æ ‡ç­¾å¼€å¤´ï¼ˆå³æ˜¯å¦æ˜¯html fragementï¼‰</span></span><br><span class="line">      <span class="comment">// If it's a html fragment, create nodes from it</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (fragmentRE.test(selector))</span><br><span class="line">        <span class="comment">//æ­¤æ—¶ï¼Œcontext ä¹Ÿæ˜¯å±æ€§é›†åˆï¼Œä¸æ˜¯å®¹å™¨ï¼ï¼ï¼</span></span><br><span class="line">        <span class="comment">//ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰</span></span><br><span class="line">        (dom = zepto.fragment(selector.trim(), <span class="built_in">RegExp</span>.$<span class="number">1</span>, context)),</span><br><span class="line">          (selector = <span class="literal">null</span>);</span><br><span class="line">      <span class="comment">// åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­</span></span><br><span class="line">      <span class="comment">// If there's a context, create a collection on that context first, and select</span></span><br><span class="line">      <span class="comment">// nodes from there</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector);</span><br><span class="line">      <span class="comment">// And last but no least, if it's a CSS selector, use it to select nodes.</span></span><br><span class="line">      <span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€ç»ˆï¼Œè¿˜æ˜¯é€šè¿‡ zepto.Z åˆ›å»ºäº†å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ domï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">    <span class="comment">// create a new Zepto collection from the nodes found</span></span><br><span class="line">    <span class="keyword">return</span> zepto.Z(dom, selector);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `$` will be the base `Zepto` object. When calling this</span></span><br><span class="line">  <span class="comment">// function just call `$.zepto.init, which makes the implementation</span></span><br><span class="line">  <span class="comment">// details of selecting nodes and creating Zepto collections</span></span><br><span class="line">  <span class="comment">// patchable in plugins.</span></span><br><span class="line">  $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zepto.init(selector, context);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// $ æœ€ç»ˆè¢«è¿™ä¸ªåŒ¿åå‡½æ•°æ‰€è¿”å›ï¼Œå¹¶å¤åˆ¶ç»™äº†å…¨å±€çš„ Zepto å˜é‡</span></span><br><span class="line">  <span class="comment">// å…¨å±€çš„ zepto å˜é‡æš´éœ²ç»™äº† windowï¼Œå¹¶ä¸”å¯èƒ½æœ‰ä¸€ä¸ªåˆ«åâ€”â€” $</span></span><br><span class="line">  <span class="comment">// æ­¤ $ éå½¼ $</span></span><br><span class="line">  <span class="comment">// å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™é‡Œè‚¯å®šéå¸¸ç»•ï¼ˆè¿˜ä¸å¦‚æŠŠè¿™é‡Œçš„ $ æ”¹æ”¹åå­—ï¼‰</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">target, source, deep</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// key åœ¨ä¸Šæ–‡å·²ç»å®šä¹‰ï¼Œå¦åˆ™å°±æ±¡æŸ“å…¨å±€å˜é‡äº†</span></span><br><span class="line">    <span class="comment">// æ·±åº¦é€’å½’ï¼Œé¦–å…ˆå¿…é¡» deep å‚æ•°ä¸º true</span></span><br><span class="line">    <span class="comment">// å…¶æ¬¡ï¼Œsource[key] å¿…é¡»æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œæ‰æœ‰å¿…è¦æ·±åº¦é€’å½’ï¼ˆå¦åˆ™æ²¡å¿…è¦ï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (key <span class="keyword">in</span> source)</span><br><span class="line">      <span class="keyword">if</span> (deep &amp;&amp; (isPlainObject(source[key]) || isArray(source[key]))) &#123;</span><br><span class="line">        <span class="comment">// source[key] æ˜¯å¯¹è±¡ï¼Œè€Œ target[key] ä¸æ˜¯å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// åˆ™ target[key] = &#123;&#125; åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„</span></span><br><span class="line">        <span class="keyword">if</span> (isPlainObject(source[key]) &amp;&amp; !isPlainObject(target[key]))</span><br><span class="line">          target[key] = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// source[key] æ˜¯æ•°ç»„ï¼Œè€Œ target[key] ä¸æ˜¯æ•°ç»„</span></span><br><span class="line">        <span class="comment">// åˆ™ target[key] = [] åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„</span></span><br><span class="line">        <span class="keyword">if</span> (isArray(source[key]) &amp;&amp; !isArray(target[key])) target[key] = [];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œé€’å½’</span></span><br><span class="line">        extend(target[key], source[key], deep);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œè¯´æ˜ source[key] æ˜¯ä¸€èˆ¬çš„å€¼ç±»å‹ï¼Œç›´æ¥èµ‹å€¼ç»™ target å°±æ˜¯äº†</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (source[key] !== <span class="literal">undefined</span>) target[key] = source[key];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Copy all but undefined properties from one or more</span></span><br><span class="line">  <span class="comment">// objects to the `target` object.</span></span><br><span class="line">  $.extend = <span class="function"><span class="keyword">function</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸€èˆ¬ä¼ å…¥çš„å‚æ•°ä¼šæ˜¯ï¼š</span></span><br><span class="line">    <span class="comment">// (targetObj, srcObj1, srcObj2, srcObj1...)</span></span><br><span class="line">    <span class="comment">// (true, targetObj, srcObj1, srcObj2, srcObj1...)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// arguments æ˜¯å¯¹è±¡æ•°ç»„ï¼Œslice.call ä¼šè¿”å›çœŸæ­£çš„æ•°ç»„ï¼ˆæ­¤å¤„è¿”å›ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼‰</span></span><br><span class="line">    <span class="keyword">var</span> deep,</span><br><span class="line">      args = slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯booleanï¼Œè¿™é‡Œä¼šæŠŠç¬¬äºŒä¸ªå‚æ•°å½“åš targetï¼Œå…¶ä»–çš„ä½œä¸º source</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> target == <span class="string">"boolean"</span>) &#123;</span><br><span class="line">      deep = target;</span><br><span class="line">      target = args.shift();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰çš„ source æ·»åŠ åˆ° target ä¸­</span></span><br><span class="line">    args.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">      extend(target, arg, deep);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„Ÿè§‰è¿™æ ·è®¾è®¡æ˜¯æ¯”è¾ƒå¥½ï¼Œå¾ˆå¥½çš„å°†ä¸šåŠ¡å’Œåº•å±‚è¿›è¡Œäº†åˆ†ç¦»ï¼ˆè™½ç„¶æ¯”è¾ƒç®€å•ï¼‰ï¼š</span></span><br><span class="line">    <span class="comment">// æ ¸å¿ƒæ–¹æ³•å† function extend(...)&#123;...&#125; ä¸­å®šä¹‰ï¼Œ</span></span><br><span class="line">    <span class="comment">// è€Œ $.extend æ–¹æ³•ä¸­åšä¸€äº›å¤–å›´çš„åˆ¤æ–­å’Œå¤„ç†ï¼Œæœ€ç»ˆè°ƒç”¨ extend å‡½æ•°å»æ‰§è¡Œ</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// `$.zepto.qsa` is Zepto's CSS selector implementation which</span></span><br><span class="line">  <span class="comment">// uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.</span></span><br><span class="line">  <span class="comment">// This method can be overriden in plugins.</span></span><br><span class="line">  zepto.qsa = <span class="function"><span class="keyword">function</span>(<span class="params">element, selector</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      @element: å®¹å™¨</span></span><br><span class="line"><span class="comment">      @selector: é€‰æ‹©å™¨</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> found,</span><br><span class="line">      maybeID = selector[<span class="number">0</span>] == <span class="string">"#"</span>,</span><br><span class="line">      maybeClass = !maybeID &amp;&amp; selector[<span class="number">0</span>] == <span class="string">"."</span>,</span><br><span class="line">      <span class="comment">// IDæˆ–classå½¢å¼ï¼šè¿”å› selector.slice(1) å³IDæˆ–è€…classçš„å€¼</span></span><br><span class="line">      <span class="comment">// å¦åˆ™ï¼šè¿”å› selectorï¼Œå¦‚é€šè¿‡ tagName æŸ¥è¯¢</span></span><br><span class="line">      nameOnly = maybeID || maybeClass ? selector.slice(<span class="number">1</span>) : selector, <span class="comment">// Ensure that a 1 char tag name still gets checked</span></span><br><span class="line">      <span class="comment">// æ˜¯å¦æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„é€‰æ‹©å™¨ï¼Œå¦‚ 'div#div1 .item[link] .red'ï¼‰</span></span><br><span class="line">      isSimple = simpleSelectorRE.test(nameOnly);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line">    <span class="comment">// // åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="comment">// simpleSelectorRE = /^[\w-]*$/,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥ä¸‹ä»£ç çš„åŸºæœ¬æ€è·¯æ˜¯ï¼š</span></span><br><span class="line">    <span class="comment">// 1. ä¼˜å…ˆé€šè¿‡ ID è·å–å…ƒç´ ï¼›</span></span><br><span class="line">    <span class="comment">// 2. ç„¶åè¯•å›¾é€šè¿‡ className å’Œ tagName è·å–å…ƒç´ </span></span><br><span class="line">    <span class="comment">// 3. æœ€åé€šè¿‡ querySelectorAll æ¥è·å–</span></span><br><span class="line">    <span class="keyword">return</span> isDocument(element) &amp;&amp; isSimple &amp;&amp; maybeID</span><br><span class="line">      ? <span class="comment">// è¿™æ˜¯æœ€ç®€å•çš„å½¢å¼ï¼šå®¹å™¨æ˜¯documentã€é€‰æ‹©å™¨æ˜¯ä¸€ä¸ªid</span></span><br><span class="line">        <span class="comment">// å› ä¸º getElementById åªèƒ½åœ¨ document ä¸Šç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå•ç‹¬æ‹¿å‡ºæ¥</span></span><br><span class="line">        (found = element.getElementById(nameOnly))</span><br><span class="line">        ? [found]</span><br><span class="line">        : []</span><br><span class="line">      : element.nodeType !== <span class="number">1</span> &amp;&amp; element.nodeType !== <span class="number">9</span></span><br><span class="line">      ? <span class="comment">// å®¹å™¨ä¸æ˜¯ä¸€èˆ¬å…ƒç´ ï¼Œä¹Ÿä¸æ˜¯documentï¼Œç›´æ¥è¿”å› []</span></span><br><span class="line">        []</span><br><span class="line">      : <span class="comment">// å°†è·å–çš„æ‰€æœ‰å…ƒç´ é›†åˆï¼Œéƒ½è½¬æ¢ä¸ºæ•°ç»„</span></span><br><span class="line">        slice.call(</span><br><span class="line">          isSimple &amp;&amp; !maybeID</span><br><span class="line">            ? <span class="comment">// isSimpleæƒ…å†µä¸‹ï¼ŒnameOnly åªå¯èƒ½æ˜¯ className æˆ–è€… tagName</span></span><br><span class="line">              <span class="comment">// getElementsByClassName å’Œ getElementsByTagName å¯ä»¥åœ¨ elem ä¸Šç”¨ï¼Œè€Œä¸”æ¯” querySelectorAll é€Ÿåº¦å¿«</span></span><br><span class="line">              <span class="comment">// æ‰€ä»¥ï¼Œåªè¦elemå®¹å™¨æœ‰å€¼ï¼Œå°½é‡å•ç‹¬æ‹¿å‡ºæ¥å¤„ç†</span></span><br><span class="line">              maybeClass</span><br><span class="line">              ? element.getElementsByClassName(nameOnly) <span class="comment">// If it's simple, it could be a class</span></span><br><span class="line">              : element.getElementsByTagName(selector) <span class="comment">// Or a tag</span></span><br><span class="line">            : <span class="comment">// æœ€åå…¶ä»–æƒ…å†µï¼Œåªèƒ½é€šè¿‡ querySelectorAll æ¥å¤„ç†</span></span><br><span class="line">              element.querySelectorAll(selector) <span class="comment">// Or it's not simple, and we need to query all</span></span><br><span class="line">        );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ® selector ç­›é€‰ nodes</span></span><br><span class="line">  <span class="comment">// å¹¶å°† nodes å°è£…ä¸º zepto å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// $.fn.filter ä¸‹æ–‡å®šä¹‰</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">filtered</span>(<span class="params">nodes, selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> selector == <span class="literal">null</span> ? $(nodes) : $(nodes).filter(selector);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­ parent æ˜¯å¦åŒ…å« node</span></span><br><span class="line">  $.contains = <span class="built_in">document</span>.documentElement.contains</span><br><span class="line">    ? <span class="comment">// æµè§ˆå™¨æ”¯æŒ contains æ–¹æ³•</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">parent, node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent !== node &amp;&amp; parent.contains(node);</span><br><span class="line">      &#125;</span><br><span class="line">    : <span class="comment">// ä¸æ”¯æŒ contains æ–¹æ³•</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">parent, node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; (node = node.parentNode))</span><br><span class="line">          <span class="keyword">if</span> (node === parent) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœ arg æ˜¯å‡½æ•°ï¼Œåˆ™æ”¹å˜å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå’Œå‚æ•°</span></span><br><span class="line">  <span class="comment">// å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è¿”å› arg</span></span><br><span class="line">  <span class="comment">// $.fn.html æ–¹æ³•å°±ç”¨åˆ°äº†</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">funcArg</span>(<span class="params">context, arg, idx, payload</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isFunction(arg) ? arg.call(context, idx, payload) : arg;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®å±æ€§</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setAttribute</span>(<span class="params">node, name, value</span>) </span>&#123;</span><br><span class="line">    value == <span class="literal">null</span> ? node.removeAttribute(name) : node.setAttribute(name, value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®æˆ–è·å– node çš„ className</span></span><br><span class="line">  <span class="comment">// è€ƒè™‘ svg ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">  <span class="comment">// access className property while respecting SVGAnimatedString</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">className</span>(<span class="params">node, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> klass = node.className || <span class="string">""</span>,</span><br><span class="line">      svg = klass &amp;&amp; klass.baseVal !== <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–</span></span><br><span class="line">    <span class="keyword">if</span> (value === <span class="literal">undefined</span>) <span class="keyword">return</span> svg ? klass.baseVal : klass;</span><br><span class="line">    <span class="comment">// è®¾ç½®</span></span><br><span class="line">    svg ? (klass.baseVal = value) : (node.className = value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š</span></span><br><span class="line">  <span class="comment">// "true"  =&gt; true</span></span><br><span class="line">  <span class="comment">// "false" =&gt; false</span></span><br><span class="line">  <span class="comment">// "null"  =&gt; null</span></span><br><span class="line">  <span class="comment">// "42"    =&gt; 42</span></span><br><span class="line">  <span class="comment">// "42.5"  =&gt; 42.5</span></span><br><span class="line">  <span class="comment">// "08"    =&gt; "08"</span></span><br><span class="line">  <span class="comment">// JSON    =&gt; parse if valid</span></span><br><span class="line">  <span class="comment">// String  =&gt; self</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">deserializeValue</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">        ? <span class="comment">// valueã€æœ‰å€¼ã€çš„æƒ…å†µï¼š</span></span><br><span class="line">          value == <span class="string">"true"</span> || <span class="comment">// å¦‚æœ value == 'true'ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æœ¬èº«å°±è¿”å› true ï¼Œå¯¼è‡´æ•´ä¸ªå‡½æ•°è¿”å›true</span></span><br><span class="line">            <span class="comment">// value !== 'true' çš„æƒ…å†µï¼š</span></span><br><span class="line">            (value == <span class="string">"false"</span></span><br><span class="line">              ? <span class="literal">false</span> <span class="comment">// "null"  =&gt; null</span></span><br><span class="line">              : value == <span class="string">"null"</span></span><br><span class="line">              ? <span class="literal">null</span> <span class="comment">// "null"  =&gt; null</span></span><br><span class="line">              : +value + <span class="string">""</span> == value</span><br><span class="line">              ? +value <span class="comment">// æ•°å­—ï¼š"42" =&gt; 42  "42.5" =&gt; 42.5  ï¼ˆ ä½†æ˜¯ '08' å´ä¸ç¬¦åˆè¿™ä¸ªæ¡ä»¶ ï¼‰</span></span><br><span class="line">              : <span class="regexp">/^[\[\&#123;]/</span>.test(value)</span><br><span class="line">              ? $.parseJSON(value) <span class="comment">// '[...]' æˆ–è€… '&#123;...&#125;'</span></span><br><span class="line">              : value) <span class="comment">// å…¶ä»–</span></span><br><span class="line">        : <span class="comment">// valueã€æ— å€¼ã€çš„æƒ…å†µï¼š undefined / '' / flase / 0 / null</span></span><br><span class="line">          value;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†ä¸Šæ–‡å®šä¹‰çš„å‡½æ•°ï¼Œæš´éœ²ç»™ $ å¯¹è±¡ï¼ˆå…¶å® $ æ˜¯ä¸€ä¸ª functionï¼‰</span></span><br><span class="line">  $.type = type;</span><br><span class="line">  $.isFunction = isFunction;</span><br><span class="line">  $.isWindow = isWindow;</span><br><span class="line">  $.isArray = isArray;</span><br><span class="line">  $.isPlainObject = isPlainObject;</span><br><span class="line"></span><br><span class="line">  $.isEmptyObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name;</span><br><span class="line">    <span class="keyword">for</span> (name <span class="keyword">in</span> obj) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $.inArray = <span class="function"><span class="keyword">function</span>(<span class="params">elem, array, i</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> emptyArray.indexOf.call(array, elem, i);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $.camelCase = camelize;</span><br><span class="line">  $.trim = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str == <span class="literal">null</span> ? <span class="string">""</span> : <span class="built_in">String</span>.prototype.trim.call(str);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// plugin compatibility</span></span><br><span class="line">  $.uuid = <span class="number">0</span>;</span><br><span class="line">  $.support = &#123;&#125;;</span><br><span class="line">  $.expr = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é‡æ–°ç»„ç»‡ elements å¯¹è±¡ï¼ˆæ•°ç»„ã€å¯¹è±¡æˆ–è€…å¯¹è±¡æ•°ç»„ï¼‰ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½ç”¨ callback è¿›è¡Œæ£€éªŒ</span></span><br><span class="line">  <span class="comment">// æ£€éªŒé€šè¿‡åï¼Œå°†å…ƒç´ pushè¿›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¹¶è¿”å›</span></span><br><span class="line">  $.map = <span class="function"><span class="keyword">function</span>(<span class="params">elements, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value,</span><br><span class="line">      values = [],</span><br><span class="line">      i,</span><br><span class="line">      key;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°ç»„ï¼Œæˆ–è€…å¯¹è±¡æ•°ç»„</span></span><br><span class="line">    <span class="keyword">if</span> (likeArray(elements))</span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</span><br><span class="line">        <span class="comment">// éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­</span></span><br><span class="line">        value = callback(elements[i], i);</span><br><span class="line">        <span class="keyword">if</span> (value != <span class="literal">null</span>) values.push(value);</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="comment">// å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">for</span> (key <span class="keyword">in</span> elements) &#123;</span><br><span class="line">        <span class="comment">// éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­</span></span><br><span class="line">        value = callback(elements[key], key);</span><br><span class="line">        <span class="keyword">if</span> (value != <span class="literal">null</span>) values.push(value);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›æ•°ç»„</span></span><br><span class="line">    <span class="comment">// flatten å‡½æ•°ä¸Šæ–‡å®šä¹‰çš„ï¼Œä½œç”¨ï¼šæ— è®º values æ˜¯å¦æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ­£ç¡®çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œä¼ å…¥ 'abc' ï¼Œè¿”å› ['abc']</span></span><br><span class="line">    <span class="keyword">return</span> flatten(values);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå† elements æ‰€æœ‰å…ƒç´ ï¼ˆæ•°ç»„ã€å¯¹è±¡æ•°ç»„ã€å¯¹è±¡ï¼‰ï¼Œæ‰§è¡Œ callback æ–¹æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯è¿”å› elements</span></span><br><span class="line">  <span class="comment">// æ³¨æ„1ï¼šcallback.call(elements[i], i, elements[i]) å‡½æ•°æ‰§è¡Œçš„ç¯å¢ƒå’Œå‚æ•°</span></span><br><span class="line">  <span class="comment">// æ³¨æ„2ï¼š=== false) return elements ä¸€æ—¦æœ‰å‡½æ•°è¿”å› falseï¼Œå³è·³å‡ºå¾ªç¯ï¼Œç±»ä¼¼ break</span></span><br><span class="line">  <span class="comment">// æ³¨æ„3ï¼šæ— è®ºå“ªç§æƒ…å†µï¼Œæœ€ç»ˆè¿”å›çš„è¿˜æ˜¯ elements</span></span><br><span class="line">  $.each = <span class="function"><span class="keyword">function</span>(<span class="params">elements, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i, key;</span><br><span class="line">    <span class="keyword">if</span> (likeArray(elements)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; elements.length; i++)</span><br><span class="line">        <span class="keyword">if</span> (callback.call(elements[i], i, elements[i]) === <span class="literal">false</span>)</span><br><span class="line">          <span class="keyword">return</span> elements;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> (key <span class="keyword">in</span> elements)</span><br><span class="line">        <span class="keyword">if</span> (callback.call(elements[key], key, elements[key]) === <span class="literal">false</span>)</span><br><span class="line">          <span class="keyword">return</span> elements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> elements;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼šfilter = emptyArray.filter</span></span><br><span class="line">  <span class="comment">// ç­›é€‰æ•°ç»„</span></span><br><span class="line">  $.grep = <span class="function"><span class="keyword">function</span>(<span class="params">elements, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> filter.call(elements, callback);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.JSON) $.parseJSON = <span class="built_in">JSON</span>.parse;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Populate the class2type map</span></span><br><span class="line">  $.each(</span><br><span class="line">    <span class="string">"Boolean Number String Function Array Date RegExp Object Error"</span>.split(<span class="string">" "</span>),</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">i, name</span>) </span>&#123;</span><br><span class="line">      class2type[<span class="string">"[object "</span> + name + <span class="string">"]"</span>] = name.toLowerCase();</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      ä¸Šæ–‡å°† class2type èµ‹å€¼ä¸º &#123;&#125;</span></span><br><span class="line"><span class="comment">      æœ€ç»ˆå°† class2type èµ‹å€¼ä¸ºï¼š</span></span><br><span class="line"><span class="comment">      &#123;</span></span><br><span class="line"><span class="comment">        '[object boolean]': 'boolean',</span></span><br><span class="line"><span class="comment">        '[object number]': 'number',</span></span><br><span class="line"><span class="comment">        '[object string]': 'string',</span></span><br><span class="line"><span class="comment">        ...</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      å­˜å‚¨è¿™ä¸ªæ•°æ®æ˜¯ä¸ºäº†æ–¹ä¾¿çš„è·å–ä¸€äº›å¯¹è±¡çš„ç±»å‹ï¼Œ</span></span><br><span class="line"><span class="comment">      ä¾‹å¦‚ Object.prototype.toString.call([]) è¿”å›çš„æ˜¯ '[Object Array]'</span></span><br><span class="line"><span class="comment">      é‚£ä¹ˆå³å¯æ ¹æ®è¿™ä¸ªè·å– [] çš„ç±»å‹æ˜¯ 'array'</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Define methods that will be available on all</span></span><br><span class="line">  <span class="comment">// Zepto collections</span></span><br><span class="line">  $.fn = &#123;</span><br><span class="line">    <span class="comment">// ä¸ºä½•è¦è¿™ä¹ˆå¤šæ•°ç»„çš„æ–¹æ³•ï¼Ÿ</span></span><br><span class="line">    <span class="comment">// å› ä¸ºä¸€ä¸ª zepto å¯¹è±¡ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Because a collection acts like an array</span></span><br><span class="line">    <span class="comment">// copy over these useful array functions.</span></span><br><span class="line">    forEach: emptyArray.forEach,</span><br><span class="line">    reduce: emptyArray.reduce, <span class="comment">// æ–¹æ³•ä½•ç”¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">    push: emptyArray.push,</span><br><span class="line">    sort: emptyArray.sort,</span><br><span class="line">    indexOf: emptyArray.indexOf,</span><br><span class="line">    concat: emptyArray.concat,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// `map` and `slice` in the jQuery API work differently</span></span><br><span class="line">    <span class="comment">// from their array counterparts</span></span><br><span class="line">    map: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// $.map ä¸Šæ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) &#123;....&#125;</span></span><br><span class="line">      <span class="comment">// $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡ã€å¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// æœ€åï¼Œç”¨ $ å°è£…è¿”å›</span></span><br><span class="line">      <span class="keyword">return</span> $(</span><br><span class="line">        <span class="comment">// $.map è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">        $.map(</span><br><span class="line">          <span class="keyword">this</span>,</span><br><span class="line">          <span class="comment">// é’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœå‡½æ•°è¿”å›çš„ !=null å°±å°†æ’å…¥åˆ°æ–°è¿”å›çš„æ•°ç»„</span></span><br><span class="line">          <span class="function"><span class="keyword">function</span>(<span class="params">el, i</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> fn.call(el, i, el);</span><br><span class="line">          &#125;</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        $('div').map(function(key, value)&#123;</span></span><br><span class="line"><span class="comment">          return value.id;</span></span><br><span class="line"><span class="comment">          // æˆ–è€… return this.id;</span></span><br><span class="line"><span class="comment">        &#125;)</span></span><br><span class="line"><span class="comment">        è¿™ä¸ªç»“æœå°±æ˜¯ $(['div1', 'div2' ...])</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    slice: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ç›´æ¥æ•°ç»„çš„sliceæ–¹æ³•ï¼Œå¹¶å°†ç»“æœç”¨ $ å°è£…è¿”å›</span></span><br><span class="line">      <span class="keyword">return</span> $(slice.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨ zepto.init å‡½æ•°ä¸­ï¼Œå½“ä¼ å…¥çš„å‡½æ•°æ˜¯å‡½æ•°æ—¶ï¼Œå°±ç”¨åˆ°äº† ready</span></span><br><span class="line">    <span class="comment">// else if (isFunction(selector)) return $(document).ready(selector)</span></span><br><span class="line">    ready: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// need to check if document.body exists for IE as that browser reports</span></span><br><span class="line">      <span class="comment">// document ready when it hasn't yet created the body element</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸‹æ–‡å®šä¹‰ï¼šreadyRE = /complete|loaded|interactive/,</span></span><br><span class="line">      <span class="keyword">if</span> (readyRE.test(<span class="built_in">document</span>.readyState) &amp;&amp; <span class="built_in">document</span>.body) callback($);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">document</span>.addEventListener(</span><br><span class="line">          <span class="string">"DOMContentLoaded"</span>,</span><br><span class="line">          <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            callback($);</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="literal">false</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›å½“å‰å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> idx === <span class="literal">undefined</span></span><br><span class="line">        ? slice.call(<span class="keyword">this</span>) <span class="comment">// æœªä¼ å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€æ•´ä¸ªæ•°ç»„</span></span><br><span class="line">        : <span class="comment">// æœ‰å‚æ•°ï¼Œåˆ™è¯•å›¾è¿”å›å•ä¸ªå…ƒç´ ï¼ˆå¤§äº0ï¼Œå°äº0 ä¸¤ç§æƒ…å†µï¼‰</span></span><br><span class="line">          <span class="keyword">this</span>[idx &gt;= <span class="number">0</span> ? idx : idx + <span class="keyword">this</span>.length];</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†zeptoé›†åˆå˜ä¸ºçº¯æ•°ç»„</span></span><br><span class="line">    toArray: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.get();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    size: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.length;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å…ƒç´ ä»è¿™ä¸ªDOMæ ‘ä¸­ç§»é™¤</span></span><br><span class="line">    remove: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.parentNode != <span class="literal">null</span>) <span class="keyword">this</span>.parentNode.removeChild(<span class="keyword">this</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    each: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// [].every ES5ä¸­Arrayçš„æ–°ç‰¹æ€§ã€‚å¾ªç¯æ•°ç»„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›æ˜¯å¦ç¬¦åˆcallbackå‡½æ•°çš„è¦æ±‚</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// every å‡½æ•°è¿”å›çš„æ˜¯ false æˆ–è€… trueï¼ˆä¸è¿‡è¿™é‡Œè¿”å›ä»€ä¹ˆæ— æ‰€è°“ï¼Œæ‰§è¡Œå°±å¯ä»¥äº†ï¼‰</span></span><br><span class="line">      emptyArray.every.call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el, idx</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> callback.call(el, idx, el) !== <span class="literal">false</span>;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æœ€åè¿”å›æœ¬èº«å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    filter: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// notå‡½æ•°ä¸‹æ–‡å®šä¹‰</span></span><br><span class="line">      <span class="comment">// å¦‚æœç»™notä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™è¿”å›ä¸ç¬¦åˆè¿™ä¸ªå‡½æ•°è§„åˆ™çš„å…ƒç´ çš„æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰</span></span><br><span class="line">      <span class="keyword">if</span> (isFunction(selector)) <span class="keyword">return</span> <span class="keyword">this</span>.not(<span class="keyword">this</span>.not(selector));</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼šzepto.matches åˆ¤æ–­elementsæ˜¯å¦ç¬¦åˆ selector çš„è¦æ±‚</span></span><br><span class="line">      <span class="comment">// zepto.matches = function(element, selector) &#123;...&#125;</span></span><br><span class="line">      <span class="keyword">return</span> $(</span><br><span class="line">        filter.call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// åˆ©ç”¨ [].filter æ–¹æ³•åšç­›é€‰ï¼Œåˆ©ç”¨ zepto.matches åšåˆ¤æ–­</span></span><br><span class="line">          <span class="keyword">return</span> zepto.matches(element, selector);</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// $('div') å¯èƒ½åªæœ‰ä¸‰ä¸ª div èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ $('div').add('p') å†ä¸‰ä¸ª div èŠ‚ç‚¹çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸‰ä¸ª p èŠ‚ç‚¹</span></span><br><span class="line">    add: <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// uniqå‡½æ•°â€”â€”æ•°ç»„å»é‡ï¼Œä¾‹å¦‚ï¼šç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3]</span></span><br><span class="line">      <span class="keyword">return</span> $(uniq(<span class="keyword">this</span>.concat($(selector, context))));</span><br><span class="line">    &#125;,</span><br><span class="line">    is: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œåªå¯¹ this[0] ç¬¬ä¸€ä¸ªå…ƒç´ åšåˆ¤æ–­äº†ï¼Œå…¶ä»–çš„å…ƒç´ ä¸ç®¡äº†</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.length &gt; <span class="number">0</span> &amp;&amp; zepto.matches(<span class="keyword">this</span>[<span class="number">0</span>], selector);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    not: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> nodes = []; <span class="comment">// å­˜å‚¨æœ€åè¿”å›çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœå‚æ•°æ˜¯å‡½æ•°</span></span><br><span class="line">      <span class="keyword">if</span> (isFunction(selector) &amp;&amp; selector.call !== <span class="literal">undefined</span>)</span><br><span class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// éå†å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°</span></span><br><span class="line">          <span class="comment">// å½“å‡½æ•°è¿”å› false æ—¶ï¼ˆå³ä¸ç¬¦åˆå‡½æ•°çš„è§„åˆ™ï¼‰ï¼Œåˆ™å°†å½“å‰å…ƒç´ pushåˆ°ç»“æœä¸­ï¼Œç­‰å¾…è¿”å›</span></span><br><span class="line">          <span class="keyword">if</span> (!selector.call(<span class="keyword">this</span>, idx)) nodes.push(<span class="keyword">this</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="comment">// å¦‚æœå‚æ•°ä¸æ˜¯å‡½æ•°</span></span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸º excludes èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">var</span> excludes =</span><br><span class="line">          <span class="comment">// å¦‚æœ selector æ˜¯å­—ç¬¦ä¸²ï¼ˆcssé€‰æ‹©å™¨ï¼‰ï¼Œåˆ™ç”¨filterè¿‡æ»¤ï¼Œå°†ç»“æœå­˜å‚¨åˆ° excludes ä¸­</span></span><br><span class="line">          <span class="keyword">typeof</span> selector == <span class="string">"string"</span></span><br><span class="line">            ? <span class="keyword">this</span>.filter(selector)</span><br><span class="line">            : <span class="comment">// å¦‚æœ selector ä¸æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„ï¼ˆå¹¶ä¸” selector.item æ˜¯å‡½æ•°ï¼Ÿï¼Ÿï¼Ÿï¼‰ï¼Œåˆ™ç”Ÿæˆæ•°ç»„ï¼Œèµ‹å€¼ç»™ excludes</span></span><br><span class="line">            likeArray(selector) &amp;&amp; isFunction(selector.item)</span><br><span class="line">            ? slice.call(selector)</span><br><span class="line">            : <span class="comment">// å¦åˆ™ç›´æ¥ç”Ÿæˆ zepto å¯¹è±¡ï¼Œèµ‹å€¼ç»™ excludes</span></span><br><span class="line">              $(selector);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è‡³æ­¤ï¼Œexcludes ä¸­å°±å­˜å‚¨äº†é€šè¿‡ selector æŸ¥æ‰¾å‡ºæ¥çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// [].forEach æ˜¯ES5çš„æ–°ç‰¹æ€§</span></span><br><span class="line">        <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// å–å‡º excludes ä¸­ä¸åŒ…å«çš„å…ƒç´ ï¼Œpushåˆ°ç»“æœä¸­</span></span><br><span class="line">          <span class="keyword">if</span> (excludes.indexOf(el) &lt; <span class="number">0</span>) nodes.push(el);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›æœ€åçš„ç»“æœï¼Œç”¨ $ å°è£…</span></span><br><span class="line">      <span class="keyword">return</span> $(nodes);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    has: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ç»è¿‡ filter å‡½æ•°å¤„ç†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¤„ç†åçš„å€¼</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isObject(selector)</span><br><span class="line">          ? <span class="comment">// å¦‚æœ seletor æ˜¯ objectï¼ˆå¯èƒ½æ˜¯elemèŠ‚ç‚¹ï¼‰ï¼Œåˆ™ç”¨ $.contains åˆ¤æ–­</span></span><br><span class="line">            $.contains(<span class="keyword">this</span>, selector)</span><br><span class="line">          : <span class="comment">// å¦åˆ™ï¼ˆselectoræ˜¯cssé€‰æ‹©å­—ç¬¦ä¸²ï¼‰åˆ™è¿”å›findåçš„sizeï¼ˆå¦‚æœ size === 0 å³ç›¸å½“äºè¿”å› falseï¼‰</span></span><br><span class="line">            $(<span class="keyword">this</span>)</span><br><span class="line">              .find(selector)</span><br><span class="line">              .size();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// $.fn.find åœ¨ä¸‹æ–‡å®šä¹‰</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    eq: <span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å–å‡ºæŒ‡å®šindexçš„å…ƒç´ </span></span><br><span class="line">      <span class="comment">// å¯æ”¯æŒ -1ã€0ã€1ã€2 â€¦â€¦</span></span><br><span class="line">      <span class="keyword">return</span> idx === <span class="number">-1</span> ? <span class="keyword">this</span>.slice(idx) : <span class="keyword">this</span>.slice(idx, +idx + <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    first: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> el = <span class="keyword">this</span>[<span class="number">0</span>];</span><br><span class="line">      <span class="comment">// ä¸æ˜¯ object åˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">      <span class="comment">// æ˜¯ object ç±»å‹ï¼Œåˆ™ç”¨ $ å°è£… ï¼ˆå› ä¸ºæ—¶åˆ»éƒ½è¦æ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼ï¼‰</span></span><br><span class="line">      <span class="keyword">return</span> el &amp;&amp; !isObject(el) ? el : $(el);</span><br><span class="line">    &#125;,</span><br><span class="line">    last: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> el = <span class="keyword">this</span>[<span class="keyword">this</span>.length - <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">return</span> el &amp;&amp; !isObject(el) ? el : $(el);</span><br><span class="line">    &#125;,</span><br><span class="line">    find: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// result å­˜å‚¨è¿”å›ç»“æœ</span></span><br><span class="line">      <span class="keyword">var</span> result,</span><br><span class="line">        $<span class="keyword">this</span> = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºçš„ zepto å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (!selector) result = $();</span><br><span class="line">      <span class="comment">// å¦‚æœselectoræ˜¯å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">"object"</span>)</span><br><span class="line">        result = $(selector).filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> node = <span class="keyword">this</span>;</span><br><span class="line">          <span class="keyword">return</span> emptyArray.some.call($<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> $.contains(parent, node);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="comment">// å¦‚æœ selector ä¸æ˜¯å¯¹è±¡ï¼ˆå³æ˜¯cssé€‰æ‹©å™¨ï¼‰ï¼š</span></span><br><span class="line">      <span class="comment">// å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ qsa åˆ¤æ–­ï¼Œç»“æœç»è¿‡ $ å°è£…åèµ‹å€¼ç»™ result</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.length == <span class="number">1</span>) result = $(zepto.qsa(<span class="keyword">this</span>[<span class="number">0</span>], selector));</span><br><span class="line">      <span class="comment">// å¦‚æœæœ‰å¤šä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ map éå†æ‰€æœ‰å…ƒç´ ï¼Œä½¿ç”¨ qsa é’ˆå¯¹æ¯ä¸ªå…ƒç´ åˆ¤æ–­ï¼Œç¬¦åˆæ¡ä»¶å³è¿”å›ï¼ˆmapå°†è¿”å›åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ $ å°è£…ï¼Œæ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼‰</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        result = <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> zepto.qsa(<span class="keyword">this</span>, selector);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›æœ€ç»ˆç»“æœ</span></span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»å…ƒç´ æœ¬èº«å¼€å§‹ï¼Œé€çº§å‘ä¸Šçº§å…ƒç´ åŒ¹é…ï¼Œå¹¶è¿”å›æœ€å…ˆåŒ¹é…selectorçš„å…ƒç´ </span></span><br><span class="line">    closest: <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> node = <span class="keyword">this</span>[<span class="number">0</span>],</span><br><span class="line">        collection = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœ selector æ˜¯å¯¹è±¡ï¼Œåˆ™ç”¨ $ å°è£…åï¼Œèµ‹å€¼ç»™ collection</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">"object"</span>) collection = $(selector);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (</span><br><span class="line">        <span class="comment">// whileå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ï¼š</span></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ï¼Œnodeæœ‰å€¼ï¼ˆnodeä¸€å¼€å§‹è¢«èµ‹å€¼ä¸ºå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</span></span><br><span class="line">        <span class="comment">// ç¬¬äºŒï¼Œcollectionæœ‰å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å¯¹è±¡ï¼‰åˆ™collectionåŒ…å«nodeï¼›collectionæ— å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å­—ç¬¦ä¸²ï¼Œcssé€‰æ‹©ï¼‰ï¼Œåˆ™nodeæ»¡è¶³selectoræ¡ä»¶</span></span><br><span class="line">        <span class="comment">// æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä¸æ»¡è¶³ç¬¬äºŒæ¡ä»¶ï¼Œåˆ™å¾ªç¯ç»§ç»­ï¼ˆnodeè¯•å›¾èµ‹å€¼ä¸ºnode.parentNodeï¼‰ï¼›å¦åˆ™ï¼Œå¾ªç¯è·³å‡ºï¼ˆè¯´æ˜å·²ç»æ‰¾åˆ°äº†ç¬¦åˆæ¡ä»¶çš„çˆ¶èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        node &amp;&amp;</span><br><span class="line">        !(collection</span><br><span class="line">          ? collection.indexOf(node) &gt;= <span class="number">0</span></span><br><span class="line">          : zepto.matches(node, selector))</span><br><span class="line">      )</span><br><span class="line">        <span class="comment">// nodeèµ‹å€¼æˆ node.parentNode</span></span><br><span class="line">        <span class="comment">// å‰ææ¡ä»¶æ˜¯ï¼šnode != context &amp;&amp; node ä¸æ˜¯ documentï¼Œå¦‚æœæ˜¯è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œé‚£å°±ä¸ç»§ç»­èµ‹å€¼</span></span><br><span class="line">        node = node !== context &amp;&amp; !isDocument(node) &amp;&amp; node.parentNode;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›æœ€ç»ˆç»“æœ</span></span><br><span class="line">      <span class="keyword">return</span> $(node);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å¯¹è±¡é›†åˆæ¯ä¸ªå…ƒç´ æ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ ã€‚ $('h1').parents() =&gt; [&lt;div#container&gt;, &lt;body&gt;, &lt;html&gt;]</span></span><br><span class="line">    parents: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> ancestors = [],</span><br><span class="line">        nodes = <span class="keyword">this</span>;</span><br><span class="line">      <span class="keyword">while</span> (nodes.length &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// å¯èƒ½éœ€è¦æ‰§è¡Œå¤šæ¬¡ while å¾ªç¯</span></span><br><span class="line">        <span class="comment">// æ¯æ¬¡æ‰§è¡Œ $.map å‡½æ•°éƒ½ä¼šå¯¹ nodes é‡æ–°èµ‹å€¼ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­å¾ªç¯</span></span><br><span class="line">        <span class="comment">// å› ä¸ºè¦è·å–æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰ç¥–å…ˆå…ƒç´ ï¼Œæ‰€ä»¥è¦å¤šæ¬¡å¾ªç¯</span></span><br><span class="line">        nodes = $.map(nodes, <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// ä½¿ç”¨ $.mapï¼ˆè¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ç”¨ $ å°è£…ï¼‰éå†æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">          <span class="keyword">if</span> (</span><br><span class="line">            (node = node.parentNode) &amp;&amp;</span><br><span class="line">            !isDocument(node) &amp;&amp;</span><br><span class="line">            ancestors.indexOf(node) &lt; <span class="number">0</span></span><br><span class="line">          ) &#123;</span><br><span class="line">            <span class="comment">// å°†ç¬¦åˆæ¡ä»¶çš„å…ƒç´ pushåˆ°ç»“æœä¸­</span></span><br><span class="line">            <span class="comment">// æ¡ä»¶ï¼šä¸èƒ½æ˜¯ documentï¼Œç»“æœä¸­å…ƒç´ ä¸èƒ½é‡å¤ã€‚å¦åˆ™ä¸æ‰§è¡Œpush</span></span><br><span class="line">            ancestors.push(node);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¿”å›çš„ node ï¼Œå°†æ‹¼æ¥å‡ºæ–°æ•°ç»„ï¼Œé‡æ–°å¤åˆ¶ç»™ nodesï¼Œç„¶åè¯•å›¾ç»§ç»­æ‰§è¡Œ while å¾ªç¯</span></span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºï¼Œè¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span></span><br><span class="line">      <span class="keyword">return</span> filtered(ancestors, selector);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å¯¹è±¡é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ ã€‚å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºã€‚è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚</span></span><br><span class="line">    parent: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// pluck å‡½æ•°åœ¨ä¸‹æ–‡å®šä¹‰</span></span><br><span class="line">      <span class="comment">// parent å‡½æ•°ï¼Œåªè·å–ç¬¬ä¸€çº§çˆ¶èŠ‚ç‚¹å³å¯</span></span><br><span class="line">      <span class="keyword">return</span> filtered(uniq(<span class="keyword">this</span>.pluck(<span class="string">"parentNode"</span>)), selector);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤</span></span><br><span class="line">    children: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> filtered(</span><br><span class="line">        <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> children(<span class="keyword">this</span>);</span><br><span class="line">        &#125;),</span><br><span class="line">        selector</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„å­å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡å­—å’Œæ³¨é‡ŠèŠ‚ç‚¹</span></span><br><span class="line">    contents: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> slice.call(<span class="keyword">this</span>.childNodes);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å¯¹è±¡é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤</span></span><br><span class="line">    siblings: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> filtered(</span><br><span class="line">        <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params">i, el</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// è·å–å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">          <span class="keyword">return</span> filter.call(children(el.parentNode), <span class="function"><span class="keyword">function</span>(<span class="params">child</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> child !== el;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;),</span><br><span class="line">        selector</span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">    empty: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.innerHTML = <span class="string">""</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// `pluck` is borrowed from Prototype.js</span></span><br><span class="line">    pluck: <span class="function"><span class="keyword">function</span>(<span class="params">property</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è·å–è‡ªå®šä¹‰å±æ€§ï¼Œè¿”å›å€¼ï¼Œæ‹¼æ¥æ•°ç»„</span></span><br><span class="line">      <span class="keyword">return</span> $.map(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> el[property];</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    show: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è¿”å›å½“å‰å¯¹è±¡ï¼Œä¿è¯å¯é“¾å¼æ“ä½œ</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ­¥ï¼Œé’ˆå¯¹å†…è”æ ·å¼ï¼Œå°† none æ”¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦‚ &lt;p id="p2" style="display:none;"&gt;p2&lt;/p&gt;</span></span><br><span class="line">        <span class="keyword">this</span>.style.display == <span class="string">"none"</span> &amp;&amp; (<span class="keyword">this</span>.style.display = <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬äºŒæ­¥ï¼Œé’ˆå¯¹cssæ ·å¼ï¼Œå¦‚æœæ˜¯ none åˆ™ä¿®æ”¹ä¸ºé»˜è®¤çš„æ˜¾ç¤ºæ ·å¼</span></span><br><span class="line">        <span class="keyword">if</span> (getComputedStyle(<span class="keyword">this</span>, <span class="string">""</span>).getPropertyValue(<span class="string">"display"</span>) == <span class="string">"none"</span>)</span><br><span class="line">          <span class="keyword">this</span>.style.display = defaultDisplay(<span class="keyword">this</span>.nodeName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// show æ–¹æ³•æ˜¯ä¸ºäº†æ˜¾ç¤ºå¯¹è±¡ï¼Œè€Œå¯¹è±¡éšè—çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šå†…è”æ ·å¼ æˆ– cssæ ·å¼</span></span><br><span class="line">        <span class="comment">// this.style.display åªèƒ½è·å–å†…è”æ ·å¼çš„å€¼ï¼ˆè·å–å±æ€§å€¼ï¼‰</span></span><br><span class="line">        <span class="comment">// getComputedStyle(this, '').getPropertyValue("display") å¯ä»¥è·å–å†…è”ã€cssæ ·å¼çš„å€¼ï¼ˆè·å– renderTree çš„å€¼ï¼‰</span></span><br><span class="line">        <span class="comment">// å› æ­¤ï¼Œè¿™ä¸¤æ­¥éƒ½è¦åšåˆ¤æ–­ï¼Œ</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    replaceWith: <span class="function"><span class="keyword">function</span>(<span class="params">newContent</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å…ˆåœ¨å‰é¢æ’å…¥ï¼Œç„¶åå°†å½“å‰å¯¹è±¡ç§»é™¤</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.before(newContent).remove();</span><br><span class="line">    &#125;,</span><br><span class="line">    wrap: <span class="function"><span class="keyword">function</span>(<span class="params">structure</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// æ˜¯å¦æ˜¯å‡½æ•°</span></span><br><span class="line">      <span class="keyword">var</span> func = isFunction(structure);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>[<span class="number">0</span>] &amp;&amp; !func)</span><br><span class="line">        <span class="keyword">var</span> dom = $(structure).get(<span class="number">0</span>),</span><br><span class="line">          <span class="comment">// ä½•æ—¶ç”¨ clone ï¼Ÿ</span></span><br><span class="line">          <span class="comment">// ç¬¬ä¸€ï¼Œdom.parentNode è¯´æ˜ dom åœ¨æ–‡æ¡£ç»“æ„ä¸­ï¼Œä¸ clone å°±ä¼šè¢«ç§»åŠ¨</span></span><br><span class="line">          <span class="comment">// ç¬¬äºŒï¼Œthis.length &gt; 1 è¯´æ˜å½“å‰å¯¹è±¡æœ‰å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è¦æ·»åŠ ï¼Œæ‰€æœ‰è¦clone</span></span><br><span class="line">          clone = dom.parentNode || <span class="keyword">this</span>.length &gt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å€Ÿç”¨ wrapAll æ–¹æ³•æ¥åšåŒ…è£…</span></span><br><span class="line">        $(<span class="keyword">this</span>).wrapAll(</span><br><span class="line">          func ? structure.call(<span class="keyword">this</span>, index) : clone ? dom.cloneNode(<span class="literal">true</span>) : dom</span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åœ¨æ‰€æœ‰åŒ¹é…å…ƒç´ å¤–é¢åŒ…ä¸€ä¸ªå•ç‹¬çš„ç»“æ„</span></span><br><span class="line">    wrapAll: <span class="function"><span class="keyword">function</span>(<span class="params">structure</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>[<span class="number">0</span>]) &#123;</span><br><span class="line">        <span class="comment">// å…ˆå°† structure æ’å…¥åˆ°æ–‡æ¡£ç»“æ„</span></span><br><span class="line">        $(<span class="keyword">this</span>[<span class="number">0</span>]).before((structure = $(structure)));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> children;</span><br><span class="line">        <span class="comment">// drill down to the inmost element</span></span><br><span class="line">        <span class="comment">// é€šè¿‡å¾ªç¯ï¼Œå°† structure é‡æ–°èµ‹å€¼ä¸ºå½“å‰ structure çš„æœ€æ·±å¤„çš„ä¸€ä¸ªå­å…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span> ((children = structure.children()).length)</span><br><span class="line">          structure = children.first();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰å­å…ƒç´ éƒ½åŒ…è£¹è¿› structure</span></span><br><span class="line">        $(structure).append(<span class="keyword">this</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›å½“å‰å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    wrapInner: <span class="function"><span class="keyword">function</span>(<span class="params">structure</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// æ˜¯å¦æ˜¯å‡½æ•°</span></span><br><span class="line">      <span class="keyword">var</span> func = isFunction(structure);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = $(<span class="keyword">this</span>),</span><br><span class="line">          contents = self.contents(),</span><br><span class="line">          <span class="comment">// æ˜¯å‡½æ•°ï¼Œå³è·å–å‡½æ•°æ‰§è¡Œçš„è¿”å›ç»“æœï¼›å¦åˆ™ç›´æ¥ç”¨ structure å‚æ•°</span></span><br><span class="line">          dom = func ? structure.call(<span class="keyword">this</span>, index) : structure;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰å…ƒç´ æœ‰å†…å®¹ï¼Œåˆ™é€šè¿‡å†…å®¹ wrapAllã€‚æ— å†…å®¹ï¼Œåˆ™ç›´æ¥ç”¨è‡ªèº«çš„ append å¢åŠ </span></span><br><span class="line">        contents.length ? contents.wrapAll(dom) : self.append(dom);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    unwrap: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// é€šè¿‡ this.parent() è·å–æ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹ï¼ˆé›†åˆï¼‰</span></span><br><span class="line">      <span class="comment">// éå†è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„é›†åˆ</span></span><br><span class="line">      <span class="keyword">this</span>.parent().each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å°†å½“å‰çˆ¶èŠ‚ç‚¹æ›¿æ¢ä¸ºå®ƒçš„å­èŠ‚ç‚¹</span></span><br><span class="line">        $(<span class="keyword">this</span>).replaceWith($(<span class="keyword">this</span>).children());</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    clone: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// é€šè¿‡ this.map å¾ªç¯å¯¹è±¡ï¼Œ</span></span><br><span class="line">      <span class="comment">// é’ˆå¯¹æ¯ä¸ªå…ƒç´ éƒ½è¿”å›å®ƒçš„clone         è¿™ä¸ª this å’Œå‰é¢çš„ this ä¸ä¸€æ ·</span></span><br><span class="line">      <span class="comment">// è¿”å›æ–°æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.cloneNode(<span class="literal">true</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    hide: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åˆ‡æ¢æ˜¾ç¤ºå’Œéšè—</span></span><br><span class="line">    toggle: <span class="function"><span class="keyword">function</span>(<span class="params">setting</span>) </span>&#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        @setting</span></span><br><span class="line"><span class="comment">        true : å¼ºåˆ¶åˆ‡æ¢ä¸º show</span></span><br><span class="line"><span class="comment">        false : å¼ºåˆ¶åˆ‡æ¢ä¸º hide</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> el = $(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¡ä»¶åˆ¤æ–­ï¼š</span></span><br><span class="line">        <span class="comment">// å¦‚æœ setting === undefined åˆ™çœ‹ el.css("display") == "none"</span></span><br><span class="line">        <span class="comment">// å¦‚æœ setting !== undefined åˆ™çœ‹ !!setting</span></span><br><span class="line">        (setting === <span class="literal">undefined</span></span><br><span class="line">        ? el.css(<span class="string">"display"</span>) == <span class="string">"none"</span></span><br><span class="line">        : setting)</span><br><span class="line">          ? el.show() <span class="comment">// å¦‚æœ true åˆ™æ˜¾ç¤º</span></span><br><span class="line">          : el.hide(); <span class="comment">// å¦‚æœ false åˆ™éšè—</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å€ŸåŠ© previousElementSibling å±æ€§</span></span><br><span class="line">    prev: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $(<span class="keyword">this</span>.pluck(<span class="string">"previousElementSibling"</span>)).filter(selector || <span class="string">"*"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å€ŸåŠ© nextElementSibling å±æ€§</span></span><br><span class="line">    next: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $(<span class="keyword">this</span>.pluck(<span class="string">"nextElementSibling"</span>)).filter(selector || <span class="string">"*"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    html: <span class="function"><span class="keyword">function</span>(<span class="params">html</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº«</span></span><br><span class="line">      <span class="number">0</span> <span class="keyword">in</span> <span class="built_in">arguments</span></span><br><span class="line">        ? <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> originHtml = <span class="keyword">this</span>.innerHTML;</span><br><span class="line">            <span class="comment">// ä¼ å…¥çš„ html å‚æ•°å…è®¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå…è®¸æ˜¯ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">            <span class="comment">// é€šè¿‡ funcArg å‡½æ•°ï¼š</span></span><br><span class="line">            <span class="comment">//  1.å¦‚æœ html æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›html</span></span><br><span class="line">            <span class="comment">//  2.å¦‚æœ html æ˜¯å‡½æ•°ï¼Œåˆ™æ‰§è¡Œæ‰§è¡Œå‡½æ•°ï¼ˆä¼ å…¥ idxã€originHtmlï¼‰ï¼Œè¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</span></span><br><span class="line">            $(<span class="keyword">this</span>)</span><br><span class="line">              .empty()</span><br><span class="line">              .append(funcArg(<span class="keyword">this</span>, html, idx, originHtml));</span><br><span class="line">          &#125;)</span><br><span class="line">        : <span class="comment">/*</span></span><br><span class="line"><span class="comment">          æ’æ’­ï¼š</span></span><br><span class="line"><span class="comment">          function funcArg(context, arg, idx, payload) &#123;</span></span><br><span class="line"><span class="comment">            return isFunction(arg) ? arg.call(context, idx, payload) : arg</span></span><br><span class="line"><span class="comment">          &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼</span></span><br><span class="line">        <span class="number">0</span> <span class="keyword">in</span> <span class="keyword">this</span></span><br><span class="line">        ? <span class="keyword">this</span>[<span class="number">0</span>].innerHTML <span class="comment">// ç›´æ¥å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ innerHTML</span></span><br><span class="line">        : <span class="literal">null</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    text: <span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº«</span></span><br><span class="line">      <span class="number">0</span> <span class="keyword">in</span> <span class="built_in">arguments</span></span><br><span class="line">        ? <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// funcArgçš„åº”ç”¨ï¼Œå’Œhtmlæ–¹æ³•ä¸­ä¸€æ ·</span></span><br><span class="line">            <span class="keyword">var</span> newText = funcArg(<span class="keyword">this</span>, text, idx, <span class="keyword">this</span>.textContent);</span><br><span class="line">            <span class="keyword">this</span>.textContent = newText == <span class="literal">null</span> ? <span class="string">""</span> : <span class="string">""</span> + newText;</span><br><span class="line">          &#125;)</span><br><span class="line">        : <span class="comment">// æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼</span></span><br><span class="line">        <span class="number">0</span> <span class="keyword">in</span> <span class="keyword">this</span></span><br><span class="line">        ? <span class="keyword">this</span>[<span class="number">0</span>].textContent</span><br><span class="line">        : <span class="literal">null</span>; <span class="comment">// ç›´æ¥å€Ÿç”¨ textContent å±æ€§</span></span><br><span class="line">    &#125;,</span><br><span class="line">    attr: <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> result;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æƒ…å†µ1ï¼šæ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å€¼ï¼ˆè¯»å–å€¼åªèƒ½è¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼‰</span></span><br><span class="line">      <span class="keyword">typeof</span> name == <span class="string">"string"</span> &amp;&amp; !(<span class="number">1</span> <span class="keyword">in</span> <span class="built_in">arguments</span>)</span><br><span class="line">        ? !<span class="keyword">this</span>.length || <span class="keyword">this</span>[<span class="number">0</span>].nodeType !== <span class="number">1</span></span><br><span class="line">          ? <span class="literal">undefined</span></span><br><span class="line">          : <span class="comment">/*</span></span><br><span class="line"><span class="comment">            æ³¨é‡Šï¼š</span></span><br><span class="line"><span class="comment">            this[0]æ˜¯ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œæœ‰ã€å±æ€§ã€ä¹Ÿæœ‰ã€ç‰¹æ€§ã€</span></span><br><span class="line"><span class="comment">              result = this[0].getAttribute(name) è¯•å›¾è·å– DOMèŠ‚ç‚¹å±æ€§</span></span><br><span class="line"><span class="comment">              name in this[0] åˆ¤æ–­æ˜¯ä¸æ˜¯jså¯¹è±¡çš„å±æ€§</span></span><br><span class="line"><span class="comment">            ç„¶åï¼Œè¯¥è¿”å›å“ªä¸€ä¸ªå°±è¿”å›å“ªä¸€ä¸ª</span></span><br><span class="line"><span class="comment">          */</span></span><br><span class="line">          !(result = <span class="keyword">this</span>[<span class="number">0</span>].getAttribute(name)) &amp;&amp; name <span class="keyword">in</span> <span class="keyword">this</span>[<span class="number">0</span>]</span><br><span class="line">          ? <span class="keyword">this</span>[<span class="number">0</span>][name]</span><br><span class="line">          : result</span><br><span class="line">        : <span class="comment">// æƒ…å†µ2ï¼šæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å€¼ï¼ˆé’ˆå¯¹æ¯ä¸ªå…ƒç´ è®¾ç½®å€¼ï¼‰</span></span><br><span class="line">          <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.nodeType !== <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¼ å…¥çš„å‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡é›†åˆ</span></span><br><span class="line">            <span class="comment">// æ­¤æ—¶ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨ã€æƒ…å†µ1ã€å½“ä¸­ï¼Ÿï¼Ÿï¼Ÿæ­¤æ—¶ï¼Œvalueæ ¹æœ¬æ²¡æœ‰ç”¨å•Šï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">            <span class="keyword">if</span> (isObject(name))</span><br><span class="line">              <span class="keyword">for</span> (key <span class="keyword">in</span> name) setAttribute(<span class="keyword">this</span>, key, name[key]);</span><br><span class="line">            <span class="comment">// ä¼ å…¥çš„ä¸æ˜¯å¯¹è±¡ï¼Œå³è®¾ç½®ä¸€ä¸ªå•ä¸€çš„å±æ€§ã€‚</span></span><br><span class="line">            <span class="comment">// ä½†æ˜¯ï¼Œè¿™é‡Œçš„ value å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">            <span class="comment">// funcArg å³å¤„ç†äº† value æ˜¯å‡½æ•°å’Œéå‡½æ•°çš„ä¸¤ç§æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">              setAttribute(</span><br><span class="line">                <span class="keyword">this</span>,</span><br><span class="line">                name,</span><br><span class="line">                funcArg(<span class="keyword">this</span>, value, idx, <span class="keyword">this</span>.getAttribute(name))</span><br><span class="line">              );</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    removeAttr: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nodeType === <span class="number">1</span> &amp;&amp;</span><br><span class="line">          name.split(<span class="string">" "</span>).forEach(</span><br><span class="line">            <span class="function"><span class="keyword">function</span>(<span class="params">attribute</span>) </span>&#123;</span><br><span class="line">              setAttribute(<span class="keyword">this</span>, attribute); <span class="comment">// å°†å±æ€§è®¾ç½®ä¸ºç©ºï¼ŒsetAttributeä¼šç§»é™¤å±æ€§</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="keyword">this</span> <span class="comment">// æ”¹å‚æ•°å°†æˆä¸º forEach ä¸­å‡½æ•°çš„this</span></span><br><span class="line">          );</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–ã€è®¾ç½®å±æ€§ï¼ˆjså¯¹è±¡çš„å±æ€§ï¼‰</span></span><br><span class="line">    prop: <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// propMap ä¸­å­˜å‚¨çš„ï¼škeyæ˜¯htmlä¸­çš„å±æ€§åç§°ï¼Œvalueæ˜¯jså¯¹è±¡ä¸­çš„å±æ€§åç§°</span></span><br><span class="line">      <span class="comment">// ä¾‹å¦‚ï¼Œhtmlä¸­çš„ "class" åœ¨DOMå¯¹è±¡ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨ "className" è¿™ä¸ªåå­—è¯»å–ï¼ŒåŒç†äºï¼šfor  maxlength  cellspacing ç­‰ç­‰</span></span><br><span class="line">      name = propMap[name] || name;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment">        propMap = &#123;</span></span><br><span class="line"><span class="comment">          'tabindex': 'tabIndex',</span></span><br><span class="line"><span class="comment">          'readonly': 'readOnly',</span></span><br><span class="line"><span class="comment">          'for': 'htmlFor',</span></span><br><span class="line"><span class="comment">          'class': 'className',</span></span><br><span class="line"><span class="comment">          'maxlength': 'maxLength',</span></span><br><span class="line"><span class="comment">          'cellspacing': 'cellSpacing',</span></span><br><span class="line"><span class="comment">          'cellpadding': 'cellPadding',</span></span><br><span class="line"><span class="comment">          'rowspan': 'rowSpan',</span></span><br><span class="line"><span class="comment">          'colspan': 'colSpan',</span></span><br><span class="line"><span class="comment">          'usemap': 'useMap',</span></span><br><span class="line"><span class="comment">          'frameborder': 'frameBorder',</span></span><br><span class="line"><span class="comment">          'contenteditable': 'contentEditable'</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å±æ€§</span></span><br><span class="line">      <span class="number">1</span> <span class="keyword">in</span> <span class="built_in">arguments</span></span><br><span class="line">        ? <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// è®¾ç½®å±æ€§å€¼ï¼ŒfuncArgå¤„ç†å‡½æ•°æˆ–è€…éå‡½æ•°</span></span><br><span class="line">            <span class="keyword">this</span>[name] = funcArg(<span class="keyword">this</span>, value, idx, <span class="keyword">this</span>[name]);</span><br><span class="line">          &#125;)</span><br><span class="line">        : <span class="comment">// æ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å±æ€§ï¼ˆè¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ï¼‰</span></span><br><span class="line">          <span class="keyword">this</span>[<span class="number">0</span>] &amp;&amp; <span class="keyword">this</span>[<span class="number">0</span>][name];</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰é¢åŠ ä¸Š 'data-' é€šè¿‡ attr è®¾ç½®æˆ–è€…è¯»å–</span></span><br><span class="line">    data: <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment">        capitalRE = /([A-Z])/g,  //å¤§å†™å­—æ¯</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//      å‰é¢åŠ ä¸Š 'data-'               å°† 'A' æ›¿æ¢ä¸º '-a'</span></span><br><span class="line">      <span class="keyword">var</span> attrName = <span class="string">"data-"</span> + name.replace(capitalRE, <span class="string">"-$1"</span>).toLowerCase();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> data =</span><br><span class="line">        <span class="number">1</span> <span class="keyword">in</span> <span class="built_in">arguments</span> ? <span class="keyword">this</span>.attr(attrName, value) : <span class="keyword">this</span>.attr(attrName);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> data !== <span class="literal">null</span> ? deserializeValue(data) : <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸Šæ–‡å®šä¹‰çš„ï¼ŒdeserializeValue å‡½æ•°çš„ä½œç”¨æ˜¯ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        // å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š</span></span><br><span class="line"><span class="comment">        // "true"  =&gt; true</span></span><br><span class="line"><span class="comment">        // "false" =&gt; false</span></span><br><span class="line"><span class="comment">        // "null"  =&gt; null</span></span><br><span class="line"><span class="comment">        // "42"    =&gt; 42</span></span><br><span class="line"><span class="comment">        // "42.5"  =&gt; 42.5</span></span><br><span class="line"><span class="comment">        // "08"    =&gt; "08"</span></span><br><span class="line"><span class="comment">        // JSON    =&gt; parse if valid</span></span><br><span class="line"><span class="comment">        // String  =&gt; self</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    val: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æœ‰å‚æ•°ï¼Œè®¾ç½®å€¼</span></span><br><span class="line">      <span class="number">0</span> <span class="keyword">in</span> <span class="built_in">arguments</span></span><br><span class="line">        ? <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// éå†æ¯ä¸ªå…ƒç´ ï¼Œç›´æ¥å¯¹ value å±æ€§èµ‹å€¼</span></span><br><span class="line">            <span class="keyword">this</span>.value = funcArg(<span class="keyword">this</span>, value, idx, <span class="keyword">this</span>.value);</span><br><span class="line">          &#125;)</span><br><span class="line">        : <span class="comment">// æ— å‚æ•°ï¼Œè¯»å–å€¼</span></span><br><span class="line">          <span class="keyword">this</span>[<span class="number">0</span>] &amp;&amp;</span><br><span class="line">          <span class="comment">// å¦‚æœå…ƒç´ æ˜¯ &lt;select multiple&gt; å¤šé€‰åˆ—è¡¨</span></span><br><span class="line">          (<span class="keyword">this</span>[<span class="number">0</span>].multiple</span><br><span class="line">            ? <span class="comment">// è¿”å›æ‰€æœ‰é€‰ä¸­çš„optionçš„å€¼çš„æ•°ç»„</span></span><br><span class="line">              $(<span class="keyword">this</span>[<span class="number">0</span>])</span><br><span class="line">                .find(<span class="string">"option"</span>)</span><br><span class="line">                .filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">this</span>.selected;</span><br><span class="line">                &#125;)</span><br><span class="line">                .pluck(<span class="string">"value"</span>)</span><br><span class="line">            : <span class="comment">/*</span></span><br><span class="line"><span class="comment">                      ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment">                      pluck: function(property)&#123;</span></span><br><span class="line"><span class="comment">                        return $.map(this, function(el)&#123; return el[property] &#125;)</span></span><br><span class="line"><span class="comment">                      &#125;,</span></span><br><span class="line"><span class="comment">                   */</span></span><br><span class="line"></span><br><span class="line">              <span class="comment">// å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è·å– value</span></span><br><span class="line">              <span class="keyword">this</span>[<span class="number">0</span>].value);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ã€è®¾ç½®å…ƒç´ çš„ offset</span></span><br><span class="line">    offset: <span class="function"><span class="keyword">function</span>(<span class="params">coordinates</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæœ‰ coordinates å‚æ•°ï¼Œè®¾ç½®åæ ‡å€¼ï¼Œå¹¶è¿”å›å½“å‰å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (coordinates)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>),</span><br><span class="line">            <span class="comment">// æ”¯æŒå‡½æ•°ï¼ˆä¼ å…¥ $this.offset() åšå‚æ•°ï¼‰å’Œéå‡½æ•°</span></span><br><span class="line">            coords = funcArg(<span class="keyword">this</span>, coordinates, index, $<span class="keyword">this</span>.offset()),</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°æœ€è¿‘çš„ â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€ çš„ç¥–å…ˆå…ƒç´ ï¼Œå¹¶è·å–å®ƒçš„ offset()</span></span><br><span class="line">            parentOffset = $<span class="keyword">this</span>.offsetParent().offset(),</span><br><span class="line">            <span class="comment">// left å’Œ top éœ€è¦å»æ‰å®šä½çš„ç¥–å…ˆå…ƒç´ çš„ leftã€top å€¼</span></span><br><span class="line">            props = &#123;</span><br><span class="line">              top: coords.top - parentOffset.top,</span><br><span class="line">              left: coords.left - parentOffset.left</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// staticæ—¶ï¼Œè®¾ç½® topã€leftæ˜¯æ— æ•ˆçš„</span></span><br><span class="line">          <span class="keyword">if</span> ($<span class="keyword">this</span>.css(<span class="string">"position"</span>) == <span class="string">"static"</span>) props[<span class="string">"position"</span>] = <span class="string">"relative"</span>;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// é€šè¿‡ css èµ‹å€¼</span></span><br><span class="line">          $<span class="keyword">this</span>.css(props);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å½“å‰å¯¹è±¡æ˜¯ç©ºï¼Œåˆ™è¿”å› null</span></span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰ coordinates å‚æ•°ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„åæ ‡å€¼</span></span><br><span class="line">      <span class="keyword">var</span> obj = <span class="keyword">this</span>[<span class="number">0</span>].getBoundingClientRect();</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        elem.getBoundingClientRect() è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="comment">        åŒ…å«å…ƒç´ çš„ top bottom left right width height çš„å€¼</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯è¿™ä¸ª topã€bottomã€leftã€right æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£çš„è·ç¦»ï¼Œè€Œä¸æ˜¯é¡µé¢çš„è¾¹ç•Œ</span></span><br><span class="line"><span class="comment">        ï¼ˆæ³¨æ„ï¼Œelem.getBoundingClientRect()åœ¨IEä½ç‰ˆæœ¬æµè§ˆå™¨æœ‰2pxçš„å…¼å®¹é—®é¢˜ï¼‰</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        window.pageXOffset å’Œ window.pageYOffset å¯è·å–ç½‘é¡µæ»šåŠ¨çš„è·ç¦»ï¼Œ</span></span><br><span class="line"><span class="comment">        IEä½ç‰ˆæœ¬éœ€è¦ç”¨ document.body.scrollLeft å’Œ document.body.scrollTop å…¼å®¹</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        left: obj.left + <span class="built_in">window</span>.pageXOffset,</span><br><span class="line">        top: obj.top + <span class="built_in">window</span>.pageYOffset,</span><br><span class="line">        width: <span class="built_in">Math</span>.round(obj.width),</span><br><span class="line">        height: <span class="built_in">Math</span>.round(obj.height)</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®ã€è·å– css</span></span><br><span class="line">    css: <span class="function"><span class="keyword">function</span>(<span class="params">property, value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ ·å¼</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> computedStyle,</span><br><span class="line">          element = <span class="keyword">this</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (!element) <span class="keyword">return</span>; <span class="comment">// å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ— å€¼ï¼Œç›´æ¥è¿”å›ã€‚å¦åˆ™ç»§ç»­</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ çš„è®¡ç®—åçš„æ ·å¼</span></span><br><span class="line">        computedStyle = getComputedStyle(element, <span class="string">""</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> property == <span class="string">"string"</span>)</span><br><span class="line">          <span class="comment">// æƒ…å†µ1ï¼Œå‚æ•°ä¸ºå­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line">          <span class="comment">// å…ˆä»elemå†…è”æ ·å¼è·å–ï¼ˆelement.styleï¼‰ï¼Œæ­¤æ—¶éœ€è¦ camelize(property) è½¬æ¢ï¼Œå¦‚å°† background-color å˜ä¸º backgroundColor</span></span><br><span class="line">          <span class="comment">// å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™ä»cssæ ·å¼è·å– computedStyle.getPropertyValue(property)</span></span><br><span class="line">          <span class="comment">// ï¼ˆé‡è¦ï¼‰æ³¨é‡Šï¼šelem.style åªèƒ½è·å–å…ƒç´ è®¾ç½®çš„å†…è”æ ·å¼ã€ä¸èƒ½è·å–cssæ ·å¼ï¼›è€Œ getComputedStyle å¯è·å–å†…è”ã€cssæ ·å¼ã€‚</span></span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            element.style[camelize(property)] ||</span><br><span class="line">            computedStyle.getPropertyValue(property)</span><br><span class="line">          );</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (isArray(property)) &#123;</span><br><span class="line">          <span class="comment">// æƒ…å†µ2ï¼Œå‚æ•°ä¸ºæ•°ç»„å½¢å¼ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶ isObject æƒ…å†µå°šæœªåˆ¤æ–­ï¼‰</span></span><br><span class="line">          <span class="keyword">var</span> props = &#123;&#125;;</span><br><span class="line">          $.each(property, <span class="function"><span class="keyword">function</span>(<span class="params">_, prop</span>) </span>&#123;</span><br><span class="line">            props[prop] =</span><br><span class="line">              element.style[camelize(prop)] ||</span><br><span class="line">              computedStyle.getPropertyValue(prop);</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">return</span> props; <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å…¶ä»–æƒ…å†µï¼šæœ‰ä¸¤ä¸ªå‚æ•°ã€propertyæ˜¯å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">var</span> css = <span class="string">""</span>;</span><br><span class="line">      <span class="keyword">if</span> (type(property) == <span class="string">"string"</span>) &#123;</span><br><span class="line">        <span class="comment">// æƒ…å†µ1ï¼Œproperty æ˜¯å­—ç¬¦ä¸²ï¼Œè®¾ç½®å•ä¸ªæ ·å¼</span></span><br><span class="line">        <span class="keyword">if</span> (!value &amp;&amp; value !== <span class="number">0</span>)</span><br><span class="line">          <span class="comment">// å¦‚æœvalueå‚æ•°æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼</span></span><br><span class="line">          <span class="comment">// æ³¨ï¼šæ­¤è®¡ç®—åªé€‚ç”¨äºå†…è”æ ·å¼çš„åˆ é™¤ï¼Œå¯¹ css æ ·å¼æ— æ•ˆï¼Œå› ä¸ºå®ƒåªé€šè¿‡ this.style.removeProperty è®¡ç®—ï¼Œè€Œ this.style è·å–ä¸åˆ°cssæ ·å¼</span></span><br><span class="line">          <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.style.removeProperty(dasherize(property));</span><br><span class="line">          &#125;);</span><br><span class="line">        <span class="comment">// valueæœ‰æ­£å¸¸å€¼ï¼Œå°† css ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ 'font-size:20px'ï¼‰ç­‰å¾…èµ‹å€¼ç»™å†…è”æ ·å¼</span></span><br><span class="line">        <span class="comment">// maybeAddPx(property, value) éœ€è¦å¢åŠ  px çš„å¢åŠ ä¸Š</span></span><br><span class="line">        <span class="keyword">else</span> css = dasherize(property) + <span class="string">":"</span> + maybeAddPx(property, value);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æƒ…å†µ2ï¼Œproperty æ˜¯å¯¹è±¡ï¼ˆæ­¤æ—¶å°±ä¸ç®¡ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»€ä¹ˆäº†ï¼Œä¸ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªæ ·å¼</span></span><br><span class="line">        <span class="keyword">for</span> (key <span class="keyword">in</span> property)</span><br><span class="line">          <span class="keyword">if</span> (!property[key] &amp;&amp; property[key] !== <span class="number">0</span>)</span><br><span class="line">            <span class="comment">// å¦‚æœå¯¹è±¡å±æ€§å€¼æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼ï¼ŒåŒç†ï¼Œåªé’ˆå¯¹å†…è”æ ·å¼</span></span><br><span class="line">            <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.style.removeProperty(dasherize(key));</span><br><span class="line">            &#125;);</span><br><span class="line">          <span class="comment">// å¦åˆ™ï¼Œç»™ css èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šæ ·å¼å±æ€§ç”¨ ; éš”å¼€</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">            css += dasherize(key) + <span class="string">":"</span> + maybeAddPx(key, property[key]) + <span class="string">";"</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é’ˆå¯¹æ¯ä¸ªå…ƒç´ ï¼Œè®¾ç½®å†…è”æ ·å¼ï¼ˆthis.style.cssTextå¯è·å–ã€è®¾ç½®å†…è”æ ·å¼ï¼‰</span></span><br><span class="line">      <span class="comment">// æœ€åè¿”å›è‡ªèº«</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.style.cssText += <span class="string">";"</span> + css;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment">        // å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span></span><br><span class="line"><span class="comment">        function dasherize(str) &#123;</span></span><br><span class="line"><span class="comment">          return str.replace(/::/g, '/')</span></span><br><span class="line"><span class="comment">                    .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')</span></span><br><span class="line"><span class="comment">                    .replace(/([a-z\d])([A-Z])/g, '$1_$2')</span></span><br><span class="line"><span class="comment">                    .replace(/_/g, '-')</span></span><br><span class="line"><span class="comment">                    .toLowerCase()</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚å½“elemenå‚æ•°æ²¡æœ‰ç»™å‡ºæ—¶ï¼Œè¿”å›å½“å‰å…ƒç´ åœ¨å…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä½ç½®</span></span><br><span class="line">    index: <span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸Šæ–‡å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment">        $.fn.indexOf: emptyArray.indexOf</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// å…¶å® this æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æœ¬èº«å°±æœ‰ indexOf ï¼Œä¸ºä½•è¿˜è¦ä¸Šæ–‡çš„è¿™ä¸ªèµ‹å€¼å‘¢ï¼Ÿ</span></span><br><span class="line">      <span class="comment">// å› ä¸ºä¸Šæ–‡ä¸­ï¼Œthis.__proto__ ä¿®æ”¹äº†ï¼Œä¸æ˜¯ Array.prototype äº†ï¼Œä¹Ÿå°±æ²¡æœ‰ indexOf æ–¹æ³•äº†</span></span><br><span class="line">      <span class="comment">// å› æ­¤è¦æ‰‹åŠ¨èµ‹å€¼ï¼Œéœ€è¦å°†æ•°ç»„å¸¸ç”¨çš„æ–¹æ³•åœ¨é‡æ–°èµ‹å€¼ç»™ $.fn.indexOf</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> element</span><br><span class="line">        ? <span class="keyword">this</span>.indexOf($(element)[<span class="number">0</span>])</span><br><span class="line">        : <span class="keyword">this</span>.parent()</span><br><span class="line">            .children()</span><br><span class="line">            .indexOf(<span class="keyword">this</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;,</span><br><span class="line">    hasClass: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span> emptyArray.some.call(</span><br><span class="line">        <span class="keyword">this</span>,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// this å°±æ˜¯ classRE(name) çš„è¿”å›å€¼ï¼ˆè¿”å›ä¸€ä¸ªæ­£åˆ™ï¼‰</span></span><br><span class="line">          <span class="comment">// function className(node, value)&#123;...&#125; è·å–æˆ–è€…è®¾ç½®elemçš„className</span></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>.test(className(el));</span><br><span class="line">        &#125;,</span><br><span class="line">        classRE(name)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      <span class="comment">// array.some(callback,[ thisObject]); åªè¦æ•°ç»„ä¸­ä¸€é¡¹ç¬¦åˆcallbackè¦æ±‚ï¼Œå³è¿”å›true</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        // ä¸Šæ–‡å®šä¹‰ classCache = &#123;&#125;</span></span><br><span class="line"><span class="comment">        function classRE(name) &#123;</span></span><br><span class="line"><span class="comment">          return name in classCache ?</span></span><br><span class="line"><span class="comment">                 classCache[name] : </span></span><br><span class="line"><span class="comment">                 (classCache[name] = new RegExp('(^|\\s)' + name + '(\\s|$)'))</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          // classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</span></span><br><span class="line"><span class="comment">          // &#123;</span></span><br><span class="line"><span class="comment">          //   abc: /(^|\s)abc(\s|$)/,  // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc '</span></span><br><span class="line"><span class="comment">          //   xyz: /(^|\s)abc(\s|$)/,</span></span><br><span class="line"><span class="comment">          //   ...</span></span><br><span class="line"><span class="comment">          // &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    addClass: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½æ·»åŠ classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº«</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node</span></span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">"className"</span> <span class="keyword">in</span> <span class="keyword">this</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// classList æ˜¯ä¸€å¼€å§‹å°±å®šä¹‰çš„ç©ºå˜é‡</span></span><br><span class="line">        classList = [];</span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ çš„ clasname      // æ”¯æŒä¼ å…¥å‡½æ•°</span></span><br><span class="line">        <span class="keyword">var</span> cls = className(<span class="keyword">this</span>),</span><br><span class="line">          newName = funcArg(<span class="keyword">this</span>, name, idx, cls);</span><br><span class="line">        <span class="comment">// æŠŠè¦èµ‹å€¼çš„å€¼ï¼ŒæŒ‰ç…§ç©ºç™½åˆ†ç»„ï¼Œéå†</span></span><br><span class="line">        newName.split(<span class="regexp">/\s+/g</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">klass</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// æŠŠå½“å‰å…ƒç´ ä¸å­˜åœ¨çš„classï¼Œpushåˆ°classlistä¸­</span></span><br><span class="line">          <span class="keyword">if</span> (!$(<span class="keyword">this</span>).hasClass(klass)) classList.push(klass);</span><br><span class="line">        &#125;, <span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// å¦‚æœclasslistæœ‰æ•°æ®ï¼Œåˆ™ä¸ºå½“å‰å…ƒç´ èµ‹å€¼æœ€æ–°çš„classå€¼ï¼ˆç°æœ‰çš„classnameå’Œæ–°çš„classnameæ‹¼æ¥ï¼‰</span></span><br><span class="line">        classList.length &amp;&amp;</span><br><span class="line">          className(<span class="keyword">this</span>, cls + (cls ? <span class="string">" "</span> : <span class="string">""</span>) + classList.join(<span class="string">" "</span>));</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    removeClass: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½ç§»é™¤classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº«</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node</span></span><br><span class="line">        <span class="keyword">if</span> (!(<span class="string">"className"</span> <span class="keyword">in</span> <span class="keyword">this</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœå‚æ•°ç©ºï¼Œåˆ™ç§»é™¤å…ƒç´ çš„æ‰€æœ‰class</span></span><br><span class="line">        <span class="keyword">if</span> (name === <span class="literal">undefined</span>) <span class="keyword">return</span> className(<span class="keyword">this</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–ç°æœ‰çš„classname</span></span><br><span class="line">        classList = className(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// ï¼ˆå¯ä»¥ä¼ å…¥å‡½æ•°ï¼‰éå†æ–°çš„classnameå­—ç¬¦ä¸²</span></span><br><span class="line">        funcArg(<span class="keyword">this</span>, name, idx, classList)</span><br><span class="line">          .split(<span class="regexp">/\s+/g</span>)</span><br><span class="line">          .forEach(<span class="function"><span class="keyword">function</span>(<span class="params">klass</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// classRE(klass) è¿”å›ä¸€ä¸ªæ­£åˆ™ï¼ŒåŒ¹é… 'classname' æˆ– ' classname ' æˆ– ' classname' æˆ– 'classname '</span></span><br><span class="line">            <span class="comment">// é’ˆå¯¹ä¼ å…¥çš„classnameå­—ç¬¦ä¸²ï¼Œå¯¹æ¯ä¸ªç¬¦åˆæ¡ä»¶çš„classnameï¼Œéƒ½æ›¿æ¢ä¸º ' 'ï¼ˆå³åˆ é™¤äº†ï¼‰</span></span><br><span class="line">            classList = classList.replace(classRE(klass), <span class="string">" "</span>);</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯¹æ•´ç†å¥½çš„classnameï¼Œé‡æ–°èµ‹å€¼ç»™å½“å‰å…ƒç´ </span></span><br><span class="line">        className(<span class="keyword">this</span>, classList.trim());</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    toggleClass: <span class="function"><span class="keyword">function</span>(<span class="params">name, when</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// when å‚æ•°ç›¸å½“äºä¸€ä¸ªæ¡ä»¶ï¼š</span></span><br><span class="line">      <span class="comment">// å¦‚æœ when === true åˆ™å•çº¯æ‰§è¡Œ addClass</span></span><br><span class="line">      <span class="comment">// å¦‚æœ when === false åˆ™å•çº¯æ‰§è¡Œ removeClass</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//                   name å¯æ¥æ”¶å‡½æ•°ï¼Œå¯ä»¥æ˜¯ç©ºç™½åˆ†å‰²å¼€æ¥çš„å¤šä¸ªclassname</span></span><br><span class="line">        <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>),</span><br><span class="line">          names = funcArg(<span class="keyword">this</span>, name, idx, className(<span class="keyword">this</span>));</span><br><span class="line">        <span class="comment">// ç”¨ç©ºç™½åˆ†å‰²å¼€å¤šä¸ªclass</span></span><br><span class="line">        names.split(<span class="regexp">/\s+/g</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">klass</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// å¦‚æœæœ‰ when å‚æ•°ï¼Œåˆ™åªé€šè¿‡whenå‚æ•°åˆ¤æ–­ï¼Œtrueåˆ™åªæ‰§è¡ŒaddClassï¼Œfalseåˆ™åªæ‰§è¡ŒremoveClass</span></span><br><span class="line">          <span class="comment">// å¦‚æœæ²¡æœ‰ when å‚æ•°ï¼Œåˆ™åˆ¤æ–­å…ƒç´ æœ‰æ²¡æœ‰è¯¥classï¼Œæœ‰åˆ™ç§»é™¤ï¼Œæ²¡æœ‰åˆ™æ·»åŠ </span></span><br><span class="line">          (when === <span class="literal">undefined</span></span><br><span class="line">          ? !$<span class="keyword">this</span>.hasClass(klass)</span><br><span class="line">          : when)</span><br><span class="line">            ? $<span class="keyword">this</span>.addClass(klass)</span><br><span class="line">            : $<span class="keyword">this</span>.removeClass(klass);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    scrollTop: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ™®é€šelemæœ‰ scrollTop å±æ€§ï¼Œå¯ä»¥è·å–æˆ–è€…è®¾ç½®topå€¼</span></span><br><span class="line">      <span class="comment">// windowå¯¹è±¡æ²¡æœ‰ scrollTop å±æ€§ï¼Œé€šè¿‡ pageYOffset è·å–ï¼Œé€šè¿‡ scrollTo() èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> hasScrollTop = <span class="string">"scrollTop"</span> <span class="keyword">in</span> <span class="keyword">this</span>[<span class="number">0</span>];</span><br><span class="line">      <span class="comment">// value æ— å€¼ï¼Œè·å– top</span></span><br><span class="line">      <span class="keyword">if</span> (value === <span class="literal">undefined</span>)</span><br><span class="line">        <span class="keyword">return</span> hasScrollTop ? <span class="keyword">this</span>[<span class="number">0</span>].scrollTop : <span class="keyword">this</span>[<span class="number">0</span>].pageYOffset;</span><br><span class="line">      <span class="comment">// value æœ‰å€¼ï¼Œè®¾ç½® top</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(</span><br><span class="line">        hasScrollTop</span><br><span class="line">          ? <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.scrollTop = value;</span><br><span class="line">            &#125;</span><br><span class="line">          : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.scrollTo(<span class="keyword">this</span>.scrollX, value);</span><br><span class="line">            &#125;</span><br><span class="line">      ); <span class="comment">// window.scrollX è·å–æ¨ªå‘æ»šåŠ¨å€¼</span></span><br><span class="line">    &#125;,</span><br><span class="line">    scrollLeft: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span>;</span><br><span class="line">      <span class="keyword">var</span> hasScrollLeft = <span class="string">"scrollLeft"</span> <span class="keyword">in</span> <span class="keyword">this</span>[<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">if</span> (value === <span class="literal">undefined</span>)</span><br><span class="line">        <span class="keyword">return</span> hasScrollLeft ? <span class="keyword">this</span>[<span class="number">0</span>].scrollLeft : <span class="keyword">this</span>[<span class="number">0</span>].pageXOffset;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(</span><br><span class="line">        hasScrollLeft</span><br><span class="line">          ? <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.scrollLeft = value;</span><br><span class="line">            &#125;</span><br><span class="line">          : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.scrollTo(value, <span class="keyword">this</span>.scrollY);</span><br><span class="line">            &#125;</span><br><span class="line">      ); <span class="comment">// window.scrollX è·å–çºµå‘æ»šåŠ¨å€¼</span></span><br><span class="line">    &#125;,</span><br><span class="line">    position: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> elem = <span class="keyword">this</span>[<span class="number">0</span>],</span><br><span class="line">        <span class="comment">// Get *real* offsetParent</span></span><br><span class="line">        offsetParent = <span class="keyword">this</span>.offsetParent(), <span class="comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå®šä½è¿‡çš„ç¥–å…ˆå…ƒç´  â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€</span></span><br><span class="line">        <span class="comment">// Get correct offsets</span></span><br><span class="line">        offset = <span class="keyword">this</span>.offset(), <span class="comment">// è·å–è‡ªèº«çš„offset</span></span><br><span class="line">        parentOffset = rootNodeRE.test(offsetParent[<span class="number">0</span>].nodeName)</span><br><span class="line">          ? &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">0</span> &#125;</span><br><span class="line">          : offsetParent.offset(); <span class="comment">// è·å–å®šä½ç¥–å…ˆå…ƒç´ çš„offsetï¼ˆ bodyã€htmlç›´æ¥è®¾ç½® top:0;left:0 ï¼‰</span></span><br><span class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š rootNodeRE = /^(?:body|html)$/i,</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// å»æ‰å½“å‰å…ƒç´ çš„ margin å®½åº¦</span></span><br><span class="line">      <span class="comment">// Subtract element margins</span></span><br><span class="line">      <span class="comment">// note: when an element has margin: auto the offsetLeft and marginLeft</span></span><br><span class="line">      <span class="comment">// are the same in Safari causing offset.left to incorrectly be 0</span></span><br><span class="line">      offset.top -= <span class="built_in">parseFloat</span>($(elem).css(<span class="string">"margin-top"</span>)) || <span class="number">0</span>;</span><br><span class="line">      offset.left -= <span class="built_in">parseFloat</span>($(elem).css(<span class="string">"margin-left"</span>)) || <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¢åŠ çˆ¶å…ƒç´ çš„ border å®½åº¦</span></span><br><span class="line">      <span class="comment">// Add offsetParent borders</span></span><br><span class="line">      parentOffset.top +=</span><br><span class="line">        <span class="built_in">parseFloat</span>($(offsetParent[<span class="number">0</span>]).css(<span class="string">"border-top-width"</span>)) || <span class="number">0</span>;</span><br><span class="line">      parentOffset.left +=</span><br><span class="line">        <span class="built_in">parseFloat</span>($(offsetParent[<span class="number">0</span>]).css(<span class="string">"border-left-width"</span>)) || <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Subtract the two offsets</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        top: offset.top - parentOffset.top,</span><br><span class="line">        left: offset.left - parentOffset.left</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    offsetParent: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// é€šè¿‡ this.map éå†å½“å‰å¯¹è±¡æ‰€æœ‰å…ƒç´ ï¼Œè¿›è¡Œè®¡ç®—ï¼Œç„¶åæ‹¼æ¥æ–°çš„æ•°ç»„ï¼Œå¹¶è¿”å›ã€‚ä¿è¯é“¾å¼æ“ä½œ</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> parent = <span class="keyword">this</span>.offsetParent || <span class="built_in">document</span>.body; <span class="comment">// elem.offsetParent å¯è¿”å›æœ€è¿‘çš„æ”¹å…ƒç´ æœ€è¿‘çš„å·²ç»å®šä½çš„çˆ¶å…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span> (</span><br><span class="line">          parent &amp;&amp;</span><br><span class="line">          !rootNodeRE.test(parent.nodeName) &amp;&amp;</span><br><span class="line">          $(parent).css(<span class="string">"position"</span>) == <span class="string">"static"</span></span><br><span class="line">        )</span><br><span class="line">          <span class="comment">// å¦‚æœè·å–çš„parentä¸æ˜¯nullã€ä¸æ˜¯bodyæˆ–htmlã€è€Œä¸”position==static</span></span><br><span class="line">          <span class="comment">// åˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ offsetParentã€å¤§ä¸äº†æ‰¾åˆ° body ä¸ºæ­¢</span></span><br><span class="line">          parent = parent.offsetParent;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æœ€åè¿”å›æ”¹å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> parent;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// for now</span></span><br><span class="line">  $.fn.detach = $.fn.remove;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Generate the `width` and `height` functions</span></span><br><span class="line">  [<span class="string">"width"</span>, <span class="string">"height"</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">dimension</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å°† width height å˜ä¸º  Width Height</span></span><br><span class="line">    <span class="keyword">var</span> dimensionProperty = dimension.replace(<span class="regexp">/./</span>, <span class="function"><span class="keyword">function</span>(<span class="params">m</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> m[<span class="number">0</span>].toUpperCase();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $.fn[dimension] = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> offset,</span><br><span class="line">        el = <span class="keyword">this</span>[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æƒ…å†µ1ï¼Œæ— å‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼</span></span><br><span class="line">      <span class="keyword">if</span> (value === <span class="literal">undefined</span>)</span><br><span class="line">        <span class="keyword">return</span> isWindow(el)</span><br><span class="line">          ? el[<span class="string">"inner"</span> + dimensionProperty] <span class="comment">// window.innerHeight</span></span><br><span class="line">          : isDocument(el)</span><br><span class="line">          ? el.documentElement[<span class="string">"scroll"</span> + dimensionProperty] <span class="comment">// document.documentElement.scrollHeight</span></span><br><span class="line">          : (offset = <span class="keyword">this</span>.offset()) &amp;&amp; offset[dimension];</span><br><span class="line">      <span class="comment">// this.offset().width</span></span><br><span class="line">      <span class="comment">// æƒ…å†µ2ï¼Œæœ‰å‚æ•°ï¼Œè®¾ç½®æ‰€æœ‰å…ƒç´ çš„å€¼</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>) </span>&#123;</span><br><span class="line">          el = $(<span class="keyword">this</span>);</span><br><span class="line">          <span class="comment">// é€šè¿‡ css() æ–¹æ³•è®¾ç½®ï¼Œæ”¯æŒä¼ å…¥å‡½æ•°</span></span><br><span class="line">          el.css(dimension, funcArg(<span class="keyword">this</span>, value, idx, el[dimension]()));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é’ˆå¯¹å½“å‰å…ƒç´ ã€éå†å­å…ƒç´ ï¼Œéƒ½æ‰§è¡Œ fun å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">traverseNode</span>(<span class="params">node, fun</span>) </span>&#123;</span><br><span class="line">    fun(node);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = node.childNodes.length; i &lt; len; i++)</span><br><span class="line">      traverseNode(node.childNodes[i], fun);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Generate the `after`, `prepend`, `before`, `append`,</span></span><br><span class="line">  <span class="comment">// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.</span></span><br><span class="line">  adjacencyOperators.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">operator, operatorIndex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> inside = operatorIndex % <span class="number">2</span>; <span class="comment">//=&gt; prepend, append</span></span><br><span class="line"></span><br><span class="line">    $.fn[operator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// arguments can be nodes, arrays of nodes, Zepto objects and HTML strings</span></span><br><span class="line">      <span class="keyword">var</span> argType,</span><br><span class="line">        nodes = $.map(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">          argType = type(arg);</span><br><span class="line">          <span class="keyword">return</span> argType == <span class="string">"object"</span> || argType == <span class="string">"array"</span> || arg == <span class="literal">null</span></span><br><span class="line">            ? arg</span><br><span class="line">            : zepto.fragment(arg);</span><br><span class="line">        &#125;),</span><br><span class="line">        parent,</span><br><span class="line">        copyByClone = <span class="keyword">this</span>.length &gt; <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (nodes.length &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">_, target</span>) </span>&#123;</span><br><span class="line">        parent = inside ? target : target.parentNode;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// convert all methods to a "before" operation</span></span><br><span class="line">        target =</span><br><span class="line">          operatorIndex == <span class="number">0</span></span><br><span class="line">            ? target.nextSibling</span><br><span class="line">            : operatorIndex == <span class="number">1</span></span><br><span class="line">            ? target.firstChild</span><br><span class="line">            : operatorIndex == <span class="number">2</span></span><br><span class="line">            ? target</span><br><span class="line">            : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> parentInDocument = $.contains(<span class="built_in">document</span>.documentElement, parent);</span><br><span class="line"></span><br><span class="line">        nodes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (copyByClone) node = node.cloneNode(<span class="literal">true</span>);</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span> (!parent) <span class="keyword">return</span> $(node).remove();</span><br><span class="line"></span><br><span class="line">          parent.insertBefore(node, target);</span><br><span class="line">          <span class="keyword">if</span> (parentInDocument)</span><br><span class="line">            traverseNode(node, <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">if</span> (</span><br><span class="line">                el.nodeName != <span class="literal">null</span> &amp;&amp;</span><br><span class="line">                el.nodeName.toUpperCase() === <span class="string">"SCRIPT"</span> &amp;&amp;</span><br><span class="line">                (!el.type || el.type === <span class="string">"text/javascript"</span>) &amp;&amp;</span><br><span class="line">                !el.src</span><br><span class="line">              )</span><br><span class="line">                <span class="built_in">window</span>[<span class="string">"eval"</span>].call(<span class="built_in">window</span>, el.innerHTML);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// after    =&gt; insertAfter</span></span><br><span class="line">    <span class="comment">// prepend  =&gt; prependTo</span></span><br><span class="line">    <span class="comment">// before   =&gt; insertBefore</span></span><br><span class="line">    <span class="comment">// append   =&gt; appendTo</span></span><br><span class="line">    $.fn[</span><br><span class="line">      inside ? operator + <span class="string">"To"</span> : <span class="string">"insert"</span> + (operatorIndex ? <span class="string">"Before"</span> : <span class="string">"After"</span>)</span><br><span class="line">    ] = <span class="function"><span class="keyword">function</span>(<span class="params">html</span>) </span>&#123;</span><br><span class="line">      $(html)[operator](<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  zepto.Z.prototype = $.fn;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Export internal API functions in the `$.zepto` namespace</span></span><br><span class="line">  zepto.uniq = uniq;</span><br><span class="line">  zepto.deserializeValue = deserializeValue;</span><br><span class="line">  $.zepto = zepto;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> $;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.Zepto = Zepto;</span><br><span class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zepto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ</title>
      <link href="/2020/03/12/zepto/"/>
      <url>/2020/03/12/zepto/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="http://www.kancloud.cn/wangfupeng/zepto-design-srouce/173680" target="_blank" rel="noopener">zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ</a></p></blockquote><a id="more"></a><h2 id="åŸå‹å¯¹è±¡"><a href="#åŸå‹å¯¹è±¡" class="headerlink" title="åŸå‹å¯¹è±¡"></a>åŸå‹å¯¹è±¡</h2><h3 id="Array-prototype"><a href="#Array-prototype" class="headerlink" title="Array.prototype"></a><code>Array.prototype</code></h3><p><strong>æ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ª prototype å±æ€§</strong>ï¼Œä¸ç®¡æ˜¯ä½ è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯å‡½æ•°å†…ç½®çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype); <span class="comment">// &#123;constructor: Æ’&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype.constructor === fn); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/19526072/53319611-f76d3c00-390d-11e9-8542-313fa56bffab.png" alt="image"></p><p>è¿™é‡Œçš„ <code>fn.prototype</code> æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„ <code>constructor</code> å±æ€§åˆæŒ‡å›äº†è¯¥å‡½æ•°æœ¬èº« fnã€‚</p><p>å³<strong>æ¯ä¸€ä¸ªåŸå‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª consctructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</strong>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.constructor === <span class="built_in">Array</span>; <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/19526072/53319627-ff2ce080-390d-11e9-8dab-3659d53b1296.png" alt="image"></p><p>æˆ‘ä»¬æ¥ç€çœ‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype); <span class="comment">// [constructor: Æ’, concat: Æ’, copyWithin: Æ’, fill: Æ’, find: Æ’, â€¦]</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œé™¤äº† constructor å±æ€§ï¼Œè¿˜æœ‰å…¶ä»–å†…ç½®çš„å±æ€§ï¼Œå³æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ“ä½œæ•°ç»„çš„æ–¹æ³•ã€‚</p><h3 id="proto-éšå¼åŸå‹"><a href="#proto-éšå¼åŸå‹" class="headerlink" title="__proto__(éšå¼åŸå‹)"></a><code>__proto__</code>(éšå¼åŸå‹)</h3><p>æ‰€æœ‰é€šè¿‡å‡½æ•° <code>new</code> ï¼ˆæ„é€ å‡½æ•°ï¼‰å‡ºæ¥çš„å®ä¾‹å¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ª <code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„ <code>prototype</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">arr.__proto__ === <span class="built_in">Array</span>.prototype; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/19526072/53319688-2f747f00-390e-11e9-9555-af336e12b587.png" alt="image"></p><p>åŸå‹é“¾ï¼šç”±ç›¸äº’å…³è”çš„åŸå‹(<code>__proto__</code>)ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ã€‚</p><p>ä¸¾ä¸ªå…³äºç»§æ‰¿ extends çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Animal eat"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.bark = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Dog bark"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»‘å®šåŸå‹ï¼Œå®ç°ç»§æ‰¿</span></span><br><span class="line">Dog.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog();</span><br><span class="line"></span><br><span class="line">dog.eat(); <span class="comment">// Animal eat</span></span><br><span class="line">dog.bark(); <span class="comment">// Dog bark</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çœ‹æ˜ç™½äº†ï¼Œé‚£ä¹ˆ ES6 çš„ç»§æ‰¿æˆ‘ä»¬ä¹Ÿå°±å¯ä»¥æ˜ç™½åŸç†äº†ï¼Œå³ <code>class Dog extends Animal</code> ç›¸å½“äº <code>Dog.prototype = new Animal()</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  eat() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Animal eat!"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  bark() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Dog bark!"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> Dog(<span class="string">"å“ˆå£«å¥‡"</span>);</span><br><span class="line">dog.eat();</span><br><span class="line">dog.bark();</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¸…æ¥šä¸ºä»€ä¹ˆèƒ½è¿™æ ·ï¼š</p><p><strong>å½“æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆæ•°ç»„ï¼‰çš„æŸä¸ªåŠŸèƒ½æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«å…·æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç›´æ¥è°ƒç”¨ï¼Œæ²¡æœ‰çš„è¯ï¼Œé‚£å°±å»è‡ªèº«çš„<code>__proto__</code>å±æ€§ä¸­å»æ‰¾</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  myfn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"myfn"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.myfn(); <span class="comment">// 'myfn'</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">"myfn"</span>); <span class="comment">//true</span></span><br><span class="line">obj.toString(); <span class="comment">// "[object Object]"</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">"toString"</span>); <span class="comment">// false</span></span><br><span class="line">obj.__proto__.hasOwnProperty(<span class="string">"toString"</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><code>hasOwnProperty()</code>å°±å¯ä»¥å¾—å‡ºè¿™ä¸ªå±æ€§æ˜¯å¦æ˜¯å±äºè¯¥å¯¹è±¡æœ¬èº«çš„å±æ€§:</p><ul><li>myfn æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œ<code>obj.hasOwnProperty(&#39;myfn&#39;)</code>ä¸º true</li><li>toString() æˆ‘ä»¬ä¸æ˜¯è‡ªå®šä¹‰çš„ï¼Œå´å¯ä»¥ä½¿ç”¨ï¼ŒæŸ¥ä¸€ä¸‹æ˜¯å¦å±äºè‡ªå®šä¹‰å±æ€§ï¼Œ<code>obj.hasOwnProperty(&#39;toString&#39;)</code>ï¼Œç­”æ¡ˆä¸º false</li><li>æ—¢ç„¶ä¸å±äºè‡ªå®šä¹‰å±æ€§ï¼Œé‚£å°±å»è‡ªèº«çš„<code>__proto__</code>å»æ‰¾ï¼Œç„¶åå»åŸå‹å¯¹è±¡ä¸ŠæŸ¥ä¸€ä¸‹ï¼Œ<code>obj.__proto__.hasOwnProperty(&#39;toString&#39;)</code>ï¼Œå“¦ï¼ŒåŸæ¥åœ¨è¿™å„¿</li></ul><p>åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°<code>Array.prototype.concat</code>ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„<code>[].concat</code>ï¼Œ<code>[]</code>ï¼Œå› ä¸º<code>[].__proto__ === Array.prototype</code></p><h3 id="proto-æ˜¯å¯ä¿®æ”¹çš„"><a href="#proto-æ˜¯å¯ä¿®æ”¹çš„" class="headerlink" title="__proto__æ˜¯å¯ä¿®æ”¹çš„"></a><code>__proto__</code>æ˜¯å¯ä¿®æ”¹çš„</h3><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ª<code>addClass()</code>æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.__proto__.addClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">&#125;;</span><br><span class="line">arr.push(<span class="number">4</span>);</span><br><span class="line">arr.addClass(); <span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/19526072/53319708-44e9a900-390e-11e9-9899-6c303f5467aa.png" alt="image"></p><p>ä½†æ˜¯ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œå¦‚ä¸‹é‡å†™ä¹‹åï¼Œå°±æ²¡æœ‰äº†è¯¸å¦‚ pushã€concat ç­‰æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr.__proto__ = &#123;</span><br><span class="line">  addClass: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">arr.push(<span class="number">3</span>); <span class="comment">//Uncaught TypeError: arr.push is not a function</span></span><br></pre></td></tr></table></figure><h3 id="Object-prototypeçš„åŸå‹"><a href="#Object-prototypeçš„åŸå‹" class="headerlink" title="Object.prototypeçš„åŸå‹"></a><code>Object.prototype</code>çš„åŸå‹</h3><p>ä¸‡ç‰©çš†å¯¹è±¡ï¼Œåˆ°æœ€åä¾æ—§æ˜¯å¯¹è±¡ï¼Œæœ€åè¿™ä¸ªä¸œä¸œæ˜¯ä¸ªå•¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•° Person</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹å¯¹è±¡ myfnï¼Œå®ƒçš„ éšå¼åŸå‹ æŒ‡å‘äº†å…¶æ„é€ å‡½æ•°çš„ åŸå‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> myfn = <span class="keyword">new</span> Person();</span><br><span class="line">myfn.__proto__ === Person.prototype; <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‚£æ„é€ å‡½æ•° Person çš„ éšå¼åŸå‹åˆæŒ‡å‘äº†è°å‘¢</span></span><br><span class="line">Person.prototype.__proto__ === <span class="built_in">Object</span>.prototype; <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Functionå‘</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype; <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå‘¢</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">fn.prototype.__proto__ === <span class="built_in">Object</span>.prototype; <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.__proto__ === <span class="literal">null</span>; <span class="comment">//true</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">//"object"</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ª <code>prototype</code>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºå‡ºæ¥çš„å®ä¾‹ï¼ˆå¦‚ myfnï¼‰çš„åŸå‹ï¼ˆå¦‚<code>myfn.__proto__</code>ï¼‰,å³ï¼š<code>myfn.__proto__ === Person.prototype</code></p></li><li><p>æ‰€æœ‰çš„å¯¹è±¡ï¼ˆé™¤ nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ï¼Œæ¯”å¦‚ï¼š<code>myfn.__proto__ === Person.prototype</code></p></li><li><p>åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ ¹æ®ä¸Šæ¡ï¼Œé‚£åŸå‹çš„åŸå‹ï¼Œå°±æ˜¯<code>Object.prototype</code></p></li><li><p>æœ€åçš„ null å¯¹è±¡ï¼Œå¯ä»¥å½“åšæ˜¯ ä»€ä¹ˆéƒ½æ²¡æœ‰</p></li></ul><p>ç›—ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å°±æ›´åŠ æ¸…æ¥šäº†ï¼ˆè“è‰²è¿™æ¡è¡¨ç¤ºçš„æ˜¯åŸå‹é“¾ï¼‰<br><img src="https://user-images.githubusercontent.com/19526072/53319411-64340680-390d-11e9-80b9-4b86736291b2.png" alt="image"></p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://www.kancloud.cn/wangfupeng/zepto-design-srouce/173684" target="_blank" rel="noopener">js åŸå‹é“¾åŸºç¡€</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ </a></li><li><a href="https://www.cnblogs.com/wangfupeng1988/p/3978131.html" target="_blank" rel="noopener">æ·±å…¥ç†è§£ javascript åŸå‹å’Œé—­åŒ…ï¼ˆ3ï¼‰â€”â€”prototype åŸå‹</a></li></ul><h2 id="Zepto-å¯¹è±¡è®¾è®¡"><a href="#Zepto-å¯¹è±¡è®¾è®¡" class="headerlink" title="Zepto å¯¹è±¡è®¾è®¡"></a>Zepto å¯¹è±¡è®¾è®¡</h2><h3 id="ä¸»ä½“è®¾è®¡"><a href="#ä¸»ä½“è®¾è®¡" class="headerlink" title="ä¸»ä½“è®¾è®¡"></a>ä¸»ä½“è®¾è®¡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $,</span><br><span class="line">    zepto = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></span><br><span class="line"></span><br><span class="line">  zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</span><br><span class="line">    dom = dom || [];</span><br><span class="line">    dom.__proto__ = $.fn; <span class="comment">// å…³é”®ä½ç½®</span></span><br><span class="line">    dom.selector = selector || <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">return</span> dom;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dom;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é’ˆå¯¹å‚æ•°æƒ…å†µï¼Œåˆ†åˆ«å¯¹domèµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€ç»ˆè°ƒç”¨ zepto.Z è¿”å›çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> zepto.Z(dom, selector);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zepto.init(selector, context);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é‡Œé¢æœ‰è‹¥å¹²ä¸ªå·¥å…·å‡½æ•°</span></span><br><span class="line">  $.fn = &#123;</span><br><span class="line">    forEach: emptyArray.forEach,</span><br><span class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></span><br><span class="line">    concat: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> $;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.Zepto = Zepto;</span><br><span class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto);</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ¨¡æ‹Ÿ"><a href="#è‡ªå®šä¹‰æ¨¡æ‹Ÿ" class="headerlink" title="è‡ªå®šä¹‰æ¨¡æ‹Ÿ"></a>è‡ªå®šä¹‰æ¨¡æ‹Ÿ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $,</span><br><span class="line">    zepto = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Z</span>(<span class="params">dom, selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i,</span><br><span class="line">      len = dom.length ? dom.length : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; dom.length; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>[i] = dom[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.length = len;</span><br><span class="line">    <span class="keyword">this</span>.selector = selector || <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Z(dom, selector);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> slice = <span class="built_in">Array</span>.prototype.slice;</span><br><span class="line">    <span class="keyword">var</span> dom = slice.call(<span class="built_in">document</span>.querySelectorAll(selector));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> zepto.Z(dom, selector);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> zepto.init(selector);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  $.fn = &#123;</span><br><span class="line">    css: <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"css"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    html: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"html"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Z.prototype = $.fn;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.$ = $;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure><p>æµç¨‹ï¼š<code>$() -&gt; zepto.init() -&gt; zepto.Z() -&gt; new Z() -&gt; Z.prototype = $.fn;</code></p><h3 id="æœ€æ–°ç‰ˆï¼ˆv1-2-0ï¼‰æ¨¡æ‹Ÿ"><a href="#æœ€æ–°ç‰ˆï¼ˆv1-2-0ï¼‰æ¨¡æ‹Ÿ" class="headerlink" title="æœ€æ–°ç‰ˆï¼ˆv1.2.0ï¼‰æ¨¡æ‹Ÿ"></a>æœ€æ–°ç‰ˆï¼ˆv1.2.0ï¼‰æ¨¡æ‹Ÿ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°(IIFEï¼Œç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼)</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global, factory</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// amd è§„èŒƒ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">"function"</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">    define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> factory(global);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    factory(global);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">window</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $;</span><br><span class="line">    <span class="keyword">var</span> zepto = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤§Zæ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Z</span>(<span class="params">dom, selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> i,</span><br><span class="line">        len = dom ? dom.length : <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) <span class="keyword">this</span>[i] = dom[i];</span><br><span class="line">      <span class="keyword">this</span>.length = len;</span><br><span class="line">      <span class="keyword">this</span>.selector = selector || <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// zepto.Z() è¿”å›å¤§Zæ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œæ–¹ä¾¿å®ä¾‹å¯¹è±¡çš„ __proto å°±ä¼šæŒ‡å‘ Z.prototype</span></span><br><span class="line">    zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Z(dom, selector);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£æ DOMï¼Œå¹¶è°ƒç”¨ zepto.Z()</span></span><br><span class="line">    zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è‡ªå®šä¹‰æ¨¡æ‹Ÿæ–¹æ³•ï¼Œæºç å¹¶éè¿™æ ·ç®€å•</span></span><br><span class="line">      <span class="keyword">var</span> slice = <span class="built_in">Array</span>.prototype.slice;</span><br><span class="line">      <span class="keyword">var</span> dom = slice.call(<span class="built_in">document</span>.querySelectorAll(selector));</span><br><span class="line"></span><br><span class="line">      <span class="comment">// create a new Zepto collection from the nodes found</span></span><br><span class="line">      <span class="keyword">return</span> zepto.Z(dom, selector);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ­¥åˆå§‹åŒ–</span></span><br><span class="line">    $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> zepto.init(selector, context);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•å±æ€§</span></span><br><span class="line">    $.fn = &#123;</span><br><span class="line">      <span class="keyword">constructor</span>: zepto.Z, // æ‰‹åŠ¨ç»‘å®š <span class="keyword">constructor</span> å±æ€§</span><br><span class="line">      length: 0,</span><br><span class="line">      push: "push method",</span><br><span class="line">      css: function() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"css"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;  <span class="comment">// è¿”å› thisï¼Œå¯ä»¥é“¾å¼è°ƒç”¨</span></span><br><span class="line">      &#125;,</span><br><span class="line">      html: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"html"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    $.fn.on = <span class="function"><span class="keyword">function</span>(<span class="params">event, data, callback</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"on method"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    $.fn.off = <span class="function"><span class="keyword">function</span>(<span class="params">event, data, callback</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"off method"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    $.fn.bind = <span class="function"><span class="keyword">function</span>(<span class="params">event, data, callback</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.on(event, data, callback);</span><br><span class="line">    &#125;;</span><br><span class="line">    $.fn.unbind = <span class="function"><span class="keyword">function</span>(<span class="params">event, callback</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.off(event, callback);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€ç»ˆçš„æ–¹æ³•å±æ€§ç­‰éƒ½æŒ‡å‘äº† $.fnï¼Œè¿™é‡Œå°±æ˜¯åŸå‹çš„å…³é”®ä½¿ç”¨</span></span><br><span class="line">    zepto.Z.prototype = Z.prototype = $.fn;</span><br><span class="line"></span><br><span class="line">    $.zepto = zepto;</span><br><span class="line">    <span class="keyword">return</span> $;</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.Zepto = Zepto;</span><br><span class="line">  <span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>amd è§„èŒƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global, factory</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">"function"</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">    define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> factory(global);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    factory(global);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">window</span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure><h3 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h3><ul><li><a href="https://www.imooc.com/learn/745" target="_blank" rel="noopener">zepto è®¾è®¡å’Œæºç åˆ†æ</a> - è§†é¢‘</li><li><a href="http://www.kancloud.cn/wangfupeng/zepto-design-srouce/173680" target="_blank" rel="noopener">zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zepto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AJAX è¯·æ±‚</title>
      <link href="/2020/01/07/ajax/"/>
      <url>/2020/01/07/ajax/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å…³äº http è¯·æ±‚çš„å‡ ç§æ–¹å¼</p></blockquote><a id="more"></a><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><p>å…·ä½“æ¥è¯´ï¼ŒAJAX åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li>åˆ›å»º XMLHttpRequest å®ä¾‹</li><li>å‘å‡º HTTP è¯·æ±‚</li><li>æ¥æ”¶æœåŠ¡å™¨ä¼ å›çš„æ•°æ®</li><li>æ›´æ–°ç½‘é¡µæ•°æ®</li></ul><h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MYTHOD = <span class="string">"GET"</span>;</span><br><span class="line"><span class="keyword">const</span> URL =</span><br><span class="line">  <span class="string">"https://api.github.com/search/repositories?q=javascript&amp;sort=stars"</span>;</span><br><span class="line"><span class="keyword">let</span> xhr = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤„ç†ä½ç‰ˆæœ¬IEä¸å…¼å®¹é—®é¢˜</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">  xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œç›‘å¬é€šä¿¡çŠ¶æ€ï¼ˆreadyStateå±æ€§ï¼‰çš„å˜åŒ–</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•è·é”™è¯¯</span></span><br><span class="line">xhr.onerror = <span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(<span class="string">"Error: "</span>, xhr.statusText);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å‡º HTTP è¯·æ±‚</span></span><br><span class="line">xhr.open(MYTHOD, URL, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¤´ä¿¡æ¯"><a href="#è®¾ç½®å¤´ä¿¡æ¯" class="headerlink" title="è®¾ç½®å¤´ä¿¡æ¯"></a>è®¾ç½®å¤´ä¿¡æ¯</h2><p>è¯¥æ–¹æ³•å¿…é¡»åœ¨ open()ä¹‹åã€send()ä¹‹å‰è°ƒç”¨ã€‚å¦‚æœè¯¥æ–¹æ³•å¤šæ¬¡è°ƒç”¨ï¼Œè®¾å®šåŒä¸€ä¸ªå­—æ®µï¼Œåˆ™æ¯ä¸€æ¬¡è°ƒç”¨çš„å€¼ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„å€¼å‘é€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">"Content-Length"</span>, <span class="built_in">JSON</span>.stringify(data).length);</span><br><span class="line">xhr.send(<span class="built_in">JSON</span>.stringify(data));</span><br></pre></td></tr></table></figure><h2 id="Ajax-Promise"><a href="#Ajax-Promise" class="headerlink" title="Ajax+Promise"></a>Ajax+Promise</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ajax = <span class="function">(<span class="params">&#123; method = <span class="string">"GET"</span>, path, body, headers &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//è¿›è¡ŒPromiseå°è£…</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">    request.open(method, path, <span class="literal">true</span>); <span class="comment">//é…ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (method == <span class="string">"GET"</span>) &#123;</span><br><span class="line">      request.send(<span class="literal">null</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> headers) &#123;</span><br><span class="line">        <span class="comment">//éå†header,è®¾ç½®å“åº”å¤´</span></span><br><span class="line">        <span class="keyword">let</span> value = headers[key];</span><br><span class="line">        request.setRequestHeader(key, value);</span><br><span class="line">      &#125;</span><br><span class="line">      request.send(body);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (request.status &gt;= <span class="number">200</span> &amp;&amp; request.status &lt; <span class="number">400</span>) &#123;</span><br><span class="line">          resolve.call(<span class="literal">undefined</span>, request.responseText);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (request.status &gt;= <span class="number">400</span>) &#123;</span><br><span class="line">          reject.call(<span class="literal">undefined</span>, request);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨ajax</span></span><br><span class="line">ajax(&#123;</span><br><span class="line">  method: <span class="string">"get"</span>,</span><br><span class="line">  path: <span class="string">"https://api.github.com/search/repositories?q=javascript&amp;sort=stars"</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">"content-type"</span>: <span class="string">"application/json"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).then(</span><br><span class="line">  responseText =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(responseText);</span><br><span class="line">  &#125;,</span><br><span class="line">  request =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(request);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="jQuery-ä½¿ç”¨"><a href="#jQuery-ä½¿ç”¨" class="headerlink" title="jQuery ä½¿ç”¨"></a>jQuery ä½¿ç”¨</h2><p>get æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª deferred å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> URL =</span><br><span class="line">  <span class="string">"https://api.github.com/search/repositories?q=javascript&amp;sort=stars"</span>;</span><br><span class="line"><span class="keyword">let</span> request = $.get(URL);</span><br><span class="line">request</span><br><span class="line">  .done(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;)</span><br><span class="line">  .fail(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">let</span> request = $.ajax(&#123;</span><br><span class="line">  url: URL,</span><br><span class="line">  type: <span class="string">"GET"</span></span><br><span class="line">&#125;);</span><br><span class="line">request.done(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data)).fail(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ promiseï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">      url: <span class="string">"https://api.github.com/search/repositories?q=javascript&amp;sort=stars"</span>,</span><br><span class="line">      type: <span class="string">"GET"</span>,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">        resolve(data);</span><br><span class="line">      &#125;,</span><br><span class="line">      error: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        resolve(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getData()</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h2 id="Fetch-å‡½æ•°"><a href="#Fetch-å‡½æ•°" class="headerlink" title="Fetch å‡½æ•°"></a>Fetch å‡½æ•°</h2><p>Fetch æä¾›äº† Request å’Œ Response å¯¹è±¡ï¼ˆä»¥åŠä¸ç½‘ç»œè¯·æ±‚æœ‰å…³çš„å…¶ä»–å†…å®¹ï¼‰çš„ä¸€èˆ¬å®šä¹‰ã€‚</p><p>Fetch API æä¾›äº† fetch() æ–¹æ³•ï¼Œå®ƒè¢«å®šä¹‰åœ¨ BOM çš„ window å¯¹è±¡ä¸­ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å‘èµ·å¯¹è¿œç¨‹èµ„æºçš„è¯·æ±‚ã€‚</p><p>fetch() æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè®©ä½ èƒ½å¤Ÿå¯¹è¯·æ±‚çš„è¿”å›ç»“æœè¿›è¡Œæ£€ç´¢ã€‚</p><p>fetch çš„é…ç½®ï¼š</p><ul><li><code>Promise fetch(String url [, Object options])</code>;</li><li><code>Promise fetch(Request req [, Object options])</code>;</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> URL = <span class="string">'https://api.github.com/search/repositories?q=javascript&amp;sort=stars'</span>;</span><br><span class="line"><span class="keyword">let</span> req = <span class="keyword">new</span> Request(URL, &#123; <span class="attr">method</span>: <span class="string">"GET"</span>, <span class="attr">cache</span>: <span class="string">"reload"</span> &#125;);</span><br><span class="line">fetch(req)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response.json();</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">json</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(json);</span><br><span class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>fetch å’Œ ajax çš„ä¸»è¦åŒºåˆ«ï¼š</p><ul><li>fetch()è¿”å›çš„ promise å°†ä¸ä¼šæ‹’ç» http çš„é”™è¯¯çŠ¶æ€ï¼Œå³ä½¿å“åº”æ˜¯ä¸€ä¸ª HTTP 404 æˆ–è€… 500</li><li>åœ¨é»˜è®¤æƒ…å†µä¸‹ fetch ä¸ä¼šæ¥å—æˆ–è€…å‘é€ cookies</li></ul><h2 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h2><p>åŸºæœ¬ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> URL =</span><br><span class="line">  <span class="string">"https://api.github.com/search/repositories?q=javascript&amp;sort=stars"</span>;</span><br><span class="line">axios</span><br><span class="line">  .get(URL)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ <code>async/await</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> axios.get(URL);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">getData().then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data));</span><br></pre></td></tr></table></figure><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><ul><li><a href="http://javascript.ruanyifeng.com/bom/ajax.html" target="_blank" rel="noopener">AJAX â€“ JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹(alpha)</a></li><li><a href="https://segmentfault.com/a/1190000018935873?utm_source=tag-newest" target="_blank" rel="noopener">åŸç”Ÿ javaScript å®ç° Ajax å’Œ jQuery å®ç° Ajax</a></li><li><a href="https://segmentfault.com/a/1190000015938472" target="_blank" rel="noopener">å›è°ƒã€ä½¿ç”¨ Promise å°è£… ajax()ã€Promise å…¥é—¨</a></li><li><a href="https://www.jianshu.com/p/7762515f8d1a" target="_blank" rel="noopener">Fetch</a></li><li><a href="http://www.axios-js.com/" target="_blank" rel="noopener">axios-æ˜“ç”¨ã€ç®€æ´ä¸”é«˜æ•ˆçš„ http åº“</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> JavaScript </tag>
            
            <tag> Ajax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript ç±»å‹åˆ¤æ–­</title>
      <link href="/2020/01/07/code-typeof/"/>
      <url>/2020/01/07/code-typeof/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å­¦ä¹ <a href="https://github.com/mqyqingfeng/Blog/issues/28" target="_blank" rel="noopener">JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š)</a>çš„æ–‡ç« æ€»ç»“ï¼Œå…¶å®å°±æ˜¯ç…§æŠ„ï¼Œå“ˆå“ˆå“ˆå“ˆâ€¦é¡ºä¾¿å‡ ä¸€å¥æ–‡ç« é‡Œçš„è¯ï¼šæ‰€æœ‰è¿™äº›ç‚¹ï¼Œéƒ½å¿…é¡»è„šè¸å®åœ°åœ¨å…·ä½“åº”ç”¨åœºæ™¯ä¸‹å»åˆ†æã€å»é€‰æ‹©ï¼Œè¦è®©åœºæ™¯è¯´è¯ã€‚</p></blockquote><a id="more"></a><h2 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h2><p>æœ€æ–°çš„ ECMAScript æ ‡å‡†å®šä¹‰äº† 8 ç§æ•°æ®ç±»å‹ï¼š</p><p>7 ç§åŸå§‹ç±»å‹:</p><ul><li>Boolean</li><li>Null</li><li>Undefined</li><li>Number</li><li>String</li><li>Symbol</li><li>BigInt</li></ul><p>å’Œ Object</p><p>ä½¿ç”¨ typeof æ£€æµ‹ç±»å‹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Number"</span>; <span class="comment">// number</span></span><br><span class="line"><span class="string">"String"</span>; <span class="comment">// string</span></span><br><span class="line"><span class="string">"Boolean"</span>; <span class="comment">// boolean</span></span><br><span class="line"><span class="string">"Undefined"</span>; <span class="comment">// undefined</span></span><br><span class="line"><span class="string">"Null"</span>; <span class="comment">// object</span></span><br><span class="line"><span class="string">"Symbol"</span>; <span class="comment">// symbol</span></span><br><span class="line"><span class="string">"BigInt"</span>; <span class="comment">// bigint</span></span><br><span class="line"><span class="string">"Object"</span>; <span class="comment">// object</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ typeof èƒ½æ£€æµ‹å‡ºä¸ƒç§åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä½†æ˜¯ï¼Œé™¤æ­¤ä¹‹å¤– Object ä¸‹è¿˜æœ‰å¾ˆå¤šç»†åˆ†çš„ç±»å‹å‘ï¼Œå¦‚ Arrayã€Functionã€Dateã€RegExpã€Error ç­‰ã€‚</p><p>å¦‚æœç”¨ typeof å»æ£€æµ‹è¿™äº›ç±»å‹ï¼Œè¿”å›çš„éƒ½æ˜¯ objectï¼Œé™¤äº† Functionï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> error = <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> date); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> error); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn); <span class="comment">// function</span></span><br></pre></td></tr></table></figure><h2 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString"></a>Object.prototype.toString</h2><p>æ‰€æœ‰ï¼Œè¯¥å¦‚ä½•åŒºåˆ† object å‘¢ï¼Ÿæˆ‘ä»¬ç”¨<code>Object.prototype.toString</code>ã€‚</p><p>è§„èŒƒï¼šå½“ toString æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¸‹é¢çš„æ­¥éª¤ä¼šè¢«æ‰§è¡Œï¼š</p><ul><li>å¦‚æœ this å€¼æ˜¯ undefinedï¼Œå°±è¿”å› <code>[object Undefined]</code></li><li>å¦‚æœ this çš„å€¼æ˜¯ nullï¼Œå°±è¿”å› <code>[object Null]</code></li><li>è®© O æˆä¸º <code>ToObject(this)</code> çš„ç»“æœ</li><li>è®© class æˆä¸º O çš„å†…éƒ¨å±æ€§ <code>[[Class]]</code> çš„å€¼</li><li>æœ€åè¿”å›ç”± <code>&quot;[object &quot;</code> å’Œ <code>class</code> å’Œ <code>&quot;]&quot;</code> ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆçš„å­—ç¬¦ä¸²</li></ul><p>é€šè¿‡è§„èŒƒï¼Œæˆ‘ä»¬è‡³å°‘çŸ¥é“äº†è°ƒç”¨ <code>Object.prototype.toString</code> ä¼šè¿”å›ä¸€ä¸ªç”± <code>&quot;[object &quot; å’Œ class å’Œ &quot;]&quot;</code> ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè€Œ class æ˜¯è¦åˆ¤æ–­çš„å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚</p><p>æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°è¿™ä¸ª class å€¼å°±æ˜¯è¯†åˆ«å¯¹è±¡ç±»å‹çš„å…³é”®ï¼</p><p>æ­£æ˜¯å› ä¸ºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>Object.prototype.toString</code> æ–¹æ³•è¯†åˆ«å‡ºæ›´å¤šç±»å‹ï¼</p><p>å…ˆçœ‹ä¸‹å¸¸è§çš„ 15 ç§ï¼ˆES6 æ–°å¢ï¼šSymbol Set Mapï¼Œè¿˜æœ‰ BigIntï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> number = <span class="number">1</span>; <span class="comment">// [object Number]</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"123"</span>; <span class="comment">// [object String]</span></span><br><span class="line"><span class="keyword">var</span> boolean = <span class="literal">true</span>; <span class="comment">// [object Boolean]</span></span><br><span class="line"><span class="keyword">var</span> und = <span class="literal">undefined</span>; <span class="comment">// [object Undefined]</span></span><br><span class="line"><span class="keyword">var</span> nul = <span class="literal">null</span>; <span class="comment">// [object Null]</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;; <span class="comment">// [object Object]</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// [object Array]</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">// [object Date]</span></span><br><span class="line"><span class="keyword">var</span> error = <span class="keyword">new</span> <span class="built_in">Error</span>(); <span class="comment">// [object Error]</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/a/g</span>; <span class="comment">// [object RegExp]</span></span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// [object Function]</span></span><br><span class="line"><span class="keyword">var</span> symb = <span class="built_in">Symbol</span>(<span class="string">"test"</span>); <span class="comment">// [object Symbol]</span></span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>(); <span class="comment">// [object Set]</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">// [object Map]</span></span><br><span class="line"><span class="keyword">var</span> bigI = BigInt(<span class="number">1</span>); <span class="comment">// [object BigInt]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">arguments</span>[i]));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkType(</span><br><span class="line">  number,</span><br><span class="line">  string,</span><br><span class="line">  boolean,</span><br><span class="line">  und,</span><br><span class="line">  nul,</span><br><span class="line">  obj,</span><br><span class="line">  array,</span><br><span class="line">  date,</span><br><span class="line">  error,</span><br><span class="line">  reg,</span><br><span class="line">  func,</span><br><span class="line">  symb,</span><br><span class="line">  set,</span><br><span class="line">  map,</span><br><span class="line">  bigI</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>é™¤äº†ä»¥ä¸Š 15 ç§ï¼Œè¿˜æœ‰ä»¥ä¸‹ 3 ç§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Math</span>)); <span class="comment">// [object Math]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">JSON</span>)); <span class="comment">// [object JSON]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">arguments</span>)); <span class="comment">// [object Arguments]</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">fn();</span><br></pre></td></tr></table></figure><h2 id="type-API"><a href="#type-API" class="headerlink" title="type API"></a>type API</h2><p>å†™ä¸€ä¸ª type å‡½æ•°èƒ½æ£€æµ‹å„ç§ç±»å‹çš„å€¼ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œå°±ä½¿ç”¨ typeofï¼Œå¼•ç”¨ç±»å‹å°±ä½¿ç”¨ toStringã€‚</p><p>æ­¤å¤–é‰´äº typeof çš„ç»“æœæ˜¯å°å†™ï¼Œæˆ‘ä¹Ÿå¸Œæœ›æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯å°å†™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> class2type = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="string">"Boolean Number String Function Array Date RegExp Object Error Null Undefined"</span></span><br><span class="line">  .split(<span class="string">" "</span>)</span><br><span class="line">  .map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    class2type[<span class="string">"[object "</span> + item + <span class="string">"]"</span>] = item.toLowerCase(); <span class="comment">// e.g. '[object Boolean]': 'boolean'</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (obj == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj + <span class="string">""</span>; <span class="comment">// IE6</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">"object"</span> || <span class="keyword">typeof</span> obj === <span class="string">"function"</span></span><br><span class="line">    ? class2type[<span class="built_in">Object</span>.prototype.toString.call(obj)] || <span class="string">"object"</span></span><br><span class="line">    : <span class="keyword">typeof</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>class2type[Object.prototype.toString.call(obj)] || &quot;object&quot;</code>çš„ objectï¼Œä¸ºäº† ES6 æ–°å¢çš„ Symbolã€Mapã€Set ç­‰ç±»å‹è¿”å› objectã€‚</p><p>å½“ç„¶ä¹Ÿå¯ä»¥æ·»åŠ è¿›å»ï¼Œè¿”å›çš„å°±æ˜¯å¯¹åº”çš„ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> class2type = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="string">"Boolean Number String Function Array Date RegExp Object Error Null Undefined Symbol Set Map BigInt"</span></span><br><span class="line">  .split(<span class="string">" "</span>)</span><br><span class="line">  .map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    class2type[<span class="string">"[object "</span> + item + <span class="string">"]"</span>] = item.toLowerCase();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (obj == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj + <span class="string">""</span>; <span class="comment">// IE6</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">"object"</span> || <span class="keyword">typeof</span> obj === <span class="string">"function"</span></span><br><span class="line">    ? class2type[<span class="built_in">Object</span>.prototype.toString.call(obj)]</span><br><span class="line">    : <span class="keyword">typeof</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="isFunction"><a href="#isFunction" class="headerlink" title="isFunction"></a>isFunction</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> type(obj) === <span class="string">"function"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="isArray"><a href="#isArray" class="headerlink" title="isArray"></a>isArray</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isArray =</span><br><span class="line">  <span class="built_in">Array</span>.isArray ||</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> type(obj) === <span class="string">"array"</span>;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><h2 id="plainObject"><a href="#plainObject" class="headerlink" title="plainObject"></a>plainObject</h2><p><code>plainObject</code> æ¥è‡ªäº jQueryï¼Œå¯ä»¥ç¿»è¯‘æˆçº¯ç²¹çš„å¯¹è±¡ï¼Œæ‰€è°“â€çº¯ç²¹çš„å¯¹è±¡â€ï¼Œå°±æ˜¯è¯¥å¯¹è±¡æ˜¯é€šè¿‡ â€œ{}â€ æˆ– â€œnew Objectâ€ åˆ›å»ºçš„ï¼Œè¯¥å¯¹è±¡å«æœ‰é›¶ä¸ªæˆ–è€…å¤šä¸ªé”®å€¼å¯¹ã€‚</p><p>ä¹‹æ‰€ä»¥è¦åˆ¤æ–­æ˜¯ä¸æ˜¯ <code>plainObject</code>ï¼Œæ˜¯ä¸ºäº†è·Ÿå…¶ä»–çš„ JavaScript å¯¹è±¡å¦‚ nullï¼Œæ•°ç»„ï¼Œå®¿ä¸»å¯¹è±¡ï¼ˆdocumentsï¼‰ç­‰ä½œåŒºåˆ†ï¼Œå› ä¸ºè¿™äº›ç”¨ typeof éƒ½ä¼šè¿”å› objectã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ŠèŠ‚ä¸­å†™ type å‡½æ•°æ—¶ï¼Œç”¨æ¥å­˜æ”¾ toString æ˜ å°„ç»“æœçš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> class2type = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äº Object.prototype.toString</span></span><br><span class="line"><span class="keyword">var</span> toString = class2type.toString;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äº Object.prototype.hasOwnProperty</span></span><br><span class="line"><span class="keyword">var</span> hasOwn = class2type.hasOwnProperty;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> proto, Ctor;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ’é™¤æ‰æ˜æ˜¾ä¸æ˜¯objçš„ä»¥åŠä¸€äº›å®¿ä¸»å¯¹è±¡å¦‚Window</span></span><br><span class="line">  <span class="keyword">if</span> (!obj || toString.call(obj) !== <span class="string">"[object Object]"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * getPrototypeOf es5 æ–¹æ³•ï¼Œè·å– obj çš„åŸå‹</span></span><br><span class="line"><span class="comment">   * ä»¥ new Object åˆ›å»ºçš„å¯¹è±¡ä¸ºä¾‹çš„è¯</span></span><br><span class="line"><span class="comment">   * obj.__proto__ === Object.prototype</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  proto = <span class="built_in">Object</span>.getPrototypeOf(obj);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ²¡æœ‰åŸå‹çš„å¯¹è±¡æ˜¯çº¯ç²¹çš„ï¼ŒObject.create(null) å°±åœ¨è¿™é‡Œè¿”å› true</span></span><br><span class="line">  <span class="keyword">if</span> (!proto) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ä»¥ä¸‹åˆ¤æ–­é€šè¿‡ new Object æ–¹å¼åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">   * åˆ¤æ–­ proto æ˜¯å¦æœ‰ constructor å±æ€§ï¼Œå¦‚æœæœ‰å°±è®© Ctor çš„å€¼ä¸º proto.constructor</span></span><br><span class="line"><span class="comment">   * å¦‚æœæ˜¯ Object å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼ŒCtor åœ¨è¿™é‡Œå°±ç­‰äº Object æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  Ctor = hasOwn.call(proto, <span class="string">"constructor"</span>) &amp;&amp; proto.constructor;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œåˆ¤æ–­ Ctor æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯ Object æ„é€ å‡½æ•°ï¼Œç”¨äºåŒºåˆ†è‡ªå®šä¹‰æ„é€ å‡½æ•°å’Œ Object æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="keyword">typeof</span> Ctor === <span class="string">"function"</span> &amp;&amp;</span><br><span class="line">    hasOwn.toString.call(Ctor) === hasOwn.toString.call(<span class="built_in">Object</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="EmptyObject"><a href="#EmptyObject" class="headerlink" title="EmptyObject"></a>EmptyObject</h2><p>jQuery æä¾›äº† <code>isEmptyObject</code> æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç©ºå¯¹è±¡ï¼Œä»£ç ç®€å•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmptyObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰å±æ€§ï¼Œfor å¾ªç¯ä¸€æ—¦æ‰§è¡Œï¼Œå°±è¯´æ˜æœ‰å±æ€§ï¼Œæœ‰å±æ€§å°±ä¼šè¿”å› false</span></span><br><span class="line">  <span class="keyword">for</span> (name <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject(&#123;&#125;)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject([])); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject(<span class="literal">null</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject(<span class="literal">undefined</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject(<span class="number">1</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject(<span class="string">""</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isEmptyObject(<span class="literal">true</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="Window-å¯¹è±¡"><a href="#Window-å¯¹è±¡" class="headerlink" title="Window å¯¹è±¡"></a>Window å¯¹è±¡</h2><p>Window å¯¹è±¡ä½œä¸ºå®¢æˆ·ç«¯ JavaScript çš„å…¨å±€å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ª window å±æ€§æŒ‡å‘è‡ªèº«ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§åˆ¤æ–­æ˜¯å¦æ˜¯ Window å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isWindow</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj !== <span class="literal">null</span> &amp;&amp; obj === obj.window;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="isArrayLike"><a href="#isArrayLike" class="headerlink" title="isArrayLike"></a>isArrayLike</h2><p>å¦‚æœ isArrayLike è¿”å› trueï¼Œè‡³å°‘è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼š</p><ul><li>æ˜¯æ•°ç»„</li><li>é•¿åº¦ä¸º 0</li><li>lengths å±æ€§æ˜¯å¤§äº 0 çš„æ•°å­—ç±»å‹ï¼Œå¹¶ä¸” <code>obj[length - 1]</code>å¿…é¡»å­˜åœ¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArrayLike</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// obj å¿…é¡»æœ‰ lengthå±æ€§</span></span><br><span class="line">  <span class="keyword">var</span> length = !!obj &amp;&amp; <span class="string">"length"</span> <span class="keyword">in</span> obj &amp;&amp; obj.length;</span><br><span class="line">  <span class="keyword">var</span> typeRes = type(obj);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ’é™¤æ‰å‡½æ•°å’Œ Window å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (typeRes === <span class="string">"function"</span> || isWindow(obj)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    typeRes === <span class="string">"array"</span> ||</span><br><span class="line">    length === <span class="number">0</span> ||</span><br><span class="line">    (<span class="keyword">typeof</span> length === <span class="string">"number"</span> &amp;&amp; length &gt; <span class="number">0</span> &amp;&amp; length - <span class="number">1</span> <span class="keyword">in</span> obj)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="isElement"><a href="#isElement" class="headerlink" title="isElement"></a>isElement</h2><p>åˆ¤æ–­æ˜¯ä¸æ˜¯ DOM å…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isElement</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !!(obj &amp;&amp; obj.nodeType === <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(isElement(div)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isElement(<span class="string">""</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="åŸæ–‡åœ°å€"><a href="#åŸæ–‡åœ°å€" class="headerlink" title="åŸæ–‡åœ°å€"></a>åŸæ–‡åœ°å€</h2><ul><li><a href="https://github.com/mqyqingfeng/Blog/issues/28" target="_blank" rel="noopener">JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š)</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/30" target="_blank" rel="noopener">JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸‹)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript æ•°ç»„å»é‡çš„å‡ ç§æ–¹å¼</title>
      <link href="/2020/01/07/code-unique/"/>
      <url>/2020/01/07/code-unique/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•°ç»„å»é‡ï¼Œè€ç”Ÿå¸¸è°ˆï¼ŒæŠŠå­¦ä¹ åˆ°çš„å¤šç§æ–¹å¼è¿›è¡Œå½’çº³æ€»ç»“</p></blockquote><a id="more"></a><h2 id="åŒå±‚å¾ªç¯"><a href="#åŒå±‚å¾ªç¯" class="headerlink" title="åŒå±‚å¾ªç¯"></a>åŒå±‚å¾ªç¯</h2><p>ç¬¬ä¸€ç§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, arrLen = arr.length; i &lt; arrLen; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, resLen = result.length; j &lt; resLen; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] === result[j]) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j === result.length) &#123;</span><br><span class="line">      result.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arrary = [].concat(arr); <span class="comment">// é¿å…ä¿®æ”¹åŸæ•°ç»„ï¼Œå­˜ä¸ªå‰¯æœ¬</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arrary.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arrary[i] === arrary[j]) &#123;</span><br><span class="line">        arrary.splice(j, <span class="number">1</span>); <span class="comment">// splice() ä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨ä¿®æ”¹é•¿åº¦</span></span><br><span class="line">        len--;</span><br><span class="line">        j--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arrary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="indexOf-æ–¹æ³•"><a href="#indexOf-æ–¹æ³•" class="headerlink" title="indexOf æ–¹æ³•"></a>indexOf æ–¹æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> current = arr[i];</span><br><span class="line">    <span class="keyword">if</span> (result.indexOf(current) === <span class="number">-1</span>) &#123;</span><br><span class="line">      result.push(current);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="filter-indexOf-æ–¹æ³•"><a href="#filter-indexOf-æ–¹æ³•" class="headerlink" title="filter + indexOf æ–¹æ³•"></a>filter + indexOf æ–¹æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.indexOf(item) === index;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.filter(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> arr.indexOf(item) === index);</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å¯¹ä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„å»é‡ï¼Œè¿™ç§æ–¹æ³•æ•ˆç‡è‚¯å®šé«˜äºä½¿ç”¨ indexOfï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .concat()</span><br><span class="line">    .sort()</span><br><span class="line">    .filter(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> !index || item !== arr[index - <span class="number">1</span>]);</span><br></pre></td></tr></table></figure><p>ä¸è¿‡å¯¹äºä¸‹é¢è¿™ç§å°±ä¼šå¤±æ•ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="string">"1"</span>, <span class="number">1</span>, <span class="string">"1"</span>];</span><br><span class="line"><span class="comment">//è¾“å‡º [ 1, '1', 1, '1', 2, 3 ]</span></span><br></pre></td></tr></table></figure><h2 id="Object-é”®å€¼å¯¹"><a href="#Object-é”®å€¼å¯¹" class="headerlink" title="Object é”®å€¼å¯¹"></a>Object é”®å€¼å¯¹</h2><p>åˆ©ç”¨ä¸€ä¸ªç©ºçš„ Object å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„çš„å€¼å­˜æˆ Object çš„ key å€¼ï¼Œæ¯”å¦‚ <code>Object[value1] = true</code>ï¼Œåœ¨åˆ¤æ–­å¦ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œå¦‚æœ <code>Object[value2]</code>å­˜åœ¨çš„è¯ï¼Œå°±è¯´æ˜è¯¥å€¼æ˜¯é‡å¤çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> arr.filter(<span class="function"><span class="params">item</span> =&gt;</span></span><br><span class="line">    obj.hasOwnProperty(<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item))</span><br><span class="line">      ? <span class="literal">false</span></span><br><span class="line">      : (obj[<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)] = <span class="literal">true</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li><code>typeof item + item</code> æ˜¯ä¸ºäº†åŒºåˆ† 1 è¿˜æ˜¯ â€˜1â€™</li><li><code>typeof item + JSON.stringify(item)</code> æ˜¯ä¸ºäº†åŒºåˆ† <code>{value: 1}, {value: 1}</code></li></ol><p>å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="string">"1"</span>, &#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">1</span> &#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> getObjType = <span class="function"><span class="params">arr</span> =&gt;</span> arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item));</span><br><span class="line"></span><br><span class="line">getObjType(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["number1", "string"1"", "object&#123;"value":1&#125;", "object&#123;"value":1&#125;"]</span></span><br></pre></td></tr></table></figure><h2 id="Set-é›†åˆ-å’Œ-Map-é›†åˆ"><a href="#Set-é›†åˆ-å’Œ-Map-é›†åˆ" class="headerlink" title="Set é›†åˆ å’Œ Map é›†åˆ"></a>Set é›†åˆ å’Œ Map é›†åˆ</h2><p>ES6 å»é‡æ–¹å¼å·²ç»æ˜¯éå¸¸çš„ç²¾ç®€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Set</span></span><br><span class="line"><span class="keyword">let</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> [...new <span class="built_in">Set</span>(arr)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map</span></span><br><span class="line"><span class="keyword">let</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> seen = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">return</span> arr.filter(<span class="function"><span class="params">item</span> =&gt;</span> !seen.has(item) &amp;&amp; seen.set(item, <span class="literal">true</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="https://github.com/mqyqingfeng/Blog/issues/27" target="_blank" rel="noopener">JavaScript ä¸“é¢˜ä¹‹æ•°ç»„å»é‡</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sass æ—¥å¸¸ä½¿ç”¨æ€»ç»“</title>
      <link href="/2019/12/31/css-sass/"/>
      <url>/2019/12/31/css-sass/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸–ç•Œä¸Šæœ€æˆç†Ÿã€æœ€ç¨³å®šã€æœ€å¼ºå¤§çš„ä¸“ä¸šçº§CSSæ‰©å±•è¯­è¨€ï¼ - Sass å®˜ç½‘<br>ç®€å•æ±‡æ€»ä¸€ä¸‹ sass çš„æ—¥å¸¸ä½¿ç”¨ï¼Œåˆç®€å•åœ°çœ‹äº†ä¸€ä¸‹ Bootstrap@4 é‡Œåº”ç”¨çš„ä¸€ä¸ª Demoã€‚</p></blockquote><a id="more"></a><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æˆ‘æœ¬åœ°ç»“åˆ gulp+sass è‡ªåŠ¨åŒ–å·¥å…·ä½¿ç”¨ï¼Œä¸»è¦å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass gulp-sass --save-dev</span><br></pre></td></tr></table></figure><p><code>gulpfile.js</code> æ–‡ä»¶ä¸»è¦é…ç½®å¦‚ä¸‹ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ<a href="https://github.com/yangtao2o/gulp-project/tree/master/src/mygulp" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; src, dest, watch &#125; = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> sass = <span class="built_in">require</span>(<span class="string">"gulp-sass"</span>);</span><br><span class="line">sass.compiler = <span class="built_in">require</span>(<span class="string">"node-sass"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scss</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> src(scssGlobSrc)</span><br><span class="line">    .pipe(sass(&#123; <span class="attr">outputStyle</span>: <span class="string">"expanded"</span> &#125;).on(<span class="string">"error"</span>, sass.logError))</span><br><span class="line">    .pipe(dest(<span class="string">"dist/sass"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.scss = scss;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ï¼š<code>gulp scss</code>ã€‚</p><ul><li><a href="https://www.sass.hk/install/" target="_blank" rel="noopener">å¦‚ä½•å®‰è£… Sass</a></li></ul><h2 id="å››ç§ç¼–è¯‘æ’ç‰ˆ"><a href="#å››ç§ç¼–è¯‘æ’ç‰ˆ" class="headerlink" title="å››ç§ç¼–è¯‘æ’ç‰ˆ"></a>å››ç§ç¼–è¯‘æ’ç‰ˆ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æœªç¼–è¯‘æ ·å¼*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  &amp;-title &#123;</span><br><span class="line">    <span class="selector-tag">height</span>: 30<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">line-height</span>: 30<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>nested ç¼–è¯‘æ’ç‰ˆæ ¼å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å‘½ä»¤è¡Œå†…å®¹*/</span></span><br><span class="line"><span class="selector-tag">sass</span> <span class="selector-tag">style</span><span class="selector-class">.scss</span><span class="selector-pseudo">:style.css</span> <span class="selector-tag">--style</span> <span class="selector-tag">nested</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç¼–è¯‘è¿‡åæ ·å¼*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-title</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>expanded ç¼–è¯‘æ’ç‰ˆæ ¼å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å‘½ä»¤è¡Œå†…å®¹*/</span></span><br><span class="line"><span class="selector-tag">sass</span> <span class="selector-tag">style</span><span class="selector-class">.scss</span><span class="selector-pseudo">:style.css</span> <span class="selector-tag">--style</span> <span class="selector-tag">expanded</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç¼–è¯‘è¿‡åæ ·å¼*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-title</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>compact ç¼–è¯‘æ’ç‰ˆæ ¼å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å‘½ä»¤è¡Œå†…å®¹*/</span></span><br><span class="line"><span class="selector-tag">sass</span> <span class="selector-tag">style</span><span class="selector-class">.scss</span><span class="selector-pseudo">:style.css</span> <span class="selector-tag">--style</span> <span class="selector-tag">compact</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç¼–è¯‘è¿‡åæ ·å¼*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-title</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>compressed ç¼–è¯‘æ’ç‰ˆæ ¼å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å‘½ä»¤è¡Œå†…å®¹*/</span></span><br><span class="line"><span class="selector-tag">sass</span> <span class="selector-tag">style</span><span class="selector-class">.scss</span><span class="selector-pseudo">:style.css</span> <span class="selector-tag">--style</span> <span class="selector-tag">compressed</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç¼–è¯‘è¿‡åæ ·å¼*/</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-title</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é™é»˜æ³¨é‡Š"><a href="#é™é»˜æ³¨é‡Š" class="headerlink" title="é™é»˜æ³¨é‡Š"></a>é™é»˜æ³¨é‡Š</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™ç§æ³¨é‡Šå†…å®¹ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„cssæ–‡ä»¶ä¸­</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="comment">/* è¿™ç§æ³¨é‡Šå†…å®¹ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„cssæ–‡ä»¶ä¸­ */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="comment">/* è¿™ç§æ³¨é‡Šå†…å®¹ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„cssæ–‡ä»¶ä¸­ */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨å˜é‡"><a href="#ä½¿ç”¨å˜é‡" class="headerlink" title="ä½¿ç”¨å˜é‡"></a>ä½¿ç”¨å˜é‡</h2><p>éå¸¸ç®€å•æ˜äº†ï¼Œå˜é‡ç”³æ˜ï¼š<code>$color: #4a4a4a;</code>ï¼Œå˜é‡å¼•ç”¨ï¼š<code>color: $color;</code>ï¼Œå…·ä½“ä¾‹å­æ¼”ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$bg-color</span>: <span class="number">#f90</span>;</span><br><span class="line"><span class="variable">$font-color</span>: <span class="number">#444</span>;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">$bg-color</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$font-color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.selected</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$font-color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f90</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.selected</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åµŒå¥—-CSS-è§„åˆ™"><a href="#åµŒå¥—-CSS-è§„åˆ™" class="headerlink" title="åµŒå¥— CSS è§„åˆ™"></a>åµŒå¥— CSS è§„åˆ™</h2><p>æ–‡æ¡£ï¼šåœ¨ Sass ä¸­ï¼Œä½ å¯ä»¥åƒä¿„ç½—æ–¯å¥—å¨ƒé‚£æ ·åœ¨è§„åˆ™å—ä¸­åµŒå¥—è§„åˆ™å—ã€‚sass åœ¨è¾“å‡º css æ—¶ä¼šå¸®ä½ æŠŠè¿™äº›åµŒå¥—è§„åˆ™å¤„ç†å¥½ï¼Œé¿å…ä½ çš„é‡å¤ä¹¦å†™ã€‚</p><p>çœ‹ä¸ªä¾‹å­ï¼ŒåŸºæœ¬å°±çŸ¥é“ä»€ä¹ˆæ„æ€ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="selector-tag">a</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="variable">$font-color</span>;</span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        <span class="attribute">color</span>: red;</span><br><span class="line">      &#125;</span><br><span class="line">      &amp;::after &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">"..."</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"..."</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤Ÿç®€æ´ï¼Œä¸è¿‡æœ‰ä¸€äº›åµŒå¥—è§„åˆ™ï¼Œéœ€è¦ç¨ç¨ç•™æ„ï¼Œæ¯”å¦‚ï¼š</p><ul><li>çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦<code>&amp;</code></li><li>ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥—</li><li>å­ç»„åˆé€‰æ‹©å™¨å’ŒåŒå±‚ç»„åˆé€‰æ‹©å™¨ï¼š<code>&gt;ã€+ å’Œ ~</code></li><li>å±æ€§åµŒå¥—</li></ul><h3 id="çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦"><a href="#çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦" class="headerlink" title="çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦"></a>çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦</h3><p>çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦<code>&amp;</code>ï¼Œè®°ä½<code>&amp;</code>æ˜¯çˆ¸çˆ¸ï¼Œä½ å¯ä»¥åœ¨çˆ¸çˆ¸çš„åè¾¹ï¼Œä¹Ÿå¯ä»¥åœ¨çˆ¸çˆ¸çš„å‰è¾¹ï¼Œéšä½ ï¼Œå“ˆå“ˆå“ˆå“ˆï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$font-color</span>;</span><br><span class="line">  <span class="comment">/* Dad after */</span></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* Dad before */</span></span><br><span class="line">  <span class="selector-class">.header</span> &amp; &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Dad after */</span></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Dad before */</span></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-tag">nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Dad æ˜¯çˆ¸çˆ¸ä»¬ï¼š<code>nav a</code>ï¼Œä»€ä¹ˆåœºæ™¯èƒ½ç”¨åˆ°<code>Dad before</code>ï¼Ÿæƒ³æƒ³<code>nav a</code>æ˜¯é€šç”¨æ ·å¼ï¼Œæˆ‘æƒ³ç»™ header ç»„ä»¶å•ç‹¬<code>nav a</code>çš„æ ·å¼ï¼Œå³<code>.header nav a</code>ï¼Œå³<code>.header &amp;</code>ã€‚</p><p>å½“ç„¶ï¼Œè¿˜å¯ä»¥è¿™æ ·ç”¨ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  &amp;-sidebar &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main-sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥—"><a href="#ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥—" class="headerlink" title="ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥—"></a>ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥—</h3><p>æ–‡æ¡£ä¾‹å­ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="selector-tag">h1</span>,</span><br><span class="line">  <span class="selector-tag">h2</span>,</span><br><span class="line">  <span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0.8em</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span>,</span><br><span class="line"><span class="selector-tag">aside</span> &#123;</span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> <span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-tag">h2</span>,</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.8em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-tag">aside</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åå­—å°±å·²ç»å‘Šè¯‰å’±ä»¬è¿™ä¸ªè§„åˆ™çš„è¦ç‚¹æ˜¯ï¼šç¾¤ç»„ã€‚å¤§æ‹¬å·<code>{</code>å‰ç«¯çš„éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªç¾¤ç»„ï¼Œæ¯”å¦‚<code>.container</code>ï¼Œæ¯”å¦‚<code>nav, aside</code>ï¼Œä¸è®ºå¤šå°‘ã€‚</p><p>åšä¸ºç¾¤ç»„çš„ä»»ä½•ä¸€å‘˜ï¼Œæœ‰æƒåˆ©è·å–å­å—£ï¼Œè€Œä¸”è¿˜å¾—è·Ÿå…¶ä»–ç¾¤ç»„æˆå‘˜ä¸€æ¨¡ä¸€æ ·ï¼Œè‹¥ Ta æœ‰ ä¸‰ä¸ªï¼ˆ<code>h1, h2, h3</code>ï¼‰å­å—£ï¼Œé‚£ç¾¤ç»„çš„ä»»ä½•ä¸€å‘˜ä¹Ÿå¾—å„è‡ªæœ‰ä¸‰ä¸ªå­å—£ï¼›Ta å¦‚æœåªæœ‰ä¸€ä¸ªï¼ˆ<code>a</code>ï¼‰å­å—£ï¼Œå³ä½¿ç¾¤ç»„äººå¾ˆå¤šï¼Œä¹Ÿå¾—æ¯ä¸ªæˆå‘˜ä¸€äººä¸€ä¸ªã€‚</p><p>æ¼”ç»ƒï¼šæœ‰ä¸‰ä¸ªç»„ä»¶<code>header article footer</code>ï¼Œæˆ‘å¸Œæœ›å­—ä½“é¢œè‰²æœ‰é»˜è®¤å€¼ï¼Œé“¾æ¥ä¾‹å¤–ï¼Œå¹¶ä¸”æœ‰ hover å˜åŒ–ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.header</span>,</span><br><span class="line"><span class="selector-class">.acticle</span>,</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$font-color</span>;</span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.header</span>,</span><br><span class="line"><span class="selector-class">.acticle</span>,</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-class">.acticle</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-class">.footer</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.acticle</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.footer</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç»„åˆå’ŒåŒå±‚ç»„åˆ"><a href="#å­ç»„åˆå’ŒåŒå±‚ç»„åˆ" class="headerlink" title="å­ç»„åˆå’ŒåŒå±‚ç»„åˆ"></a>å­ç»„åˆå’ŒåŒå±‚ç»„åˆ</h3><p>å­ç»„åˆé€‰æ‹©å™¨ <code>&gt;</code> å’ŒåŒå±‚ç»„åˆé€‰æ‹©å™¨ <code>+ã€~</code>ï¼Œå’Œ CSS çš„è§„åˆ™ä¸€è‡´ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* é€‰æ‹©article åçš„åŒå±‚æ‰€æœ‰ article å…ƒç´  */</span></span><br><span class="line"><span class="selector-tag">article</span> ~ <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* é€‰æ‹©navå…ƒç´ åç´§è·Ÿçš„articleå…ƒç´  */</span></span><br><span class="line"><span class="selector-tag">nav</span> + <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* é€‰æ‹©articleä¸‹çš„æ‰€æœ‰å‘½ä¸­sectioné€‰æ‹©å™¨çš„å…ƒç´  */</span></span><br><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">section</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–‡æ¡£ä¾‹å­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &#123;</span><br><span class="line">  ~ article &#123;</span><br><span class="line">    <span class="selector-tag">border-top</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">dashed</span> <span class="selector-id">#ccc</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &gt; <span class="selector-tag">section</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">dl</span> &gt; &#123;</span><br><span class="line">    dt &#123;</span><br><span class="line">      <span class="selector-tag">color</span>: <span class="selector-id">#333</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">dd</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">nav</span> + &amp; &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> ~ <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> dashed <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">article</span> &gt; <span class="selector-tag">section</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">dl</span> &gt; <span class="selector-tag">dt</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">dl</span> &gt; <span class="selector-tag">dd</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> + <span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åµŒå¥—å±æ€§"><a href="#åµŒå¥—å±æ€§" class="headerlink" title="åµŒå¥—å±æ€§"></a>åµŒå¥—å±æ€§</h3><blockquote><p>è§„åˆ™ï¼šæŠŠå±æ€§åä»ä¸­åˆ’çº¿-çš„åœ°æ–¹æ–­å¼€ï¼Œåœ¨æ ¹å±æ€§åè¾¹æ·»åŠ ä¸€ä¸ªå†’å·<code>:</code>ï¼Œç´§è·Ÿä¸€ä¸ª<code>{ }</code>å—ï¼ŒæŠŠå­å±æ€§éƒ¨åˆ†å†™åœ¨è¿™ä¸ª<code>{ }</code>å—ä¸­ã€‚å°±åƒ css é€‰æ‹©å™¨åµŒå¥—ä¸€æ ·ï¼Œsass ä¼šæŠŠä½ çš„å­å±æ€§ä¸€ä¸€è§£å¼€ï¼ŒæŠŠæ ¹å±æ€§å’Œå­å±æ€§éƒ¨åˆ†é€šè¿‡ä¸­åˆ’çº¿<code>-</code>è¿æ¥èµ·æ¥ï¼Œæœ€åç”Ÿæˆçš„æ•ˆæœä¸ä½ æ‰‹åŠ¨ä¸€ééå†™çš„ css æ ·å¼ä¸€æ ·ï¼š</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: &#123;</span><br><span class="line">    style: solid;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span> &#123;</span><br><span class="line">    left: <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¥è¯ï¼šæˆ‘è¦æŠŠ<code>border-style</code>é‡Œçš„<code>-</code>æ‰“æ–­ï¼Œæ‹†æ•£å·¦å³ï¼Œå¹¶æ›¿æ¢æˆ<code>:</code>ï¼Œé‡æ–°ä½¿ç”¨<code>{}</code>åµŒå¥—ä½¿ç”¨ï¼Œå®—æ—¨å°±æ˜¯ä¸ç ´ä¸ç«‹ï¼Œæœ‰ç ´æ‰æœ‰ç«‹ï¼ŒæŠŠæ‰€æœ‰é‡å¤çš„ä¸œè¥¿ç»Ÿç»Ÿå½’å¹¶ï¼Œåªå†™å…³é”®éƒ¨ä½ã€‚</p><h2 id="Rules"><a href="#Rules" class="headerlink" title="@-Rules"></a>@-Rules</h2><h3 id="import-å¯¼å…¥"><a href="#import-å¯¼å…¥" class="headerlink" title="@import å¯¼å…¥"></a>@import å¯¼å…¥</h3><p>åœ¨å•ç‹¬ä½¿ç”¨ css çš„ <code>@import</code> è§„åˆ™å¯¼å…¥æ–‡ä»¶ï¼Œæ˜¯ä¸åŠ <code>link</code> çš„æ•ˆç‡ï¼Œæ¯”å¦‚åŠ è½½å­—ä½“åº“ï¼Œæœ‰æ¬¡åœ¨é¡¹ç›®ä¸­å°±åƒè¿‡è¿™ä¸ªäºï¼Œé‚£ä¼šå‘èª“æ‰“æ­»æˆ‘ä¹Ÿä¸ç”¨è¿™ä¸ªè§„åˆ™ã€‚</p><p>sass çš„<code>@import</code> è§„åˆ™æ˜¯åœ¨ç”Ÿæˆ css æ–‡ä»¶æ—¶å°±æŠŠç›¸å…³æ–‡ä»¶å¯¼å…¥è¿›æ¥ï¼Œæ‰€ä»¥ï¼Œå’Œ css çš„<code>@import</code>æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæ”¾å¿ƒé£Ÿç”¨ã€‚</p><p>ä½†æ˜¯ç”±äº sass å…¼å®¹åŸç”Ÿçš„ cssï¼Œæ‰€ä»¥å®ƒä¹Ÿæ”¯æŒåŸç”Ÿçš„ CSS<code>@import</code>ï¼Œæ¯”å¦‚å¯¼å…¥æ–‡ä»¶æˆ–è€… url æ˜¯ä»¥ <code>.css</code>ç»“å°¾çš„ã€‚</p><p>ä½¿ç”¨ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"header"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"footer"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šä¸ªå¯¼å…¥</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"rounded-corners"</span>, <span class="string">"text-shadow"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åµŒå¥—å¯¼å…¥</span></span><br><span class="line"><span class="selector-class">.blue-theme</span> &#123;</span><br><span class="line">  @<span class="keyword">import</span> <span class="string">"blue-theme"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå°†æ–‡ä»¶å‘½åä¸º <code>_colors.scss</code>ï¼Œä¾¿ä¸ä¼šç¼–è¯‘<code>_colours.css</code> æ–‡ä»¶ï¼Œä½†æ˜¯å¯¼å…¥æ—¶ä¾ç„¶æ˜¯<code>@import &quot;colors&quot;;</code>ã€‚</p><h3 id="media-åª’ä½“æŸ¥è¯¢"><a href="#media-åª’ä½“æŸ¥è¯¢" class="headerlink" title="@media åª’ä½“æŸ¥è¯¢"></a>@media åª’ä½“æŸ¥è¯¢</h3><p>Sass ä¸­ @media æŒ‡ä»¤ä¸ CSS ä¸­ç”¨æ³•ä¸€æ ·ï¼Œä¸è¿‡è¿˜å…è®¸å…¶åœ¨ CSS è§„åˆ™ä¸­åµŒå¥—ï¼Œç¼–è¯‘æ—¶ï¼Œ@media å°†è¢«ç¼–è¯‘åˆ°æ–‡ä»¶çš„æœ€å¤–å±‚ï¼ŒåŒ…å«åµŒå¥—çš„çˆ¶é€‰æ‹©å™¨ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  @<span class="keyword">media</span> screen and (orientation: landscape) &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‹¼æ¥ and */</span></span><br><span class="line">@<span class="keyword">media</span> screen &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    @<span class="keyword">media</span> (max-width: 1140px) &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.other</span> &#123;</span><br><span class="line">    @<span class="keyword">media</span> (max-width: 640px) &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (orientation: landscape) &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‹¼æ¥ and */</span></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width: <span class="number">1140px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width: <span class="number">640px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.other</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="extend"><a href="#extend" class="headerlink" title="@extend"></a>@extend</h3><p>å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œå°±æ˜¯ç»§æ‰¿ã€‚æ¯”å¦‚ä»£ç ä¸­çš„<code>.error</code>ï¼Œä»¥åŠåŒçº§<code>.intrusion</code>ï¼Œéƒ½ä¼šè¢«ç»§æ‰¿ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.error</span><span class="selector-class">.intrusion</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: url(<span class="string">"/image/hacked.png"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  @<span class="keyword">extend</span> .error;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span>,</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.error</span><span class="selector-class">.intrusion</span>,</span><br><span class="line"><span class="selector-class">.intrusion</span><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"/image/hacked.png"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶æŒ‡ä»¤"><a href="#æ§åˆ¶æŒ‡ä»¤" class="headerlink" title="æ§åˆ¶æŒ‡ä»¤"></a>æ§åˆ¶æŒ‡ä»¤</h2><h3 id="if"><a href="#if" class="headerlink" title="@if"></a>@if</h3><p>å’Œ JavaScript çš„ if ä¸€æ ·ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$type</span>: monster;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  @<span class="keyword">if</span> <span class="variable">$type</span> == ocean &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">  &#125; @<span class="keyword">else</span> if <span class="variable">$type</span> == monster &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">  &#125; @<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="for"><a href="#for" class="headerlink" title="@for"></a>@for</h3><p>åŒºåˆ«åœ¨äº through ä¸ to çš„å«ä¹‰ï¼šthrough åŒ…å«æœ€åä¸€ä½ï¼Œè€Œ to ä¸åŒ…å«ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">for</span> <span class="variable">$i</span> from 1 to 3 &#123;</span><br><span class="line">  <span class="selector-class">.list-</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1em</span> * <span class="variable">$i</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">for</span> <span class="variable">$i</span> from 1 through 3 &#123;</span><br><span class="line">  <span class="selector-class">.item-</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">2rem</span> * <span class="variable">$i</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.list-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">6rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="each"><a href="#each" class="headerlink" title="@each"></a>@each</h3><p>ç±»ä¼¼äº JavaScript çš„ <code>for...in</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">each</span> <span class="variable">$kind</span> in small, middle, large &#123;</span><br><span class="line">  .#&#123;<span class="variable">$kind</span>&#125;-<span class="attribute">icon</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: url(<span class="string">"/images/#&#123;$kind&#125;-icon.png"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.small-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"/images/small-icon.png"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"/images/middle-icon.png"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.large-icon</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"/images/large-icon.png"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ··åˆå™¨"><a href="#æ··åˆå™¨" class="headerlink" title="æ··åˆå™¨"></a>æ··åˆå™¨</h2><p>æ··åˆå™¨ä½¿ç”¨<code>@mixin</code>æ ‡è¯†ç¬¦å®šä¹‰ï¼Œé€šè¿‡<code>@include</code>æ¥ä½¿ç”¨è¿™ä¸ªæ··åˆå™¨ï¼Œç”¨æ¥è§£å†³å¤§æ®µé‡ç”¨çš„ä»£ç ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> clearfix &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  &amp;:after &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"."</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  * <span class="selector-tag">html</span> &amp; &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  @<span class="keyword">include</span> clearfix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"."</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">* <span class="selector-tag">html</span> <span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€å¼ºå¤§çš„ä¸€ç‚¹å°±æ˜¯å¦‚åŒå‡½æ•°ä¸€èˆ¬ï¼Œå¯ä»¥ä¼ å‚ï¼Œä¸ä»…å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å…³é”®è¯å‚æ•°ï¼Œè¿™æ ·å°±ä¸ç”¨ç®¡å‚æ•°å‰åé¡ºåºäº†ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> border-value(<span class="variable">$width</span>: 1px, <span class="variable">$color</span>: <span class="number">#333</span>, <span class="variable">$style</span>: solid) &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="variable">$width</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="variable">$color</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: <span class="variable">$style</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ä¸ä¼ å‚*/</span></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  @<span class="keyword">include</span> border-value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ä¼ å‚*/</span></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  @<span class="keyword">include</span> border-value(<span class="number">2px</span>, <span class="number">#666</span>, dashed);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*å…³é”®è¯ä¼ å‚*/</span></span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">  @<span class="keyword">include</span> border-value(<span class="variable">$style</span>: dashed, <span class="variable">$width</span>: 3px, <span class="variable">$color</span>: <span class="number">#999</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*ä¸ä¼ å‚*/</span></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ä¼ å‚*/</span></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: dashed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å…³é”®è¯ä¼ å‚*/</span></span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: dashed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°æŒ‡ä»¤"><a href="#å‡½æ•°æŒ‡ä»¤" class="headerlink" title="å‡½æ•°æŒ‡ä»¤"></a>å‡½æ•°æŒ‡ä»¤</h2><p>ä¸ mixin ç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¼ é€’è‹¥å¹²ä¸ªå…¨å±€å˜é‡ç»™å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥å«æœ‰å¤šæ¡è¯­å¥ï¼Œéœ€è¦è°ƒç”¨ <code>@return</code> è¾“å‡ºç»“æœã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$grid-width</span>: <span class="number">40px</span>;</span><br><span class="line"><span class="variable">$gutter-width</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">@function grid-width(<span class="variable">$n</span>) &#123;</span><br><span class="line">  @return <span class="variable">$n</span> * <span class="variable">$grid-width</span> + (<span class="variable">$n</span> - 1) * <span class="variable">$gutter-width</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: grid-width(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sidebar2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: grid-width(<span class="variable">$n</span>: <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">240px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">490px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SassScript"><a href="#SassScript" class="headerlink" title="SassScript"></a>SassScript</h2><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><p>SassScript æ”¯æŒ 6 ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼š</p><ul><li>æ•°å­—ï¼Œ<code>1, 2, 13, 10px</code></li><li>å­—ç¬¦ä¸²ï¼Œæœ‰å¼•å·å­—ç¬¦ä¸²ä¸æ— å¼•å·å­—ç¬¦ä¸²ï¼Œ<code>&quot;foo&quot;, &#39;bar&#39;, baz</code></li><li>é¢œè‰²ï¼Œ<code>blue, #04a3f9, rgba(255,0,0,0.5)</code></li><li>å¸ƒå°”å‹ï¼Œ<code>true, false</code></li><li>ç©ºå€¼ï¼Œ<code>null</code></li><li>æ•°ç»„ (list)ï¼Œç”¨ç©ºæ ¼æˆ–é€—å·ä½œåˆ†éš”ç¬¦ï¼Œ<code>1.5em 1em 0 2em, Helvetica, Arial, sans-serif</code></li><li>maps, ç›¸å½“äº JavaScript çš„ objectï¼Œ<code>(key1: value1, key2: value2)</code></li></ul><h3 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h3><p>SassScript æ”¯æŒæ•°å­—çš„åŠ å‡ä¹˜é™¤ã€å–æ•´ç­‰è¿ç®— <code>(+, -, *, /, %)</code>ï¼Œå…³ç³»è¿ç®— <code>&lt;, &gt;, &lt;=, &gt;=</code> ä¹Ÿå¯ç”¨äºæ•°å­—è¿ç®—ï¼Œç›¸ç­‰è¿ç®— <code>==</code>, <code>!=</code> å¯ç”¨äºæ‰€æœ‰æ•°æ®ç±»å‹ã€‚</p><h3 id="æ’å€¼è¯­å¥"><a href="#æ’å€¼è¯­å¥" class="headerlink" title="æ’å€¼è¯­å¥ #{}"></a>æ’å€¼è¯­å¥ #{}</h3><p>é€šè¿‡ <code>#{}</code> æ’å€¼è¯­å¥å¯ä»¥åœ¨é€‰æ‹©å™¨æˆ–å±æ€§åä¸­ä½¿ç”¨å˜é‡ï¼Œé¿å… Sass è¿è¡Œè¿ç®—è¡¨è¾¾å¼ã€‚</p><h2 id="Bootstrap-4"><a href="#Bootstrap-4" class="headerlink" title="Bootstrap@4"></a>Bootstrap@4</h2><ul><li><a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap v4.4.1</a></li></ul><p>å…¥å£æ–‡ä»¶ <code>bootstrap.scss</code>çš„å¼•å…¥ç»„ä»¶å¾ˆå¤šï¼Œæˆ‘ä»¬å°±æŒ‘ä¸€ä¸ªçœ‹çœ‹ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ float å†…å®¹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.float-left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.float-right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.float-none</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">576px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.float-sm-left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-sm-right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-sm-none</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.float-md-left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-md-right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-md-none</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">992px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.float-lg-left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-lg-right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-lg-none</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">1200px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.float-xl-left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-xl-right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.float-xl-none</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬å»çœ‹çœ‹ bootstrap æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p><h3 id="ç¬¬ä¸€æ­¥ï¼šæ‰¾è·¯"><a href="#ç¬¬ä¸€æ­¥ï¼šæ‰¾è·¯" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ‰¾è·¯"></a>ç¬¬ä¸€æ­¥ï¼šæ‰¾è·¯</h3><p>æ ¹æ® <code>bootstrap.scss</code>é‡Œçš„å†…å®¹<code>@import &quot;mixins&quot;;</code>ï¼Œè¿›å…¥å½“å‰ç›®å½•ä¸‹çš„<code>_mixins.scss</code>ï¼Œçœ‹åˆ°<code>@import &quot;mixins/float&quot;;</code>ï¼Œæ‰€ä»¥ç»§ç»­æ‰“å¼€<code>mixins</code> ç›®å½•ä¸‹çš„ <code>_float.scss</code>ã€‚</p><h3 id="ç¬¬äºŒæ­¥ï¼šå†…å®¹"><a href="#ç¬¬äºŒæ­¥ï¼šå†…å®¹" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå†…å®¹"></a>ç¬¬äºŒæ­¥ï¼šå†…å®¹</h3><p><code>_float.scss</code>æ‰€æœ‰å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stylelint-disable declaration-no-important</span></span><br><span class="line"></span><br><span class="line">@<span class="keyword">each</span> <span class="variable">$breakpoint</span> in map-keys(<span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  @<span class="keyword">include</span> media-breakpoint-up(<span class="variable">$breakpoint</span>) &#123;</span><br><span class="line">    <span class="variable">$infix</span>: breakpoint-infix(<span class="variable">$breakpoint</span>, <span class="variable">$grid-breakpoints</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.float</span>#&#123;<span class="variable">$infix</span>&#125;-<span class="attribute">left</span> &#123;</span><br><span class="line">      <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.float</span>#&#123;<span class="variable">$infix</span>&#125;-<span class="attribute">right</span> &#123;</span><br><span class="line">      <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.float</span>#&#123;<span class="variable">$infix</span>&#125;-<span class="attribute">none</span> &#123;</span><br><span class="line">      <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæœ‰ä¸‰ä¸ªåœ°æ–¹ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå¦‚<code>map-keys()</code>ï¼Œ<code>media-breakpoint-up()</code>ï¼Œ<code>breakpoint-infix()</code>ã€‚</p><h3 id="ç¬¬ä¸‰æ­¥ï¼šè§£æƒ‘"><a href="#ç¬¬ä¸‰æ­¥ï¼šè§£æƒ‘" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè§£æƒ‘"></a>ç¬¬ä¸‰æ­¥ï¼šè§£æƒ‘</h3><ul><li><code>map-keys()</code> è¿”å› map é‡Œé¢æ‰€æœ‰çš„ keyï¼š</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$grid-breakpoints</span>: (</span><br><span class="line">  xs: <span class="number">0</span>,</span><br><span class="line">  sm: <span class="number">576px</span>,</span><br><span class="line">  md: <span class="number">768px</span>,</span><br><span class="line">  lg: <span class="number">992px</span>,</span><br><span class="line">  xl: <span class="number">1200px</span></span><br><span class="line">) !default;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">each</span> <span class="variable">$breakpoint</span> in map-keys(<span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  .#&#123;<span class="variable">$breakpoint</span>&#125; &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line"><span class="selector-class">.xs</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sm</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lg</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.xl</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èµ„æ–™ï¼š<a href="https://www.cnblogs.com/whqet/p/Sassmap.html" target="_blank" rel="noopener">Sass map è¯¦è§£</a></p><ul><li><code>media-breakpoint-up()</code>ï¼Œè‡ªå®šä¹‰å‡½æ•°ï¼Œä¸»è¦æ˜¯æ ¹æ®åª’ä½“æŸ¥è¯¢ç»™å‡ºä¸åŒçš„ç»“æœ</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Media of at least the minimum breakpoint width. No query for the smallest breakpoint.</span></span><br><span class="line"><span class="comment">// Makes the @content apply to the given breakpoint and wider.</span></span><br><span class="line">@<span class="keyword">mixin</span> media-breakpoint-up(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>: <span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  <span class="variable">$min</span>: breakpoint-min(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>);</span><br><span class="line">  @<span class="keyword">if</span> <span class="variable">$min</span> &#123;</span><br><span class="line">    @<span class="keyword">media</span> (min-width: <span class="variable">$min</span>) &#123;</span><br><span class="line">      @<span class="keyword">content</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; @<span class="keyword">else</span> &#123;</span><br><span class="line">    @<span class="keyword">content</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>breakpoint-min()</code>ä¹Ÿæ˜¯ä¸ªå‡½æ•°ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Minimum breakpoint width. Null for the smallest (first) breakpoint.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    &gt;&gt; breakpoint-min(sm, (xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px))</span></span><br><span class="line"><span class="comment">//    576px</span></span><br><span class="line">@function breakpoint-min(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>: <span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  <span class="variable">$min</span>: map-get(<span class="variable">$breakpoints</span>, <span class="variable">$name</span>);</span><br><span class="line">  @return if(<span class="variable">$min</span> != 0, <span class="variable">$min</span>, null);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>map-get</code>åŒ <code>map-keys</code>ç”¨æ³•ï¼Œè¿”å› map é‡Œé¢æŒ‡å®šå¯ä»¥çš„ <code>value</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$min-num</span>: breakpoint-min(sm, <span class="variable">$grid-breakpoints</span>);</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="variable">$min-num</span>) &#123;</span><br><span class="line">  <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: 576px) &#123;</span><br><span class="line">  <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@content</code>ç”¨åœ¨<code>mixin</code>é‡Œé¢çš„ï¼Œå½“å®šä¹‰ä¸€ä¸ª<code>mixin</code>åï¼Œå¹¶ä¸”è®¾ç½®äº†<code>@content</code>ä¹‹åï¼Œã€<code>@include</code>çš„æ—¶å€™å¯ä»¥ä¼ å…¥ç›¸åº”çš„å†…å®¹åˆ°<code>mixin</code>é‡Œé¢ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$color</span>: white;</span><br><span class="line">@<span class="keyword">mixin</span> colors(<span class="variable">$color</span>: blue) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">$color</span>;</span><br><span class="line">  @<span class="keyword">content</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.colors</span> &#123;</span><br><span class="line">  @<span class="keyword">include</span> colors &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line"><span class="selector-class">.colors</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">border-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èµ„æ–™ï¼š<a href="https://segmentfault.com/q/1010000004119350" target="_blank" rel="noopener">sass è¯­æ³•ä¸­çš„@content</a></p><ul><li><code>breakpoint-infix()</code>ï¼Œè‡ªå®šä¹‰å‡½æ•°ï¼š</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Returns a blank string if smallest breakpoint, otherwise returns the name with a dash in front.</span></span><br><span class="line"><span class="comment">// Useful for making responsive utilities.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    &gt;&gt; breakpoint-infix(xs, (xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px))</span></span><br><span class="line"><span class="comment">//    ""  (Returns a blank string)</span></span><br><span class="line"><span class="comment">//    &gt;&gt; breakpoint-infix(sm, (xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px))</span></span><br><span class="line"><span class="comment">//    "-sm"</span></span><br><span class="line">@function breakpoint-infix(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>: <span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  @return if(breakpoint-min(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>) == null, <span class="string">""</span>, <span class="string">"-#&#123;$name&#125;"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®æ³¨é‡Šæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$min-value-sm</span>: breakpoint-infix(sm, <span class="variable">$grid-breakpoints</span>);</span><br><span class="line"><span class="variable">$min-value-xs</span>: breakpoint-infix(xs, <span class="variable">$grid-breakpoints</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.float</span>#&#123;<span class="variable">$min-value-sm</span>&#125;-<span class="attribute">left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>#&#123;<span class="variable">$min-value-xs</span>&#125;-<span class="attribute">left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// css</span></span><br><span class="line"><span class="selector-class">.float-sm-left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.float-left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h3><p>æœ€åï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰å…³äº float çš„å†…å®¹ç»„åˆåœ¨ä¸€èµ·ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$grid-breakpoints</span>: (</span><br><span class="line">  xs: <span class="number">0</span>,</span><br><span class="line">  sm: <span class="number">576px</span>,</span><br><span class="line">  md: <span class="number">768px</span>,</span><br><span class="line">  lg: <span class="number">992px</span>,</span><br><span class="line">  xl: <span class="number">1200px</span></span><br><span class="line">) !default;</span><br><span class="line"></span><br><span class="line">@function breakpoint-min(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>: <span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  <span class="variable">$min</span>: map-get(<span class="variable">$breakpoints</span>, <span class="variable">$name</span>);</span><br><span class="line">  @return if(<span class="variable">$min</span> != 0, <span class="variable">$min</span>, null);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@function breakpoint-infix(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>: <span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  @return if(breakpoint-min(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>) == null, <span class="string">""</span>, <span class="string">"-#&#123;$name&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">mixin</span> media-breakpoint-up(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>: <span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  <span class="variable">$min</span>: breakpoint-min(<span class="variable">$name</span>, <span class="variable">$breakpoints</span>);</span><br><span class="line">  @<span class="keyword">if</span> <span class="variable">$min</span> &#123;</span><br><span class="line">    @<span class="keyword">media</span> (min-width: <span class="variable">$min</span>) &#123;</span><br><span class="line">      @<span class="keyword">content</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; @<span class="keyword">else</span> &#123;</span><br><span class="line">    @<span class="keyword">content</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">each</span> <span class="variable">$breakpoint</span> in map-keys(<span class="variable">$grid-breakpoints</span>) &#123;</span><br><span class="line">  @<span class="keyword">include</span> media-breakpoint-up(<span class="variable">$breakpoint</span>) &#123;</span><br><span class="line">    <span class="variable">$infix</span>: breakpoint-infix(<span class="variable">$breakpoint</span>, <span class="variable">$grid-breakpoints</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.float</span>#&#123;<span class="variable">$infix</span>&#125;-<span class="attribute">left</span> &#123;</span><br><span class="line">      <span class="attribute">float</span>: left <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.float</span>#&#123;<span class="variable">$infix</span>&#125;-<span class="attribute">right</span> &#123;</span><br><span class="line">      <span class="attribute">float</span>: right <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.float</span>#&#123;<span class="variable">$infix</span>&#125;-<span class="attribute">none</span> &#123;</span><br><span class="line">      <span class="attribute">float</span>: none <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ç›´æ¥å°±å¯ä»¥åœ¨ç¯å¢ƒé‡Œè·‘èµ·æ¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> SASS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº React çŠ¶æ€ç®¡ç†é‚£äº›äº‹</title>
      <link href="/2019/12/29/react-state/"/>
      <url>/2019/12/29/react-state/</url>
      
        <content type="html"><![CDATA[<p>ç›®çš„ï¼šé‡‡ç”¨çŠ¶æ€ç®¡ç†çš„å¤šç§æ–¹å¼ï¼šå®ç°ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥åŠ ä¸€ï¼Œå‡ä¸€ï¼Œ ç½®é›¶ã€‚<br><a id="more"></a></p><h2 id="React-state"><a href="#React-state" class="headerlink" title="React state"></a>React state</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      value: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick(actions) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (actions) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"INCREASE"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">          value: ++state.value</span><br><span class="line">        &#125;));</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"DECREASE"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">          value: --state.value</span><br><span class="line">        &#125;));</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          value: <span class="number">0</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;&#123;<span class="keyword">this</span>.state.value&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; this.handleClick("INCREASE")&#125;&gt;+1&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; <span class="keyword">this</span>.handleClick(<span class="string">"DECREASE"</span>)&#125;&gt;<span class="number">-1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; this.handleClick("RESET")&#125;&gt;0&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Flux"><a href="#Flux" class="headerlink" title="Flux"></a>Flux</h2><h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»º reducer</p><ul><li>å¯ä»¥ä½¿ç”¨å•ç‹¬çš„ä¸€ä¸ª reducer,ä¹Ÿå¯ä»¥å°†å¤šä¸ª reducer åˆå¹¶ä¸ºä¸€ä¸ª reducerï¼Œå³ï¼šcombineReducers()</li><li>action å‘å‡ºå‘½ä»¤åå°† state æ”¾å…¥ reucer åŠ å·¥å‡½æ•°ä¸­ï¼Œè¿”å›æ–°çš„ state,å¯¹ state è¿›è¡ŒåŠ å·¥å¤„ç†</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = &#123; counter: <span class="number">0</span> &#125;, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: state.counter + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: state.counter - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»º action</p><ul><li>ç”¨æˆ·æ˜¯æ¥è§¦ä¸åˆ° state çš„ï¼Œåªèƒ½æœ‰ view è§¦å‘ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ª action å¯ä»¥ç†è§£ä¸ºæŒ‡ä»¤ï¼Œéœ€è¦å‘å‡ºå¤šå°‘åŠ¨ä½œå°±æœ‰å¤šå°‘æŒ‡ä»¤</li><li>action æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå« type çš„å‚æ•°ï¼Œå®šä¹‰ action ç±»å‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  increase: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">"INCREASE"</span> &#125;),</span><br><span class="line">  decrease: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">"DECREASE"</span> &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºçš„ storeï¼Œä½¿ç”¨ createStore æ–¹æ³•</p><ul><li>store å¯ä»¥ç†è§£ä¸ºæœ‰å¤šä¸ªåŠ å·¥æœºå™¨çš„æ€»å·¥å‚</li><li>æä¾› subscribeï¼Œdispatchï¼ŒgetState è¿™äº›æ–¹æ³•ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(store.getState()));</span><br><span class="line"></span><br><span class="line">store.dispatch(actions.increase()); <span class="comment">// &#123;counter: 1&#125;</span></span><br><span class="line">store.dispatch(actions.increase()); <span class="comment">// &#123;counter: 2&#125;</span></span><br><span class="line">store.dispatch(actions.increase()); <span class="comment">// &#123;counter: 3&#125;</span></span><br><span class="line">store.dispatch(actions.decrease()); <span class="comment">// &#123;counter: 2&#125;</span></span><br></pre></td></tr></table></figure><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = &#123; counter: <span class="number">0</span> &#125;, action = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type &#125; = action;</span><br><span class="line">  <span class="keyword">const</span> &#123; counter &#125; = state;</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: counter + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: counter - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CounterRedux</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      counter: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.unsubscribe = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.unsubscribe = store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        counter: store.getState().counter</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line">    <span class="keyword">this</span>.unsubscribe();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;<span class="keyword">this</span>.state.counter&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; store.dispatch(&#123; type: "INCREASE" &#125;)&#125;&gt;+1&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; store.dispatch(&#123; <span class="attr">type</span>: <span class="string">"DECREASE"</span> &#125;)&#125;&gt;<span class="number">-1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; store.dispatch(&#123; type: "RESET" &#125;)&#125;&gt;0&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>action å¯ä»¥å•ç‹¬å‡ºæ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  increase: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">"INCREASE"</span> &#125;),</span><br><span class="line">  decrease: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">"DECREASE"</span> &#125;),</span><br><span class="line">  reset: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">"RESET"</span> &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// è§¦å‘</span></span><br><span class="line">&lt;button onClick=&#123;() =&gt; store.dispatch(actions.increase())&#125;&gt;+<span class="number">1</span>&lt;<span class="regexp">/button&gt;;</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯ä¸ºäº†å±•ç¤º redux çš„ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œå¹¶æ²¡æœ‰æŠŠçŠ¶æ€æŒ‚è½½åœ¨æœ€é¡¶å±‚ï¼Œè¯¦ç»†å®Œæ•´ç‰ˆå¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„ä»£ç ï¼š<a href="https://github.com/reduxjs/redux/tree/master/examples/counter" target="_blank" rel="noopener">Redux Counter Example</a>ã€‚</p><p>Redux çš„å·¥ä½œæµç¨‹å›¾ï¼Œ<a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html" target="_blank" rel="noopener">é˜®ä¸€å³°åšå®¢æ–‡ç« </a>æ‘˜å½•:</p><p><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016091802.jpg" alt="Redux-Flow"></p><h2 id="React-Redux"><a href="#React-Redux" class="headerlink" title="React-Redux"></a>React-Redux</h2><p>Redux æ˜¯ä¸€æ¬¾çŠ¶æ€ç®¡ç†åº“ï¼Œå¹¶ä¸”æä¾›äº† react-redux åº“æ¥ä¸ React äº²å¯†é…åˆï¼Œè¿™ä¸¤è€…çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2018/10/24/166a3e1533df9e8d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="react-reduxæµç¨‹å›¾"></p><p>ç»§ç»­å®ç°è®¡æ•°å™¨ï¼Œå®Œæ•´ Demo å¯ä»¥çœ‹<a href="https://github.com/yangtao2o/myreact/tree/master/myredux/react-redux-counter" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p><p>src ç›®å½•ä¸‹å¤§ä½“ç»“æ„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ actions</span><br><span class="line">â”‚   â””â”€â”€ counter.jsx</span><br><span class="line">â”œâ”€â”€ components</span><br><span class="line">â”‚   â””â”€â”€ app.jsx</span><br><span class="line">â”œâ”€â”€ reducers</span><br><span class="line">â”‚   â””â”€â”€ counter.jsx</span><br><span class="line">â””â”€â”€ store</span><br><span class="line">    â””â”€â”€ app.jsx</span><br><span class="line">â”œâ”€â”€ index.jsx</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œçœ‹å…¥å£æ–‡ä»¶ <code>index.js</code>:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">"redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">"./reducers/counter.jsx"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./store/app.jsx"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Provider&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById("root")</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure><p>Provider ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯ Context å®ç°çš„ï¼Œæä¾›ä¸€ä¸ªçŠ¶æ€ä¾›è·¨ç»„ä»¶ä½¿ç”¨ï¼Œåªéœ€è¦æŠŠ store ç»™ä»–ä¼ è¿‡å»ï¼Œæ‰€æœ‰çš„å­ç»„ä»¶å°±å¯ä»¥é€šè¿‡ props å±æ€§æ‹¿åˆ°çŠ¶æ€å€¼ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Context = React.createContext();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Provider</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å°†React-reduxä¸­çš„ProvideåŒ…è£…äº†reactæä¾›çš„APIç”Ÿæˆçš„Context.Provider</span></span><br><span class="line">  <span class="comment">//&lt;Provider store=&#123;xxxx&#125;&gt;&lt;/Provider&gt;ï¼Œå°†storeæŒ‚è½½åœ¨contexä¸Š</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Context.Provider value=&#123;&#123; <span class="attr">store</span>: <span class="keyword">this</span>.props.store &#125;&#125;&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.props.children&#125; <span class="comment">//å­ç»„ä»¶</span></span><br><span class="line">      &lt;<span class="regexp">/Context.Provider&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>Reducer å‡½æ•°ï¼Œå®ƒæ¥å— Action å’Œå½“å‰ State ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Stateï¼Œå†…å®¹å’Œä¹‹å‰çš„å‡ ä¹å·®ä¸å¤šï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">"./reducers/counter.jsx"</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./reducers/counter.jsx</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = &#123; counter: <span class="number">0</span> &#125;, action = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; counter &#125; = state;</span><br><span class="line">  <span class="keyword">const</span> &#123; type &#125; = action;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: counter + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREASE"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: counter - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>React-Redux çš„æ ¸å¿ƒä¹‹ä¸€ connect æ–¹æ³•ï¼Œç”¨äºä» UI ç»„ä»¶ç”Ÿæˆå®¹å™¨ç»„ä»¶ã€‚connect æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š<code>mapStateToProps</code> å’Œ <code>mapDispatchToProps</code>ã€‚å®ƒä»¬å®šä¹‰äº† UI ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ã€‚å‰è€…è´Ÿè´£è¾“å…¥é€»è¾‘ï¼Œå³å°† state æ˜ å°„åˆ° UI ç»„ä»¶çš„å‚æ•°ï¼ˆpropsï¼‰ï¼Œåè€…è´Ÿè´£è¾“å‡ºé€»è¾‘ï¼Œå³å°†ç”¨æˆ·å¯¹ UI ç»„ä»¶çš„æ“ä½œæ˜ å°„æˆ Actionã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./store/app.jsx"</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./store/app.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./../components/app.jsx"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  increaseAction,</span><br><span class="line">  decreaseAction,</span><br><span class="line">  resetAction</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"./../actions/counter.jsx"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mapStateToPropsç”¨æˆ·è‡ªå·±å®šä¹‰éœ€è¦çš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123; <span class="attr">counter</span>: state.counter &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> (&#123;</span><br><span class="line">  onIncreaseHandle: <span class="function"><span class="params">()</span> =&gt;</span> dispatch(increaseAction),</span><br><span class="line">  onDecreaseHandle: <span class="function"><span class="params">()</span> =&gt;</span> dispatch(decreaseAction),</span><br><span class="line">  onResetHandle: <span class="function"><span class="params">()</span> =&gt;</span> dispatch(resetAction)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(App);</span><br></pre></td></tr></table></figure><p>Action çš„ type å±æ€§ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./../actions/counter.jsx</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> increaseAction = &#123; <span class="attr">type</span>: <span class="string">"INCREASE"</span> &#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> decreaseAction = &#123; <span class="attr">type</span>: <span class="string">"DECREASE"</span> &#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> resetAction = &#123; <span class="attr">type</span>: <span class="string">"RESET"</span> &#125;;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ç†Ÿæ‚‰çš„ App ç»„ä»¶åº”è¯¥æ€ä¹ˆå†™ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import App from "./../components/app.jsx";</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">      counter,</span><br><span class="line">      onIncreaseHandle,</span><br><span class="line">      onDecreaseHandle,</span><br><span class="line">      onResetHandle</span><br><span class="line">    &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;counter&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;onIncreaseHandle&#125;&gt;+1&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;onDecreaseHandle&#125;&gt;<span class="number">-1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;onResetHandle&#125;&gt;0&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure><p>å‰æœŸåšäº†è®¸å¤šå·¥ä½œï¼Œè¿™é‡Œå¦‚åŒä»çˆ¶ç»„ä»¶é‡Œè·å– props å±æ€§èˆ¬è·å–ã€è§¦å‘ç­‰è¡Œä¸ºï¼Œæ‰€æœ‰ store é‡Œçš„ state éƒ½é€šè¿‡ connect æ–¹æ³•ç»™å¤„ç†äº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect(mapStateToProps, mapDispatchToProps)(App);</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œè®¡æ•°å™¨åŸºæœ¬çš„åŠŸèƒ½éƒ½å¥½äº†ï¼Œæˆ‘çš„ <a href="https://github.com/yangtao2o/myreact/tree/master/myredux/react-redux-counter" target="_blank" rel="noopener">Demo</a>ï¼Œé˜®ä¸€å³°è€å¸ˆçš„ <a href="https://github.com/jackielii/simplest-redux-example/blob/master/index.js" target="_blank" rel="noopener">Demo</a>ï¼Œä»¥åŠè®²è§£çš„æ–‡ç« ï¼Œ<a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰ï¼šReact-Redux çš„ç”¨æ³•</a>ï¼Œ<a href="https://juejin.im/post/5bcfce9ff265da0aa5294a25" target="_blank" rel="noopener">è®© react ç”¨èµ·æ¥æ›´å¾—å¿ƒåº”æ‰‹â€”â€”ï¼ˆreact-reduxï¼‰</a>ã€‚</p><h2 id="React-Hooks"><a href="#React-Hooks" class="headerlink" title="React Hooks"></a>React Hooks</h2><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸€ï¼‰ï¼šåŸºæœ¬ç”¨æ³•</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰ï¼šReact-Redux çš„ç”¨æ³•</a></li><li><a href="https://juejin.im/post/5bcfce9ff265da0aa5294a25" target="_blank" rel="noopener">è®© react ç”¨èµ·æ¥æ›´å¾—å¿ƒåº”æ‰‹â€”â€”ï¼ˆreact-reduxï¼‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS å¼‚æ­¥å¤„ç†çš„å‡ ç§æ–¹å¼Â·è¯·æ±‚ç¯‡</title>
      <link href="/2019/12/29/async-method-2/"/>
      <url>/2019/12/29/async-method-2/</url>
      
        <content type="html"><![CDATA[<h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="https://github.com/mqyqingfeng/Blog/issues/98" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Promise</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/101" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹å¼‚æ­¥å¤„ç†å®æˆ˜</a></li><li><a href="https://github.com/mqyqingfeng/Blog#es6-%E7%B3%BB%E5%88%97%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener">ES6 ç³»åˆ— - å†´ç¾½çš„åšå®¢</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS å¼‚æ­¥å¤„ç†çš„å‡ ç§æ–¹å¼Â·çº¢ç¯ç¯‡</title>
      <link href="/2019/12/29/async-method-1/"/>
      <url>/2019/12/29/async-method-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®ï¼šçº¢ç¯ä¸‰ç§’äº®ä¸€æ¬¡ï¼Œç»¿ç¯ä¸€ç§’äº®ä¸€æ¬¡ï¼Œé»„ç¯ä¸¤ç§’äº®ä¸€æ¬¡ï¼Œä¸æ–­äº¤æ›¿å¾ªç¯</p></blockquote><a id="more"></a><p>å…ˆå®šä¹‰ä¸‹çº¢ç»¿ç¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">red</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"red"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">green</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"green"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yellow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"yellow"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼‚æ­¥ç¼–ç¨‹çš„è¯­æ³•ç›®æ ‡ï¼Œå°±æ˜¯æ€æ ·è®©å®ƒæ›´åƒåŒæ­¥ç¼–ç¨‹,æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>å›è°ƒå‡½æ•°å®ç°</li><li>äº‹ä»¶ç›‘å¬ event</li><li>å‘å¸ƒè®¢é˜… Publish/Subscribe</li><li>Promise å’Œ Generator</li><li>Async/await</li></ul><h2 id="ä¸€ã€å›è°ƒå‡½æ•°"><a href="#ä¸€ã€å›è°ƒå‡½æ•°" class="headerlink" title="ä¸€ã€å›è°ƒå‡½æ•°"></a>ä¸€ã€å›è°ƒå‡½æ•°</h2><p>è¿™æ˜¯æœ€å¸¸è§çš„ä¸€ç§æ–¹å¼ï¼ŒæŠŠå‡½æ•°ä½œä¸ºå‚æ•°é€å…¥ï¼Œç„¶åå›è°ƒã€‚</p><p>ç¬¬ä¸€ç‰ˆï¼šç®€å•æ˜äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"wait for about 3 seconds..."</span>);</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    red();</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      green();</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        yellow();</span><br><span class="line">        step();</span><br><span class="line">      &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">step();</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç‰ˆï¼šå°è£…å®šæ—¶å™¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> light = <span class="function">(<span class="params">timmer, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, timmer);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  light(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">    red();</span><br><span class="line">    light(<span class="number">1000</span>, () =&gt; &#123;</span><br><span class="line">      green();</span><br><span class="line">      light(<span class="number">2000</span>, () =&gt; &#123;</span><br><span class="line">        yellow();</span><br><span class="line">        step();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">typeof</span> cb === <span class="string">"function"</span> &amp;&amp; cb();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">step(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"wait for about 3 seconds..."</span>));</span><br></pre></td></tr></table></figure><h2 id="äºŒã€äº‹ä»¶ç›‘å¬"><a href="#äºŒã€äº‹ä»¶ç›‘å¬" class="headerlink" title="äºŒã€äº‹ä»¶ç›‘å¬"></a>äºŒã€äº‹ä»¶ç›‘å¬</h2><p>é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å¼ã€‚ä»»åŠ¡çš„æ‰§è¡Œä¸å–å†³äºä»£ç çš„é¡ºåºï¼Œè€Œå–å†³äºæŸä¸ªäº‹ä»¶æ˜¯å¦å‘ç”Ÿã€‚</p><p>ç¬¬ä¸€ç‰ˆï¼šç›‘å¬ä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”æ‰§è¡Œäº‹ä»¶é‡Œçš„å›è°ƒå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ Node events æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">"events"</span>);</span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> events.EventEmitter();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬</span></span><br><span class="line">emitter.on(<span class="string">"lightEvent"</span>, str =&gt; <span class="built_in">console</span>.log(str));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘</span></span><br><span class="line">emitter.emit(<span class="string">"lightEvent"</span>, <span class="string">"red"</span>);</span><br><span class="line">emitter.emit(<span class="string">"lightEvent"</span>, <span class="string">"green"</span>);</span><br><span class="line">emitter.emit(<span class="string">"lightEvent"</span>, <span class="string">"yellow"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// red</span></span><br><span class="line"><span class="comment">// green</span></span><br><span class="line"><span class="comment">// yellow</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç‰ˆï¼šåŠ ä¸ªé¡ºåºæ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ Node events æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">"events"</span>);</span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> events.EventEmitter();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightHandler = <span class="function">(<span class="params">timmer, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, timmer);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬</span></span><br><span class="line">emitter.on(<span class="string">"lightEvent"</span>, str =&gt; <span class="built_in">console</span>.log(str));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  lightHandler(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">    emitter.emit(<span class="string">"lightEvent"</span>, <span class="string">"red"</span>);</span><br><span class="line">    lightHandler(<span class="number">1000</span>, () =&gt; &#123;</span><br><span class="line">      emitter.emit(<span class="string">"lightEvent"</span>, <span class="string">"green"</span>);</span><br><span class="line">      lightHandler(<span class="number">2000</span>, () =&gt; &#123;</span><br><span class="line">        emitter.emit(<span class="string">"lightEvent"</span>, <span class="string">"yellow"</span>);</span><br><span class="line">        step();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">step();</span><br></pre></td></tr></table></figure><p>ä¾æ—§æ˜¯å›è°ƒæ‰§è¡Œï¼Œæˆ‘ä»¬ç»§ç»­è¿œå¾å§ã€‚</p><h2 id="ä¸‰ã€å‘å¸ƒ-è®¢é˜…"><a href="#ä¸‰ã€å‘å¸ƒ-è®¢é˜…" class="headerlink" title="ä¸‰ã€å‘å¸ƒ/è®¢é˜…"></a>ä¸‰ã€å‘å¸ƒ/è®¢é˜…</h2><blockquote><p>â€œäº‹ä»¶â€ï¼Œå®Œå…¨å¯ä»¥ç†è§£æˆâ€ä¿¡å·â€ã€‚</p><p>æˆ‘ä»¬å‡å®šï¼Œå­˜åœ¨ä¸€ä¸ªâ€ä¿¡å·ä¸­å¿ƒâ€ï¼ŒæŸä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå°±å‘ä¿¡å·ä¸­å¿ƒâ€å‘å¸ƒâ€ï¼ˆpublishï¼‰ä¸€ä¸ªä¿¡å·ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥å‘ä¿¡å·ä¸­å¿ƒâ€è®¢é˜…â€ï¼ˆsubscribeï¼‰è¿™ä¸ªä¿¡å·ï¼Œä»è€ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™è‡ªå·±å¯ä»¥å¼€å§‹æ‰§è¡Œã€‚è¿™å°±å«åšâ€å‘å¸ƒ/è®¢é˜…æ¨¡å¼â€ï¼ˆpublish-subscribe patternï¼‰ï¼Œåˆç§°â€è§‚å¯Ÿè€…æ¨¡å¼â€ï¼ˆobserver patternï¼‰ã€‚ - é˜®ä¸€å³°</p></blockquote><p>è®¢é˜…è€…ï¼ˆSubscriberï¼‰æŠŠè‡ªå·±æƒ³è®¢é˜…çš„äº‹ä»¶æ³¨å†Œï¼ˆSubscribeï¼‰åˆ°è°ƒåº¦ä¸­å¿ƒï¼ˆEvent Channelï¼‰ï¼Œå½“å‘å¸ƒè€…ï¼ˆPublisherï¼‰å‘å¸ƒè¯¥äº‹ä»¶ï¼ˆPublish Eventï¼‰åˆ°è°ƒåº¦ä¸­å¿ƒï¼Œä¹Ÿå°±æ˜¯è¯¥äº‹ä»¶è§¦å‘æ—¶ï¼Œç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€è°ƒåº¦ï¼ˆFire Eventï¼‰è®¢é˜…è€…æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒçš„å¤„ç†ä»£ç ã€‚</p><p>ç¬¬ä¸€ç‰ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> publisher = &#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜åˆ—è¡¨</span></span><br><span class="line">  lists: &#123;&#125;,</span><br><span class="line">  <span class="comment">// è®¢é˜…</span></span><br><span class="line">  subscribe: <span class="function"><span class="keyword">function</span>(<span class="params">event, handler</span>) </span>&#123;</span><br><span class="line">    (<span class="keyword">this</span>.lists[event] || (<span class="keyword">this</span>.lists[event] = [])).push(handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å‘å¸ƒ</span></span><br><span class="line">  publish: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> event = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">const</span> events = <span class="keyword">this</span>.lists[event];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!events || events.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    events.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      item.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…</span></span><br><span class="line">publisher.subscribe(<span class="string">"lightEvent"</span>, red);</span><br><span class="line">publisher.subscribe(<span class="string">"lightEvent"</span>, green);</span><br><span class="line">publisher.subscribe(<span class="string">"lightEvent"</span>, yellow);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¸ƒ</span></span><br><span class="line">publisher.publish(<span class="string">"lightEvent"</span>);</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç‰ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> publisher = &#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜åˆ—è¡¨</span></span><br><span class="line">  lists: &#123;&#125;,</span><br><span class="line">  <span class="comment">// è®¢é˜…</span></span><br><span class="line">  subscribe: <span class="function"><span class="keyword">function</span>(<span class="params">event, handler</span>) </span>&#123;</span><br><span class="line">    (<span class="keyword">this</span>.lists[event] || (<span class="keyword">this</span>.lists[event] = [])).push(handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line">  unsubscribe: <span class="function"><span class="keyword">function</span>(<span class="params">event, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> events = <span class="keyword">this</span>.lists[event];</span><br><span class="line">    <span class="keyword">if</span> (!events) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!handler) &#123;</span><br><span class="line">      events &amp;&amp; (events.length = <span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      events.forEach(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item === handler) &#123;</span><br><span class="line">          events.splice(i, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å‘å¸ƒ</span></span><br><span class="line">  publish: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> event = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">const</span> events = <span class="keyword">this</span>.lists[event];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!events || events.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    events.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      item.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lightHandler = <span class="function">(<span class="params">timmer, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    cb();</span><br><span class="line">  &#125;, timmer);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> colorHandler = <span class="function"><span class="params">color</span> =&gt;</span> <span class="built_in">console</span>.log(color);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…</span></span><br><span class="line">publisher.subscribe(<span class="string">"redEvent"</span>, colorHandler);</span><br><span class="line">publisher.subscribe(<span class="string">"greenEvent"</span>, colorHandler);</span><br><span class="line">publisher.subscribe(<span class="string">"yellowEvent"</span>, colorHandler);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  lightHandler(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">    publisher.publish(<span class="string">"redEvent"</span>, <span class="string">"red"</span>);</span><br><span class="line">    lightHandler(<span class="number">1000</span>, () =&gt; &#123;</span><br><span class="line">      publisher.publish(<span class="string">"greenEvent"</span>, <span class="string">"green"</span>);</span><br><span class="line">      lightHandler(<span class="number">2000</span>, () =&gt; &#123;</span><br><span class="line">        publisher.publish(<span class="string">"yellowEvent"</span>, <span class="string">"yellow"</span>);</span><br><span class="line">        step();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">step();</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Promise"><a href="#ä¸‰ã€Promise" class="headerlink" title="ä¸‰ã€Promise"></a>ä¸‰ã€Promise</h2><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> light = <span class="function">(<span class="params">timmer, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      cb();</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, timmer);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> step = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">Promise</span>.resolve()</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> light(<span class="number">3000</span>, red);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> light(<span class="number">1000</span>, green);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> light(<span class="number">2000</span>, yellow);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      step();</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">step();</span><br></pre></td></tr></table></figure><h2 id="å››ã€Generator"><a href="#å››ã€Generator" class="headerlink" title="å››ã€Generator"></a>å››ã€Generator</h2><p>Promise çš„å†™æ³•å‡å°‘äº†å¥½å¤šå›è°ƒï¼Œä½†æ˜¯ä»æœ‰å›è°ƒçš„å­˜åœ¨ï¼Œè¿™æ¬¡å°è¯•ä½¿ç”¨ Generatorï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿé¿å…å›è°ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> light = <span class="function">(<span class="params">timmer, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      cb();</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, timmer);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> light(<span class="number">3000</span>, red);</span><br><span class="line">  <span class="keyword">yield</span> light(<span class="number">1000</span>, green);</span><br><span class="line">  <span class="keyword">yield</span> light(<span class="number">3000</span>, yellow);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterator = gen();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> step = <span class="function">(<span class="params">gen, iterator</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = iterator.next();</span><br><span class="line">  <span class="comment">// è¿”å› &#123; value: Promise &#123; &lt;pending&gt; &#125;, done: false &#125;</span></span><br><span class="line">  <span class="keyword">if</span> (s.done) &#123;</span><br><span class="line">    step(gen, gen());</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// value è¿”å› Promise å¯¹è±¡</span></span><br><span class="line">    s.value.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      step(gen, iterator);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">step(gen, iterator);</span><br></pre></td></tr></table></figure><h2 id="äº”ã€Async-await"><a href="#äº”ã€Async-await" class="headerlink" title="äº”ã€Async/await"></a>äº”ã€Async/await</h2><p>æœ‰äº† Generator åšé“ºå«ï¼Œ<code>async/await</code> å°±æ¯”è¾ƒå®¹æ˜“ç†è§£äº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> light = <span class="function">(<span class="params">timmer, cb</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      cb();</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, timmer);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> light(<span class="number">3000</span>, red);</span><br><span class="line">  <span class="keyword">await</span> light(<span class="number">1000</span>, green);</span><br><span class="line">  <span class="keyword">await</span> light(<span class="number">2000</span>, yellow);</span><br><span class="line">  step();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">step();</span><br></pre></td></tr></table></figure><p>åŒæ­¥å†™æ³•ï¼Œå®¹æ˜“ç†è§£ï¼Œå’Œæˆ‘ä»¬çš„çº¿æ€§æ€è€ƒæ–¹å¼ä¸€è‡´ï¼Œ<code>async/await</code>æ˜¯ <code>ES2017</code> çš„æ–¹æ¡ˆã€‚</p><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/dojo-lzz/p/5495671.html" target="_blank" rel="noopener">ä¸€é“å…³äº Promise åº”ç”¨çš„é¢è¯•é¢˜</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/98" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Promise</a></li><li><a href="http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html" target="_blank" rel="noopener">Javascript å¼‚æ­¥ç¼–ç¨‹çš„ 4 ç§æ–¹æ³•</a></li><li><a href="https://juejin.im/post/5cd97d75e51d453a69177ecc" target="_blank" rel="noopener">JavaScript | å¼‚æ­¥å¤„ç†</a></li><li><a href="https://www.cnblogs.com/pingfan1990/p/4661841.html" target="_blank" rel="noopener">nodejs äº‹ä»¶çš„ç›‘å¬ä¸äº‹ä»¶çš„è§¦å‘</a></li><li><a href="https://www.codercto.com/a/81223.html" target="_blank" rel="noopener">JavaScript å‘å¸ƒ-è®¢é˜…æ¨¡å¼</a></li><li><a href="https://www.jb51.net/article/154921.htm" target="_blank" rel="noopener">JavaScript å®ç°ä¸ä½¿ç”¨å‘å¸ƒ/è®¢é˜…æ¨¡å¼è¯¦è§£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢ä¸€ä¸‹ NodeList å’Œ HTMLCollection</title>
      <link href="/2019/12/03/html-nodelist/"/>
      <url>/2019/12/03/html-nodelist/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸»è¦åŒºåˆ«æ˜¯ï¼ŒNodeList å¯ä»¥åŒ…å«å„ç§ç±»å‹çš„èŠ‚ç‚¹ï¼ŒHTMLCollection åªèƒ½åŒ…å« HTML å…ƒç´ èŠ‚ç‚¹ã€‚</p></blockquote><a id="more"></a><h2 id="NodeList-æ¥å£"><a href="#NodeList-æ¥å£" class="headerlink" title="NodeList æ¥å£"></a>NodeList æ¥å£</h2><p>NodeList å®ä¾‹æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒçš„æˆå‘˜æ˜¯èŠ‚ç‚¹å¯¹è±¡ã€‚é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¯ä»¥å¾—åˆ° NodeList å®ä¾‹ã€‚</p><ul><li>Node.childNodes</li><li>document.querySelectorAll() ç­‰èŠ‚ç‚¹æœç´¢æ–¹æ³•</li></ul><p>NodeList å®ä¾‹å¾ˆåƒæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨ length å±æ€§å’Œ forEach æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå®ƒä¸æ˜¯æ•°ç»„ï¼Œä¸èƒ½ä½¿ç”¨ pop æˆ– push ä¹‹ç±»æ•°ç»„ç‰¹æœ‰çš„æ–¹æ³•ã€‚</p><p>å¦‚æœ NodeList å®ä¾‹è¦ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œå¯ä»¥å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p><p>é™¤äº†ä½¿ç”¨ forEach æ–¹æ³•éå† NodeList å®ä¾‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ for å¾ªç¯ã€‚</p><ul><li>NodeList.prototype.lengthï¼Œlength å±æ€§è¿”å› NodeList å®ä¾‹åŒ…å«çš„èŠ‚ç‚¹æ•°é‡</li><li>NodeList.prototype.forEach()ï¼Œéå† NodeList çš„æ‰€æœ‰æˆå‘˜</li><li>NodeList.prototype.item()ï¼Œitem æ–¹æ³•æ¥å—ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæˆå‘˜çš„ä½ç½®ï¼Œè¿”å›è¯¥ä½ç½®ä¸Šçš„æˆå‘˜ã€‚</li></ul><p>ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ï¼Œéƒ½è¿”å›ä¸€ä¸ª ES6 çš„éå†å™¨å¯¹è±¡ï¼Œ<code>for...of</code> å¯è·å–æ¯ä¸€ä¸ªæˆå‘˜ä¿¡æ¯ï¼š</p><ul><li>NodeList.prototype.keys()ï¼Œè¿”å›é”®åçš„éå†å™¨</li><li>NodeList.prototype.values()ï¼Œè¿”å›é”®å€¼çš„éå†å™¨</li><li>NodeList.prototype.entries()ï¼Œè¿”å›çš„éå†å™¨</li></ul><h2 id="HTMLCollection-æ¥å£"><a href="#HTMLCollection-æ¥å£" class="headerlink" title="HTMLCollection æ¥å£"></a>HTMLCollection æ¥å£</h2><p>HTMLCollection æ˜¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡çš„é›†åˆï¼Œåªèƒ½åŒ…å«å…ƒç´ èŠ‚ç‚¹ï¼ˆelementï¼‰ï¼Œä¸èƒ½åŒ…å«å…¶ä»–ç±»å‹çš„èŠ‚ç‚¹ã€‚</p><p>å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä½†æ˜¯ä¸ NodeList æ¥å£ä¸åŒï¼ŒHTMLCollection æ²¡æœ‰ forEach æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨ for å¾ªç¯éå†ã€‚</p><p>è¿”å› HTMLCollection å®ä¾‹çš„ï¼Œä¸»è¦æ˜¯ä¸€äº› Document å¯¹è±¡çš„é›†åˆå±æ€§ï¼Œæ¯”å¦‚ document.linksã€document.formsã€document.images ç­‰ã€‚</p><ul><li>HTMLCollection.prototype.length</li><li>HTMLCollection.prototype.item()</li><li>HTMLCollection.prototype.namedItem()ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º id å±æ€§æˆ– name å±æ€§çš„å€¼ï¼Œè¿”å›å¯¹åº”çš„å…ƒç´ èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ™è¿”å› nullã€‚</li></ul><h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><p>å…±åŒç‚¹ï¼š</p><ul><li>ç±»æ•°ç»„å¯¹è±¡ï¼Œæœ‰ length å±æ€§</li><li>å…±åŒçš„æ–¹æ³•ï¼šitemï¼Œå¯ä»¥é€šè¿‡ item(index) æˆ–è€… item(id) æ¥è®¿é—®è¿”å›ç»“æœä¸­çš„å…ƒç´ </li><li>å®æ—¶å˜åŠ¨çš„ï¼ˆliveï¼‰ï¼Œdocument ä¸Šçš„æ›´æ”¹ä¼šåæ˜ åˆ°ç›¸å…³å¯¹è±¡ä¸Šï¼ˆä¾‹å¤–ï¼šdocument.querySelectorAll è¿”å›çš„ NodeList ä¸æ˜¯å®æ—¶çš„ï¼‰</li></ul><p>åŒºåˆ«ï¼š</p><ul><li>NodeList å¯ä»¥åŒ…å«ä»»ä½•èŠ‚ç‚¹ç±»å‹ï¼ŒHTMLCollection åªåŒ…å«å…ƒç´ èŠ‚ç‚¹ï¼ˆelementNodeï¼‰ï¼ŒelementNode å°±æ˜¯ HTML ä¸­çš„æ ‡ç­¾</li><li>HTMLCollection æ¯” NodeList å¤šä¸€é¡¹æ–¹æ³•ï¼šnamedItemï¼Œå¯ä»¥é€šè¿‡ä¼ é€’ id æˆ– name å±æ€§æ¥è·å–èŠ‚ç‚¹ä¿¡æ¯</li></ul><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="http://wangdoc.com/javascript/dom/nodelist.html" target="_blank" rel="noopener">NodeList æ¥å£ï¼ŒHTMLCollection æ¥å£</a></li><li><a href="https://www.jianshu.com/p/f6ff5ebe45fd" target="_blank" rel="noopener">HTMLCollection vs. NodeList</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°† Hexo å’Œ Vuepress é™æ€èµ„æºæ¨é€è‡³ Ubuntu</title>
      <link href="/2019/11/27/ubuntu-aliyun/"/>
      <url>/2019/11/27/ubuntu-aliyun/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”±äºå·²ç»å¼€é€šçš„ Hexo å’Œ Vuepress åšå®¢ï¼Œéƒ½æŒ‚åœ¨ github çš„å…è´¹æœåŠ¡å™¨ä¸Šï¼ŒåŠ è½½é€Ÿåº¦ä¸å ªå¿ç¹ï¼Œæ‰€ä»¥æ‰“ç®—æŒ‚åœ¨é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä¸Šï¼Œè¿‡ç¨‹å¯ä»¥ç”¨ä¸¾æ­¥ç»´è‰°æ¥å½¢å®¹ã€‚</p></blockquote><a id="more"></a><h2 id="ä½¿ç”¨-ssh-è¿œç¨‹ç™»å½•"><a href="#ä½¿ç”¨-ssh-è¿œç¨‹ç™»å½•" class="headerlink" title="ä½¿ç”¨ ssh è¿œç¨‹ç™»å½•"></a>ä½¿ç”¨ ssh è¿œç¨‹ç™»å½•</h2><ul><li>Ubuntu å¸¸ç”¨å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°æºåˆ—è¡¨</span></span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… SSH</span></span><br><span class="line">apt-get install openssh-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ SSH æœåŠ¡æ˜¯å¦å¯åŠ¨</span></span><br><span class="line">ps -e | grep ssh</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ã€é‡å¯</span></span><br><span class="line">service ssh stop</span><br><span class="line">service ssh start</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ ip</span></span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ ssh ç™»å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@47.101.33.81</span><br></pre></td></tr></table></figure><p>ç”±äºä¹‹å‰æˆ‘è¿œç¨‹ç™»å½•è¿‡ CentOSï¼Œæ‰€ä»¥æ¢æˆ Ubuntu ä¹‹åï¼Œå†æ¬¡è¿œç¨‹ç™»å½•ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æ— æ³•è¿æ¥ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">~ â¯â¯â¯ ssh root@47.101.33.81</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br><span class="line">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br><span class="line">It is also possible that a host key has just been changed.</span><br><span class="line">The fingerprint <span class="keyword">for</span> the ECDSA key sent by the remote host is</span><br><span class="line">SHA256:neXCznmpgVyF/0YSiDxOjD/8A1+4ND2D9+fZjUozbzc.</span><br><span class="line">Please contact your system administrator.</span><br><span class="line">Add correct host key <span class="keyword">in</span> /Users/yangtao/.ssh/known_hosts to get rid of this message.</span><br><span class="line">Offending ECDSA key <span class="keyword">in</span> /Users/yangtao/.ssh/known_hosts:5</span><br><span class="line">ECDSA host key <span class="keyword">for</span> 47.101.33.81 has changed and you have requested strict checking.</span><br><span class="line">Host key verification failed.</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œæ ¹æ®æç¤ºï¼Œæˆ‘å°±è¿›å…¥ç›®å½•ä¸‹ï¼Œåˆ é™¤äº†ä¹‹å‰ä¿ç•™çš„ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ â¯â¯â¯ vim /Users/yangtao/.ssh/known_hosts</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œä¿å­˜ï¼Œå†æ¬¡ç™»å½•ï¼Œå°±ä¼šé‡æ–°è®¾ç½®ï¼Œä¹Ÿå°±è¿œç¨‹ç™»å½•æˆåŠŸã€‚</p><h2 id="åœ¨-Ubuntu-18-04-ä¸Šå®‰è£…å’Œé…ç½®-Nginx"><a href="#åœ¨-Ubuntu-18-04-ä¸Šå®‰è£…å’Œé…ç½®-Nginx" class="headerlink" title="åœ¨ Ubuntu 18.04 ä¸Šå®‰è£…å’Œé…ç½® Nginx"></a>åœ¨ Ubuntu 18.04 ä¸Šå®‰è£…å’Œé…ç½® Nginx</h2><h3 id="å®‰è£…-Nginx"><a href="#å®‰è£…-Nginx" class="headerlink" title="å®‰è£… Nginx"></a>å®‰è£… Nginx</h3><p>æˆ‘ä¹ æƒ¯ fishï¼Œå¯ä»¥é¢„è£…ä¸€ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt install fish</span><br><span class="line"></span><br><span class="line">root@istaotao:~<span class="comment"># fish</span></span><br><span class="line">Welcome to fish, the friendly interactive shell</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šå¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œéœ€è¦ <code>sudo</code>ï¼Œå¦‚ï¼š<code>sudo apt install fish</code>ã€‚</p><p>Nginx çš„è½¯ä»¶åŒ…åœ¨ Ubuntu é»˜è®¤è½¯ä»¶ä»“åº“ä¸­å¯ç”¨ã€‚ å®‰è£…éå¸¸ç®€å•ï¼Œåªéœ€é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install nginx</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ Nginx æœåŠ¡çš„çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@istaotao ~<span class="comment"># nginx -v</span></span><br><span class="line">nginx version: nginx/1.14.0 (Ubuntu)</span><br></pre></td></tr></table></figure><p>ç„¶åè®¿é—®å…¬ç½‘ ipï¼Œæˆ–è€…åŸŸåï¼Œå°±å¯ä»¥çœ‹åˆ°æ¬¢è¿ç•Œé¢ï¼Œå¦‚æœé•¿æ—¶é—´æ²¡æœ‰å“åº”ï¼Œè¯´æ˜ä½ çš„æœåŠ¡å™¨åº”è¯¥æ²¡æœ‰å¼€å¯ 80 ç«¯å£ã€‚</p><p>å‚è€ƒï¼š<a href="https://segmentfault.com/q/1010000009437407" target="_blank" rel="noopener">é˜¿é‡Œäº‘ ubuntu nginx æ— æ³•è®¿é—®ï¼Œæ±‚è§£ç­”</a></p><h3 id="ä½¿ç”¨-systemctl-ç®¡ç†-Nginx-æœåŠ¡"><a href="#ä½¿ç”¨-systemctl-ç®¡ç†-Nginx-æœåŠ¡" class="headerlink" title="ä½¿ç”¨ systemctl ç®¡ç† Nginx æœåŠ¡"></a>ä½¿ç”¨ systemctl ç®¡ç† Nginx æœåŠ¡</h3><p>æ‚¨å¯ä»¥åƒä»»ä½•å…¶ä»– systemd å•ä½ä¸€æ ·ç®¡ç† Nginx æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¦åœæ­¢NginxæœåŠ¡ï¼Œè¯·è¿è¡Œï¼š</span></span><br><span class="line">systemctl stop nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¦å†æ¬¡å¯åŠ¨ï¼Œè¯·é”®å…¥ï¼š</span></span><br><span class="line">systemctl start nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°å¯åŠ¨NginxæœåŠ¡ï¼š</span></span><br><span class="line">systemctl restart nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨è¿›è¡Œä¸€äº›é…ç½®æ›´æ”¹åé‡æ–°åŠ è½½NginxæœåŠ¡ï¼š</span></span><br><span class="line">systemctl reload nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœä½ æƒ³ç¦ç”¨NginxæœåŠ¡åœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼š</span></span><br><span class="line">systemctl <span class="built_in">disable</span> nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹¶é‡æ–°å¯ç”¨å®ƒï¼š</span></span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥WebæœåŠ¡å™¨æ˜¯å¦åœ¨è¿è¡Œ</span></span><br><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ service ç®¡ç† Nginx æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœæ­¢NginxæœåŠ¡ï¼Œè¯·è¿è¡Œï¼š</span></span><br><span class="line">service nginx stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¦å†æ¬¡å¯åŠ¨ï¼Œè¯·é”®å…¥ï¼š</span></span><br><span class="line">service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°å¯åŠ¨NginxæœåŠ¡ï¼š</span></span><br><span class="line">service nginx restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨è¿›è¡Œä¸€äº›é…ç½®æ›´æ”¹åé‡æ–°åŠ è½½NginxæœåŠ¡ï¼š</span></span><br><span class="line">service nginx reload</span><br></pre></td></tr></table></figure><h3 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><p>è·å¾—åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶çš„åˆ—è¡¨ï¼š<code>ufw app list</code>ï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼š<code>ufw status</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@istaotao ~<span class="comment"># ufw app list</span></span><br><span class="line">Available applications:</span><br><span class="line">  Nginx Full</span><br><span class="line">  Nginx HTTP</span><br><span class="line">  Nginx HTTPS</span><br><span class="line">  OpenSSH</span><br></pre></td></tr></table></figure><h3 id="Nginx-æ–‡ä»¶å’Œç›®å½•è¯´æ˜"><a href="#Nginx-æ–‡ä»¶å’Œç›®å½•è¯´æ˜" class="headerlink" title="Nginx æ–‡ä»¶å’Œç›®å½•è¯´æ˜"></a>Nginx æ–‡ä»¶å’Œç›®å½•è¯´æ˜</h3><p>nginx æœåŠ¡å™¨é…ç½®æ–‡ä»¶ï¼š</p><ul><li><strong>/etc/nginx</strong></li></ul><p>Nginx é…ç½®ç›®å½•ã€‚æ‰€æœ‰çš„ Nginx é…ç½®æ–‡ä»¶éƒ½é©»ç•™åœ¨è¿™é‡Œã€‚</p><ul><li><strong>/etc/nginx/nginx.conf</strong></li></ul><p>ä¸»è¦çš„ Nginx é…ç½®æ–‡ä»¶ã€‚  è¿™å¯ä»¥ä¿®æ”¹ï¼Œä»¥æ›´æ”¹ Nginx å…¨å±€é…ç½®ã€‚</p><ul><li><strong>/etc/nginx/sites-available/</strong></li></ul><p>å¯å­˜å‚¨æ¯ä¸ªç«™ç‚¹æœåŠ¡å™¨å—çš„ç›®å½•ã€‚  é™¤éå°† Nginx é“¾æ¥åˆ°<code>sites-enabledäº†sites-enabled</code>ç›®å½•ï¼Œå¦åˆ™ Nginx ä¸ä¼šä½¿ç”¨æ­¤ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ã€‚  é€šå¸¸ï¼Œæ‰€æœ‰æœåŠ¡å™¨å—é…ç½®éƒ½åœ¨æ­¤ç›®å½•ä¸­å®Œæˆï¼Œç„¶åé€šè¿‡é“¾æ¥åˆ°å…¶ä»–ç›®å½•å¯ç”¨ã€‚</p><ul><li><strong>/etc/nginx/sites-enabled/</strong></li></ul><p>å­˜å‚¨å¯ç”¨çš„æ¯ä¸ªç«™ç‚¹æœåŠ¡å™¨å—çš„ç›®å½•ã€‚  é€šå¸¸ï¼Œè¿™äº›æ˜¯é€šè¿‡é“¾æ¥åˆ° sites-available ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶åˆ›å»ºçš„ã€‚</p><ul><li><strong>/etc/nginx/snippets</strong></li></ul><p>è¿™ä¸ªç›®å½•åŒ…å«å¯ä»¥åŒ…å«åœ¨ Nginx é…ç½®å…¶ä»–åœ°æ–¹çš„é…ç½®ç‰‡æ®µã€‚  å¯é‡å¤é…ç½®çš„ç‰‡æ®µå¯ä»¥é‡æ„ä¸ºç‰‡æ®µã€‚</p><p>nginx æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶ï¼š</p><ul><li><strong>/var/log/nginx/access.log</strong></li></ul><p>é™¤é Nginx é…ç½®ä¸ºå…¶ä»–æ–¹å¼ï¼Œå¦åˆ™æ¯ä¸ªå¯¹æ‚¨çš„ Web æœåŠ¡å™¨çš„è¯·æ±‚éƒ½ä¼šè®°å½•åœ¨æ­¤æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p><ul><li><strong>/var/log/nginx/error.log</strong></li></ul><p>ä»»ä½• Nginx é”™è¯¯éƒ½ä¼šè®°å½•åœ¨è¿™ä¸ªæ—¥å¿—ä¸­ã€‚</p><h3 id="è™šæ‹Ÿç«™ç‚¹çš„è®¾ç½®"><a href="#è™šæ‹Ÿç«™ç‚¹çš„è®¾ç½®" class="headerlink" title="è™šæ‹Ÿç«™ç‚¹çš„è®¾ç½®"></a>è™šæ‹Ÿç«™ç‚¹çš„è®¾ç½®</h3><p>Ubuntu 18.04 ä¸Šçš„ Nginx é»˜è®¤å¯ç”¨äº†ä¸€ä¸ªæœåŠ¡å™¨æ¨¡å—ï¼Œè¯¥æ¨¡å—è¢«é…ç½®ä¸ºåœ¨<code>/var/www/html</code>ç›®å½•ä¸‹æä¾›æ–‡æ¡£å†…å®¹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªè™šæ‹Ÿç½‘ç‚¹ã€‚</p><p>åˆ›å»º<code>example.com</code>ç›®å½•ï¼Œä½¿ç”¨<code>-p</code>æ ‡å¿—åˆ›å»ºä»»ä½•å¿…éœ€çš„çˆ¶ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /var/www/example.com/html</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨\$USER ç¯å¢ƒå˜é‡åˆ†é…ç›®å½•çš„æ‰€æœ‰æƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R <span class="variable">$USER</span>:<span class="variable">$USER</span> /var/www/example.com/html/</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç›®å½•çš„æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod -R 755 /var/www/example.com/html/</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª index.html é¡µé¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/www/example.com/html/index.html</span><br></pre></td></tr></table></figure><p>å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to Example.com!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Success! The example.com server block is working!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸ç›´æ¥ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨<code>/etc/nginx/sites-available/</code>ä¸Šåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶<code>example.com</code>ï¼Œå¹¶å°†å¦‚ä¸‹å†…å®¹å¤åˆ¶åˆ°<code>example.com</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        listen [::]:80;</span><br><span class="line"></span><br><span class="line">        root /var/www/example.com/html;</span><br><span class="line">        index index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">        server_name example.com www.example.com;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                try_files $uri $uri/ =404;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ“ä½œæ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx/sites-available/</span><br><span class="line">touch example.com</span><br><span class="line">vim example.com</span><br></pre></td></tr></table></figure><p>å¸¸è§„å¤åˆ¶å®Œæ¯•ä¹‹åï¼ŒæŒ‰<code>:</code>ä¹‹åï¼Œæ¥ç€æŒ‰<code>wq</code>ï¼Œvim å°±å¯ä»¥ä¿å­˜é€€å‡ºäº†ã€‚</p><p>åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œè¿åˆ°é»˜è®¤å¯åŠ¨<code>sites-enabled</code>ç›®å½•æ¥å¯ç”¨è¯¥æ–‡ä»¶ï¼Œè¯¥ç›®å½•æ˜¯ Nginx åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­è¯»å–çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ç”¨ä¸¤ä¸ªæœåŠ¡å™¨æ¨¡å—å¹¶å°†å…¶é…ç½®ä¸ºåŸºäº<code>listen</code>å’Œ<code>server_name</code>æŒ‡ä»¤å“åº”è¯·æ±‚ï¼š</p><p><strong>example.com</strong> ï¼šå°†å“åº”<code>example.com</code>å’Œ<code>www.example.com</code>è¯·æ±‚ã€‚</p><p><strong>default</strong> ï¼šå°†å“åº”ç«¯å£<code>80</code>ä¸Šä¸å…¶ä»–ä¸¤ä¸ªå—ä¸åŒ¹é…çš„ä»»ä½•è¯·æ±‚ã€‚</p><p>ä¸ºäº†é¿å…æ·»åŠ é¢å¤–çš„æœåŠ¡å™¨åç§°å¯èƒ½å¯¼è‡´çš„å“ˆå¸Œæ¡¶å†…å­˜é—®é¢˜ï¼Œæœ‰å¿…è¦è°ƒæ•´<code>/etc/nginx/nginx.conf</code>æ–‡ä»¶ä¸­çš„å•ä¸ªå€¼ã€‚</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°<code>server_names_hash_bucket_size 64</code>æŒ‡ä»¤å¹¶åˆ é™¤ # ç¬¦å·ä»¥å–æ¶ˆæ³¨é‡Šè¯¥è¡Œï¼š</p><p>æ¥ä¸‹æ¥ï¼Œæµ‹è¯•ä»¥ç¡®ä¿æ‚¨çš„ Nginx æ–‡ä»¶ä¸­æ²¡æœ‰è¯­æ³•é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -t</span><br><span class="line"></span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure><p>é‡å¯ nginxï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œéœ€è¦åœ¨æœ¬åœ° hosts æ–‡ä»¶æ·»åŠ å¯¹åº” hostï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ip æ¢æˆè‡ªå·±çš„é˜¿é‡Œäº‘ ip</span><br><span class="line">47.101.33.81 www.example.com</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå°±å¯ä»¥é€šè¿‡ <code>http://example.com</code>æ¥è®¿é—®åˆšåˆšè®¾ç½®çš„å†…å®¹ï¼Œè€Œè®¿é—®<code>http://47.101.33.81</code>ï¼Œä¾æ—§æ˜¯é»˜è®¤çš„å†…å®¹ã€‚</p><h2 id="hexo-éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š"><a href="#hexo-éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š" class="headerlink" title="hexo éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š"></a>hexo éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š</h2><p>æ•´ä¸ªæµç¨‹å°±æ˜¯æœ¬åœ°å°† *.md æ¸²æŸ“æˆé™æ€æ–‡ä»¶ï¼Œç„¶å Git æ¨é€åˆ°æœåŠ¡å™¨çš„ repository,æœåŠ¡å™¨å†é€šè¿‡ git-hooks åŒæ­¥ç½‘ç«™æ ¹ç›®å½•ã€‚</p><p><img src="https://ae01.alicdn.com/kf/H1aadf5b0baac42aaa45b753358768293V.jpg" alt="hexoçš„æ¶æ„"></p><h3 id="æœåŠ¡å™¨é…ç½®"><a href="#æœåŠ¡å™¨é…ç½®" class="headerlink" title="æœåŠ¡å™¨é…ç½®"></a>æœåŠ¡å™¨é…ç½®</h3><p>ä¸»è¦ä½¿ç”¨ <code>git hooks</code> æ¥å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚ä»¥ä¸‹æ­¥éª¤ä¸ºå…¶ä»–åšå®¢å®Œæ•´å†…å®¹ï¼Œä½†æ˜¯æˆ‘æ˜¯ç›´æ¥åœ¨ root ä¸‹æ“ä½œçš„ï¼Œæ‰€ä»¥å…³äºæƒé™ç­‰é—®é¢˜ï¼Œæ˜¯ç›´æ¥ç•¥è¿‡çš„ï¼Œç­‰åæœŸç†Ÿæ‚‰äº†å†åŠ ä¸Šã€‚</p><h4 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h4><p>å®‰è£… gitï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><h4 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h4><p>åˆ›å»ºä¸€ä¸ª git ç”¨æˆ·ï¼Œç”¨æ¥è¿è¡Œ git æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br></pre></td></tr></table></figure><p>è™½è¯´ç°åœ¨çš„ä»“åº“åªæœ‰æˆ‘ä»¬è‡ªå·±åœ¨ä½¿ç”¨ï¼Œæ–°å»ºä¸€ä¸ª git ç”¨æˆ·æ˜¾å¾—ä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œä½†æ˜¯ä¸ºäº†å®‰å…¨èµ·è§ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨å•ç‹¬çš„ git ç”¨æˆ·æ¥ä¸“é—¨è¿è¡Œ git æœåŠ¡ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h4><p>åˆ›å»ºè¯ä¹¦ç™»å½•ï¼ŒæŠŠè‡ªå·±ç”µè„‘çš„å…¬é’¥ï¼Œä¹Ÿå°±æ˜¯ <code>~/.ssh/id_rsa.pub</code> æ–‡ä»¶é‡Œçš„å†…å®¹æ·»åŠ åˆ°æœåŠ¡å™¨çš„ <code>/home/git/.ssh/authorized_keys</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ å…¬é’¥ä¹‹åå¯ä»¥é˜²æ­¢æ¯æ¬¡ push éƒ½è¾“å…¥å¯†ç ã€‚</p><p>å¦‚æœä½ ä¹‹å‰æ²¡æœ‰ç”Ÿæˆè¿‡å…¬é’¥ï¼Œåˆ™å¯èƒ½å°±æ²¡æœ‰ id_rsa.pub æ–‡ä»¶ï¼Œå…·ä½“çš„ç”Ÿæˆæ–¹æ³•ï¼Œå¯ä»¥<a href="https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener">Generating a new SSH key and adding it to the ssh-agent</a>ã€‚</p><h4 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h4><p>åˆå§‹åŒ– Git ä»“åº“ï¼Œæˆ‘æ˜¯å°†å…¶æ”¾åœ¨ <code>/var/repo/hexo.git</code> ç›®å½•ä¸‹çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /var/repo</span><br><span class="line"><span class="built_in">cd</span> /var/repo</span><br><span class="line">sudo git init --bare hexo.git</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>--bare</code> å‚æ•°ï¼ŒGit å°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è£¸ä»“åº“ä¸Šè¿›è¡Œæ“ä½œï¼Œå®ƒåªä¸ºå…±äº«è€Œå­˜åœ¨ã€‚</p><h4 id="ç¬¬äº”æ­¥"><a href="#ç¬¬äº”æ­¥" class="headerlink" title="ç¬¬äº”æ­¥"></a>ç¬¬äº”æ­¥</h4><p>é…ç½® git hooksï¼Œå…³äº hooks çš„è¯¦æƒ…å†…å®¹å¯ä»¥<a href="https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90" target="_blank" rel="noopener">è‡ªå®šä¹‰ Git - Git é’©å­</a>ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œè¦ä½¿ç”¨çš„æ˜¯ <code>post-receive</code> çš„ hookï¼Œè¿™ä¸ª hook ä¼šåœ¨æ•´ä¸ª git æ“ä½œè¿‡ç¨‹å®Œç»“ä»¥åè¢«è¿è¡Œã€‚</p><p>åœ¨ <code>hexo.git/hooks</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>post-receive</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/repo/blog.git/hooks</span><br><span class="line">vim post-receive</span><br></pre></td></tr></table></figure><p>åœ¨ <code>post-receive</code> æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">git --work-tree=/var/www/hexo --git-dir=/var/repo/hexo.git checkout -f</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<code>/var/www/hexo</code> è¦æ¢æˆä½ è‡ªå·±çš„éƒ¨ç½²ç›®å½•ï¼Œä¸€èˆ¬å¯èƒ½éƒ½æ˜¯ <code>/var/www/html</code>ã€‚ä¸Šé¢é‚£å¥ git å‘½ä»¤å¯ä»¥åœ¨æˆ‘ä»¬æ¯æ¬¡ push å®Œä¹‹åï¼ŒæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°åšå®¢çš„æœ€æ–°ç”ŸæˆçŠ¶æ€ã€‚è¿™æ ·ä¾¿å¯ä»¥å®Œæˆè¾¾åˆ°è‡ªåŠ¨éƒ¨ç½²çš„ç›®çš„äº†ã€‚</p><p>ä¸è¦å¿˜è®°è®¾ç½®è¿™ä¸ªæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x post-receive</span><br></pre></td></tr></table></figure><h4 id="ç¬¬å…­æ­¥"><a href="#ç¬¬å…­æ­¥" class="headerlink" title="ç¬¬å…­æ­¥"></a>ç¬¬å…­æ­¥</h4><p>æ”¹å˜ hexo.git ç›®å½•çš„æ‹¥æœ‰è€…ä¸º git ç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R git:git blog.git</span><br></pre></td></tr></table></figure><h4 id="ç¬¬ä¸ƒæ­¥"><a href="#ç¬¬ä¸ƒæ­¥" class="headerlink" title="ç¬¬ä¸ƒæ­¥"></a>ç¬¬ä¸ƒæ­¥</h4><p>ç¦ç”¨ git ç”¨æˆ·çš„ shell ç™»å½•æƒé™ã€‚</p><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘ä»¬è¦è®© git ç”¨æˆ·ä¸èƒ½é€šè¿‡ shell ç™»å½•ã€‚å¯ä»¥ç¼–è¾‘ <code>/etc/passwd</code> æ¥å®ç°ï¼Œåœ¨ <code>/etc/passwd</code> ä¸­æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¸€è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/bin/bash</span><br></pre></td></tr></table></figure><p>å°†å…¶æ”¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</span><br></pre></td></tr></table></figure><p>è¿™æ · git ç”¨æˆ·å¯ä»¥é€šè¿‡ ssh æ­£å¸¸ä½¿ç”¨ gitï¼Œä½†æ˜¯æ— æ³•ç™»å½• sehllã€‚</p><h4 id="ç¬¬å…«æ­¥"><a href="#ç¬¬å…«æ­¥" class="headerlink" title="ç¬¬å…«æ­¥"></a>ç¬¬å…«æ­¥</h4><p>ä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-enabled/default</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é»˜è®¤ç›®å½•ä¸ºè‡ªå·±çš„ç›®å½•</span></span><br><span class="line">root /var/www/hexo/;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜é€€å‡º</span></span><br><span class="line">Esc</span><br><span class="line">:wq</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼ŒæœåŠ¡å™¨ç«¯çš„é…ç½®å°±å®Œæˆäº†ã€‚</p><h3 id="æœ¬åœ°é…ç½®"><a href="#æœ¬åœ°é…ç½®" class="headerlink" title="æœ¬åœ°é…ç½®"></a>æœ¬åœ°é…ç½®</h3><p>ä¿®æ”¹ Hexo åšå®¢ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.yml, å¦‚ä¸‹ä¿®æ”¹:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">root@47.101.33.81:/var/repo/hexo.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>repo æ ¼å¼ï¼šç”¨æˆ·å@åŸŸåæˆ– IP åœ°å€:/var/repo/hexo.gitï¼Œå¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># root åŸŸå</span><br><span class="line">root@istaotao.com:/var/repo/hexo.git</span><br><span class="line"></span><br><span class="line"># root ip</span><br><span class="line">root@47.101.33.81:/var/repo/hexo.git</span><br><span class="line"></span><br><span class="line"># git åŸŸå</span><br><span class="line">git@istaotao.com:/var/repo/hexo.git</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯ hexo çš„å¸¸è§„æ“ä½œäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…æ¥šç¼“å­˜</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºå¹¶éƒ¨ç½²</span></span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><p>å¯ä»¥å¤šéƒ¨ç½²å‡ æ¬¡ï¼Œç„¶åå» <code>/var/www/hexo</code> çœ‹æ˜¯å¦å·²ç»æœ‰å¯¹åº”å†…å®¹ï¼Œå¦‚æœæ¨é€å®Œä¹‹åï¼Œæç¤ºå·²æ— æ›´æ–°å†…å®¹å¯æäº¤ï¼Œå¯ä»¥æ”¹å†™ä¸œè¥¿ï¼Œé‡æ–°æ„å»ºéƒ¨ç½²ç­‰æ­¥éª¤ï¼Œå¤šè¯•å‡ æ¬¡ã€‚</p><p>åˆ°è¿™é‡Œï¼ŒåŸºæœ¬å®Œæˆ Hexo æ¨é€åˆ° ubuntu çš„ä»»åŠ¡, é€šè¿‡æœåŠ¡å™¨ IP æˆ–è€…åŸŸååº”è¯¥å°±å¯ä»¥çœ‹åˆ°åšå®¢çš„å†…å®¹äº†ã€‚</p><h2 id="vuepress-éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š"><a href="#vuepress-éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š" class="headerlink" title="vuepress éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š"></a>vuepress éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š</h2><p>æœ‰äº†éƒ¨ç½² Hexo çš„ç»éªŒï¼Œå†éƒ¨ç½² vuepressï¼Œå°±ç®€å•å¤šäº†ã€‚</p><p>æˆ‘çš„æƒ³æ³•æ˜¯ï¼šhexo åšé¦–é¡µï¼Œvuepress åšå­é¡µå†…å®¹ï¼Œæ¯”å¦‚ï¼š<code>http:yangtao.site/vuepress</code>ã€‚æ‰€ä»¥ï¼Œå»ºç«‹ git hooks å°±åº”è¯¥å¯ä»¥äº†ã€‚</p><h3 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h3><p>ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-enabled/default</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code>location / {</code>ï¼Œç„¶ååœ¨å…¶åé¢ï¼Œè¾“å…¥ä¸€æ®µï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># æ‰¾åˆ°å¦‚ä¸‹</span><br><span class="line">location / &#123;</span><br><span class="line">    # First attempt to serve request as file, then</span><br><span class="line">    # as directory, then fall back to displaying a 404.</span><br><span class="line">    try_files $uri $uri/ =404;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># è¾“å…¥å¦‚ä¸‹</span><br><span class="line">location /vuepress &#123;</span><br><span class="line">    root /var/www/;</span><br><span class="line">    try_files $uri $uri/ =404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨<code>var/www</code>ä¸‹æ–°å»º vuepress ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/www/</span><br><span class="line">mkdir vuepress</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå¯¹ç”¨è¦è®¿é—®çš„ç›®å½•å·²ç»åˆ›å»ºå¥½äº†ã€‚</p><p>æ³¨ï¼šä»¥ä¸Šæ“ä½œéƒ½æ˜¯åœ¨ root æƒé™ä¸‹æ“ä½œçš„ï¼Œå¦‚æœæ˜¯å…¶ä»–ç”¨æˆ·ï¼Œè®°å¾—è¯¥åŠ  sudo çš„åŠ  sudoï¼Œè¯¥ä¿®æ”¹æ–‡ä»¶æƒé™å°±ä¿®æ”¹ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šå»ºç«‹ git hooks</p><p>å¦‚åŒå»ºç«‹ <code>hexo.git</code> ä¸€æ ·ï¼š</p><p>åˆå§‹åŒ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/repo</span><br><span class="line">git init --bare vuepress.git</span><br></pre></td></tr></table></figure><p>å»ºç«‹ <code>post-receive</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> vuepress.git/hooks/</span><br><span class="line">touch post-receive</span><br></pre></td></tr></table></figure><p>å¹¶å†™å…¥ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">git --work-tree=/var/www/vuepress --git-dir=/var/repo/vuepress.git checkout -f</span><br></pre></td></tr></table></figure><p>è®¾ç½®è¿™ä¸ªæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x post-receive</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼ŒæœåŠ¡ç«¯çš„é…ç½®å·®ä¸å¤šå°±è¿™äº›ã€‚</p><h3 id="æœ¬åœ°é…ç½®-1"><a href="#æœ¬åœ°é…ç½®-1" class="headerlink" title="æœ¬åœ°é…ç½®"></a>æœ¬åœ°é…ç½®</h3><p>å…·ä½“çš„å¯ä»¥å‚è€ƒ<a href="https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages" target="_blank" rel="noopener">å®˜æ–¹éƒ¨ç½²æ–¹æ³•</a>ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šæ ¹ç›®å½•ä¸‹åˆ›å»ºæ‰§è¡Œè„šæœ¬<code>deploy.sh</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿è„šæœ¬æŠ›å‡ºé‡åˆ°çš„é”™è¯¯</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆé™æ€æ–‡ä»¶</span></span><br><span class="line">npm run build</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥ç”Ÿæˆçš„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">cd</span> docs/.vuepress/dist</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯å‘å¸ƒåˆ°è‡ªå®šä¹‰åŸŸå</span></span><br><span class="line"><span class="comment"># echo 'www.example.com' &gt; CNAME</span></span><br><span class="line"></span><br><span class="line">git init</span><br><span class="line">git add -A</span><br><span class="line">git commit -m <span class="string">'deploy'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå‘å¸ƒåˆ° https://&lt;USERNAME&gt;.github.io</span></span><br><span class="line"><span class="comment"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå‘å¸ƒåˆ° https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;</span></span><br><span class="line"><span class="comment"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git master:gh-pages</span></span><br><span class="line"></span><br><span class="line">git push -f root@47.101.33.81:/var/repo/vuepress.git master</span><br><span class="line"><span class="built_in">cd</span> -</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šä¿®æ”¹<code>config.js</code>çš„åŸºå‡† url</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  base: <span class="string">"/vuepress/"</span> <span class="comment">// åŸºå‡† URL</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œè®¿é—® <code>http://47.101.33.81/vuepress</code>ï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®,è¿™é‡Œéå¸¸å…³é”®ï¼Œå¦‚æœæ˜¯æ ¹ç›®å½•ï¼Œç›´æ¥å»æ‰ vuepressï¼Œé‡æ–°æ„å»ºéƒ¨ç½²ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²çº¿ä¸Š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sh deploy.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹è‡ªåŠ¨æ„å»ºã€éƒ¨ç½²...</span></span><br><span class="line"><span class="comment"># è¾“å…¥æœåŠ¡ç«¯å¯†ç ...</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># success</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¯ä»¥å¤šéƒ¨ç½²å‡ æ¬¡ï¼Œè®¿é—®èµ„æºå¦‚æœ‰é—®é¢˜ï¼Œä¼°è®¡æ˜¯ç¬¬äºŒæ­¥å‡ºé—®é¢˜äº†ï¼Œå¯ä»¥æ’æŸ¥å“ªé‡Œå‡ºé”™äº†ã€‚</p><p>å¥½äº†ï¼Œæˆªæ­¢åˆ°ç°åœ¨ï¼Œè®¿é—®<code>http://47.101.33.81</code>ï¼Œè®¿é—®çš„æ˜¯ hexo çš„åšå®¢èµ„æºï¼Œè€Œè®¿é—®<code>http://47.101.33.81/vuepress</code>ï¼Œè®¿é—®çš„æ˜¯ vuepress çš„åšå®¢èµ„æºã€‚</p><p>ä¸»è¦æ˜¯ nginx çš„é…ç½®æ–‡ä»¶ï¼Œä»¥åŠ git hooks çš„å»ºç«‹ï¼Œè¿˜æœ‰æœ¬åœ°éƒ¨ç½²æ–‡ä»¶çš„å»ºè®¾ï¼Œä¸€ä¸ªç®€å•çš„ä¸ªäººç½‘ç«™ç®—æ˜¯é¢¤é¢¤å·å·åœ°ç«™èµ·æ¥äº†ã€‚</p><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><h3 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h3><ul><li><a href="https://www.imooc.com/learn/170" target="_blank" rel="noopener">åœ¨ Ubuntu Server ä¸‹æ­å»º LAMP ç¯å¢ƒ</a> - è®©ä½ ç†è§£ LAMP ç¯å¢ƒå„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ä¸ä½œç”¨ï¼Œå¹¶èƒ½æŒæ¡ä»æ— åˆ°æœ‰çš„åœ¨ Ubuntu Server æ“ä½œç³»ç»Ÿä¸‹æ­å»º LAMP ç¯å¢ƒã€é…ç½®è™šæ‹Ÿä¸»æœºã€æ•°æ®åº“è¿œç¨‹ç»´æŠ¤ç­‰å¸¸è§çš„æœåŠ¡å™¨æ­å»ºç»´æŠ¤æŠ€èƒ½</li><li><a href="https://www.imooc.com/learn/1049" target="_blank" rel="noopener">ä¼˜é›…ç©è½¬ Vim</a> - æœ¬è¯¾ç¨‹ç³»ç»Ÿæç‚¼ vim çš„ç²¾åã€é€šè¿‡æŠ›ç –å¼•ç‰æŠŠå®ƒå±•ç°åˆ°ä½ çš„é¢å‰ï¼Œæ›´èƒ½è®©ä½ çš„å·¥ä½œå¦‚è™æ·»ç¿¼ã€äº‹åŠåŠŸå€ã€‚</li><li><a href="https://www.imooc.com/learn/1129" target="_blank" rel="noopener">ç©è½¬ Vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹</a> - æœ¬è¯¾ç¨‹ä» vim æœ€åŸºç¡€çš„æ“ä½œå’Œæ¦‚å¿µå¼€å§‹è®²èµ·ï¼Œå¸¦é¢†å¤§å®¶å­¦ä¼šä½¿ç”¨å’Œé…ç½® vimï¼Œå®‰è£…å¼ºå¤§çš„ vim æ’ä»¶ï¼ŒçœŸæ­£æŒæ¡ç¼–è¾‘å™¨ä¹‹ç¥ vim çš„ä½¿ç”¨ã€‚</li><li><a href="https://www.imooc.com/learn/1004" target="_blank" rel="noopener">é¡¹ç›®ä¸Šçº¿æµç¨‹</a> - ä¸»è¦è®²è§£äº†ä¸€ä¸ªé¡¹ç›®æƒ³è¦å‘å¸ƒåˆ°å…¬ç½‘çš„æµç¨‹ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨çš„è´­ä¹°ã€ä»¥åŠåŸŸåçš„è´­ä¹°ï¼Œä»¥åŠéœ€è¦æ³¨æ„çš„äº‹é¡¹ã€‚</li><li><a href="https://www.imooc.com/learn/175" target="_blank" rel="noopener">Linux è¾¾äººå…»æˆè®¡åˆ’ I</a> - è¯¾ç¨‹ä»¥ CentOS æ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼Œä¸ºä½ å¸¦æ¥ Linux çš„ç®€ä»‹ã€ç³»ç»Ÿå®‰è£…å’Œå¸¸ç”¨å‘½ä»¤ç­‰å†…å®¹ã€‚è®©æ‚¨åœ¨è½»æ¾çš„æ°›å›´ä¸­æ„Ÿå—åˆ° Linux ä¹‹ç¾ã€‚</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.jianshu.com/p/849343f679aa" target="_blank" rel="noopener">Nginx ä½¿ç”¨åŠé…ç½®</a></li><li><a href="https://www.jianshu.com/p/ac27fdb0b86a" target="_blank" rel="noopener">åœ¨ Ubuntu 18.04 ä¸Šå®‰è£…å’Œé…ç½® Nginx</a></li><li><a href="https://blog.csdn.net/fengfeng0328/article/details/82828224" target="_blank" rel="noopener">Ubuntu18.04 æ­å»º nginx æœåŠ¡å™¨</a></li><li><a href="https://www.pingfangushi.com/posts/35448/" target="_blank" rel="noopener">é˜¿é‡Œäº‘ Ubuntu 16.04 ç³»ç»Ÿä¸‹å®‰è£… Nginx</a></li><li><a href="https://www.cnblogs.com/CgenJ/archive/2011/07/28/2119454.html" target="_blank" rel="noopener">Linux ç³»ç»Ÿä¸‹å¦‚ä½•æŸ¥çœ‹åŠä¿®æ”¹æ–‡ä»¶è¯»å†™æƒé™</a></li><li><a href="https://www.cnblogs.com/chenlogin/p/6245958.html" target="_blank" rel="noopener">vim åŸºæœ¬æ“ä½œ</a></li><li><a href="https://segmentfault.com/q/1010000009437407" target="_blank" rel="noopener">é˜¿é‡Œäº‘ ubuntu nginx æ— æ³•è®¿é—®ï¼Œæ±‚è§£ç­”</a></li><li><a href="https://segmentfault.com/a/1190000010680022" target="_blank" rel="noopener">Hexo ä¸ªäººåšå®¢éƒ¨ç½²åˆ° CentOS ä¸ªäººæœåŠ¡å™¨</a></li><li><a href="https://www.jianshu.com/p/e1ccd49b4e5d" target="_blank" rel="noopener">Hexo éƒ¨ç½²åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š</a></li><li><a href="https://www.jianshu.com/p/e03e363713f9" target="_blank" rel="noopener">é€šè¿‡ Git å°† Hexo åšå®¢éƒ¨ç½²åˆ°æœåŠ¡å™¨</a></li><li><a href="http://www.swiftyper.com/2016/04/17/deploy-hexo-with-git-hook/" target="_blank" rel="noopener">ä½¿ç”¨ Git Hook è‡ªåŠ¨éƒ¨ç½² Hexo åˆ°ä¸ªäºº VPS</a></li><li><a href="https://yq.aliyun.com/articles/603815" target="_blank" rel="noopener">è¶…è¯¦ç»†åŠ¨æ‰‹æ­å»ºä¸€ä¸ª Vuepress ç«™ç‚¹åŠå¼€å¯ PWA ä¸è‡ªåŠ¨éƒ¨ç½²</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æœåŠ¡ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ å†´ç¾½çš„ JS æ·±å…¥ç³»åˆ—Â·ä¸‹ç¯‡</title>
      <link href="/2019/11/27/js-series-3/"/>
      <url>/2019/11/27/js-series-3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸»è¦æ˜¯è®²è¿°äº†åˆ›å»ºå¯¹è±¡ã€ç»§æ‰¿çš„å¤šç§æ–¹å¼åŠå…¶å„è‡ªçš„ä¼˜ç¼ºç‚¹</p></blockquote><a id="more"></a><h2 id="åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹"><a href="#åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹" class="headerlink" title="åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹"></a>åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹</h2><p>è¿™ç¯‡æ–‡ç« æ›´åƒæ˜¯ç¬”è®°ï¼Œå› ä¸ºã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹å†™å¾—çœŸæ˜¯å¤ªå¥½äº†ï¼</p><h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  o.name = name;</span><br><span class="line">  o.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = createPerson(<span class="string">"kevin"</span>);</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹ï¼šå¯¹è±¡æ— æ³•è¯†åˆ«ï¼Œå› ä¸ºæ‰€æœ‰çš„å®ä¾‹éƒ½æŒ‡å‘ä¸€ä¸ªåŸå‹</p><h3 id="æ„é€ å‡½æ•°æ¨¡å¼"><a href="#æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°æ¨¡å¼"></a>æ„é€ å‡½æ•°æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"kevin"</span>);</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥è¯†åˆ«ä¸ºä¸€ä¸ªç‰¹å®šçš„ç±»å‹</p><p>ç¼ºç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«åˆ›å»ºä¸€æ¬¡</p><ul><li>æ„é€ å‡½æ•°æ¨¡å¼ä¼˜åŒ–</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.getName = getName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"kevin"</span>);</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šè§£å†³äº†æ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«é‡æ–°åˆ›å»ºçš„é—®é¢˜</p><p>ç¼ºç‚¹ï¼šå…¨å±€å‘½åå˜é‡å¤ªå¤š</p><h3 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">"keivn"</span>;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šæ–¹æ³•ä¸ä¼šé‡æ–°åˆ›å»º</p><p>ç¼ºç‚¹ï¼š1. æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½å…±äº«ï¼› 2. ä¸èƒ½åˆå§‹åŒ–å‚æ•°ï¼›</p><ul><li>åŸå‹æ¨¡å¼ä¼˜åŒ– 1</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  name: <span class="string">"kevin"</span>,</span><br><span class="line">  getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šå°è£…æ€§å¥½äº†ä¸€ç‚¹</p><p>ç¼ºç‚¹ï¼šé‡å†™äº†åŸå‹ï¼Œä¸¢å¤±äº† constructor å±æ€§</p><ul><li>åŸå‹æ¨¡å¼ä¼˜åŒ– 2</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Person,</span><br><span class="line">  name: "kevin",</span><br><span class="line">  getName: function() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥é€šè¿‡ constructor å±æ€§æ‰¾åˆ°æ‰€å±æ„é€ å‡½æ•°</p><p>ç¼ºç‚¹ï¼šåŸå‹æ¨¡å¼è¯¥æœ‰çš„ç¼ºç‚¹è¿˜æ˜¯æœ‰</p><h3 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h3><p>æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼åŒå‰‘åˆç’§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Person,</span><br><span class="line">  getName: function() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šè¯¥å…±äº«çš„å…±äº«ï¼Œè¯¥ç§æœ‰çš„ç§æœ‰ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„æ–¹å¼</p><p>ç¼ºç‚¹ï¼šæœ‰çš„äººå°±æ˜¯å¸Œæœ›å…¨éƒ¨éƒ½å†™åœ¨ä¸€èµ·ï¼Œå³æ›´å¥½çš„å°è£…æ€§</p><ul><li>åŠ¨æ€åŸå‹æ¨¡å¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.getName != <span class="string">"function"</span>) &#123;</span><br><span class="line">    Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä½¿ç”¨åŠ¨æ€åŸå‹æ¨¡å¼æ—¶ï¼Œä¸èƒ½ç”¨å¯¹è±¡å­—é¢é‡é‡å†™åŸå‹</p><p>è§£é‡Šä¸‹ä¸ºä»€ä¹ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.getName != <span class="string">"function"</span>) &#123;</span><br><span class="line">    Person.prototype = &#123;</span><br><span class="line">      <span class="keyword">constructor</span>: Person,</span><br><span class="line">      getName: function() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"kevin"</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"daisy"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™ å¹¶æ²¡æœ‰è¯¥æ–¹æ³•</span></span><br><span class="line">person1.getName();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨é‡Šæ‰ä¸Šé¢çš„ä»£ç ï¼Œè¿™å¥æ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚</span></span><br><span class="line">person2.getName();</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå‡è®¾å¼€å§‹æ‰§è¡Œ<code>var person1 = new Person(&#39;kevin&#39;)</code>ã€‚</p><p>å¦‚æœå¯¹ new å’Œ apply çš„åº•å±‚æ‰§è¡Œè¿‡ç¨‹ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¯ä»¥é˜…è¯»åº•éƒ¨ç›¸å…³é“¾æ¥ä¸­çš„æ–‡ç« ã€‚</p><p>æˆ‘ä»¬å›é¡¾ä¸‹ new çš„å®ç°æ­¥éª¤ï¼š</p><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†å¯¹è±¡çš„åŸå‹æŒ‡å‘ <code>Person.prototype</code>ï¼Œç„¶å <code>Person.apply(obj)</code>è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚</p><p>æ³¨æ„è¿™ä¸ªæ—¶å€™ï¼Œå›é¡¾ä¸‹ apply çš„å®ç°æ­¥éª¤ï¼Œä¼šæ‰§è¡Œ <code>obj.Person</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæ‰§è¡Œ if è¯­å¥é‡Œçš„å†…å®¹ï¼Œæ³¨æ„æ„é€ å‡½æ•°çš„ prototype å±æ€§æŒ‡å‘äº†å®ä¾‹çš„åŸå‹ï¼Œä½¿ç”¨å­—é¢é‡æ–¹å¼ç›´æ¥è¦†ç›– <code>Person.prototype</code>ï¼Œå¹¶ä¸ä¼šæ›´æ”¹å®ä¾‹çš„åŸå‹çš„å€¼ï¼Œperson1 ä¾ç„¶æ˜¯æŒ‡å‘äº†ä»¥å‰çš„åŸå‹ï¼Œè€Œä¸æ˜¯ <code>Person.prototype</code>ã€‚è€Œä¹‹å‰çš„åŸå‹æ˜¯æ²¡æœ‰ getName æ–¹æ³•çš„ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ï¼</p><p>å¦‚æœä½ å°±æ˜¯æƒ³ç”¨å­—é¢é‡æ–¹å¼å†™ä»£ç ï¼Œå¯ä»¥å°è¯•ä¸‹è¿™ç§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.getName != <span class="string">"function"</span>) &#123;</span><br><span class="line">    Person.prototype = &#123;</span><br><span class="line">      <span class="keyword">constructor</span>: Person,</span><br><span class="line">      getName: function() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Person(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"kevin"</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"daisy"</span>);</span><br><span class="line"></span><br><span class="line">person1.getName(); <span class="comment">// kevin</span></span><br><span class="line">person2.getName(); <span class="comment">// daisy</span></span><br></pre></td></tr></table></figure><h3 id="å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼"><a href="#å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼"></a>å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  o.name = name;</span><br><span class="line">  o.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"kevin"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person1 <span class="keyword">instanceof</span> Person); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(person1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºåº”è¯¥è¿™æ ·è¯»ï¼šå¯„ç”Ÿ-æ„é€ å‡½æ•°-æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯„ç”Ÿåœ¨æ„é€ å‡½æ•°çš„ä¸€ç§æ–¹æ³•ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´æ‰“ç€æ„é€ å‡½æ•°çš„å¹Œå­æŒ‚ç¾Šå¤´å–ç‹—è‚‰ï¼Œä½ çœ‹åˆ›å»ºçš„å®ä¾‹ä½¿ç”¨ instanceof éƒ½æ— æ³•æŒ‡å‘æ„é€ å‡½æ•°ï¼</p><p>è¿™æ ·æ–¹æ³•å¯ä»¥åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä½¿ç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå…·æœ‰é¢å¤–æ–¹æ³•çš„ç‰¹æ®Šæ•°ç»„ï¼Œä½†æ˜¯åˆä¸æƒ³ç›´æ¥ä¿®æ”¹ Array æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SpecialArray</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> values = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</span><br><span class="line">    values.push(<span class="built_in">arguments</span>[i]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  values.toPipedString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.join(<span class="string">"|"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> values;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> SpecialArray(<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>);</span><br><span class="line"><span class="keyword">var</span> colors2 = SpecialArray(<span class="string">"red2"</span>, <span class="string">"blue2"</span>, <span class="string">"green2"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(colors);</span><br><span class="line"><span class="built_in">console</span>.log(colors.toPipedString()); <span class="comment">// red|blue|green</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(colors2);</span><br><span class="line"><span class="built_in">console</span>.log(colors2.toPipedString()); <span class="comment">// red2|blue2|green2</span></span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç°ï¼Œå…¶å®æ‰€è°“çš„å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼å°±æ˜¯æ¯”å·¥å‚æ¨¡å¼åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¤šä½¿ç”¨äº†ä¸€ä¸ª newï¼Œå®é™…ä¸Šä¸¤è€…çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p><p>ä½†æ˜¯ä½œè€…å¯èƒ½æ˜¯å¸Œæœ›èƒ½åƒä½¿ç”¨æ™®é€š Array ä¸€æ ·ä½¿ç”¨ SpecialArrayï¼Œè™½ç„¶æŠŠ SpecialArray å½“æˆå‡½æ•°ä¹Ÿä¸€æ ·èƒ½ç”¨ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä½œè€…çš„æœ¬æ„ï¼Œä¹Ÿå˜å¾—ä¸ä¼˜é›…ã€‚</p><p>åœ¨å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œä¸è¦ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚</p><p>ä½†æ˜¯å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šé¢ä¾‹å­ä¸­çš„å¾ªç¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</span><br><span class="line">  values.push(<span class="built_in">arguments</span>[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æ›¿æ¢æˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">values.push.apply(values, <span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure><h3 id="ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼"><a href="#ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼"></a>ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = person(<span class="string">"kevin"</span>);</span><br><span class="line"></span><br><span class="line">person1.sayName(); <span class="comment">// kevin</span></span><br><span class="line"></span><br><span class="line">person1.name = <span class="string">"daisy"</span>;</span><br><span class="line"></span><br><span class="line">person1.sayName(); <span class="comment">// kevin</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1.name); <span class="comment">// daisy</span></span><br></pre></td></tr></table></figure><p>æ‰€è°“ç¨³å¦¥å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨ this çš„å¯¹è±¡ã€‚</p><p>ä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸¤ç‚¹ä¸åŒï¼š</p><ul><li>æ–°åˆ›å»ºçš„å®ä¾‹æ–¹æ³•ä¸å¼•ç”¨ this</li><li>ä¸ä½¿ç”¨ new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°</li><li>ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›å®‰å…¨çš„ç¯å¢ƒä¸­ã€‚</li></ul><p>ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ä¹Ÿè·Ÿå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œæ— æ³•è¯†åˆ«å¯¹è±¡æ‰€å±ç±»å‹ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/15" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹</a></p><h2 id="ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹"><a href="#ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹" class="headerlink" title="ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹"></a>ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹</h2><h3 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'Yang'</span>;</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myself = <span class="keyword">new</span> Child();</span><br><span class="line">myself.getName();  <span class="comment">// 'Yang'</span></span><br></pre></td></tr></table></figure><p>é—®é¢˜ï¼š</p><ul><li>å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«</li><li>åœ¨åˆ›å»º Child çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘Parentä¼ å‚</li></ul><h3 id="å€Ÿç”¨æ„é€ å‡½æ•°-ç»å…¸ç»§æ‰¿"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°-ç»å…¸ç»§æ‰¿" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)"></a>å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myself1 = <span class="keyword">new</span> Child(<span class="string">'Yang'</span>);</span><br><span class="line"><span class="keyword">var</span> myself2 = <span class="keyword">new</span> Child(<span class="string">'Wang'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myself1.name)  <span class="comment">// 'Yang'</span></span><br><span class="line"><span class="built_in">console</span>.log(myself2.name)  <span class="comment">// 'Wang'</span></span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p><ul><li>é¿å…äº†å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«</li><li>å¯ä»¥åœ¨ Child ä¸­å‘ Parent ä¼ å‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•</li></ul><h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><p>åŸå‹é“¾ç»§æ‰¿å’Œç»å…¸ç»§æ‰¿åŒå‰‘åˆç’§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>];</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  Parent.call(<span class="keyword">this</span>, name);</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent();</span><br><span class="line">Child.prototype.constructor = Child;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> Child(<span class="string">'yang'</span>, <span class="number">27</span>);</span><br><span class="line">child1.colors.push(<span class="string">'white'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(child1.name);  <span class="comment">// "yang"</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.age);  <span class="comment">// 27</span></span><br><span class="line"><span class="built_in">console</span>.log(child1.colors);  <span class="comment">// ["red", "blue", "green", "white"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> Child(<span class="string">'ming'</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(child2.name);  <span class="comment">// "ming"</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.age);  <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">console</span>.log(child2.colors);  <span class="comment">// ["red", "blue", "green"]</span></span><br><span class="line">child2.getName();  <span class="comment">// "ming"</span></span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šèåˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹ï¼Œæ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ã€‚</p><h3 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h3><p>å°±æ˜¯ ES5 <code>[Object.create](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create)</code> çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObj</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = proto;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹ï¼šåŒ…å«å¼•ç”¨ç±»å‹çš„å±æ€§å€¼å§‹ç»ˆéƒ½ä¼šå…±äº«ç›¸åº”çš„å€¼ï¼Œè¿™ç‚¹è·ŸåŸå‹é“¾ç»§æ‰¿ä¸€æ ·ã€‚</p><h3 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h3><p>åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§å½¢å¼æ¥åšå¢å¼ºå¯¹è±¡ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createObj</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clone = <span class="built_in">Object</span>.create(o);</span><br><span class="line">  clone.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hi'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹ï¼šè·Ÿå€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸€æ ·ï¼Œæ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ã€‚</p><h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h3><p>ç»„åˆç»§æ‰¿æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°ã€‚</p><ul><li>è®¾ç½®å­ç±»å‹å®ä¾‹çš„åŸå‹çš„æ—¶å€™ï¼š<code>Child.prototype = new Parent();</code></li><li>åˆ›å»ºå­ç±»å‹å®ä¾‹çš„æ—¶å€™ï¼š<code>Parent.call(this, name);</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = proto;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prototype</span>(<span class="params">child, parent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = object(parent.prototype);</span><br><span class="line">  child.prototype.constructor = child;</span><br><span class="line">  child.prototype = prototype;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">prototype(Child, Parent);</span><br></pre></td></tr></table></figure><p>å¼•ç”¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­å¯¹å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„å¤¸èµå°±æ˜¯ï¼š</p><blockquote><p>è¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚</p></blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/16" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ å†´ç¾½çš„ JS æ·±å…¥ç³»åˆ—Â·ä¸­ç¯‡</title>
      <link href="/2019/11/27/js-series-2/"/>
      <url>/2019/11/27/js-series-2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸»è¦å®ç° callã€applyã€newã€bind ç­‰å®ç°æ€è·¯</p></blockquote><a id="more"></a><h2 id="call-å’Œ-apply-çš„æ¨¡æ‹Ÿå®ç°"><a href="#call-å’Œ-apply-çš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="call å’Œ apply çš„æ¨¡æ‹Ÿå®ç°"></a>call å’Œ apply çš„æ¨¡æ‹Ÿå®ç°</h2><h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><p><code>call()</code>åœ¨ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ this å€¼å’Œè‹¥å¹²ä¸ªæŒ‡å®šçš„å‚æ•°å€¼çš„å‰æä¸‹ï¼Œè°ƒç”¨æŸä¸ªå‡½æ•°æˆ–æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„è¯­æ³•å’Œä½œç”¨ä¸ apply() æ–¹æ³•ç±»ä¼¼ï¼Œåªæœ‰ä¸€ä¸ªåŒºåˆ«ï¼Œå°±æ˜¯ call() æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œè€Œ apply() æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„ã€‚</p><p>ä½¿ç”¨ call æ–¹æ³•è°ƒç”¨å‡½æ•°å¹¶ä¸”æŒ‡å®šä¸Šä¸‹æ–‡çš„ â€˜thisâ€™</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  value: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">foo(); <span class="comment">// 1</span></span><br><span class="line">foo.call(obj); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ call æ–¹æ³•è°ƒç”¨çˆ¶æ„é€ å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tao</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, age);</span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tao = <span class="keyword">new</span> Tao(<span class="string">"yangtao"</span>, <span class="number">27</span>, <span class="string">"Teacher"</span>);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬æ¨¡æ‹Ÿçš„æ­¥éª¤å¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§</li><li>æ‰§è¡Œè¯¥å‡½æ•°</li><li>åˆ é™¤è¯¥å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»ä¼¼äºï¼š</span></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">foo.bar(); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ­¥</span></span><br><span class="line">foo.fn = bar;</span><br><span class="line"><span class="comment">// ç¬¬äºŒæ­¥</span></span><br><span class="line">foo.fn();</span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ­¥</span></span><br><span class="line"><span class="keyword">delete</span> foo.fn;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ç‰ˆï¼šç»‘å®š this</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mycall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line">  context.fn();</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æµ‹è¯•ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar.mycall(foo); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚ä¸‹æ‰€ç¤º</span></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">foo.bar();</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç‰ˆï¼šç»™å®šå‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mycall = <span class="function"><span class="keyword">function</span>(<span class="params">context, name, age</span>) </span>&#123;</span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line">  context.fn();</span><br><span class="line">  <span class="keyword">var</span> args = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    args.push(<span class="string">"arguments["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">eval</span>(<span class="string">"context.fn("</span> + args + <span class="string">")"</span>);</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ç‰ˆï¼šä¼ å‚ä¸º null å’Œè¿”å›ç»“æœ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mycall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="comment">//è·å–è°ƒç”¨callçš„å‡½æ•°ï¼Œç”¨thiså¯ä»¥è·å–</span></span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = []; <span class="comment">// ["arguments[1]", "arguments[2]"]</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    args.push(<span class="string">"arguments["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠŠä¼ ç»™callçš„å‚æ•°ä¼ é€’ç»™äº†context.fnå‡½æ•°</span></span><br><span class="line">  <span class="comment">// context.fn(args.join(','));</span></span><br><span class="line">  <span class="comment">// context.fn(...args)</span></span><br><span class="line">  <span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">"context.fn("</span> + args + <span class="string">")"</span>);</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç¬¬å››ç‰ˆï¼šè€ƒè™‘ contextï¼Œä»¥åŠ context.fn çš„å¯èƒ½æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mycall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿™ä¸€æ­¥å¦‚æœä¸å¼ºåˆ¶æ˜¯ object ç±»å‹ï¼Œå¯ä»¥çœç•¥</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> context != <span class="string">"object"</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Arguments error"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">var</span> args = [],</span><br><span class="line">    reslut;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"fn"</span> <span class="keyword">in</span> context &amp;&amp; context.hasOwnProperty(<span class="string">"fn"</span>)) &#123;</span><br><span class="line">    <span class="keyword">var</span> fn = context.fn;</span><br><span class="line">    <span class="keyword">var</span> fnFlag = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    args.push(<span class="string">"arguments["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  result = <span class="built_in">eval</span>(<span class="string">"context.fn("</span> + args + <span class="string">")"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fnFlag) &#123;</span><br><span class="line">    context.fn = fn;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><p><code>apply()</code>åŒ<code>call()</code>ï¼Œåªä¸è¿‡å°†å¤šä¸ªå‚æ•°å€¼ï¼Œä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥è€Œå·²ã€‚</p><p>ç”¨ apply å°†æ•°ç»„æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.push.apply(arr, arr2);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// ["a", "b", 1, 2]</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ apply å’Œå†…ç½®å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, nums); <span class="comment">// 10</span></span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, nums); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 å†™æ³•ï¼š</span></span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max(...nums); <span class="comment">// 10</span></span><br><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min(...nums); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myapply = <span class="function"><span class="keyword">function</span>(<span class="params">context, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">var</span> reslut;</span><br><span class="line"></span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">    reslut = context.fn();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = arr.length; i &lt; l; i++) &#123;</span><br><span class="line">      args.push(<span class="string">"arr["</span> + i + <span class="string">"]"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">eval</span>(<span class="string">"context.fn("</span> + args + <span class="string">")"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> reslut;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/11" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ call å’Œ apply çš„æ¨¡æ‹Ÿå®ç°</a></p><h2 id="bind-çš„æ¨¡æ‹Ÿå®ç°"><a href="#bind-çš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="bind çš„æ¨¡æ‹Ÿå®ç°"></a>bind çš„æ¨¡æ‹Ÿå®ç°</h2><blockquote><p><code>bind()</code>æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨ï¼Œbind()ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€ç³»åˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ï¼Œä½œä¸ºå®ƒçš„å‚æ•°ã€‚ â€” æ¥è‡ªäº <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener">MDN</a></p></blockquote><p>åˆ›å»ºç»‘å®šå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  value: <span class="number">2</span>,</span><br><span class="line">  getValue: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getV = obj.getValue;</span><br><span class="line">getV(); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> getV2 = obj.getValue.bind(obj);</span><br><span class="line">getV2(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>é…åˆ setTimeout</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.value = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">Fn.prototype.getValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// setTimeout(this.msg, 1000);  // 1</span></span><br><span class="line">  setTimeout(<span class="keyword">this</span>.msg.bind(<span class="keyword">this</span>), <span class="number">1000</span>); <span class="comment">//2</span></span><br><span class="line">&#125;;</span><br><span class="line">Fn.prototype.msg = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"value: "</span>, <span class="keyword">this</span>.value);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> myFn = <span class="keyword">new</span> Fn();</span><br><span class="line">myFn.getValue();</span><br></pre></td></tr></table></figure><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥é¦–å…ˆå¾—å‡º bind å‡½æ•°çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>è¿”å›ä¸€ä¸ªå‡½æ•°</li><li>å¯ä»¥ä¼ å…¥å‚æ•°</li></ul><p>ç¬¬ä¸€ç‰ˆï¼šè¿”å›å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> self.apply(context);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bindFoo = foo.mybind(obj);</span><br><span class="line">bindFoo(); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç‰ˆï¼šä¼ å‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="comment">// è·å–é™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°çš„å‰©ä½™å‚æ•°</span></span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œè·å–çš„æ˜¯è¿”å›å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">    <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> self.apply(context, args.concat(bindArgs));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bindFoo = foo.mybind(obj, <span class="string">"yang"</span>);</span><br><span class="line">bindFoo(<span class="number">27</span>);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// yang</span></span><br><span class="line"><span class="comment">// 27</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ç‰ˆï¼šæ„é€ å‡½æ•°æ•ˆæœ</p><p>bind è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯:ä¸€ä¸ªç»‘å®šå‡½æ•°ä¹Ÿèƒ½ä½¿ç”¨ new æ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ï¼šè¿™ç§è¡Œä¸ºå°±åƒæŠŠåŸå‡½æ•°å½“æˆæ„é€ å™¨ã€‚æä¾›çš„ this å€¼è¢«å¿½ç•¥ï¼ŒåŒæ—¶è°ƒç”¨æ—¶çš„å‚æ•°è¢«æä¾›ç»™æ¨¡æ‹Ÿå‡½æ•°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ bind è¿”å›çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œbind æ—¶æŒ‡å®šçš„ this å€¼ä¼šå¤±æ•ˆï¼Œä½†ä¼ å…¥çš„å‚æ•°ä¾ç„¶ç”Ÿæ•ˆã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹è¿”å›çš„å‡½æ•°çš„åŸå‹æ¥å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> fBound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="comment">// å½“ä½œä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œthis æŒ‡å‘å®ä¾‹ï¼Œæ­¤æ—¶ç»“æœä¸º trueï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘è¯¥å®ä¾‹ï¼Œå¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼</span></span><br><span class="line">    <span class="comment">// ä»¥ä¸Šé¢çš„æ˜¯ demo ä¸ºä¾‹ï¼Œå¦‚æœæ”¹æˆ `this instanceof fBound ? null : context`ï¼Œå®ä¾‹åªæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°† null æ”¹æˆ this ï¼Œå®ä¾‹ä¼šå…·æœ‰ habit å±æ€§</span></span><br><span class="line">    <span class="comment">// å½“ä½œä¸ºæ™®é€šå‡½æ•°æ—¶ï¼Œthis æŒ‡å‘ windowï¼Œæ­¤æ—¶ç»“æœä¸º falseï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context</span></span><br><span class="line">    <span class="keyword">return</span> self.apply(</span><br><span class="line">      <span class="keyword">this</span> <span class="keyword">instanceof</span> fBound ? <span class="keyword">this</span> : context,</span><br><span class="line">      args.concat(bindArgs)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿®æ”¹è¿”å›å‡½æ•°çš„ prototype ä¸ºç»‘å®šå‡½æ•°çš„ prototypeï¼Œå®ä¾‹å°±å¯ä»¥ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹ä¸­çš„å€¼</span></span><br><span class="line">  fBound.prototype = <span class="keyword">this</span>.prototype;</span><br><span class="line">  <span class="keyword">return</span> fBound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</span><br><span class="line">      <span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> fNOP = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> fBound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bindArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> self.apply(</span><br><span class="line">      <span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP ? <span class="keyword">this</span> : context,</span><br><span class="line">      args.concat(bindArgs)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  fNOP.prototype = <span class="keyword">this</span>.prototype;</span><br><span class="line">  fBound.prototype = <span class="keyword">new</span> fNOP();</span><br><span class="line">  <span class="keyword">return</span> fBound;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é‚£åˆ«å¿˜äº†åšä¸ªå…¼å®¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="built_in">Function</span>.prototype.bind || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/12" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ bind çš„æ¨¡æ‹Ÿå®ç°</a></p><h2 id="new-çš„æ¨¡æ‹Ÿå®ç°"><a href="#new-çš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="new çš„æ¨¡æ‹Ÿå®ç°"></a>new çš„æ¨¡æ‹Ÿå®ç°</h2><p>new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»å‹ä¹‹ä¸€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.habit = <span class="string">"Games"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"I am "</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Yang"</span>, <span class="string">"27"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1.name); <span class="comment">// Yang</span></span><br><span class="line"><span class="built_in">console</span>.log(person1.habit); <span class="comment">// Games</span></span><br><span class="line"></span><br><span class="line">person1.getName(); <span class="comment">// I am Yang</span></span><br></pre></td></tr></table></figure><p>ç”±ä¸Šå¯çŸ¥ï¼Œå®ä¾‹ person1 å¯ä»¥ï¼š</p><ul><li>è®¿é—®åˆ° Person æ„é€ å‡½æ•°é‡Œçš„å±æ€§</li><li>è®¿é—®åˆ° Person.prototype ä¸­çš„å±æ€§</li></ul><h3 id="åˆæ­¥å®ç°"><a href="#åˆæ­¥å®ç°" class="headerlink" title="åˆæ­¥å®ç°"></a>åˆæ­¥å®ç°</h3><p>åˆ†æï¼š</p><p>å› ä¸º new çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æ¨¡æ‹Ÿå®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿè¦å»ºç«‹ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡ä¼šå…·æœ‰æ„é€ å‡½æ•°é‡Œçš„å±æ€§ã€‚</p><p>å®ä¾‹çš„ <code>__proto__</code> å±æ€§ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code>ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºå»ºç«‹èµ·è¿™æ ·çš„å…³ç³»ï¼Œå®ä¾‹å¯ä»¥è®¿é—®åŸå‹ä¸Šçš„å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objectFactory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç”¨new Object() çš„æ–¹å¼æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡ obj</span></span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä¼ å…¥çš„æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="comment">// æ­¤å¤–å› ä¸º shift ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥ arguments ä¼šè¢«å»é™¤ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">  <span class="keyword">var</span> Constructor = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</span></span><br><span class="line">  obj.__proto__ = Constructor.prototype;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ applyï¼Œæ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span></span><br><span class="line">  Constructor.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å› obj</span></span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿”å›å€¼æ•ˆæœå®ç°"><a href="#è¿”å›å€¼æ•ˆæœå®ç°" class="headerlink" title="è¿”å›å€¼æ•ˆæœå®ç°"></a>è¿”å›å€¼æ•ˆæœå®ç°</h3><p>éœ€è¦åˆ¤æ–­è¿”å›çš„å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬è¯¥è¿”å›ä»€ä¹ˆå°±è¿”å›ä»€ä¹ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objectFactory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  <span class="keyword">var</span> Constructor = [].shift.call(<span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  obj.__proto__ = Constructor.prototype;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> ret = Constructor.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> ret === <span class="string">"object"</span> ? ret : obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/13" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ new çš„æ¨¡æ‹Ÿå®ç°</a></p><h2 id="ç±»æ•°ç»„å¯¹è±¡ä¸-arguments"><a href="#ç±»æ•°ç»„å¯¹è±¡ä¸-arguments" class="headerlink" title="ç±»æ•°ç»„å¯¹è±¡ä¸ arguments"></a>ç±»æ•°ç»„å¯¹è±¡ä¸ arguments</h2><p>ç±»æ•°ç»„å¯¹è±¡ä»è¯»å†™ã€è·å–é•¿åº¦ã€éå†ä¸‰ä¸ªæ–¹é¢çœ‹ï¼Œå’Œæ•°ç»„è²Œä¼¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ï¼Œéœ€è¦å€ŸåŠ© call æˆ– applyï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> likeArr = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">"a"</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">"b"</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">"c"</span>,</span><br><span class="line">  length: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(likeArr, <span class="number">0</span>); <span class="comment">// ["a", "b", "c"]</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.join.call(likeArr, <span class="string">"&amp;"</span>); <span class="comment">// "a&amp;b&amp;c"</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.map.call(likeArr, item =&gt; item.toUpperCase()); <span class="comment">// ["A", "B", "C"]</span></span><br></pre></td></tr></table></figure><h3 id="ç±»æ•°ç»„è½¬æ•°ç»„"><a href="#ç±»æ•°ç»„è½¬æ•°ç»„" class="headerlink" title="ç±»æ•°ç»„è½¬æ•°ç»„"></a>ç±»æ•°ç»„è½¬æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// slice</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(likeArr);</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="built_in">Array</span>.from(likeArr);</span><br><span class="line"><span class="comment">// apply</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.concat.apply([], likeArr);</span><br><span class="line"><span class="comment">// spliceï¼Œä¼šæ”¹å˜ linkeArr</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.splice.call(likeArr, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><h3 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a>Arguments</h3><p><code>Arguments</code> å¯¹è±¡åªå®šä¹‰åœ¨å‡½æ•°ä½“ä¸­ï¼ŒåŒ…æ‹¬äº†å‡½æ•°çš„å‚æ•°å’Œå…¶ä»–å±æ€§ã€‚åœ¨å‡½æ•°ä½“ä¸­ï¼Œarguments æŒ‡ä»£è¯¥å‡½æ•°çš„ Arguments å¯¹è±¡ã€‚</p><p>Arguments å¯¹è±¡çš„ length å±æ€§ï¼Œè¡¨ç¤ºå®å‚çš„é•¿åº¦ã€‚</p><p>Arguments å¯¹è±¡çš„ callee å±æ€§ï¼Œé€šè¿‡å®ƒå¯ä»¥è°ƒç”¨å‡½æ•°è‡ªèº«ã€‚</p><p>å°†å‚æ•°ä»ä¸€ä¸ªå‡½æ•°ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ apply å°† foo çš„å‚æ•°ä¼ é€’ç»™ bar</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  bar.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a, b, c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ ES6 çš„<code>...</code>è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾è½¬æˆæ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">...arguments</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>arguments çš„åº”ç”¨å…¶å®å¾ˆå¤šï¼Œå¦‚æœè¦æ€»ç»“è¿™äº›åœºæ™¯çš„è¯ï¼Œæš‚æ—¶èƒ½æƒ³åˆ°çš„åŒ…æ‹¬ï¼š</p><ul><li>å‚æ•°ä¸å®šé•¿</li><li>å‡½æ•°æŸ¯é‡ŒåŒ–</li><li>é€’å½’è°ƒç”¨</li><li>å‡½æ•°é‡è½½</li></ul><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/14" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ç±»æ•°ç»„å¯¹è±¡ä¸ arguments</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ å†´ç¾½çš„ JS æ·±å…¥ç³»åˆ—Â·ä¸Šç¯‡</title>
      <link href="/2019/11/27/js-series-1/"/>
      <url>/2019/11/27/js-series-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸»è¦è®²è¿°ä»€ä¹ˆæ˜¯åŸå‹ï¼Œä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Œä»¥åŠåˆ†åˆ«æ€»ç»“æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸‰ä¸ªé‡è¦å±æ€§ï¼šå˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ã€thisï¼Œè¿˜æœ‰é—­åŒ…ç­‰éš¾ä»¥ç†è§£çš„çŸ¥è¯†ç‚¹ã€‚</p></blockquote><a id="more"></a><h2 id="ä»åŸå‹åˆ°åŸå‹é“¾"><a href="#ä»åŸå‹åˆ°åŸå‹é“¾" class="headerlink" title="ä»åŸå‹åˆ°åŸå‹é“¾"></a>ä»åŸå‹åˆ°åŸå‹é“¾</h2><h3 id="å›¾ç¤ºæ€»ç»“"><a href="#å›¾ç¤ºæ€»ç»“" class="headerlink" title="å›¾ç¤ºæ€»ç»“"></a>å›¾ç¤ºæ€»ç»“</h3><p><code>prototype</code>ï¼šæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸ºè°ƒç”¨è¯¥å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹</p><p><img src="https://ae01.alicdn.com/kf/Hacfcf286c7a7419db3e4c0932fb535923.png" alt="æ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹çš„å…³ç³»å›¾"></p><p><code>__proto__</code>ï¼šæ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé™¤ nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ªå±æ€§ï¼š<code>__proto__</code>ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹</p><p><img src="https://ae01.alicdn.com/kf/H0167f64ea5a14d00977d7347f3771ce7T.png" alt="å®ä¾‹ä¸å®ä¾‹åŸå‹çš„å…³ç³»å›¾"></p><p><code>constructor</code>ï¼šæ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</p><p><img src="https://ae01.alicdn.com/kf/Hb2d428716f6341b58ac36eefd3ab7398b.png" alt="constructor"></p><p><code>Object</code>ï¼šåŸå‹å¯¹è±¡æ˜¯é€šè¿‡ <code>Object</code> æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œæœ€å<code>Object.prototype.__proto__ = null</code></p><p><img src="https://ae01.alicdn.com/kf/H162bf41c88784952a445c19c5ce3159e5.png" alt="åŸå‹é“¾ç¤ºæ„å›¾"></p><p>åŸå‹é“¾ï¼šç”±ç›¸äº’å…³è”çš„åŸå‹(<strong>proto</strong>)ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ï¼Œå³å›¾ä¸­è“è‰²çš„è¿™æ¡çº¿</p><p><img src="https://ae01.alicdn.com/kf/H46dd0d5cd87243f4beb2d4c3e974a1e5K.png" alt="åŸå‹é“¾"></p><h3 id="ä»£ç æ€»ç»“"><a href="#ä»£ç æ€»ç»“" class="headerlink" title="ä»£ç æ€»ç»“"></a>ä»£ç æ€»ç»“</h3><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">"Jake"</span>;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line">person1.name; <span class="comment">// 'Jake'</span></span><br><span class="line">person2.name; <span class="comment">// 'Jake'</span></span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ª JavaScript å¯¹è±¡(é™¤äº† null )éƒ½å…·æœ‰çš„ä¸€ä¸ªå±æ€§ï¼Œå«<strong>proto</strong>ï¼Œè¿™ä¸ªå±æ€§ä¼šæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ã€‚</p><p>æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼ŒæŒ‡å‘äº†è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹ person.<strong>proto</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.__proto__ === Person.prototype; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.constructor === Person; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>åŸå‹å¯¹è±¡å°±æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.__proto__ === <span class="built_in">Object</span>.prototype; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>Object.prototype.<strong>proto</strong> çš„å€¼ä¸º nullï¼Œå³ Object.prototype æ²¡æœ‰åŸå‹ï¼Œç»ˆæ­¢æŸ¥æ‰¾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.__proto__; <span class="comment">// null</span></span><br></pre></td></tr></table></figure><p>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾</a></p><h2 id="è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</h2><p>javascript é‡‡ç”¨çš„æ˜¯<code>è¯æ³•ä½œç”¨åŸŸ(lexical scoping)</code>ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š</p><ul><li>è¯æ³•ä½œç”¨åŸŸï¼Œå³é™æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†</li><li>åŠ¨æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">"global scope"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">"local scope"</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> scope;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f();</span><br><span class="line">&#125;</span><br><span class="line">checkscope(); <span class="comment">// "local scope"</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">"global scope"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">"local scope"</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> scope;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line">checkscope()(); <span class="comment">// "local scope"</span></span><br></pre></td></tr></table></figure><p>å› ä¸º JavaScript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåŸºäºå‡½æ•°åˆ›å»ºçš„ä½ç½®ã€‚</p><p>è€Œå¼•ç”¨ã€ŠJavaScript æƒå¨æŒ‡å—ã€‹çš„å›ç­”å°±æ˜¯ï¼š</p><p>JavaScript å‡½æ•°çš„æ‰§è¡Œç”¨åˆ°äº†ä½œç”¨åŸŸé“¾ï¼Œè¿™ä¸ªä½œç”¨åŸŸé“¾æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™åˆ›å»ºçš„ã€‚åµŒå¥—çš„å‡½æ•° f() å®šä¹‰åœ¨è¿™ä¸ªä½œç”¨åŸŸé“¾é‡Œï¼Œå…¶ä¸­çš„å˜é‡ scope ä¸€å®šæ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ç®¡ä½•æ—¶ä½•åœ°æ‰§è¡Œå‡½æ•° f()ï¼Œè¿™ç§ç»‘å®šåœ¨æ‰§è¡Œ f() æ—¶ä¾ç„¶æœ‰æ•ˆã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/3" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</a></p><h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"></a>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h2><p>JavaScript çš„å¯æ‰§è¡Œä»£ç (executable code)çš„ç±»å‹æœ‰å“ªäº›ï¼š</p><ul><li>å…¨å±€ä»£ç </li><li>å‡½æ•°ä»£ç </li><li>eval ä»£ç </li></ul><p>å‡½æ•°é‚£ä¹ˆå¤šï¼Œå¦‚ä½•ç®¡ç†åˆ›å»ºçš„é‚£ä¹ˆå¤šæ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ</p><p>æ‰€ä»¥ JavaScript å¼•æ“åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆ<code>Execution context stackï¼ŒECS</code>ï¼‰æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><p>å½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª<code>æ‰§è¡Œä¸Šä¸‹æ–‡(execution context)</code>ï¼Œå¹¶ä¸”å‹å…¥<code>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(Execution context stack, ESC)</code></p><p>å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä¼šå°†å‡½æ•°çš„<code>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</code>ä¸­å¼¹å‡ºã€‚</p><p>å…¶å®ï¼Œè¿™é‡Œå°±ä¼šè”æƒ³åˆ° <code>push pop æ ˆå †</code>(åè¿›å…ˆå‡º-LIFO)ã€‚</p><p>æ¨¡æ‹Ÿæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ˜¯ä¸€ä¸ªæ•°ç»„ ECStackï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºç»“æŸçš„æ—¶å€™ï¼Œæ‰ä¼šè¢«æ¸…ç©º</span></span><br><span class="line">ECStack = [</span><br><span class="line">  <span class="comment">// ç¨‹åºç»“æŸä¹‹å‰ï¼Œ ECStack æœ€åº•éƒ¨æ°¸è¿œæœ‰ä¸ª globalContext</span></span><br><span class="line">  globalContext <span class="comment">// å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>è¿è¡Œå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"fun3"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fun3();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fun2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun1();</span><br></pre></td></tr></table></figure><p>ä¼ªä»£ç æ¨¡æ‹Ÿæ‰§è¡Œï¼š(æ ¹æ® push pop åŸç†ï¼Œåè¿›å…ˆå‡º)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ECStack.push(<span class="xml"><span class="tag">&lt;<span class="name">fun1</span>&gt;</span> functionContext);  // å‹å…¥fun1ä¸Šä¸‹æ–‡ï¼Œå‘ç°äº† fun2 è¢«è°ƒç”¨</span></span><br><span class="line">ECStack.push(&lt;fun2&gt; functionContext);  // ç»§ç»­å‹å…¥fun2ä¸Šä¸‹æ–‡ï¼Œå‘ç°äº† fun3 è¢«è°ƒç”¨</span><br><span class="line">ECStack.push(&lt;fun3&gt; functionContext);  // ç»§ç»­å‹å…¥fun3ä¸Šä¸‹æ–‡ï¼Œå¹¶æ‰§è¡Œ fun3</span><br><span class="line">ECStack.pop();  // fun3 æ‰§è¡Œç»“æŸï¼Œå¹¶å¼¹å‡º</span><br><span class="line">ECStack.pop();  // fun2 æ‰§è¡Œç»“æŸï¼Œå¹¶å¼¹å‡º</span><br><span class="line">ECStack.pop();  // fun1 æ‰§è¡Œç»“æŸï¼Œå¹¶å¼¹å‡º</span><br><span class="line">// javascriptæ¥ç€æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œä½†æ˜¯ECStackåº•å±‚æ°¸è¿œæœ‰ä¸ªglobalContext</span><br></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/4" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</a></p><h2 id="å˜é‡å¯¹è±¡"><a href="#å˜é‡å¯¹è±¡" class="headerlink" title="å˜é‡å¯¹è±¡"></a>å˜é‡å¯¹è±¡</h2><p>1ã€å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šå…¨å±€å¯¹è±¡</p><p>2ã€å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šåªåŒ…æ‹¬<code>Arguments</code>å¯¹è±¡</p><p>3ã€è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼</p><p>4ã€ä»£ç æ‰§è¡Œé˜¶æ®µï¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼</p><h3 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h3><p>æ‰§è¡Œä¸Šä¸‹æ–‡è¿‡ç¨‹å¯åˆ†ä¸ºï¼šè¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œä»£ç æ‰§è¡Œï¼ˆåˆ†æ-æ‰§è¡Œï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">  b = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡è¿‡ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  <span class="built_in">arguments</span>: &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line">    length: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="literal">undefined</span>,</span><br><span class="line">  c: reference <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  d: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç æ‰§è¡Œé˜¶æ®µï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  <span class="built_in">arguments</span>: &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line">    length: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">3</span>,</span><br><span class="line">  c: reference <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  d: reference to FunctionExpression <span class="string">"d"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæœªè¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹å‰ï¼Œ<code>å˜é‡å¯¹è±¡(VO)</code>ä¸­çš„å±æ€§éƒ½ä¸èƒ½è®¿é—®ï¼ä½†æ˜¯è¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹åï¼Œ<code>å˜é‡å¯¹è±¡(VO)</code>è½¬å˜ä¸ºäº†<code>æ´»åŠ¨å¯¹è±¡(AO)</code>ï¼Œé‡Œé¢çš„å±æ€§éƒ½èƒ½è¢«è®¿é—®äº†ï¼Œç„¶åå¼€å§‹è¿›è¡Œæ‰§è¡Œé˜¶æ®µçš„æ“ä½œã€‚å®ƒä»¬å…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤„äºæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒç”Ÿå‘½å‘¨æœŸã€‚</p><p>æœ€åï¼Œå‡½æ•°æ˜¯â€œç¬¬ä¸€ç­‰å…¬æ°‘â€ï¼Œè®°ä½è¿™ä¸ªï¼Œå˜é‡åç§°å’Œå‡½æ•°åç§°ç›¸åŒçš„å£°æ˜ï¼Œä¼˜å…ˆæ‰§è¡Œå‡½æ•°å£°æ˜ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/5" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹å˜é‡å¯¹è±¡</a></p><h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š</p><ul><li>å˜é‡å¯¹è±¡(Variable objectï¼ŒVO)</li><li>ä½œç”¨åŸŸé“¾(Scope chain)</li><li>this</li></ul><p>ä¸‹é¢è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªå‡½æ•°çš„åˆ›å»ºå’Œæ¿€æ´»ä¸¤ä¸ªæ—¶æœŸæ¥è®²è§£ä½œç”¨åŸŸé“¾æ˜¯å¦‚ä½•åˆ›å»ºå’Œå˜åŒ–çš„ã€‚</p><h3 id="å‡½æ•°åˆ›å»º"><a href="#å‡½æ•°åˆ›å»º" class="headerlink" title="å‡½æ•°åˆ›å»º"></a>å‡½æ•°åˆ›å»º</h3><p>ç”±ä¸ŠèŠ‚å†…å®¹å¯çŸ¥ï¼šå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚</p><p>è¿™æ˜¯å› ä¸ºå‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ [[scope]]ï¼Œå½“å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œå°±ä¼šä¿å­˜æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡åˆ°å…¶ä¸­ï¼Œä½ å¯ä»¥ç†è§£ [[scope]] å°±æ˜¯æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ï¼Œä½†æ˜¯æ³¨æ„ï¼š[[scope]] å¹¶ä¸ä»£è¡¨å®Œæ•´çš„ä½œç”¨åŸŸé“¾ï¼</p><p>å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å„è‡ªçš„ [[scope]]:</span></span><br><span class="line">foo.[[scope]] = [</span><br><span class="line">  globalContext.VO</span><br><span class="line">];</span><br><span class="line">bar.[[scope]] = [</span><br><span class="line">  fooContext.AO   <span class="comment">// ä¿å­˜çˆ¶å˜é‡</span></span><br><span class="line">  globalContext.VO</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°æ¿€æ´»"><a href="#å‡½æ•°æ¿€æ´»" class="headerlink" title="å‡½æ•°æ¿€æ´»"></a>å‡½æ•°æ¿€æ´»</h3><p>å½“å‡½æ•°æ¿€æ´»æ—¶ï¼Œè¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œåˆ›å»º VO/AO åï¼Œå°±ä¼šå°†æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨é“¾çš„å‰ç«¯ã€‚</p><p>è¿™æ—¶å€™æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å‘½åä¸º Scopeï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Scope = [AO].concat([[Scope]]);</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œä½œç”¨åŸŸé“¾åˆ›å»ºå®Œæ¯•ã€‚</p><h3 id="ç»¼åˆåˆ†æ"><a href="#ç»¼åˆåˆ†æ" class="headerlink" title="ç»¼åˆåˆ†æ"></a>ç»¼åˆåˆ†æ</h3><p>ä»¥ä¸‹é¢çš„ä¾‹å­ä¸ºä¾‹ï¼Œç»“åˆç€ä¹‹å‰è®²çš„å˜é‡å¯¹è±¡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä½œç”¨åŸŸé“¾å’Œå˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">"global scope"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope2 = <span class="string">"local scope"</span>;</span><br><span class="line">  <span class="keyword">return</span> scope2;</span><br><span class="line">&#125;</span><br><span class="line">checkscope();</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>1.checkscope å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° å†…éƒ¨å±æ€§[[scope]]</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">checkscope.[[scope]] = [</span><br><span class="line">    globalContext.VO</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>2.æ‰§è¡Œ checkscope å‡½æ•°ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ECStack = [checkscopeContext, globalContext];</span><br></pre></td></tr></table></figure><p>3.checkscope å‡½æ•°å¹¶ä¸ç«‹åˆ»æ‰§è¡Œï¼Œå¼€å§‹åšå‡†å¤‡å·¥ä½œï¼Œç¬¬ä¸€æ­¥ï¼šå¤åˆ¶å‡½æ•°[[scope]]å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">checkscopeContext = &#123;</span><br><span class="line">    Scope: checkscope.[[scope]],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.ç¬¬äºŒæ­¥ï¼šç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œéšååˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼ŒåŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">checkscopeContext = &#123;</span><br><span class="line">    AO: &#123;</span><br><span class="line">        <span class="built_in">arguments</span>: &#123;</span><br><span class="line">            length: <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        scope2: <span class="literal">undefined</span></span><br><span class="line">    &#125;ï¼Œ</span><br><span class="line">    Scope: checkscope.[[scope]],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.ç¬¬ä¸‰æ­¥ï¼šå°†æ´»åŠ¨å¯¹è±¡å‹å…¥ checkscope ä½œç”¨åŸŸé“¾é¡¶ç«¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">checkscopeContext = &#123;</span><br><span class="line">  AO: &#123;</span><br><span class="line">    <span class="built_in">arguments</span>: &#123;</span><br><span class="line">      length: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    scope2: <span class="literal">undefined</span></span><br><span class="line">  &#125;,</span><br><span class="line">  Scope: [AO, [[Scope]]]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>6.å‡†å¤‡å·¥ä½œåšå®Œï¼Œå¼€å§‹æ‰§è¡Œå‡½æ•°ï¼Œéšç€å‡½æ•°çš„æ‰§è¡Œï¼Œä¿®æ”¹ AO çš„å±æ€§å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">checkscopeContext = &#123;</span><br><span class="line">  AO: &#123;</span><br><span class="line">    <span class="built_in">arguments</span>: &#123;</span><br><span class="line">      length: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    scope2: <span class="string">"local scope"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  Scope: [AO, [[Scope]]]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>7.æŸ¥æ‰¾åˆ° scope2 çš„å€¼ï¼Œè¿”å›åå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ECStack = [globalContext];</span><br></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/6" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ä½œç”¨åŸŸé“¾</a></p><h2 id="ä»-ECMAScript-è§„èŒƒè§£è¯»-this"><a href="#ä»-ECMAScript-è§„èŒƒè§£è¯»-this" class="headerlink" title="ä» ECMAScript è§„èŒƒè§£è¯» this"></a>ä» ECMAScript è§„èŒƒè§£è¯» this</h2><blockquote><p>ä½œè€…æ›°ï¼šåœ¨å†™æ–‡ç« ä¹‹åˆï¼Œæˆ‘å°±é¢ä¸´ç€è¿™äº›é—®é¢˜ï¼Œæœ€åè¿˜æ˜¯æ”¾å¼ƒä»å¤šä¸ªæƒ…å½¢ä¸‹ç»™å¤§å®¶è®²è§£ this æŒ‡å‘çš„æ€è·¯ï¼Œè€Œæ˜¯è¿½æ ¹æº¯æºçš„ä» ECMASciript è§„èŒƒè®²è§£ this çš„æŒ‡å‘ï¼Œå°½ç®¡ä»è¿™ä¸ªè§’åº¦å†™èµ·æ¥å’Œè¯»èµ·æ¥éƒ½æ¯”è¾ƒåƒåŠ›ï¼Œä½†æ˜¯ä¸€æ—¦å¤šè¯»å‡ éï¼Œæ˜ç™½åŸç†ï¼Œç»å¯¹ä¼šç»™ä½ ä¸€ä¸ªå…¨æ–°çš„è§†è§’çœ‹å¾… this ã€‚</p></blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/7" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹ä» ECMAScript è§„èŒƒè§£è¯» this</a></p><h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h2><p>å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š</p><ul><li>å˜é‡å¯¹è±¡(Variable objectï¼ŒVO)</li><li>ä½œç”¨åŸŸé“¾(Scope chain)</li><li>this</li></ul><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/8" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡</a></p><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚</p><p>è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚</p><p>é‚£ä¹ˆï¼Œé—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡ã€‚</p><p>çœ‹è¿™é“åˆ·é¢˜å¿…åˆ·ï¼Œé¢è¯•å¿…è€ƒçš„é—­åŒ…é¢˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  data[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data[<span class="number">0</span>]();</span><br><span class="line">data[<span class="number">1</span>]();</span><br><span class="line">data[<span class="number">2</span>]();</span><br></pre></td></tr></table></figure><p>å¾ªç¯ç»“æŸå</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="number">0</span>] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;;</span><br><span class="line">data[<span class="number">1</span>] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;;</span><br><span class="line">data[<span class="number">2</span>] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>data[0]()ï¼Œdata[1]()ï¼Œdata[2]()</code>æ—¶ï¼Œi=3,æ‰€ä»¥éƒ½æ‰“å° 3</p><p>è®©æˆ‘ä»¬æ”¹æˆé—­åŒ…çœ‹çœ‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  data[i] = (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data[<span class="number">0</span>]();</span><br><span class="line">data[<span class="number">1</span>]();</span><br><span class="line">data[<span class="number">2</span>]();</span><br></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/9" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹é—­åŒ…</a></p><h2 id="å‚æ•°æŒ‰å€¼ä¼ é€’"><a href="#å‚æ•°æŒ‰å€¼ä¼ é€’" class="headerlink" title="å‚æ•°æŒ‰å€¼ä¼ é€’"></a>å‚æ•°æŒ‰å€¼ä¼ é€’</h2><p>ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ â€” ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡-ç¬¬ä¸‰ç‰ˆã€‹</p><p>å³ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚</p><p>ä½†æ˜¯é€šä¿—åœ°ç†è§£ï¼Œå‚æ•°å¦‚æœæ˜¯åŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå‚æ•°å¦‚æœæ˜¯å¼•ç”¨ç±»å‹å°±æŒ‰å…±äº«ä¼ é€’ã€‚</p><p>å…±äº«ä¼ é€’æ˜¯æŒ‡ï¼Œåœ¨ä¼ é€’å¯¹è±¡çš„æ—¶å€™ï¼Œä¼ é€’å¯¹è±¡çš„å¼•ç”¨çš„å‰¯æœ¬ã€‚</p><p>ä¾‹å­ä¸€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">  v = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(v); <span class="comment">//2</span></span><br><span class="line">&#125;</span><br><span class="line">foo(value);</span><br><span class="line"><span class="built_in">console</span>.log(value); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>å†…å­˜åˆ†å¸ƒå¦‚ä¸‹ï¼š</p><p>æ”¹å˜å‰ï¼š</p><table><br>  <tr><br>    <td colspan="2" align="center">æ ˆå†…å­˜</td><br>    <td colspan="2" align="center">å †å†…å­˜</td><br>  </tr><br>  <tr><br>    <td>value</td><br>    <td>1</td><br>    <td></td><br>    <td></td><br>  </tr><br>  <tr><br>    <td>v</td><br>    <td>1</td><br>    <td></td><br>    <td></td><br>  </tr><br></table><p>æ”¹å˜åï¼š</p><table><br>  <tr><br>    <td colspan="2" align="center">æ ˆå†…å­˜</td><br>    <td colspan="2" align="center">å †å†…å­˜</td><br>  </tr><br>  <tr><br>    <td>value</td><br>    <td>1</td><br>    <td></td><br>    <td></td><br>  </tr><br>  <tr><br>    <td>v</td><br>    <td>2</td><br>    <td></td><br>    <td></td><br>  </tr><br></table><p>ä¾‹å­äºŒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  o.value = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(o.value); <span class="comment">//2</span></span><br><span class="line">&#125;</span><br><span class="line">foo(obj);</span><br><span class="line"><span class="built_in">console</span>.log(obj.value); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>å†…å­˜åˆ†å¸ƒå¦‚ä¸‹ï¼š</p><p>æ”¹å˜å‰ï¼š</p><table><br>  <tr><br>    <td colspan="2" align="center">æ ˆå†…å­˜</td><br>    <td align="center">å †å†…å­˜</td><br>  </tr><br>  <tr><br>    <td>objï¼Œo</td><br>    <td>æŒ‡é’ˆåœ°å€</td><br>    <td>{value: 1}</td><br>  </tr><br></table><p>æ”¹å˜åï¼š</p><table><br>  <tr><br>    <td colspan="2" align="center">æ ˆå†…å­˜</td><br>    <td align="center">å †å†…å­˜</td><br>  </tr><br>  <tr><br>    <td>objï¼Œo</td><br>    <td>æŒ‡é’ˆåœ°å€</td><br>    <td>{value: 2}</td><br>  </tr><br></table><p>ä¾‹å­ä¸‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  o = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(o); <span class="comment">//2</span></span><br><span class="line">&#125;</span><br><span class="line">foo(obj);</span><br><span class="line"><span class="built_in">console</span>.log(obj.value); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>å†…å­˜åˆ†å¸ƒå¦‚ä¸‹ï¼š</p><p>æ”¹å˜å‰ï¼š</p><table><br>  <tr><br>    <td colspan="2" align="center">æ ˆå†…å­˜</td><br>    <td align="center">å †å†…å­˜</td><br>  </tr><br>  <tr><br>    <td>objï¼Œo</td><br>    <td>æŒ‡é’ˆåœ°å€</td><br>    <td>{value: 1}</td><br>  </tr><br></table><p>æ”¹å˜åï¼š</p><table><br>  <tr><br>    <td colspan="2" align="center">æ ˆå†…å­˜</td><br>    <td align="center">å †å†…å­˜</td><br>  </tr><br>  <tr><br>    <td>obj</td><br>    <td>æŒ‡é’ˆåœ°å€</td><br>    <td>{value: 1}</td><br>  </tr><br>  <tr><br>    <td>o</td><br>    <td>2</td><br>    <td></td><br>  </tr><br></table><p>ä»¥ä¸Šè§£é‡Šæ¥è‡ªï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/10#issuecomment-305645497" target="_blank" rel="noopener">sunsl516 commented</a> on 2 Jun 2017.</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/10" target="_blank" rel="noopener">JavaScript æ·±å…¥ä¹‹å‚æ•°æŒ‰å€¼ä¼ é€’</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§çš„ web æ”»å‡»æ–¹å¼</title>
      <link href="/2019/11/12/web-safety/"/>
      <url>/2019/11/12/web-safety/</url>
      
        <content type="html"><![CDATA[<h3 id="SQL-æ³¨å…¥"><a href="#SQL-æ³¨å…¥" class="headerlink" title="SQL æ³¨å…¥"></a>SQL æ³¨å…¥</h3><blockquote><p>SQL æ³¨å…¥ï¼ˆSQLiï¼‰æ˜¯ä¸€ç§æ³¨å…¥æ”»å‡»ï¼Œï¼Œå¯ä»¥æ‰§è¡Œæ¶æ„ SQL è¯­å¥ã€‚å®ƒé€šè¿‡å°†ä»»æ„ SQL ä»£ç æ’å…¥æ•°æ®åº“æŸ¥è¯¢ï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿå®Œå…¨æ§åˆ¶ Web åº”ç”¨ç¨‹åºåé¢çš„æ•°æ®åº“æœåŠ¡å™¨ã€‚</p></blockquote><a id="more"></a><p>çŠ¯ç½ªåˆ†å­å¯èƒ½ä¼šåˆ©ç”¨å®ƒæ¥æœªç»æˆæƒè®¿é—®ç”¨æˆ·çš„æ•æ„Ÿæ•°æ®ï¼šå®¢æˆ·ä¿¡æ¯ï¼Œä¸ªäººæ•°æ®ï¼Œå•†ä¸šæœºå¯†ï¼ŒçŸ¥è¯†äº§æƒç­‰ã€‚SQL æ³¨å…¥æ”»å‡»æ˜¯æœ€å¤è€ï¼Œæœ€æµè¡Œï¼Œæœ€å±é™©çš„ Web åº”ç”¨ç¨‹åºæ¼æ´ä¹‹ä¸€ã€‚</p><p><em>å¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Ÿ</em></p><ul><li><p>ä¸è¦ä½¿ç”¨åŠ¨æ€ SQL<br>é¿å…å°†ç”¨æˆ·æä¾›çš„è¾“å…¥ç›´æ¥æ”¾å…¥ SQL è¯­å¥ä¸­ï¼›æœ€å¥½ä½¿ç”¨å‡†å¤‡å¥½çš„è¯­å¥å’Œå‚æ•°åŒ–æŸ¥è¯¢ï¼Œè¿™æ ·æ›´å®‰å…¨ã€‚</p></li><li><p>ä¸è¦å°†æ•æ„Ÿæ•°æ®ä¿ç•™åœ¨çº¯æ–‡æœ¬ä¸­<br>åŠ å¯†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ç§æœ‰/æœºå¯†æ•°æ®ï¼›è¿™æ ·å¯ä»¥æä¾›äº†å¦ä¸€çº§ä¿æŠ¤ï¼Œä»¥é˜²æ”»å‡»è€…æˆåŠŸåœ°æ’å‡ºæ•æ„Ÿæ•°æ®ã€‚</p></li><li><p>é™åˆ¶æ•°æ®åº“æƒé™å’Œç‰¹æƒ<br>å°†æ•°æ®åº“ç”¨æˆ·çš„åŠŸèƒ½è®¾ç½®ä¸ºæœ€ä½è¦æ±‚ï¼›è¿™å°†é™åˆ¶æ”»å‡»è€…åœ¨è®¾æ³•è·å–è®¿é—®æƒé™æ—¶å¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚</p></li><li><p>é¿å…ç›´æ¥å‘ç”¨æˆ·æ˜¾ç¤ºæ•°æ®åº“é”™è¯¯<br>æ”»å‡»è€…å¯ä»¥ä½¿ç”¨è¿™äº›é”™è¯¯æ¶ˆæ¯æ¥è·å–æœ‰å…³æ•°æ®åº“çš„ä¿¡æ¯ã€‚</p></li><li><p>å¯¹è®¿é—®æ•°æ®åº“çš„ Web åº”ç”¨ç¨‹åºä½¿ç”¨ Web åº”ç”¨ç¨‹åºé˜²ç«å¢™ï¼ˆWAFï¼‰<br>è¿™ä¸ºé¢å‘ Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¿æŠ¤ï¼Œå®ƒå¯ä»¥å¸®åŠ©è¯†åˆ« SQL æ³¨å…¥å°è¯•ï¼›æ ¹æ®è®¾ç½®ï¼Œå®ƒè¿˜å¯ä»¥å¸®åŠ©é˜²æ­¢ SQL æ³¨å…¥å°è¯•åˆ°è¾¾åº”ç”¨ç¨‹åºï¼ˆä»¥åŠæ•°æ®åº“ï¼‰ã€‚</p></li><li><p>å®šæœŸæµ‹è¯•ä¸æ•°æ®åº“äº¤äº’çš„ Web åº”ç”¨ç¨‹åº<br>è¿™æ ·åšå¯ä»¥å¸®åŠ©æ•è·å¯èƒ½å…è®¸ SQL æ³¨å…¥çš„æ–°é”™è¯¯æˆ–å›å½’ã€‚</p></li><li><p>å°†æ•°æ®åº“æ›´æ–°ä¸ºæœ€æ–°çš„å¯ç”¨ä¿®è¡¥ç¨‹åº</p></li></ul><p>åŸæ–‡ï¼š<a href="https://www.php.cn/mysql-tutorials-416424.html" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ SQL æ³¨å…¥ï¼Ÿå¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Ÿ</a></p><p>æ¯”å¦‚ node åšå®¢é‡Œä½¿ç”¨ mysql.escape()æ¥é˜²æ­¢æ³¨å…¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sql = <span class="string">`</span></span><br><span class="line"><span class="string">  select username, realname from users where username=<span class="subst">$&#123;mysql.<span class="built_in">escape</span>(</span></span></span><br><span class="line"><span class="string"><span class="subst">    username</span></span></span><br><span class="line"><span class="string"><span class="subst">  )&#125;</span> and password=<span class="subst">$&#123;mysql.<span class="built_in">escape</span>(password)&#125;</span>;</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></table></figure><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><blockquote><p>XSSï¼ˆCross Site Scriptï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰æ˜¯å‘ç½‘é¡µä¸­æ³¨å…¥æ¶æ„è„šæœ¬ï¼ˆCSS ä»£ç ã€JavaScript ä»£ç ç­‰ï¼‰ï¼Œç”¨æˆ·æµè§ˆç½‘é¡µæ—¶åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ‰§è¡Œæ¶æ„è„šæœ¬çš„ä¸€ç§æ”»å‡»æ–¹å¼ã€‚å¦‚ç›—å–ç”¨æˆ· cookieï¼Œç ´åé¡µé¢ç»“æ„ã€é‡å®šå‘åˆ°å…¶ä»–ç½‘ç«™ç­‰ã€‚</p></blockquote><p>é˜²èŒƒ XSSï¼ˆæ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ï¼Œå¿…é¡»å¯¹è¾“å…¥çš„æ•°æ®ä½œè¿‡æ»¤å¤„ç†ï¼‰ä¸»è¦æœ‰ä¸¤æ–¹é¢ï¼š</p><ul><li>æ¶ˆæ¯’ï¼šå¯¹å±é™©å­—ç¬¦è¿›è¡Œè½¬ä¹‰</li><li>HttpOnlyï¼šé˜²èŒƒ XSS æ”»å‡»è€…çªƒå– Cookie æ•°æ®</li></ul><p>æ¯”å¦‚ node åšå®¢é‡Œï¼šæ–°å»ºæ–‡ç« çš„æ—¶å€™ï¼Œæ ‡é¢˜é‡Œè¾“å…¥<code>&lt;script&gt;alert(&#39;æˆ‘æ˜¯ä¸€æ®µjsä»£ç &#39;)&lt;/script&gt;</code>ï¼Œç„¶åç‚¹å‡»æäº¤ï¼Œå°±ä¼šç›´æ¥å¼¹å‡ºæ¥ã€‚</p><p>node ä½¿ç”¨ xssï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> title = xss(blogData.title);</span><br><span class="line"></span><br><span class="line"><span class="comment">// title</span></span><br><span class="line"><span class="comment">// &amp;lt;script&amp;gt;alert('æˆ‘æ˜¯ä¸€æ®µjsä»£ç ')&amp;lt;/script&amp;gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSRF-æ”»å‡»"><a href="#CSRF-æ”»å‡»" class="headerlink" title="CSRF æ”»å‡»"></a>CSRF æ”»å‡»</h3><blockquote><p>CSRF æ”»å‡»ï¼ˆCross Site Request Forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ˜¯æ”»å‡»è€…é€šè¿‡è·¨ç«™è¯·æ±‚ï¼Œä»¥åˆæ³•çš„ç”¨æˆ·èº«ä»½è¿›è¡Œéæ³•æ“ä½œï¼ˆå¦‚è½¬è´¦æˆ–å‘å¸–ç­‰ï¼‰ã€‚</p></blockquote><p>è¿™é‡Œå…ˆè¯´ä¸€ä¸‹ï¼Œhttp æ˜¯æ— çŠ¶æ€çš„ã€‚æœåŠ¡å™¨ç«¯å’Œæµè§ˆå™¨ç«¯çš„èº«ä»½åˆ¤æ–­ä¸€èˆ¬æ˜¯é€šè¿‡ cookieã€‚ åç«¯ä¼šæ ¹æ®è¯·æ±‚è€…ä¼ é€’çš„ cookie ä¿¡æ¯åˆ¤æ–­è¯·æ±‚è€…çš„èº«ä»½ã€‚ æ”»å‡»è€…çš„è¯·æ±‚åªè¦æ˜¯å¸¦ä¸Šäº†ç›®æ ‡ç”¨æˆ·çš„ cookieï¼Œå°±å¯ä»¥åˆæ³•è¯·æ±‚ã€‚</p><ul><li><p>è·¨ç«™ï¼š<br>è¯·æ±‚æ¥æºå¾ˆå¯èƒ½æ¥è‡ªå…¶ä»–ç½‘ç«™ï¼Œä¹Ÿæœ‰å¯èƒ½æ¥è‡ªæœ¬ç«™</p></li><li><p>ä¼ªé€ ï¼š<br>è¯·æ±‚å¹¶éç”¨æˆ·çš„æ„æ„¿</p></li><li><p>å®ç°ï¼š<br>åˆ©ç”¨è·¨åŸŸæ ‡ç­¾ img iframe ç­‰åœ¨ b ç½‘ç«™å‘é€å¾€ a ç½‘ç«™ get è¯·æ±‚ï¼Œä¼šå¸¦ä¸Š a ç½‘ç«™çš„ cookieï¼Œç”±æ­¤å¯è§å¯¹äºæ•°æ®ä¿®æ”¹çš„è¯·æ±‚æœ€å¥½ä¸è¦ç”¨ getã€‚</p><p>å¦‚æœä½ åœ¨ a ç«™ç™»å½•äº†ï¼Œåˆè®¿é—®äº†æ¶æ„ç½‘ç«™ bï¼Œè€Œ b ä¸Šé¢æœ‰ä¸€ä¸ªæ¶æ„ img æ ‡ç­¾çš„ get è¯·æ±‚ï¼Œé‚£ä½ çš„æ•°æ®å¯èƒ½å°±è¢«åˆ é™¤äº†ã€‚ è€Œè·¨åŸŸçš„ ajax è¯·æ±‚å› ä¸ºåŒæºç­–ç•¥ï¼Œä¸ä¼šå¸¦ä¸Š cookieï¼Œä½†æ˜¯ä¹Ÿèƒ½è¯·æ±‚åˆ°ç»“æœï¼Œåç«¯ä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œä¸è¿‡å› ä¸ºæ²¡æœ‰æºå¸¦ cookie ä¿¡æ¯ï¼Œåç«¯æ‹¿ ä¸åˆ°ç™»å½•çŠ¶æ€ï¼Œå¾ˆå¤šæ“ä½œä¸ä¼šæˆåŠŸã€‚è·¨åŸŸè¯·æ±‚çš„ç»“æœä¹Ÿä¼šå‘åˆ°å®¢æˆ·ç«¯ï¼Œä¸è¿‡ç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæµè§ˆå™¨è¯»å–ä¸åˆ°è¿™ä¸ªå“åº”ç»“æœã€‚</p><p>ä¼ªé€  form è¡¨å•æäº¤ã€‚é‚£ä¹ˆï¼Œpost è¯·æ±‚å°±å®‰å…¨äº†å—ï¼Ÿform è¡¨å•æ˜¯è·¨åŸŸçš„ã€‚å¹¶ä¸”å¯ä»¥æäº¤ post è¯·æ±‚ã€‚æˆ‘ä»¬åœ¨ b ç½‘ç«™ä¼ªé€ ä¸€ä¸ª form è¡¨å•è‡ªåŠ¨æäº¤åˆ° a ç½‘ç«™ã€‚</p></li><li><p>é¢„é˜²ï¼š<br>æœ€å¥½çš„åŠæ³•æ˜¯å¸¦ tokenï¼Œä»»ä½•è¯·æ±‚éƒ½å¸¦ä¸Š tokenï¼Œè¿™æ ·ä¼ªç«™å¯ä»¥å‘è¯·æ±‚ï¼Œä½†æ˜¯æ— æ³•æ‹¿åˆ° tokenï¼Œåç«¯æ”¶åˆ°çš„å°±ä¸å¸¦ token å°±å¯ä»¥åˆ¤å®šéæ³•äº†ã€‚</p></li></ul><p>åŸæ–‡ï¼š<a href="https://blog.csdn.net/liusaint1992/article/details/80865350" target="_blank" rel="noopener">å¸¸è§çš„ web æ”»å‡»æ–¹å¼åŠé¢„é˜²</a></p><h3 id="å¯†ç åŠ å¯†"><a href="#å¯†ç åŠ å¯†" class="headerlink" title="å¯†ç åŠ å¯†"></a>å¯†ç åŠ å¯†</h3><ul><li>æ–‡æ¡£ï¼š<a href="nodejs.cn/api/crypto.html">cryptoï¼ˆåŠ å¯†ï¼‰</a></li></ul><p>crypto æ¨¡å—æä¾›äº†åŠ å¯†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¹ OpenSSL çš„å“ˆå¸Œã€HMACã€åŠ å¯†ã€è§£å¯†ã€ç­¾åã€ä»¥åŠéªŒè¯åŠŸèƒ½çš„ä¸€æ•´å¥—å°è£…ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">"crypto"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> secret = <span class="string">"abcdefg"</span>;</span><br><span class="line"><span class="keyword">const</span> hash = crypto</span><br><span class="line">  .createHmac(<span class="string">"sha256"</span>, secret)</span><br><span class="line">  .update(<span class="string">"I love cupcakes"</span>)</span><br><span class="line">  .digest(<span class="string">"hex"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(hash);</span><br><span class="line"><span class="comment">// æ‰“å°:</span></span><br><span class="line"><span class="comment">//   c0fa1bc00531bd78ef38c628449c5102aeabd49b5dc3a2a516ea6ea959d6658e</span></span><br></pre></td></tr></table></figure><h4 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h4><p>md5ï¼šä¸æ˜¯ä¸€ç§åŠ å¯†ç®—æ³•ï¼Œæ˜¯ç”¨æ¥åšæ–‡ä»¶æ ¡éªŒçš„</p><p>ä½œç”¨ï¼šè®©å¤§å®¹é‡ä¿¡æ¯åœ¨æ•°å­—ç­¾åè½¯ä»¶ç­¾ç½²ç§äººç§˜é’¥å‰è¢«â€å‹ç¼©â€æˆä¸€ç§ä¿å¯†æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸€ä¸ªä»»æ„é•¿åº¦çš„å­—èŠ‚ä¸²å˜æ¢æˆä¸€å®šé•¿åº¦çš„åå…­è¿›åˆ¶æ•°å­—ä¸²ï¼ˆ32ä¸ªå­—ç¬¦ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">'crypto'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SECRET_KEY = <span class="string">'WJiol_8776#'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// md5 åŠ å¯†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> crypto.createHash(<span class="string">'md5'</span>).update(content).digest(<span class="string">'hex'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ å¯†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">genPassword</span>(<span class="params">password</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> md5(<span class="string">`password=<span class="subst">$&#123;password&#125;</span>&amp;key=<span class="subst">$&#123;SECRET_KEY&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(genPassword(<span class="string">'123456'</span>))</span><br><span class="line"><span class="comment">// 4d4994bde299f6168c65f24c852897b7</span></span><br></pre></td></tr></table></figure><h4 id="HMAC"><a href="#HMAC" class="headerlink" title="HMAC"></a>HMAC</h4><p>è¿›ä¸€æ­¥æå‡MD5åŠ å¯†å®‰å…¨æ€§ï¼šæ˜¯ä¸€ä¸ªâ€ç§˜é’¥â€ï¼Œå¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†ï¼Œå¹¶åšâ€ä¸¤æ¬¡æ•£åˆ—â€ï¼Œä½†ä½¿ç”¨å®ƒå¾—åˆ°çš„è¿˜æ˜¯32ä¸ªå­—ç¬¦</p><p>åˆ©ç”¨å“ˆå¸Œç®—æ³•ï¼Œä»¥ä¸€ä¸ªç§˜é’¥å’Œä¸€ä¸ªä¿¡æ¯ä¸ºè¾“å…¥ï¼Œç”Ÿæˆä¸€ä¸ªæ¶ˆæ¯æ‘˜è¦ä½œä¸ºè¾“å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">'crypto'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SECRET_KEY = <span class="string">'WJiol_8776#'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Hmac åŠ å¯†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hmac</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> crypto.createHmac(<span class="string">'md5'</span>, SECRET_KEY).update(content).digest(<span class="string">'hex'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hamc: '</span>, hmac(<span class="string">'123456'</span>))</span><br><span class="line"><span class="comment">// 7d37b577bcd2a492820846e475b933f9</span></span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://cloud.tencent.com/developer/information/sql%E6%94%BB%E5%87%BB" target="_blank" rel="noopener">sql æ”»å‡»</a></li><li><a href="https://cloud.tencent.com/developer/article/1455178" target="_blank" rel="noopener">SQL æ³¨å…¥å’Œ XSS æ”»å‡»</a></li><li><a href="https://www.php.cn/mysql-tutorials-416424.html" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ SQL æ³¨å…¥ï¼Ÿå¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Ÿ</a></li><li><a href="https://cloud.tencent.com/developer/article/1198977" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ SQL æ³¨å…¥æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ</a></li><li><a href="https://blog.csdn.net/qq_41033290/article/details/91381962" target="_blank" rel="noopener">å¦‚ä½•é¢„é˜² SQL æ³¨å…¥å’Œ XSS æ”»å‡»</a> - ä»£ç è®²è§£æ›´ç›´è§‚</li><li><a href="http://www.sosout.com/2018/09/05/cryptojs-tutorial.html" target="_blank" rel="noopener">å‰ç«¯åŠ å¯† JS åº“â€“CryptoJS ä½¿ç”¨æŒ‡å— </a></li><li><a href="https://www.jianshu.com/p/92195252c2e0" target="_blank" rel="noopener">nodeJSï¼šMD5åŠ å¯†</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½“å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬æ‰€å¯¼è‡´çš„â€œObjectå¤§æ¡ˆâ€</title>
      <link href="/2019/10/05/js-object/"/>
      <url>/2019/10/05/js-object/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç”¨ forEach æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬<br><a id="more"></a></p></blockquote><h2 id="ç”¨-forEach-æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬"><a href="#ç”¨-forEach-æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬" class="headerlink" title="ç”¨ forEach æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬"></a>ç”¨ forEach æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡å¤åˆ¶å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> copy = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(obj));</span><br><span class="line">  <span class="keyword">var</span> propNames = <span class="built_in">Object</span>.getOwnPropertyNames(obj);</span><br><span class="line"></span><br><span class="line">  propNames.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, name);</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(copy, name, desc);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> copyObj1 = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> copyObj2 = copy(copyObj1);</span><br><span class="line"><span class="built_in">console</span>.log(copyObj2); <span class="comment">// &#123; a: 1, b: 2 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(copyObj2 === copyObj1); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h2><blockquote><p><code>Object.create(proto[, propertiesObject])</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„<strong>proto</strong></p></blockquote><h2 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf"></a>Object.getPrototypeOf</h2><h2 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames"></a>Object.getOwnPropertyNames</h2><h2 id="Object-getOwnPropertyDescriptor"><a href="#Object-getOwnPropertyDescriptor" class="headerlink" title="Object.getOwnPropertyDescriptor"></a>Object.getOwnPropertyDescriptor</h2><h2 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h2><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Object.create()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„__proto__</span></span><br><span class="line">  <span class="comment">// Object.getPrototypeOf(object)æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼ˆå†…éƒ¨[[Prototype]]å±æ€§çš„å€¼</span></span><br><span class="line">  <span class="keyword">var</span> copy = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(obj));</span><br><span class="line">  <span class="comment">// Object.getOwnPropertyNames(obj)æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬Symbolå€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> propNames = <span class="built_in">Object</span>.getOwnPropertyNames(obj);</span><br><span class="line"></span><br><span class="line">  propNames.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Object.getOwnPropertyDescriptor(obj, prop)æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡ä¸Šä¸€ä¸ªè‡ªæœ‰å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦ã€‚</span></span><br><span class="line">    <span class="comment">// ï¼ˆè‡ªæœ‰å±æ€§æŒ‡çš„æ˜¯ç›´æ¥èµ‹äºˆè¯¥å¯¹è±¡çš„å±æ€§ï¼Œä¸éœ€è¦ä»åŸå‹é“¾ä¸Šè¿›è¡ŒæŸ¥æ‰¾çš„å±æ€§ï¼‰</span></span><br><span class="line">    <span class="keyword">var</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, name);</span><br><span class="line">    <span class="comment">// Object.defineProperty(obj, prop, descriptor)æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œ</span></span><br><span class="line">    <span class="comment">// æˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(copy, name, desc);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#%E5%AF%B9%E8%B1%A1%E5%A4%8D%E5%88%B6%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">Array.prototype.forEach() æ˜¯å¦‚ä½•ä½¿ç”¨ ECMAScript 5 Object.* å…ƒå±æ€§ï¼ˆmeta property ï¼‰å‡½æ•°å·¥ä½œ</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener">forâ€¦of</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some" target="_blank" rel="noopener">Array.prototype.some()</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every" target="_blank" rel="noopener">Array.prototype.every()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener">Object.create()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">Object.keys()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener">Object.defineProperty()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" target="_blank" rel="noopener">Object.getOwnPropertyDescriptor()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames" target="_blank" rel="noopener">Object.getOwnPropertyNames()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/GetPrototypeOf" target="_blank" rel="noopener">Object.getPrototypeOf()</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git æäº¤çš„æ­£ç¡®å§¿åŠ¿ï¼šCommit message ç¼–å†™æŒ‡å—</title>
      <link href="/2019/09/26/git-commit/"/>
      <url>/2019/09/26/git-commit/</url>
      
        <content type="html"><![CDATA[<h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p>Header éƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeï¼ˆå¿…éœ€ï¼‰ã€scopeï¼ˆå¯é€‰ï¼‰å’Œ subjectï¼ˆå¿…éœ€ï¼‰</p><ul><li>featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</li><li>fixï¼šä¿®è¡¥ bug</li><li>docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰</li><li>styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</li><li>refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰</li><li>testï¼šå¢åŠ æµ‹è¯•</li><li>choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨<a id="more"></a></li></ul><h3 id="æäº¤ä¿¡æ¯è§„èŒƒ"><a href="#æäº¤ä¿¡æ¯è§„èŒƒ" class="headerlink" title="æäº¤ä¿¡æ¯è§„èŒƒ"></a>æäº¤ä¿¡æ¯è§„èŒƒ</h3><p>æˆ‘ä»¬å¯¹é¡¹ç›®çš„ git æäº¤ä¿¡æ¯æ ¼å¼è¿›è¡Œç»Ÿä¸€æ ¼å¼çº¦å®šï¼Œæ¯æ¡æäº¤ä¿¡æ¯ç”± <code>type</code>+<code>subject</code> ç»„æˆï¼Œè¿™å°†æå‡é¡¹ç›®æ—¥å¿—çš„å¯è¯»æ€§ã€‚</p><ul><li><code>type</code> ç”¨äºè¡¨è¿°æ­¤æ¬¡æäº¤ä¿¡æ¯çš„æ„ä¹‰ï¼Œé¦–å†™å­—æ¯å¤§å†™ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºå¦‚ä¸‹ç±»å‹ï¼š<ul><li><code>Build</code>ï¼šåŸºç¡€æ„å»ºç³»ç»Ÿæˆ–ä¾èµ–åº“çš„å˜åŒ–</li><li><code>Ci</code>ï¼šCI æ„å»ºç³»ç»ŸåŠå…¶è„šæœ¬å˜åŒ–</li><li><code>Docs</code>ï¼šæ–‡æ¡£å†…å®¹å˜åŒ–</li><li><code>Feat</code>ï¼šæ–°åŠŸèƒ½</li><li><code>Fix</code>ï¼šBug ä¿®å¤</li><li><code>Perf</code>ï¼šæ€§èƒ½ä¼˜åŒ–</li><li><code>Refactor</code>ï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ Bug çš„ä»£ç å˜åŠ¨ï¼‰</li><li><code>Style</code>ï¼šæ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</li><li><code>Revert</code>ï¼šä»£ç å›æ»š</li><li><code>Release</code>ï¼šç‰ˆæœ¬å‘å¸ƒ</li></ul></li><li><code>subject</code> ç”¨äºç®€è¦æè¿°ä¿®æ”¹å˜æ›´çš„å†…å®¹ï¼Œå¦‚ <code>Update code highlighting in readme.md</code>ã€‚<ul><li>å¥å°¾ä¸è¦ä½¿ç”¨ç¬¦å·ã€‚</li><li>ä½¿ç”¨ç°åœ¨æ—¶ã€ç¥ˆä½¿å¥è¯­æ°”ã€‚</li></ul></li></ul><h3 id="æ ‡ç­¾è§„èŒƒ"><a href="#æ ‡ç­¾è§„èŒƒ" class="headerlink" title="æ ‡ç­¾è§„èŒƒ"></a>æ ‡ç­¾è§„èŒƒ</h3><p>ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤äººå‘˜å’Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°ä»–ä»¬æƒ³è¦æŸ¥çœ‹çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨â€œæ ‡ç­¾â€åŠŸèƒ½å¯¹ Pull requests å’Œ Issues è¿›è¡Œåˆ†ç±»ã€‚</p><p>å¦‚æœæ‚¨ä¸ç¡®å®šæŸä¸ªæ ‡ç­¾çš„å«ä¹‰ï¼Œæˆ–è€…ä¸çŸ¥é“å°†å“ªäº›æ ‡ç­¾åº”ç”¨äº PR æˆ– issueï¼Œåƒä¸‡åˆ«é”™è¿‡è¿™ä¸ªã€‚</p><p>Issue çš„æ ‡ç­¾ï¼š</p><ul><li>ç±»å‹<ul><li><code>Bug</code>: æ£€æµ‹åˆ°éœ€è¦è¿›è¡Œç¡®è®¤çš„ Bug</li><li><code>Feature Request</code>: æå‡ºäº†æ–°åŠŸèƒ½è¯·æ±‚çš„ Issue</li><li><code>Question</code>: æå‡ºç–‘é—®çš„ Issue</li><li><code>Meta</code>: è¡¨æ˜ä½¿ç”¨æ¡æ¬¾å˜æ›´çš„ Issue</li><li><code>Support</code>: è¢«æ ‡è®°ä¸ºæ”¯æŒè¯·æ±‚çš„ Issue</li><li><code>Polls</code>: å‘èµ·æŠ•ç¥¨çš„ Issue</li></ul></li><li>ç»“æœ<ul><li><code>Duplicate</code>: é‡å¤æåŠçš„ Issue</li><li><code>Irrelevant</code>: ä¸ NexT ä¸»é¢˜æ— å…³çš„ Issue</li><li><code>Expected Behavior</code>: ä¸é¢„æœŸè¡Œä¸ºç›¸ç¬¦çš„ Issue</li><li><code>Need More Info</code>: éœ€è¦æ›´å¤šä¿¡æ¯çš„ Issue</li><li><code>Need Verify</code>: éœ€è¦å¼€å‘äººå‘˜æˆ–ç”¨æˆ·ç¡®è®¤ Bug æˆ–è§£å†³æ–¹æ³•çš„ Issue</li><li><code>Verified</code>: å·²ç»è¢«ç¡®è®¤çš„ Issue</li><li><code>Can&#39;t Reproduce</code>: æ— æ³•å¤ç°çš„ Issue</li><li><code>Solved</code>: å·²ç»è§£å†³çš„ Issue</li><li><code>Stale</code>: ç”±äºé•¿æœŸæ— äººå›åº”è¢«å°å­˜çš„ Issue</li></ul></li></ul><p>Pull Request çš„æ ‡ç­¾ï¼š</p><ul><li><code>Breaking Change</code>: äº§ç”Ÿé‡å¤§å˜åŠ¨çš„ Pull Request</li><li><code>Bug Fix</code>: ä¿®å¤ç›¸å…³ Bug çš„ Pull Request</li><li><code>New Feature</code>: æ·»åŠ äº†æ–°åŠŸèƒ½çš„ Pull Request</li><li><code>Feature</code>: ä¸ºç°æœ‰åŠŸèƒ½æä¾›é€‰é¡¹æˆ–åŠ æˆçš„ Pull Request</li><li><code>i18n</code>: æ›´æ–°äº†ç¿»è¯‘çš„ Pull Request</li><li><code>Work in Progress</code>: ä»åœ¨è¿›è¡Œæ”¹åŠ¨å’Œå®Œå–„çš„ Pull Request</li><li><code>Skip Release</code>: æ— éœ€åœ¨ Release Note ä¸­å±•ç°çš„ Pull Request</li></ul><p>ä¸¤è€…å…¼æœ‰ï¼š</p><ul><li><code>Roadmap</code>: ä¸ NexT ä¸»é¢˜å‘å±•ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>Help Wanted</code>: éœ€è¦å¸®åŠ©çš„ Issue æˆ–è€… Pull Request</li><li><code>Discussion</code>: éœ€è¦è¿›è¡Œè®¨è®ºçš„ Issue æˆ–è€… Pull Request</li><li><code>Improvement</code>: éœ€è¦æ”¹è¿›çš„ Issue æˆ–è€…æ”¹è¿›äº† NexT ä¸»é¢˜çš„ Pull Request</li><li><code>Performance</code>: æå‡ºæ€§èƒ½é—®é¢˜çš„ Issue æˆ–è€…æé«˜äº† NexT ä¸»é¢˜æ€§èƒ½çš„ Pull Request</li><li><code>Hexo</code>: ä¸ Hexo å’Œ Hexo æ’ä»¶ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>Template Engine</code>: ä¸æ¨¡ç‰ˆå¼•æ“ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>CSS</code>: ä¸ NexT ä¸»é¢˜ CSS æ–‡ä»¶ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>Fonts</code>: ä¸ NexT ä¸»é¢˜å­—ä½“ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>PJAX</code>: ä¸ PJAX ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>3rd Party Plugin</code>: ä¸ç¬¬ä¸‰æ–¹æ’ä»¶å’ŒæœåŠ¡ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>Docs</code>: ä¸æ–‡æ¡£è¯´æ˜ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li><li><code>Configurations</code>: ä¸ NexT ä¸»é¢˜è®¾ç½®ç›¸å…³çš„ Issue æˆ–è€… Pull Request</li></ul><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/daysme/p/7722474.html" target="_blank" rel="noopener">Git æäº¤çš„æ­£ç¡®å§¿åŠ¿ï¼šCommit message ç¼–å†™æŒ‡å—</a></li><li><a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/CONTRIBUTING.md" target="_blank" rel="noopener">Next ä¸»é¢˜è´¡çŒ®è§„èŒƒ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2019/09/06/web-speed/"/>
      <url>/2019/09/06/web-speed/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é‡å®šå‘ â†’ æ‹‰å–ç¼“å­˜ â†’DNS æŸ¥è¯¢ â†’ å»ºç«‹ TCP é“¾æ¥ â†’ å‘èµ·è¯·æ±‚ â†’ æ¥æ”¶å“åº” â†’ å¤„ç† HTML å…ƒç´  â†’ å…ƒç´ åŠ è½½å®Œæˆ</p></blockquote><a id="more"></a><h2 id="ç½‘ç»œä¼ è¾“æ€§èƒ½ä¼˜åŒ–"><a href="#ç½‘ç»œä¼ è¾“æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ç½‘ç»œä¼ è¾“æ€§èƒ½ä¼˜åŒ–"></a>ç½‘ç»œä¼ è¾“æ€§èƒ½ä¼˜åŒ–</h2><h3 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜"></a>æµè§ˆå™¨ç¼“å­˜</h3><blockquote><p>ç¼“å­˜ä¸€èˆ¬åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œä¸»è¦åŒºåˆ«æ˜¯ï¼šä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„æ—¶å€™ï¼Œæ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨éªŒè¯æœ¬åœ°ç¼“å­˜æ˜¯å¦ä¾æ—§æœ‰æ•ˆã€‚</p></blockquote><h4 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h4><p>ä¸»è¦é€šè¿‡ http è¯·æ±‚å¤´ä¸­çš„ Cache-Control å’Œ Expire ä¸¤ä¸ªå­—æ®µæ§åˆ¶</p><p>ä¸€èˆ¬ï¼Œæˆ‘ä»¬ä¼šè®¾ç½® Cache-Control çš„å€¼ä¸ºâ€œpublic, max-age=xxxâ€ï¼Œè¡¨ç¤ºåœ¨ xxx ç§’å†…å†æ¬¡è®¿é—®è¯¥èµ„æºï¼Œå‡ä½¿ç”¨æœ¬åœ°çš„ç¼“å­˜ï¼Œä¸å†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</p><h4 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h4><p>æ¯æ¬¡éƒ½å‘æœåŠ¡å™¨éªŒè¯ä¸€ä¸‹ç¼“å­˜çš„æœ‰æ•ˆæ€§</p><h4 id="å‰ç«¯ç¼“å­˜æ–¹æ¡ˆ"><a href="#å‰ç«¯ç¼“å­˜æ–¹æ¡ˆ" class="headerlink" title="å‰ç«¯ç¼“å­˜æ–¹æ¡ˆ"></a>å‰ç«¯ç¼“å­˜æ–¹æ¡ˆ</h4><ul><li>HTMLï¼šä½¿ç”¨åå•†ç¼“å­˜</li><li>CSS JS Imageï¼šä½¿ç”¨å¼ºç¼“å­˜ï¼Œæ–‡ä»¶åå¸¦ä¸Š hash å€¼</li></ul><p>æµè§ˆå™¨é»˜è®¤çš„ç¼“å­˜æ˜¯æ”¾åœ¨å†…å­˜å†…çš„ï¼Œä½†æˆ‘ä»¬çŸ¥é“ï¼Œå†…å­˜é‡Œçš„ç¼“å­˜ä¼šå› ä¸ºè¿›ç¨‹çš„ç»“æŸæˆ–è€…è¯´æµè§ˆå™¨çš„å…³é—­è€Œè¢«æ¸…é™¤ï¼Œè€Œå­˜åœ¨ç¡¬ç›˜é‡Œçš„ç¼“å­˜æ‰èƒ½å¤Ÿè¢«é•¿æœŸä¿ç•™ä¸‹å»ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ network é¢æ¿ä¸­å„è¯·æ±‚çš„ size é¡¹é‡Œï¼Œä¼šçœ‹åˆ°ä¸¤ç§ä¸åŒçš„çŠ¶æ€ï¼šfrom memory cache å’Œ from disk cacheï¼Œå‰è€…æŒ‡ç¼“å­˜æ¥è‡ªå†…å­˜ï¼Œåè€…æŒ‡ç¼“å­˜æ¥è‡ªç¡¬ç›˜ã€‚è€Œæ§åˆ¶ç¼“å­˜å­˜æ”¾ä½ç½®çš„ï¼Œä¸æ˜¯åˆ«äººï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®çš„ Etag å­—æ®µã€‚åœ¨æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”åï¼Œä¼šæ£€æµ‹å“åº”å¤´éƒ¨ï¼ˆHeaderï¼‰ï¼Œå¦‚æœæœ‰ Etag å­—æ®µï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šå°†æœ¬æ¬¡ç¼“å­˜å†™å…¥ç¡¬ç›˜ä¸­ã€‚</p><h3 id="èµ„æºæ‰“åŒ…å‹ç¼©"><a href="#èµ„æºæ‰“åŒ…å‹ç¼©" class="headerlink" title="èµ„æºæ‰“åŒ…å‹ç¼©"></a>èµ„æºæ‰“åŒ…å‹ç¼©</h3><blockquote><p>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–æªæ–½å½’ç»“ä¸ºä¸‰å¤§æ–¹é¢ï¼šå‡å°‘è¯·æ±‚æ•°ã€å‡å°è¯·æ±‚èµ„æºä½“ç§¯ã€æå‡ç½‘ç»œä¼ è¾“é€Ÿç‡</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp grunt webpack parcel</span><br></pre></td></tr></table></figure><h3 id="å›¾ç‰‡èµ„æºä¼˜åŒ–"><a href="#å›¾ç‰‡èµ„æºä¼˜åŒ–" class="headerlink" title="å›¾ç‰‡èµ„æºä¼˜åŒ–"></a>å›¾ç‰‡èµ„æºä¼˜åŒ–</h3><ul><li>ä¸è¦åœ¨ HTML é‡Œç¼©æ”¾å›¾åƒ</li><li>ä½¿ç”¨é›ªç¢§å›¾ï¼ˆCSS Spriteï¼‰- <code>webpack-spritesmith</code></li><li>ä½¿ç”¨å­—ä½“å›¾æ ‡ï¼ˆiconfontï¼‰- icomoon</li><li>ä½¿ç”¨ WebP - å›¾ç‰‡å‹ç¼©ä½“ç§¯å¤§çº¦åªæœ‰ JPEG çš„ 2/3ï¼Œå¹¶èƒ½èŠ‚çœå¤§é‡çš„æœåŠ¡å™¨å¸¦å®½èµ„æºå’Œæ•°æ®ç©ºé—´</li></ul><h3 id="ç½‘ç»œä¼ è¾“æ€§èƒ½æ£€æµ‹å·¥å…·"><a href="#ç½‘ç»œä¼ è¾“æ€§èƒ½æ£€æµ‹å·¥å…·" class="headerlink" title="ç½‘ç»œä¼ è¾“æ€§èƒ½æ£€æµ‹å·¥å…·"></a>ç½‘ç»œä¼ è¾“æ€§èƒ½æ£€æµ‹å·¥å…·</h3><ul><li><code>Page Speed | PageSpeed Insights</code></li></ul><h3 id="ä½¿ç”¨-CDN"><a href="#ä½¿ç”¨-CDN" class="headerlink" title="ä½¿ç”¨ CDN"></a>ä½¿ç”¨ CDN</h3><h2 id="é¡µé¢æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"><a href="#é¡µé¢æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="é¡µé¢æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"></a>é¡µé¢æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</h2><h3 id="æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ï¼ˆwebkitï¼‰"><a href="#æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ï¼ˆwebkitï¼‰" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ï¼ˆwebkitï¼‰"></a>æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ï¼ˆwebkitï¼‰</h3><ul><li>ã€ŠWebkit æŠ€æœ¯å†…å¹•ã€‹</li></ul><blockquote><p>æµè§ˆå™¨çš„è§£é‡Šå™¨ï¼Œæ˜¯åŒ…æ‹¬åœ¨æ¸²æŸ“å¼•æ“å†…çš„ï¼Œæˆ‘ä»¬å¸¸è¯´çš„ Chromeï¼ˆç°åœ¨ä½¿ç”¨çš„æ˜¯ Blink å¼•æ“ï¼‰å’Œ Safari ä½¿ç”¨çš„ Webkit å¼•æ“ï¼ŒFirefox ä½¿ç”¨çš„ Gecko å¼•æ“ï¼ŒæŒ‡çš„å°±æ˜¯æ¸²æŸ“å¼•æ“ã€‚è€Œåœ¨æ¸²æŸ“å¼•æ“å†…ï¼Œè¿˜åŒ…æ‹¬ç€æˆ‘ä»¬çš„ HTML è§£é‡Šå™¨ï¼ˆæ¸²æŸ“æ—¶ç”¨äºæ„é€  DOM æ ‘ï¼‰ã€CSS è§£é‡Šå™¨ï¼ˆæ¸²æŸ“æ—¶ç”¨äºåˆæˆ CSS è§„åˆ™ï¼‰è¿˜æœ‰æˆ‘ä»¬çš„ JS è§£é‡Šå™¨ã€‚ä¸è¿‡åæ¥ï¼Œç”±äº JS çš„ä½¿ç”¨è¶Šæ¥è¶Šé‡è¦ï¼Œå·¥ä½œè¶Šæ¥è¶Šç¹æ‚ï¼Œæ‰€ä»¥ JS è§£é‡Šå™¨ä¹Ÿæ¸æ¸ç‹¬ç«‹å‡ºæ¥ï¼Œæˆä¸ºäº†å•ç‹¬çš„ JS å¼•æ“ï¼Œå°±åƒä¼—æ‰€å‘¨çŸ¥çš„ V8 å¼•æ“ï¼Œæˆ‘ä»¬ç»å¸¸æ¥è§¦çš„ Node.js ä¹Ÿæ˜¯ç”¨çš„å®ƒã€‚</p></blockquote><h3 id="DOM-æ¸²æŸ“å±‚ä¸-GPU-ç¡¬ä»¶åŠ é€Ÿ"><a href="#DOM-æ¸²æŸ“å±‚ä¸-GPU-ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="DOM æ¸²æŸ“å±‚ä¸ GPU ç¡¬ä»¶åŠ é€Ÿ"></a>DOM æ¸²æŸ“å±‚ä¸ GPU ç¡¬ä»¶åŠ é€Ÿ</h3><ul><li>â‘  æµè§ˆå™¨ä¼šå…ˆè·å– DOM æ ‘å¹¶ä¾æ®æ ·å¼å°†å…¶åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„æ¸²æŸ“å±‚</li><li>â‘¡CPU å°†æ¯ä¸ªå±‚ç»˜åˆ¶è¿›ç»˜å›¾ä¸­</li><li>â‘¢ å°†ä½å›¾ä½œä¸ºçº¹ç†ä¸Šä¼ è‡³ GPUï¼ˆæ˜¾å¡ï¼‰ç»˜åˆ¶</li><li>â‘£GPU å°†æ‰€æœ‰çš„æ¸²æŸ“å±‚ç¼“å­˜ï¼ˆå¦‚æœä¸‹æ¬¡ä¸Šä¼ çš„æ¸²æŸ“å±‚æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒGPU å°±ä¸éœ€è¦å¯¹å…¶è¿›è¡Œé‡ç»˜ï¼‰å¹¶å¤åˆå¤šä¸ªæ¸²æŸ“å±‚æœ€ç»ˆå½¢æˆæˆ‘ä»¬çš„å›¾åƒ</li></ul><h3 id="é‡æ’å’Œé‡ç»˜"><a href="#é‡æ’å’Œé‡ç»˜" class="headerlink" title="é‡æ’å’Œé‡ç»˜"></a>é‡æ’å’Œé‡ç»˜</h3><p>ä¸è®ºæ˜¯é‡æ’è¿˜æ˜¯é‡ç»˜ï¼Œéƒ½ä¼šé˜»å¡æµè§ˆå™¨ã€‚è¦æé«˜ç½‘é¡µæ€§èƒ½ï¼Œå°±è¦é™ä½é‡æ’å’Œé‡ç»˜çš„é¢‘ç‡å’Œæˆæœ¬ï¼Œè¿‘å¯èƒ½å°‘åœ°è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p><p>é‡æ’æ˜¯ç”± CPU å¤„ç†çš„ï¼Œè€Œé‡ç»˜æ˜¯ç”± GPU å¤„ç†çš„ï¼ŒCPU çš„å¤„ç†æ•ˆç‡è¿œä¸åŠ GPUï¼Œå¹¶ä¸”é‡æ’ä¸€å®šä¼šå¼•å‘é‡ç»˜ï¼Œè€Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘é‡æ’ã€‚æ‰€ä»¥åœ¨æ€§èƒ½ä¼˜åŒ–å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ›´åº”å½“ç€é‡å‡å°‘é‡æ’çš„å‘ç”Ÿã€‚</p><h4 id="é‡æ’-reflow"><a href="#é‡æ’-reflow" class="headerlink" title="é‡æ’ reflow"></a>é‡æ’ reflow</h4><p>æ¸²æŸ“å±‚å†…çš„å…ƒç´ å¸ƒå±€å‘ç”Ÿä¿®æ”¹ï¼Œéƒ½ä¼šå¯¼è‡´é¡µé¢é‡å†™æ’åˆ—ã€‚</p><p>æ¯”å¦‚ï¼šçª—å£çš„å°ºå¯¸å‘ç”Ÿå˜åŒ–ã€åˆ é™¤æˆ–æ·»åŠ  DOM å…ƒç´ ï¼›ä¿®æ”¹äº†å½±å“å…ƒç´ ç›’å­å¤§å°çš„ css å±æ€§ï¼ˆwidth height paddingâ€¦ï¼‰</p><h4 id="é‡ç»˜-repaint"><a href="#é‡ç»˜-repaint" class="headerlink" title="é‡ç»˜ repaint"></a>é‡ç»˜ repaint</h4><p>ç»˜åˆ¶ï¼Œæ‰€æœ‰å¯¹å…ƒç´ çš„è§†è§‰è¡¨ç°å±æ€§çš„ä¿®æ”¹ï¼Œéƒ½ä¼šå¼•èµ·é‡ç»˜ã€‚</p><h3 id="ä¼˜åŒ–ç­–ç•¥"><a href="#ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="ä¼˜åŒ–ç­–ç•¥"></a>ä¼˜åŒ–ç­–ç•¥</h3><ul><li>CSS å±æ€§è¯»å†™åˆ†ç¦»</li><li>é€šè¿‡åˆ‡æ¢ class æˆ–è€… style.csstext å±æ€§å»æ‰¹é‡æ“ä½œå…ƒç´ æ ·å¼</li><li>DOM å…ƒç´ ç¦»çº¿æ›´æ–°</li><li>å°†æ²¡ç”¨çš„å…ƒç´ è®¾ä¸ºä¸å¯è§ï¼švisibility: hiddenï¼Œå‡å°‘é‡ç»˜çš„å‹åŠ›</li><li>å‹ç¼© DOM çš„æ·±åº¦ï¼šå°‘ç”¨ DOM å®Œæˆé¡µé¢æ ·å¼ï¼Œå¤šä½¿ç”¨ä¼ªå…ƒç´ æˆ–è€… box-shadow å–ä»£ã€‚</li><li>å›¾ç‰‡åœ¨æ¸²æŸ“å‰æŒ‡å®šå¤§å°ï¼šå› ä¸º img å…ƒç´ æ˜¯å†…è”å…ƒç´ ï¼Œæ‰€ä»¥åœ¨åŠ è½½å›¾ç‰‡åä¼šæ”¹å˜å®½é«˜ï¼Œä¸¥é‡çš„æƒ…å†µä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢é‡æ’ï¼Œæ‰€ä»¥æœ€å¥½åœ¨æ¸²æŸ“å‰å°±æŒ‡å®šå…¶å¤§å°ï¼Œæˆ–è€…è®©å…¶è„±ç¦»æ–‡æ¡£æµã€‚</li><li>å¯¹é¡µé¢ä¸­å¯èƒ½å‘ç”Ÿå¤§é‡é‡æ’é‡ç»˜çš„å…ƒç´ å•ç‹¬è§¦å‘æ¸²æŸ“å±‚ï¼Œä½¿ç”¨ GPU åˆ†æ‹… CPU å‹åŠ›ã€‚ï¼ˆæ…é‡ï¼‰</li></ul><h2 id="JS-é˜»å¡æ€§èƒ½"><a href="#JS-é˜»å¡æ€§èƒ½" class="headerlink" title="JS é˜»å¡æ€§èƒ½"></a>JS é˜»å¡æ€§èƒ½</h2><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h2><h3 id="Node-js-å¤„ç†-IO-å¯†é›†å‹è¯·æ±‚"><a href="#Node-js-å¤„ç†-IO-å¯†é›†å‹è¯·æ±‚" class="headerlink" title="Node.js å¤„ç† IO å¯†é›†å‹è¯·æ±‚"></a>Node.js å¤„ç† IO å¯†é›†å‹è¯·æ±‚</h3><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513044&amp;idx=1&amp;sn=9b8526e9d641b970ee5ddac02dae3c57&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">Node.js : æˆ‘åªéœ€è¦ä¸€ä¸ªåº—å°äºŒ</a></li></ul><p>node çš„æ ¸å¿ƒæ˜¯äº‹ä»¶é©±åŠ¨ï¼Œé€šè¿‡ loop å»å¼‚æ­¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œç›¸å¯¹äºä¼ ç»Ÿçš„åç«¯æœåŠ¡ï¼Œä»–ä»¬éƒ½æ˜¯å°†ç”¨æˆ·çš„æ¯ä¸ªè¯·æ±‚åˆ†é…åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­è¿›è¡Œå¤„ç†ã€‚</p><p>äº‹ä»¶é©±åŠ¨çš„ä¼˜åŠ¿ï¼šåœ¨é«˜å¹¶å‘ IO æ—¶ï¼Œä¸ä¼šé€ æˆå µå¡ã€‚</p><p>Frond-End(Browser) <- nodejs="" -=""> Back-End(Java Server)</-></p><h3 id="pm2-å®ç°-Node-jsâ€œå¤šçº¿ç¨‹â€"><a href="#pm2-å®ç°-Node-jsâ€œå¤šçº¿ç¨‹â€" class="headerlink" title="pm2 å®ç° Node.jsâ€œå¤šçº¿ç¨‹â€"></a>pm2 å®ç° Node.jsâ€œå¤šçº¿ç¨‹â€</h3><ul><li><a href="https://www.zhihu.com/question/19653241/answer/15993549" target="_blank" rel="noopener">ä½¿ç”¨ Node.js çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿éƒ½æœ‰å“ªäº›ï¼Ÿ</a></li></ul><p>pm2ã€‚è¿™æ˜¯å®ƒçš„å®˜ç½‘ï¼špm2.keymetrics.io/</p><p>å®ƒæ˜¯ä¸€æ¬¾ node.js è¿›ç¨‹ç®¡ç†å™¨ï¼Œå…·ä½“çš„åŠŸèƒ½ï¼Œå°±æ˜¯èƒ½åœ¨ä½ çš„è®¡ç®—æœºé‡Œçš„æ¯ä¸€ä¸ªå†…æ ¸éƒ½å¯åŠ¨ä¸€ä¸ª node.js æœåŠ¡ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ç”µè„‘æˆ–è€…æœåŠ¡å™¨æ˜¯å¤šæ ¸å¤„ç†å™¨ï¼ˆç°åœ¨ä¹Ÿå°‘è§å•æ ¸äº†å§ï¼‰ï¼Œå®ƒå°±èƒ½å¯åŠ¨å¤šä¸ª node.js æœåŠ¡ï¼Œå¹¶ä¸”å®ƒèƒ½å¤Ÿè‡ªåŠ¨æ§åˆ¶è´Ÿè½½å‡è¡¡ï¼Œä¼šè‡ªåŠ¨å°†ç”¨æˆ·çš„è¯·æ±‚åˆ†å‘è‡³å‹åŠ›å°çš„æœåŠ¡è¿›ç¨‹ä¸Šå¤„ç†ã€‚</p><h3 id="nginx-æ­å»ºåå‘ä»£ç†"><a href="#nginx-æ­å»ºåå‘ä»£ç†" class="headerlink" title="nginx æ­å»ºåå‘ä»£ç†"></a>nginx æ­å»ºåå‘ä»£ç†</h3><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><ul><li><a href="https://juejin.im/post/5c136bd16fb9a049d37efc47" target="_blank" rel="noopener">å‰ç«¯ç¼“å­˜æœ€ä½³å®è·µ</a></li><li><a href="https://juejin.im/post/5b6fa8c86fb9a0099910ac91" target="_blank" rel="noopener">ç½‘ç«™æ€§èƒ½ä¼˜åŒ–å®æˆ˜â€”â€”ä» 12.67s åˆ° 1.06s çš„æ•…äº‹</a></li><li><a href="https://juejin.im/post/5ae081aaf265da0b767d263a" target="_blank" rel="noopener">ä½ åº”è¯¥çŸ¥é“çš„å‰ç«¯â€”â€”ç¼“å­˜</a></li><li>ã€Šå¤§å‹ç½‘ç«™æ€§èƒ½ç›‘æµ‹ã€åˆ†æä¸ä¼˜åŒ–ã€‹</li><li><a href="https://www.cnblogs.com/xianyulaodi/p/5755079.html" target="_blank" rel="noopener">ã€åŸã€‘é›…è™å‰ç«¯ä¼˜åŒ–çš„ 35 æ¡å†›è§„</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOSå¦‚ä½•ä½¿ç”¨ tree ç”Ÿæˆç›®å½•ç»“æ„</title>
      <link href="/2019/09/02/tool-tree/"/>
      <url>/2019/09/02/tool-tree/</url>
      
        <content type="html"><![CDATA[<h2 id="Homebrewå®‰è£…"><a href="#Homebrewå®‰è£…" class="headerlink" title="Homebrewå®‰è£…"></a>Homebrewå®‰è£…</h2><p><a href="https://brew.sh/" target="_blank" rel="noopener">homebrewå®˜ç½‘</a></p><p><a href="[https://www.jianshu.com/p/de6f1d2d37bf](https://www.jianshu.com/p/de6f1d2d37bf">Homebrewä»‹ç»å’Œä½¿ç”¨</a></p><a id="more"></a><p>æ ¹æ®å®˜ç½‘çš„æ–¹æ³•å®‰è£…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure></p><p>æ¯”å¦‚æˆ‘çš„ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">==&gt; This script will install:</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/brew</span><br><span class="line">/usr/<span class="built_in">local</span>/share/doc/homebrew</span><br><span class="line">/usr/<span class="built_in">local</span>/share/man/man1/brew.1</span><br><span class="line">/usr/<span class="built_in">local</span>/share/zsh/site-functions/_brew</span><br><span class="line">/usr/<span class="built_in">local</span>/etc/bash_completion.d/brew</span><br><span class="line">/usr/<span class="built_in">local</span>/Homebrew</span><br><span class="line"></span><br><span class="line">Press RETURN to <span class="built_in">continue</span> or any other key to abort</span><br></pre></td></tr></table></figure></p><p>ä¸€è·¯æŒ‰ç…§æç¤ºæ“ä½œå³å¯ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå°±å®‰è£…æˆåŠŸäº†:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ brew -v</span><br><span class="line">Homebrew 2.1.9</span><br><span class="line">Homebrew/homebrew-core (git revision c8ff; last commit 2019-08-01)</span><br><span class="line">Homebrew/homebrew-cask (git revision 04bff; last commit 2019-08-02)</span><br></pre></td></tr></table></figure></p><h2 id="Tree-å®‰è£…"><a href="#Tree-å®‰è£…" class="headerlink" title="Tree å®‰è£…"></a>Tree å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install tree</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½</span></span><br><span class="line">brew install tree</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">tree -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæ˜¾ç¤ºæ–‡ä»¶å¤¹</span></span><br><span class="line">tree -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ï¼Œå¦‚ä¸‰çº§</span></span><br><span class="line">tree -L 3  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿‡æ»¤ï¼Œå¦‚é™¤node_modulesæ–‡ä»¶</span></span><br><span class="line">tree -I <span class="string">"node_modules"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">tree &gt; tree.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># Help</span></span><br><span class="line">tree --<span class="built_in">help</span></span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œæˆ‘çš„è¾“å‡ºï¼š<code>tree -I &quot;node_modules&quot; &gt; tree.md</code><br>æŸ¥çœ‹ <code>tree.md</code> çš„å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ dist</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.scss</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ font-awesome</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fonts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ FontAwesome.otf</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fontawesome-webfont.eot</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fontawesome-webfont.svg</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fontawesome-webfont.ttf</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fontawesome-webfont.woff</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ fontawesome-webfont.woff2</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _animated.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _bordered-pulled.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _core.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _fixed-width.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _icons.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _larger.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _list.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _mixins.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _path.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _rotated-flipped.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _screen-reader.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _stacked.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ _variables.scss</span><br><span class="line">â”‚Â Â  â”‚Â Â      â””â”€â”€ font-awesome.scss</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.html</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.jsx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ react.png</span><br><span class="line">â”‚Â Â  â””â”€â”€ style.css</span><br><span class="line">â”œâ”€â”€ tree.md</span><br><span class="line">â”œâ”€â”€ webpack.config.js</span><br><span class="line">â””â”€â”€ yarn.lock</span><br><span class="line"></span><br><span class="line">5 directories, 31 files</span><br></pre></td></tr></table></figure></p><h2 id="treeå‘½ä»¤è¡Œå‚æ•°"><a href="#treeå‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="treeå‘½ä»¤è¡Œå‚æ•°"></a>treeå‘½ä»¤è¡Œå‚æ•°</h2><table><thead><tr><th>å‘½ä»¤è¡Œå‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>-a</td><td>æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ã€‚</td></tr><tr><td>-A</td><td>ä½¿ç”¨ASNIç»˜å›¾å­—ç¬¦æ˜¾ç¤ºæ ‘çŠ¶å›¾è€Œéä»¥ASCIIå­—ç¬¦ç»„åˆã€‚</td></tr><tr><td>-C</td><td>åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†å„ç§ç±»å‹ã€‚</td></tr><tr><td>-d</td><td>æ˜¾ç¤ºç›®å½•åç§°è€Œéå†…å®¹ã€‚</td></tr><tr><td>-D</td><td>åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹æ—¶é—´ã€‚</td></tr><tr><td>-f</td><td>åœ¨æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ç›¸å¯¹è·¯å¾„åç§°ã€‚</td></tr><tr><td>-F</td><td>åœ¨æœ«å°¾è¿½åŠ æè¿°æ€§å­—ç¬¦ï¼Œå¦‚ ls -F</td></tr><tr><td>-g</td><td>åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç¾¤ç»„è¯†åˆ«ç ã€‚</td></tr><tr><td>-i</td><td>ä¸ä»¥é˜¶æ¢¯çŠ¶åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚</td></tr><tr><td>-I</td><td>ä¸æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚</td></tr><tr><td>-l</td><td>å¦‚é‡åˆ°æ€§è´¨ä¸ºç¬¦å·è¿æ¥çš„ç›®å½•ï¼Œç›´æ¥åˆ—å‡ºè¯¥è¿æ¥æ‰€æŒ‡å‘çš„åŸå§‹ç›®å½•ã€‚</td></tr><tr><td>-n</td><td>ä¸åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ã€‚</td></tr><tr><td>-N</td><td>ç›´æ¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼ŒåŒ…æ‹¬æ§åˆ¶å­—ç¬¦ã€‚</td></tr><tr><td>-p</td><td>åˆ—å‡ºæƒé™æ ‡ç¤ºã€‚</td></tr><tr><td>-P</td><td>åªæ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚</td></tr><tr><td>-q</td><td>ç”¨â€?â€å·å–ä»£æ§åˆ¶å­—ç¬¦ï¼Œåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ã€‚</td></tr><tr><td>-s</td><td>åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•å¤§å°ã€‚</td></tr><tr><td>-t</td><td>ç”¨æ–‡ä»¶å’Œç›®å½•çš„æ›´æ”¹æ—¶é—´æ’åºã€‚</td></tr><tr><td>-u</td><td>åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·è¯†åˆ«ç ã€‚</td></tr><tr><td>-x</td><td>å°†èŒƒå›´å±€é™åœ¨ç°è¡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè‹¥æŒ‡å®šç›®å½•ä¸‹çš„æŸäº›å­ç›®å½•ï¼Œå…¶å­˜æ”¾äºå¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œåˆ™å°†è¯¥å­ç›®å½•äºˆä»¥æ’é™¤åœ¨å¯»æ‰¾èŒƒå›´å¤–ã€‚</td></tr></tbody></table><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/ayseeing/p/4097066.html" target="_blank" rel="noopener">mac treeå‘½ä»¤</a></li><li><a href="https://blog.csdn.net/qq673318522/article/details/53713903" target="_blank" rel="noopener">Macä½¿ç”¨treeç”Ÿæˆç›®å½•ç»“æ„</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
            <tag> ç»ˆç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹  React çš„ä¸€äº›è®°å½•æ—¥å¿—</title>
      <link href="/2019/08/24/react-doc/"/>
      <url>/2019/08/24/react-doc/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å­¦ä¹  React çš„ä¸€äº›è®°å½•æ—¥å¿—<br><a id="more"></a></p></blockquote><h2 id="Video-Course"><a href="#Video-Course" class="headerlink" title="Video Course"></a>Video Course</h2><h3 id="åˆçº§"><a href="#åˆçº§" class="headerlink" title="åˆçº§"></a>åˆçº§</h3><ul><li><a href="https://www.imooc.com/learn/1045" target="_blank" rel="noopener">åŸºäºå®ä¾‹çš„ react16 å‚»ç“œè¯¾ç¨‹</a> â€” ç”¨ä¸€ç³»åˆ—æœ‰è¶£çš„ã€ç®€æ´æ˜å¿«çš„å®ä¾‹ç”±æµ…å…¥æ·±çš„é˜è¿°äº† React çš„ç‰¹è‰²ï¼Œæ¦‚å¿µå’ŒåŸºæœ¬ä½¿ç”¨</li><li><a href="https://www.imooc.com/learn/1023" target="_blank" rel="noopener">react16.4 å¿«é€Ÿä¸Šæ‰‹</a> â€” é€šè¿‡ Todolist åŠŸèƒ½çš„å®ç°ï¼Œç»™å¤§å®¶è®²è§£äº† React ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼</li></ul><h3 id="ä¸­çº§"><a href="#ä¸­çº§" class="headerlink" title="ä¸­çº§"></a>ä¸­çº§</h3><ul><li><a href="https://www.imooc.com/learn/1061" target="_blank" rel="noopener">react 16 å®ç°è®¢å•åˆ—è¡¨åŠè¯„ä»·åŠŸèƒ½</a> â€” ä»‹ç»äº†ä»é¡¹ç›®åˆ›å»ºã€åˆ°ç»„ä»¶åˆ’åˆ†ã€å†åˆ°ç»„ä»¶åŠé¡µé¢é€»è¾‘å®ç°çš„å¼€å‘æµç¨‹</li><li><a href="https://www.imooc.com/learn/944" target="_blank" rel="noopener">react ç»„ä»¶</a> â€” æ¯”è¾ƒè¯¦ç»†åœ°è®²è§£ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸ</li></ul><h3 id="é«˜çº§"><a href="#é«˜çº§" class="headerlink" title="é«˜çº§"></a>é«˜çº§</h3><ul><li><a href="https://www.imooc.com/learn/953" target="_blank" rel="noopener">reactå“åº”ç”¨æˆ·è¾“å…¥</a> â€” å­¦ä¹ å¦‚ä½•è®©æ•°æ®é€»è¾‘ä¸ UI çš„ç»“åˆä½¿ç”¨ã€react çš„äº‹ä»¶å¤„ç†æœºåˆ¶ä»¥åŠ react å¯¹ DOM æ¨¡å‹çš„æ“ä½œ</li><li><a href="https://www.imooc.com/learn/971" target="_blank" rel="noopener">reactçŸ¥è¯†ç‚¹ç»¼åˆè¿ç”¨å®ä¾‹</a> â€” ç»¼åˆå®ä¾‹æ“ä½œ</li><li><a href="https://www.imooc.com/learn/1075" target="_blank" rel="noopener">reacté«˜çº§æ•™ç¨‹ä¹‹é«˜é˜¶ç»„ä»¶</a> â€” é«˜é˜¶ç»„ä»¶çš„åº”ç”¨ï¼šä»£ç†å’Œç»§æ‰¿</li></ul><h2 id="Document"><a href="#Document" class="headerlink" title="Document"></a>Document</h2><ul><li><a href="https://zh-hans.reactjs.org/docs/getting-started.html" target="_blank" rel="noopener">React å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="noopener">Ant Design of React</a> â€” antd æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚</li><li><a href="https://pro.ant.design/docs/getting-started-cn" target="_blank" rel="noopener">Ant Design Pro</a> â€” æ˜¯ä¸€ä¸ªä¼ä¸šçº§ä¸­åå°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆ</li><li><a href="https://mobile.ant.design/docs/react/introduce-cn" target="_blank" rel="noopener">Ant Design Mobile of React</a> â€” æ˜¯ Ant Design çš„ç§»åŠ¨è§„èŒƒçš„ React å®ç°ï¼ŒæœåŠ¡äºèš‚èšåŠå£ç¢‘æ— çº¿ä¸šåŠ¡</li><li><a href="https://www.webpackjs.com/concepts/" target="_blank" rel="noopener">webpack å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://typescript.bootcss.com/tutorials/react-&amp;-webpack.html" target="_blank" rel="noopener">React ä¸ webpack</a></li></ul><h2 id="Learning-Materials"><a href="#Learning-Materials" class="headerlink" title="Learning Materials"></a>Learning Materials</h2><ul><li><a href="https://hulufei.gitbooks.io/react-tutorial/content/index.html" target="_blank" rel="noopener">ã€Šreact å…¥é—¨æ•™ç¨‹ã€‹</a></li><li><a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener">ã€Šreact å…¥é—¨å®ä¾‹æ•™ç¨‹ã€‹</a> â€” é˜®ä¸€å³°</li><li><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener">ã€Štypescript çƒ­é—¨æ•™ç¨‹ã€‹</a></li><li><a href="https://zhuanlan.zhihu.com/p/23412169" target="_blank" rel="noopener">ã€Š6 å‘¨å­¦ä¹ è®¡åˆ’ï¼Œæ”»å…‹ javascript éš¾å…³(react/redux/es6 etc.)ã€‹</a></li></ul><h2 id="My-Learning"><a href="#My-Learning" class="headerlink" title="My Learning"></a>My Learning</h2><h3 id="å…¥é—¨å­¦ä¹ -React-çš„å‡ ä¸ªä¾‹å­"><a href="#å…¥é—¨å­¦ä¹ -React-çš„å‡ ä¸ªä¾‹å­" class="headerlink" title="å…¥é—¨å­¦ä¹  React çš„å‡ ä¸ªä¾‹å­"></a>å…¥é—¨å­¦ä¹  React çš„å‡ ä¸ªä¾‹å­</h3><blockquote><p><a href="https://github.com/yangtao2o/myreact/tree/master/demo" target="_blank" rel="noopener">Demo åœ°å€ï¼Œæˆ³æˆ‘</a></p></blockquote><ol><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/01/index.html" target="_blank" rel="noopener">ReactDOM.render()</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/02/index.html" target="_blank" rel="noopener">Use Array in JSX</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/03/index.html" target="_blank" rel="noopener">ç»„ä»¶</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/04/index.html" target="_blank" rel="noopener">this.props.children</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/05/index.html" target="_blank" rel="noopener">PropTypes</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/06/index.html" target="_blank" rel="noopener">è·å–çœŸå®çš„ DOM èŠ‚ç‚¹</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/07/index.html" target="_blank" rel="noopener">this.state</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/08/index.html" target="_blank" rel="noopener">è¡¨å•</a></li><li><a href="https://github.com/yangtao2o/myreact/blob/master/demo/09/index.html" target="_blank" rel="noopener">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="https://istaotao.com/myreact/demo/10/" target="_blank" rel="noopener">ä½¿ç”¨ Promise è·å– Github çš„æ•°æ®</a></li><li><a href="https://istaotao.com/myreact/demo/11/" target="_blank" rel="noopener">Todo List</a></li><li><a href="https://istaotao.com/myreact/demo/12/" target="_blank" rel="noopener">äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰</a></li></ol><h3 id="Nextjs-â€”-é…åˆ-React-æ‰“é€ é™æ€åŒ–å’ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨"><a href="#Nextjs-â€”-é…åˆ-React-æ‰“é€ é™æ€åŒ–å’ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨" class="headerlink" title="Nextjs â€” é…åˆ React æ‰“é€ é™æ€åŒ–å’ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨"></a>Nextjs â€” é…åˆ React æ‰“é€ é™æ€åŒ–å’ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨</h3><p><strong><a href="https://github.com/yangtao2o/myreact/tree/master/nextjs/01-hello-next" target="_blank" rel="noopener">Nextjs</a></strong></p><ul><li>Demo1: å­¦ä¹ å®˜æ–¹æ–‡æ¡£</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> nextjs/01-hello-next</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="My-Project"><a href="#My-Project" class="headerlink" title="My Project"></a>My Project</h2><ul><li><a href="https://github.com/yangtao2o/myreact/tree/master/product/01-ttt" target="_blank" rel="noopener">å­¦ä¹ ã€Œäº•å­—æ¸¸æˆã€</a></li><li><a href="https://github.com/yangtao2o/myreact/tree/master/product/02-news-app" target="_blank" rel="noopener">å­¦ä¹ ä½“éªŒ Ant Design of React</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨ Webpack@3 çš„é…ç½®è¿‡ç¨‹</title>
      <link href="/2019/08/05/webpack-v3/"/>
      <url>/2019/08/05/webpack-v3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å…¥é—¨ Webpack@3 çš„é…ç½®è¿‡ç¨‹<br><a id="more"></a></p></blockquote><h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><ul><li><a href="https://webpack.docschina.org/guides/" target="_blank" rel="noopener">webpack æŒ‡å—</a></li><li><a href="https://www.jianshu.com/p/0e01ca947e50" target="_blank" rel="noopener">React çš„ Webpack é…ç½®</a></li></ul><p><em>PSï¼š</em> æ–‡ç« ç»“å°¾æœ‰å®Œæ•´å®ä¾‹å¯åŠ¨æ–¹æ³•ï¼š<a href="https://github.com/yangtao2o/happymmall/tree/webpack%403-react" target="_blank" rel="noopener">Githubåœ°å€</a></p><p>æœ¬æ¬¡é…ç½®ç»ƒä¹ ä¸»è¦æ˜¯é’ˆå¯¹ <code>webpack-v3</code>ï¼Œåˆ‡æ¢åˆ†æ”¯è‡³ <code>webpack@3-react</code> ï¼Œæ¯ä¸€æ¬¡ <code>Commits</code>ï¼ŒåŸºæœ¬ä¸Šå¯¹åº”ç€ç›¸åº”çš„æ–‡ä»¶é…ç½®ï¼Œå¯ä»¥å¯¹ç…§ç€ç…ç…ã€‚</p><h2 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h2><h4 id="é…ç½®-Webpack"><a href="#é…ç½®-Webpack" class="headerlink" title="é…ç½® Webpack"></a>é…ç½® Webpack</h4><p>å‡†å¤‡ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âœ  happymmall git:(webpack@3-react) âœ— node -v</span><br><span class="line">v11.13.0</span><br><span class="line">âœ  happymmall git:(webpack@3-react) âœ— npm -v</span><br><span class="line">6.10.1</span><br><span class="line">âœ  happymmall git:(webpack@3-react) âœ— git --version</span><br><span class="line">git version 2.17.2 (Apple Git-113)</span><br><span class="line">âœ  happymmall git:(webpack@3-react) âœ— yarn -v</span><br><span class="line">1.17.3</span><br></pre></td></tr></table></figure><h5 id="å®‰è£…-yarn"><a href="#å®‰è£…-yarn" class="headerlink" title="å®‰è£… yarn"></a>å®‰è£… <a href="https://yarn.bootcss.com/docs/install/#mac-stable" target="_blank" rel="noopener">yarn</a></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># homebrew å®‰è£…</span></span><br><span class="line">brew install yarn</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm/cnpm å®‰è£…</span></span><br><span class="line">npm install cnpm -g</span><br><span class="line">cnpm install yarn -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">âœ  ~ yarn --version</span><br><span class="line">1.17.3</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn init  <span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line">yarn add [package]  <span class="comment"># æ·»åŠ ä¾èµ–åŒ…</span></span><br><span class="line">yarn add [package] --dev   <span class="comment"># æ·»åŠ åˆ° devDependencies</span></span><br><span class="line">yarn remove [package]  <span class="comment"># åˆ é™¤ä¾èµ–åŒ…</span></span><br><span class="line">yarn install   <span class="comment"># å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…</span></span><br></pre></td></tr></table></figure><h5 id="å®‰è£…-webpack-3"><a href="#å®‰è£…-webpack-3" class="headerlink" title="å®‰è£… webpack@3"></a>å®‰è£… webpack@3</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn init</span><br><span class="line">yarn add webpack@3.10.0 --dev</span><br></pre></td></tr></table></figure><p>æ ¹ç›®å½•æ–°å»º <code>webpack.config.js</code>,å¹¶æ–°å»º <code>src/index.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">"./src/index.js"</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">    filename: <span class="string">"app.js"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Hello, world"</span>);</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š<code>node_modules/.bin/webpack</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  happymmall git:(webpack@3-react) âœ— node_modules/.bin/webpack</span><br><span class="line">Hash: 62e68b9cc366c7b50ac6</span><br><span class="line">Version: webpack 3.10.0</span><br><span class="line">Time: 34ms</span><br><span class="line"> Asset    Size  Chunks             Chunk Names</span><br><span class="line">app.js  2.5 kB       0  [emitted]  main</span><br><span class="line">   [0] ./src/index.js 28 bytes &#123;0&#125; [built]</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ <code>dist/app.js</code>ï¼Œæœç´¢ <code>Hello</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hello, world'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;)</span><br><span class="line"><span class="comment">/******/</span> ]);</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç®€å•çš„æ–‡ä»¶å°±æ­¤æ‰“åŒ…æˆåŠŸï¼Œå¼€å¿ƒå§â€¦</p><h4 id="é…ç½®-HMTL-æ¨¡æ¿"><a href="#é…ç½®-HMTL-æ¨¡æ¿" class="headerlink" title="é…ç½® HMTL æ¨¡æ¿"></a>é…ç½® HMTL æ¨¡æ¿</h4><p>æ–‡æ¡£ï¼š<a href="https://webpack.js.org/plugins/html-webpack-plugin/#root" target="_blank" rel="noopener">HtmlWebpackPlugin</a> ç®€åŒ–äº† HTML æ–‡ä»¶çš„åˆ›å»ºï¼Œä»¥ä¾¿ä¸ºä½ çš„ webpack åŒ…æä¾›æœåŠ¡ã€‚è¿™å¯¹äºåœ¨æ–‡ä»¶åä¸­åŒ…å«æ¯æ¬¡ä¼šéšç€ç¼–è¯‘è€Œå‘ç”Ÿå˜åŒ–å“ˆå¸Œçš„ webpack bundle å°¤å…¶æœ‰ç”¨ã€‚</p><p>å®‰è£… html-webpack-plugin</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add html-webpack-plugin@2.30.1 --dev</span><br></pre></td></tr></table></figure><p>æ–°å»ºï¼š<code>src/index.html</code>, å¹¶åˆå§‹åŒ–ä¸€ä¸ª html å†…å®¹ï¼Œç„¶åé…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">"./src/index.js"</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">    filename: <span class="string">"app.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">"./src/index.html"</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¥ç€è·‘ä¸€ä¸‹ï¼š<code>node_modules/.bin/webpack</code>ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œdist ä¸‹ä¼šå‡ºç°ä¸€ä¸ª index.htmlï¼Œæ‰“å¼€æŸ¥çœ‹å°±ä¼šå‘ç°ï¼Œä¸ä»…æœ‰æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„å†…å®¹ï¼Œè¿˜æŠŠ<code>app.js</code>ä¹Ÿè‡ªåŠ¨å¼•å…¥äº†ï¼Œè¿™æ³¢æ“ä½œå¤Ÿå¯ä»¥ã€‚</p><h4 id="Babel-å¤„ç†è„šæœ¬"><a href="#Babel-å¤„ç†è„šæœ¬" class="headerlink" title="Babel å¤„ç†è„šæœ¬"></a>Babel å¤„ç†è„šæœ¬</h4><p>æ–‡æ¡£ï¼š<a href="https://www.webpackjs.com/loaders/babel-loader/" target="_blank" rel="noopener">babel-loader</a></p><p>å®‰è£… babel</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-loader@7.1.2 babel-core@6.26.0 babel-preset-env@1.6.1 --dev</span><br></pre></td></tr></table></figure><p>è®¾ç½® config æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules)/</span>, <span class="comment">// å¿½ç•¥æ­¤æ–‡ä»¶</span></span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">"babel-loader"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">"env"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ <code>src/index.js</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"people"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">extends</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">27</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š<code>node_modules/.bin/webpack</code>ï¼Œç„¶åå†å»<code>dist/app.js</code>ï¼Œå°±ä¼šå‘ç°å·²ç»è½¬è¯‘æˆåŠŸï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> People = <span class="function"><span class="keyword">function</span> <span class="title">People</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  _classCallCheck(<span class="keyword">this</span>, People);</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"people"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Man = (<span class="function"><span class="keyword">function</span>(<span class="params">_People</span>) </span>&#123;</span><br><span class="line">  _inherits(Man, _People);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    _classCallCheck(<span class="keyword">this</span>, Man);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> _this = _possibleConstructorReturn(</span><br><span class="line">      <span class="keyword">this</span>,</span><br><span class="line">      (Man.__proto__ || <span class="built_in">Object</span>.getPrototypeOf(Man)).call(<span class="keyword">this</span>, name)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    _this.age = <span class="number">27</span>;</span><br><span class="line">    <span class="keyword">return</span> _this;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Man;</span><br><span class="line">&#125;)(People);</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-React"><a href="#é…ç½®-React" class="headerlink" title="é…ç½® React"></a>é…ç½® React</h4><p>å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-preset-react@6.24.1 --dev</span><br><span class="line">yarn add react@16.2.0 react-dom@16.2.0</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.jsx$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">"babel-loader"</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">"env"</span>, <span class="string">"react"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ—¶å€™çš„å…¥å£æ–‡ä»¶ä¹Ÿéœ€è¦æ›´æ”¹ä¸‹æµ‹è¯•</span></span><br><span class="line">entry: <span class="string">'./src/index.jsx'</span>,</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ <code>src/index.js</code> ä¸º <code>src/index.jsx</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, React.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š<code>node_modules/.bin/webpack</code>ï¼Œç„¶åå†å»<code>dist/app.js</code>ï¼ŒæŸ¥æ‰¾å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">_reactDom2.default.render(</span><br><span class="line">  _react2.default.createElement(<span class="string">"h1"</span>, <span class="literal">null</span>, <span class="string">"Hello, React."</span>),</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œè¡¨ç¤ºè§£æ .jsx æˆåŠŸã€‚</p><h4 id="è§£æ-CSS"><a href="#è§£æ-CSS" class="headerlink" title="è§£æ CSS"></a>è§£æ CSS</h4><p>å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add style-loader@0.19.1 css-loader@0.28.8 --dev</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">  use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ index.jsx é‡Œæ·»åŠ ï¼š<code>import &#39;./style.css&#39;;</code>ï¼Œåœ¨<code>style.css</code>æ·»åŠ ä¸€äº›ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€è·‘ä¸€ä¸‹ï¼š<code>node_modules/.bin/webpack</code>ï¼Œå†æ¥ç€å» dist ä¸‹çš„ app.js æ‰¾æ‰¾ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module</span></span><br><span class="line">exports.push([<span class="built_in">module</span>.i, <span class="string">"body &#123;\n  color: red;\n  font-size: 16px;\n&#125;"</span>, <span class="string">""</span>]);</span><br></pre></td></tr></table></figure><p>å—¯ï¼Œå·²ç»è¢«è§£æå¹¶æ·»åŠ åˆ° app.js æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å¤§é‡çš„ css æ–‡ä»¶ï¼Œå¹¶éœ€è¦ js è§£æï¼Œé‚£å°±éœ€è¦ä¸ªæ’ä»¶å•ç‹¬å¤„ç†ï¼š<a href="https://webpack.js.org/plugins/extract-text-webpack-plugin/#root" target="_blank" rel="noopener">ExtractTextWebpackPlugin</a>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add extract-text-webpack-plugin@3.0.2 --dev</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    template: <span class="string">"./src/index.html"</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// Add</span></span><br><span class="line">  <span class="keyword">new</span> ExtractTextWebpackPlugin(<span class="string">"styles.css"</span>),</span><br><span class="line">],</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    <span class="comment">// Add</span></span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: ExtractTextWebpackPlugin.extract(&#123;</span><br><span class="line">        fallback: <span class="string">"style-loader"</span>,</span><br><span class="line">        use: <span class="string">"css-loader"</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè·‘ä¸€ä¸‹ï¼Œdist ä¸‹å°±ä¼šå‡ºç°æˆ‘ä»¬è®¾ç½®çš„ <code>styles.css</code> æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æ·»åŠ è‡³ <code>index.html</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"style.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è§£æ-scss"><a href="#è§£æ-scss" class="headerlink" title="è§£æ scss"></a>è§£æ scss</h4><p>å®‰è£…: sass-loader node-sass</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add sass-loader@6.0.6 node-sass@4.7.2 --dev</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">  use: ExtractTextWebpackPlugin.extract(&#123;</span><br><span class="line">    fallback: <span class="string">"style-loader"</span>,</span><br><span class="line">    use: [<span class="string">"css-loader"</span>, <span class="string">"sass-loader"</span>]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å» src ä¸‹æ–°å»ºä¸€ä¸ª <code>app.scss</code>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  h1 &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">blue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”åœ¨ <code>index.jsx</code> ä¸­å¼•å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./style.css"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./app.scss"</span>;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œè·‘ä¸€ä¸‹çœ‹çœ‹ï¼Œåˆ·~çš„ä¸€å£°ï¼Œæ‰“å¼€ dist ä¸‹çš„ <code>styles.css</code>ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æˆ‘ä»¬å¼•å…¥çš„å†…å®¹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•é€šè¿‡ï¼Œå®Œç¾ï¼</p><h4 id="å¤„ç†å›¾ç‰‡èµ„æº"><a href="#å¤„ç†å›¾ç‰‡èµ„æº" class="headerlink" title="å¤„ç†å›¾ç‰‡èµ„æº"></a>å¤„ç†å›¾ç‰‡èµ„æº</h4><p>å®‰è£…ï¼š<a href="https://webpack.js.org/loaders/url-loader/#root" target="_blank" rel="noopener">url-loader</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add file-loader@1.1.6 url-loader@0.6.2 --dev</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'url-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        limit: <span class="number">8192</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ src ä¸‹æ‰¾å¼ å›¾ç‰‡ï¼Œæµ‹è¯•ä¸‹æ˜¯å¦é€šè¿‡ï¼Œåœ¨ <code>index.jsx</code> é‡Œæ·»åŠ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ImgSrc <span class="keyword">from</span> <span class="string">"./react.png"</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Hello, React.&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;img src=&#123;ImgSrc&#125; alt="react" /</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById("root")</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure><p>ç„¶åè·‘ä¸€ä¸‹ï¼Œå‘ç°ï¼šå¦‚æœå›¾ç‰‡å¤§äº limit çš„è®¾ç½®ï¼ˆ8kb=8192/1024kbï¼‰å°±ä¼šå‡ºç°åœ¨ dist ç›®å½•ä¸‹ï¼Œå¦åˆ™ä¼šä»¥ base64 æ ¼å¼ç›´æ¥å¼•å…¥ä½¿ç”¨ã€‚</p><h4 id="å¤„ç†-fonts-å­—ä½“"><a href="#å¤„ç†-fonts-å­—ä½“" class="headerlink" title="å¤„ç† fonts å­—ä½“"></a>å¤„ç† fonts å­—ä½“</h4><p>å…ˆä¸‹è½½ä¸ª<a href="http://www.fontawesome.com.cn/get-started/" target="_blank" rel="noopener">Font Awesome</a>è¯•è¯•æ°´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add font-awesome</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(woff|woff2|eot|ttf|otf|svg)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'url-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        limit: <span class="number">8192</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæŒ‰ç…§ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤æ¥è¯•æ°´ï¼š</p><ul><li>å¤åˆ¶ <code>font-awesome/</code> ç›®å½•åˆ°ä½ çš„é¡¹ç›®ä¸­</li><li>åªä¿ç•™ fonts æ–‡ä»¶ å’Œ scss æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œå…¶ä»–å¯ä»¥åˆ é™¤</li><li>æœ€åå»ä½ çš„ä¸»æ–‡ä»¶ï¼š<code>app.scss</code> æ·»åŠ å®ƒï¼š</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$fa-font-path</span>: <span class="string">"./font-awesome/fonts"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"./font-awesome/scss/font-awesome.scss"</span>;</span><br></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬è·‘ä¸€ä¸‹ï¼š<code>node_modules/.bin/webpack</code>ï¼Œdist ä¸‹ç¬é—´å°±ä¼šå‡ºç°ä¸€å †æ–‡ä»¶ï¼Œè¡¨ç¤ºæµ‹è¯•é€šè¿‡ã€‚</p><h4 id="å…¬å…±æ¨¡å—"><a href="#å…¬å…±æ¨¡å—" class="headerlink" title="å…¬å…±æ¨¡å—"></a>å…¬å…±æ¨¡å—</h4><p><a href="https://webpack.docschina.org/plugins/commons-chunk-plugin/#%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">CommonsChunkPlugin</a>æ’ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¯é€‰çš„ç”¨äºå»ºç«‹ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶(åˆç§°ä½œ chunk)çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…æ‹¬å¤šä¸ªå…¥å£ chunk çš„å…¬å…±æ¨¡å—ã€‚</p><p>å…ˆè®¿é—®ç¼“å­˜ä¸­çš„å…¬å…±ä»£ç ï¼ŒåŠ å¿«æµè§ˆå™¨çš„è®¿é—®é€Ÿåº¦ã€‚</p><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">  name: <span class="string">'commons'</span>, <span class="comment">// å…¬å…± chunk çš„åç§°</span></span><br><span class="line">  filename: <span class="string">'js/base.js'</span>  <span class="comment">// å…¬å…± chunk çš„æ–‡ä»¶å</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-webpack-dev-server"><a href="#ä½¿ç”¨-webpack-dev-server" class="headerlink" title="ä½¿ç”¨ webpack-dev-server"></a>ä½¿ç”¨ webpack-dev-server</h4><p><code>webpack-dev-server</code> ä¸ºä½ æä¾›äº†ä¸€ä¸ªç®€å•çš„ <code>web server</code>ï¼Œå¹¶ä¸”å…·æœ‰ <code>live reloading</code>(å®æ—¶é‡æ–°åŠ è½½) åŠŸèƒ½ã€‚</p><p>å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-dev-server@2.9.7 --dev</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ <code>dev server</code>ï¼Œä»ä»€ä¹ˆä½ç½®æŸ¥æ‰¾æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">  port: <span class="number">8082</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€å» <code>package.json</code>é‡Œæ·»åŠ ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œ <code>dev server</code> çš„ scriptï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "webpack-dev-server --open",</span><br><span class="line">  "build": "webpack"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½å»è®¿é—® <code>node_modules/.bin/webpack</code> äº†ï¼Œç›´æ¥å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨ dev server</span></span><br><span class="line">npm start</span><br><span class="line"><span class="comment"># æ‰“åŒ…æ„å»º</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><h4 id="æ¸…ç†-dist-æ–‡ä»¶å¤¹"><a href="#æ¸…ç†-dist-æ–‡ä»¶å¤¹" class="headerlink" title="æ¸…ç† /dist æ–‡ä»¶å¤¹"></a>æ¸…ç† /dist æ–‡ä»¶å¤¹</h4><p>éœ€æ±‚ï¼šæ¯æ¬¡ <code>build</code> çš„æ—¶å€™ï¼Œå‘ç° <code>/dist</code> ä¸‹çš„æ–‡ä»¶ä¸€ç›´ä¼šå †ç Œï¼Œèƒ½ä¸èƒ½æ¯æ¬¡æ„å»ºçš„æ—¶å€™ï¼Œåªç”Ÿæˆé¡¹ç›®ä¸­çœŸæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶ï¼Ÿ</p><p>æ–¹æ³•ï¼šåœ¨æ¯æ¬¡æ„å»ºå‰æ¸…ç† <code>/dist</code> æ–‡ä»¶å¤¹ï¼Œè¿™æ ·åªä¼šç”Ÿæˆç”¨åˆ°çš„æ–‡ä»¶ã€‚</p><p>ä½¿ç”¨ <code>clean-webpack-plugin</code> æ’ä»¶æ¥è¿›è¡Œæ¸…ç†:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add clean-webpack-plugin --dev</span><br></pre></td></tr></table></figure><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> CleanWebpackPlugin();</span><br></pre></td></tr></table></figure><h4 id="æ¨¡å—çƒ­æ›¿æ¢-HMR"><a href="#æ¨¡å—çƒ­æ›¿æ¢-HMR" class="headerlink" title="æ¨¡å—çƒ­æ›¿æ¢ HMR"></a>æ¨¡å—çƒ­æ›¿æ¢ HMR</h4><p>éœ€æ±‚ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œå¯ä¸å¯ä»¥æ¯æ¬¡ä¿å­˜ä¹‹åï¼Œä¸ç”¨åˆ·æ–°æµè§ˆå™¨ï¼Œå°±è‡ªåŠ¨æ›´æ–°äº†å‘¢ï¼Ÿ</p><p>æ–¹æ³•ï¼š<a href="https://webpack.docschina.org/guides/hot-module-replacement/" target="_blank" rel="noopener">æ¨¡å—çƒ­æ›¿æ¢</a>(<code>hot module replacement</code> æˆ– <code>HMR</code>)ï¼Œåªæ›´æ–°æ”¹åŠ¨çš„æ–‡ä»¶ã€‚</p><p>è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">],</span><br><span class="line">devServer: &#123;</span><br><span class="line">  contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">  hot: <span class="literal">true</span>,  <span class="comment">// å¼€å¯</span></span><br><span class="line">  port: <span class="number">8082</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œé‡å¯æœåŠ¡ï¼Œç„¶åä¿®æ”¹ <code>index.jsx</code> æ–‡ä»¶ï¼Œå°±ä¼šå‘ç°è‡ªåŠ¨æ›´æ–°äº†ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„ F5 äº†â€¦</p><h4 id="å¯åŠ¨-Server"><a href="#å¯åŠ¨-Server" class="headerlink" title="å¯åŠ¨ Server"></a>å¯åŠ¨ Server</h4><p><code>webpack-dev-middleware</code> æ˜¯ä¸€ä¸ªå°è£…å™¨(<code>wrapper</code>)ï¼Œå®ƒå¯ä»¥æŠŠ <code>webpack</code> å¤„ç†è¿‡çš„æ–‡ä»¶å‘é€åˆ°ä¸€ä¸ª <code>server</code>ã€‚</p><p>å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-dev-middleware@2.0.6 --dev</span><br><span class="line">yarn add express --dev</span><br></pre></td></tr></table></figure><p>æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <code>server.js</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"><span class="keyword">const</span> webpackDevMiddleware = <span class="built_in">require</span>(<span class="string">"webpack-dev-middleware"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">"./webpack.config.js"</span>);</span><br><span class="line"><span class="keyword">const</span> compiler = webpack(config);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘Šè¯‰ express ä½¿ç”¨ webpack-dev-middlewareï¼Œ</span></span><br><span class="line"><span class="comment">// ä»¥åŠå°† webpack.config.js é…ç½®æ–‡ä»¶ä½œä¸ºåŸºç¡€é…ç½®</span></span><br><span class="line">app.use(</span><br><span class="line">  webpackDevMiddleware(compiler, &#123;</span><br><span class="line">    publicPath: config.output.publicPath</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨é…ç½®æ–‡ä»¶çš„ç«¯å£å·</span></span><br><span class="line">app.listen(config.devServer.port, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Example app listening on port <span class="subst">$&#123;config.devServer.port&#125;</span>!\n`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†ä¼šåœ¨ server è„šæœ¬ä½¿ç”¨ publicPathï¼Œä»¥ç¡®ä¿æ–‡ä»¶èµ„æºèƒ½å¤Ÿæ­£ç¡®åœ° serve åœ¨ <a href="http://localhost:8082" target="_blank" rel="noopener">http://localhost:8082</a> ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">  filename: <span class="string">"app.js"</span>,</span><br><span class="line">  publicPath: <span class="string">'/'</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæ·»åŠ ä¸€ä¸ª <code>npm script</code>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"server": "node server.js"</span><br></pre></td></tr></table></figure><p>è·‘ä¸€ä¸‹ï¼š<code>npm run server</code>ï¼Œè®¿é—® <code>http://localhost:8082/</code>ï¼Œå®Œç¾è¿è¡Œã€‚</p><h4 id="æœ€åçš„é…ç½®æ–‡ä»¶"><a href="#æœ€åçš„é…ç½®æ–‡ä»¶" class="headerlink" title="æœ€åçš„é…ç½®æ–‡ä»¶"></a>æœ€åçš„é…ç½®æ–‡ä»¶</h4><p>webpack.config.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> ExtractTextWebpackPlugin = <span class="built_in">require</span>(<span class="string">"extract-text-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">"./src/index.jsx"</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">    filename: <span class="string">"app.js"</span>,</span><br><span class="line">    publicPath: <span class="string">"/"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: <span class="string">"./dist"</span>,</span><br><span class="line">    hot: <span class="literal">true</span>,</span><br><span class="line">    port: <span class="number">8082</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">"./src/index.html"</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> ExtractTextWebpackPlugin(<span class="string">"styles.css"</span>),</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="string">"commons"</span>,</span><br><span class="line">      filename: <span class="string">"js/base.js"</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">  ],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(js|jsx)$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules)/</span>,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">"babel-loader"</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            presets: [<span class="string">"env"</span>, <span class="string">"react"</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(sc|c)ss$/</span>,</span><br><span class="line">        use: ExtractTextWebpackPlugin.extract(&#123;</span><br><span class="line">          fallback: <span class="string">"style-loader"</span>,</span><br><span class="line">          use: [<span class="string">"css-loader"</span>, <span class="string">"sass-loader"</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">"url-loader"</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">8192</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(woff|woff2|eot|ttf|otf|svg)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">"url-loader"</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">8192</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç›®å½•ç»“æ„"><a href="#é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="é¡¹ç›®ç›®å½•ç»“æ„"></a>é¡¹ç›®ç›®å½•ç»“æ„</h4><p>å…³äº tree çš„ä½¿ç”¨æ€»ç»“ï¼š<a href="https://www.jianshu.com/p/6b57f6e40d64" target="_blank" rel="noopener">MacOS å¦‚ä½•ä½¿ç”¨ tree ç”Ÿæˆç›®å½•ç»“æ„</a></p><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½</span></span><br><span class="line">brew install tree</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">tree -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæ˜¾ç¤ºæ–‡ä»¶å¤¹</span></span><br><span class="line">tree -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ï¼Œå¦‚ä¸‰çº§</span></span><br><span class="line">tree -L 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿‡æ»¤ï¼Œå¦‚é™¤node_modulesæ–‡ä»¶</span></span><br><span class="line">tree -I <span class="string">"node_modules"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">tree &gt; tree.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># Help</span></span><br><span class="line">tree --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€åï¼Œæˆ‘çš„è¾“å‡ºï¼š</span></span><br><span class="line">tree -I <span class="string">"node_modules"</span> &gt; tree.md</span><br></pre></td></tr></table></figure><p>tree.md çš„å†…å®¹ä¸ºï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ dist</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ server.js</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ app.scss</span><br><span class="line">â”‚   â”œâ”€â”€ font-awesome</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ fonts</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ FontAwesome.otf</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ fontawesome-webfont.eot</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ fontawesome-webfont.svg</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ fontawesome-webfont.ttf</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ fontawesome-webfont.woff</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ fontawesome-webfont.woff2</span><br><span class="line">â”‚   â”‚   â””â”€â”€ scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_animated.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_bordered-pulled.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_core.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_fixed-width.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_icons.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_larger.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_list.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_mixins.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_path.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_rotated-flipped.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_screen-reader.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_stacked.scss</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ \_variables.scss</span><br><span class="line">â”‚   â”‚   â””â”€â”€ font-awesome.scss</span><br><span class="line">â”‚   â”œâ”€â”€ index.html</span><br><span class="line">â”‚   â”œâ”€â”€ index.js</span><br><span class="line">â”‚   â”œâ”€â”€ index.jsx</span><br><span class="line">â”‚   â”œâ”€â”€ react.png</span><br><span class="line">â”‚   â””â”€â”€ style.css</span><br><span class="line">â”œâ”€â”€ tree.md</span><br><span class="line">â”œâ”€â”€ webpack.config.js</span><br><span class="line">â””â”€â”€ yarn.lock</span><br><span class="line"></span><br><span class="line">5 directories, 32 files</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®å¯åŠ¨"><a href="#é¡¹ç›®å¯åŠ¨" class="headerlink" title="é¡¹ç›®å¯åŠ¨"></a>é¡¹ç›®å¯åŠ¨</h4><blockquote><p>é¡¹ç›®é‡Œçš„æ¯ä¸€æ¬¡ <code>Commits</code>ï¼ŒåŸºæœ¬ä¸Šå¯¹åº”ç€ç›¸åº”çš„æ–‡ä»¶é…ç½®ï¼Œå¯ä»¥å¯¹ç…§ç€ç…ç…ã€‚</p></blockquote><p>å…‹éš†ä¸€ä»½é¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/yangtao2o/happymmall.git</span><br></pre></td></tr></table></figure><p>è¿›å…¥ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> happymmall</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ†æ”¯è‡³ webpack@3-react</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  happymmall git:(master) git checkout webpack@3-react</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ä¾èµ–åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  happymmall git:(webpack@3-react) yarn install</span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  happymmall git:(webpack@3-react) npm start</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¥é—¨å­¦ä¹  React ä¸€äº›å®ä¾‹</title>
      <link href="/2019/08/02/react-demo/"/>
      <url>/2019/08/02/react-demo/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯å‡ ä¸ªå…¥é—¨å­¦ä¹  React çš„å° Demoï¼Œå¸®åŠ©è‡ªå·±å­¦ä¹ äº†è§£ React çš„è¿è¡Œæœºåˆ¶ï¼Œç»“åˆ <a href="https://zh-hans.reactjs.org/docs/getting-started.html" target="_blank" rel="noopener">Reactå®˜æ–¹æ–‡æ¡£</a>ï¼Œä¼šæ›´ä½³å™¢â€¦</p></blockquote><a id="more"></a><h2 id="DEMO-ç›®å½•"><a href="#DEMO-ç›®å½•" class="headerlink" title="DEMO ç›®å½•"></a>DEMO ç›®å½•</h2><ol><li><a href="https://istaotao.com/myreact/demo/01/" target="_blank" rel="noopener">ReactDOM.render()</a></li><li><a href="https://istaotao.com/myreact/demo/02/" target="_blank" rel="noopener">Use Array in JSX</a></li><li><a href="https://istaotao.com/myreact/demo/03/" target="_blank" rel="noopener">ç»„ä»¶</a></li><li><a href="https://istaotao.com/myreact/demo/04/" target="_blank" rel="noopener">this.props.children</a></li><li><a href="https://istaotao.com/myreact/demo/05/" target="_blank" rel="noopener">PropTypes</a></li><li><a href="https://istaotao.com/myreact/demo/06/" target="_blank" rel="noopener">è·å–çœŸå®çš„ DOM èŠ‚ç‚¹</a></li><li><a href="https://istaotao.com/myreact/demo/07/" target="_blank" rel="noopener">this.state</a></li><li><a href="https://istaotao.com/myreact/demo/08/" target="_blank" rel="noopener">è¡¨å•</a></li><li><a href="https://istaotao.com/myreact/demo/09/" target="_blank" rel="noopener">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="https://istaotao.com/myreact/demo/10/" target="_blank" rel="noopener">ä½¿ç”¨ Promise è·å– Github çš„æ•°æ®</a></li><li><a href="https://istaotao.com/myreact/demo/11/" target="_blank" rel="noopener">Todo List</a></li><li><a href="https://istaotao.com/myreact/demo/12/" target="_blank" rel="noopener">äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰</a></li></ol><p>å¼•å…¥èµ„æº <a href="https://babeljs.io/en/setup/#installation" target="_blank" rel="noopener">With babel-standalone</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"output"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- Load Babel --&gt;</span><br><span class="line">&lt;!-- v6 &lt;script src=<span class="string">"https://unpkg.com/babel-standalone@6/babel.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://unpkg.com/@babel/standalone/babel.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- Your custom script here --&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/babel"</span>&gt;</span><br><span class="line"><span class="keyword">const</span> getMessage = <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">"Hello World"</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'output'</span>).innerHTML = getMessage();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Demo01-ReactDOM-render"><a href="#Demo01-ReactDOM-render" class="headerlink" title="Demo01: ReactDOM.render()"></a>Demo01: ReactDOM.render()</h3><p><a href="https://istaotao.com/myreact/demo/01/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/01/index.html" target="_blank" rel="noopener">Source</a></p><p>åˆå§‹åŒ–å’±å…ˆ Hello ä¸€ä¸‹ï¼Œä½¿ç”¨ jsx è¯­æ³•ï¼Œç¢°åˆ°ä»£ç å—ä½¿ç”¨ï¼ˆ{ }ï¼‰åŒ…èµ·æ¥ï¼Œç¢°åˆ° html æ ‡ç­¾ï¼Œå°±ä½¿ç”¨ï¼ˆ&lt; /&gt;ï¼‰:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">"AAA"</span>, <span class="string">"BBB"</span>, <span class="string">"CCC"</span>];</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;names.map(<span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">    &#125;)&#125;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById("example")</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure><h3 id="Demo02-Use-Array-in-JSX"><a href="#Demo02-Use-Array-in-JSX" class="headerlink" title="Demo02: Use Array in JSX"></a>Demo02: Use Array in JSX</h3><p><a href="https://istaotao.com/myreact/demo/02/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/02/index.html" target="_blank" rel="noopener">Source</a></p><p>å¦‚æœ JavaScript çš„å˜é‡æ˜¯ä¸ªæ•°ç»„ï¼Œä¼šå±•å¼€è¿™ä¸ªæ•°ç»„çš„æ‰€æœ‰é¡¹.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">key</span>=<span class="string">"h1"</span>&gt;</span>Hello,<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, &lt;h2 key=<span class="string">"h2"</span>&gt;React is awesome!<span class="xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>];</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;arr&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">"example"</span>));</span><br></pre></td></tr></table></figure><h3 id="Demo03-ç»„ä»¶"><a href="#Demo03-ç»„ä»¶" class="headerlink" title="Demo03: ç»„ä»¶"></a>Demo03: ç»„ä»¶</h3><p><a href="https://istaotao.com/myreact/demo/03/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/03/index.html" target="_blank" rel="noopener">Source</a></p><p>å˜é‡ HelloMsg æ˜¯ä¸€ä¸ªç»„ä»¶ç±»ã€‚æ¨¡æ¿æ’å…¥ <hellomsg> æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ HelloMsg çš„ä¸€ä¸ªå®ä¾‹ã€‚æ‰€æœ‰ç»„ä»¶ç±»éƒ½å¿…é¡»æœ‰è‡ªå·±çš„ render æ–¹æ³•ï¼Œç”¨äºè¾“å‡ºç»„ä»¶ã€‚</hellomsg></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloMsg</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;HelloMsg name=<span class="string">"Dataozi"</span> /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"example"</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="Demo04-this-props-children"><a href="#Demo04-this-props-children" class="headerlink" title="Demo04: this.props.children"></a>Demo04: this.props.children</h3><p><a href="https://istaotao.com/myreact/demo/04/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/04/index.html" target="_blank" rel="noopener">Source</a></p><p><code>this.props</code> å¯¹è±¡çš„å±æ€§ä¸ç»„ä»¶çš„å±æ€§ä¸€ä¸€å¯¹åº”ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå°±æ˜¯ <code>this.props.children</code> å±æ€§ã€‚</p><p>ps: æ³¨æ„å¤§å°å†™ <code>React.Children</code>ã€<code>React.Component</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotesList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ol&gt;</span><br><span class="line">        &#123;React.Children.map(<span class="keyword">this</span>.props.children, <span class="function"><span class="keyword">function</span>(<span class="params">child</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/ol&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;NotesList&gt;</span></span><br><span class="line"><span class="regexp">    &lt;span&gt;Hello&lt;/</span>span&gt;</span><br><span class="line">    &lt;span&gt;World&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    &lt;span&gt;React&lt;/</span>span&gt;</span><br><span class="line">  &lt;<span class="regexp">/NotesList&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById("example")</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure><h3 id="Demo05-PropTypes"><a href="#Demo05-PropTypes" class="headerlink" title="Demo05: PropTypes"></a>Demo05: PropTypes</h3><p><a href="https://istaotao.com/myreact/demo/05/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/05/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://react.docschina.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener">ä½¿ç”¨ PropTypes è¿›è¡Œç±»å‹æ£€æŸ¥</a></li></ul><p>React å†…ç½®äº†ä¸€äº›ç±»å‹æ£€æŸ¥çš„åŠŸèƒ½ã€‚è¦åœ¨ç»„ä»¶çš„ props ä¸Šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä½ åªéœ€é…ç½®ç‰¹å®šçš„ propTypes å±æ€§:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  tilte: <span class="string">"Hello"</span>,</span><br><span class="line">  age: <span class="number">19</span>,</span><br><span class="line">  isStudent: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTitle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    tilte: PropTypes.string,</span><br><span class="line">    age: PropTypes.number,</span><br><span class="line">    isStudent: PropTypes.bool</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;<span class="keyword">this</span>.props.data.tilte&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h2&gt;&#123;this.props.data.age&#125;&lt;/</span>h2&gt;</span><br><span class="line">        &lt;h3&gt;&#123;<span class="keyword">this</span>.props.data.isStudent ? <span class="string">"Yes"</span> : <span class="string">"No"</span>&#125;&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyTitle</span> <span class="attr">data</span>=<span class="string">&#123;data&#125;</span> /&gt;</span>, document.getElementById("root"));</span></span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥é€šè¿‡é…ç½®ç‰¹å®šçš„ defaultProps å±æ€§æ¥å®šä¹‰ props çš„é»˜è®¤å€¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DefaultTitle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®š props çš„é»˜è®¤å€¼ï¼š</span></span><br><span class="line">DefaultTitle.defaultProps = &#123;</span><br><span class="line">  title: <span class="string">"Hello React!"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">DefaultTitle</span> /&gt;</span>, document.getElementById("root2"));</span></span><br></pre></td></tr></table></figure><h3 id="Demo06-è·å–çœŸå®çš„-DOM-èŠ‚ç‚¹"><a href="#Demo06-è·å–çœŸå®çš„-DOM-èŠ‚ç‚¹" class="headerlink" title="Demo06: è·å–çœŸå®çš„ DOM èŠ‚ç‚¹"></a>Demo06: è·å–çœŸå®çš„ DOM èŠ‚ç‚¹</h3><p><a href="https://istaotao.com/myreact/demo/06/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/06/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">Refs and the DOM</a></li></ul><p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ ã€‚</p><ul><li>åˆ›å»º Refs: Refs æ˜¯ç”±<code>React.createRef()</code>åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§é™„åŠ åˆ° React å…ƒç´ ï¼ˆæ¯”å¦‚ inputï¼‰</li><li>è®¿é—® Refs: å½“ ref è¢«ä¼ é€’ç»™ render ä¸­çš„å…ƒç´ æ—¶ï¼Œå¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥åœ¨ ref çš„ current å±æ€§ä¸­è¢«è®¿é—®ï¼Œ<code>this.myTextFocus.current.focus();</code></li></ul><p><strong><em>ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å®ä¾‹</em></strong></p><p>ç»„ä»¶ MyComponent çš„å­èŠ‚ç‚¹æœ‰ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†ï¼Œç”¨äºè·å–ç”¨æˆ·çš„è¾“å…¥ã€‚è¿™æ—¶å°±å¿…é¡»è·å–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œè™šæ‹Ÿ DOM æ˜¯æ‹¿ä¸åˆ°ç”¨æˆ·è¾“å…¥çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ myTextFocus çš„ DOM å…ƒç´ </span></span><br><span class="line">    <span class="keyword">this</span>.myTextFocus = React.createRef();</span><br><span class="line">    <span class="keyword">this</span>.handerClick = <span class="keyword">this</span>.handerClick.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  handerClick() &#123;</span><br><span class="line">    <span class="comment">// ç›´æ¥ä½¿ç”¨åŸç”Ÿ API ä½¿ text è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹</span></span><br><span class="line">    <span class="comment">// é€šè¿‡ "current" æ¥è®¿é—® DOM èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">this</span>.myTextFocus.current.focus();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// å‘Šè¯‰ React æˆ‘ä»¬æƒ³æŠŠ &lt;input&gt; ref å…³è”åˆ°</span></span><br><span class="line">    <span class="comment">// æ„é€ å™¨é‡Œåˆ›å»ºçš„ `myTextFocus` ä¸Š</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.myTextFocus&#125; /&gt;</span><br><span class="line">        &lt;input type=<span class="string">"button"</span> value=<span class="string">"ç‚¹å‡»èšç„¦"</span> onClick=&#123;<span class="keyword">this</span>.handerClick&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;MyComponent /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure><h3 id="Demo07-this-state"><a href="#Demo07-this-state" class="headerlink" title="Demo07: this.state"></a>Demo07: this.state</h3><p><a href="https://istaotao.com/myreact/demo/07/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/07/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://zh-hans.reactjs.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener">State &amp; ç”Ÿå‘½å‘¨æœŸ</a></li></ul><p>å­¦ä¹ å¦‚ä½•å°è£…çœŸæ­£å¯å¤ç”¨çš„ Clock ç»„ä»¶ã€‚å®ƒå°†è®¾ç½®è‡ªå·±çš„è®¡æ—¶å™¨å¹¶æ¯ç§’æ›´æ–°ä¸€æ¬¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>() &#125;; <span class="comment">//ä¸º this.state èµ‹åˆå€¼</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="comment">// Clockåˆæ¬¡è¢«æ¸²æŸ“åˆ°DOMæ—¶ï¼Œä¸ºå…¶æŒ‚è½½ä¸€ä¸ªè®¡æ—¶å™¨</span></span><br><span class="line">    <span class="keyword">this</span>.timerID = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.tick(), <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="comment">// Clockè¢«åˆ é™¤æ—¶ï¼Œå¸è½½å…¶è®¡æ—¶å™¨</span></span><br><span class="line">    clearInterval(<span class="keyword">this</span>.timerID);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tick() &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ this.setState() æ¥æ—¶åˆ»æ›´æ–°ç»„ä»¶ state</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>() &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, React!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        &lt;h2&gt;ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´ï¼š&#123;<span class="keyword">this</span>.state.date.toLocaleTimeString()&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span>, document.getElementById("root"));</span></span><br></pre></td></tr></table></figure><h3 id="Demo08-è¡¨å•"><a href="#Demo08-è¡¨å•" class="headerlink" title="Demo08: è¡¨å•"></a>Demo08: è¡¨å•</h3><p><a href="https://istaotao.com/myreact/demo/08/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/08/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://zh-hans.reactjs.org/docs/forms.html" target="_blank" rel="noopener">è¡¨å•</a></li></ul><p>å—æ§ç»„ä»¶ï¼šæ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œï¼Œè¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚</p><p>å³ï¼šè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      <span class="comment">// å”¯ä¸€æ•°æ®æº</span></span><br><span class="line">      value: <span class="string">""</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.handleChange = <span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  handleChange(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      value: event.target.value <span class="comment">// æ˜¾ç¤ºçš„å€¼å°†éšç€ç”¨æˆ·è¾“å…¥è€Œæ›´æ–°</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleSubmit(event) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.value) &#123;</span><br><span class="line">      alert(<span class="string">"æ¥å—åˆ°çš„nameå€¼æ˜¯ï¼š"</span> + <span class="keyword">this</span>.state.value);</span><br><span class="line">    &#125;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          type=<span class="string">"text"</span></span><br><span class="line">          value=&#123;<span class="keyword">this</span>.state.value&#125;</span><br><span class="line">          onChange=&#123;<span class="keyword">this</span>.handleChange&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span> /&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;NameForm /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure><p><a href="https://zh-hans.reactjs.org/docs/uncontrolled-components.html" target="_blank" rel="noopener">éå—æ§ç»„ä»¶</a>ï¼šè¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ï¼Œå³ä½¿ç”¨ ref æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®</p><p><a href="https://istaotao.com/myreact/demo/08-1/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/08-1/index.html" target="_blank" rel="noopener">Source</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.input = React.createRef();</span><br><span class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  handleSubmit(event) &#123;</span><br><span class="line">    alert(<span class="string">"æ¥å—åˆ°çš„nameå€¼æ˜¯ï¼š"</span> + <span class="keyword">this</span>.input.current.value);</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.input&#125; /&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span> /&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;NameForm /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure><h3 id="Demo09-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Demo09-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Demo09: ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>Demo09: ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h3><p><a href="https://istaotao.com/myreact/demo/09/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/09/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://zh-hans.reactjs.org/docs/react-component.html" target="_blank" rel="noopener">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener">ç”Ÿå‘½å‘¨æœŸå›¾è°±é€ŸæŸ¥è¡¨</a></li><li><a href="https://www.yuque.com/ant-design/course/lifemethods" target="_blank" rel="noopener">React çš„ç”Ÿå‘½å‘¨æœŸ</a> â€” Ant Design è¯­é›€</li></ul><p>ä¸»è¦è·¯çº¿é¡ºåºï¼šæŒ‚è½½ - æ›´æ–° - å¸è½½ - é”™è¯¯å¤„ç†</p><p><strong>æŒ‚è½½</strong></p><p>å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨å¦‚ä¸‹ï¼š</p><ul><li>consctructor() â€” React ç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œä¸åˆå§‹åŒ– state æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦</li><li>static getDerivedStateFromProps() â€” ä¸å¸¸ç”¨</li><li>render() â€” å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œå¹¶ä¸”åº”è¯¥æ˜¯çº¯å‡½æ•°</li><li>componentDidMount() â€” ä¾èµ–äº DOM èŠ‚ç‚¹çš„åˆå§‹åŒ–åº”è¯¥åœ¨è¿™é‡Œ</li></ul><p><strong>æ›´æ–°</strong></p><p>å½“ç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘æ›´æ–°ï¼š</p><ul><li>static getDerivedStateFromProps()</li><li>shouldComponentUpdate()</li><li>render()</li><li>getSnapshotBeforeUpdate() â€” ä¸å¸¸ç”¨</li><li>componentDidUpdate() â€” åœ¨æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨</li></ul><p><strong>å¸è½½</strong></p><p>å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ï¼š</p><ul><li>componentWillUnmount() â€” ä¼šåœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨</li></ul><p><strong>é”™è¯¯å¤„ç†</strong></p><p>å½“æ¸²æŸ“è¿‡ç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œæˆ–å­ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯æ—¶ï¼š</p><ul><li>static getDerivedStateFromError()</li><li>componentDidCatch()</li></ul><p>è¿‡æœŸçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š</p><ul><li>UNSAFE_componentWillMount() â€” æŒ‚è½½å‰è°ƒç”¨ï¼Œç›®å‰ä½¿ç”¨ constructor()åˆå§‹åŒ– state</li><li>UNSAFE_componentWillReceiveProps()</li><li>UNSAFE_componentWillUpdate()</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      fontSize: <span class="number">12</span>,</span><br><span class="line">      opacity: <span class="number">0.01</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.timerID = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> opacity = <span class="keyword">this</span>.state.opacity;</span><br><span class="line">      <span class="keyword">let</span> fontSize = <span class="keyword">this</span>.state.fontSize;</span><br><span class="line">      opacity += <span class="number">0.02</span>;</span><br><span class="line">      fontSize += <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (opacity &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        opacity = <span class="number">0.01</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (fontSize &gt;= <span class="number">63</span>) &#123;</span><br><span class="line">        fontSize = <span class="number">12</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        fontSize,</span><br><span class="line">        opacity</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.timerID);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;h1</span><br><span class="line">        style=&#123;&#123; <span class="attr">opacity</span>: <span class="keyword">this</span>.state.opacity, <span class="attr">fontSize</span>: <span class="keyword">this</span>.state.fontSize &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        Hello, &#123;<span class="keyword">this</span>.props.name&#125;</span><br><span class="line">      &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;Hello name="React" /</span>&gt;, <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>));</span><br></pre></td></tr></table></figure><h3 id="Demo10-ä½¿ç”¨-Promise-è·å–-Github-çš„æ•°æ®"><a href="#Demo10-ä½¿ç”¨-Promise-è·å–-Github-çš„æ•°æ®" class="headerlink" title="Demo10: ä½¿ç”¨ Promise è·å– Github çš„æ•°æ®"></a>Demo10: ä½¿ç”¨ Promise è·å– Github çš„æ•°æ®</h3><p><a href="https://istaotao.com/myreact/demo/10/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/10/index.html" target="_blank" rel="noopener">Source</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;ReportList</span><br><span class="line">    promise=&#123;$.getJSON(</span><br><span class="line">      <span class="string">"https://api.github.com/search/repositories?q=javascript&amp;sort=stars"</span></span><br><span class="line">    )&#125;</span><br><span class="line">  /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä» Github çš„ API æŠ“å–æ•°æ®ï¼Œç„¶åå°† Promise å¯¹è±¡ä½œä¸ºå±æ€§ï¼Œä¼ ç»™ ReportList ç»„ä»¶ã€‚</p><p>å¦‚æœ Promise å¯¹è±¡æ­£åœ¨æŠ“å–æ•°æ®ï¼ˆpending çŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºâ€loadingâ€¦â€ï¼›</p><p>å¦‚æœ Promise å¯¹è±¡æŠ¥é”™ï¼ˆrejected çŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ï¼›</p><p>å¦‚æœ Promise å¯¹è±¡æŠ“å–æ•°æ®æˆåŠŸï¼ˆfulfilled çŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºè·å–çš„æ•°æ®ã€‚</p><p><a href="https://istaotao.com/myreact/demo/11/" target="_blank" rel="noopener">åœ¨è¿™é‡ŒæŸ¥çœ‹å®Œæ•´ Demo</a>/<a href="https://github.com/yangtao2o/myreact/blob/master/demo/11/index.html" target="_blank" rel="noopener">æºç </a> â€” è°·æ­Œæµè§ˆå™¨æœ‰æ—¶å€™ä¼šæŠ¥è·¨åŸŸçš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç«ç‹ç­‰æµè§ˆå™¨è¯•çœ‹</p><h2 id="æ¥ä¸‹æ¥æ¥å‡ ä¸ªæ··åˆå®æˆ˜å§"><a href="#æ¥ä¸‹æ¥æ¥å‡ ä¸ªæ··åˆå®æˆ˜å§" class="headerlink" title="æ¥ä¸‹æ¥æ¥å‡ ä¸ªæ··åˆå®æˆ˜å§"></a>æ¥ä¸‹æ¥æ¥å‡ ä¸ªæ··åˆå®æˆ˜å§</h2><h3 id="Demo11-Todo-List"><a href="#Demo11-Todo-List" class="headerlink" title="Demo11: Todo List"></a>Demo11: Todo List</h3><p><a href="https://istaotao.com/myreact/demo/11/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/11/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://codepen.io/marekdano/pen/bVNYpq" target="_blank" rel="noopener">React todo list</a></li></ul><p>ä¸»è¦ç»ƒä¹ ä½¿ç”¨ <code>props</code> å’Œ <code>state</code>ï¼Œä½¿ç”¨ state ä¿å­˜ç°æœ‰çš„å¾…åŠäº‹é¡¹åˆ—è¡¨åŠç”¨æˆ·çš„ä¸€äº›æ“ä½œï¼ˆåˆ é™¤ã€å®Œæˆï¼‰ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      items: []</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.addItem = <span class="keyword">this</span>.addItem.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.deleteItem = <span class="keyword">this</span>.deleteItem.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.doneItem = <span class="keyword">this</span>.doneItem.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  addItem(item) &#123;</span><br><span class="line">    <span class="keyword">const</span> newItem = &#123;</span><br><span class="line">      text: item.text,</span><br><span class="line">      id: <span class="built_in">Date</span>.now(),</span><br><span class="line">      done: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      items: <span class="keyword">this</span>.state.items.concat(newItem)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  deleteItem(index) &#123;</span><br><span class="line">    <span class="keyword">this</span>.state.items.splice(index, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      items: <span class="keyword">this</span>.state.items</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  doneItem(index) &#123;</span><br><span class="line">    <span class="keyword">const</span> items = <span class="keyword">this</span>.state.items;</span><br><span class="line">    <span class="keyword">const</span> todo = items[index];</span><br><span class="line">    items.splice(index, <span class="number">1</span>);</span><br><span class="line">    todo.done = !todo.done;</span><br><span class="line">    todo.done ? items.unshift(todo) : items.push(todo);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; items &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"container"</span>&gt;</span><br><span class="line">        &lt;h1&gt;TODO&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;TodoList</span></span><br><span class="line"><span class="regexp">          items=&#123;this.state.items&#125;</span></span><br><span class="line"><span class="regexp">          deleteClick=&#123;this.deleteItem&#125;</span></span><br><span class="line"><span class="regexp">          doneClick=&#123;this.doneItem&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">        &lt;TodoForm addItem=&#123;<span class="keyword">this</span>.addItem&#125; items=&#123;<span class="keyword">this</span>.state.items&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Demo12-äº•å­—æ£‹ï¼ˆTic-Tac-Toeï¼‰"><a href="#Demo12-äº•å­—æ£‹ï¼ˆTic-Tac-Toeï¼‰" class="headerlink" title="Demo12: äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰"></a>Demo12: äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰</h3><p><a href="https://istaotao.com/myreact/demo/12/" target="_blank" rel="noopener">Demo</a> / <a href="https://github.com/yangtao2o/myreact/blob/master/demo/12/index.html" target="_blank" rel="noopener">Source</a></p><ul><li><a href="https://codepen.io/gaearon/pen/gWWZgR?editors=0010" target="_blank" rel="noopener">Tic Tac Toe</a></li><li><a href="https://zh-hans.reactjs.org/tutorial/tutorial.html#inspecting-the-starter-code" target="_blank" rel="noopener">äº•å­—æ£‹æ¸¸æˆæ•™ç¨‹æ–‡æ¡£</a></li><li><a href="https://www.bbsmax.com/A/8Bz8kVodxg/" target="_blank" rel="noopener">React çš„äº•å­—è¿‡ä¸‰å…³</a></li></ul><h4 id="tic-tac-toe-ä¸‰è¿æ£‹-æ¸¸æˆçš„åŠŸèƒ½"><a href="#tic-tac-toe-ä¸‰è¿æ£‹-æ¸¸æˆçš„åŠŸèƒ½" class="headerlink" title="tic-tac-toe(ä¸‰è¿æ£‹)æ¸¸æˆçš„åŠŸèƒ½"></a>tic-tac-toe(ä¸‰è¿æ£‹)æ¸¸æˆçš„åŠŸèƒ½</h4><ul><li>èƒ½å¤Ÿåˆ¤å®šç©å®¶ä½•æ—¶è·èƒœ</li><li>èƒ½å¤Ÿè®°å½•æ¸¸æˆè¿›ç¨‹</li><li>å…è®¸ç©å®¶æŸ¥çœ‹æ¸¸æˆçš„å†å²è®°å½•ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ä»»æ„ä¸€ä¸ªå†å²ç‰ˆæœ¬çš„æ¸¸æˆæ£‹ç›˜çŠ¶æ€</li><li>åœ¨æ¸¸æˆå†å²è®°å½•åˆ—è¡¨æ˜¾ç¤ºæ¯ä¸€æ­¥æ£‹çš„åæ ‡ï¼Œæ ¼å¼ä¸º (åˆ—å·, è¡Œå·)</li><li>åœ¨å†å²è®°å½•åˆ—è¡¨ä¸­åŠ ç²—æ˜¾ç¤ºå½“å‰é€‰æ‹©çš„é¡¹ç›®</li><li>å½“æ— äººè·èƒœæ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªå¹³å±€çš„æ¶ˆæ¯</li><li style="list-style: none"><input type="checkbox"> ä½¿ç”¨ä¸¤ä¸ªå¾ªç¯æ¥æ¸²æŸ“å‡ºæ£‹ç›˜çš„æ ¼å­ï¼Œè€Œä¸æ˜¯åœ¨ä»£ç é‡Œå†™æ­»ï¼ˆhardcodeï¼‰</li><li style="list-style: none"><input type="checkbox"> æ·»åŠ ä¸€ä¸ªå¯ä»¥å‡åºæˆ–é™åºæ˜¾ç¤ºå†å²è®°å½•çš„æŒ‰é’®</li><li style="list-style: none"><input type="checkbox"> æ¯å½“æœ‰äººè·èƒœæ—¶ï¼Œé«˜äº®æ˜¾ç¤ºè¿æˆä¸€çº¿çš„ 3 é¢—æ£‹å­</li></ul><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener">React å…¥é—¨å®ä¾‹æ•™ç¨‹</a> â€” é˜®ä¸€å³°</li><li><a href="https://github.com/ruanyf/react-demos" target="_blank" rel="noopener">react-demos</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejs æ—¥å¸¸æ‚è®°</title>
      <link href="/2019/07/10/node-learning/"/>
      <url>/2019/07/10/node-learning/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Node.jsÂ® is a JavaScript runtime built on <code>Chrome&#39;s V8 JavaScript engine</code>. Node.js uses an <code>event-driven</code>, <code>non-blocking I/O model</code> that makes it lightweight and efficient. Node.jsâ€™ package ecosystem, <code>npm</code>, is the largest ecosystem of open source libraries in the world.</p></blockquote><a id="more"></a><h2 id="å­¦ä¹ ä¹¦ç±-è§†é¢‘"><a href="#å­¦ä¹ ä¹¦ç±-è§†é¢‘" class="headerlink" title="å­¦ä¹ ä¹¦ç±|è§†é¢‘"></a>å­¦ä¹ ä¹¦ç±|è§†é¢‘</h2><ul><li><a href="https://www.runoob.com/nodejs/nodejs-tutorial.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a> - æ–‡æ¡£</li><li><a href="http://nqdeng.github.io/7-days-nodejs/#1.1" target="_blank" rel="noopener">7-days-nodejs</a> - æ–‡ç« </li><li><a href="https://github.com/alsotang/node-lessons" target="_blank" rel="noopener">ã€ŠNode.js åŒ…æ•™ä¸åŒ…ä¼šã€‹</a> â€“ æ–‡ç« </li><li>ã€Šäº†ä¸èµ·çš„ Node.jsï¼šå°† JavaScript è¿›è¡Œåˆ°åº•ã€‹- ä¹¦ç±</li><li>ã€Šæ–°æ—¶æœŸçš„ Node.js å…¥é—¨ã€‹- ä¹¦ç±</li><li><a href="https://coding.imooc.com/class/320.html" target="_blank" rel="noopener">Node.js ä»é›¶å¼€å‘ Web Server åšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡</a> - è§†é¢‘</li></ul><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="https://cnodejs.org/getstart" target="_blank" rel="noopener">Node.js å…¥é—¨</a></li><li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://cnodejs.org/" target="_blank" rel="noopener">CNodeï¼šNode.js ä¸“ä¸šä¸­æ–‡ç¤¾åŒº</a></li><li><a href="https://segmentfault.com/a/1190000013933520" target="_blank" rel="noopener">ã€å…¨æ–‡ã€‘ç‹¼å”ï¼šå¦‚ä½•æ­£ç¡®çš„å­¦ä¹  Node.js</a></li><li><a href="http://www.expressjs.com.cn/guide/routing.html" target="_blank" rel="noopener">Express-4.x å®˜æ–¹æŒ‡å—</a></li><li><a href="https://www.jianshu.com/p/406f6df0f916" target="_blank" rel="noopener">react å…¨å®¶æ¡¶+express å®æˆ˜ä¸ªäººåšå®¢ç³»åˆ—æ•™ç¨‹</a></li><li><a href="https://www.jianshu.com/p/c65ecdcffed1" target="_blank" rel="noopener">è¯¦è§£å¦‚ä½•ä»é›¶å¼€å§‹æ­å»º Express+Vue å¼€å‘ç¯å¢ƒ</a></li><li><a href="https://www.jianshu.com/p/4940ae61b752" target="_blank" rel="noopener">vue é¡¹ç›®-å‰ç«¯ Vue åå° express</a></li><li><a href="https://segmentfault.com/a/1190000015866331" target="_blank" rel="noopener">ã€å®æˆ˜ã€‘ç”¨ express+MongoDB æ­å»ºä¸€ä¸ªå®Œæ•´çš„å‰ç«¯é¡¹ç›®</a></li><li><a href="https://www.jianshu.com/p/92fa50ea0b84" target="_blank" rel="noopener">åŸºäº Vue+express çš„åšå®¢é¡¹ç›®</a></li></ul><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><ul><li><a href="https://cnodejs.org/topic/560dbc826a1ed28204a1e7de" target="_blank" rel="noopener">Node.js æœ€æ–°æŠ€æœ¯æ ˆä¹‹ Promise ç¯‡</a> - 2015</li><li><a href="https://blog.coding.net/blog/how-do-promises-work" target="_blank" rel="noopener">ç†è§£ Promise çš„å·¥ä½œåŸç†</a></li><li><a href="http://liubin.org/promises-book/" target="_blank" rel="noopener">JavaScript Promise è¿·ä½ ä¹¦ï¼ˆä¸­æ–‡ç‰ˆï¼‰</a></li></ul><h2 id="å‘¨è¾¹å¤§å’–"><a href="#å‘¨è¾¹å¤§å’–" class="headerlink" title="å‘¨è¾¹å¤§å’–"></a>å‘¨è¾¹å¤§å’–</h2><ul><li><a href="https://github.com/sindresorhus/awesome-nodejs" target="_blank" rel="noopener">wesome-nodejs</a></li><li>@justjavac å¤§ç¥çš„<a href="https://github.com/justjavac/free-programming-books-zh_CN/#%E7%BD%AE%E9%A1%B6" target="_blank" rel="noopener">å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±</a></li><li><a href="https://github.com/i5ting/How-to-learn-node-correctly" target="_blank" rel="noopener">ã€çŸ¥ä¹ Liveã€‘ç‹¼å”ï¼šå¦‚ä½•æ­£ç¡®çš„å­¦ä¹  Node.js</a></li></ul><h2 id="å­¦ä¹ æ—¥å¿—"><a href="#å­¦ä¹ æ—¥å¿—" class="headerlink" title="å­¦ä¹ æ—¥å¿—"></a>å­¦ä¹ æ—¥å¿—</h2><ul><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/http.md" target="_blank" rel="noopener">Http</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/tcp.md" target="_blank" rel="noopener">Tcp</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/connect.md" target="_blank" rel="noopener">Connect</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/event.md" target="_blank" rel="noopener">Event</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/express-init.md" target="_blank" rel="noopener">Express-init</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/express-spider.md" target="_blank" rel="noopener">Express-spider</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/blob/master/doc/express-spider-more.md" target="_blank" rel="noopener">Express-spider-more</a></li><li><a href="https://github.com/yangtao2o/nodejs-learn/tree/master/cnodejs" target="_blank" rel="noopener">npm package</a> ç§¯ç´¯</li></ul><h2 id="Node-ç›¸å…³"><a href="#Node-ç›¸å…³" class="headerlink" title="Node ç›¸å…³"></a>Node ç›¸å…³</h2><ul><li><a href="https://github.com/yangtao2o/node-express-mongodb/blob/master/doc/doc-01-init.md" target="_blank" rel="noopener">ç½‘ç«™åˆå§‹åŒ–ï¼Œå®ç° GET å’Œ POST çš„ Ajax è¯·æ±‚</a></li><li><a href="https://github.com/yangtao2o/node-express-mongodb/blob/master/doc/doc-02-login.md" target="_blank" rel="noopener">ç™»å½•æ¨¡å—</a></li><li><a href="https://github.com/yangtao2o/node-express-mongodb/blob/master/doc/doc-02-login.md" target="_blank" rel="noopener">ä¸Šä¼ å›¾ç‰‡æ¨¡å—</a></li><li><a href="https://github.com/yangtao2o/node-blog-express-koa2" target="_blank" rel="noopener">node-blog-express-koa2</a></li><li><a href="https://github.com/yangtao2o/node-express-mongodb" target="_blank" rel="noopener">node-express-mongodb</a></li><li><a href="https://github.com/yangtao2o/node-express-spider" target="_blank" rel="noopener">node-express-spider</a></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ superagent ä¸ cheerio å®Œæˆç®€å•çˆ¬è™«</title>
      <link href="/2019/07/06/node-express-spider/"/>
      <url>/2019/07/06/node-express-spider/</url>
      
        <content type="html"><![CDATA[<h2 id="çˆ¬ä¸€ä¸‹-CNode-ä¸“ä¸šä¸­æ–‡ç¤¾åŒº"><a href="#çˆ¬ä¸€ä¸‹-CNode-ä¸“ä¸šä¸­æ–‡ç¤¾åŒº" class="headerlink" title="çˆ¬ä¸€ä¸‹ CNode ä¸“ä¸šä¸­æ–‡ç¤¾åŒº"></a>çˆ¬ä¸€ä¸‹ CNode ä¸“ä¸šä¸­æ–‡ç¤¾åŒº</h2><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> superagent = <span class="built_in">require</span>(<span class="string">"superagent"</span>);</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> PORT = process.env.PORT || <span class="number">8000</span>;</span><br><span class="line"><span class="keyword">const</span> URL = <span class="string">"https://cnodejs.org"</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å½“åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:8000/ æ—¶ï¼Œè¾“å‡º CNode(https://cnodejs.org/ ) ç¤¾åŒºé¦–é¡µçš„æ‰€æœ‰å¸–å­æ ‡é¢˜å’Œé“¾æ¥ï¼Œä»¥ json çš„å½¢å¼ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">app.get(<span class="string">"/"</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ superagent è·å– url</span></span><br><span class="line">  superagent.get(URL, (err, sres) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> next(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> $ = cheerio.load(sres.text);</span><br><span class="line">    <span class="keyword">const</span> items = [];</span><br><span class="line">    <span class="keyword">const</span> $target = $(<span class="string">"#topic_list .topic_title"</span>);</span><br><span class="line">    <span class="keyword">let</span> itemsHtml = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    $target.each(<span class="function">(<span class="params">i, item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> $<span class="keyword">this</span> = $(item);</span><br><span class="line">      items.push(&#123;</span><br><span class="line">        title: $<span class="keyword">this</span>.attr(<span class="string">"title"</span>),</span><br><span class="line">        url: URL + $<span class="keyword">this</span>.attr(<span class="string">"href"</span>)</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"items---&gt;"</span>, items); <span class="comment">// ä»¥ JSON æ ¼å¼æ‰“å°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (items) &#123;</span><br><span class="line">      $(items).each(<span class="function">(<span class="params">i, item</span>) =&gt;</span> &#123;</span><br><span class="line">        itemsHtml += <span class="string">`&lt;li&gt;&lt;a href="<span class="subst">$&#123;item.url&#125;</span>" title="<span class="subst">$&#123;item.title&#125;</span>"&gt;<span class="subst">$&#123;item.title&#125;</span>&lt;/a&gt;&lt;/li&gt;`</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      itemsHtml = <span class="string">`&lt;ol id="listItem"&gt;<span class="subst">$&#123;itemsHtml&#125;</span>&lt;/ol&gt;`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      itemsHtml = <span class="string">`&lt;p&gt;æš‚æ—¶è¿˜è·å–ä¸åˆ°æ•°æ®...&lt;/p&gt;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res.send(itemsHtml);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(PORT, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"App is listening at port "</span> + PORT);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å¹¶å‘è¯·æ±‚å¤„ç†"><a href="#å¹¶å‘è¯·æ±‚å¤„ç†" class="headerlink" title="å¹¶å‘è¯·æ±‚å¤„ç†"></a>å¹¶å‘è¯·æ±‚å¤„ç†</h2><p>è¾“å‡º <a href="https://cnodejs.org/" target="_blank" rel="noopener">CNode</a> ç¤¾åŒºé¦–é¡µçš„æ‰€æœ‰ä¸»é¢˜çš„æ ‡é¢˜ï¼Œé“¾æ¥å’Œç¬¬ä¸€æ¡è¯„è®ºï¼Œä»¥ json çš„æ ¼å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> superagent = <span class="built_in">require</span>(<span class="string">"superagent"</span>);</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>);</span><br><span class="line"><span class="keyword">const</span> morgan = <span class="built_in">require</span>(<span class="string">"morgan"</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">async</span> = <span class="built_in">require</span>(<span class="string">"async"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> PORT = process.env.PORT || <span class="number">8000</span>;</span><br><span class="line"><span class="keyword">const</span> URL = <span class="string">"https://cnodejs.org"</span>;</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"ejs"</span>);</span><br><span class="line">app.use(morgan(<span class="string">"dev"</span>));</span><br><span class="line">app.use(express.json());</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ§åˆ¶å¹¶å‘è¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">"/"</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"loading..."</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`æ­£åœ¨è¯·æ±‚<span class="subst">$&#123;URL&#125;</span>`</span>);</span><br><span class="line">  superagent.get(URL).end(<span class="function">(<span class="params">err, sres</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> topicUrls = [];</span><br><span class="line">    <span class="keyword">const</span> $ = cheerio.load(sres.text);</span><br><span class="line">    <span class="keyword">let</span> concurrencyCount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> fetchUrl = <span class="function">(<span class="params">url, callback</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> getItem = &#123;&#125;;</span><br><span class="line">      superagent.get(url).end(<span class="function">(<span class="params">err, sres</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> $ = cheerio.load(sres.text);</span><br><span class="line">        concurrencyCount++;</span><br><span class="line"></span><br><span class="line">        getItem = &#123;</span><br><span class="line">          href: url,</span><br><span class="line">          title: $(<span class="string">".topic_full_title"</span>)</span><br><span class="line">            .text()</span><br><span class="line">            .replace(<span class="regexp">/[\r\n]/g</span>, <span class="string">""</span>),</span><br><span class="line">          comment: $(<span class="string">".reply_content"</span>)</span><br><span class="line">            .eq(<span class="number">0</span>)</span><br><span class="line">            .text()</span><br><span class="line">            .replace(<span class="regexp">/[\ \r\n]/g</span>, <span class="string">""</span>)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(</span><br><span class="line">          <span class="string">`\r\næ­£åœ¨è¯·æ±‚ç¬¬ <span class="subst">$&#123;concurrencyCount&#125;</span> æ¡çš„æ•°æ®data:\r\n<span class="subst">$&#123;[</span></span></span><br><span class="line"><span class="string"><span class="subst">            <span class="built_in">JSON</span>.stringify(getItem)</span></span></span><br><span class="line"><span class="string"><span class="subst">          ]&#125;</span>`</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        callback(<span class="literal">null</span>, getItem);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#topic_list .topic_title"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">idx, element</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> $element = $(element);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> href = URL + $element.attr(<span class="string">"href"</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`æ­£åœ¨è·å–ç¬¬ <span class="subst">$&#123;idx + <span class="number">1</span>&#125;</span> æ¡åˆ—è¡¨çš„urlï¼š<span class="subst">$&#123;href&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">      topicUrls.push(href);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (topicUrls.length &lt; <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`\r\nå¼€å§‹å¹¶å‘è¯·æ±‚...\r\n`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span>.mapLimit(</span><br><span class="line">      topicUrls,</span><br><span class="line">      <span class="number">3</span>,</span><br><span class="line">      (url, callback) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.time(<span class="string">"delay"</span>);</span><br><span class="line">        fetchUrl(url, callback);</span><br><span class="line">        <span class="built_in">console</span>.timeEnd(<span class="string">"delay"</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      (err, results) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"\rè·å–åˆ°çš„æ•°æ®: \r\n"</span>, results);</span><br><span class="line">        res.json(results);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(PORT, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"App is listening at port "</span> + PORT);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–ä¸‹"><a href="#ä¼˜åŒ–ä¸‹" class="headerlink" title="ä¼˜åŒ–ä¸‹"></a>ä¼˜åŒ–ä¸‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">const</span> superagent = <span class="built_in">require</span>(<span class="string">"superagent"</span>);</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>);</span><br><span class="line"><span class="keyword">const</span> morgan = <span class="built_in">require</span>(<span class="string">"morgan"</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">async</span> = <span class="built_in">require</span>(<span class="string">"async"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PORT = process.env.PORT || <span class="number">3000</span>;</span><br><span class="line"><span class="keyword">const</span> URL = <span class="string">"https://cnodejs.org"</span>;</span><br><span class="line"><span class="keyword">const</span> ALLNUMS = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> TIEMS = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"ejs"</span>);</span><br><span class="line">app.use(morgan(<span class="string">"dev"</span>));</span><br><span class="line">app.use(express.json());</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ§åˆ¶å¹¶å‘è¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">"/"</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"loading..."</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`æ­£åœ¨è¯·æ±‚<span class="subst">$&#123;URL&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> getHomePageUrls = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    superagent.get(URL).end(<span class="function">(<span class="params">err, sres</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(err);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> topicUrls = [];</span><br><span class="line">      <span class="keyword">const</span> $ = cheerio.load(sres.text);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">"#topic_list .topic_title"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">idx, element</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> $element = $(element);</span><br><span class="line">        <span class="keyword">const</span> href = URL + $element.attr(<span class="string">"href"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`æ­£åœ¨è·å–ç¬¬ <span class="subst">$&#123;idx + <span class="number">1</span>&#125;</span> æ¡åˆ—è¡¨çš„urlï¼š<span class="subst">$&#123;href&#125;</span>`</span>);</span><br><span class="line">        topicUrls.push(href);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">if</span> (topicUrls.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        resolve(topicUrls.slice(<span class="number">0</span>, ALLNUMS));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> concurrencyCount = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> fetchUrl = <span class="function">(<span class="params">url, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> getItem = &#123;&#125;;</span><br><span class="line">    superagent.get(url).end(<span class="function">(<span class="params">err, sres</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> $ = cheerio.load(sres.text);</span><br><span class="line">      concurrencyCount++;</span><br><span class="line"></span><br><span class="line">      getItem = &#123;</span><br><span class="line">        href: url,</span><br><span class="line">        title: $(<span class="string">".topic_full_title"</span>)</span><br><span class="line">          .text()</span><br><span class="line">          .replace(<span class="regexp">/[\ \r\n]/g</span>, <span class="string">""</span>),</span><br><span class="line">        comment: $(<span class="string">".reply_content"</span>)</span><br><span class="line">          .eq(<span class="number">0</span>)</span><br><span class="line">          .text()</span><br><span class="line">          .replace(<span class="regexp">/[\ \r\n]/g</span>, <span class="string">""</span>)</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(</span><br><span class="line">        <span class="string">`\r\næ­£åœ¨è¯·æ±‚ç¬¬ <span class="subst">$&#123;concurrencyCount&#125;</span> æ¡çš„æ•°æ®data:\r\n<span class="subst">$&#123;[</span></span></span><br><span class="line"><span class="string"><span class="subst">          <span class="built_in">JSON</span>.stringify(getItem)</span></span></span><br><span class="line"><span class="string"><span class="subst">        ]&#125;</span>`</span></span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      callback(<span class="literal">null</span>, getItem);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Promise</span>.race([getHomePageUrls])</span><br><span class="line">    .then(<span class="function"><span class="params">itemUrls</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`\r\nå¼€å§‹å¹¶å‘ <span class="subst">$&#123;TIEMS&#125;</span> æ¬¡è¯·æ±‚...\r\n`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">async</span>.mapLimit(</span><br><span class="line">        itemUrls,</span><br><span class="line">        TIEMS,</span><br><span class="line">        (url, callback) =&gt; &#123;</span><br><span class="line">          <span class="built_in">console</span>.time(<span class="string">"delay"</span>);</span><br><span class="line">          fetchUrl(url, callback);</span><br><span class="line">          <span class="built_in">console</span>.timeEnd(<span class="string">"delay"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        (err, results) =&gt; &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"\rè·å–åˆ°çš„æ•°æ®: \r\n"</span>, results);</span><br><span class="line">          res.json(results);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(err));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(PORT, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"App is listening at port "</span> + PORT);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejsç³»åˆ—ä¹‹Events</title>
      <link href="/2019/06/25/node-events/"/>
      <url>/2019/06/25/node-events/</url>
      
        <content type="html"><![CDATA[<h2 id="Node-js-äº‹ä»¶å¾ªç¯"><a href="#Node-js-äº‹ä»¶å¾ªç¯" class="headerlink" title="Node.js äº‹ä»¶å¾ªç¯"></a>Node.js äº‹ä»¶å¾ªç¯</h2><p>Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚</p><a id="more"></a><p>Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚</p><p>Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚</p><p>Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°.</p><p><code>EventEmitter</code> æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚<code>on</code>å’Œ<code>emit</code>ã€‚</p><p><code>on</code> å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œ<code>emit</code> å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">'events'</span>)</span><br><span class="line"><span class="comment">// åˆ›å»º eventEmitter å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> eventEmitter = <span class="keyword">new</span> events.EventEmitter()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">eventEmitter.on(<span class="string">'connection'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å»ºç«‹è¿æ¥...'</span>)</span><br><span class="line">  <span class="comment">// è§¦å‘ dataReceived äº‹ä»¶</span></span><br><span class="line">  eventEmitter.emit(<span class="string">'dataReceived'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š dataReceived äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">eventEmitter.on(<span class="string">'dataReceived'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æ¥æ”¶æ•°æ®ä¸­...'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘ connection äº‹ä»¶</span></span><br><span class="line">eventEmitter.emit(<span class="string">'connection'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"æ•°æ®æ¥æ”¶å®Œæ¯•ï¼"</span>);</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ node 02-event.js</span><br><span class="line">å»ºç«‹è¿æ¥...</span><br><span class="line">æ¥æ”¶æ•°æ®ä¸­...</span><br><span class="line">æ•°æ®æ¥æ”¶å®Œæ¯•ï¼</span><br></pre></td></tr></table></figure><p>EventEmitter ç±»å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"><span class="comment">// class ç»§æ‰¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEmitter</span> <span class="keyword">extends</span> <span class="title">EventEmitter</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">const</span> myEmitter = <span class="keyword">new</span> MyEmitter();</span><br><span class="line"></span><br><span class="line">myEmitter.on(<span class="string">'event'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'è§¦å‘äº‹ä»¶'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">myEmitter.emit(<span class="string">'event'</span>);</span><br></pre></td></tr></table></figure><h2 id="EventEmitter-ç±»"><a href="#EventEmitter-ç±»" class="headerlink" title="EventEmitter ç±»"></a>EventEmitter ç±»</h2><p>Node.js æ‰€æœ‰çš„å¼‚æ­¥ I/O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚</p><p>Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª <code>net.Server</code> å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª <code>fs.readStream</code> å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ <code>events.EventEmitter</code> çš„å®ä¾‹ã€‚</p><p>EventEmitter ç±»ç”± events æ¨¡å—å®šä¹‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"><span class="keyword">const</span> myEmitter = <span class="keyword">new</span> EventEmitter();</span><br></pre></td></tr></table></figure><p><code>EventEmitter</code> çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚</p><p>å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼Œ<code>EventEmitter</code> æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p><p>å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"><span class="keyword">const</span> myEmitter = <span class="keyword">new</span> EventEmitter();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªç›‘å¬å™¨ã€‚</span></span><br><span class="line">myEmitter.on(<span class="string">'event'</span>, <span class="function"><span class="keyword">function</span> <span class="title">firstListener</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ç¬¬ä¸€ä¸ªç›‘å¬å™¨'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªç›‘å¬å™¨ã€‚</span></span><br><span class="line">myEmitter.on(<span class="string">'event'</span>, <span class="function"><span class="keyword">function</span> <span class="title">secondListener</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ç¬¬äºŒä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° <span class="subst">$&#123;arg1&#125;</span>ã€<span class="subst">$&#123;arg2&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ä¸ªç›‘å¬å™¨</span></span><br><span class="line">myEmitter.on(<span class="string">'event'</span>, <span class="function"><span class="keyword">function</span> <span class="title">thirdListener</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> parameters = args.join(<span class="string">', '</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ç¬¬ä¸‰ä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° <span class="subst">$&#123;parameters&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(myEmitter.listeners(<span class="string">'event'</span>));</span><br><span class="line"></span><br><span class="line">myEmitter.emit(<span class="string">'event'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><p>myEmitter ä¸ºäº‹ä»¶ event æ³¨å†Œäº†ä¸‰ä¸ªä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘ event äº‹ä»¶ï¼Œè¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€ä¸ªç›‘å¬å™¨</span><br><span class="line">ç¬¬äºŒä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° 1ã€2</span><br><span class="line">ç¬¬ä¸‰ä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° 1, 2, 3, 4, 5</span><br></pre></td></tr></table></figure><p><code>EventEmitter</code> æä¾›äº†å¤šä¸ªå±æ€§ï¼Œåˆäº†ç»‘å®šäº‹ä»¶å‡½æ•°çš„<code>on</code>å’Œè§¦å‘äº‹ä»¶å‡½æ•°çš„<code>emit</code>ï¼Œè¿˜æœ‰å¦‚ä¸‹ä¸€äº›å±æ€§ï¼š</p><ul><li><p>addListener(event, listener)<br>ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ï¼Œ<code>emitter.on(eventName, listener)</code> çš„åˆ«åã€‚</p></li><li><p>once(event, listener)<br>ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨ï¼Œå³ ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨</p></li><li><p>removeListener(event, listener)<br>ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨</p></li><li><p>removeAllListeners([event])<br>ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ï¼Œ å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨</p></li><li><p>setMaxListeners(n)<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œ EventEmitters å¦‚æœä½ æ·»åŠ çš„ç›‘å¬å™¨è¶…è¿‡ 10 ä¸ªå°±ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ã€‚ setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ã€‚</p></li><li><p>listeners(event)<br>è¿”å›åä¸º eventName çš„äº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„çš„å‰¯æœ¬</p></li><li><p>on(event, listener)<br>ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•°</p></li><li><p>off(eventName, listener)<br><code>removeListener()</code> çš„åˆ«å</p></li><li><p>emit(event, [arg1], [arg2], [â€¦])<br>æŒ‰ç›‘å¬å™¨çš„é¡ºåºæ‰§è¡Œæ‰§è¡Œæ¯ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› false</p></li><li><p>listenerCount(eventName)<br>è¿”å›æ­£åœ¨ç›‘å¬çš„åä¸º eventName çš„äº‹ä»¶çš„ç›‘å¬å™¨çš„æ•°é‡</p></li></ul><p>ç»ƒä¹ ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>)</span><br><span class="line"><span class="keyword">const</span> myEmitter = <span class="keyword">new</span> EventEmitter()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> listener1 = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ç›‘å¬å™¨1å¯åŠ¨'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> listener2 = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ç›‘å¬å™¨2å¯åŠ¨'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myEmitter.on(<span class="string">'event'</span>, listener1)</span><br><span class="line">myEmitter.on(<span class="string">'event'</span>, listener2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> listeners = myEmitter.listenerCount(<span class="string">'event'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`ç°åœ¨æœ‰<span class="subst">$&#123;listeners&#125;</span>ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶`</span>)</span><br><span class="line"></span><br><span class="line">myEmitter.emit(<span class="string">'event'</span>)</span><br><span class="line"></span><br><span class="line">myEmitter.off(<span class="string">'event'</span>, listener1)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ç›‘å¬å™¨1å·²è¢«ç§»é™¤'</span>)</span><br><span class="line"></span><br><span class="line">myEmitter.emit(<span class="string">'event'</span>)</span><br><span class="line"></span><br><span class="line">listeners = myEmitter.listenerCount(<span class="string">'event'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`ç°åœ¨æœ‰ <span class="subst">$&#123;listeners&#125;</span> ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶`</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'End!'</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[nodemon] starting `node 04-event.js`</span><br><span class="line">ç°åœ¨æœ‰2ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶</span><br><span class="line">ç›‘å¬å™¨1å¯åŠ¨</span><br><span class="line">ç›‘å¬å™¨2å¯åŠ¨</span><br><span class="line">ç›‘å¬å™¨1å·²è¢«ç§»é™¤</span><br><span class="line">ç›‘å¬å™¨2å¯åŠ¨</span><br><span class="line">ç°åœ¨æœ‰ 1 ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶</span><br><span class="line">End!</span><br></pre></td></tr></table></figure><h2 id="é”™è¯¯äº‹ä»¶"><a href="#é”™è¯¯äº‹ä»¶" class="headerlink" title="é”™è¯¯äº‹ä»¶"></a>é”™è¯¯äº‹ä»¶</h2><p>å½“ EventEmitter å®ä¾‹å‡ºé”™æ—¶ï¼Œåº”è¯¥è§¦å‘ â€˜errorâ€™ äº‹ä»¶ã€‚ è¿™äº›åœ¨ Node.js ä¸­è¢«è§†ä¸ºç‰¹æ®Šæƒ…å†µã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEmitter</span> <span class="keyword">extends</span> <span class="title">EventEmitter</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myEmitter = <span class="keyword">new</span> MyEmitter();</span><br><span class="line">myEmitter.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'é”™è¯¯ä¿¡æ¯'</span>));</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ä¸º â€˜errorâ€™ äº‹ä»¶æ³¨å†Œç›‘å¬å™¨ï¼Œåˆ™å½“ â€˜errorâ€™ äº‹ä»¶è§¦å‘æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€æ‰“å°å †æ ˆè·Ÿè¸ªã€å¹¶é€€å‡º Node.js è¿›ç¨‹ã€‚</p><p>æ‰€ä»¥æœ€ä½³å®è·µæ˜¯ï¼Œåº”è¯¥å§‹ç»ˆä¸º â€˜errorâ€™ äº‹ä»¶æ³¨å†Œç›‘å¬å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myEmitter = <span class="keyword">new</span> MyEmitter();</span><br><span class="line">myEmitter.on(<span class="string">'error'</span>, (err) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'é”™è¯¯ä¿¡æ¯'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">myEmitter.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'é”™è¯¯'</span>));</span><br><span class="line"><span class="comment">// æ‰“å°: é”™è¯¯ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h2 id="Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„"><a href="#Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„" class="headerlink" title="Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„"></a>Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„</h2><p>åˆ›å»ºä¸€ä¸ª input.txt ,æ–‡ä»¶å†…å®¹å¦‚ï¼š<code>www.runoob.com</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜»å¡</span></span><br><span class="line"><span class="comment">// åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œå®Œç¨‹åº</span></span><br><span class="line"><span class="keyword">const</span> getData = fs.readFileSync(<span class="string">'test/input.txt'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getData.toString())</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'é˜»å¡ç¨‹åºè¿è¡Œç»“æŸ'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éé˜»å¡</span></span><br><span class="line"><span class="comment">// ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½</span></span><br><span class="line">fs.readFile(<span class="string">'test/input.txt'</span>, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.error(err)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'éé˜»å¡ç¨‹åºè¿è¡Œç»“æŸ'</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡å‘ç”Ÿé”™è¯¯ï¼ŒreadFileSync æˆ–è€… readFile è·³è¿‡ err å¯¹è±¡çš„è¾“å‡ºï¼Œæ–‡ä»¶å†…å®¹å°±é€šè¿‡å›è°ƒå‡½æ•°è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">www.runoob.com</span><br><span class="line">é˜»å¡ç¨‹åºè¿è¡Œç»“æŸ</span><br><span class="line">éé˜»å¡ç¨‹åºè¿è¡Œç»“æŸ</span><br><span class="line">www.runoob.com</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ é™¤ input.txt æ–‡ä»¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; [Error: ENOENT: no such file or directory, open <span class="string">'input.txt'</span>] errno: -2, code: <span class="string">'ENOENT'</span>, syscall: <span class="string">'open'</span>, path: <span class="string">'input.txt'</span> &#125;</span><br></pre></td></tr></table></figure><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li>èœé¸Ÿæ•™ç¨‹ä¹‹ <a href="https://www.runoob.com/nodejs/nodejs-event.html" target="_blank" rel="noopener">Node.js å­¦ä¹ </a></li><li>å®˜æ–¹æ–‡æ¡£ä¹‹ <a href="http://nodejs.cn/api/events.html" target="_blank" rel="noopener">eventsï¼ˆäº‹ä»¶è§¦å‘å™¨ï¼‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejsç³»åˆ—ä¹‹HTTP</title>
      <link href="/2019/06/14/node-http/"/>
      <url>/2019/06/14/node-http/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ç§ Web åè®®ï¼Œå±äº TCP ä¸Šå±‚çš„åè®®ã€‚</p></blockquote><p>HTTP æ¨¡å—å¼ Node çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸»è¦æä¾›äº†ä¸€ç³»åˆ—ç”¨äºç½‘ç»œä¼ è¾“çš„ APIã€‚</p><a id="more"></a><p>HTTP æ¶ˆæ¯å¤´å¦‚ä¸‹æ‰€ç¤º(é”®æ˜¯å°å†™çš„ï¼Œå€¼ä¸èƒ½è¢«ä¿®æ”¹)ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"content-length"</span>: <span class="string">"123"</span>,</span><br><span class="line">  <span class="attr">"content-type"</span>: <span class="string">"text/plain"</span>,</span><br><span class="line">  <span class="attr">"connection"</span>: <span class="string">"keep-alive"</span>,</span><br><span class="line">  <span class="attr">"host"</span>: <span class="string">"mysite.com"</span>,</span><br><span class="line">  <span class="attr">"accept"</span>: <span class="string">"*/*"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»º-HTTP-æœåŠ¡å™¨"><a href="#åˆ›å»º-HTTP-æœåŠ¡å™¨" class="headerlink" title="åˆ›å»º HTTP æœåŠ¡å™¨"></a>åˆ›å»º HTTP æœåŠ¡å™¨</h2><p>ä½¿ç”¨ NodeJS å†…ç½®çš„ http æ¨¡å—ç®€å•å®ç°ä¸€ä¸ª HTTP æœåŠ¡å™¨:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125;);</span><br><span class="line">    response.end(<span class="string">"Hello World!"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºåˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨å¹¶ç›‘å¬ 3000 ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥ç«¯å£<code>http://127.0.0.1:3000/</code>å°±èƒ½å¤Ÿçœ‹åˆ°æ•ˆæœã€‚</p><p>ä½¿ç”¨ createServer åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª http.server ç±»çš„å®ä¾‹ã€‚</p><p>createServer æ–¹æ³•åŒ…å«äº†ä¸€ä¸ªåŒ¿åçš„å›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•° requestï¼Œresponseï¼Œå®ƒä»¬æ˜¯ IncomingMessage å’Œ ServerResponse çš„å®ä¾‹ã€‚</p><p>åˆ†åˆ«è¡¨ç¤º HTTP çš„ request å’Œ response å¯¹è±¡ï¼Œå½“æœåŠ¡å™¨åˆ›å»ºå®Œæˆåï¼ŒNode è¿›ç¨‹å¼€å§‹å¾ªç¯ç›‘å¬ 3000 ç«¯å£ã€‚</p><p>http.server ç±»å®šä¹‰äº†ä¸€ç³»åˆ—çš„äº‹ä»¶ï¼Œå¦‚ connection å’Œ request äº‹ä»¶ã€‚</p><h2 id="å¤„ç†-HTTP-è¯·æ±‚"><a href="#å¤„ç†-HTTP-è¯·æ±‚" class="headerlink" title="å¤„ç† HTTP è¯·æ±‚"></a>å¤„ç† HTTP è¯·æ±‚</h2><h3 id="methodï¼ŒURL-å’Œ-header"><a href="#methodï¼ŒURL-å’Œ-header" class="headerlink" title="methodï¼ŒURL å’Œ header"></a>methodï¼ŒURL å’Œ header</h3><p>Node å°†ç›¸å…³çš„ä¿¡æ¯å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ˆrequestï¼‰ä¸­ï¼Œè¯¥å¯¹è±¡æ˜¯ IncomingMessage çš„å®ä¾‹ã€‚</p><p>è·å– methodã€URLï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> method = req.method;</span><br><span class="line"><span class="keyword">const</span> url = req.url;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚è®¿é—®<code>http://127.0.0.1:8000/index.html?name=tao</code>ï¼Œå°±ä¼šè¾“å‡ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"method"</span>: <span class="string">"GET"</span>,</span><br><span class="line">  <span class="attr">"url"</span>: <span class="string">"/index.html?name=tao"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>URL çš„å€¼ä¸ºå»é™¤ç½‘ç«™æœåŠ¡å™¨åœ°å€ä¹‹å¤–çš„å®Œæ•´å€¼ã€‚</p><h3 id="header"><a href="#header" class="headerlink" title="header"></a>header</h3><p>è·å– HTTP header ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> headers = req.headers;</span><br><span class="line"><span class="keyword">const</span> userAgent = headers[<span class="string">"user-agent"</span>];</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"headers"</span>: &#123;</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"127.0.0.1:8000"</span>,</span><br><span class="line">    <span class="attr">"user-agent"</span>: <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:68.0) Gecko/20100101 Firefox/68.0"</span>,</span><br><span class="line">    <span class="attr">"accept"</span>: <span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"</span>,</span><br><span class="line">    <span class="attr">"accept-language"</span>: <span class="string">"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"</span>,</span><br><span class="line">    <span class="attr">"accept-encoding"</span>: <span class="string">"gzip, deflate"</span>,</span><br><span class="line">    <span class="attr">"connection"</span>: <span class="string">"keep-alive"</span>,</span><br><span class="line">    <span class="attr">"upgrade-insecure-requests"</span>: <span class="string">"1"</span>,</span><br><span class="line">    <span class="attr">"cache-control"</span>: <span class="string">"max-age=0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"userAgent"</span>: <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:68.0) Gecko/20100101 Firefox/68.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>header æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå¯ä»¥å¯¹å±æ€§åè¿›è¡Œå•ç‹¬ç´¢å¼•ã€‚</p><h3 id="request-body"><a href="#request-body" class="headerlink" title="request body"></a>request body</h3><p>Node ä½¿ç”¨ stream å¤„ç† HTTP çš„è¯·æ±‚ä½“ï¼Œå¹¶ä¸”æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ï¼šdata å’Œ endã€‚</p><p>è·å–å®Œæ•´çš„ HTTP å†…å®¹ä½“ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> body = [];</span><br><span class="line"></span><br><span class="line">request.on(<span class="string">"data"</span>, chunk =&gt; &#123;</span><br><span class="line">  body.push(chunk);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">request.on(<span class="string">"end"</span>, () =&gt; &#123;</span><br><span class="line">  body = Buffer.concat(body).toString();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Response-å¯¹è±¡"><a href="#Response-å¯¹è±¡" class="headerlink" title="Response å¯¹è±¡"></a>Response å¯¹è±¡</h2><h2 id="get-post-è¯·æ±‚"><a href="#get-post-è¯·æ±‚" class="headerlink" title="get/post è¯·æ±‚"></a>get/post è¯·æ±‚</h2><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬æ¥ç»„ç»‡ä¸€ä¸ªç®€æ˜“çš„ getã€post è¯·æ±‚å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> method = req.method;</span><br><span class="line">    <span class="keyword">const</span> url = req.url;</span><br><span class="line">    <span class="keyword">const</span> path = url.split(<span class="string">"?"</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> query = querystring.parse(url.split(<span class="string">"?"</span>)[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">const</span> headers = req.headers;</span><br><span class="line">    <span class="keyword">const</span> userAgent = headers[<span class="string">"user-agent"</span>];</span><br><span class="line">    <span class="keyword">const</span> resData = &#123;</span><br><span class="line">      method,</span><br><span class="line">      url,</span><br><span class="line">      path,</span><br><span class="line">      query,</span><br><span class="line">      headers,</span><br><span class="line">      userAgent</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    res.setHeader(<span class="string">"Content-type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">"GET"</span>) &#123;</span><br><span class="line">      res.end(<span class="built_in">JSON</span>.stringify(resData));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">"POST"</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> postData = [];</span><br><span class="line"></span><br><span class="line">      req.on(<span class="string">"data"</span>, chunk =&gt; &#123;</span><br><span class="line">        postData.push(chunk);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      req.on(<span class="string">"end"</span>, () =&gt; &#123;</span><br><span class="line">        resData.postData = Buffer.concat(postData).toString();</span><br><span class="line">        res.end(<span class="built_in">JSON</span>.stringify(resData));</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚<code>POST</code>è¯·æ±‚ <code>http://127.0.0.1:8000/api/blog?ip=2</code>ï¼Œç„¶åä½¿ç”¨ Postman å·¥å…·æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"method"</span>: <span class="string">"POST"</span>,</span><br><span class="line">  <span class="attr">"url"</span>: <span class="string">"/api/blog?ip=2"</span>,</span><br><span class="line">  <span class="attr">"path"</span>: <span class="string">"/api/blog"</span>,</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"ip"</span>: <span class="string">"2"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"headers"</span>: &#123;</span><br><span class="line">    <span class="attr">"content-type"</span>: <span class="string">"application/json"</span>,</span><br><span class="line">    <span class="attr">"cache-control"</span>: <span class="string">"no-cache"</span>,</span><br><span class="line">    <span class="attr">"postman-token"</span>: <span class="string">"9e6cb382-8551-4a3f-b352-0581bb377cbc"</span>,</span><br><span class="line">    <span class="attr">"user-agent"</span>: <span class="string">"PostmanRuntime/7.6.0"</span>,</span><br><span class="line">    <span class="attr">"accept"</span>: <span class="string">"*/*"</span>,</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"127.0.0.1:8000"</span>,</span><br><span class="line">    <span class="attr">"accept-encoding"</span>: <span class="string">"gzip, deflate"</span>,</span><br><span class="line">    <span class="attr">"content-length"</span>: <span class="string">"62"</span>,</span><br><span class="line">    <span class="attr">"connection"</span>: <span class="string">"keep-alive"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"userAgent"</span>: <span class="string">"PostmanRuntime/7.6.0"</span>,</span><br><span class="line">  <span class="attr">"postData"</span>: <span class="string">"&#123;\n\t\"title\": \"ä½ è¯´ä»€ä¹ˆ\",\n\t\"content\": \"æˆ‘çŸ¥é“ä½ çŸ¥é“\"\n&#125;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><p><a href="http://nodejs.cn/api/http.html" target="_blank" rel="noopener">http</a> æ¨¡å—æä¾›ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li>ä½œä¸ºæœåŠ¡ç«¯ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œç›‘å¬ HTTP å®¢æˆ·ç«¯è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚</li><li>ä½œä¸ºå®¢æˆ·ç«¯ä½¿ç”¨æ—¶ï¼Œå‘èµ·ä¸€ä¸ª HTTP å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å“åº”ã€‚</li></ol><h3 id="ä¸€ä¸ªç®€å•çš„-Web-æœåŠ¡å™¨"><a href="#ä¸€ä¸ªç®€å•çš„-Web-æœåŠ¡å™¨" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨"></a>ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"/"</span> == req.url) &#123;</span><br><span class="line">      res.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/html"</span> &#125;);</span><br><span class="line">      res.end(</span><br><span class="line">        [</span><br><span class="line">          <span class="string">'&lt;form method="POST" action="/url"&gt;'</span>,</span><br><span class="line">          <span class="string">"&lt;h1&gt;My Form&lt;/h1&gt;"</span>,</span><br><span class="line">          <span class="string">"&lt;fieldset&gt;"</span>,</span><br><span class="line">          <span class="string">"&lt;label&gt;Personal information&lt;/label&gt;"</span>,</span><br><span class="line">          <span class="string">"&lt;p&gt;What is your name?&lt;/p&gt;"</span>,</span><br><span class="line">          <span class="string">'&lt;input type="text" name="name" /&gt;'</span>,</span><br><span class="line">          <span class="string">"&lt;p&gt;&lt;button&gt;Submit&lt;/button&gt;&lt;/p&gt;"</span>,</span><br><span class="line">          <span class="string">"&lt;/fieldset&gt;"</span>,</span><br><span class="line">          <span class="string">"&lt;/form&gt;"</span></span><br><span class="line">        ].join(<span class="string">""</span>)</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"/url"</span> == req.url &amp;&amp; <span class="string">"POST"</span> == req.method) &#123;</span><br><span class="line">      <span class="keyword">var</span> body = <span class="string">""</span>;</span><br><span class="line">      req.on(<span class="string">"data"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">        body += chunk;</span><br><span class="line">      &#125;);</span><br><span class="line">      req.on(<span class="string">"end"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/html"</span> &#125;);</span><br><span class="line">        res.end(</span><br><span class="line">          <span class="string">"&lt;p&gt;Content-type: "</span> +</span><br><span class="line">            req.headers[<span class="string">"content-type"</span>] +</span><br><span class="line">            <span class="string">"&lt;/p&gt;"</span> +</span><br><span class="line">            <span class="string">"&lt;p&gt;Data: "</span> +</span><br><span class="line">            qs.parse(body).name +</span><br><span class="line">            <span class="string">"&lt;/p&gt;"</span></span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.writeHead(<span class="number">404</span>);</span><br><span class="line">      res.end(<span class="string">"Not Found."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ª-Twitter-Web-å®¢æˆ·ç«¯"><a href="#ä¸€ä¸ª-Twitter-Web-å®¢æˆ·ç«¯" class="headerlink" title="ä¸€ä¸ª Twitter Web å®¢æˆ·ç«¯"></a>ä¸€ä¸ª Twitter Web å®¢æˆ·ç«¯</h3><p>åˆ›å»ºæœåŠ¡å™¨ï¼šapp.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body = <span class="string">""</span>;</span><br><span class="line">    req.on(<span class="string">"data"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">      body += chunk;</span><br><span class="line">    &#125;);</span><br><span class="line">    req.on(<span class="string">"end"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      res.writeHead(<span class="number">200</span>);</span><br><span class="line">      res.end(<span class="string">"Done"</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"\n got name \033[90m"</span> + qs.parse(body).name + <span class="string">"\033[39m\n"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¢æˆ·ç«¯ï¼šclient.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params">theName</span>) </span>&#123;</span><br><span class="line">  http</span><br><span class="line">    .request(</span><br><span class="line">      &#123;</span><br><span class="line">        host: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">        port: <span class="number">3000</span>,</span><br><span class="line">        url: <span class="string">"/"</span>,</span><br><span class="line">        method: <span class="string">"POST"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> body = <span class="string">""</span>;</span><br><span class="line">        res.setEncoding(<span class="string">"utf8"</span>);</span><br><span class="line">        res.on(<span class="string">"data"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">          body += chunk;</span><br><span class="line">        &#125;);</span><br><span class="line">        res.on(<span class="string">"end"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"\n  \033[90m request complete! \033[39m"</span>);</span><br><span class="line">          process.stdout.write(<span class="string">"\n your name: "</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    .end(qs.stringify(&#123; <span class="attr">name</span>: theName &#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">process.stdout.write(<span class="string">"\n your name: "</span>);</span><br><span class="line">process.stdin.resume();</span><br><span class="line">process.stdin.setEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">process.stdin.on(<span class="string">"data"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  send(name.replace(<span class="string">"\n"</span>, <span class="string">""</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¯åŠ¨<code>node app.js</code>ï¼Œå†å¯åŠ¨<code>node client.js</code></p><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTPS æ˜¯åŸºäº TLS/SSL çš„ HTTP åè®®ã€‚åœ¨ Node.js ä¸­ï¼Œä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—å®ç°ã€‚</p><p>HTTPS æ¨¡å—ä¸ HTTP æ¨¡å—æä¸ºç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº HTTPS æ¨¡å—éœ€è¦é¢å¤–å¤„ç† SSL è¯ä¹¦ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">"https"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  key: fs.readFileSync(<span class="string">"test/fixtures/keys/agent2-key.pem"</span>),</span><br><span class="line">  cert: fs.readFileSync(<span class="string">"test/fixtures/keys/agent2-cert.pem"</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">https</span><br><span class="line">  .createServer(options, (req, res) =&gt; &#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>);</span><br><span class="line">    res.end(<span class="string">"hello world\n"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><p>å¤„ç† HTTP è¯·æ±‚æ—¶ url æ¨¡å—ä½¿ç”¨ç‡è¶…é«˜ï¼Œå› ä¸ºè¯¥æ¨¡å—å…è®¸è§£æ URLã€ç”Ÿæˆ URLï¼Œä»¥åŠæ‹¼æ¥ URLã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå®Œæ•´çš„ URL çš„å„ç»„æˆéƒ¨åˆ†ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; require(<span class="string">'url'</span>).parse(<span class="string">'http://user:pass@host.com:8080/p/a/t/h?query=string#hash'</span>);</span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="string">'http:'</span>,</span><br><span class="line">  slashes: <span class="literal">true</span>,</span><br><span class="line">  auth: <span class="string">'user:pass'</span>,</span><br><span class="line">  host: <span class="string">'host.com:8080'</span>,</span><br><span class="line">  port: <span class="string">'8080'</span>,</span><br><span class="line">  hostname: <span class="string">'host.com'</span>,</span><br><span class="line">  <span class="built_in">hash</span>: <span class="string">'#hash'</span>,</span><br><span class="line">  search: <span class="string">'?query=string'</span>,</span><br><span class="line">  query: <span class="string">'query=string'</span>,</span><br><span class="line">  pathname: <span class="string">'/p/a/t/h'</span>,</span><br><span class="line">  path: <span class="string">'/p/a/t/h?query=string'</span>,</span><br><span class="line">  href: <span class="string">'http://user:pass@host.com:8080/p/a/t/h?query=string#hash'</span>&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¸å®Œæ•´çš„ urlï¼Œä¹Ÿå¯ä»¥è§£æï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">"url"</span>);</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> body = [];</span><br><span class="line">    <span class="keyword">const</span> tmp = request.url; <span class="comment">// /foo/bar?a=b</span></span><br><span class="line"></span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"url-parse"</span>, url.parse(tmp));</span><br><span class="line"></span><br><span class="line">    response.end(<span class="string">"Hello World"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"protocol"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"slashes"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"auth"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"host"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"port"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"hostname"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"hash"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"search"</span>: <span class="string">"?a=b"</span>,</span><br><span class="line">  <span class="attr">"query"</span>: <span class="string">"a=b"</span>,</span><br><span class="line">  <span class="attr">"pathname"</span>: <span class="string">"/foo/bar"</span>,</span><br><span class="line">  <span class="attr">"path"</span>: <span class="string">"/foo/bar?a=b"</span>,</span><br><span class="line">  <span class="attr">"href"</span>: <span class="string">"/foo/bar?a=b"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>format æ–¹æ³•å…è®¸å°†ä¸€ä¸ª URL å¯¹è±¡è½¬æ¢ä¸º URL å­—ç¬¦ä¸²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> urlFormat = url.format(&#123;</span><br><span class="line">  protocol: <span class="string">"http:"</span>,</span><br><span class="line">  host: <span class="string">"www.example.com"</span>,</span><br><span class="line">  pathname: <span class="string">"/p/a/t/h"</span>,</span><br><span class="line">  search: <span class="string">"query=string"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(&#123; urlFormat &#125;); <span class="comment">// &#123; urlFormat: 'http://www.example.com/p/a/t/h?query=string' &#125;</span></span><br></pre></td></tr></table></figure><h2 id="Query-String"><a href="#Query-String" class="headerlink" title="Query String"></a>Query String</h2><p><a href="http://nodejs.org/api/querystring.html" target="_blank" rel="noopener">querystring</a> æ¨¡å—ç”¨äºå®ç° URL å‚æ•°å­—ç¬¦ä¸²ä¸å‚æ•°å¯¹è±¡çš„äº’ç›¸è½¬æ¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">querystring.parse(<span class="string">"foo=bar&amp;baz=qux&amp;baz=quux&amp;corge"</span>);</span><br><span class="line"><span class="comment">// &#123; foo: 'bar', baz: [ 'qux', 'quux' ], corge: '' &#125;</span></span><br><span class="line"></span><br><span class="line">querystring.stringify(&#123; <span class="attr">foo</span>: <span class="string">"bar"</span>, <span class="attr">baz</span>: [<span class="string">"qux"</span>, <span class="string">"quux"</span>], <span class="attr">corge</span>: <span class="string">""</span> &#125;);</span><br><span class="line"><span class="comment">// 'foo=bar&amp;baz=qux&amp;baz=quux&amp;corge='</span></span><br></pre></td></tr></table></figure><h2 id="Zlib"><a href="#Zlib" class="headerlink" title="Zlib"></a>Zlib</h2><p>zlib æ¨¡å—æä¾›äº†æ•°æ®å‹ç¼©å’Œè§£å‹çš„åŠŸèƒ½ã€‚å½“æˆ‘ä»¬å¤„ç† HTTP è¯·æ±‚å’Œå“åº”æ—¶ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—ã€‚</p><h2 id="Net"><a href="#Net" class="headerlink" title="Net"></a>Net</h2><p>net æ¨¡å—å¯ç”¨äºåˆ›å»º Socket æœåŠ¡å™¨æˆ– Socket å®¢æˆ·ç«¯ã€‚</p><p>ç”±äº Socket åœ¨å‰ç«¯é¢†åŸŸçš„ä½¿ç”¨èŒƒå›´è¿˜ä¸æ˜¯å¾ˆå¹¿ï¼Œè¿™é‡Œå…ˆä¸æ¶‰åŠåˆ° WebSocket çš„ä»‹ç»ï¼Œä»…ä»…ç®€å•æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ä» Socket å±‚é¢æ¥å®ç° HTTP è¯·æ±‚å’Œå“åº”ã€‚</p><h2 id="é—®é¢˜è§£ç­”"><a href="#é—®é¢˜è§£ç­”" class="headerlink" title="é—®é¢˜è§£ç­”"></a>é—®é¢˜è§£ç­”</h2><p>ä½¿ç”¨ NodeJS æ“ä½œç½‘ç»œï¼Œç‰¹åˆ«æ˜¯æ“ä½œ HTTP è¯·æ±‚å’Œå“åº”æ—¶ä¼šé‡åˆ°ä¸€äº›æƒŠå–œï¼Œè¿™é‡Œå¯¹ä¸€äº›å¸¸è§é—®é¢˜åšè§£ç­”ã€‚</p><ul><li>ä¸ºä»€ä¹ˆé€šè¿‡ headers å¯¹è±¡è®¿é—®åˆ°çš„ HTTP è¯·æ±‚å¤´æˆ–å“åº”å¤´å­—æ®µä¸æ˜¯é©¼å³°çš„ï¼Ÿ</li></ul><p>ä»è§„èŒƒä¸Šè®²ï¼ŒHTTP è¯·æ±‚å¤´å’Œå“åº”å¤´å­—æ®µéƒ½åº”è¯¥æ˜¯é©¼å³°çš„ã€‚ä½†ç°å®æ˜¯æ®‹é…·çš„ï¼Œä¸æ˜¯æ¯ä¸ª HTTP æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ç¨‹åºéƒ½ä¸¥æ ¼éµå¾ªè§„èŒƒï¼Œæ‰€ä»¥ NodeJS åœ¨å¤„ç†ä»åˆ«çš„å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯æ”¶åˆ°çš„å¤´å­—æ®µæ—¶ï¼Œéƒ½ç»Ÿä¸€åœ°è½¬æ¢ä¸ºäº†å°å†™å­—æ¯æ ¼å¼ï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼æ¥è®¿é—®å¤´å­—æ®µï¼Œä¾‹å¦‚<code>headers[&#39;content-length&#39;]</code>ã€‚</p><ul><li>ä¸ºä»€ä¹ˆ http æ¨¡å—åˆ›å»ºçš„ HTTP æœåŠ¡å™¨è¿”å›çš„å“åº”æ˜¯ chunked ä¼ è¾“æ–¹å¼çš„ï¼Ÿ</li></ul><p>å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>.writeHead</code>æ–¹æ³•å†™å…¥å“åº”å¤´åï¼Œå…è®¸ä½¿ç”¨<code>.write</code>æ–¹æ³•å†™å…¥ä»»æ„é•¿åº¦çš„å“åº”ä½“æ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>.end</code>æ–¹æ³•ç»“æŸä¸€ä¸ªå“åº”ã€‚ç”±äºå“åº”ä½“æ•°æ®é•¿åº¦ä¸ç¡®å®šï¼Œå› æ­¤ NodeJS è‡ªåŠ¨åœ¨å“åº”å¤´é‡Œæ·»åŠ äº†<code>Transfer-Encoding: chunked</code>å­—æ®µï¼Œå¹¶é‡‡ç”¨ chunked ä¼ è¾“æ–¹å¼ã€‚ä½†æ˜¯å½“å“åº”ä½“æ•°æ®é•¿åº¦ç¡®å®šæ—¶ï¼Œå¯ä½¿ç”¨<code>.writeHead</code>æ–¹æ³•åœ¨å“åº”å¤´é‡ŒåŠ ä¸Š<code>Content-Length</code>å­—æ®µï¼Œè¿™æ ·åšä¹‹å NodeJS å°±ä¸ä¼šè‡ªåŠ¨æ·»åŠ <code>Transfer-Encoding</code>å­—æ®µå’Œä½¿ç”¨ chunked ä¼ è¾“æ–¹å¼ã€‚</p><ul><li>ä¸ºä»€ä¹ˆä½¿ç”¨ http æ¨¡å—å‘èµ· HTTP å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‘ç”Ÿ socket hang up é”™è¯¯ï¼Ÿ</li></ul><p>ç­”ï¼š å‘èµ·å®¢æˆ·ç«¯ HTTP è¯·æ±‚å‰éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ã€‚http æ¨¡å—æä¾›äº†ä¸€ä¸ªå…¨å±€å®¢æˆ·ç«¯<code>http.globalAgent</code>ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨<code>.request</code>æˆ–<code>.get</code>æ–¹æ³•æ—¶ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºå®¢æˆ·ç«¯ã€‚ä½†æ˜¯å…¨å±€å®¢æˆ·ç«¯é»˜è®¤åªå…è®¸ 5 ä¸ªå¹¶å‘ Socket è¿æ¥ï¼Œå½“æŸä¸€ä¸ªæ—¶åˆ» HTTP å®¢æˆ·ç«¯è¯·æ±‚åˆ›å»ºè¿‡å¤šï¼Œè¶…è¿‡è¿™ä¸ªæ•°å­—æ—¶ï¼Œå°±ä¼šå‘ç”Ÿ<code>socket hang up</code>é”™è¯¯ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡<code>http.globalAgent.maxSockets</code>å±æ€§æŠŠè¿™ä¸ªæ•°å­—æ”¹å¤§äº›å³å¯ã€‚å¦å¤–ï¼Œhttps æ¨¡å—é‡åˆ°è¿™ä¸ªé—®é¢˜æ—¶ä¹Ÿä¸€æ ·é€šè¿‡<code>https.globalAgent.maxSockets</code>å±æ€§æ¥å¤„ç†ã€‚</p><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="http://nqdeng.github.io/7-days-nodejs/#1.1" target="_blank" rel="noopener">7-days-nodejs</a> - æ–‡ç« </li><li>ã€Šäº†ä¸èµ·çš„ Node.jsï¼šå°† JavaScript è¿›è¡Œåˆ°åº•ã€‹- ä¹¦ç±</li><li>ã€Šæ–°æ—¶æœŸçš„ Node.js å…¥é—¨ã€‹- ä¹¦ç±</li><li><a href="https://coding.imooc.com/class/320.html" target="_blank" rel="noopener">Node.js ä»é›¶å¼€å‘ Web Server åšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡</a> - è§†é¢‘</li><li><a href="http://nodejs.cn/api/http.html" target="_blank" rel="noopener">httpï¼ˆHTTPï¼‰</a> - å®˜æ–¹æ–‡æ¡£</li></ul>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejsç³»åˆ—ä¹‹TCP</title>
      <link href="/2019/06/12/node-tcp/"/>
      <url>/2019/06/12/node-tcp/</url>
      
        <content type="html"><![CDATA[<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰æ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„åè®®ï¼Œä¿è¯äº†ä¸¤å°è®¡ç®—æœºä¹‹é—´æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œé¡ºåºã€‚</p><p>Node HTTP æœåŠ¡å™¨æ˜¯æ„å»ºäº Node TCP æœåŠ¡å™¨ä¹‹ä¸Šçš„ã€‚</p><a id="more"></a><p>TCP çš„ç‰¹æ€§ï¼š</p><ul><li>é¢å‘è¿æ¥çš„é€šä¿¡å’Œä¿è¯é¡ºåºçš„ä¼ é€’</li><li>é¢å‘å­—èŠ‚ - ASCIIã€Unicode</li><li>å¯é æ€§</li><li>æµæ§åˆ¶</li><li>æ‹¥å µæ§åˆ¶ - Qos</li></ul><p>Socket æ˜¯å¯¹ TCP åè®®çš„ä¸€ç§å°è£…æ–¹å¼ï¼ŒSocketæœ¬èº«ä¸æ˜¯åè®®ï¼Œè€Œæ˜¯ä¸€ä¸ªç¼–ç¨‹æ¥å£ã€‚</p><h2 id="telnetå…è®¸åœ¨ç»ˆç«¯æ‰‹åŠ¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥"><a href="#telnetå…è®¸åœ¨ç»ˆç«¯æ‰‹åŠ¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥" class="headerlink" title="telnetå…è®¸åœ¨ç»ˆç«¯æ‰‹åŠ¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥"></a>telnetå…è®¸åœ¨ç»ˆç«¯æ‰‹åŠ¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥</h2><h4 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h4><p>ä½¿ç”¨ Node.js å†™ä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬ 3000 ç«¯å£ï¼Œç„¶å <code>node app.js</code> è¿è¡Œä¸‹æ˜¯å¦æ­£ç¡®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'http'</span>).createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.writeHead(<span class="number">200</span>);</span><br><span class="line">  res.end(<span class="string">'Hello world'</span>);</span><br><span class="line">&#125;).listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure></p><h4 id="TCPè¿æ¥"><a href="#TCPè¿æ¥" class="headerlink" title="TCPè¿æ¥"></a>TCPè¿æ¥</h4><p>ä½¿ç”¨<code>telnet 127.0.0.1 3000</code>å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œç„¶åè¾“å…¥<code>GET / HTTP/1.1</code>ï¼Œå›è½¦ä¸¤æ¬¡ï¼Œç„¶åæœåŠ¡å™¨ç«¯å°±å‡ºç°äº†å“åº”ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">~ telnet 127.0.0.1 3000</span><br><span class="line"></span><br><span class="line">Trying 127.0.0.1...</span><br><span class="line">Connected to localhost.</span><br><span class="line">Escape character is <span class="string">'^]'</span>.</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Sun, 15 Sep 2019 06:20:43 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line"></span><br><span class="line">b</span><br><span class="line">Hello world</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">Connection closed by foreign host.</span><br></pre></td></tr></table></figure></p><p>æ€»ç»“ï¼š</p><ul><li>æˆåŠŸå»ºç«‹äº†ä¸€ä¸ª TCP è¿æ¥</li><li>åˆ›å»ºäº†ä¸€ä¸ªHTTPè¯·æ±‚</li><li>æ¥æ”¶åˆ°ä¸€ä¸ªHTTPå“åº”</li><li>åˆ°è¾¾çš„æ•°æ®å’Œåœ¨Node.jsä¸­å†™çš„ä¸€æ ·</li></ul><h2 id="åŸºäºTCPçš„èŠå¤©ç¨‹åº"><a href="#åŸºäºTCPçš„èŠå¤©ç¨‹åº" class="headerlink" title="åŸºäºTCPçš„èŠå¤©ç¨‹åº"></a>åŸºäºTCPçš„èŠå¤©ç¨‹åº</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">'net'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>,</span><br><span class="line">  users = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = net.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">conn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nickname;</span><br><span class="line"></span><br><span class="line">  conn.setEncoding(<span class="string">'utf8'</span>)</span><br><span class="line">  conn.write(</span><br><span class="line">    <span class="string">'\n &gt; æ¬¢è¿è®¿é—® \033[92mNode-Chat\033[39m!'</span></span><br><span class="line">  + <span class="string">'\n &gt; '</span> + count + <span class="string">'ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥'</span></span><br><span class="line">  + <span class="string">'\n &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼š'</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  count++</span><br><span class="line"></span><br><span class="line">  conn.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    data = data.replace(<span class="string">'\r\n'</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!nickname) &#123;</span><br><span class="line">      <span class="keyword">if</span>(users[data]) &#123;</span><br><span class="line">        conn.write(<span class="string">'\033[93m&gt; æ˜µç§°å·²è¢«ä½¿ç”¨ï¼Œè¯·é‡è¯•ï¼š\033[39m '</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        nickname = data</span><br><span class="line">        users[nickname] = conn</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'users: '</span>, conn)</span><br><span class="line">        broadcast(<span class="string">'\033[90m &gt; '</span> + nickname + <span class="string">' ä¸Šçº¿äº†\033[39m\n'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      broadcast(<span class="string">'\033[96m &gt; '</span> + nickname + <span class="string">':\033[39m '</span> + data + <span class="string">'\n'</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  conn.on(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count--</span><br><span class="line">    <span class="keyword">delete</span> users[nickname]</span><br><span class="line">    broadcast(<span class="string">'\033[90m &gt; '</span> + nickname + <span class="string">' ä¸‹çº¿äº†\033[39m\n'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// å‘æ¯ä¸€ä¸ªç”¨æˆ·å‘é€ä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">broadcast</span> (<span class="params">msg, exceptMyself</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> users) &#123;</span><br><span class="line">      <span class="keyword">if</span>(!exceptMyself || i != nickname) &#123;</span><br><span class="line">        users[i].write(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'\033[96m  server listening on *: 3000\033[39m'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å•ç‹¬è¿è¡Œï¼š<code>telnet 127.0.0.1 3000</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">~ telnet 127.0.0.1 3000</span><br><span class="line"></span><br><span class="line">Trying 127.0.0.1...</span><br><span class="line">Connected to localhost.</span><br><span class="line">Escape character is <span class="string">'^]'</span>.</span><br><span class="line"></span><br><span class="line"> &gt; æ¬¢è¿è®¿é—® Node-Chat!</span><br><span class="line"> &gt; 0ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥</span><br><span class="line"> &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼šXiaoMing</span><br><span class="line"> &gt; XiaoMing ä¸Šçº¿äº†</span><br><span class="line">Hi </span><br><span class="line"> &gt; HanMeimei ä¸Šçº¿äº†</span><br><span class="line"> &gt; HanMeimei: Hello</span><br><span class="line"> &gt; LiSi ä¸Šçº¿äº†</span><br><span class="line"> &gt; LiSi: Ni hao ma?</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒä½ç”¨æˆ·</span></span><br><span class="line"> &gt; æ¬¢è¿è®¿é—® Node-Chat!</span><br><span class="line"> &gt; 1ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥</span><br><span class="line"> &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼šHanMeimei</span><br><span class="line"> &gt; HanMeimei ä¸Šçº¿äº†</span><br><span class="line">Hello</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰ä½ç”¨æˆ·</span></span><br><span class="line"> &gt; æ¬¢è¿è®¿é—® Node-Chat!</span><br><span class="line"> &gt; 2ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥</span><br><span class="line"> &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼šLiSi</span><br><span class="line"> &gt; LiSi ä¸Šçº¿äº†</span><br><span class="line">Ni hao ma?</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejsç³»åˆ—ä¹‹Connect</title>
      <link href="/2019/06/11/node-connect/"/>
      <url>/2019/06/11/node-connect/</url>
      
        <content type="html"><![CDATA[<p>Connect æ˜¯ä¸€ä¸ªåŸºäº HTTP æœåŠ¡å™¨çš„å·¥å…·é›†ï¼Œæˆä¸ºä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰ã€‚</p><p>ä¸­é—´ä»¶ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„ JavaScript å‡½æ•°ã€‚é™¤äº†å¤„ç† req å’Œ res å¯¹è±¡ä¹‹å¤–ï¼Œè¿˜æ¥å—ä¸€ä¸ª next å‡½æ•°æ¥åšæµæ§åˆ¶ã€‚</p><a id="more"></a><h2 id="ä¸€ä¸ªç®€å•çš„ç½‘ç«™"><a href="#ä¸€ä¸ªç®€å•çš„ç½‘ç«™" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ç½‘ç«™"></a>ä¸€ä¸ªç®€å•çš„ç½‘ç«™</h2><p>åˆå§‹åŒ–ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">var</span> connect = <span class="built_in">require</span>(<span class="string">"connect"</span>);</span><br><span class="line"><span class="keyword">var</span> serveStatic = <span class="built_in">require</span>(<span class="string">"serve-static"</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = connect();</span><br><span class="line"></span><br><span class="line">app.use(serveStatic(path.join(__dirname, <span class="string">"public-optimized"</span>)));</span><br><span class="line">app.use(serveStatic(path.join(__dirname, <span class="string">"public"</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// respond to all requests</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.end(<span class="string">"Hello from Connect!\n"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create node.js http server and listen on port</span></span><br><span class="line">http.createServer(app).listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>ä¸­é—´ä»¶çš„ä½¿ç”¨ï¼Œæ¨¡æ‹Ÿç™»å½•ç™»å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">var</span> connect = <span class="built_in">require</span>(<span class="string">"connect"</span>);</span><br><span class="line"><span class="keyword">var</span> morgan = <span class="built_in">require</span>(<span class="string">"morgan"</span>);</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>);</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">"cookie-parser"</span>);</span><br><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">"express-session"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> users = <span class="built_in">require</span>(<span class="string">"./config/users.json"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = connect();</span><br><span class="line"></span><br><span class="line"><span class="comment">// logger</span></span><br><span class="line">app.use(morgan(<span class="string">"dev"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse an HTML body into a string</span></span><br><span class="line">app.use(bodyParser());</span><br><span class="line"></span><br><span class="line">app.use(cookieParser());</span><br><span class="line"></span><br><span class="line">app.use(</span><br><span class="line">  session(&#123;</span><br><span class="line">    secret: <span class="string">"my site secret"</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"/"</span> == req.url &amp;&amp; req.session.logged_in) &#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/html"</span> &#125;);</span><br><span class="line">    res.end(</span><br><span class="line">      <span class="string">`Welcome back, &lt;b&gt;<span class="subst">$&#123;req.session.name&#125;</span>&lt;/b&gt;&lt;a href="/logout"&gt;Logout&lt;/a&gt;`</span></span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"/"</span> == req.url &amp;&amp; <span class="string">"GET"</span> == req.method) &#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/html"</span> &#125;);</span><br><span class="line">    res.end(</span><br><span class="line">      [</span><br><span class="line">        <span class="string">'&lt;form method="POST" action="/login"&gt;'</span>,</span><br><span class="line">        <span class="string">"&lt;h1&gt;Login&lt;/h1&gt;"</span>,</span><br><span class="line">        <span class="string">"&lt;fieldset&gt;"</span>,</span><br><span class="line">        <span class="string">"&lt;label&gt;Please log in&lt;/label&gt;"</span>,</span><br><span class="line">        <span class="string">'Username: &lt;input type="text" name="user" /&gt;&lt;br&gt;'</span>,</span><br><span class="line">        <span class="string">'Password: &lt;input type="password" name="password" /&gt;'</span>,</span><br><span class="line">        <span class="string">"&lt;p&gt;&lt;button&gt;Submit&lt;/button&gt;&lt;/p&gt;"</span>,</span><br><span class="line">        <span class="string">"&lt;/fieldset&gt;"</span>,</span><br><span class="line">        <span class="string">"&lt;/form&gt;"</span></span><br><span class="line">      ].join(<span class="string">""</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"/login"</span> == req.url &amp;&amp; <span class="string">"POST"</span> == req.method) &#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/html"</span> &#125;);</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      !users[req.body.user] ||</span><br><span class="line">      req.body.password != users[req.body.user].password</span><br><span class="line">    ) &#123;</span><br><span class="line">      res.end(<span class="string">'Bad username/password&lt;br&gt;&lt;a href="/"&gt;Back&lt;/a&gt;'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      req.session.logged_in = <span class="literal">true</span>;</span><br><span class="line">      req.session.name = users[req.body.user].name;</span><br><span class="line">      res.end(<span class="string">"Success!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"/logout"</span> == req.url) &#123;</span><br><span class="line">    req.session.logged_in = <span class="literal">false</span>;</span><br><span class="line">    res.writeHead(<span class="number">200</span>);</span><br><span class="line">    res.end(<span class="string">"Logged out!"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create node.js http server and listen on port</span></span><br><span class="line">http.createServer(app).listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å•ä¾‹æ¨¡å¼</title>
      <link href="/2019/05/03/mode-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/05/03/mode-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹</p></blockquote><a id="more"></a><h4 id="å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼"><a href="#å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼" class="headerlink" title="å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼"></a>å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼</h4><p>ç”¨ä¸€ä¸ªå˜é‡æ ‡å¿—å½“å‰æ˜¯å¦å·²ç»ä¸ºæŸä¸ªç±»å‹åˆ›å»ºè¿‡å¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸‹æ¬¡ç›´æ¥è¿”å›ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Singleton = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.instance = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Singleton.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Singleton.getInstance = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.instance) &#123;</span><br><span class="line">    <span class="keyword">this</span>.instance = <span class="keyword">new</span> Singleton(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = Singleton.getInstance(<span class="string">'Tony1'</span>);</span><br><span class="line"><span class="keyword">var</span> b = Singleton.getInstance(<span class="string">'Tony2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a === b); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>Singleton.getInstance</code>æ¥è·å– Singleton ç±»çš„å”¯ä¸€å¯¹è±¡ï¼Œé‡Œè¾¹ä½¿ç”¨äº† new æ¥è·å–ï¼Œå¯¼è‡´äº†è¿™ä¸ªç±»çš„â€œä¸é€æ˜æ€§â€ã€‚</p><h4 id="é€æ˜çš„å•ä¾‹æ¨¡å¼"><a href="#é€æ˜çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="é€æ˜çš„å•ä¾‹æ¨¡å¼"></a>é€æ˜çš„å•ä¾‹æ¨¡å¼</h4><p>åˆ›å»ºä¸€ä¸ªâ€œé€æ˜â€çš„å•ä¾‹ç±»ï¼Œå°±æ˜¯è®©æˆ‘ä»¬ä»è¿™ä¸ªç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å¯ä»¥å’Œä½¿ç”¨å…¶ä»–æ™®é€šç±»ä¸€æ ·ï¼š<code>var aa = new CreateDiv(&#39;Sisi1&#39;);</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CreateDiv = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> instance;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> CreateDiv = <span class="function"><span class="keyword">function</span> (<span class="params">html</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (instance) &#123;</span><br><span class="line">      <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.html = html;</span><br><span class="line">    <span class="keyword">this</span>.init();</span><br><span class="line">    <span class="keyword">return</span> instance = <span class="keyword">this</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  CreateDiv.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    div.innerHTML = <span class="keyword">this</span>.html;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> CreateDiv;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = <span class="keyword">new</span> CreateDiv(<span class="string">'Sisi1'</span>);</span><br><span class="line"><span class="keyword">var</span> bb = <span class="keyword">new</span> CreateDiv(<span class="string">'Sisi2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(aa === bb);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼ŒCreateDiv çš„æ„é€ å‡½æ•°è´Ÿè´£äº†ä¸¤ä»¶äº‹ï¼šåˆ›å»ºå¯¹è±¡å’Œæ‰§è¡Œåˆå§‹åŒ– init æ–¹æ³•ï¼ŒåŠä¿è¯åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CreateDiv = <span class="function"><span class="keyword">function</span> (<span class="params">html</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (instance) &#123;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.html = html;</span><br><span class="line">  <span class="keyword">this</span>.init();</span><br><span class="line">  <span class="keyword">return</span> instance = <span class="keyword">this</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºå¾ˆå¤šçš„divï¼Œè¿™é‡Œçš„ <code>return instance = this;</code> å°±éœ€è¦åˆ æ‰ã€‚</p><h4 id="ç”¨ä»£ç†å®ç°å•ä¾‹æ¨¡å¼"><a href="#ç”¨ä»£ç†å®ç°å•ä¾‹æ¨¡å¼" class="headerlink" title="ç”¨ä»£ç†å®ç°å•ä¾‹æ¨¡å¼"></a>ç”¨ä»£ç†å®ç°å•ä¾‹æ¨¡å¼</h4><p>è¿™æ—¶å€™ï¼Œä¸ºäº†é¿å…ä¸Šé¢ä¸èƒ½å¤ç”¨çš„å°´å°¬ï¼Œé€šè¿‡å¼•å…¥ä»£ç†ç±»çš„æ–¹å¼ï¼ŒæŠŠè´Ÿè´£ç®¡ç†å•ä¾‹çš„é€»è¾‘ç§»äº¤è‡³ä»£ç†ç±»<code>ProxySingletonCreateDiv</code>ï¼Œè¿™æ ·<code>CreateDiv</code>åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CreateDiv = <span class="function"><span class="keyword">function</span> (<span class="params">html</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.html = html;</span><br><span class="line">  <span class="keyword">this</span>.init();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CreateDiv.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  div.innerHTML = <span class="keyword">this</span>.html;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ProxySingletonCreateDiv = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> instance;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">html</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> CreateDiv(html);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = <span class="keyword">new</span> ProxySingletonCreateDiv(<span class="string">'Tony1'</span>);</span><br><span class="line"><span class="keyword">var</span> bb = <span class="keyword">new</span> ProxySingletonCreateDiv(<span class="string">'Tony2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(aa === bb); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="JavaScript-ä¸­çš„å•ä¾‹æ¨¡å¼"><a href="#JavaScript-ä¸­çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="JavaScript ä¸­çš„å•ä¾‹æ¨¡å¼"></a>JavaScript ä¸­çš„å•ä¾‹æ¨¡å¼</h4><p>å•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ï¼šç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®ã€‚</p><ol><li>ä½¿ç”¨å‘½åç©ºé—´</li></ol><p>å¯¹è±¡å­—é¢é‡çš„æ–¹å¼: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> namespace1 = &#123;</span><br><span class="line">  a: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  b: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">namespace1.a(); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>æŠŠaå’Œbéƒ½å®šä¹‰ä¸º namespace1 çš„å±æ€§ï¼Œå‡å°‘äº†å˜é‡å’Œå…¨å±€ä½œç”¨åŸŸæ‰“äº¤é“çš„æœºä¼šï¼Œè¿˜å¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå‘½åç©ºé—´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyApp = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">MyApp.namespace = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> parts = name.split(<span class="string">'.'</span>);</span><br><span class="line">  <span class="keyword">var</span> current = MyApp;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> parts) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!current[parts[i]]) &#123;</span><br><span class="line">      current[parts[i]] = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    current = current[parts[i]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyApp.namespace(<span class="string">'event'</span>);</span><br><span class="line">MyApp.namespace(<span class="string">'dom.style'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(MyApp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äºï¼š</span></span><br><span class="line"><span class="keyword">var</span> MyApp = &#123;</span><br><span class="line">  event: &#123;&#125;,</span><br><span class="line">  dom: &#123;</span><br><span class="line">    style: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. ä½¿ç”¨é—­åŒ…å°è£…ç§æœ‰å˜é‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä½¿ç”¨ä¸‹åˆ’çº¿çº¦å®šç§æœ‰å˜é‡ _name å’Œ _ageã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">var</span> user = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _name = <span class="string">'Seven'</span>;</span><br><span class="line">  <span class="keyword">var</span> _age = <span class="number">27</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getUserInfo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> _name + <span class="string">'-'</span> + _age;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(user.getUserInfo()) <span class="comment">// Seven-27</span></span><br></pre></td></tr></table></figure><h4 id="æƒ°æ€§å•ä¾‹"><a href="#æƒ°æ€§å•ä¾‹" class="headerlink" title="æƒ°æ€§å•ä¾‹"></a>æƒ°æ€§å•ä¾‹</h4><p>å®—æ—¨ï¼šåœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»ºå¯¹è±¡ï¼ï¼ï¼</p><p>æ —å­ï¼šQQçš„ç™»å½•æµ®çª—</p><p>ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šé¡µé¢åŠ è½½å®Œæˆçš„æ—¶å€™ä¾¿åˆ›å»ºå¥½æµ®çª—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loginLayer = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  div.innerHTML = <span class="string">'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'</span>;</span><br><span class="line">  div.style.display = <span class="string">'none'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">  <span class="keyword">return</span> div;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'loginBtn'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  loginLayer.style.display = <span class="string">'block'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œä¸ç®¡æˆ‘ä»¬ç™»å½•ä¸å¦ï¼Œéƒ½ä¼šåˆ›å»ºæ‚¬æµ®çª—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸ºï¼šåœ¨ç‚¹å‡»ç™»å½•çš„æ—¶å€™å†åˆ›å»ºæ‚¬æµ®çª—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createLoginLayer = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  div.innerHTML = <span class="string">'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'</span>;</span><br><span class="line">  div.style.display = <span class="string">'none'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">  <span class="keyword">return</span> div;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'loginBtn'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> loginLayer = createLoginLayer();</span><br><span class="line">  loginLayer.style.display = <span class="string">'block'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œè™½ç„¶è¾¾åˆ°äº†æƒ°æ€§çš„ç›®çš„ï¼Œå´å¤±å»äº†å•ä¾‹çš„æ•ˆæœï¼Œæ¯æ¬¡ç‚¹å‡»ç™»å½•ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‚¬æµ®çª—ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡æ¥åˆ¤æ–­æ˜¯å¦å·²ç»åˆ›å»ºè¿‡æ‚¬æµ®çª—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createLoginLayer = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!div) &#123; <span class="comment">// åˆ¤æ–­æ˜¯å¦å·²åˆ›å»º</span></span><br><span class="line">      div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">      div.innerHTML = <span class="string">'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'</span>;</span><br><span class="line">      div.style.display = <span class="string">'none'</span>;</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> div;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'loginBtn'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> loginLayer = createLoginLayer();</span><br><span class="line">  loginLayer.style.display = <span class="string">'block'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="é€šç”¨çš„æƒ°æ€§å•ä¾‹"><a href="#é€šç”¨çš„æƒ°æ€§å•ä¾‹" class="headerlink" title="é€šç”¨çš„æƒ°æ€§å•ä¾‹"></a>é€šç”¨çš„æƒ°æ€§å•ä¾‹</h4><p>è™½ç„¶ä¸Šé¢çš„æ‚¬æµ®æ¡†æ˜¯ä¸€ä¸ªå¯ç”¨çš„æƒ°æ€§å•ä¾‹ï¼Œä½†æ˜¯ä»ç„¶è¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºå…¶ä»–çš„æ ‡ç­¾ï¼Œå°±éœ€è¦æŠŠåˆ›å»ºæ‚¬æµ®çª—çš„å‡½æ•°å¤åˆ¶ä¸€ä»½ï¼Œå†ä¿®ä¿®æ”¹æ”¹ï¼Œæ— æ³•åšåˆ°å¤ç”¨ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸å˜çš„éƒ¨åˆ†éš”ç¦»å‡ºæ¥ï¼Œè¿›è¡ŒæŠ½è±¡ï¼Œæ— è®ºåˆ›å»ºä»€ä¹ˆæ ‡ç­¾ï¼Œéƒ½æ˜¯ä¸€æ ·çš„é€»è¾‘ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj;</span><br><span class="line"><span class="keyword">if</span>(!obj) &#123;</span><br><span class="line">  obj = xxx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œç»§ç»­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getSingle = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> result || (result = fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> createLoginLayer = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  div.innerHTML = <span class="string">'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'</span>;</span><br><span class="line">  div.style.display = <span class="string">'none'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(div);</span><br><span class="line">  <span class="keyword">return</span> div;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> createSingleLoginLayer = getSingle(createLoginLayer);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'loginBtn'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> loginLayer = createSingleLoginLayer();</span><br><span class="line">  loginLayer.style.display = <span class="string">'block'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºå…¶ä»–æ ‡ç­¾å°±åªéœ€è¦å…³ç³»å¦‚ä½•åˆ›å»ºè¯¥æ ‡ç­¾å°±å¯ä»¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createIframe = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</span><br><span class="line">  iframe.src = <span class="string">'https://baidu.com'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line">  <span class="keyword">return</span> iframe;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> createSingleIframe = getSingle(createIframe);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'loginBtn2'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  createSingleIframe();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§ç®€å•å´éå¸¸å¸¸ç”¨çš„æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯æƒ°æ€§å•ä¾‹æŠ€æœ¯ï¼Œåœ¨åˆé€‚çš„æ—¶å€™æ‰åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”åªåˆ›å»ºå”¯ä¸€çš„ä¸€ä¸ªã€‚</p><p><em>åˆ›å»ºå¯¹è±¡</em> å’Œ <em>ç®¡ç†å•ä¾‹</em> çš„èŒè´£è¢«åˆ†å¸ƒåœ¨ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä¸¤ä¸ªæ–¹æ³•ç»„åˆèµ·æ¥æ‰å…·æœ‰å•ä¾‹æ¨¡å¼çš„å¨åŠ›ã€‚</p><p>å­¦ä¹ èµ„æ–™ï¼š</p><ul><li>ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹ç¬¬ 4 ç« </li></ul><p>å‘å¸ƒï¼š</p><ul><li>æ˜é‡‘<a href="https://juejin.im/post/5ccb927a6fb9a0324936c2c6" target="_blank" rel="noopener">ã€Šjsè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å•ä¾‹æ¨¡å¼ã€‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQueryæ’ä»¶å†™æ³•å°ç»“ä¹‹é‡å†™è½®æ’­å›¾åŠŸèƒ½</title>
      <link href="/2019/05/03/plugin-slide-photo/"/>
      <url>/2019/05/03/plugin-slide-photo/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘åœ¨ç»´æŠ¤è€ç½‘ç«™çš„æ—¶å€™ï¼Œå‘ç°ä¸€äº›jQueryåº“çš„ä½¿ç”¨æœ‰äº›è‡ƒè‚¿ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†è‡ªå®šä¹‰çš„jsæ–‡ä»¶å¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€å˜é‡ï¼Œæ‰€ä»¥æƒ³ç€é‡å†™ä¸‹ï¼Œè™½ç„¶jQueryçš„è¾‰ç…Œæ—¶ä»£å·²ç»è¿‡å»äº†ï¼Œä½†æ˜¯ä»–çš„æ€æƒ³ï¼Œä¾æ—§ç¿çƒ‚ï¼ˆæ»šå»ç»´æŠ¤å»ï¼‰</p></blockquote><a id="more"></a><h2 id="å…ˆä¸¾ä¸ªæ —å­"><a href="#å…ˆä¸¾ä¸ªæ —å­" class="headerlink" title="å…ˆä¸¾ä¸ªæ —å­"></a>å…ˆä¸¾ä¸ªæ —å­</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> methods = &#123;</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å¯è‡ªå®šä¹‰æ‰©å±•é¡¹</span></span><br><span class="line">      options = $.extend(</span><br><span class="line">        <span class="literal">true</span>,</span><br><span class="line">        &#123;&#125;, </span><br><span class="line">        $.fn.myPlugin.defaults,</span><br><span class="line">        options</span><br><span class="line">      );</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'options'</span>, options, <span class="keyword">this</span>)</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Name is '</span>, $.fn.myPlugin.defaults.name, <span class="string">'.'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    getAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Age is '</span>, $.fn.myPlugin.defaults.age, <span class="string">'.'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    show: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.style.display == <span class="string">"none"</span> &amp;&amp; (<span class="keyword">this</span>.style.display = <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">if</span> (getComputedStyle(<span class="keyword">this</span>, <span class="string">''</span>).getPropertyValue(<span class="string">"display"</span>) == <span class="string">"none"</span>)</span><br><span class="line">          <span class="keyword">this</span>.style.display = defaultDisplay(<span class="keyword">this</span>.nodeName)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    hide: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.css(<span class="string">"display"</span>, <span class="string">"none"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘½åç©ºé—´æœ€å¥½åªæœ‰ä¸€ä¸ª</span></span><br><span class="line">  $.fn.myPlugin = <span class="function"><span class="keyword">function</span>(<span class="params">method</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•è°ƒç”¨ï¼Œå¯æ»¡è¶³ä¸‰ç§æƒ…å†µï¼š1. method, 2. init, 3. error</span></span><br><span class="line">    <span class="keyword">if</span>(methods[method]) &#123;</span><br><span class="line">      <span class="keyword">return</span> methods[method].apply(<span class="keyword">this</span>, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>));  <span class="comment">//å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> method === <span class="string">'object'</span> || !method) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰å‚æ•°æˆ–è€…å‚æ•°</span></span><br><span class="line">      <span class="keyword">return</span> methods.init.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $.error(<span class="string">'Method'</span> + method + <span class="string">'does not exist on jQuery.myPlugin.'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  $.fn.myPlugin.defaults =  &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'zhangsan'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="string">'20'</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(jQuery)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --- æµ‹è¯• --- */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–init</span></span><br><span class="line">$(<span class="string">'#testPara'</span>).myPlugin()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹å‚æ•°</span></span><br><span class="line">$(<span class="string">'#testPara'</span>).myPlugin(&#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'wuwang'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="string">'27'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒå–æ–¹æ³•</span></span><br><span class="line">$(<span class="string">'#testPara'</span>).myPlugin(<span class="string">'hide'</span>)</span><br><span class="line">$(<span class="string">'#testPara'</span>).myPlugin(<span class="string">'show'</span>)</span><br></pre></td></tr></table></figure><p>ç®€å•æ˜“æ‡‚ï¼Œä½†æ˜¯äº”è„ä¿±å…¨ï¼Œæ¥ä¸‹æ¥ç®€å•è¯´æ˜ï¼š</p><h4 id="æå®šå¤æ‚å‚æ•°åˆ—è¡¨"><a href="#æå®šå¤æ‚å‚æ•°åˆ—è¡¨" class="headerlink" title="æå®šå¤æ‚å‚æ•°åˆ—è¡¨"></a>æå®šå¤æ‚å‚æ•°åˆ—è¡¨</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼ å‚å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a1, a2, a3, a4</span>) </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>é‚£å¦‚æœä¸ä¼ å‚å‘ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(<span class="number">1</span>, <span class="literal">null</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>å°±éœ€è¦å¦‚ä¸Šä½¿ç”¨ null æ¥ç«™ä½ï¼Œå‚æ•°å¤šäº†ï¼Œä¿è¯ä½ æ™•ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <strong>å¯é€‰å“ˆå¸Œå‚æ•°ï¼ˆoptions hashï¼‰</strong>ï¼Œå¦‚ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foo(<span class="number">1</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// æ”¹æˆ</span></span><br><span class="line">foo(<span class="number">1</span>, &#123;</span><br><span class="line">    a4: <span class="number">4</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>æ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨ jQuery çš„ $.extend() å·¥å…·å‡½æ•°åˆå¹¶å¯é€‰å‚æ•°ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params">a1, options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> settings = $.extend(&#123;</span><br><span class="line">        a2: value2,</span><br><span class="line">        a3: value3,</span><br><span class="line">        a4: value4</span><br><span class="line">    &#125;, options || &#123;&#125; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œå°±æœ‰äº†æ —å­ä¸­å½¢æ€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> settings = $.extend(</span><br><span class="line">    <span class="literal">true</span>,  <span class="comment">// æ˜¯å¦ä¸ºæ·±æ‹·è´</span></span><br><span class="line">    &#123;&#125;,    <span class="comment">// ä½¿ç”¨æºå…ƒç´ å±æ€§æ¥æ‰©å±•ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    $.fn.myPlugin.defaults,  <span class="comment">// é»˜è®¤çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå°†å±æ€§æ·»åŠ åˆ° targetï¼ˆå³&#123;&#125;ï¼‰ ç›®æ ‡å¯¹è±¡ä¸­</span></span><br><span class="line">    options  <span class="comment">// å¤šä¸ªæºåä¼šè¦†ç›–å‰é¢åŒåçš„å±æ€§</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå°±å†ä¹Ÿä¸ä¼šçº ç»“å‚æ•°çš„ä¸ä¼ æˆ–è€…å¤šä¸ªå ä½ä¼ å‚ï¼ŒæŒºå¥½ã€‚</p><p>å®é™…æ“ä½œä¸‹ï¼šå…ˆçœ‹ä¸€ä¸ªå¤šä¸ªå‚æ•°çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#btn'</span>).myPlugin(&#123;</span><br><span class="line">  <span class="string">'mynewname'</span>: <span class="string">'lisi'</span>,</span><br><span class="line">  <span class="string">'mynewage'</span>: <span class="number">22</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ‰“å°settingsï¼š &#123;name: "zhangsan", age: "20", mynewname: "lisi", mynewage: 22&#125;</span></span><br></pre></td></tr></table></figure><p>å†çœ‹ä¸€ä¸ªï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#btn'</span>).myPlugin(&#123;</span><br><span class="line">  <span class="string">'name'</span>: <span class="string">'lisi'</span>,</span><br><span class="line">  <span class="string">'mynewage'</span>: <span class="number">22</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;name: "lisi", age: "20", mynewage: 22&#125;</span></span><br></pre></td></tr></table></figure></p><p>ä¸€çœ‹å°±æ‡‚ï¼Œæœ‰åˆ™è¦†ç›–ï¼Œæ— åˆ™æ·»åŠ ï¼Œå®Œç¾ã€‚</p><h4 id="ç»Ÿä¸€å‘½åç©ºé—´"><a href="#ç»Ÿä¸€å‘½åç©ºé—´" class="headerlink" title="ç»Ÿä¸€å‘½åç©ºé—´"></a>ç»Ÿä¸€å‘½åç©ºé—´</h4><p>ç”±äºæ˜¯jQueryæ’ä»¶ï¼Œéƒ½æŒ‚è½½åœ¨ jQuery å¯¹è±¡ä¸‹ï¼Œæ‰€ä»¥æ°å½“å‘½åç©ºé—´çš„æ’ä»¶å°½å¯èƒ½ä¸ä¸å…¶ä»–æ’ä»¶å†²çªï¼Œç”šè‡³æ˜¯ jQuery çš„æ ¸å¿ƒåº“æ–¹æ³•ã€‚</p><p>æ¯”å¦‚ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> defaults = &#123;&#125;  <span class="comment">// å®šä¹‰é»˜è®¤é¡¹</span></span><br><span class="line">    <span class="keyword">var</span> methods = &#123;&#125;  <span class="comment">// å®šä¹‰æ–¹æ³•</span></span><br><span class="line">    $.fn.myPlugin = <span class="function"><span class="keyword">function</span>(<span class="params">method</span>) </span>&#123;&#125;  <span class="comment">// å®šä¹‰ myPlugin å‘½åç©ºé—´å¹¶èµ‹å€¼ä¸€ä¸ªåŒ¿åå‡½æ•°</span></span><br><span class="line">&#125;(jQuery)</span><br></pre></td></tr></table></figure></p><h4 id="å…è®¸å…¬å¼€è®¿é—®é»˜è®¤è®¾ç½®"><a href="#å…è®¸å…¬å¼€è®¿é—®é»˜è®¤è®¾ç½®" class="headerlink" title="å…è®¸å…¬å¼€è®¿é—®é»˜è®¤è®¾ç½®"></a>å…è®¸å…¬å¼€è®¿é—®é»˜è®¤è®¾ç½®</h4><p>ä¸ºäº†æ›´åŠ çš„å®šåˆ¶åŒ–ï¼Œæˆ‘ä»¬éœ€è¦æš´éœ²é»˜è®¤çš„è®¾ç½®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¿®æ”¹è®¾ç½®äº†ã€‚</p><p>é¦–å…ˆä¿®æ”¹ defaults å˜é‡ï¼Œä¸ºäº†æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œï¼Œéœ€è¦æŠŠå®ƒèµ‹å€¼ç»™ $.fn å±æ€§ã€‚å¹¶ä¸”ä¸ºäº†ç»Ÿä¸€å‘½åç©ºé—´åŸåˆ™ï¼Œéœ€è¦æŠŠå®ƒä½œä¸º myPlugin çš„å±æ€§ï¼Œå¦‚ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$.fn.myPlugin.defaults =  &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'zhangsan'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="string">'20'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>æ¥ç€ï¼Œå½“ä½¿ç”¨é»˜è®¤å€¼æ¥åˆå¹¶å‚æ•°é€‰é¡¹æ—¶ï¼Œåœ¨é¡¹ç›®ä¸­åªå‡ºç°ä¸€æ¬¡ï¼Œå³åœ¨ init() æ–¹æ³•é‡Œï¼Œå¦‚ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> methods = &#123;</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å¯è‡ªå®šä¹‰æ‰©å±•é¡¹</span></span><br><span class="line">      options = $.extend(</span><br><span class="line">        <span class="literal">true</span>,</span><br><span class="line">        &#123;&#125;, </span><br><span class="line">        $.fn.myPlugin.defaults,</span><br><span class="line">        options</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨é‡Œç›´æ¥æµ‹è¯•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–</span></span><br><span class="line">$.fn.myPlugin.defaults.name   <span class="comment">// zhangsan</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹</span></span><br><span class="line">$.fn.myPlugin.defaults.name = <span class="string">'wangwu'</span></span><br><span class="line"><span class="comment">// "wangwu"</span></span><br></pre></td></tr></table></figure></p><h4 id="ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§"><a href="#ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§" class="headerlink" title="ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§"></a>ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§</h4><p>ä½¿ç”¨ <code>return this</code> ï¼Œå¯ä»¥ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§ã€‚</p><h4 id="Array-prototype-slice-call"><a href="#Array-prototype-slice-call" class="headerlink" title="Array.prototype.slice.call()"></a>Array.prototype.slice.call()</h4><p><code>Array.prototype.slice.call(arguments)</code>èƒ½å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„ ï¼ˆ<code>arguments.toArray().slice()</code>ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=&#123;<span class="attr">length</span>:<span class="number">2</span>,<span class="number">0</span>:<span class="string">'first'</span>,<span class="number">1</span>:<span class="string">'second'</span>&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(a);   <span class="comment">//Array [ "first", "second" ]</span></span><br></pre></td></tr></table></figure><h2 id="å†ä¸¾ä¸ªæ —å­"><a href="#å†ä¸¾ä¸ªæ —å­" class="headerlink" title="å†ä¸¾ä¸ªæ —å­"></a>å†ä¸¾ä¸ªæ —å­</h2><p>é¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨è½®æ’­å›¾ï¼Œæˆ‘ä»¬å°±åœ¨å‰äººçš„åŸºç¡€ä¸Šï¼Œæ¨¡ä»¿ä¸€ä¸‹å§ï¼ˆä½ å°±è¯´æ˜¯æŠ„çš„ä¸å°±è¡Œäº†éº½ï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showPhoto</span>(<span class="params">options, index</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> $photoElement = $(options.photoElement);</span><br><span class="line">        <span class="keyword">if</span> (!$photoElement.is(<span class="string">':animated'</span>)) &#123;</span><br><span class="line">          $photoElement.animate(&#123;</span><br><span class="line">            opacity: <span class="number">0.5</span></span><br><span class="line">          &#125;, <span class="number">0</span>).attr(</span><br><span class="line">            <span class="string">'src'</span>,</span><br><span class="line">            options.transformer(options.$thumbnails[index].src)</span><br><span class="line">          ).animate(&#123;</span><br><span class="line">            opacity: <span class="number">1</span></span><br><span class="line">          &#125;, <span class="number">800</span>);</span><br><span class="line">          options.current = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">var</span> methods = &#123;</span><br><span class="line">      init: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">         options = $.extend(</span><br><span class="line">            <span class="literal">true</span>, &#123;&#125;,</span><br><span class="line">            $.fn.slidePhoto.defaults,</span><br><span class="line">            options, &#123;</span><br><span class="line">               current: <span class="number">0</span>, <span class="comment">// åˆå§‹å€¼ä¸º0</span></span><br><span class="line">               $thumbnails: <span class="keyword">this</span>.filter(<span class="string">'img'</span>), <span class="comment">//é€‰å‡ºæ‰€æœ‰çš„å›¾ç‰‡</span></span><br><span class="line">               delay: options.delay &gt;= <span class="number">1000</span> ? options.delay : <span class="number">1000</span>,</span><br><span class="line">            &#125;</span><br><span class="line">         );</span><br><span class="line"></span><br><span class="line">         <span class="comment">// ç‚¹å‡»å›¾ç‰‡ï¼Œåˆ‡æ¢å¯¹åº”å¤§å›¾</span></span><br><span class="line">         options.$thumbnails.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            showPhoto(options, options.$thumbnails.index(<span class="keyword">this</span>));</span><br><span class="line">         &#125;);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// æ˜¾ç¤ºä¸‹ä¸€å¼ </span></span><br><span class="line">         $(options.nextControl + <span class="string">', '</span> + options.photoElement).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> index = (options.current + <span class="number">1</span>) % options.$thumbnails.length; <span class="comment">// å–æ¨¡</span></span><br><span class="line"></span><br><span class="line">            showPhoto(options, index);</span><br><span class="line">         &#125;);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// æ˜¾ç¤ºä¸Šä¸€å¼ </span></span><br><span class="line">         $(options.previousControl).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> index = options.current === <span class="number">0</span> ? options.$thumbnails.length - <span class="number">1</span> : options.current - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            showPhoto(options, index);</span><br><span class="line">         &#125;);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// æ˜¾ç¤ºç¬¬ä¸€å¼ </span></span><br><span class="line">         $(options.firstControl).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            showPhoto(options, <span class="number">0</span>);</span><br><span class="line">         &#125;).triggerHandler(<span class="string">'click'</span>); <span class="comment">// ä¸»è¦æ˜¯åˆå§‹æ—¶è§¦å‘ï¼Œè§¦å‘è¢«é€‰å…ƒç´ ä¸ŠæŒ‡å®šçš„äº‹ä»¶ï¼Œè¿”å›äº‹ä»¶å¤„ç†å‡½æ•°çš„è¿”å›å€¼</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">// æ˜¾ç¤ºæœ€åä¸€å¼ </span></span><br><span class="line">         $(options.lastControl).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            showPhoto(options, options.$thumbnails.length - <span class="number">1</span>);</span><br><span class="line">         &#125;)</span><br><span class="line"></span><br><span class="line">         <span class="comment">// è‡ªåŠ¨æ’­æ”¾</span></span><br><span class="line">         <span class="keyword">var</span> tick;</span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">function</span> <span class="title">autoPlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            tick = <span class="built_in">window</span>.setInterval(</span><br><span class="line">               <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                  $(options.nextControl).triggerHandler(<span class="string">'click'</span>)</span><br><span class="line">               &#125;, options.delay);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">// é¼ æ ‡ç§»å…¥ç§»å‡ºçŠ¶æ€</span></span><br><span class="line">         <span class="function"><span class="keyword">function</span> <span class="title">mouserStatus</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">            $(obj).mouseenter(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="keyword">if</span> (tick) &#123;</span><br><span class="line">                  <span class="built_in">window</span>.clearInterval(tick);</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;).mouseleave(autoPlay);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (options.autoPlayControl) &#123;</span><br><span class="line">            autoPlay();</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">// é¼ æ ‡æ»‘åŠ¨æš‚åœã€æ’­æ”¾</span></span><br><span class="line">         mouserStatus(options.photoElement);</span><br><span class="line">         mouserStatus(options.$thumbnails);</span><br><span class="line"></span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   $.fn.slidePhoto = <span class="function"><span class="keyword">function</span> (<span class="params">method</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (methods[method]) &#123;</span><br><span class="line">         <span class="keyword">return</span> methods[method].apply(<span class="keyword">this</span>, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($.type(method) === <span class="string">'object'</span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> methods.init.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         $.error(<span class="string">'Method '</span> + method + <span class="string">' does not exist on jQuery.slidePhoto'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   $.fn.slidePhoto.defaults = &#123;</span><br><span class="line">      photoElement: <span class="string">'img.photomatic-photo'</span>, <span class="comment">// å¤§å›¾æ˜¾ç¤º</span></span><br><span class="line">      transformer: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> name.replace(<span class="string">'thumbnail'</span>, <span class="string">'photo'</span>); <span class="comment">// å°†'thumbnail' æ›¿æ¢ä¸º 'photo'ï¼Œå³æœ€ç»ˆè¿”å›å¤§å›¾çš„srcå±æ€§å€¼</span></span><br><span class="line">      &#125;,</span><br><span class="line">      nextControl: <span class="literal">null</span>, <span class="comment">// ä¸‹ä¸€å¼ </span></span><br><span class="line">      previousControl: <span class="literal">null</span>, <span class="comment">// å‰ä¸€å¼ </span></span><br><span class="line">      firstControl: <span class="literal">null</span>, <span class="comment">// ç¬¬ä¸€å¼ </span></span><br><span class="line">      lastControl: <span class="literal">null</span>, <span class="comment">// æœ€åä¸€å¼ </span></span><br><span class="line">      autoPlayControl: <span class="literal">false</span>,</span><br><span class="line">      delay: <span class="number">3000</span> <span class="comment">// å»¶æ—¶</span></span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">&#125;)(jQuery)</span><br></pre></td></tr></table></figure><p>ç”¨æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#thumbnails-pane img'</span>).slidePhoto(&#123;</span><br><span class="line">    photoElement: <span class="string">'#photo-display'</span>,</span><br><span class="line">    previousControl: <span class="string">'#previous-button'</span>,</span><br><span class="line">    nextControl: <span class="string">'#next-button'</span>,</span><br><span class="line">    firstControl: <span class="string">'#first-button'</span>,</span><br><span class="line">    lastControl: <span class="string">'#last-button'</span>,</span><br><span class="line">    autoPlayControl: <span class="literal">true</span>,</span><br><span class="line">    delay: <span class="number">3000</span></span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒï¼š</p><ul><li>ã€ŠjQueryå®æˆ˜ ç¬¬ä¸‰ç‰ˆã€‹</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsæ’ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆæ¢ thisã€call å’Œ apply</title>
      <link href="/2019/05/03/js-this-apply-call/"/>
      <url>/2019/05/03/js-this-apply-call/</url>
      
        <content type="html"><![CDATA[<h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><blockquote><p>JavaScript ä¸­ this æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡</p></blockquote><a id="more"></a><h4 id="this-çš„æŒ‡å‘"><a href="#this-çš„æŒ‡å‘" class="headerlink" title="this çš„æŒ‡å‘"></a>this çš„æŒ‡å‘</h4><ol><li>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨</li></ol><p>this æŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  getA: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span> === obj); <span class="comment">// true</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">// 1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.getA();</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨</li></ol><p>å½“å‡½æ•°ä¸ä½œä¸ºå¯¹è±¡çš„å±æ€§è¢«è°ƒç”¨æ—¶ï¼Œæ™®é€šå‡½æ•°çš„ this æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œæµè§ˆå™¨é‡Œå°±æ˜¯ window å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"globalName"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"tyang"</span>,</span><br><span class="line">  getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = obj.getName;</span><br><span class="line"><span class="built_in">console</span>.log(obj.getName()); <span class="comment">// tyang</span></span><br><span class="line"><span class="built_in">console</span>.log(getName()); <span class="comment">// globalName</span></span><br></pre></td></tr></table></figure><p><code>obj.getName()</code> ä½œä¸º obj å¯¹è±¡çš„å±æ€§è¢«è°ƒç”¨ï¼Œthis æŒ‡å‘ obj å¯¹è±¡;</p><p><code>getName()</code> ä½¿ç”¨å˜é‡ getName å¼•ç”¨ obj.getNameï¼Œæ­¤æ—¶æ˜¯å‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œthis æŒ‡å‘å…¨å±€ window;</p><p>åœ¨ä¸¥æ ¼æ¨¡å¼ï¼Œæƒ…å†µæœ‰æ‰€ä¸åŒï¼šthis ä¸ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œè€Œæ˜¯ undefinedï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  "use strict"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func();</span><br></pre></td></tr></table></figure><p>å½“å‡½æ•°ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthis ç­‰äºé‚£ä¸ªå¯¹è±¡ã€‚ä¸è¿‡ï¼ŒåŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤å…¶ this å¯¹è±¡é€šå¸¸æŒ‡å‘ windowã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gName = <span class="string">"The window"</span>;</span><br><span class="line"><span class="keyword">var</span> gObject = &#123;</span><br><span class="line">  gName: <span class="string">"My object"</span>,</span><br><span class="line">  getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.gName;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(gObject.getName()()); <span class="comment">// 'The window'</span></span><br><span class="line"><span class="keyword">var</span> getNameFunc = gObject.getName();</span><br><span class="line"><span class="built_in">console</span>.log(getNameFunc()); <span class="comment">// 'The window'</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å¯¹è±¡ <code>gName</code>ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³• <code>getName()</code>ï¼Œ è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°è¿”å› <code>this.name</code>ã€‚å› æ­¤è°ƒç”¨ <code>gObject.getName()()</code> ä¼šç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² <code>&#39;The window&#39;</code>ã€‚</p><p>ä¸ºä»€ä¹ˆåŒ¿åå‡½æ•°æ²¡æœ‰å–å¾—åŒ…å«ä½œç”¨åŸŸçš„ this å¯¹è±¡å‘¢ï¼Ÿ</p><p>æ¯ä¸ªå‡½æ•°å†è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å–å¾—ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼šthis å’Œ argumentsï¼Œå†…éƒ¨å‡½æ•°åœ¨æœç´¢è¿™ä¸¤ä¸ªå˜é‡æ—¶ï¼Œåªä¼šæœç´¢åˆ°å…¶æ´»åŠ¨å¯¹è±¡ä¸ºæ­¢ï¼Œå› æ­¤æ°¸è¿œä¸å¯èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­çš„è¿™ä¸¤ä¸ªå˜é‡ã€‚</p><p>æ‰€ä»¥ï¼Œå¯ä»¥åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­è®¾ç½®ä¸€ä¸ªå˜é‡æ¥ä¿å­˜ this å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gName = <span class="string">"The window"</span>;</span><br><span class="line"><span class="keyword">var</span> gObject = &#123;</span><br><span class="line">  gName: <span class="string">"My object"</span>,</span><br><span class="line">  getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// å°† this å¯¹è±¡èµ‹å€¼ç»™ that å˜é‡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> that.gName; <span class="comment">// that å¼•ç”¨ç€ gObject</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(gObject.getName()()); <span class="comment">// 'My object'</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œarguments å¯¹è±¡ä¹Ÿå¯ä»¥å¦‚æ­¤ä½¿ç”¨ï¼šå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°å¦ä¸€ä¸ªé—­åŒ…èƒ½å¤Ÿè®¿é—®çš„å˜é‡ä¸­ã€‚</p><ol><li>æ„é€ å™¨è°ƒç”¨</li></ol><p>å½“ä½¿ç”¨ new è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ„é€ å™¨é‡Œçš„ this æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"Lisi"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> nameObj = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="built_in">console</span>.log(nameObj.name); <span class="comment">// Lisi</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå½“æ˜¾å¼è¿”å›ä¸€ä¸ª object ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œé‚£æœ€ç»ˆä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯ä¹‹å‰çš„ thisï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">"Lisi"</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœè¿™é‡Œä¸ä¼šçƒ¦ object ç±»å‹çš„æ•°æ®ï¼Œå¦‚ï¼šreturn 'wangwu'ï¼Œå°±ä¸ä¼šè¿”å›æ˜¾å¼å¯¹è±¡</span></span><br><span class="line">    name: <span class="string">"wangwu"</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> nameObj = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="built_in">console</span>.log(nameObj.name); <span class="comment">// wangwu</span></span><br></pre></td></tr></table></figure><ol start="4"><li>Function.prototype.call æˆ– Function.prototype.apply è°ƒç”¨</li></ol><p>call å’Œ apply å¯ä»¥åŠ¨æ€åœ°æ”¹å˜ä¼ å…¥å‡½æ•°çš„ thisï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personObj = &#123;</span><br><span class="line">  name: <span class="string">"ytao"</span>,</span><br><span class="line">  age: <span class="string">"22"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="keyword">this</span>.age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(person.call(personObj)); <span class="comment">// ytao22</span></span><br></pre></td></tr></table></figure><h4 id="ä¸¢å¤±çš„-this"><a href="#ä¸¢å¤±çš„-this" class="headerlink" title="ä¸¢å¤±çš„ this"></a>ä¸¢å¤±çš„ this</h4><p>æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡å†™è¿™ä¸ªè·å– id çš„æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getId = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">getId(<span class="string">"divBox"</span>);</span><br></pre></td></tr></table></figure><p>é‚£å¯ä¸å¯ä»¥è¿™æ ·å‘¢ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getId2 = <span class="built_in">document</span>.getElementById;</span><br><span class="line">getId2(<span class="string">"divBox"</span>); <span class="comment">// Uncaught TypeError: Illegal invocation</span></span><br></pre></td></tr></table></figure><p>ç»“æœç›´æ¥æŠ¥é”™ï¼Œå½“ <code>getElementById</code> æ–¹æ³•ä½œä¸º document å¯¹è±¡çš„å±æ€§è¢«è°ƒç”¨æ—¶ï¼Œ æ–¹æ³•å†…éƒ¨çš„ this æ˜¯æŒ‡å‘ document çš„ã€‚å¦‚æœ <code>getId2(&#39;divBox&#39;)</code>ï¼Œç›¸å½“äºæ˜¯æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘çš„æ˜¯ windowã€‚</p><p>æ‰€ä»¥ï¼ŒæŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¨¡æ‹Ÿä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById = (<span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> func.apply(<span class="built_in">document</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(<span class="built_in">document</span>.getElementById);</span><br><span class="line"></span><br><span class="line">getId3 = <span class="built_in">document</span>.getElementById;</span><br><span class="line">getId3(<span class="string">"divBox"</span>);</span><br></pre></td></tr></table></figure><h3 id="call-å’Œ-apply"><a href="#call-å’Œ-apply" class="headerlink" title="call å’Œ apply"></a>call å’Œ apply</h3><blockquote><p>fun.apply(thisArg, [argsArray])</p><p>fun.call(thisArg, arg1, arg2, â€¦)</p></blockquote><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œcall å’Œ apply æ–¹æ³•å°¤ä¸ºæœ‰ç”¨ï¼Œä¸¤è€…ç”¨æ³•ä¸€è‡´ï¼Œåªæ˜¯ä¼ å‚çš„å½¢å¼ä¸Šæœ‰æ‰€åŒºåˆ«è€Œå·²ã€‚</p><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><p>apply() æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†… this å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œapply() æ–¹æ³•å°†è¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p><p>call() æ–¹æ³•çš„ä½œç”¨å’Œ apply() æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«å°±æ˜¯ call()æ–¹æ³•æ¥å—çš„æ˜¯å‚æ•°åˆ—è¡¨ï¼Œè€Œ apply()æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ã€‚</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener">Functionâ€‹.prototypeâ€‹.apply()</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener">Functionâ€‹.prototypeâ€‹.call()</a></li></ul><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œå‡½æ•°ä½“å†…çš„ this ä¼šæŒ‡å‘é»˜è®¤çš„å®¿ä¸»å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¾ç„¶æ˜¯ nullã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> applyFunc = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="built_in">window</span>);</span><br><span class="line">&#125;;</span><br><span class="line">applyFunc.apply(<span class="literal">null</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> applyFunc = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line"><span class="meta">  "use strict"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="literal">null</span>);</span><br><span class="line">&#125;;</span><br><span class="line">applyFunc.apply(<span class="literal">null</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h4><ol><li>æ”¹å˜ this æŒ‡å‘</li></ol><p>å‡å¦‚åœ¨ä¸€ä¸ªç‚¹å‡»äº‹ä»¶å‡½æ•°ä¸­æœ‰ä¸€ä¸ªå†…éƒ¨å‡½æ•° funcï¼Œå½“ç‚¹å‡»äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"divBox"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.id); <span class="comment">// divBox</span></span><br><span class="line">  <span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id); <span class="comment">// undefinedï¼Œè¿™é‡Œçš„ this æŒ‡å‘äº† window</span></span><br><span class="line">  &#125;;</span><br><span class="line">  func();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œæˆ‘ä»¬ç”¨ call() æ¥æ”¹å˜ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"divBox"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.id); <span class="comment">// divBox</span></span><br><span class="line">  <span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.id); <span class="comment">// divBox</span></span><br><span class="line">  &#125;;</span><br><span class="line">  func.call(<span class="keyword">this</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ¨¡æ‹Ÿ bind æ–¹æ³•</li></ol><blockquote><p>function.bind(thisArg[, arg1[, arg2[, â€¦]]])</p></blockquote><p>bind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨æ—¶è®¾ç½® this å…³é”®å­—ä¸ºæä¾›çš„å€¼ã€‚å¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œå°†ç»™å®šå‚æ•°åˆ—è¡¨ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°åºåˆ—çš„å‰è‹¥å¹²é¡¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>; <span class="comment">// ä¿å­˜åŸå‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›æ–°å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> self.apply(context, <span class="built_in">arguments</span>); <span class="comment">// å°†ä¼ å…¥çš„ context å½“åšæ–°å‡½æ•°ä½“å†…çš„ this</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindObj = &#123;</span><br><span class="line">  name: <span class="string">"tyang"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); <span class="comment">// tyang</span></span><br><span class="line">&#125;.bind(bindObj);</span><br><span class="line"></span><br><span class="line">bindFunc();</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ <code>Function.prototype.bind</code>å®ç°ï¼Œ<code>self.apply(context, arguments)</code>æ‰æ˜¯æ‰§è¡ŒåŸæ¥çš„ bindFunc å‡½æ•°ï¼Œå¹¶ä¸”æŒ‡å®š context å¯¹è±¡ä¸º bindFunc å‡½æ•°ä½“å†…çš„ thisã€‚</p><p>æˆ‘ä»¬å†ç»§ç»­ä¿®æ”¹ä¸‹ï¼Œä½¿ä¹‹å¯ä»¥é¢„å…ˆæ·»åŠ ä¸€äº›å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>,</span><br><span class="line">    context = [].shift.call(<span class="built_in">arguments</span>), <span class="comment">// è·å–å‚æ•°ä¸­ç¬¬ä¸€ä¸ªä¸ºç»‘å®šçš„thisä¸Šä¸‹æ–‡</span></span><br><span class="line">    args = [].slice.call(<span class="built_in">arguments</span>); <span class="comment">// å°†å‰©ä½™çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›æ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> self.apply(context, [].concat.call(args, [].slice.call(<span class="built_in">arguments</span>))); <span class="comment">//arguments ä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œå³ä¼ å…¥çš„ 3ï¼Œ4</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindObj = &#123;</span><br><span class="line">  name: <span class="string">"lisisi"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bindFunc = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); <span class="comment">// lisisi</span></span><br><span class="line">  <span class="built_in">console</span>.log([a, b, c, d]); <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">&#125;.bind(bindObj, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">bindFunc(<span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure><p><code>self.apply(context, [].concat.call(args, [].slice.call(arguments)));</code>ï¼Œæ‰§è¡Œæ–°å‡½æ•°çš„æ—¶å€™ï¼Œä¼šæŠŠä¹‹å‰ä¼ å…¥çš„ context ä½œä¸º thisï¼Œ<code>[].slice.call(arguments)</code>å°†æ–°å‡½æ•°ä¼ å…¥çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„ï¼Œå¹¶ä½œä¸º<code>[].concat.call(args)</code>çš„ç»™å®šå‚æ•°ï¼Œç»„åˆä¸¤æ¬¡ï¼Œä½œä¸ºæ–°å‡½æ•°æœ€ç»ˆçš„å‚æ•°ã€‚</p><ol start="3"><li>å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•</li></ol><p>ç¬¬ä¸€ç§ï¼Œâ€å€Ÿç”¨æ„é€ å‡½æ•°â€œå®ç°ä¸€äº›ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> B = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  A.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;;</span><br><span class="line">B.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bbb = <span class="keyword">new</span> B(<span class="string">"Yangtao"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bbb.getName()); <span class="comment">//Yangtao</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ï¼Œç»™ç±»æ•°ç»„å¯¹è±¡ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Array</span>.prototype.push.call(<span class="built_in">arguments</span>, <span class="number">3</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>); <span class="comment">//Â [1, 2, 3]</span></span><br><span class="line">&#125;)(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>å†æ¯”å¦‚ä¹‹å‰ç”¨åˆ°çš„ï¼ŒæŠŠ arguments è½¬æˆçœŸæ­£çš„æ•°ç»„çš„æ—¶å€™å¯ä»¥å€Ÿç”¨ <code>Array.prototype.slice.call(arguments)</code>ï¼Œæƒ³æˆªå»å¤´ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå€Ÿç”¨<code>Array.prototype.shift.call(arguments)</code></p><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥æŠŠâ€ä»»æ„â€œå¯¹è±¡ä¼ å…¥ <code>Array.prototype.push</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aObj = &#123;&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call(aObj, <span class="string">"first"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(aObj.length); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(aObj[<span class="number">0</span>]); <span class="comment">// first</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿå¾—æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ul><li>å¯¹è±¡æœ¬èº«è¦å¯ä»¥å­˜å–å±æ€§</li><li>å¯¹è±¡çš„ length å±æ€§å¯è¯»å†™</li></ul><p>å¦‚æœæ˜¯å…¶ä»–ç±»å‹ï¼Œæ¯”å¦‚ numberï¼Œæ— æ³•å­˜å–ï¼›æ¯”å¦‚å‡½æ•°ï¼Œlength å±æ€§ä¸å¯å†™ï¼Œä½¿ç”¨ call æˆ– apply å°±ä¼šæŠ¥é”™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call(num, <span class="string">"2"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(num.length); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(num[<span class="number">0</span>]); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> funcObj = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call(funcObj, <span class="string">"3"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(funcObj.length); <span class="comment">// Uncaught TypeError: Cannot assign to read only property 'length' of function 'function () &#123;&#125;'</span></span><br></pre></td></tr></table></figure><p>å­¦ä¹ èµ„æ–™ï¼š</p><ul><li>ã€ŠJavaScript é«˜ç¨‹ 3ã€‹ç¬¬ä¸ƒç« </li><li>ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ Â· æ›¾æ¢ã€‹ç¬¬ 2 ç« </li></ul><p>å‘å¸ƒï¼š</p><ul><li>æ˜é‡‘<a href="https://juejin.im/post/5cb915546fb9a0688539b53b" target="_blank" rel="noopener">ã€Šåˆæ¢ thisã€call å’Œ applyã€‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆæ¢ JavaScript çš„å˜é‡</title>
      <link href="/2019/02/25/js-var/"/>
      <url>/2019/02/25/js-var/</url>
      
        <content type="html"><![CDATA[<h3 id="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"><a href="#åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼" class="headerlink" title="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"></a>åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼</h3><a id="more"></a><p><code>ECMAScript</code>å˜é‡ä¸€èˆ¬æœ‰ä¸¤ç§æ•°æ®ç±»å‹çš„å€¼ï¼š<strong>åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹</strong>ã€‚</p><ul><li>åŸºæœ¬ç±»å‹ï¼š ç®€å•çš„æ•°æ®æ®µï¼š<code>Undefined, Null, Boolean, Number, String</code></li><li>å¼•ç”¨ç±»å‹ï¼šå¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ï¼›</li></ul><h4 id="1-åŠ¨æ€çš„å±æ€§"><a href="#1-åŠ¨æ€çš„å±æ€§" class="headerlink" title="1. åŠ¨æ€çš„å±æ€§"></a>1. åŠ¨æ€çš„å±æ€§</h4><p>å®šä¹‰ä¸¤è€…çš„å€¼ï¼šåˆ›å»ºä¸€ä¸ªå˜é‡å¹¶ä¸ºå…¶å˜é‡èµ‹å€¼ï¼›</p><p>æ‰§è¡Œä¸¤è€…çš„å€¼ï¼š</p><ul><li>å¼•ç”¨ç±»å‹ï¼šå¯ä»¥æ·»åŠ ã€åˆ é™¤å±æ€§å’Œæ–¹æ³•ï¼›</li><li>åŸºæœ¬ç±»å‹ï¼šä¸èƒ½æ·»åŠ ã€åˆ é™¤å±æ€§å’Œæ–¹æ³•ï¼›</li></ul><p>æ¯”å¦‚ï¼šå¼•ç”¨ç±»å‹ aï¼Œå¯ä»¥æ·»åŠ å±æ€§ name age<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">a.name = <span class="string">"æ¨å­é¾™"</span>;</span><br><span class="line">a.age = <span class="number">24</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a.name);                      <span class="comment">//æ¨å­é¾™</span></span><br></pre></td></tr></table></figure></p><p>åŸºæœ¬ç±»å‹ name æ— æ³•æ·»åŠ å±æ€§ age<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"æ¨å­é¾™"</span>;</span><br><span class="line">name.age  = <span class="number">24</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name.age);                 <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p><p>ä»£ç ä¸­å¯çŸ¥ï¼šåªèƒ½ç»™å¼•ç”¨ç±»å‹å€¼åŠ¨æ€åœ°æ·»åŠ å±æ€§ï¼Œä»¥ä¾¿å°†æ¥ä½¿ç”¨ã€‚</p><h4 id="2-èµ‹å€¼å˜é‡å€¼"><a href="#2-èµ‹å€¼å˜é‡å€¼" class="headerlink" title="2. èµ‹å€¼å˜é‡å€¼"></a>2. èµ‹å€¼å˜é‡å€¼</h4><p>ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶åŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼æ—¶ï¼š</p><ul><li>åŸºæœ¬ç±»å‹ï¼šåœ¨å˜é‡å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å€¼ï¼Œå¹¶å°†å…¶å€¼å¤åˆ¶ç»™æ–°å˜é‡åˆ†é…çš„ä½ç½®ä¸Šï¼›ï¼ˆå®Œå…¨ç‹¬ç«‹çš„ä¸¤ä¸ªå˜é‡ï¼‰<br>ä¾‹å¦‚ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">111</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line"><span class="built_in">console</span>.log(b);                 <span class="comment">//111</span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­å¯çŸ¥ï¼šå˜é‡bçš„å€¼åªæ˜¯å˜é‡açš„å€¼çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸¤è€…çš„å€¼111æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚</p><ul><li>å¼•ç”¨ç±»å‹ï¼šå°†å­˜å‚¨åœ¨å˜é‡å¯¹è±¡ä¸­çš„å€¼å¤åˆ¶ä¸€ä»½æ”¾åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ç©ºé—´ä¸­ï¼›ï¼ˆå¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡çš„ä¸¤ä¸ªå˜é‡ï¼‰</li></ul><p>å¼•ç”¨ç±»å‹çš„å€¼çš„å‰¯æœ¬å®é™…æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å­˜å‚¨åœ¨å †ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚<br>ä¾‹å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = <span class="keyword">new</span> <span class="built_in">Object</span>;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj1;</span><br><span class="line">obj1.name = <span class="string">"æ¨å­é¾™"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj2,name);                 <span class="comment">// Object &#123; name="æ¨å­é¾™"&#125; æ¨å­é¾™</span></span><br></pre></td></tr></table></figure></p><p>ä»£ç ä¸­å¯çŸ¥ï¼šobj1å’Œobj2éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡Objectï¼›æ‰€ä»¥ï¼Œä¸ºobj1æ·»åŠ çš„nameå±æ€§ï¼Œé€šè¿‡obj2ä¹Ÿå¯ä»¥è®¿é—®çš„åˆ°ã€‚</p><h4 id="3-ä¼ é€’å‚æ•°"><a href="#3-ä¼ é€’å‚æ•°" class="headerlink" title="3. ä¼ é€’å‚æ•°"></a>3. ä¼ é€’å‚æ•°</h4><p>æˆ‘ä»¬éƒ½çŸ¥é“åŸºæœ¬ç±»å‹æ˜¯<strong>æŒ‰å€¼è®¿é—®</strong>çš„ï¼Œå› ä¸ºå¯ä»¥è®¿é—®ä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼ã€‚<br>æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯<strong>æŒ‰å€¼ä¼ é€’</strong>çš„ã€‚</p><ul><li>åŸºæœ¬ç±»å‹ï¼šåŸºæœ¬ç±»å‹å€¼çš„ä¼ é€’å¦‚åŒåŸºæœ¬ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼›<br>åœ¨å‘å‚æ•°ä¼ é€’å€¼ï¼Œè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆå‘½åå‚æ•°ï¼‰ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¸ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  num += <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> result = fn(a);</span><br><span class="line"><span class="built_in">console</span>.log(result);        <span class="comment">//20</span></span><br><span class="line"><span class="built_in">console</span>.log(a);             <span class="comment">//10</span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­å¯çŸ¥ï¼šå‚æ•°numå’Œå˜é‡aäº’ä¸ç›¸è¯†ï¼Œåªæ˜¯æœ‰ç€ç›¸åŒçš„å€¼è€Œå·²ï¼Œç”¨å®Œä¹‹åï¼Œä½ è¿˜æ˜¯ä½ ï¼Œæˆ‘è¿˜æ˜¯æˆ‘ï¼Œäº’ä¸å¹²æ”¿ã€‚</p><ul><li>å¼•ç”¨ç±»å‹ï¼šå¼•ç”¨ç±»å‹çš„ä¼ é€’å¦‚åŒå¼•ç”¨ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼›<br>åœ¨å‘å‚æ•°ä¼ é€’å€¼æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå€¼åœ¨å†…å­˜ä¸­çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚</li></ul><p>ä¾‹å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj.name = <span class="string">'æ¨å­é¾™'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">fn(person);</span><br><span class="line"><span class="built_in">console</span>.log(person.name);           <span class="comment">//æ¨å­é¾™</span></span><br></pre></td></tr></table></figure></p><p>ä»£ç ä¸­å¯çŸ¥ï¼šåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå‚æ•°objå’Œå˜é‡personå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡Objectï¼Œæ‰€ä»¥ï¼Œä½ ä¸åŠ¨æˆ‘ä¹Ÿä¸åŠ¨ï¼Œä½ åŠ¨æˆ‘ä¹ŸåŠ¨ï¼Œä½ ä¸­æœ‰æˆ‘ï¼Œæˆ‘ä¸­æœ‰ä½ ï¼Œæƒ…ä¹‰ç»µç»µï¼Œç»ä¹…ä¸æ¯â€¦â€¦</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼šå³ä½¿å˜é‡personæ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œä½†æ˜¯å‚æ•°objï¼ˆæƒ³è±¡æˆå±€éƒ¨å˜é‡ï¼‰è¿˜æ˜¯ä¼šæŒ‰å¼•ç”¨æ¥è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><blockquote><p> è®¿é—®å˜é‡æœ‰æŒ‰å€¼å’ŒæŒ‰å¼•ç”¨ä¸¤ç§æ–¹å¼ï¼Œå‚æ•°åªèƒ½æŒ‰å€¼ä¼ é€’ã€‚</p></blockquote><h4 id="4-æ£€æµ‹ç±»å‹"><a href="#4-æ£€æµ‹ç±»å‹" class="headerlink" title="4. æ£€æµ‹ç±»å‹"></a>4. æ£€æµ‹ç±»å‹</h4><ul><li>åŸºæœ¬ç±»å‹ï¼š<code>typeof</code></li><li>å¼•ç”¨ç±»å‹ï¼š<code>instanceof</code>ï¼ˆå¯¹è±¡æˆ–nullï¼‰</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'Yang Zilong'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">24</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">var</span> d = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> e;</span><br><span class="line"><span class="keyword">var</span> g = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">var</span> f = <span class="literal">null</span>;  <span class="comment">// æ¯”è¾ƒç‰¹æ®Š</span></span><br><span class="line"><span class="keyword">var</span> h = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a); <span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b); <span class="comment">//number </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> c); <span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> d); <span class="comment">//boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> e); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> g); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> h); <span class="comment">//object</span></span><br></pre></td></tr></table></figure><blockquote><p>æ‰€ç”¨å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯Objectçš„å®ä¾‹ã€‚</p></blockquote><p>å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> num = [<span class="number">1</span>,<span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/.at/i</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person <span class="keyword">instanceof</span> <span class="built_in">Object</span>);     <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(num <span class="keyword">instanceof</span> <span class="built_in">Object</span>);        <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(num <span class="keyword">instanceof</span> <span class="built_in">Array</span>);         <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(pattern <span class="keyword">instanceof</span> <span class="built_in">Object</span>);    <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(pattern <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>);    <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><blockquote><p>ä½¿ç”¨<code>instanceof</code>æ£€æµ‹åŸºæœ¬ç±»å‹ï¼Œä¼šè¿”å›<code>false</code>ï¼ŒåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ã€‚</p></blockquote><ul><li>å‚è€ƒèµ„æ–™ï¼šã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ç¬¬å››ç« </li><li>åŒæ­¥äºï¼š <a href="https://juejin.im/post/5c73a28cf265da2de52d9390" target="_blank" rel="noopener">æ˜é‡‘</a>ã€<a href="https://www.imooc.com/article/280082" target="_blank" rel="noopener">æ…•è¯¾ç½‘</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆæ¢JavaScriptä¹‹Prototype</title>
      <link href="/2019/02/25/js-prototype/"/>
      <url>/2019/02/25/js-prototype/</url>
      
        <content type="html"><![CDATA[<h2 id="Array-prototype"><a href="#Array-prototype" class="headerlink" title="Array.prototype"></a><code>Array.prototype</code></h2><p><strong>æ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ª prototype å±æ€§</strong>ï¼Œä¸ç®¡æ˜¯ä½ è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯å‡½æ•°å†…ç½®çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype)  <span class="comment">// &#123;constructor: Æ’&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype.constructor === fn)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><a id="more"></a><p><img src="https://user-gold-cdn.xitu.io/2019/2/25/169237e0c93f8c42?w=410&amp;h=206&amp;f=png&amp;s=18863" alt="image"></p><p>è¿™é‡Œçš„ <code>fn.prototype</code> æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„ <code>constructor</code> å±æ€§åˆæŒ‡å›äº†è¯¥å‡½æ•°æœ¬èº« fnã€‚</p><p>å³<strong>æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª consctructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</strong>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span> === <span class="built_in">Array</span>.prototype.constructor <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/25/169237e0c9502534?w=417&amp;h=258&amp;f=png&amp;s=25521" alt="image"></p><p>æˆ‘ä»¬æ¥ç€çœ‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype) <span class="comment">// [constructor: Æ’, concat: Æ’, copyWithin: Æ’, fill: Æ’, find: Æ’, â€¦]</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œé™¤äº† constructor å±æ€§ï¼Œè¿˜æœ‰å…¶ä»–å†…ç½®çš„å±æ€§ï¼Œå³æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ“ä½œæ•°ç»„çš„æ–¹æ³•ã€‚</p><h2 id="proto-éšå¼åŸå‹"><a href="#proto-éšå¼åŸå‹" class="headerlink" title="__proto__(éšå¼åŸå‹)"></a><code>__proto__</code>(éšå¼åŸå‹)</h2><p><strong>æ‰€æœ‰é€šè¿‡å‡½æ•° <code>new</code> ï¼ˆæ„é€ å‡½æ•°ï¼‰å‡ºæ¥çš„ä¸œè¥¿ï¼Œéƒ½æœ‰ä¸€ä¸ª <code>__proto__</code> æŒ‡å‘è¯¥å‡½æ•°çš„ <code>prototype</code></strong>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">arr.__proto__ === <span class="built_in">Array</span>.prototype <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Array</span> === <span class="built_in">Array</span>.prototype.constructor <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2019/2/25/169237e0c9690ff1?w=427&amp;h=333&amp;f=png&amp;s=32313" alt="image"></p><p>è¯´ç™½äº†ï¼Œé€šè¿‡æ„é€ å‡½æ•° new å‡ºæ¥çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„<code>__proto__</code>å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆå³<code>Array.prototype</code>ï¼‰ï¼Œæ‰€ä»¥ï¼Œè¯¥å‡½æ•°ä¸æ„é€ å‡½æ•°ä¹‹é—´æ²¡æœ‰ä»€ä¹ˆå…³è”ï¼Œæ˜¯é€šè¿‡ åŸå‹å¯¹è±¡ äº§ç”Ÿäº†è”ç³»ï¼Œè¿™ä¹Ÿå°±æ˜¯åŸå‹é“¾ç»§æ‰¿çš„é›å½¢å§ã€‚</p><p>ä¸¾ä¸ªå…³äºç»§æ‰¿ extends çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Animal eat'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.bark = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Dog bark'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»‘å®šåŸå‹ï¼Œå®ç°ç»§æ‰¿</span></span><br><span class="line">Dog.prototype = <span class="keyword">new</span> Animal()</span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog()</span><br><span class="line"></span><br><span class="line">dog.eat()  <span class="comment">// Animal eat</span></span><br><span class="line">dog.bark()  <span class="comment">// Dog bark</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çœ‹æ˜ç™½äº†ï¼Œé‚£ä¹ˆES6çš„ç»§æ‰¿æˆ‘ä»¬ä¹Ÿå°±å¯ä»¥æ˜ç™½åŸç†äº†ï¼Œå³ <code>class Dog extends Animal</code> ç›¸å½“äº <code>Dog.prototype = new Animal()</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  eat() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Animal eat!'</span> + <span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name) </span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  bark() &#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Dog bark!'</span> + <span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> Dog(<span class="string">'å“ˆå£«å¥‡'</span>)</span><br><span class="line">dog.eat()</span><br><span class="line">dog.bark()</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¸…æ¥šä¸ºä»€ä¹ˆèƒ½è¿™æ ·ï¼š</p><p><strong>å½“æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆæ•°ç»„ï¼‰çš„æŸä¸ªåŠŸèƒ½æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«å…·æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç›´æ¥è°ƒç”¨ï¼Œæ²¡æœ‰çš„è¯ï¼Œé‚£å°±å»è‡ªèº«çš„<code>__proto__</code>å±æ€§ä¸­å»æ‰¾</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  myfn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'myfn'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.myfn() <span class="comment">// 'myfn'</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">'myfn'</span>)  <span class="comment">//true</span></span><br><span class="line">obj.toString()  <span class="comment">// "[object Object]"</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">'toString'</span>)  <span class="comment">// false</span></span><br><span class="line">obj.__proto__.hasOwnProperty(<span class="string">'toString'</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><code>hasOwnProperty()</code>å°±å¯ä»¥å¾—å‡ºè¿™ä¸ªå±æ€§æ˜¯å¦æ˜¯å±äºè¯¥å¯¹è±¡æœ¬èº«çš„å±æ€§:</p><ul><li>myfn æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œ<code>obj.hasOwnProperty(&#39;myfn&#39;)</code>ä¸º true</li><li>toString() æˆ‘ä»¬ä¸æ˜¯è‡ªå®šä¹‰çš„ï¼Œå´å¯ä»¥ä½¿ç”¨ï¼ŒæŸ¥ä¸€ä¸‹æ˜¯å¦å±äºè‡ªå®šä¹‰å±æ€§ï¼Œ<code>obj.hasOwnProperty(&#39;toString&#39;)</code>ï¼Œç­”æ¡ˆä¸ºfalse</li><li>æ—¢ç„¶ä¸å±äºè‡ªå®šä¹‰å±æ€§ï¼Œé‚£å°±å»è‡ªèº«çš„<code>__proto__</code>å»æ‰¾ï¼Œç„¶åå»åŸå‹å¯¹è±¡ä¸ŠæŸ¥ä¸€ä¸‹ï¼Œ<code>obj.__proto__.hasOwnProperty(&#39;toString&#39;)</code>ï¼Œå“¦ï¼ŒåŸæ¥åœ¨è¿™å„¿</li></ul><p>åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°<code>Array.prototype.concat</code>ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„<code>[].concat</code>ï¼Œ<code>[]</code>ï¼Œå› ä¸º<code>[].__proto__ === Array.prototype</code></p><h2 id="proto-æ˜¯å¯ä¿®æ”¹çš„"><a href="#proto-æ˜¯å¯ä¿®æ”¹çš„" class="headerlink" title="__proto__æ˜¯å¯ä¿®æ”¹çš„"></a><code>__proto__</code>æ˜¯å¯ä¿®æ”¹çš„</h2><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ª<code>addClass()</code>æ–¹æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.__proto__.addClass = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">&#125;</span><br><span class="line">arr.push(<span class="number">4</span>);</span><br><span class="line">arr.addClass();   <span class="comment">// 123</span></span><br></pre></td></tr></table></figure></p><p><img src="https://user-gold-cdn.xitu.io/2019/2/25/169237e0c9bd1a05?w=542&amp;h=407&amp;f=png&amp;s=46941" alt="image"></p><p>ä½†æ˜¯ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œå¦‚ä¸‹é‡å†™ä¹‹åï¼Œå°±æ²¡æœ‰äº†è¯¸å¦‚ pushã€concatç­‰æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr.__proto__ = &#123;</span><br><span class="line">    addClass: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">arr.push(<span class="number">3</span>)  <span class="comment">//Uncaught TypeError: arr.push is not a function</span></span><br></pre></td></tr></table></figure><h3 id="Object-prototypeçš„åŸå‹"><a href="#Object-prototypeçš„åŸå‹" class="headerlink" title="Object.prototypeçš„åŸå‹"></a><code>Object.prototype</code>çš„åŸå‹</h3><p>ä¸‡ç‰©çš†å¯¹è±¡ï¼Œåˆ°æœ€åä¾æ—§æ˜¯å¯¹è±¡ï¼Œæœ€åè¿™ä¸ªä¸œä¸œæ˜¯ä¸ªå•¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•° Person</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹å¯¹è±¡ myfnï¼Œå®ƒçš„ éšå¼åŸå‹ æŒ‡å‘äº†å…¶æ„é€ å‡½æ•°çš„ åŸå‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> myfn = <span class="keyword">new</span> Person()</span><br><span class="line">myfn.__proto__ === Person.prototype  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‚£æ„é€ å‡½æ•° Person çš„ éšå¼åŸå‹åˆæŒ‡å‘äº†è°å‘¢</span></span><br><span class="line">Person.prototype.__proto__ === <span class="built_in">Object</span>.prototype  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Functionå‘</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå‘¢</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">fn.prototype.__proto__ === <span class="built_in">Object</span>.prototype  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.__proto__ === <span class="literal">null</span>  <span class="comment">//true</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>  <span class="comment">//"object"</span></span><br></pre></td></tr></table></figure></p><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul><li><p>æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ª <code>prototype</code>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºå‡ºæ¥çš„å®ä¾‹ï¼ˆå¦‚myfnï¼‰çš„åŸå‹ï¼ˆå¦‚<code>myfn.__proto__</code>ï¼‰,å³ï¼š<code>myfn.__proto__ === Person.prototype</code></p></li><li><p>æ‰€æœ‰çš„å¯¹è±¡ï¼ˆé™¤nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ï¼Œæ¯”å¦‚ï¼š<code>myfn.__proto__ === Person.prototype</code></p></li><li><p>åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ ¹æ®ä¸Šæ¡ï¼Œé‚£åŸå‹çš„åŸå‹ï¼Œå°±æ˜¯<code>Object.prototype</code></p></li><li><p>æœ€åçš„nullå¯¹è±¡ï¼Œå¯ä»¥å½“åšæ˜¯ ä»€ä¹ˆéƒ½æ²¡æœ‰</p></li></ul><p>ç›—ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å°±æ›´åŠ æ¸…æ¥šäº†ï¼ˆè“è‰²è¿™æ¡è¡¨ç¤ºçš„æ˜¯åŸå‹é“¾ï¼‰<br><img src="https://user-gold-cdn.xitu.io/2019/2/25/169237e0c9a3b9c5?w=590&amp;h=525&amp;f=png&amp;s=40652" alt="image"></p><p>PS: å…³äºåŸå‹å¯¹è±¡è¿™ä¸€å—æœ¬æ¥å°±å¾ˆç»•ï¼Œè‡ªå·±çœ‹æ‡‚äº†ä¸ä¸€å®šå°±çœŸçš„æ‡‚äº†ï¼Œè‡ªå·±æ¢³ç†çš„æ—¶å€™è¿˜æ˜¯æ¼æ´ç™¾å‡ºï¼Œè€Œä¸”è¿˜ä¹±ï¼Œå°±ç®—ç°åœ¨æˆ‘æ¢³ç†äº†ä¸€éï¼Œè¿‡äº›æ—¥å­ï¼Œæˆ‘è¦æ˜¯ä¸å†ç»§ç»­ç¿»é˜…ï¼Œåº”è¯¥åˆè®²ä¸é€šäº†ï¼Œä¸‹é¢çš„èµ„æ–™å¾ˆè¯¦ç»†ï¼Œåœ¨æˆ‘å­¦ä¹ çš„è¿‡ç¨‹ä¸­æä¾›äº†å¾ˆå¤§çš„å¸®åŠ©ï¼Œåœ¨æ­¤æ„Ÿè°¢ä½œè€…ä»¬ï¼</p><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><a href="https://www.kancloud.cn/wangfupeng/zepto-design-srouce/173684" target="_blank" rel="noopener">jsåŸå‹é“¾åŸºç¡€</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ </a></li><li><a href="https://www.cnblogs.com/wangfupeng1988/p/3978131.html" target="_blank" rel="noopener">æ·±å…¥ç†è§£javascriptåŸå‹å’Œé—­åŒ…ï¼ˆ3ï¼‰â€”â€”prototypeåŸå‹</a></li></ul><p>åŒæ­¥äº <a href="https://juejin.im/post/5c73950651882562276c4bb2" target="_blank" rel="noopener">æ˜é‡‘</a> ã€<a href="https://www.qdfuns.com/article.php?mod=view&amp;id=27061d05c8bcf1e650ddddc75ad9c127&amp;uid=32286" target="_blank" rel="noopener">QDfuns</a></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debounce å’Œ Throttle</title>
      <link href="/2019/02/24/debounce-throttle/"/>
      <url>/2019/02/24/debounce-throttle/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡åœ°å€ï¼š<a href="https://www.tuicool.com/articles/YvyQRrv" target="_blank" rel="noopener">Debounce å’Œ Throttle çš„åŸç†åŠå®ç°</a><br><a id="more"></a></p><h3 id="é˜²æŠ–å’ŒèŠ‚æµ"><a href="#é˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="é˜²æŠ–å’ŒèŠ‚æµ"></a>é˜²æŠ–å’ŒèŠ‚æµ</h3><h4 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h4><p>å¦‚è¾“å…¥æ¡†æ—¶ï¼Œåªåœ¨æœ€åæäº¤çš„æ—¶å€™æ ¡éªŒï¼Œå³ï¼šå°†å¤šæ¬¡é«˜é¢‘ç‡æ“ä½œä¼˜åŒ–ä¸ºåªåœ¨æœ€åä¸€æ¬¡æ‰§è¡Œ</p><p>æ€è·¯ï¼šæ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, wait, immediate</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'in'</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(immediate &amp;&amp; !timer) &#123;</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(timer) clearTimeout(timer)</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'timer'</span>)</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">    &#125;, wait);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'è¢«è§¦å‘äº†'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>).onfocus = debounce(test, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><h4 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h4><p>é™ä½é¢‘ç‡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´åæ‰§è¡Œä¸€æ¬¡ï¼Œå°†é«˜é¢‘ç‡æ“ä½œä¼˜åŒ–ä¸ºä½é¢‘ç‡æ“ä½œï¼Œå¦‚æ»šåŠ¨æ¡äº‹ä»¶ï¼Œresizeäº‹ä»¶</p><p>æ€è·¯ï¼šæ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶éƒ½åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ç­‰å¾…æ‰§è¡Œçš„å»¶æ—¶å‡½æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throtte</span>(<span class="params">fn, wait, immediate</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> callNow = immediate</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="keyword">let</span> context = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(callNow) &#123;</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">      callNow = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!timer) &#123;</span><br><span class="line">      timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, throtte(test, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆæ¢Classã€ç»§æ‰¿ã€Promise åŠ ES6 å¸¸ç”¨åŠŸèƒ½</title>
      <link href="/2019/02/24/es6-class/"/>
      <url>/2019/02/24/es6-class/</url>
      
        <content type="html"><![CDATA[<h3 id="Class-è¯­æ³•ç³–"><a href="#Class-è¯­æ³•ç³–" class="headerlink" title="Class - è¯­æ³•ç³–"></a>Class - è¯­æ³•ç³–</h3><ul><li>Class åœ¨è¯­æ³•ä¸Šæ›´è´´åˆé¢å‘å¯¹è±¡çš„å†™æ³•</li><li>Class å®ç°ç»§æ‰¿æ›´åŠ æ˜“è¯»ã€æ˜“ç†è§£</li><li>æ›´æ˜“äºå†™ java ç­‰åç«¯è¯­è¨€çš„ä½¿ç”¨</li><li>æœ¬è´¨è¿˜æ˜¯è¯­æ³•ç³–ï¼Œä½¿ç”¨ prototype</li></ul><a id="more"></a><h4 id="ES5ä¸­çš„å†™æ³•"><a href="#ES5ä¸­çš„å†™æ³•" class="headerlink" title="ES5ä¸­çš„å†™æ³•"></a>ES5ä¸­çš„å†™æ³•</h4><p>è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡<code>Object.getPrototypeOf(m2)</code></p><p>åˆ¤æ–­å®ä¾‹ä¸æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æ˜¯å¦æœ‰å…³ç³»<code>MathHandle2.prototype.isPrototypeOf(m2)</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MathHandle2</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x = x</span><br><span class="line">  <span class="keyword">this</span>.y = y</span><br><span class="line">&#125;</span><br><span class="line">MathHandle2.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.x + <span class="keyword">this</span>.y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m2 = <span class="keyword">new</span> MathHandle2(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(m2.add())</span><br><span class="line"><span class="built_in">console</span>.log(m2.__proto__ === MathHandle2.prototype)  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡Object.getPrototypeOf()</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getPrototypeOf(m2) === MathHandle2.prototype)  <span class="comment">//true</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å®ä¾‹ä¸æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æ˜¯å¦æœ‰å…³ç³»isPrototypeOf()</span></span><br><span class="line"><span class="built_in">console</span>.log(MathHandle2.prototype.isPrototypeOf(m2))  <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><h4 id="ES6ä¸­çš„å†™æ³•"><a href="#ES6ä¸­çš„å†™æ³•" class="headerlink" title="ES6ä¸­çš„å†™æ³•"></a>ES6ä¸­çš„å†™æ³•</h4><p>å¯¹è±¡å®ä¾‹çš„éšå¼åŸå‹ï¼ˆå±æ€§ï¼‰æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡<code>m.__proto__ === MathHandle.prototype</code></p><p>æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡çš„constructorå±æ€§æŒ‡å›äº†æ„é€ å‡½æ•°æœ¬èº«<code>MathHandle.prototype.constructor === MathHandle</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathHandle</span> </span>&#123;   <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="keyword">constructor</span>(x, y) &#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x</span><br><span class="line">    <span class="keyword">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  add() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.x + <span class="keyword">this</span>.y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> MathHandle(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(m.add())  <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡å®ä¾‹çš„éšå¼åŸå‹ï¼ˆå±æ€§ï¼‰æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</span></span><br><span class="line"><span class="built_in">console</span>.log(m.__proto__ === MathHandle.prototype)  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡çš„constructorå±æ€§æŒ‡å›äº†æ„é€ å‡½æ•°æœ¬èº«</span></span><br><span class="line"><span class="built_in">console</span>.log(MathHandle.prototype.constructor === MathHandle)  <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><h4 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Animal eat'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.bark = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Dog bark'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»‘å®šåŸå‹ï¼Œå®ç°ç»§æ‰¿</span></span><br><span class="line">Dog.prototype = <span class="keyword">new</span> Animal()</span><br><span class="line"><span class="keyword">var</span> hashiqi = <span class="keyword">new</span> Dog()</span><br><span class="line">hashiqi.eat()  <span class="comment">// Animal eat</span></span><br><span class="line">hashiqi.bark()  <span class="comment">// Dog bark</span></span><br></pre></td></tr></table></figure><h4 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  eat() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Animal eat!'</span> + <span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name) </span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  bark() &#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Dog bark!'</span> + <span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hashiqi = <span class="keyword">new</span> Dog(<span class="string">'å“ˆå£«å¥‡'</span>)</span><br><span class="line">hashiqi.eat()</span><br><span class="line">hashiqi.bark()</span><br></pre></td></tr></table></figure><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><ul><li>new Promise å®ä¾‹ï¼Œè€Œä¸”è¦ return</li><li>new Promise æ—¶è¦ä¼ å…¥å‡½æ•°ï¼Œå‡½æ•°æœ‰ resolveã€reject ä¸¤ä¸ªå‡½æ•°</li><li>æˆåŠŸæ—¶æ‰§è¡Œ resolve()ï¼Œå¤±è´¥æ—¶æ‰§è¡Œ reject()</li><li>then ç›‘å¬ç»“æœ</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImg</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">    img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(img)</span><br><span class="line">    &#125;</span><br><span class="line">    img.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject()</span><br><span class="line">    &#125;</span><br><span class="line">    img.src = src</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> src1 = <span class="string">'https://img3.mukewang.com/5c611772085966af06000338-240-135.jpg'</span></span><br><span class="line">  <span class="keyword">var</span> src2 = <span class="string">'https://img2.mukewang.com/5c6b7cff08d6895906000338-240-135.jpg'</span></span><br><span class="line">  <span class="keyword">var</span> result1 = loadImg(src1)</span><br><span class="line">  <span class="keyword">var</span> result2 = loadImg(src2)</span><br><span class="line"></span><br><span class="line">  result1.then(<span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç¬¬ä¸€å¼ å›¾ç‰‡'</span>, img.src)</span><br><span class="line">    <span class="keyword">return</span> result2  <span class="comment">//ä¸²è”æ“ä½œ</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç¬¬äºŒå¼ å›¾ç‰‡'</span>, img.src)</span><br><span class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">ex</span>) </span>&#123;  <span class="comment">// ç»Ÿä¸€æ•è·é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">console</span>.log(ex)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Promise.all æ¥å—ä¸€ä¸ª promise å¯¹è±¡çš„æ•°ç»„ï¼Œå¾…å…¨éƒ¨å®Œæˆä¹‹åï¼Œç»Ÿä¸€æ‰§è¡Œ success</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> result3 = loadImg(src1)</span><br><span class="line">  <span class="keyword">var</span> result4 = loadImg(src2)</span><br><span class="line">  <span class="built_in">Promise</span>.all([result3, result4]).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Promise.race æ¥å—ä¸€ä¸ªåŒ…å«å¤šä¸ª promise å¯¹è±¡çš„æ•°ç»„ï¼Œåªè¦æœ‰ä¸€ä¸ªå®Œæˆï¼Œå°±æ‰§è¡Œ success</span></span><br><span class="line">  <span class="built_in">Promise</span>.race([result3,result4]).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'race:'</span>, data)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h3 id="ES6å¸¸ç”¨åŠŸèƒ½"><a href="#ES6å¸¸ç”¨åŠŸèƒ½" class="headerlink" title="ES6å¸¸ç”¨åŠŸèƒ½"></a>ES6å¸¸ç”¨åŠŸèƒ½</h3><ul><li>let const</li><li>å¤šè¡Œå­—ç¬¦ä¸²ã€æ¨¡æ¿å˜é‡</li><li>è§£æ„èµ‹å€¼</li><li>å—çº§ä½œç”¨åŸŸ</li><li>å‡½æ•°é»˜è®¤å‚æ•°</li><li>ç®­å¤´å‡½æ•°</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let const</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">10</span>;</span><br><span class="line">i = <span class="number">20</span>;  <span class="comment">// Uncaught SyntaxError: Identifier 'i' has already been declared</span></span><br><span class="line"><span class="keyword">const</span> j = <span class="number">100</span></span><br><span class="line">j = <span class="number">20</span>  <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šè¡Œå­—ç¬¦ä¸²ã€æ¨¡æ¿å˜é‡</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'yangtao'</span>, age = <span class="number">27</span>;</span><br><span class="line"><span class="keyword">const</span> html = <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;<span class="subst">$&#123;name&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;<span class="subst">$&#123;age&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æ„èµ‹å€¼</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="number">100</span>, <span class="attr">b</span>: <span class="number">200</span>&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;a, b&#125; = obj</span><br><span class="line"><span class="comment">// ç­‰åŒäºï¼ˆå¯¹è±¡æŒ‰ç…§å±æ€§ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="number">100</span>, <span class="attr">b</span>: <span class="number">200</span>&#125;</span><br><span class="line"><span class="keyword">var</span> a = obj.a,</span><br><span class="line">    b = obj.b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'xxx'</span>, <span class="string">'yyy'</span>, <span class="string">'zzz'</span>]</span><br><span class="line"><span class="keyword">const</span> [x, z] = arr</span><br><span class="line"><span class="comment">// ç­‰åŒäº(æ•°ç»„æŒ‰ç…§ç´¢å¼•)</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'xxx'</span>, <span class="string">'yyy'</span>, <span class="string">'zzz'</span>]</span><br><span class="line"><span class="keyword">var</span> x = arr[<span class="number">0</span>],</span><br><span class="line">    z = arr[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="keyword">const</span> myObj = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(item)</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">var</span> myObj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> _item <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(_item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(item);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">num</span>(<span class="params">a,b=<span class="number">0</span></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">num2</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">arguments</span>.length &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">arguments</span>[<span class="number">1</span>] !== <span class="literal">undefined</span> ? <span class="built_in">arguments</span>[<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> myarr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">myarr.map(<span class="function"><span class="params">item</span> =&gt;</span> item + <span class="number">1</span>)</span><br><span class="line">myarr.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> <span class="built_in">console</span>.log(item, index))</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">var</span> myarr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">myarr.map(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item + <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line">myarr.map(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">console</span>.log(item, index);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// thisæŒ‡å‘å¾ˆè¯¡å¼‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'real'</span>, <span class="keyword">this</span>)  <span class="comment">// real &#123;a: 10&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">  arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)  <span class="comment">// window</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">fn.call(&#123;<span class="attr">a</span>: <span class="number">10</span>&#125;)</span><br><span class="line"><span class="comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°ä¿®æ”¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'real'</span>, <span class="keyword">this</span>)  <span class="comment">// real &#123;a: 10&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">  arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">this</span>))  <span class="comment">// &#123;a: 10&#125;</span></span><br><span class="line">&#125;</span><br><span class="line">fn.call(&#123;<span class="attr">a</span>: <span class="number">10</span>&#125;)</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'real'</span>, <span class="keyword">this</span>); <span class="comment">// real &#123;a: 10&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">  arr.map(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(_this);</span><br><span class="line">  &#125;); <span class="comment">// &#123;a: 10&#125;</span></span><br><span class="line">&#125;</span><br><span class="line">fn.call(&#123; <span class="attr">a</span>: <span class="number">10</span> &#125;);</span><br></pre></td></tr></table></figure><h3 id="å…³äº-JS-ä¼—å¤šæ¨¡å—åŒ–æ ‡å‡†"><a href="#å…³äº-JS-ä¼—å¤šæ¨¡å—åŒ–æ ‡å‡†" class="headerlink" title="å…³äº JS ä¼—å¤šæ¨¡å—åŒ–æ ‡å‡†"></a>å…³äº JS ä¼—å¤šæ¨¡å—åŒ–æ ‡å‡†</h3><ul><li>æ²¡æœ‰æ¨¡å—åŒ–</li><li>AMDæˆä¸ºæ ‡å‡†ï¼Œrequire.js(ä¹Ÿæœ‰CMD)</li><li>å‰ç«¯æ‰“åŒ…å·¥å…·ï¼Œæ˜¯node.jsæ¨¡å—åŒ–å¯ä»¥è¢«ä½¿ç”¨</li><li>ES6å‡ºç°ï¼Œæƒ³ç»Ÿä¸€ç°åœ¨æ‰€æœ‰æ¨¡å—åŒ–æ ‡å‡†</li><li>nodejsç§¯ææ”¯æŒï¼Œæµè§ˆå™¨å°šæœªç»Ÿä¸€</li></ul><h4 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h4><ul><li>è¯­æ³•ï¼šimport export(æ³¨æ„æœ‰æ— default)</li><li>ç¯å¢ƒï¼šbabelç¼–è¯‘ ES6 è¯­æ³•ï¼Œæ¨¡å—åŒ–å¯ç”¨ webpack å’Œ rollup</li><li>æ‰©å±•ï¼šå¯¹æ¨¡å—åŒ–æ ‡å‡†ç»Ÿä¸€çš„æœŸå¾…</li></ul><h3 id="Rollup"><a href="#Rollup" class="headerlink" title="Rollup"></a>Rollup</h3><ul><li>rollup åŠŸèƒ½å•ä¸€ï¼Œwebpack åŠŸèƒ½å¼ºå¤§</li><li>å‚è€ƒè®¾è®¡åŸåˆ™å’Œã€ŠLinux/Unixè®¾è®¡æ€æƒ³ã€‹</li><li>å·¥å…·è¦å°½é‡åŠŸèƒ½å•ä¸€ï¼Œå¯é›†æˆï¼Œå¯æ‰©å±•</li><li>gulp + rollup</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯´ä¸€è¯´å¸¸è§çš„è¯·æ±‚å¤´å’Œç›¸åº”å¤´éƒ½æœ‰ä»€ä¹ˆå‘¢</title>
      <link href="/2019/02/20/header-response/"/>
      <url>/2019/02/20/header-response/</url>
      
        <content type="html"><![CDATA[<h3 id="1-è¯·æ±‚-å®¢æˆ·ç«¯-gt-æœåŠ¡ç«¯-request"><a href="#1-è¯·æ±‚-å®¢æˆ·ç«¯-gt-æœåŠ¡ç«¯-request" class="headerlink" title="1.è¯·æ±‚(å®¢æˆ·ç«¯-&gt;æœåŠ¡ç«¯[request])"></a>1.è¯·æ±‚(å®¢æˆ·ç«¯-&gt;æœåŠ¡ç«¯[request])</h3><a id="more"></a><ul><li><code>GET(è¯·æ±‚çš„æ–¹å¼) /newcoder/hello.html</code>(è¯·æ±‚çš„ç›®æ ‡èµ„æº) <code>HTTP/1.1</code>(è¯·æ±‚é‡‡ç”¨çš„åè®®å’Œç‰ˆæœ¬å·) </li><li><code>Accept: */*</code>(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„èµ„æºç±»å‹) </li><li><code>Accept-Language: en-us</code>(å®¢æˆ·ç«¯æ¥æ”¶çš„è¯­è¨€ç±»å‹) </li><li><code>Connection: Keep-Alive</code>(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³») </li><li><code>Host: localhost:8080</code>(è¿æ¥çš„ç›®æ ‡ä¸»æœºå’Œç«¯å£å·) </li><li><code>Referer: http://localhost/links.asp</code>(å‘Šè¯‰æœåŠ¡å™¨æˆ‘æ¥è‡ªäºå“ªé‡Œ) </li><li><code>User-Agent: Mozilla/4.0</code>(å®¢æˆ·ç«¯ç‰ˆæœ¬å·çš„åå­—) </li><li><code>Accept-Encoding: gzip, deflate</code>(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„å‹ç¼©æ•°æ®çš„ç±»å‹) </li><li><code>If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT</code>(ç¼“å­˜æ—¶é—´)  </li><li><code>Cookie</code>(å®¢æˆ·ç«¯æš‚å­˜æœåŠ¡ç«¯çš„ä¿¡æ¯) </li><li><code>Date: Tue, 11 Jul 2000 18:23:51 GMT</code>(å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯çš„æ—¶é—´)</li></ul><h3 id="2-å“åº”-æœåŠ¡ç«¯-gt-å®¢æˆ·ç«¯-response"><a href="#2-å“åº”-æœåŠ¡ç«¯-gt-å®¢æˆ·ç«¯-response" class="headerlink" title="2.å“åº”(æœåŠ¡ç«¯-&gt;å®¢æˆ·ç«¯[response])"></a>2.å“åº”(æœåŠ¡ç«¯-&gt;å®¢æˆ·ç«¯[response])</h3><ul><li><code>HTTP/1.1</code>(å“åº”é‡‡ç”¨çš„åè®®å’Œç‰ˆæœ¬å·) <code>200</code>(çŠ¶æ€ç ) <code>OK</code>(æè¿°ä¿¡æ¯)</li><li><code>Location: http://www.baidu.com</code>(æœåŠ¡ç«¯éœ€è¦å®¢æˆ·ç«¯è®¿é—®çš„é¡µé¢è·¯å¾„) </li><li><code>Server:apache tomcat</code>(æœåŠ¡ç«¯çš„WebæœåŠ¡ç«¯å)</li><li><code>Content-Encoding: gzip</code>(æœåŠ¡ç«¯èƒ½å¤Ÿå‘é€å‹ç¼©ç¼–ç ç±»å‹) </li><li><code>Content-Length: 80</code>(æœåŠ¡ç«¯å‘é€çš„å‹ç¼©æ•°æ®çš„é•¿åº¦) </li><li><code>Content-Language: zh-cn</code>(æœåŠ¡ç«¯å‘é€çš„è¯­è¨€ç±»å‹) </li><li><code>Content-Type: text/html; charset=GB2312</code>(æœåŠ¡ç«¯å‘é€çš„ç±»å‹åŠé‡‡ç”¨çš„ç¼–ç æ–¹å¼)</li><li><code>Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT</code>(æœåŠ¡ç«¯å¯¹è¯¥èµ„æºæœ€åä¿®æ”¹çš„æ—¶é—´)</li><li><code>Refresh: 1;url=http://www.it315.org</code>(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯1ç§’é’Ÿåï¼Œåˆ·æ–°ï¼Œç„¶åè®¿é—®æŒ‡å®šçš„é¡µé¢è·¯å¾„)</li><li><code>Content-Disposition: attachment; filename=aaa.zip</code>(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯ä»¥ä¸‹è½½æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€è¯¥æ–‡ä»¶)</li><li><code>Transfer-Encoding: chunked</code>(åˆ†å—ä¼ é€’æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼‰  </li><li><code>Set-Cookie:SS=Q0=5Lb_nQ; path=/search</code>(æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯çš„æš‚å­˜æ•°æ®)</li><li><code>Expires: -1</code>//3ç§(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®)</li><li><code>Cache-Control: no-cache</code>(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®)  </li><li><code>Pragma: no-cache</code>(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®)   </li><li><code>Connection: close(1.0)/(1.1)Keep-Alive</code>(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³»)  </li><li><code>Date: Tue, 11 Jul 2000 18:23:51 GMT</code>(æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„æ—¶é—´)</li></ul><blockquote><p>åœ¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œå¸¦ä¸Š<code>Access-Control-Allow-Origin</code>å¤´ä¿¡æ¯ï¼Œè§£å†³è·¨åŸŸçš„ä¸€ç§æ–¹æ³•ã€‚</p></blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="https://www.nowcoder.com/test/question/done?tid=21233299&amp;qid=55682#summary" target="_blank" rel="noopener">ä¼ é€é—¨</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºé—­åŒ…çš„ä¸€é“é¢è¯•é¢˜</title>
      <link href="/2019/02/19/js-closure/"/>
      <url>/2019/02/19/js-closure/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡åœ°å€ï¼š<a href="https://www.nowcoder.com/questionTerminal/da4115e308c948169a9a73e50d09a3e7?toCommentId=2555046" target="_blank" rel="noopener">ä¾æ¬¡ç‚¹å‡» 4 ä¸ª li æ ‡ç­¾ï¼Œå“ªä¸€ä¸ªé€‰é¡¹æ˜¯æ­£ç¡®çš„è¿è¡Œç»“æœ</a></p><a id="more"></a><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç°æœ‰å¦‚ä¸‹ html ç»“æ„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¾æ¬¡ç‚¹å‡» 4 ä¸ª li æ ‡ç­¾ï¼Œè¿è¡Œç»“æœæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elements = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line"><span class="keyword">var</span> length = elements.length;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">  elements[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å›ç­”ï¼ˆä¾æ¬¡å¼¹å‡º-4ï¼Œ4ï¼Œ4ï¼Œ4ï¼‰"><a href="#å›ç­”ï¼ˆä¾æ¬¡å¼¹å‡º-4ï¼Œ4ï¼Œ4ï¼Œ4ï¼‰" class="headerlink" title="å›ç­”ï¼ˆä¾æ¬¡å¼¹å‡º 4ï¼Œ4ï¼Œ4ï¼Œ4ï¼‰"></a>å›ç­”ï¼ˆä¾æ¬¡å¼¹å‡º 4ï¼Œ4ï¼Œ4ï¼Œ4ï¼‰</h3><p>ä»¥ä¸‹æ˜¯æˆ‘å½“æ—¶åœ¨ç‰›å®¢ç½‘å›ç­”æ—¶ä»ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¹¦ä¸­æŠ„çš„ï¼š</p><blockquote><p>è¿™æ˜¯ç”±äºä½œç”¨åŸŸé“¾çš„è¿™ç§é…ç½®æœºåˆ¶å¼•å‡ºçš„ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå³é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ã€‚é—­åŒ…æ‰€ä¿å­˜çš„æ˜¯æ•´ä¸ªå˜é‡å¯¹è±¡ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹æ®Šçš„å˜é‡ã€‚</p></blockquote><p>è¿™é‡Œçš„é—­åŒ…å‡½æ•°<code>elements[i].onclick=function(){alert(i);}</code>çš„ä½œç”¨åŸŸé“¾ä¸­ä¿å­˜ç€é—­åŒ…çš„æ´»åŠ¨å¯¹è±¡ï¼ˆè¿™é‡Œä¸ºç©ºï¼‰å’Œå…¨å±€å˜é‡å¯¹è±¡ï¼ˆä¸»è¦æ˜¯ iï¼‰,æ‰€ä»¥ï¼Œå®ƒä»¬å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå˜é‡ iï¼›å½“ç‚¹å‡»å®Œæˆåï¼Œå˜é‡ i=4,ä¹Ÿå°±æ˜¯æ¯ä¸ªå†…éƒ¨å‡½æ•° i çš„å€¼éƒ½æ˜¯ 4ï¼›</p><p>å¯ä»¥é€šè¿‡åˆ›å»ºå¦ä¸€ä¸ªåŒ¿åå‡½æ•°å¼ºåˆ¶è®©é—­åŒ…çš„è¡Œä¸ºç¬¦åˆé¢„æœŸï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> elements = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line">  <span class="keyword">var</span> length = elements.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">    elements[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(num);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨åŒ¿åå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼ å…¥å˜é‡ iï¼Œç”±äºå‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œæ‰€ä»¥å°±ä¼šå°†å˜é‡ i çš„å½“å‰å€¼å¤åˆ¶ç»™å‚æ•° numã€‚è€Œè¿™ä¸ªåŒ¿åå‡½æ•°å†…éƒ¨ï¼Œåˆåˆ›å»ºå¹¶ alert äº†ä¸€ä¸ªè®¿é—® num çš„é—­åŒ…ã€‚è¿™æ ·ï¼Œæ¯ä¸€æ¬¡ç‚¹å‡»éƒ½æœ‰ num å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå› æ­¤å¯ä»¥è¿”å›å„è‡ªä¸åŒçš„æ•°å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Expressã€Koa åˆå§‹åŒ–</title>
      <link href="/2019/02/17/node-express/"/>
      <url>/2019/02/17/node-express/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹æ¯”ä¸€ä¸‹ express å’Œ koa çš„å…¥å£æ–‡ä»¶</p></blockquote><a id="more"></a><h2 id="express-åˆå§‹åŒ–"><a href="#express-åˆå§‹åŒ–" class="headerlink" title="express åˆå§‹åŒ–"></a>express åˆå§‹åŒ–</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createError = <span class="built_in">require</span>(<span class="string">"http-errors"</span>);</span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">"cookie-parser"</span>);</span><br><span class="line"><span class="keyword">var</span> logger = <span class="built_in">require</span>(<span class="string">"morgan"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ è½½è·¯ç”±æ§åˆ¶</span></span><br><span class="line"><span class="keyword">var</span> indexRouter = <span class="built_in">require</span>(<span class="string">"./routes/index"</span>);</span><br><span class="line"><span class="keyword">var</span> usersRouter = <span class="built_in">require</span>(<span class="string">"./routes/users"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º ejs æ¨¡æ¿å¼•æ“å³æ¨¡æ¿æ–‡ä»¶ä½ç½®</span></span><br><span class="line">app.set(<span class="string">"views"</span>, path.join(__dirname, <span class="string">"views"</span>));</span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"ejs"</span>);</span><br><span class="line"><span class="comment">// å®šä¹‰æ—¥å¿—å’Œè¾“å‡ºçº§åˆ«</span></span><br><span class="line">app.use(logger(<span class="string">"dev"</span>));</span><br><span class="line"><span class="comment">// JSON è§£æä¸­é—´ä»¶</span></span><br><span class="line">app.use(express.json());</span><br><span class="line"><span class="comment">// application/x-www-form-urlencodeè¯·æ±‚è§£æä¸­é—´ä»¶</span></span><br><span class="line">app.use(express.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line"><span class="comment">// å®šä¹‰cookieè§£æå™¨</span></span><br><span class="line">app.use(cookieParser());</span><br><span class="line"><span class="comment">// HTTP ä¼ªé€ ä¸­é—´ä»¶</span></span><br><span class="line">app.use(express.methodOverride());</span><br><span class="line"><span class="comment">// å®šä¹‰é™æ€æ–‡ä»¶ç›®å½•</span></span><br><span class="line">app.use(express.static(path.join(__dirname, <span class="string">"public"</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…è·¯å¾„å’Œè·¯ç”±</span></span><br><span class="line">app.use(<span class="string">"/"</span>, indexRouter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 404 é”™è¯¯å¤„ç†</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  next(createError(<span class="number">404</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 500 é”™è¯¯å¤„ç†åŠé”™è¯¯å †æ ˆè·Ÿè¸ª</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err, req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// set locals, only providing error in development</span></span><br><span class="line">  res.locals.message = err.message;</span><br><span class="line">  res.locals.error = req.app.get(<span class="string">"env"</span>) === <span class="string">"development"</span> ? err : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// render the error page</span></span><br><span class="line">  res.status(err.status || <span class="number">500</span>);</span><br><span class="line">  res.render(<span class="string">"error"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = app;</span><br></pre></td></tr></table></figure><h2 id="Koa-åˆå§‹åŒ–"><a href="#Koa-åˆå§‹åŒ–" class="headerlink" title="Koa åˆå§‹åŒ–"></a>Koa åˆå§‹åŒ–</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">"koa"</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="keyword">const</span> views = <span class="built_in">require</span>(<span class="string">"koa-views"</span>);</span><br><span class="line"><span class="keyword">const</span> json = <span class="built_in">require</span>(<span class="string">"koa-json"</span>);</span><br><span class="line"><span class="keyword">const</span> onerror = <span class="built_in">require</span>(<span class="string">"koa-onerror"</span>);</span><br><span class="line"><span class="keyword">const</span> bodyparser = <span class="built_in">require</span>(<span class="string">"koa-bodyparser"</span>);</span><br><span class="line"><span class="keyword">const</span> logger = <span class="built_in">require</span>(<span class="string">"koa-logger"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> index = <span class="built_in">require</span>(<span class="string">"./routes/index"</span>);</span><br><span class="line"><span class="keyword">const</span> users = <span class="built_in">require</span>(<span class="string">"./routes/users"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ENV = app.env;</span><br><span class="line"></span><br><span class="line"><span class="comment">// error handler</span></span><br><span class="line">onerror(app);</span><br><span class="line"></span><br><span class="line"><span class="comment">// middlewares</span></span><br><span class="line">app.use(</span><br><span class="line">  bodyparser(&#123;</span><br><span class="line">    enableTypes: [<span class="string">"json"</span>, <span class="string">"form"</span>, <span class="string">"text"</span>]</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line">app.use(json());</span><br><span class="line"></span><br><span class="line">app.use(logger(<span class="string">"dev"</span>));</span><br><span class="line"></span><br><span class="line">app.use(<span class="built_in">require</span>(<span class="string">"koa-static"</span>)(__dirname + <span class="string">"/public"</span>));</span><br><span class="line"></span><br><span class="line">app.use(</span><br><span class="line">  views(__dirname + <span class="string">"/views"</span>, &#123;</span><br><span class="line">    extension: <span class="string">"pug"</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// logger</span></span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="keyword">const</span> ms = <span class="keyword">new</span> <span class="built_in">Date</span>() - start;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;ctx.method&#125;</span> <span class="subst">$&#123;ctx.url&#125;</span> - <span class="subst">$&#123;ms&#125;</span>ms`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// routes</span></span><br><span class="line">app.use(index.routes(), index.allowedMethods());</span><br><span class="line"><span class="comment">// app.use(users.routes(), users.allowedMethods())</span></span><br><span class="line">app.use(user.routes(), index.allowedMethods());</span><br><span class="line">app.use(blog.routes(), index.allowedMethods());</span><br><span class="line"></span><br><span class="line"><span class="comment">// error-handling</span></span><br><span class="line">app.on(<span class="string">"error"</span>, (err, ctx) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">"server error"</span>, err, ctx);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = app;</span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹ç›®å½•"><a href="#å®ä¾‹ç›®å½•" class="headerlink" title="å®ä¾‹ç›®å½•"></a>å®ä¾‹ç›®å½•</h2><ul><li><a href="https://github.com/yangtao2o/node-express-mongodb/blob/master/doc/doc-01-init.md" target="_blank" rel="noopener">ç½‘ç«™åˆå§‹åŒ–ï¼Œå®ç° GET å’Œ POST çš„ Ajax è¯·æ±‚</a></li><li><a href="https://github.com/yangtao2o/node-express-mongodb/blob/master/doc/doc-02-login.md" target="_blank" rel="noopener">ç™»å½•æ¨¡å—</a></li><li><a href="https://github.com/yangtao2o/node-express-mongodb/blob/master/doc/doc-02-login.md" target="_blank" rel="noopener">ä¸Šä¼ å›¾ç‰‡æ¨¡å—</a></li></ul><blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/jiaoyanlin/myNodeProject" target="_blank" rel="noopener">Node.js+Express+MongoDB å»ºç«™å®ä¾‹</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueç»å…¸å®ä¾‹ ToDoList</title>
      <link href="/2019/02/17/vue-todolist/"/>
      <url>/2019/02/17/vue-todolist/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨webpackæ„å»ºä¸€ä¸ªvueçš„ç®€æ˜“å¼€å‘ç¯å¢ƒå¹¶æ·»åŠ ä¸€ä¸ªTodo demo</p></blockquote><h3 id="ToDoList"><a href="#ToDoList" class="headerlink" title="ToDoList"></a>ToDoList</h3><h4 id="ä¼ é€é—¨ï¼šDemo-amp-amp-Github"><a href="#ä¼ é€é—¨ï¼šDemo-amp-amp-Github" class="headerlink" title="ä¼ é€é—¨ï¼šDemo &amp;&amp; Github"></a>ä¼ é€é—¨ï¼š<a href="https://istaotao.com/todo/dist/" target="_blank" rel="noopener">Demo</a> &amp;&amp; <a href="https://github.com/yangtao2o/todo" target="_blank" rel="noopener">Github</a></h4><a id="more"></a><p>ä¸‹è½½ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/yangtao2o/todo.git</span><br></pre></td></tr></table></figure></p><p>ä¸‹è½½ä¾èµ–ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></p><p>æœ¬åœ°è¿è¡Œï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure></p><p>è®¿é—®åœ°å€ï¼š<code>http://localhost:8000</code></p><p>ç”Ÿäº§è¿è¡Œï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠVue.jså®æˆ˜ã€‹ä¹‹å‰ç«¯è·¯ç”±ä¸vue-router</title>
      <link href="/2019/02/04/vue-router/"/>
      <url>/2019/02/04/vue-router/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰ç«¯è·¯ç”±ä¸-vue-router"><a href="#å‰ç«¯è·¯ç”±ä¸-vue-router" class="headerlink" title="å‰ç«¯è·¯ç”±ä¸ vue-router"></a>å‰ç«¯è·¯ç”±ä¸ vue-router</h3><a id="more"></a><h4 id="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±</h4><blockquote><p>æ¯æ¬¡ GET æˆ–è€… POST è¯·æ±‚åœ¨æœåŠ¡ç«¯æœ‰ä¸€ä¸ªä¸“é—¨çš„æ­£åˆ™é…ç½®åˆ—è¡¨ï¼Œç„¶ååŒ¹é…åˆ°å…·ä½“çš„ä¸€æ¡è·¯å¾„åï¼Œåˆ†å‘åˆ°ä¸åŒçš„ Controllerï¼Œè¿›è¡Œå„ç§æ“ä½œï¼Œæœ€ç»ˆå°† html æˆ–æ•°æ®è¿”å›ç»™å‰ç«¯ï¼Œè¿™å°±å®Œæˆäº†ä¸€æ¬¡ IOã€‚</p></blockquote><p>å‰ç«¯è·¯ç”±çš„å®ç°æœ‰ä¸¤ç§ï¼š</p><ul><li>URLçš„hashï¼Œå³é”šç‚¹ï¼ˆ#ï¼‰ï¼Œjs é€šè¿‡ hashChange äº‹ä»¶ç›‘å¬ url çš„å˜åŒ–</li><li>HTML5 çš„ History æ¨¡å¼</li></ul><p>ä¼˜ç‚¹ï¼š</p><ul><li>é¡µé¢æŒä¹…æ€§ï¼Œå¦‚éŸ³ä¹ç½‘ç«™</li><li>å‰åç«¯å½»åº•åˆ†ç¦»ï¼Œå¦‚ Angular çš„ ngRouterï¼ŒReact çš„ ReactRouterï¼Œè¿˜æœ‰ Vue çš„ vue-router</li></ul><p>éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼š</p><ul><li>é¡µé¢çš„æ‹”æ’æ€§</li><li>é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ</li><li>å†…å­˜ç®¡ç†ç­‰</li></ul><h4 id="vue-router-åŸºæœ¬ç”¨æ³•"><a href="#vue-router-åŸºæœ¬ç”¨æ³•" class="headerlink" title="vue-router åŸºæœ¬ç”¨æ³•"></a>vue-router åŸºæœ¬ç”¨æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å»ºç›®å½• router</span></span><br><span class="line"><span class="comment"># å®‰è£… vue-router</span></span><br><span class="line">npm i -S vue-router</span><br><span class="line"></span><br><span class="line"><span class="comment"># index.jsæ·»åŠ </span></span><br><span class="line">import VueRouter from <span class="string">'vue-router'</span>;</span><br><span class="line">Vue.use(VueRouter);</span><br></pre></td></tr></table></figure><p>åœ¨ç›®å½• router æ–°å»º views ç›®å½•ï¼Œæ¥ç€æ–°å»º about.vueã€ index.vueã€ user.vueç­‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> Routers = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/index'</span>,</span><br><span class="line">    component: <span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">require</span>([<span class="string">'../router/views/index.vue'</span>], resolve)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/about'</span>,</span><br><span class="line">    component: <span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">require</span>([<span class="string">'../router/views/about.vue'</span>], resolve)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'*'</span>,</span><br><span class="line">    redirect: <span class="string">'../index'</span>  <span class="comment">// 404æŒ‡å‘é¦–é¡µ</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> RouterConfig = &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨HTML5çš„historyè·¯ç”±æ¨¡å¼</span></span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  routes: Routers</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(RouterConfig);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(root);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router: router,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(root);</span><br></pre></td></tr></table></figure><p>è·¯ç”±æ¨¡å¼é€šè¿‡HTML5çš„Historyè·¯ç”±æ¨¡å¼ï¼Œé€šè¿‡ â€˜/â€™è®¾ç½®è·¯å¾„ã€‚ä¿®æ”¹package.json:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "dev": "webpack-dev-server --config webpack.config.js --mode=development --history-api-fallback"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>å¢åŠ äº† <code>--history-api-fallback</code>ï¼Œæ‰€æœ‰çš„è·¯ç”±éƒ½æŒ‡å‘<code>index.html</code>ã€‚</p><p>ç„¶ååœ¨æ ¹å®ä¾‹<code>App.vue</code>ä¸­æ·»åŠ <code>&lt;router-view&gt;&lt;/router-view&gt;</code></p><h4 id="è·³è½¬"><a href="#è·³è½¬" class="headerlink" title="è·³è½¬"></a>è·³è½¬</h4><p>vue-router æœ‰ä¸¤ç§è·³è½¬é¡µé¢çš„æ–¹å¼ï¼š</p><ul><li><code>&lt;router-link&gt;</code>ç»„ä»¶ï¼Œä¼šæ¸²æŸ“æˆ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œå¦‚ï¼š<code>&lt;router-link to=&quot;/about&quot;&gt;è·³è½¬åˆ° about&lt;/router-link&gt;</code><ul><li>tag : <code>tag=&quot;li&quot;</code> æ ‡ç­¾ä¼šè¢«æ¸²æŸ“æˆæŒ‡å®šçš„ <code>&lt;li&gt;</code></li><li>replace : æ— å†å²è®°å½•</li><li>active-class</li></ul></li><li>ä½¿ç”¨routerå®ä¾‹ï¼š <code>$router</code> æ–¹æ³•ï¼Œå¦‚ï¼š<code>this.$router.push(&#39;/index&#39;);</code><ul><li>replace : <code>this.$router.replace(&#39;/index&#39;)</code>;</li><li>go : <code>this.$router.go(-1)</code>;<h4 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h4><blockquote><p>é—®é¢˜ï¼šå¦‚ä½•åœ¨SPAé¡¹ç›®ä¸­ï¼Œä¿®æ”¹ç½‘é¡µçš„æ ‡é¢˜ï¼Ÿ</p></blockquote></li></ul></li></ul><p>ä¸€èˆ¬æˆ‘ä»¬æ˜¯é€šè¿‡<code>window.document.title = &#39;æ ‡é¢˜&#39;</code>æ¥ä¿®æ”¹ï¼Œä½†æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜ã€‚</p><p>vue-router æä¾›äº†å¯¼èˆªé’©å­ <code>beforeEach()</code> å’Œ <code>afterEach()</code>ï¼Œå®ƒä»¬ä¼šåœ¨è·¯ç”±å³å°†æ”¹å˜å‰å’Œæ”¹å˜åè§¦å‘ã€‚</p><p>è¿™æ ·å°±è§£å†³äº†é¡µé¢ä¼—å¤šï¼Œç»´æŠ¤éº»çƒ¦çš„é—®é¢˜ã€‚ï¼ˆmountedé’©å­ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ä»è·¯ç”±å¯¹è±¡ to é‡Œè·å– meta ä¿¡æ¯</span></span><br><span class="line">  <span class="built_in">window</span>.document.title = to.meta.title;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­é¡µé¢æ˜¯å¦ç™»å½•</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">window</span>.localStorage.getItem(<span class="string">'token'</span>)) &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next(<span class="string">'/login'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// é¡µé¢è·³è½¬å›æ¥æ»šåŠ¨æ¡é»˜è®¤åœ¨é¡¶ç«¯</span></span><br><span class="line">  <span class="built_in">window</span>.scroll(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="çŠ¶æ€ç®¡ç†ä¸-Vuex"><a href="#çŠ¶æ€ç®¡ç†ä¸-Vuex" class="headerlink" title="çŠ¶æ€ç®¡ç†ä¸ Vuex"></a>çŠ¶æ€ç®¡ç†ä¸ Vuex</h3><h4 id="çŠ¶æ€ç®¡ç†ä¸ä½¿ç”¨åœºæ™¯"><a href="#çŠ¶æ€ç®¡ç†ä¸ä½¿ç”¨åœºæ™¯" class="headerlink" title="çŠ¶æ€ç®¡ç†ä¸ä½¿ç”¨åœºæ™¯"></a>çŠ¶æ€ç®¡ç†ä¸ä½¿ç”¨åœºæ™¯</h4><p>ç»„ä»¶çš„åŸºæœ¬è¿è¡Œæ¨¡å¼ï¼šä¸€ä¸ªç»„ä»¶åˆ†ä¸ºæ•°æ®å’Œè§†å›¾ï¼Œæ•°æ®æ›´æ–°æ—¶ï¼Œè§†å›¾ä¹Ÿè·Ÿç€æ›´æ–°â€¦è§†å›¾ä¸­åˆå¯ä»¥ç»‘å®šä¸€äº›äº‹ä»¶ï¼Œå®ƒä»¬è§¦å‘methodsé‡ŒæŒ‡å®šçš„æ–¹æ³•ï¼Œä»è€Œå¯ä»¥æ”¹å˜æ•°æ®ã€æ›´æ–°è§†å›¾ã€‚</p><p>å¦‚æœéœ€è¦è·¨ç»„ä»¶å…±äº«æ•°æ®çš„éœ€æ±‚ï¼Œé‚£å°±éœ€è¦å€ŸåŠ© Vuex æ¥ç®¡ç†ç»„ä»¶çŠ¶æ€ã€‚</p><h4 id="Vuex-åŸºæœ¬ç”¨æ³•"><a href="#Vuex-åŸºæœ¬ç”¨æ³•" class="headerlink" title="Vuex åŸºæœ¬ç”¨æ³•"></a>Vuex åŸºæœ¬ç”¨æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -S vuex</span><br></pre></td></tr></table></figure><h4 id="é«˜çº§ç”¨æ³•-1"><a href="#é«˜çº§ç”¨æ³•-1" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h4><h3 id="å®æˆ˜ï¼šä¸­å¤®äº‹ä»¶æ€»çº¿æ’ä»¶-vue-bus-loadingâ€¦"><a href="#å®æˆ˜ï¼šä¸­å¤®äº‹ä»¶æ€»çº¿æ’ä»¶-vue-bus-loadingâ€¦" class="headerlink" title="å®æˆ˜ï¼šä¸­å¤®äº‹ä»¶æ€»çº¿æ’ä»¶ vue-bus(loadingâ€¦)"></a>å®æˆ˜ï¼šä¸­å¤®äº‹ä»¶æ€»çº¿æ’ä»¶ vue-bus(loadingâ€¦)</h3><blockquote><p><a href="https://github.com/yangtao2o/vue-webpack-iview" target="_blank" rel="noopener">ç»ƒä¹ åœ°å€</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue-router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠVue.jså®æˆ˜ã€‹ä¹‹ä½¿ç”¨webpack</title>
      <link href="/2019/02/04/vue-webpack/"/>
      <url>/2019/02/04/vue-webpack/</url>
      
        <content type="html"><![CDATA[<h3 id="ä½¿ç”¨-webpack"><a href="#ä½¿ç”¨-webpack" class="headerlink" title="ä½¿ç”¨ webpack"></a>ä½¿ç”¨ webpack</h3><a id="more"></a><h4 id="å‰ç«¯å·¥ç¨‹åŒ–ä¸webpack"><a href="#å‰ç«¯å·¥ç¨‹åŒ–ä¸webpack" class="headerlink" title="å‰ç«¯å·¥ç¨‹åŒ–ä¸webpack"></a>å‰ç«¯å·¥ç¨‹åŒ–ä¸webpack</h4><p>å‰ç«¯å·¥ç¨‹åŒ–ä¸»è¦è§£å†³çš„é—®é¢˜ï¼š</p><ul><li>JavaScriptã€css ä»£ç çš„åˆå¹¶ä¸å‹ç¼©</li><li>CSS é¢„å¤„ç†ï¼šLessã€Sassã€Stylus çš„ç¼–è¯‘</li><li>ç”Ÿæˆé›ªç¢§å›¾</li><li>ES6 -&gt; ES5</li><li>æ¨¡å—åŒ–ç­‰</li></ul><p>webpack çš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯<code>å•é¡µé¢å¯Œåº”ç”¨ï¼ˆSPAï¼‰</code>ï¼Œå°†ä¸€äº›è¯¸å¦‚ï¼štypescriptã€lessã€jpgã€vueç­‰æ ¼å¼çš„æ–‡ä»¶é€šè¿‡ç‰¹å®šçš„<code>åŠ è½½å™¨ï¼ˆLoaderï¼‰</code>ç¼–è¯‘åï¼Œæœ€ç»ˆç»Ÿä¸€ç”Ÿæˆ .jsã€.cssã€.pngç­‰é™æ€èµ„æºæ–‡ä»¶ã€‚</p><p>å¦‚ä½•æ–‡ä»¶éƒ½å¯ç§°ä¸ºæ˜¯ä¸€ä¸ªæ¨¡å—ã€‚webpackå°±æ˜¯å¤„ç†æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æŠŠä»–ä»¬è¿›è¡Œæ‰“åŒ…ã€‚</p><h3 id="webpack-åŸºç¡€é…ç½®"><a href="#webpack-åŸºç¡€é…ç½®" class="headerlink" title="webpack åŸºç¡€é…ç½®"></a>webpack åŸºç¡€é…ç½®</h3><h4 id="å®‰è£…-webpack-ä¸-webpack-dev-server"><a href="#å®‰è£…-webpack-ä¸-webpack-dev-server" class="headerlink" title="å®‰è£… webpack ä¸ webpack-dev-server"></a>å®‰è£… webpack ä¸ webpack-dev-server</h4><p>åˆå§‹åŒ–<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init  </span><br><span class="line"><span class="comment"># æŒ‰ç…§æç¤ºä¸€æ­¥æ­¥å¾€ä¸‹èµ°</span></span><br></pre></td></tr></table></figure></p><p>æœ¬åœ°å±€éƒ¨å®‰è£… webpack:ï¼ˆä¹¦ä¸­æ˜¯v2ï¼Œæˆ‘çš„éœ€è¦ä¸‹è½½è„šæ‰‹æ¶ -cliï¼‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack --save-dev</span><br><span class="line">npm i -D webpack-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šå¤šå‡ºä¸‹é¢ä¸€é¡¹â€œ</span></span><br><span class="line"><span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">  <span class="string">"webpack"</span>: <span class="string">"^4.28.4"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®‰è£… <code>webpack-dev-server</code>ï¼Œå¯ä»¥å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ã€çƒ­æ›´æ–°ã€æ¥å£ä»£ç†ç­‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure></p><p>æœ€ç»ˆçš„ package.json æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"vue-webpack-iview"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"å­¦ä¹ ã€ŠVue.jså®æˆ˜ã€‹ä¹‹è¿›é˜¶ç¯‡"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"repository"</span>: &#123;</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"git"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"git+https://github.com/yangtao2o/vue-webpack-iview.git"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [</span><br><span class="line">    <span class="string">"vue"</span>,</span><br><span class="line">    <span class="string">"webpack"</span>,</span><br><span class="line">    <span class="string">"iview"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">"yangtao"</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"bugs"</span>: &#123;</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://github.com/yangtao2o/vue-webpack-iview/issues"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"homepage"</span>: <span class="string">"https://github.com/yangtao2o/vue-webpack-iview#readme"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.28.4"</span>,</span><br><span class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.2.1"</span>,</span><br><span class="line">    <span class="attr">"webpack-dev-server"</span>: <span class="string">"^3.1.14"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å°±æ˜¯ä¸€ä¸ª-js-æ–‡ä»¶è€Œå·²"><a href="#å°±æ˜¯ä¸€ä¸ª-js-æ–‡ä»¶è€Œå·²" class="headerlink" title="å°±æ˜¯ä¸€ä¸ª js æ–‡ä»¶è€Œå·²"></a>å°±æ˜¯ä¸€ä¸ª js æ–‡ä»¶è€Œå·²</h4><p>åˆ›å»º <code>webpack.config.js</code>ï¼Œå¹¶åˆå§‹åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œåœ¨ package.json é‡Œé…ç½®å¯åŠ¨é¡¹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">  "dev": "webpack-dev-server --open --config webpack.config.js --mode=development"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// --openï¼šä¼šåœ¨å¯åŠ¨æœåŠ¡æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span><br><span class="line">// --configï¼šæŒ‡å‘ webpack-dev-server è¯»å–çš„é…ç½®æ–‡ä»¶è·¯å¾„</span><br><span class="line">// --host --portï¼šå¯é…ç½® IP å’Œç«¯å£ï¼Œå¦‚ï¼š--host 172.172.172.1 --port 8888</span><br><span class="line">// --mode=developmentï¼šéœ€è¦è¯´æ˜æ˜¯ä»€ä¹ˆç¯å¢ƒï¼Œä¸ç„¶ä¼šæ˜¾ç¤ºè­¦å‘Š</span><br></pre></td></tr></table></figure><p>webpack çš„å…¥å£ï¼ˆEntryï¼‰å’Œå‡ºå£ï¼ˆOutputï¼‰ï¼Œé‡ä¸­ä¹‹é‡ï¼Œæ–°å»º <code>main.js</code>ï¼Œå¹¶åœ¨ <code>webpack.config.js</code> ä¸­è¿›è¡Œå…¥å£å’Œè¾“å‡ºçš„é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var config = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: &apos;./main&apos;  // å…¥å£æ–‡ä»¶ä¸º main.js</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.join(__dirname, &apos;./dist&apos;),  // è¾“å‡ºç›®å½•</span><br><span class="line">    publicPath: &apos;./dist&apos;,  //æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„ç›®å½•</span><br><span class="line">    filename: &apos;main.js&apos;  // æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = config;</span><br></pre></td></tr></table></figure></p><p>ç„¶åï¼š<code>npm run dev</code>ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€é¡µé¢äº†ã€‚</p><h4 id="é€æ­¥å®Œå–„é…ç½®æ–‡ä»¶"><a href="#é€æ­¥å®Œå–„é…ç½®æ–‡ä»¶" class="headerlink" title="é€æ­¥å®Œå–„é…ç½®æ–‡ä»¶"></a>é€æ­¥å®Œå–„é…ç½®æ–‡ä»¶</h4><p>webpack å¯¹äºä¸åŒçš„æ¨¡å—éœ€è¦ä¸åŒçš„åŠ è½½å™¨æ¥å¤„ç†ï¼Œé€šè¿‡å®‰è£…ä¸åŒçš„åŠ è½½å™¨ï¼Œå°±å¯ä»¥å¯¹å„ç§åç¼€åçš„æ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚</p><p>å¦‚å¤„ç† .css æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># css</span></span><br><span class="line">npm install css-loader --save-dev</span><br><span class="line">npm install style-loader --save-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># rules å±æ€§ä¸­å¯ä»¥æŒ‡å®šä¸€ç³»åˆ—çš„ loaders</span></span><br><span class="line"><span class="comment"># æ¯ä¸€ä¸ª loader éƒ½å¿…é¡»åŒ…å« test å’Œ use </span></span><br><span class="line"><span class="comment"># å¤„ç†åä¸º .css çš„æ–‡ä»¶æ—¶ï¼Œå…ˆé€šè¿‡ css-loader è½¬æ¢ï¼Œå†é€šè¿‡ style-loader è½¬æ¢ï¼Œç„¶åç»§ç»­æ‰“åŒ…</span></span><br><span class="line">module: &#123;</span><br><span class="line">  rules: [  </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">test</span>: <span class="string">'/\.css$/'</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">'style-loader'</span>,</span><br><span class="line">        <span class="string">'css-loader'</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨å®é™…çš„ä¸šåŠ¡ä¸­ï¼Œéœ€è¦ä½¿ç”¨æ’ä»¶ <code>extract-text-webpack-plugin</code> æŠŠå„å¤„çš„cssæ–‡ä»¶æå–å‡ºæ¥ã€‚ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª main.css æ–‡ä»¶ï¼Œæœ€ç»ˆåœ¨ index.html é‡ŒåŠ è½½å®ƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install extract-text-webpack-plugin@next --save-dev</span><br></pre></td></tr></table></figure><p>config<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="string">'/\.css$/'</span>,</span><br><span class="line">      use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">        use: <span class="string">'css-loader'</span>,</span><br><span class="line">        fallback: <span class="string">'style-loader'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'main.css'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="å•æ–‡ä»¶ç»„ä»¶ä¸-vue-loader"><a href="#å•æ–‡ä»¶ç»„ä»¶ä¸-vue-loader" class="headerlink" title="å•æ–‡ä»¶ç»„ä»¶ä¸ vue-loader"></a>å•æ–‡ä»¶ç»„ä»¶ä¸ vue-loader</h3><p>å®‰è£…åŠ è½½å™¨ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev vue vue-loader vue-style-loader</span><br><span class="line">npm install --save-dev vue-template-compiler</span><br><span class="line">npm install --save-dev vue-hot-reload-api</span><br><span class="line">npm i -D babel babel-loader</span><br><span class="line">npm i -D @babel/core</span><br><span class="line">npm i -D @babel/preset-env</span><br></pre></td></tr></table></figure></p><p>é…ç½®ï¼š<br><a href="https://www.babeljs.cn/docs/setup/#installation" target="_blank" rel="noopener">Babel-loader</a>ã€<a href="https://vue-loader.vuejs.org/zh/guide/" target="_blank" rel="noopener">Vue-loader</a></p><h4 id="ç»“åˆè‡ªå·±é…ç½®çš„è¿‡ç¨‹ä¸­å…³äºç‰ˆæœ¬å†²çªçš„è§£å†³åŠæ³•"><a href="#ç»“åˆè‡ªå·±é…ç½®çš„è¿‡ç¨‹ä¸­å…³äºç‰ˆæœ¬å†²çªçš„è§£å†³åŠæ³•" class="headerlink" title="ç»“åˆè‡ªå·±é…ç½®çš„è¿‡ç¨‹ä¸­å…³äºç‰ˆæœ¬å†²çªçš„è§£å†³åŠæ³•"></a>ç»“åˆè‡ªå·±é…ç½®çš„è¿‡ç¨‹ä¸­å…³äºç‰ˆæœ¬å†²çªçš„è§£å†³åŠæ³•</h4><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/weixin_40814356/article/details/80625747" target="_blank" rel="noopener">webpack4é…ç½®vueç¯å¢ƒå’Œä¸€äº›å°å‘</a></p><p>ä¸»è¦ä¿®æ”¹ï¼š</p><ul><li><p>index.js(ä¹‹å‰çš„ <code>main.js</code>ï¼Œç›®å½•ä¹Ÿæ”¾åœ¨äº†<code>/src/</code>ä¸‹)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span>;</span><br><span class="line"><span class="keyword">const</span> root = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(root);</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(root);</span><br></pre></td></tr></table></figure></li><li><p>App.vue</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    Hello &#123;&#123; name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'Vue.js'</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>package.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --config webpack.config.js --mode=development"</span>,</span><br><span class="line">  <span class="string">"build"</span>: <span class="string">"webpack --progress --hide-modules --mode=production"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">  <span class="string">"@babel/core"</span>: <span class="string">"^7.2.2"</span>,</span><br><span class="line">  <span class="string">"@babel/preset-env"</span>: <span class="string">"^7.2.3"</span>,</span><br><span class="line">  <span class="string">"babel"</span>: <span class="string">"^6.23.0"</span>,</span><br><span class="line">  <span class="string">"babel-loader"</span>: <span class="string">"^8.0.5"</span>,</span><br><span class="line">  <span class="string">"css-loader"</span>: <span class="string">"^2.1.0"</span>,</span><br><span class="line">  <span class="string">"extract-text-webpack-plugin"</span>: <span class="string">"^4.0.0-beta.0"</span>,</span><br><span class="line">  <span class="string">"style-loader"</span>: <span class="string">"^0.23.1"</span>,</span><br><span class="line">  <span class="string">"vue"</span>: <span class="string">"^2.5.22"</span>,</span><br><span class="line">  <span class="string">"vue-hot-reload-api"</span>: <span class="string">"^2.3.1"</span>,</span><br><span class="line">  <span class="string">"vue-loader"</span>: <span class="string">"^15.5.1"</span>,</span><br><span class="line">  <span class="string">"vue-style-loader"</span>: <span class="string">"^4.1.2"</span>,</span><br><span class="line">  <span class="string">"vue-template-compiler"</span>: <span class="string">"^2.5.22"</span>,</span><br><span class="line">  <span class="string">"webpack"</span>: <span class="string">"^4.28.4"</span>,</span><br><span class="line">  <span class="string">"webpack-cli"</span>: <span class="string">"^3.2.1"</span>,</span><br><span class="line">  <span class="string">"webpack-dev-server"</span>: <span class="string">"^3.1.14"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li><p>webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: path.join(__dirname, <span class="string">'./src/index.js'</span>),</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.join(__dirname, <span class="string">'./dist'</span>),  <span class="comment">// è¾“å‡ºç›®å½•</span></span><br><span class="line">    publicPath: <span class="string">'/dist'</span>,  <span class="comment">//æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„ç›®å½•</span></span><br><span class="line">    filename: <span class="string">'main.js'</span>  <span class="comment">// æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        loader: <span class="string">'vue-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          loaders: &#123;</span><br><span class="line">            css: ExtractTextPlugin.extract(&#123;</span><br><span class="line">              use: <span class="string">'css-loader'</span>,</span><br><span class="line">              fallback: <span class="string">'vue-style-loader'</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">          use: <span class="string">'css-loader'</span>,</span><br><span class="line">          fallback: <span class="string">'style-loader'</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'main.css'</span>),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>.babelrc</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"@babel/preset-env"</span>],</span><br><span class="line">  <span class="attr">"plugins"</span>: [<span class="string">"@babel/plugin-transform-runtime"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./dist/main.css"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./dist/main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ç”¨äºç”Ÿäº§ç¯å¢ƒ-loadingâ€¦"><a href="#ç”¨äºç”Ÿäº§ç¯å¢ƒ-loadingâ€¦" class="headerlink" title="ç”¨äºç”Ÿäº§ç¯å¢ƒ(loadingâ€¦)"></a>ç”¨äºç”Ÿäº§ç¯å¢ƒ(loadingâ€¦)</h3><blockquote><p><a href="https://github.com/yangtao2o/vue-webpack-iview" target="_blank" rel="noopener">ç»ƒä¹ åœ°å€</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡µé¢æ»‘åŠ¨æ—¶çš„åŠ¨ç”»æ’ä»¶ WOW.js</title>
      <link href="/2019/02/04/plugin-wow/"/>
      <url>/2019/02/04/plugin-wow/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å½“åˆæ¬¡åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œéœ€è¦ä¸€äº›åŠ¨ç”»æ¸å…¥ï¼Œå¹¶ä¸”å½“æ»‘åŠ¨åˆ°å½“å‰å†…å®¹æ—¶ä¹Ÿä¼šå‡ºç°åŠ¨ç”»ï¼Œä¹‹åå°±æ¢å¤æ­£å¸¸ï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº† <code>WOW.js</code>ã€‚</p></blockquote><a id="more"></a><p>æ¯”å¦‚ï¼š<a href="https://www.rt-thread.org/" target="_blank" rel="noopener">RT-Thread</a></p><p>å†æ¯”å¦‚è®¾è®¡å¸ˆå¿…å¤‡ï¼š<a href="https://www.sketchapp.com/" target="_blank" rel="noopener">sketchapp</a></p><h2 id="WOW-js"><a href="#WOW-js" class="headerlink" title="WOW.js"></a>WOW.js</h2><p>æ–‡æ¡£ï¼š<a href="https://www.delac.io/wow/index.html" target="_blank" rel="noopener">WOW</a></p><h2 id="Animate-css"><a href="#Animate-css" class="headerlink" title="Animate.css"></a>Animate.css</h2><p>æ¨¡æ‹Ÿï¼š<a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">Animate</a></p><p><code>animate.css</code> åŒ…å«äº†ä¸€ç»„ç‚«é…·ã€æœ‰è¶£ã€è·¨æµè§ˆå™¨çš„åŠ¨ç”»ï¼Œå¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ã€‚</p><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/animate.css/3.7.0/animate.min.css"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">"stylesheet"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/wow/1.1.2/wow.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><p>æ–‡æ¡£ï¼š<a href="https://www.delac.io/wow/docs.html" target="_blank" rel="noopener">Setup WOW.js</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">```html</span><br><span class="line">&lt;div class=&quot;wow bounceInUp&quot;  data-wow-duration=&quot;2s&quot; data-wow-delay=&quot;5s&quot;&gt;</span><br><span class="line">    Content to Reveal Here</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    new WOW().init();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>psï¼šåˆå§‹åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°å†…å®¹å†åŠ¨ç”»æ¸²æŸ“ï¼Œæ‰€ä»¥ç›´æ¥è®¾ç½®ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wow</span> &#123;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm run æŠ¥é”™ï¼šgetaddrinfo ENOTFOUND localhost</title>
      <link href="/2019/01/13/localhost/"/>
      <url>/2019/01/13/localhost/</url>
      
        <content type="html"><![CDATA[<p>å®‰è£… Angular çš„æ—¶å€™ï¼Œå¯åŠ¨ <code>ng serve --open</code>ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š<br><a id="more"></a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  my-app git:(master) ng serve</span><br><span class="line">getaddrinfo ENOTFOUND localhost</span><br><span class="line">Error: getaddrinfo ENOTFOUND localhost</span><br><span class="line">    at errnoException (dns.js:50:10)</span><br><span class="line">    at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:92:26)</span><br></pre></td></tr></table></figure></p><p>æŸ¥äº†ä¸€ä¸‹è‡ªå·±çš„hostsï¼ŒåŸæ¥æˆ‘æŠŠé»˜è®¤çš„hostç»™å…³æ‰äº†ï¼Œé‡æ–°å¯åŠ¨å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1localhost</span><br><span class="line">255.255.255.255broadcasthost</span><br><span class="line">::1             localhost</span><br></pre></td></tr></table></figure><p>é‡æ–° <code>ng serve --open</code>ï¼Œç„¶åï¼š<code>â„¹ ï½¢wdmï½£: Compiled successfully.</code></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ¥é”™ </tag>
            
            <tag> Angular </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹Node.js å¤šç‰ˆæœ¬ç®¡ç†å™¨-Gnvm</title>
      <link href="/2018/12/21/tool-gnvm/"/>
      <url>/2018/12/21/tool-gnvm/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨å¹³æ—¶çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦æŒ‡å®š Node çš„ç‰ˆæœ¬ï¼Œæ‰€æœ‰ç‰ˆæœ¬æ§åˆ¶ç®¡ç†ï¼Œå°±å¾ˆæœ‰å¿…è¦ï¼Œéœ€è¦å“ªä¸ªåˆ‡å“ªä¸ªã€‚<br><a id="more"></a></p><h4 id="MacOS"><a href="#MacOS" class="headerlink" title="MacOS"></a>MacOS</h4><p>ä¸»è¦æœ‰ <code>n</code> å’Œ <code>nvm</code>,å…·ä½“å¯ä»¥è‡ªè¡Œç™¾åº¦ï¼ŒæŸ¥ä¹‹ï¼Œç”¨ä¹‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g n</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥è¾“å…¥ n ,ç„¶åå›è½¦ï¼Œå¯ä¸Šä¸‹é€‰æ‹©ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æœ€æ–°ç‰ˆ/ç¨³å®šç‰ˆ</span></span><br><span class="line">n latest/stable</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">n rm 8.11.3</span><br></pre></td></tr></table></figure><h4 id="ä¸»è¦å®‰åˆ©-Windowsä¸‹çš„-gnvm"><a href="#ä¸»è¦å®‰åˆ©-Windowsä¸‹çš„-gnvm" class="headerlink" title="ä¸»è¦å®‰åˆ© Windowsä¸‹çš„ gnvm"></a>ä¸»è¦å®‰åˆ© Windowsä¸‹çš„ gnvm</h4><p>å®˜æ–¹åœ°å€ï¼š<a href="https://github.com/kenshin/gnvm" target="_blank" rel="noopener">GNVM - Node.js å¤šç‰ˆæœ¬ç®¡ç†å™¨</a></p><h5 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ git bashï¼Œå…¶å®ƒä¸‹è½½æ–¹å¼å¦‚ goã€curlç­‰å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:Kenshin/gnvm-bin.git</span><br></pre></td></tr></table></figure><h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><p>å°†è§£å‹åçš„ <code>gnvm.exe</code> ä¿å­˜åˆ° <code>node.js</code> æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\nodejs</span><br></pre></td></tr></table></figure></p><h5 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h5><p>ç®¡ç†å‘˜èº«ä»½è¿›å…¥ <code>cmd</code>ï¼Œè¾“å…¥ <code>gnvm version</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm version</span><br><span class="line">Current version 0.2.0 64 bit.</span><br><span class="line">Copyright (C) 2014-2016 Kenshin Wang &lt;kenshin@ksria.com&gt;</span><br><span class="line">See https://github.com/kenshin/gnvm <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure></p><h5 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm config</span><br><span class="line">Waring: config file C:\Program Files\nodejs\\.gnvmrc is not exist.</span><br><span class="line">Notice: Config file C:\Program Files\nodejs\\.gnvmrc create success.</span><br><span class="line">Notice: config file path C:\Program Files\nodejs\\.gnvmrc</span><br><span class="line">gnvm config registry is http://nodejs.org/dist/</span><br><span class="line">gnvm config noderoot is C:\Program Files\nodejs\</span><br><span class="line">gnvm config globalversion is 10.14.2-x86</span><br><span class="line">gnvm config latestversion is unknown</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢éœ€è¦ä¸‹è½½çš„-node-ç‰ˆæœ¬"><a href="#æŸ¥è¯¢éœ€è¦ä¸‹è½½çš„-node-ç‰ˆæœ¬" class="headerlink" title="æŸ¥è¯¢éœ€è¦ä¸‹è½½çš„ node ç‰ˆæœ¬"></a>æŸ¥è¯¢éœ€è¦ä¸‹è½½çš„ node ç‰ˆæœ¬</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm search 8.*.*</span><br><span class="line">Search Node.js version rules [8.*.*] from http://nodejs.org/dist/index.json, please <span class="built_in">wait</span>.</span><br><span class="line">+--------------------------------------------------+</span><br><span class="line">| No.   date         node ver    <span class="built_in">exec</span>      npm ver |</span><br><span class="line">+--------------------------------------------------+</span><br><span class="line">  1     2018-12-18   8.14.1      x86 x64   6.4.1</span><br><span class="line">  2     2018-11-27   8.14.0      x86 x64   6.4.1</span><br><span class="line">  3     2018-11-20   8.13.0      x86 x64   6.4.1</span><br><span class="line">  4     2018-09-10   8.12.0      x86 x64   6.4.1</span><br><span class="line">  5     2018-08-15   8.11.4      x86 x64   5.6.0</span><br><span class="line">  6     2018-06-12   8.11.3      x86 x64   5.6.0</span><br><span class="line">  7     2018-05-15   8.11.2      x86 x64   5.6.0</span><br><span class="line">  8     2018-03-29   8.11.1      x86 x64   5.6.0</span><br><span class="line">  9     2018-03-28   8.11.0      x86 x64   5.6.0</span><br><span class="line">  10    2018-03-06   8.10.0      x86 x64   5.6.0</span><br><span class="line">  11    2018-01-02   8.9.4       x86 x64   5.6.0</span><br><span class="line">  12    2017-12-07   8.9.3       x86 x64   5.5.1</span><br><span class="line">  13    2017-12-05   8.9.2       x86 x64   5.5.1</span><br><span class="line">  14    2017-11-07   8.9.1       x86 x64   5.5.1</span><br><span class="line">  15    2017-10-31   8.9.0       x86 x64   5.5.1</span><br><span class="line">  16    2017-10-25   8.8.1       x86 x64   5.4.2</span><br><span class="line">  17    2017-10-24   8.8.0       x86 x64   5.4.2</span><br><span class="line">  18    2017-10-11   8.7.0       x86 x64   5.4.2</span><br><span class="line">  19    2017-09-26   8.6.0       x86 x64   5.3.0</span><br><span class="line">  20    2017-09-12   8.5.0       x86 x64   5.3.0</span><br><span class="line">  21    2017-08-15   8.4.0       x86 x64   5.3.0</span><br><span class="line">  22    2017-08-08   8.3.0       x86 x64   5.3.0</span><br><span class="line">  23    2017-07-20   8.2.1       x86 x64   5.3.0</span><br><span class="line">  24    2017-07-19   8.2.0       x86 x64   5.3.0</span><br><span class="line">  25    2017-07-11   8.1.4       x86 x64   5.0.3</span><br><span class="line">  26    2017-06-29   8.1.3       x86 x64   5.0.3</span><br><span class="line">  27    2017-06-15   8.1.2       x86 x64   5.0.3</span><br><span class="line">  28    2017-06-13   8.1.1       x86 x64   5.0.3</span><br><span class="line">  29    2017-06-08   8.1.0       x86 x64   5.0.3</span><br><span class="line">  30    2017-05-30   8.0.0       x86 x64   5.0.0</span><br><span class="line">+--------------------------------------------------+</span><br></pre></td></tr></table></figure><h5 id="ä¸‹è½½å¸®åŠ©æ–‡æ¡£"><a href="#ä¸‹è½½å¸®åŠ©æ–‡æ¡£" class="headerlink" title="ä¸‹è½½å¸®åŠ©æ–‡æ¡£"></a>ä¸‹è½½å¸®åŠ©æ–‡æ¡£</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm <span class="built_in">help</span> node-version</span><br><span class="line">Show and fix [global] [latest] Node.js version e.g. :</span><br><span class="line">gnvm node-version            :Show Node.js global and latest version, and fix it.</span><br><span class="line">gnvm node-version latest     :Show Node.js latest version, and fix it.</span><br><span class="line">gnvm node-version global     :Show Node.js global version, and fix it.</span><br></pre></td></tr></table></figure><h5 id="ä¸‹è½½node"><a href="#ä¸‹è½½node" class="headerlink" title="ä¸‹è½½node"></a>ä¸‹è½½node</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm install 8.11.3 --global</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬åˆ—è¡¨"><a href="#æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬åˆ—è¡¨"></a>æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬åˆ—è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm ls</span><br><span class="line">Notice: gnvm.exe root is C:\Program Files\nodejs\\</span><br><span class="line">v10.14.2 -- x86</span><br><span class="line">v8.11.2</span><br><span class="line">v8.11.3 -- global</span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬"><a href="#ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬"></a>ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;gnvm use 8.11.3</span><br><span class="line">Set success, global Node.js version is 8.11.3.</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹å½“å‰Nodeç‰ˆæœ¬"><a href="#æŸ¥çœ‹å½“å‰Nodeç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å½“å‰Nodeç‰ˆæœ¬"></a>æŸ¥çœ‹å½“å‰Nodeç‰ˆæœ¬</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32&gt;node -v</span><br><span class="line">v8.11.3</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šå¯ä»¥è§£å†³ç‰ˆæœ¬åˆ‡æ¢é—®é¢˜ï¼Œè¯¦æƒ…å¯æŸ¥è¯¢<a href="http://ksria.com/gnvm/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
            <tag> gnvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šä¿—ç‚¹ç†è§£Nodejsçš„éé˜»å¡åŠäº‹ä»¶é©±åŠ¨</title>
      <link href="/2018/12/18/node-event-io/"/>
      <url>/2018/12/18/node-event-io/</url>
      
        <content type="html"><![CDATA[<h3 id="node-jsæ˜¯ä»€ä¹ˆ"><a href="#node-jsæ˜¯ä»€ä¹ˆ" class="headerlink" title="node.jsæ˜¯ä»€ä¹ˆ"></a>node.jsæ˜¯ä»€ä¹ˆ</h3><blockquote><p>node.jsæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><ul><li>è¿™æ˜¯ä¸€ç§é€šè¿‡JavaScriptè¯­è¨€å¼€å‘webæœåŠ¡ç«¯çš„ä¸œè¥¿</li></ul><blockquote><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨node.jsï¼Ÿ</p></blockquote><ul><li>node.jsæœ‰éé˜»å¡ï¼Œäº‹ä»¶é©±åŠ¨I/Oç­‰ç‰¹æ€§ï¼Œä»è€Œè®©é«˜å¹¶å‘ï¼ˆhigh concurrencyï¼‰åœ¨çš„è½®è¯¢ï¼ˆPollingï¼‰å’Œcometæ„å»ºçš„åº”ç”¨ä¸­æˆä¸ºå¯èƒ½ã€‚<a id="more"></a><h3 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h3></li></ul><p>æµè§ˆå™¨ç»™ç½‘ç«™å‘è¯·æ±‚çš„è¿‡ç¨‹ä¸€ç›´æ²¡æ€ä¹ˆå˜è¿‡ã€‚</p><p>å½“æµè§ˆå™¨ç»™ç½‘ç«™å‘äº†è¯·æ±‚ã€‚æœåŠ¡å™¨æ”¶åˆ°äº†è¯·æ±‚ï¼Œç„¶åå¼€å§‹æœå¯»è¢«è¯·æ±‚çš„èµ„æºã€‚å¦‚æœæœ‰éœ€è¦ï¼ŒæœåŠ¡å™¨è¿˜ä¼šæŸ¥è¯¢ä¸€ä¸‹æ•°æ®åº“ï¼Œæœ€åæŠŠå“åº”ç»“æœä¼ å›æµè§ˆå™¨ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨ä¼ ç»Ÿçš„webæœåŠ¡å™¨ä¸­ï¼ˆæ¯”å¦‚<code>Apache</code>ï¼‰ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè®©æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p><p>åæ¥æœ‰äº†Ajaxã€‚æœ‰äº†Ajaxï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡éƒ½è¯·æ±‚ä¸€ä¸ªå®Œæ•´çš„æ–°é¡µé¢äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæ¯æ¬¡åªè¯·æ±‚éœ€è¦çš„éƒ¨åˆ†é¡µé¢ä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p><p>è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªè¿›æ­¥ã€‚</p><h3 id="é•¿è½®è¯¢"><a href="#é•¿è½®è¯¢" class="headerlink" title="é•¿è½®è¯¢"></a>é•¿è½®è¯¢</h3><p>ä½†æ˜¯æ¯”å¦‚ä½ è¦å»ºä¸€ä¸ª<code>FriendFeed</code>è¿™æ ·çš„ç¤¾äº¤ç½‘ç«™ï¼ˆç±»ä¼¼äººäººç½‘é‚£æ ·çš„åˆ·æœ‹å‹æ–°é²œäº‹çš„ç½‘ç«™ï¼‰ï¼Œä½ çš„å¥½å‹ä¼šéšæ—¶çš„æ¨é€æ–°çš„çŠ¶æ€ï¼Œç„¶åä½ çš„æ–°é²œäº‹ä¼šå®æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚</p><p>è¦è¾¾æˆè¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦è®©ç”¨æˆ·ä¸€ç›´ä¸æœåŠ¡å™¨ä¿æŒä¸€ä¸ªæœ‰æ•ˆè¿æ¥ã€‚ç›®å‰æœ€ç®€å•çš„å®ç°æ–¹æ³•ï¼Œå°±æ˜¯è®©ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒ<code>é•¿è½®è¯¢ï¼ˆlong pollingï¼‰</code>ã€‚</p><p>HTTPè¯·æ±‚ä¸æ˜¯æŒç»­çš„è¿æ¥ï¼Œä½ è¯·æ±‚ä¸€æ¬¡ï¼ŒæœåŠ¡å™¨å“åº”ä¸€æ¬¡ï¼Œç„¶åå°±å®Œäº†ã€‚</p><p><code>é•¿è½®è¯¢æ˜¯ä¸€ç§åˆ©ç”¨HTTPæ¨¡æ‹ŸæŒç»­è¿æ¥çš„æŠ€å·§</code>ã€‚å…·ä½“æ¥è¯´ï¼Œåªè¦é¡µé¢è½½å…¥äº†ï¼Œä¸ç®¡ä½ éœ€ä¸éœ€è¦æœåŠ¡å™¨ç»™ä½ å“åº”ä¿¡æ¯ï¼Œä½ éƒ½ä¼šç»™æœåŠ¡å™¨å‘ä¸€ä¸ªAjaxè¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ä¸åŒäºä¸€èˆ¬çš„Ajaxè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸ä¼šç›´æ¥ç»™ä½ è¿”å›ä¿¡æ¯ï¼Œè€Œæ˜¯å®ƒè¦ç­‰ç€ï¼Œç›´åˆ°æœåŠ¡å™¨è§‰å¾—è¯¥ç»™ä½ å‘ä¿¡æ¯äº†ï¼Œå®ƒæ‰ä¼šå“åº”ã€‚</p><p>æ¯”å¦‚ï¼Œä½ çš„å¥½å‹å‘äº†ä¸€æ¡æ–°é²œäº‹ï¼ŒæœåŠ¡å™¨å°±ä¼šæŠŠè¿™ä¸ªæ–°é²œäº‹å½“åšå“åº”å‘ç»™ä½ çš„æµè§ˆå™¨ï¼Œç„¶åä½ çš„æµè§ˆå™¨å°±åˆ·æ–°é¡µé¢äº†ã€‚æµè§ˆå™¨æ”¶åˆ°å“åº”åˆ·æ–°å®Œä¹‹åï¼Œå†å‘é€ä¸€æ¡æ–°çš„è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¯·æ±‚ä¾ç„¶ä¸ä¼šç«‹å³è¢«å“åº”ã€‚</p><p>äºæ˜¯å°±å¼€å§‹é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚</p><p>åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è®©æµè§ˆå™¨å§‹ç»ˆä¿æŒç­‰å¾…å“åº”çš„çŠ¶æ€ã€‚è™½ç„¶ä»¥ä¸Šè¿‡ç¨‹ä¾ç„¶åªæœ‰éæŒç»­çš„Httpå‚ä¸ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºäº†ä¸€ä¸ªçœ‹ä¼¼æŒç»­çš„è¿æ¥çŠ¶æ€ã€‚</p><h3 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h3><p>æˆ‘ä»¬å†çœ‹ä¼ ç»Ÿçš„æœåŠ¡å™¨ï¼ˆæ¯”å¦‚Apacheï¼‰ã€‚</p><p>æ¯æ¬¡ä¸€ä¸ªæ–°ç”¨æˆ·è¿åˆ°ä½ çš„ç½‘ç«™ä¸Šï¼Œä½ çš„æœåŠ¡å™¨å°±å¾—å¼€ä¸€ä¸ªè¿æ¥ã€‚æ¯ä¸ªè¿æ¥éƒ½éœ€è¦å ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯é—²ç€çš„ï¼ˆæ¯”å¦‚ç­‰ç€ä½ å¥½å‹å‘æ–°é²œäº‹ï¼Œç­‰å¥½å‹å‘å®Œæ‰ç»™ç”¨æˆ·å“åº”ä¿¡æ¯ã€‚æˆ–è€…ç­‰ç€æ•°æ®åº“è¿”å›æŸ¥è¯¢ç»“æœä»€ä¹ˆçš„ï¼‰ã€‚</p><p>è™½ç„¶è¿™äº›è¿›ç¨‹é—²ç€ï¼Œä½†æ˜¯ç…§æ ·å ç”¨å†…å­˜ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœç”¨æˆ·è¿æ¥æ•°çš„å¢é•¿åˆ°ä¸€å®šè§„æ¨¡ï¼Œä½ æœåŠ¡å™¨æ²¡å‡†å°±è¦è€—å…‰å†…å­˜ç›´æ¥ç˜«äº†ã€‚</p><h3 id="éé˜»å¡å’Œäº‹ä»¶é©±åŠ¨"><a href="#éé˜»å¡å’Œäº‹ä»¶é©±åŠ¨" class="headerlink" title="éé˜»å¡å’Œäº‹ä»¶é©±åŠ¨"></a>éé˜»å¡å’Œäº‹ä»¶é©±åŠ¨</h3><p>è¿™ç§æƒ…å†µæ€ä¹ˆè§£å†³ï¼Ÿ</p><p>è§£å†³æ–¹æ³•å°±æ˜¯åˆšæ‰ä¸Šè¾¹è¯´çš„ï¼š<em>éé˜»å¡å’Œäº‹ä»¶é©±åŠ¨</em>ã€‚</p><p>è¿™äº›æ¦‚å¿µåœ¨æˆ‘ä»¬è°ˆçš„è¿™ä¸ªæƒ…æ™¯é‡Œé¢å…¶å®æ²¡é‚£ä¹ˆéš¾ç†è§£ã€‚</p><p>ä½ æŠŠéé˜»å¡çš„æœåŠ¡å™¨æƒ³è±¡æˆä¸€ä¸ªloopå¾ªç¯ï¼Œè¿™ä¸ªloopä¼šä¸€ç›´è·‘ä¸‹å»ã€‚</p><p>ä¸€ä¸ªæ–°è¯·æ±‚æ¥äº†ï¼Œè¿™ä¸ªloopå°±æ¥äº†è¿™ä¸ªè¯·æ±‚ï¼ŒæŠŠè¿™ä¸ªè¯·æ±‚ä¼ ç»™å…¶ä»–çš„è¿›ç¨‹ï¼ˆæ¯”å¦‚ä¼ ç»™ä¸€ä¸ªææ•°æ®åº“æŸ¥è¯¢çš„è¿›ç¨‹ï¼‰ï¼Œç„¶åå“åº”ä¸€ä¸ªå›è°ƒï¼ˆcallbackï¼‰ã€‚</p><p>å®Œäº‹äº†è¿™loopå°±æ¥ç€è·‘ï¼Œæ¥å…¶ä»–çš„è¯·æ±‚ã€‚</p><p>è¿™æ ·ä¸‹æ¥ã€‚æœåŠ¡å™¨å°±ä¸ä¼šåƒä¹‹å‰é‚£æ ·å‚»ç­‰ç€æ•°æ®åº“è¿”å›ç»“æœäº†ã€‚</p><p>å¦‚æœæ•°æ®åº“æŠŠç»“æœè¿”å›æ¥äº†ï¼Œloopå°±æŠŠç»“æœä¼ å›ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæ¥ç€ç»§ç»­è·‘ã€‚</p><p>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œä½ çš„æœåŠ¡å™¨çš„è¿›ç¨‹å°±ä¸ä¼šé—²ç€ç­‰ç€ã€‚</p><p>ä»è€Œåœ¨ç†è®ºä¸Šè¯´ï¼ŒåŒä¸€æ—¶åˆ»çš„æ•°æ®åº“æŸ¥è¯¢æ•°é‡ï¼Œä»¥åŠç”¨æˆ·çš„è¯·æ±‚æ•°é‡å°±æ²¡æœ‰é™åˆ¶äº†ã€‚æœåŠ¡å™¨åªåœ¨ç”¨æˆ·é‚£è¾¹æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™æ‰å“åº”ï¼Œè¿™å°±æ˜¯äº‹ä»¶é©±åŠ¨ã€‚</p><p>FriendFeedæ˜¯ç”¨åŸºäºPythonçš„éé˜»å¡æ¡†æ¶Tornado (çŸ¥ä¹ä¹Ÿç”¨äº†è¿™ä¸ªæ¡†æ¶) æ¥å®ç°ä¸Šé¢è¯´çš„æ–°é²œäº‹åŠŸèƒ½çš„ã€‚ä¸è¿‡ï¼ŒNode.jså°±æ¯”å‰è€…æ›´å¦™äº†ã€‚</p><h3 id="å†çœ‹Node-js"><a href="#å†çœ‹Node-js" class="headerlink" title="å†çœ‹Node.js"></a>å†çœ‹Node.js</h3><p>Node.jsçš„åº”ç”¨æ˜¯é€šè¿‡javascriptå¼€å‘çš„ï¼Œç„¶åç›´æ¥åœ¨Googleçš„å˜æ€V8å¼•æ“ä¸Šè·‘ã€‚</p><p>ç”¨äº†Node.jsï¼Œä½ å°±ä¸ç”¨æ‹…å¿ƒç”¨æˆ·ç«¯çš„è¯·æ±‚ä¼šåœ¨æœåŠ¡å™¨é‡Œè·‘äº†ä¸€æ®µèƒ½å¤Ÿé€ æˆé˜»å¡çš„ä»£ç äº†ã€‚</p><p>å› ä¸ºjavascriptæœ¬èº«å°±æ˜¯äº‹ä»¶é©±åŠ¨çš„è„šæœ¬è¯­è¨€ã€‚</p><p>ä½ å›æƒ³ä¸€ä¸‹ï¼Œåœ¨ç»™å‰ç«¯å†™javascriptçš„æ—¶å€™ï¼Œæ›´å¤šæ—¶å€™ä½ éƒ½æ˜¯åœ¨æäº‹ä»¶å¤„ç†å’Œå›è°ƒå‡½æ•°ã€‚</p><p>javascriptæœ¬èº«å°±æ˜¯ç»™äº‹ä»¶å¤„ç†é‡èº«å®šåˆ¶çš„è¯­è¨€ã€‚</p><p>Node.jsè¿˜æ˜¯å¤„äºåˆæœŸé˜¶æ®µã€‚å¦‚æœä½ æƒ³å¼€å‘ä¸€ä¸ªåŸºäºNode.jsçš„åº”ç”¨ï¼Œä½ åº”è¯¥ä¼šéœ€è¦å†™ä¸€äº›å¾ˆåº•å±‚ä»£ç ã€‚</p><p>ä½†æ˜¯ä¸‹ä¸€ä»£æµè§ˆå™¨å¾ˆå¿«å°±è¦é‡‡ç”¨<code>WebSocket</code>æŠ€æœ¯äº†ï¼Œä»è€Œé•¿è½®è¯¢ä¹Ÿä¼šæ¶ˆå¤±ã€‚</p><p>åœ¨Webå¼€å‘é‡Œï¼ŒNode.jsè¿™ç§ç±»å‹çš„æŠ€æœ¯åªä¼šå˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚</p><p>è‹±æ–‡åŸæ–‡ï¼š<a href="https://www.sitepoint.com/node-js-is-the-new-black/" target="_blank" rel="noopener">Node.js is the New Black</a></p><p>ä¸­æ–‡åŸæ–‡ï¼š<a href="https://www.zhihu.com/question/33578075/answer/56951771" target="_blank" rel="noopener">Node.jsæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ</a></p>]]></content>
      
      
      <categories>
          
          <category> Nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git push æŠ¥é”™ä¹‹ Permission to userA.git denied to userB</title>
      <link href="/2018/12/17/git-push-error/"/>
      <url>/2018/12/17/git-push-error/</url>
      
        <content type="html"><![CDATA[<p>æŠ¥é”™ä¿¡æ¯ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  git-command git:(master) git push</span><br><span class="line">remote: Permission to xxx.git denied to zguii.</span><br><span class="line">fatal: unable to access <span class="string">'https://github.com/xxx.git/'</span>: The requested URL returned error: 403</span><br></pre></td></tr></table></figure></p><a id="more"></a><h3 id="è§£å†³è¿‡ç¨‹"><a href="#è§£å†³è¿‡ç¨‹" class="headerlink" title="è§£å†³è¿‡ç¨‹"></a>è§£å†³è¿‡ç¨‹</h3><h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ä¹‹å‰æˆ‘æœ‰ç™»å½•è¿‡å…¶ä»–è´¦å·ï¼Œå¦‚zguiiï¼Œå¹¶è¿›è¡Œäº†ä¸€ç³»åˆ—æ“ä½œï¼Œåæ¥æˆ‘è¦ä½¿ç”¨è‡ªå·±çš„è´¦å·çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸Šçš„æŠ¥é”™ä¿¡æ¯ã€‚</p><p>åˆšå¼€å§‹å«Œéº»çƒ¦ï¼Œæˆ‘ä½¿ç”¨å®¢æˆ·ç«¯å‘å¸ƒæ“ä½œï¼Œæ­£å¸¸ï¼Œåæ¥ï¼Œå¤šæ¬¡ä½¿ç”¨ <code>git bash</code>ï¼Œå°±å¾ˆç—›è‹¦äº†ï¼Œç´¢æ€§å°±æ”¹ä¸€ä¸‹ã€‚ </p><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>æ—¢ç„¶æ˜¯ç”¨æˆ·æƒé™è¢«å ç”¨äº†ï¼Œè€Œä¸”æˆ‘ä¹Ÿä¸éœ€è¦é‚£ä¸ªç”¨æˆ·äº†ï¼Œé‚£å°±åˆ é™¤å§ã€‚</p><h4 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°åˆ›å»ºæ–‡ä»¶ï¼Œæš‚æ—¶è®¾ç½®å¯†ç ä¸ºç©ºï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿ `id_rsa`ã€`id_rsa.pub`ï¼Œï¼ˆæœ‰å¯èƒ½ä¼šäº§ç”Ÿ config ï¼Œä½†æœ‰å¯èƒ½æ˜¯ç©ºæ–‡ä»¶ï¼‰</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">"yangtaobanner@foxmail.com"</span></span><br><span class="line"></span><br><span class="line">âœ  git-command git:(master) ssh-keygen -t rsa -C <span class="string">"yangtaobanner@foxmail.com"</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/Users/yangtao/.ssh/id_rsa): </span><br><span class="line">/Users/yangtao/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/yangtao/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/yangtao/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶ `id_rsa.pub` é‡Œçš„æ‰€æœ‰å†…å®¹ï¼Œå°†æ­¤ç²˜è´´åˆ°ä½ è¦æ–°å»ºçš„ `SSH key`é‡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é…ç½®</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line">git config --list --global</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•æ˜¯å¦å¯ä»¥è¿æ¥</span></span><br><span class="line">ssh -T git@github.com</span><br><span class="line">Hi yangtao2o! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®å®Œæ¯•ï¼Œå†æ¬¡ <code>git push</code>ï¼Œé¢â€¦ä¾æ—§æŠ¥é”™â€¦<br>æƒ³åˆ°å¯èƒ½æ˜¯ç¼“å­˜ï¼Œå¥½å§ï¼Œæ¸…ï¼å‘ƒå‘ƒâ€¦ä¾ç„¶å¦‚æ­¤â€¦</p><p>å¥½å¤šåˆ†é’Ÿä¹‹åï¼Œå¿½ç„¶æƒ³èµ·è¿˜èƒ½è®¿é—®é»˜è®¤è´¦æˆ·ï¼Œè¯´æ˜è´¦æˆ·ä¾ç„¶å­˜åœ¨ï¼Œç¬¨ï¼</p><p>ç„¶åï¼Œæˆ‘å°±å»é’¥åŒ™ä¸²æŸ¥çœ‹äº†ä¸€ä¸‹ <code>github.com</code>ï¼Œæˆ‘å»ï¼Œè¿˜çœŸæ˜¯å²¿ç„¶ä¸åŠ¨åœ°èººåœ¨é‚£å„¿â€¦</p><p>æ¶ç‹ ç‹ åœ°åˆ ä¹‹ï¼ï¼ï¼</p><p>ç„¶åï¼Œ<code>git push</code>ï¼Œè¾“å…¥ç”¨æˆ·ã€å¯†ç ï¼Œç†¬è¿‡å‡ ç§’ï¼Œåˆ·åˆ·åˆ·ï¼Œçœ‹åˆ°äº†ä¹…è¿çš„ <code>Done</code></p><p>å…¶å®ï¼Œå½’æ ¹ç»“åº•ï¼Œå¦‚æœGitè®¾ç½®é‡Œçš„è´¦æˆ·æ˜¯ä½ è‡ªå·±çš„ï¼Œåªè¦åˆ é™¤é’¥åŒ™ä¸²è´¦æˆ·å°±è¡Œï¼Œæˆ‘ç«Ÿç„¶èµ°äº†è¿™ä¹ˆä¹…çš„å¼¯è·¯ï¼Œè„šå¾ˆç–¼ï¼Œå“¦ä¸ï¼Œè„‘ç“œå­ç–¼ï¼</p><p>PSï¼šMacOS éšè—æ–‡ä»¶å¼€å¯å¿«æ·é”®ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> + ^ + .</span><br></pre></td></tr></table></figure></p><h3 id="windowsè§£å†³æ–¹æ³•"><a href="#windowsè§£å†³æ–¹æ³•" class="headerlink" title="windowsè§£å†³æ–¹æ³•"></a>windowsè§£å†³æ–¹æ³•</h3><p><a href="https://blog.csdn.net/klxh2009/article/details/76019742" target="_blank" rel="noopener">è§£å†³ github push failed ï¼ˆremote: Permission to userA/repo.git denied to userB.ï¼‰</a></p><p>âœ ä¸»è¦æ˜¯åˆ é™¤ä¹‹å‰çš„ç”¨æˆ·ï¼Œå¦‚æˆ‘çš„ä¹‹å‰çš„è´¦æˆ·æ˜¯ <code>zguii</code></p><h3 id="MacOSè§£å†³æ–¹æ³•"><a href="#MacOSè§£å†³æ–¹æ³•" class="headerlink" title="MacOSè§£å†³æ–¹æ³•"></a>MacOSè§£å†³æ–¹æ³•</h3><p><a href="https://www.jianshu.com/p/6621c42ef112" target="_blank" rel="noopener">macä¸‹é…ç½®å¤šä¸ªgitè´¦å·å¹¶è¿›è¡Œè´¦å·åˆ‡æ¢</a></p><p><a href="https://www.jianshu.com/p/b29a3c275f68" target="_blank" rel="noopener">è§£å†³gitæœ¬åœ°å¤šssh keyçš„é—®é¢˜</a></p><p><a href="https://www.zybuluo.com/yangfch3/note/172120" target="_blank" rel="noopener">å¤šä¸ª SSH KEY çš„ç®¡ç†</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> å¼€å‘å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git å¸¸ç”¨å‘½ä»¤ç»ƒä¹ </title>
      <link href="/2018/12/14/git-command/"/>
      <url>/2018/12/14/git-command/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨ <code>git bash</code> çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†å¸¸ç”¨çš„é‚£å‡ æ¡ï¼Œå…¶å®ƒçš„æ€»éœ€è¦æŸ¥æ‰¾æ‰‹å†Œï¼Œç´¢æ€§è·Ÿç€å¤§ç‰›æ€»ç»“çš„æ–‡ç« èµ°ä¸€éå§</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ul><li>Workspace: å·¥ä½œåŒº</li><li>Index / Stage: æš‚å­˜åŒº</li><li>Repository: ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</li><li>Remote: è¿œç¨‹ä»“åº“<a id="more"></a><img src="https://user-images.githubusercontent.com/19526072/49999253-4c690980-ffd1-11e8-892a-bff60b374d12.png" alt="image"></li></ul><h3 id="æ–°å»º"><a href="#æ–°å»º" class="headerlink" title="æ–°å»º"></a>æ–°å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å½“å‰ç›®å½• git-command ä¸‹æ–°å»º Git ä»£ç åº“ï¼Œï¼ˆä¼šç”Ÿæˆ .git æ–‡ä»¶ï¼‰</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºç›®å½• git-command å¹¶å°†å…¶åˆå§‹åŒ–ä¸º Git ä»£ç åº“</span></span><br><span class="line">git init git-command</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»çº¿ä¸Šè·å–ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ä»£ç </span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/yangtao2o/git-command.git</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>Gitçš„è®¾ç½®æ–‡ä»¶ä¸º <code>.gitconfig</code> ï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºé…ç½®ä¿¡æ¯</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹</span></span><br><span class="line">git config --global</span><br><span class="line"></span><br><span class="line">git config --global user.name <span class="string">"yangtao"</span></span><br><span class="line">git config --global user.email <span class="string">"xxx@.qq.com"</span></span><br></pre></td></tr></table></figure><h3 id="å¢åŠ ã€åˆ é™¤æ–‡ä»¶"><a href="#å¢åŠ ã€åˆ é™¤æ–‡ä»¶" class="headerlink" title="å¢åŠ ã€åˆ é™¤æ–‡ä»¶"></a>å¢åŠ ã€åˆ é™¤æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•</span></span><br><span class="line">git add assets</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤</span></span><br><span class="line"><span class="comment"># å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤</span></span><br><span class="line">git add -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶å°†è¿™æ¬¡åˆ é™¤åŠ å…¥æš‚å­˜åŒº</span></span><br><span class="line">git rm [file1] [file2] ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº</span></span><br><span class="line">git rm --cached [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–‡ä»¶åï¼Œå¹¶æ”¾å…¥æš‚å­˜åŒº</span></span><br><span class="line">git mv index.html index-new.html</span><br></pre></td></tr></table></figure><h3 id="ä»£ç æäº¤"><a href="#ä»£ç æäº¤" class="headerlink" title="ä»£ç æäº¤"></a>ä»£ç æäº¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æš‚å­˜åŒºæäº¤åˆ°ä»“åº“åŒº ( -m (msg) )</span></span><br><span class="line">git commit -m <span class="string">"My first commit"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ–‡ä»¶æäº¤</span></span><br><span class="line">git commit [file1] [file2] ... -m [message]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡ commit ä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº</span></span><br><span class="line">git commit -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰çš„ diff ä¿¡æ¯</span></span><br><span class="line">git commit -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä¸€æ¬¡æ–°çš„ commit ï¼Œæäº¤ä¸Šä¸€æ¬¡æäº¤</span></span><br><span class="line"><span class="comment"># å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡ commit çš„æäº¤ä¿¡æ¯</span></span><br><span class="line">git commit --amend -m <span class="string">"new commit"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡åšä¸Šä¸€æ¬¡ commit ï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–</span></span><br><span class="line">git commit --amend [file1] [file2] ...</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰çš„æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰çš„è¿œç¨‹åˆ†æ”¯ ( -r (remotes))</span></span><br><span class="line">git branch -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰çš„æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch primary</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºï¼Œå¹¶åˆ‡æ¢è‡³ è¯¥åˆ†æ”¯</span></span><br><span class="line">git checkout -b primary-yt</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºï¼ŒæŒ‡å‘æŒ‡å®š commit</span></span><br><span class="line">git branch [branch] [commitID]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</span></span><br><span class="line">git branch --track [branch] [remote-branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</span></span><br><span class="line">git checkout [branch-name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</span></span><br><span class="line">git checkout -</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´</span></span><br><span class="line">git branch --<span class="built_in">set</span>-upstream [branch] [remote-branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶æŒ‡å®šåˆ†æ”¯ master-yt åˆ°å½“å‰åˆ†æ”¯ master</span></span><br><span class="line">git merge master-yt</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©ä¸€ä¸ª commitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</span></span><br><span class="line">git cherry-pick [commitid]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åˆ†æ”¯</span></span><br><span class="line">git branch -d master-ytt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git push origin --delete [branch-name]</span><br><span class="line">git branch -dr [remote/branch]</span><br></pre></td></tr></table></figure><h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ ‡ç­¾</span></span><br><span class="line">git tag</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ä¿¡æ¯"><a href="#æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ä¿¡æ¯"></a>æŸ¥çœ‹ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</span></span><br><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒç›®å½•"><a href="#å‚è€ƒç›®å½•" class="headerlink" title="å‚è€ƒç›®å½•"></a>å‚è€ƒç›®å½•</h2><ul><li><a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noopener">Git å¸¸ç”¨å‘½ä»¤</a></li><li><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">Gitæ•™ç¨‹ - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li></ul><p><a href="https://github.com/yangtao2o/git-command" target="_blank" rel="noopener">ç»ƒä¹  Demo</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> å¼€å‘å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç‰‡æ®µä»£ç ç®€æ±‡ä¹‹CSSç¯‡</title>
      <link href="/2018/12/09/code-css/"/>
      <url>/2018/12/09/code-css/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“åœ¨å¹³æ—¶å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ï¼Œå¤§æ¦‚å¾ˆé•¿ä¸€æ®µæ—¶é—´å°±ä¼šæ¥è¿™ä¹ˆä¸€æ¬¡ï¼Œå°ç‰‡æ®µå‰§åœº.</p></blockquote><a id="more"></a><h2 id="é¡µé¢å¸ƒå±€"><a href="#é¡µé¢å¸ƒå±€" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><ul><li><a href="https://juejin.im/post/5aa252ac518825558001d5de#heading-55" target="_blank" rel="noopener">å¹²è´§!å„ç§å¸¸è§å¸ƒå±€å®ç°+çŸ¥åç½‘ç«™å®ä¾‹åˆ†æ</a></li><li><a href="https://chokcoco.github.io/CSS-Inspiration/#/" target="_blank" rel="noopener">CSS çµæ„Ÿ</a> - è¿™é‡Œå¯ä»¥è®©ä½ å¯»æ‰¾åˆ°ä½¿ç”¨æˆ–è€…æ˜¯å­¦ä¹  CSS çš„çµæ„Ÿï¼Œä»¥åˆ†ç±»çš„å½¢å¼ï¼Œå±•ç¤ºä¸åŒ CSS å±æ€§æˆ–è€…ä¸åŒçš„è¯¾é¢˜ä½¿ç”¨ CSS æ¥è§£å†³çš„å„ç§æ–¹æ³•ã€‚</li></ul><h2 id="white-space-word-break-word-wrap"><a href="#white-space-word-break-word-wrap" class="headerlink" title="white-space | word-break | word-wrap"></a>white-space | word-break | word-wrap</h2><ul><li><a href="https://juejin.im/post/5b8905456fb9a01a105966b4" target="_blank" rel="noopener">å½»åº•ææ‡‚ word-breakã€word-wrapã€white-space</a></li></ul><h3 id="white-space"><a href="#white-space" class="headerlink" title="white-space"></a><code>white-space</code></h3><p>æ§åˆ¶ç©ºç™½å­—ç¬¦çš„æ˜¾ç¤ºï¼ŒåŒæ—¶è¿˜èƒ½æ§åˆ¶æ˜¯å¦è‡ªåŠ¨æ¢è¡Œã€‚å®ƒæœ‰äº”ä¸ªå€¼ï¼š<code>normal | nowrap | pre | pre-wrap | pre-line</code></p><h3 id="word-break"><a href="#word-break" class="headerlink" title="word-break"></a><code>word-break</code></h3><p>æ§åˆ¶å•è¯å¦‚ä½•è¢«æ‹†åˆ†æ¢è¡Œã€‚å®ƒæœ‰ä¸‰ä¸ªå€¼ï¼š<code>normal | break-all | keep-all</code></p><h3 id="word-wrapï¼ˆoverflow-wrapï¼‰"><a href="#word-wrapï¼ˆoverflow-wrapï¼‰" class="headerlink" title="word-wrapï¼ˆoverflow-wrapï¼‰"></a><code>word-wrapï¼ˆoverflow-wrapï¼‰</code></h3><p>æ§åˆ¶é•¿åº¦è¶…è¿‡ä¸€è¡Œçš„å•è¯æ˜¯å¦è¢«æ‹†åˆ†æ¢è¡Œï¼Œæ˜¯ word-break çš„è¡¥å……ï¼Œå®ƒæœ‰ä¸¤ä¸ªå€¼ï¼š<code>normal | break-word</code></p><h2 id="å…¼å®¹-Windowsã€Mac-çš„-font-family"><a href="#å…¼å®¹-Windowsã€Mac-çš„-font-family" class="headerlink" title="å…¼å®¹ Windowsã€Mac çš„ font-family"></a>å…¼å®¹ Windowsã€Mac çš„ font-family</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">font-family</span>: <span class="selector-tag">Helvetica</span> <span class="selector-tag">Neue</span> <span class="selector-tag">For</span> <span class="selector-tag">Number</span>, <span class="selector-tag">-apple-system</span>, <span class="selector-tag">BlinkMacSystemFont</span>,</span><br><span class="line">  <span class="selector-tag">Segoe</span> <span class="selector-tag">UI</span>, <span class="selector-tag">Roboto</span>, <span class="selector-tag">PingFang</span> <span class="selector-tag">SC</span>, "<span class="selector-tag">PingFangSC-Light</span>", "<span class="selector-tag">Microsoft</span> <span class="selector-tag">yahei</span>", <span class="selector-tag">Arial</span>,</span><br><span class="line">  <span class="selector-tag">Helvetica</span>, <span class="selector-tag">sans-serif</span>;</span><br></pre></td></tr></table></figure><h2 id="å…³äº-ios-ä¸‹çš„-input-è¾“å…¥æ¡†å…‰æ ‡ä¸Šç§»çš„é—®é¢˜"><a href="#å…³äº-ios-ä¸‹çš„-input-è¾“å…¥æ¡†å…‰æ ‡ä¸Šç§»çš„é—®é¢˜" class="headerlink" title="å…³äº ios ä¸‹çš„ input è¾“å…¥æ¡†å…‰æ ‡ä¸Šç§»çš„é—®é¢˜"></a>å…³äº ios ä¸‹çš„ input è¾“å…¥æ¡†å…‰æ ‡ä¸Šç§»çš„é—®é¢˜</h2><blockquote><p>ä¸€èˆ¬å¤–æ¡†è®¾ç½®é«˜åº¦ä¸º<code>auto</code>,å–æ¶ˆæ‰<code>line-height</code>,input æœ¬èº«è®¾ç½®å­—å·å¤§å°ï¼Œä½¿ç”¨ padding æ’‘å¼€ï¼Œå–æ¶ˆâ€™heightã€line-heightâ€™</p></blockquote><h2 id="ä¸‹æ‹‰æ¡†ç®­å¤´é‡å†™"><a href="#ä¸‹æ‹‰æ¡†ç®­å¤´é‡å†™" class="headerlink" title="ä¸‹æ‹‰æ¡†ç®­å¤´é‡å†™"></a>ä¸‹æ‹‰æ¡†ç®­å¤´é‡å†™</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* --ieæ¸…é™¤--*/</span></span><br><span class="line"><span class="selector-tag">select</span><span class="selector-pseudo">::-ms-expand</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --ç«ç‹ã€è°·æ­Œæ¸…é™¤--*/</span></span><br><span class="line"><span class="selector-tag">select</span> &#123;</span><br><span class="line">  <span class="attribute">appearance</span>: none;</span><br><span class="line">  <span class="attribute">-moz-appearance</span>: none;</span><br><span class="line">  <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">30px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fafafb</span> <span class="built_in">url</span>(<span class="string">"/select-logo.png"</span>) <span class="number">98%</span> <span class="number">50%</span> no-repeat <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”¨-CSS-å†™ä¸‰è§’å½¢ç®­å¤´"><a href="#ç”¨-CSS-å†™ä¸‰è§’å½¢ç®­å¤´" class="headerlink" title="ç”¨ CSS å†™ä¸‰è§’å½¢ç®­å¤´"></a>ç”¨ CSS å†™ä¸‰è§’å½¢ç®­å¤´</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wx-wper-con</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">158px</span>;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e9e9e9</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> -<span class="number">2px</span> <span class="number">#aaa</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wx-wper-con</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.wx-wper-con</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">9.5px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">8px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">8px</span> solid <span class="number">#dadada</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">8px</span> solid transparent;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wx-wper-con</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">8.5px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">8px</span> solid <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="border-è¾¹æ¡†æ¸å˜-åœ†è§’"><a href="#border-è¾¹æ¡†æ¸å˜-åœ†è§’" class="headerlink" title="border è¾¹æ¡†æ¸å˜+åœ†è§’"></a>border è¾¹æ¡†æ¸å˜+åœ†è§’</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border-test</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">4px</span> solid transparent;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-test</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(155deg, red, blue);</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡å­—ä¸¤ç«¯å¯¹é½"><a href="#æ–‡å­—ä¸¤ç«¯å¯¹é½" class="headerlink" title="æ–‡å­—ä¸¤ç«¯å¯¹é½"></a>æ–‡å­—ä¸¤ç«¯å¯¹é½</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">text-align</span>: <span class="selector-tag">justify</span>;</span><br><span class="line"><span class="selector-tag">text-align-last</span>: <span class="selector-tag">justify</span>;</span><br></pre></td></tr></table></figure><h2 id="æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™"><a href="#æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™" class="headerlink" title="æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™"></a>æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">text-transform</span>: <span class="selector-tag">uppercase</span>;</span><br></pre></td></tr></table></figure><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform" target="_blank" rel="noopener">text-transform</a></li></ul><blockquote><p>è¿™æ˜¯ CSS2 ä¸­çš„å±æ€§ï¼Œå‚æ•°æœ‰ capitalize | uppercase | lowercase | none</p></blockquote><p>å‚æ•°ä»‹ç»ï¼š</p><ul><li>noneï¼š é»˜è®¤ã€‚å®šä¹‰å¸¦æœ‰å°å†™å­—æ¯å’Œå¤§å†™å­—æ¯çš„æ ‡å‡†çš„æ–‡æœ¬ã€‚</li><li>capitalizeï¼š æ–‡æœ¬ä¸­çš„æ¯ä¸ªå•è¯ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚</li><li>uppercaseï¼š å®šä¹‰ä»…æœ‰å¤§å†™å­—æ¯ã€‚</li><li>lowercaseï¼š å®šä¹‰æ— å¤§å†™å­—æ¯ï¼Œä»…æœ‰å°å†™å­—æ¯ã€‚</li></ul><h2 id="å•é€‰é«˜äº®"><a href="#å•é€‰é«˜äº®" class="headerlink" title="å•é€‰é«˜äº®"></a>å•é€‰é«˜äº®</h2><p><a href="https://juejin.im/post/5d6ffb676fb9a06b1c744bd5#heading-12" target="_blank" rel="noopener">åŸæ–‡</a></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.input</span><span class="selector-pseudo">:checked</span> + <span class="selector-class">.colors</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#e63838</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#e63838</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class="single-check"&gt;</span><br><span class="line">    &lt;input class="input" type="radio" name="colors" value="1"&gt;</span><br><span class="line">    &lt;div class="colors"&gt;å¤©ç©ºä¹‹å¢ƒ&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><ul><li><code>~ é€‰æ‹©å™¨</code>ï¼šæŸ¥æ‰¾æŸä¸ªå…ƒç´ åé¢çš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ </li><li><code>+ é€‰æ‹©å™¨</code>ï¼šæŸ¥æ‰¾æŸä¸ªå…ƒç´ åé¢ç´§é‚»çš„å…„å¼Ÿå…ƒç´ </li></ul><h2 id="å¤šåˆ—ç­‰é«˜é—®é¢˜"><a href="#å¤šåˆ—ç­‰é«˜é—®é¢˜" class="headerlink" title="å¤šåˆ—ç­‰é«˜é—®é¢˜"></a>å¤šåˆ—ç­‰é«˜é—®é¢˜</h2><ol><li><code>padding + margin</code>ï¼šæ¯åˆ—è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„<code>padding-bottom</code>ï¼Œç„¶åé€šè¿‡å–è´Ÿå€¼çš„ <code>margin-bottom</code>ï¼Œç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼šå¦‚ä¸‹æ–¹æ— æ³•çœ‹åˆ°åœ†è§’ï¼Œæ— æ³•çœ‹åˆ° <code>border-bottom</code> ç­‰</li><li><code>display: table</code></li><li><code>display: flex</code></li></ol><h2 id="1px-æ–¹æ¡ˆ"><a href="#1px-æ–¹æ¡ˆ" class="headerlink" title="1px æ–¹æ¡ˆ"></a>1px æ–¹æ¡ˆ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.min-device-pixel-ratio</span>(@<span class="keyword">scale2</span>, @scale3) &#123;</span><br><span class="line">  @<span class="keyword">media</span> screen and (min-device-pixel-ratio: <span class="number">2</span>),</span><br><span class="line">    (-webkit-min-device-pixel-ratio: <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="selector-tag">transform</span>: @<span class="keyword">scale2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  @<span class="keyword">media</span> screen and (min-device-pixel-ratio: <span class="number">3</span>),</span><br><span class="line">    (-webkit-min-device-pixel-ratio: <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="selector-tag">transform</span>: @<span class="keyword">scale3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.border-1px(@color: #DDD, @radius: 2px, @style: solid) &#123;</span><br><span class="line">  &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> @style @color;</span><br><span class="line">    <span class="attribute">border-radius</span>: @radius;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    @media screen and (min-device-pixel-ratio: 2),</span><br><span class="line">      (<span class="selector-tag">-webkit-min-device-pixel-ratio</span>: 2) &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: @radius * <span class="number">2</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.5);</span><br><span class="line">    &#125;</span><br><span class="line">    @<span class="keyword">media</span> screen and (min-device-pixel-ratio: <span class="number">3</span>),</span><br><span class="line">      (-webkit-min-device-pixel-ratio: <span class="number">3</span>) &#123;</span><br><span class="line">      <span class="selector-tag">width</span>: 300%;</span><br><span class="line">      <span class="selector-tag">height</span>: 300%;</span><br><span class="line">      <span class="selector-tag">border-radius</span>: @<span class="keyword">radius</span> * <span class="number">3</span>;</span><br><span class="line">      <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(0<span class="selector-class">.33</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.border-top-1px(@color: #DDD, @style: solid) &#123;</span><br><span class="line">  &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> @style @color;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    .min-device-pixel-ratio(scaleY(0.5), scaleY(0.33));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://juejin.im/post/5d6ffb676fb9a06b1c744bd5#heading-5" target="_blank" rel="noopener">åŸæ–‡</a></li></ul><h2 id="css-ä¹‹-flex-å’Œ-grid"><a href="#css-ä¹‹-flex-å’Œ-grid" class="headerlink" title="css ä¹‹ flex å’Œ grid"></a>css ä¹‹ flex å’Œ grid</h2><h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex" target="_blank" rel="noopener">flex - CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰| MDN</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Aligning_Items_in_a_Flex_Container" target="_blank" rel="noopener">Aligning Items in a Flex Container</a></li><li><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a> - é˜®ä¸€å³°</li><li><a href="http://www.ruanyifeng.com/blog/2015/07/flex-examples.html" target="_blank" rel="noopener">Flex å¸ƒå±€æ•™ç¨‹ï¼šå®ä¾‹ç¯‡</a> - é˜®ä¸€å³°</li><li><a href="https://cloud.tencent.com/developer/article/1354252" target="_blank" rel="noopener">30 åˆ†é’Ÿå½»åº•å¼„æ‡‚ flex å¸ƒå±€</a> â€” å¯ä»¥ç›´æ¥è¯»è¿™ç¯‡æ€»ç»“æ–‡ç« ï¼Œè®²çš„å¾ˆè¯¦ç»†</li><li><a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank" rel="noopener">A Complete Guide to Flexbox</a> â€” æ¯”è¾ƒç”ŸåŠ¨å½¢è±¡ï¼Œè‡ªèº«ç½‘ç«™å°±å¾ˆå¥½çœ‹</li></ul><h3 id="grid"><a href="#grid" class="headerlink" title="grid"></a>grid</h3><ul><li><a href="https://v4.bootcss.com/docs/4.0/layout/grid/" target="_blank" rel="noopener">Bootstrap 4</a> çš„å¸ƒå±€åœ¨ä½¿ç”¨ grid</li><li><a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noopener">CSS Grid ç½‘æ ¼å¸ƒå±€æ•™ç¨‹</a> - é˜®ä¸€å³°</li></ul><h3 id="ä½¿ç”¨-flex-è¿˜æ˜¯-grid"><a href="#ä½¿ç”¨-flex-è¿˜æ˜¯-grid" class="headerlink" title="ä½¿ç”¨ flex è¿˜æ˜¯ grid"></a>ä½¿ç”¨ flex è¿˜æ˜¯ grid</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/46757975" target="_blank" rel="noopener">æœ€å…¨ï½ Grid vs Flex</a></li></ul><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><ul><li><a href="https://juejin.im/post/5d6ffb676fb9a06b1c744bd5#heading-12" target="_blank" rel="noopener">ã€å‰ç«¯è¯å…¸ã€‘11 ä¸ª CSS çŸ¥è¯†æ­é… 11 ä¸ª JS ç‰¹æ€§ ï¼ˆå®ç”¨åˆé›†ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzI4NDYxNTM0OQ==&amp;mid=2247484312&amp;idx=1&amp;sn=f4c51d7c3b7dc49f234d119ca0983bb4&amp;chksm=ebf9f442dc8e7d54e2c29761fe9b8c9909a475aca434543759ddd5c1a6e2e8ac10e406bb99ef&amp;mpshare=1&amp;scene=23&amp;srcid=1121SGoxE9Vgb66UMridQbbF&amp;sharer_sharetime=1574331417826&amp;sharer_shareid=73865875704bcba3caa8b09c62f6bd7a%23rd" target="_blank" rel="noopener">web å‰ç«¯é¢è¯•ä¸­ 10 ä¸ªå…³äº css é«˜é¢‘é¢è¯•é¢˜,ä½ éƒ½ä¼šå—?</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç‰‡æ®µä»£ç ç®€æ±‡ä¹‹JSç¯‡</title>
      <link href="/2018/12/07/code-js/"/>
      <url>/2018/12/07/code-js/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“åœ¨å¹³æ—¶å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ï¼Œå¤§æ¦‚å¾ˆé•¿ä¸€æ®µæ—¶é—´å°±ä¼šæ¥è¿™ä¹ˆä¸€æ¬¡ï¼Œå°ç‰‡æ®µå‰§åœºã€‚</p></blockquote><p>Show Time:<br><a id="more"></a></p><h4 id="å¤šè¡Œæ–‡æœ¬æˆªå–clamp-js"><a href="#å¤šè¡Œæ–‡æœ¬æˆªå–clamp-js" class="headerlink" title="å¤šè¡Œæ–‡æœ¬æˆªå–clamp.js"></a>å¤šè¡Œæ–‡æœ¬æˆªå–clamp.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src = <span class="string">"https://cdn.bootcss.com/Clamp.js/0.5.1/clamp.min.js"</span> &gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">clampFunc(<span class="string">"obj-content-header"</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clampFunc</span>(<span class="params">className, clampNum</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $<span class="built_in">module</span> = $(<span class="string">"."</span> + className);</span><br><span class="line">  clampNum = clampNum ? clampNum : <span class="number">1</span>;</span><br><span class="line">  $.each($<span class="built_in">module</span>, <span class="function"><span class="keyword">function</span> (<span class="params">i, index</span>) </span>&#123;</span><br><span class="line">    $clamp($(<span class="keyword">this</span>).get(<span class="number">0</span>), &#123;</span><br><span class="line">      clamp: clampNum</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æœ¬åœ°æ˜¯å¦å­˜åœ¨jqueryå†™æ³•"><a href="#åˆ¤æ–­æœ¬åœ°æ˜¯å¦å­˜åœ¨jqueryå†™æ³•" class="headerlink" title="åˆ¤æ–­æœ¬åœ°æ˜¯å¦å­˜åœ¨jqueryå†™æ³•"></a>åˆ¤æ–­æœ¬åœ°æ˜¯å¦å­˜åœ¨jqueryå†™æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> jQuery == <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    <span class="built_in">document</span>.write(<span class="built_in">unescape</span>(<span class="string">"%3Cscript src='https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js' type='text/javascript'%3E%3C/script%3E"</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æˆªæµå‡½æ•°-AND-èŠ‚æµå‡½æ•°"><a href="#æˆªæµå‡½æ•°-AND-èŠ‚æµå‡½æ•°" class="headerlink" title="æˆªæµå‡½æ•° AND èŠ‚æµå‡½æ•°"></a>æˆªæµå‡½æ•° AND èŠ‚æµå‡½æ•°</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** æˆªæµå‡½æ•° **/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * fn æ‰§è¡Œå‡½æ•°</span></span><br><span class="line"><span class="comment">  * context ç»‘å®šä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">  * timeout å»¶æ—¶æ•°å€¼</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line"><span class="keyword">let</span> debounce = <span class="function"><span class="keyword">function</span>(<span class="params">fn, context, timeout</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> timer;</span><br><span class="line"><span class="comment">// ä½¿ç”¨é—­åŒ…å°†å†…å®¹ä¼ é€’å‡ºå»</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(timer) &#123;</span><br><span class="line">clearTimeout(timer);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">fn.apply(context, <span class="built_in">arguments</span>);</span><br><span class="line">&#125;, timeout);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** èŠ‚æµå‡½æ•° **/</span></span><br><span class="line"><span class="keyword">var</span> throttle = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay, mustRunDelay</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> t_start;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> context = <span class="keyword">this</span>;</span><br><span class="line"><span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line"><span class="keyword">var</span> t_curr = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">clearTimeout(timer);</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">if</span>(!t_start) &#123;</span><br><span class="line">t_start = t_curr;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// è¶…æ—¶åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span>(t_curr - t_start &gt;= mustRunDelay) &#123;</span><br><span class="line">fn.apply(context, args);</span><br><span class="line">t_start = t_curr;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="forå¾ªç¯æ·»åŠ ç‚¹å‡»äº‹ä»¶"><a href="#forå¾ªç¯æ·»åŠ ç‚¹å‡»äº‹ä»¶" class="headerlink" title="forå¾ªç¯æ·»åŠ ç‚¹å‡»äº‹ä»¶"></a>forå¾ªç¯æ·»åŠ ç‚¹å‡»äº‹ä»¶</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elems = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'a'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = elems.length; i &lt; l; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">    elems[index].addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">      e.preventDefault();</span><br><span class="line">      <span class="built_in">console</span>.log(index);</span><br><span class="line">    &#125;, <span class="string">'false'</span>);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦å¼€å¯æœ¬åœ°cookie"><a href="#åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦å¼€å¯æœ¬åœ°cookie" class="headerlink" title="åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦å¼€å¯æœ¬åœ°cookie"></a>åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦å¼€å¯æœ¬åœ°cookie</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nd = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">nd.setSeconds(nd.getSeconds() + <span class="number">60</span>);</span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"cookietest=1; expires="</span> + nd.toGMTString();</span><br><span class="line"><span class="keyword">var</span> cookiesEnabled = <span class="built_in">document</span>.cookie.indexOf(<span class="string">"cookietest="</span>) != <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">if</span> (!cookiesEnabled) &#123;</span><br><span class="line">  <span class="comment">//æ²¡æœ‰å¯ç”¨cookie   </span></span><br><span class="line">  alert(<span class="string">"æ²¡æœ‰å¯ç”¨cookie "</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//å·²ç»å¯ç”¨cookie   </span></span><br><span class="line">  alert(<span class="string">"å·²ç»å¯ç”¨cookie "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³åŒçº§å…ƒç´ é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ"><a href="#è§£å†³åŒçº§å…ƒç´ é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ" class="headerlink" title="è§£å†³åŒçº§å…ƒç´ é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ"></a>è§£å†³åŒçº§å…ƒç´ é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"member-card-item"</span> <span class="attr">id</span>=<span class="string">"memberCard"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"member-card-wper"</span> <span class="attr">id</span>=<span class="string">"memberProfile"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"drop-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"card-item"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"card-item"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cardTimer = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> $mCard = $(<span class="string">'#rightNav .wx-wper'</span>);</span><br><span class="line"><span class="keyword">var</span> $mProfile = $(<span class="string">'#rightNav .wx-outer'</span>);</span><br><span class="line">$mCard.get(<span class="number">0</span>).onmouseover = $mProfile.get(<span class="number">0</span>).onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  clearCardTime();</span><br><span class="line">&#125;</span><br><span class="line">$mCard.get(<span class="number">0</span>).onmouseout = $mProfile.get(<span class="number">0</span>).onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  cardTime();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cardTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  cardTimer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $mProfile.hide();</span><br><span class="line">  &#125;, <span class="number">400</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearCardTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  clearTimeout(cardTimer);</span><br><span class="line">  $mProfile.show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="placeholderæ ·å¼å…¼å®¹-amp-amp-å±æ€§IEå…¼å®¹"><a href="#placeholderæ ·å¼å…¼å®¹-amp-amp-å±æ€§IEå…¼å®¹" class="headerlink" title="placeholderæ ·å¼å…¼å®¹&amp;&amp;å±æ€§IEå…¼å®¹"></a>placeholderæ ·å¼å…¼å®¹&amp;&amp;å±æ€§IEå…¼å®¹</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.common-form-control</span><span class="selector-pseudo">::-webkit-input-placeholder</span>,</span><br><span class="line"><span class="selector-class">.common-form-control</span><span class="selector-pseudo">::-moz-placeholder</span>,</span><br><span class="line"><span class="selector-class">.common-form-control</span><span class="selector-pseudo">:-ms-input-placeholder</span>,</span><br><span class="line"><span class="selector-class">.common-form-control</span><span class="selector-pseudo">::placeholder</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#9b9b9b</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line">  $.fn.placeholder = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> opts = $.extend(&#123;&#125;, $.fn.placeholder.defaults, options);</span><br><span class="line">    <span class="keyword">var</span> isIE = <span class="built_in">document</span>.all ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> _this = <span class="keyword">this</span>,</span><br><span class="line">        placeholderValue = _this.getAttribute(<span class="string">"placeholder"</span>); <span class="comment">//ç¼“å­˜é»˜è®¤çš„placeholderå€¼</span></span><br><span class="line">      <span class="keyword">if</span> (isIE) &#123;</span><br><span class="line">        _this.setAttribute(<span class="string">"value"</span>, placeholderValue);</span><br><span class="line">        _this.onfocus = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          $.trim(_this.value) == placeholderValue ? _this.value = <span class="string">""</span> : <span class="string">''</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        _this.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          $.trim(_this.value) == <span class="string">""</span> ? _this.value = placeholderValue : <span class="string">''</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(jQuery);</span><br><span class="line"></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">$(<span class="string">"input"</span>).placeholder();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¿”å›é¡¶éƒ¨å‡½æ•°"><a href="#è¿”å›é¡¶éƒ¨å‡½æ•°" class="headerlink" title="è¿”å›é¡¶éƒ¨å‡½æ•°"></a>è¿”å›é¡¶éƒ¨å‡½æ•°</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›é¡¶éƒ¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gotoTop</span>(<span class="params">acceleration,stime</span>) </span>&#123;</span><br><span class="line">  acceleration = acceleration || <span class="number">0.1</span>;</span><br><span class="line">  stime = stime || <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">var</span> x1 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> y1 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> x2 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> y2 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> x3 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> y3 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.documentElement) &#123;</span><br><span class="line">    x1 = <span class="built_in">document</span>.documentElement.scrollLeft || <span class="number">0</span>;</span><br><span class="line">    y1 = <span class="built_in">document</span>.documentElement.scrollTop || <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.body) &#123;</span><br><span class="line">    x2 = <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span>;</span><br><span class="line">    y2 = <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> x3 = <span class="built_in">window</span>.scrollX || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> y3 = <span class="built_in">window</span>.scrollY || <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> x = <span class="built_in">Math</span>.max(x1, <span class="built_in">Math</span>.max(x2, x3));</span><br><span class="line">  <span class="keyword">var</span> y = <span class="built_in">Math</span>.max(y1, <span class="built_in">Math</span>.max(y2, y3));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> speeding = <span class="number">1</span> + acceleration;</span><br><span class="line">  <span class="built_in">window</span>.scrollTo(<span class="built_in">Math</span>.floor(x / speeding), <span class="built_in">Math</span>.floor(y / speeding));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(x &gt; <span class="number">0</span> || y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> run = <span class="string">"gotoTop("</span> + acceleration + <span class="string">", "</span> + stime + <span class="string">")"</span>;</span><br><span class="line">    <span class="built_in">window</span>.setTimeout(run, stime);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ»šåŠ¨ç›‘å¬å‚ç›´è”åŠ¨"><a href="#æ»šåŠ¨ç›‘å¬å‚ç›´è”åŠ¨" class="headerlink" title="æ»šåŠ¨ç›‘å¬å‚ç›´è”åŠ¨"></a>æ»šåŠ¨ç›‘å¬å‚ç›´è”åŠ¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>,</span><br><span class="line">    sTop = $(<span class="keyword">this</span>).scrollTop(),</span><br><span class="line">    windowH = $(<span class="built_in">window</span>).height() / <span class="number">2</span>,</span><br><span class="line">    pos = <span class="built_in">parseFloat</span>($(<span class="string">'#area3'</span>).offset().top) / <span class="number">2</span>,</span><br><span class="line">    pos1 = $(<span class="string">'#area3'</span>).offset().top - windowH,</span><br><span class="line">    pos2 = $(<span class="string">'#area4'</span>).offset().top - windowH,</span><br><span class="line">    pos3 = $(<span class="string">'#area5'</span>).offset().top - windowH,</span><br><span class="line">    pos4 = $(<span class="string">'#area6'</span>).offset().top - windowH</span><br><span class="line">  $target = $(<span class="string">'#navList'</span>).parent().parent();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sTop &gt;= pos) &#123;</span><br><span class="line">    $target.show();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $target.hide();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sTop &gt;= pos4) &#123;</span><br><span class="line">    i = <span class="number">3</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sTop &gt;= pos3) &#123;</span><br><span class="line">    i = <span class="number">2</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sTop &gt;= pos2) &#123;</span><br><span class="line">    i = <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  $(<span class="string">'#navList li'</span>).eq(i).addClass(<span class="string">'active'</span>).siblings().removeClass(<span class="string">'active'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="å³ä¾§æµ®åŠ¨å¯¼èˆªå¹³æ»‘åˆ‡æ¢"><a href="#å³ä¾§æµ®åŠ¨å¯¼èˆªå¹³æ»‘åˆ‡æ¢" class="headerlink" title="å³ä¾§æµ®åŠ¨å¯¼èˆªå¹³æ»‘åˆ‡æ¢"></a>å³ä¾§æµ®åŠ¨å¯¼èˆªå¹³æ»‘åˆ‡æ¢</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#navList a"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> href = $(<span class="keyword">this</span>).attr(<span class="string">"href"</span>);</span><br><span class="line">  <span class="keyword">var</span> pos = $(href).offset().top - <span class="number">48</span>;</span><br><span class="line">  $(<span class="keyword">this</span>).parent().addClass(<span class="string">'active'</span>).siblings().removeClass(<span class="string">'active'</span>);</span><br><span class="line">  <span class="keyword">if</span> (!$(<span class="string">"body"</span>).is(<span class="string">":animated"</span>)) &#123;</span><br><span class="line">    $(<span class="string">"html,body"</span>).animate(&#123;</span><br><span class="line">      scrollTop: pos</span><br><span class="line">    &#125;, <span class="number">600</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºIEï¼ˆåŒ…æ‹¬IE11ï¼‰"><a href="#åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºIEï¼ˆåŒ…æ‹¬IE11ï¼‰" class="headerlink" title="åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºIEï¼ˆåŒ…æ‹¬IE11ï¼‰"></a>åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºIEï¼ˆåŒ…æ‹¬IE11ï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isIE</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!!<span class="built_in">window</span>.ActiveXObject || <span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">    alert(<span class="string">"is IE"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alert(<span class="string">"is not IE"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºç§»åŠ¨ç«¯"><a href="#åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºç§»åŠ¨ç«¯" class="headerlink" title="åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºç§»åŠ¨ç«¯"></a>åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºç§»åŠ¨ç«¯</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isMobile = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(navigator.userAgent.match(<span class="regexp">/(iPhone|iPod|Android|ios)/i</span>)) &#123;</span><br><span class="line">  isMobile = <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  isMobile = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´"><a href="#å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´" class="headerlink" title="å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´"></a>å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMyDate</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>(str),</span><br><span class="line">    oYear = oDate.getFullYear(),</span><br><span class="line">    oMonth = oDate.getMonth() + <span class="number">1</span>,</span><br><span class="line">    oDay = oDate.getDate(),</span><br><span class="line">    oHour = oDate.getHours(),</span><br><span class="line">    oMin = oDate.getMinutes(),</span><br><span class="line">    oSen = oDate.getSeconds(),</span><br><span class="line">    oTime = oYear + <span class="string">'-'</span> + getzf(oMonth) + <span class="string">'-'</span> + getzf(oDay) + <span class="string">' '</span> + getzf(oHour) + <span class="string">':'</span> + getzf(oMin) + <span class="string">':'</span> + getzf(oSen); <span class="comment">//æœ€åæ‹¼æ¥æ—¶é—´  </span></span><br><span class="line">  <span class="keyword">return</span> oTime;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getzf</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">parseInt</span>(num) &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    num = <span class="string">'0'</span> + num;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Nodeå®ç°JavaScriptæ¨¡å—çš„åŸç†ç®€å•ä»‹ç»"><a href="#Nodeå®ç°JavaScriptæ¨¡å—çš„åŸç†ç®€å•ä»‹ç»" class="headerlink" title="Nodeå®ç°JavaScriptæ¨¡å—çš„åŸç†ç®€å•ä»‹ç»"></a>Nodeå®ç°JavaScriptæ¨¡å—çš„åŸç†ç®€å•ä»‹ç»</h4><p><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001434502419592fd80bbb0613a42118ccab9435af408fd000" target="_blank" rel="noopener">åŸæ–‡</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/** Nodeå®ç°JavaScriptæ¨¡å—çš„ä¸€ä¸ªç®€å•çš„åŸç†ä»‹ç»</span><br><span class="line"> * Nodeåˆ©ç”¨JavaScriptçš„å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ï¼Œè½»è€Œæ˜“ä¸¾åœ°å®ç°äº†æ¨¡å—çš„éš”ç¦»</span><br><span class="line"> * å˜é‡moduleæ˜¯Nodeåœ¨åŠ è½½jsæ–‡ä»¶å‰å‡†å¤‡çš„ä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶ä¼ å…¥åŠ è½½å‡½æ•°</span><br><span class="line"> **/</span><br><span class="line">(function() &#123;</span><br><span class="line">  var s = &apos;Hello&apos;; //è¯»å–Hello.jsä»£ç </span><br><span class="line">  var name = &apos;Taotao&apos;;</span><br><span class="line"></span><br><span class="line">  console.log(&apos;Hell0 &apos; + name + &apos;!&apos;);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">// å‡†å¤‡moduleå¯¹è±¡</span><br><span class="line">var module = &#123;</span><br><span class="line">  id: &apos;hello&apos;,</span><br><span class="line">  exports: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">var load = function(module) &#123;</span><br><span class="line">  //è¯»å–Hello.jsä»£ç </span><br><span class="line">  function greet(module) &#123;</span><br><span class="line">    console.log(&apos;Hell0 &apos; + name + &apos;!&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">  module.exports = greet;</span><br><span class="line">  return module.exports;</span><br><span class="line">&#125;</span><br><span class="line">var exported = load(module);</span><br><span class="line">//ä¿å­˜</span><br><span class="line">save(module, exported);</span><br></pre></td></tr></table></figure></p><h4 id="NodejsåŸºæœ¬æ¨¡å—fs"><a href="#NodejsåŸºæœ¬æ¨¡å—fs" class="headerlink" title="NodejsåŸºæœ¬æ¨¡å—fs"></a>NodejsåŸºæœ¬æ¨¡å—fs</h4><p><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001434501497361a4e77c055f5c4a8da2d5a1868df36ad1000" target="_blank" rel="noopener">Node.jså†…ç½®çš„fsæ¨¡å—å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼Œè´Ÿè´£è¯»å†™æ–‡ä»¶ã€‚</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥è¯»æ–‡ä»¶</span></span><br><span class="line">fs.readFile(<span class="string">'test1.txt'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥å†™æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> writeData = <span class="string">'Hello,Node.js'</span>;</span><br><span class="line">fs.writeFile(<span class="string">'test1.txt'</span>, writeData, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'OK!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥è¯»æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> data = fs.readFileSync(<span class="string">'test1.txt'</span>, <span class="string">'utf-8'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥è¯»æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  fs.writeFileSync(<span class="string">'test1.txt'</span>, writeData);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"OK!"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥è¯»å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">fs.stat(<span class="string">'test1.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'isFile: '</span> + stat.isFile()); <span class="comment">// æ˜¯å¦æ˜¯æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'isDirectory: '</span> + stat.isDirectory()); <span class="comment">// æ˜¯å¦æ˜¯ç›®å½•</span></span><br><span class="line">    <span class="keyword">if</span> (stat.isFile()) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'size: '</span> + stat.size);  <span class="comment">// æ–‡ä»¶å¤§å°</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'birth time: '</span> + stat.birthtime);  <span class="comment">// åˆ›å»ºæ—¶é—´ï¼ŒDateå¯¹è±¡</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'modifier time: '</span> + stat.mtime);  <span class="comment">// ä¿®æ”¹æ—¶é—´ï¼ŒDateå¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥è¯»å–æ–‡ä»¶ statSync()</span></span><br></pre></td></tr></table></figure><h4 id="NodejsåŸºæœ¬æ¨¡å—http"><a href="#NodejsåŸºæœ¬æ¨¡å—http" class="headerlink" title="NodejsåŸºæœ¬æ¨¡å—http"></a>NodejsåŸºæœ¬æ¨¡å—http</h4><p><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/0014345015296018cac40c198b543fead5c549865b9bd4a000" target="_blank" rel="noopener">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ä¹‹Nodeä¸­çš„Http</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">// å¯¼å…¥httpæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</span><br><span class="line">    url = <span class="built_in">require</span>(<span class="string">'url'</span>),</span><br><span class="line">    path = <span class="built_in">require</span>(<span class="string">'path'</span>),</span><br><span class="line">    http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»å‘½ä»¤è¡Œå‚æ•°è·å–rootç›®å½•ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•ï¼š</span></span><br><span class="line"><span class="keyword">var</span> root = path.resolve(process.argv[<span class="number">2</span>] || <span class="string">'.'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Static root dir: '</span> + root);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºhttp server</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è·å¾—URLçš„path</span></span><br><span class="line">  <span class="keyword">var</span> pathname = url.parse(request.url).pathname;</span><br><span class="line">  <span class="comment">// è·å¾—å¯¹åº”çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">  <span class="keyword">var</span> filepath = path.join(root, pathname);</span><br><span class="line">  <span class="comment">// è·å–æ–‡ä»¶çŠ¶æ€</span></span><br><span class="line">  fs.stat(filepath, <span class="function"><span class="keyword">function</span>(<span class="params">err, stats</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!err &amp;&amp; stats.isFile()) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'200 '</span> + request.url);</span><br><span class="line">      response.writeHead(<span class="number">200</span>);</span><br><span class="line">      <span class="comment">// å°†æ–‡ä»¶æµå¯¼å‘response</span></span><br><span class="line">      fs.createReadStream(filepath).pipe(response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'404 '</span> + request.url);</span><br><span class="line">      response.writeHead(<span class="number">404</span>);</span><br><span class="line">      response.end(<span class="string">'404 Not Found'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®©æœåŠ¡å™¨ç›‘å¬8080ç«¯å£</span></span><br><span class="line">server.listen(<span class="number">8080</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server is running at http:127.0.0.1:8080/'</span>);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰å•é€‰æ¡†ã€å¤é€‰æ¡†æ ·å¼</title>
      <link href="/2018/12/07/style-checkout-radio/"/>
      <url>/2018/12/07/style-checkout-radio/</url>
      
        <content type="html"><![CDATA[<p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†å…¼å®¹IEä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œæˆ‘ä»¬é‡å†™å•é€‰æ¡†ã€å¤é€‰æ¡†ç­‰çš„æ ·å¼ï¼Œå°±éœ€è¦å€ŸåŠ© js æ¥å®ç°ã€‚<br><a id="more"></a><br>Javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å†™å¤šé€‰æ¡†,å•é€‰æ¡†æ ·å¼</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">  $.fn.hcheckbox = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    $(<span class="string">':checkbox+label'</span>, <span class="keyword">this</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="keyword">this</span>).addClass(<span class="string">'disabled'</span>);</span><br><span class="line">      <span class="keyword">if</span> ($(<span class="keyword">this</span>).prev().is(<span class="string">':disabled'</span>) == <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).prev().is(<span class="string">':checked'</span>))</span><br><span class="line">          $(<span class="keyword">this</span>).addClass(<span class="string">"checked"</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="keyword">this</span>).addClass(<span class="string">'disabled'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> ischeckbox = $(<span class="keyword">this</span>).prev().is(<span class="string">':checked'</span>);</span><br><span class="line">      <span class="keyword">if</span> (!ischeckbox) &#123;</span><br><span class="line">        $(<span class="keyword">this</span>).addClass(<span class="string">"checked"</span>);</span><br><span class="line">        $(<span class="keyword">this</span>).prev().checked = <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="keyword">this</span>).removeClass(<span class="string">'checked'</span>);</span><br><span class="line">        $(<span class="keyword">this</span>).prev().checked = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      event.stopPropagation();</span><br><span class="line">    &#125;).prev().hide();</span><br><span class="line">  &#125;</span><br><span class="line">  $.fn.hradio = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> $(<span class="string">':radio+label'</span>, <span class="keyword">this</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="keyword">this</span>).addClass(<span class="string">'hRadio'</span>);</span><br><span class="line">      <span class="keyword">if</span> ($(<span class="keyword">this</span>).prev().is(<span class="string">"checked"</span>))</span><br><span class="line">        $(<span class="keyword">this</span>).addClass(<span class="string">'hRadio-Checked'</span>);</span><br><span class="line"></span><br><span class="line">    &#125;).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">      $(<span class="keyword">this</span>).parent().siblings().find(<span class="string">':radio+label'</span>).removeClass(<span class="string">"hRadio-Checked"</span>);</span><br><span class="line">      <span class="keyword">if</span> (!$(<span class="keyword">this</span>).prev().is(<span class="string">':checked'</span>)) &#123;</span><br><span class="line">        $(<span class="keyword">this</span>).addClass(<span class="string">"hRadio-Checked"</span>);</span><br><span class="line">        $(<span class="keyword">this</span>).prev()[<span class="number">0</span>].checked = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      event.stopPropagation();</span><br><span class="line">    &#125;).prev().hide();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(jQuery)</span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.checkbox'</span>).hcheckbox();</span><br><span class="line">  $(<span class="string">'.radio-wper'</span>).hradio();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>Style<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-class">.radio-wper</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-class">.radio-wper</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-class">.disabled</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-class">.checked</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.radio-wper</span> <span class="selector-class">.hRadio</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.radio-wper</span> <span class="selector-class">.hRadio-Checked</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-position</span>:  <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-class">.disabled</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../../images/activities/adi2018/check-01.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-class">.checked</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../../images/activities/adi2018/check-02.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.radio-wper</span> <span class="selector-class">.hRadio</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../../images/activities/adi2018/radio-01.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.radio-wper</span> <span class="selector-class">.hRadio-Checked</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../../images/activities/adi2018/radio-02.png'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°æ–‡å­—çš„æ— ç¼æ»šåŠ¨ã€é—´æ­‡æ€§å‘ä¸Šç¿»æ»š</title>
      <link href="/2018/11/29/plugin-scroll/"/>
      <url>/2018/11/29/plugin-scroll/</url>
      
        <content type="html"><![CDATA[<p>æ–‡å­—å‘ä¸Šæ»šåŠ¨åˆ†ä¸ºï¼šæ— ç¼æ»šåŠ¨ã€é—´æ­‡æ€§æ»šåŠ¨<br><a id="more"></a></p><h3 id="é—´æ­‡æ€§æ»šåŠ¨"><a href="#é—´æ­‡æ€§æ»šåŠ¨" class="headerlink" title="é—´æ­‡æ€§æ»šåŠ¨"></a>é—´æ­‡æ€§æ»šåŠ¨</h3><h4 id="ä½¿ç”¨jQueryçš„-animate"><a href="#ä½¿ç”¨jQueryçš„-animate" class="headerlink" title="ä½¿ç”¨jQueryçš„ animate"></a>ä½¿ç”¨jQueryçš„ <code>animate</code></h4><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‘ä¸Šç¿»æ»šä¸€è¡Œå†…å®¹ï¼Œå³ä¸€ä¸ª<code>&lt;li&gt;&lt;/li&gt;</code>ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸€è¡Œæœ‰å¤šä¸ª<code>li</code>æ ‡ç­¾ï¼Œè¦ä½¿ç”¨å¸¸è§çš„æ’ä»¶å°±ä¼šå‡ºç°é—®é¢˜äº†â€¦</p><p>æ‰€ä»¥è‡ªå·±æ”¹å§æ”¹å§ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">  $.fn.myScroll = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> init = &#123;</span><br><span class="line">      items: <span class="number">1</span>,  <span class="comment">//ä¸€è¡Œæœ‰å‡ é¡¹å†…å®¹</span></span><br><span class="line">      speed: <span class="number">3000</span>,  <span class="comment">//æ»šåŠ¨é€Ÿåº¦</span></span><br><span class="line">      moveHeight: <span class="number">22</span>  <span class="comment">// è¡Œé«˜</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> intId = [];</span><br><span class="line">    <span class="keyword">var</span> opts = $.extend(&#123;&#125;, init, options);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">moveUp</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">      obj.animate(&#123;</span><br><span class="line">        marginTop: <span class="string">'-'</span> + opts.moveHeight + <span class="string">'px'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="number">1000</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>);</span><br><span class="line">        $<span class="keyword">this</span>.find(<span class="string">'li'</span>).slice(<span class="number">0</span>, opts.items).appendTo($<span class="keyword">this</span>);</span><br><span class="line">        $<span class="keyword">this</span>.css(<span class="string">'margin-top'</span>, <span class="number">0</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> sh = opts.moveHeight,</span><br><span class="line">        speed = opts.speed,</span><br><span class="line">        items = opts.items,</span><br><span class="line">        $<span class="keyword">this</span> = $(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">      intId[i] = setInterval(timerEvent, speed);</span><br><span class="line"></span><br><span class="line">      $<span class="keyword">this</span>.hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearInterval(intId[i]);</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        intId[i] = setInterval(timerEvent, speed);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">var</span> len = $<span class="keyword">this</span>.find(<span class="string">'li'</span>).length;</span><br><span class="line">      <span class="keyword">if</span>(len &gt; items &amp;&amp; len &lt;= items * <span class="number">2</span>) &#123;</span><br><span class="line">        $<span class="keyword">this</span>.html($<span class="keyword">this</span>.html() + $<span class="keyword">this</span>.html());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">timerEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> len = $<span class="keyword">this</span>.find(<span class="string">'li'</span>).length;</span><br><span class="line">        <span class="keyword">if</span>(len &gt; items &amp;&amp; len &lt;= items * <span class="number">2</span>) &#123;</span><br><span class="line">          len /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(len &lt;= items) &#123;</span><br><span class="line">          clearInterval(intId[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          moveUp($<span class="keyword">this</span>, sh);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(jQuery);</span><br><span class="line">$(<span class="string">'#scrollLists'</span>).myScroll(&#123;</span><br><span class="line">  items: <span class="number">3</span>,</span><br><span class="line">  speed: <span class="number">3000</span>,</span><br><span class="line">  moveHeight: <span class="number">22</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸‹çš„éƒ½æ˜¯å•è¡Œå†…å®¹ç¿»æ»šï¼Œæ¬è¿‡æ¥è®°å½•ä¸‹ï¼š</p><h4 id="ä½¿ç”¨JavaScript"><a href="#ä½¿ç”¨JavaScript" class="headerlink" title="ä½¿ç”¨JavaScript"></a>ä½¿ç”¨JavaScript</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Scroll</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Scroll.prototype.upScroll = <span class="function"><span class="keyword">function</span> (<span class="params">dom, _h, interval</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> dom = <span class="built_in">document</span>.getElementById(dom);</span><br><span class="line">  <span class="keyword">var</span> timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _field = dom.children[<span class="number">0</span>];</span><br><span class="line">    _field.style.marginTop = _h;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _field = dom.children[<span class="number">0</span>];</span><br><span class="line">    _field.style.marginTop = <span class="string">"0px"</span>;</span><br><span class="line">    dom.appendChild(_field);</span><br><span class="line">    <span class="keyword">var</span> _field = dom.children[<span class="number">0</span>]</span><br><span class="line">    _field.style.marginTop = _h;</span><br><span class="line">  &#125;, interval)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myScroll = <span class="keyword">new</span> Scroll();</span><br></pre></td></tr></table></figure><p>ç”¨æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * demo çˆ¶å®¹å™¨(ul)çš„id</span></span><br><span class="line"><span class="comment"> * -36px å­å…ƒç´ liçš„é«˜åº¦</span></span><br><span class="line"><span class="comment"> * 3000  æ»šåŠ¨é—´éš”æ—¶é—´</span></span><br><span class="line"><span class="comment"> * æ¯æ¬¡æ»šåŠ¨æŒç»­æ—¶é—´å¯åˆ°cssæ–‡ä»¶ä¸­ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> * ï¼ˆæ‰¾ä¸åˆ°åŸæ–‡äº†-.-ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">myScroll.upScroll(<span class="string">"demo"</span>,<span class="string">"-36px"</span>,<span class="number">3000</span>);</span><br></pre></td></tr></table></figure></p><h3 id="æ— ç¼æ»šåŠ¨"><a href="#æ— ç¼æ»šåŠ¨" class="headerlink" title="æ— ç¼æ»šåŠ¨"></a>æ— ç¼æ»šåŠ¨</h3><p>ä¸‹è½½åœ°å€ï¼š<a href="http://www.jq22.com/jquery-info6631" target="_blank" rel="noopener">ç®€å•çš„jQueryæ— ç¼å‘ä¸Šæ»šåŠ¨æ•ˆæœ</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">  $.fn.myScroll = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//é»˜è®¤é…ç½®</span></span><br><span class="line">    <span class="keyword">var</span> defaults = &#123;</span><br><span class="line">      speed: <span class="number">40</span>, <span class="comment">//æ»šåŠ¨é€Ÿåº¦,å€¼è¶Šå¤§é€Ÿåº¦è¶Šæ…¢</span></span><br><span class="line">      rowHeight: <span class="number">24</span> <span class="comment">//æ¯è¡Œçš„é«˜åº¦</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> opts = $.extend(&#123;&#125;, defaults, options),</span><br><span class="line">      intId = [];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">marquee</span>(<span class="params">obj, step</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      obj.find(<span class="string">"ul"</span>).animate(&#123;</span><br><span class="line">        marginTop: <span class="string">'-=1'</span></span><br><span class="line">      &#125;, <span class="number">0</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> s = <span class="built_in">Math</span>.abs(<span class="built_in">parseInt</span>($(<span class="keyword">this</span>).css(<span class="string">"margin-top"</span>)));</span><br><span class="line">        <span class="keyword">if</span> (s &gt;= step) &#123;</span><br><span class="line">          $(<span class="keyword">this</span>).find(<span class="string">"li"</span>).slice(<span class="number">0</span>, <span class="number">1</span>).appendTo($(<span class="keyword">this</span>));</span><br><span class="line">          $(<span class="keyword">this</span>).css(<span class="string">"margin-top"</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> sh = opts[<span class="string">"rowHeight"</span>],</span><br><span class="line">        speed = opts[<span class="string">"speed"</span>],</span><br><span class="line">        _this = $(<span class="keyword">this</span>);</span><br><span class="line">      intId[i] = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_this.find(<span class="string">"ul"</span>).height() &lt;= _this.height()) &#123;</span><br><span class="line">          clearInterval(intId[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          marquee(_this, sh);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, speed);</span><br><span class="line"></span><br><span class="line">      _this.hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearInterval(intId[i]);</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        intId[i] = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (_this.find(<span class="string">"ul"</span>).height() &lt;= _this.height()) &#123;</span><br><span class="line">            clearInterval(intId[i]);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            marquee(_this, sh);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, speed);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)(jQuery);</span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">'.myscroll'</span>).myScroll(&#123;</span><br><span class="line">    speed: <span class="number">40</span>, <span class="comment">//æ•°å€¼è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šæ…¢</span></span><br><span class="line">    rowHeight: <span class="number">26</span> <span class="comment">//liçš„é«˜åº¦</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsæ’ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹å®«æ ¼æŠ½å¥–</title>
      <link href="/2018/11/27/plugin-lottery/"/>
      <url>/2018/11/27/plugin-lottery/</url>
      
        <content type="html"><![CDATA[<p>ä¹å®«æ ¼æŠ½å¥–è®°å½•ï¼š</p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹å®«æ ¼æŠ½å¥–</span></span><br><span class="line"><span class="keyword">var</span> click=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> luck=&#123;</span><br><span class="line"></span><br><span class="line">  index: <span class="number">0</span>,<span class="comment">//å½“å‰è½¬åŠ¨åˆ°å“ªä¸ªä½ç½®ï¼Œèµ·ç‚¹ä½ç½®</span></span><br><span class="line">  count: <span class="number">0</span>,<span class="comment">//æ€»å…±æœ‰å¤šå°‘ä¸ªä½ç½®</span></span><br><span class="line">  timer: <span class="number">0</span>,<span class="comment">//setTimeoutçš„IDï¼Œç”¨clearTimeoutæ¸…é™¤</span></span><br><span class="line">  speed: <span class="number">30</span>,<span class="comment">//åˆå§‹è½¬åŠ¨é€Ÿåº¦</span></span><br><span class="line">  times: <span class="number">0</span>,<span class="comment">//è½¬åŠ¨æ¬¡æ•°</span></span><br><span class="line">  cycle: <span class="number">70</span>,<span class="comment">//è½¬åŠ¨åŸºæœ¬æ¬¡æ•°ï¼šå³è‡³å°‘éœ€è¦è½¬åŠ¨å¤šå°‘æ¬¡å†è¿›å…¥æŠ½å¥–ç¯èŠ‚</span></span><br><span class="line">  prize: <span class="number">-1</span>,<span class="comment">//ä¸­å¥–ä½ç½®</span></span><br><span class="line"></span><br><span class="line">  init:<span class="function"><span class="keyword">function</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">"#"</span>+id).find(<span class="string">".luck-unit"</span>).length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">      $luck = $(<span class="string">"#"</span>+id);</span><br><span class="line">      $units = $luck.find(<span class="string">".luck-unit"</span>);</span><br><span class="line">      <span class="keyword">this</span>.obj = $luck;</span><br><span class="line">      <span class="keyword">this</span>.count = $units.length;</span><br><span class="line">      <span class="comment">// $luck.find(".luck-unit-"+this.index).addClass("active");</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  roll:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="keyword">this</span>.index;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="keyword">this</span>.count;</span><br><span class="line">    <span class="keyword">var</span> luck = <span class="keyword">this</span>.obj;</span><br><span class="line">    $(luck).find(<span class="string">".luck-unit-"</span>+index).removeClass(<span class="string">"active"</span>);</span><br><span class="line">    index += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (index&gt;count<span class="number">-1</span>) &#123;</span><br><span class="line">      index = <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    $(luck).find(<span class="string">".luck-unit-"</span>+index).addClass(<span class="string">"active"</span>);</span><br><span class="line">    <span class="keyword">this</span>.index=index;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  stop:<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.prize=index;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">roll</span>(<span class="params">which</span>)</span>&#123;</span><br><span class="line">  luck.times += <span class="number">1</span>;</span><br><span class="line">  luck.roll();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (luck.times &gt; luck.cycle+<span class="number">10</span> &amp;&amp; luck.prize==luck.index) &#123;</span><br><span class="line">    <span class="keyword">var</span> title = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> content = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> desc = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> prize = <span class="string">''</span>;</span><br><span class="line">    <span class="comment">// æœ€ç»ˆåœä¸‹æ¥çš„ä½ç½®</span></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    clearTimeout(luck.timer);</span><br><span class="line">    luck.prize=<span class="number">-1</span>;</span><br><span class="line">    luck.times=<span class="number">0</span>;</span><br><span class="line">    click=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(which) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        prize = <span class="string">'å°ç±³é¼ æ ‡'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        prize = <span class="string">'å›ºæ€ç¡¬ç›˜'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        prize = <span class="string">'ä¹æ‰£ä¿æ¸©æ¯'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        prize = <span class="string">'äº¬ä¸œåˆ¸'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        prize = <span class="string">'è°¢è°¢å‚ä¸'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        prize = <span class="string">'ä¸‡ç”¨è¡¨'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        prize = <span class="string">'æ‘©å°”å§è¯¾ç¨‹æŠ˜æ‰£åˆ¸'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        prize = <span class="string">'å°ç±³è€³æœº'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(which == <span class="number">4</span>) &#123;</span><br><span class="line">      title = <span class="string">'è°¢è°¢å‚ä¸'</span>;</span><br><span class="line">      content = <span class="string">'å†æ¥å†å‰'</span></span><br><span class="line">      desc = <span class="string">'è¯·æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…ï¼Œè·å–æ›´å¤šæŠ½å¥–èµ„æ ¼'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      title = <span class="string">'æ­å–œæ‚¨'</span>;</span><br><span class="line">      content = <span class="string">'è·å¾— &lt;span class="blue"&gt;'</span>+ prize +<span class="string">'&lt;/span&gt;'</span>;</span><br><span class="line">      <span class="keyword">if</span>(which == <span class="number">6</span>) &#123;</span><br><span class="line">        desc = <span class="string">'è¯·è‡³æ‚¨çš„â€ä¸ªäººä¸­å¿ƒâ€œæŸ¥æ”¶'</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        desc = <span class="string">'å¥–å“å°†äºæ´»åŠ¨ç»“æŸåç»Ÿä¸€å‘é€'</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å±•ç¤ºä¸­å¥–çŠ¶æ€</span></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      modalShow(title,content,desc);</span><br><span class="line">    &#125;, <span class="number">800</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (luck.times&lt;luck.cycle) &#123;</span><br><span class="line">      luck.speed -= <span class="number">10</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (luck.times==luck.cycle) &#123;</span><br><span class="line">      <span class="comment">// æœ€ç»ˆä¸­å¥–ä½ç½®çš„ç´¢å¼•</span></span><br><span class="line">      luck.prize = which;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (luck.times &gt; luck.cycle+<span class="number">10</span> &amp;&amp; ((luck.prize==<span class="number">0</span> &amp;&amp; luck.index==<span class="number">7</span>) || luck.prize==luck.index+<span class="number">1</span>)) &#123;</span><br><span class="line">        luck.speed += <span class="number">110</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        luck.speed += <span class="number">20</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (luck.speed&lt;<span class="number">40</span>) &#123;</span><br><span class="line">      luck.speed=<span class="number">40</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    luck.timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      roll(which);</span><br><span class="line">    &#125;,luck.speed);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Lottery init</span></span><br><span class="line">  luck.init(<span class="string">'luckArea'</span>);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">"#startBtn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(click) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      click=<span class="literal">true</span>;</span><br><span class="line">      luck.speed=<span class="number">100</span>;</span><br><span class="line">      $.get(<span class="string">"http://www.moore8.com/campaign/lotteryAct"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> data = $.parseJSON(data);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'data:'</span>, data);</span><br><span class="line">        <span class="keyword">if</span>(data.code == <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> which = data.type;</span><br><span class="line">          <span class="comment">// è°ƒå–æŠ½å¥–å¹¶ä¼ å€¼</span></span><br><span class="line">          roll(which);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span>(data.msg == <span class="string">'è¯·å…ˆç™»å½•ï¼'</span>) &#123;</span><br><span class="line">            loginFunc(<span class="string">'course_gift'</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> desc = <span class="string">'è¯·æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…ï¼Œè·å–æ›´å¤šæŠ½å¥–èµ„æ ¼'</span>;</span><br><span class="line">            modalShow(<span class="string">'å¯¹ä¸èµ·'</span>, data.msg, desc);</span><br><span class="line">          &#125;</span><br><span class="line">          click = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">modalShow</span>(<span class="params">title, body, desc</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> title = title || <span class="string">'æ¸©é¦¨æç¤º'</span>;</span><br><span class="line">  <span class="keyword">var</span> body = body || <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">var</span> desc = desc || <span class="string">''</span>;</span><br><span class="line">  $(<span class="string">'#mTitle'</span>).html(title);</span><br><span class="line">  $(<span class="string">'#mBody'</span>).html(body);</span><br><span class="line">  $(<span class="string">'#mDesc'</span>).html(desc);</span><br><span class="line">  $(<span class="string">'#myModal'</span>).modal(<span class="string">'show'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loginFunc</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> href = <span class="built_in">window</span>.location.href;</span><br><span class="line">  <span class="keyword">var</span> id = id ? <span class="string">"%23"</span> + id : <span class="string">''</span>;</span><br><span class="line">  <span class="built_in">window</span>.location.href = <span class="string">"/login/?referer="</span> + href + id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ´»åŠ¨ä¹‹æ•´ç‚¹ç§’æ€åŠŸèƒ½ä¼˜åŒ–</title>
      <link href="/2018/11/27/feat-sale/"/>
      <url>/2018/11/27/feat-sale/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç‚¹ç§’æ€åŠŸèƒ½æ€»ç»“ï¼š<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> starttime1 = <span class="string">"2018/11/14 14:00"</span>,</span><br><span class="line">  endtime1 = <span class="string">"2018/11/15 14:00"</span>,</span><br><span class="line"></span><br><span class="line">  starttime7 = <span class="string">"2018/11/19 14:00"</span>,</span><br><span class="line">  endtime7 = <span class="string">"2018/11/20 14:00"</span>,</span><br><span class="line">  <span class="comment">// ä¸­ 5~8 ç»„ï¼ˆçœç•¥ï¼‰</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸‹ 9~12 ç»„ï¼ˆçœç•¥ï¼‰</span></span><br><span class="line"></span><br><span class="line">  starttime22 = <span class="string">"2018/11/29 14:00"</span>,</span><br><span class="line">  endtime22 = <span class="string">"2018/11/30 14:00"</span>,</span><br><span class="line"></span><br><span class="line">  starttime23 = <span class="string">"2018/12/14 14:00"</span>,</span><br><span class="line">  endtime23 = <span class="string">"2018/12/15 14:00"</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å– æ•´ç‚¹ç§’æ€çŠ¶æ€</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> getShopStatus = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> statuShop = [];</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    url: <span class="string">'//www.eeboard.com/wp-content/themes/eeboard/api/eeboardsix.php?act=shop_detail'</span>,</span><br><span class="line">    dataType: <span class="string">'json'</span>,</span><br><span class="line">    cache: <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">    type: <span class="string">"GET"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> arr8 = data.data.eight;</span><br><span class="line">      <span class="comment">// æ•´ç‚¹ç§’æ€çŠ¶æ€</span></span><br><span class="line">      <span class="keyword">if</span> (!arr8) &#123;</span><br><span class="line">        arr8 = [<span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> d1over = arr8[<span class="number">0</span>],</span><br><span class="line">        d2over = arr8[<span class="number">1</span>],</span><br><span class="line">        d3over = arr8[<span class="number">2</span>],</span><br><span class="line">        d4over = arr8[<span class="number">3</span>],</span><br><span class="line">        d5over = arr8[<span class="number">4</span>],</span><br><span class="line">        d6over = arr8[<span class="number">5</span>],</span><br><span class="line">        d7over = arr8[<span class="number">6</span>],</span><br><span class="line">        d8over = arr8[<span class="number">7</span>],</span><br><span class="line">        d9over = arr8[<span class="number">8</span>],</span><br><span class="line">        d10over = arr8[<span class="number">9</span>],</span><br><span class="line">        d11over = arr8[<span class="number">10</span>],</span><br><span class="line">        d12over = arr8[<span class="number">11</span>];</span><br><span class="line"></span><br><span class="line">      statuShop = [</span><br><span class="line">        d1over, d1over, d2over, d2over, d3over, d3over, d4over,</span><br><span class="line">        d5over, d5over, d6over, d6over, d7over, d7over, d8over, d8over,</span><br><span class="line">        d9over, d9over, d10over, d10over, d11over, d11over, d12over, d12over</span><br><span class="line">      ];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> statuShop;</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// console.log('å•†åŸæ¥å£æŠ¥é”™---');</span></span><br><span class="line">      <span class="comment">// console.log(error);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> statuShop;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> shopStatusArr = getShopStatus();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ—¶é—´çŠ¶æ€å‡½æ•°  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeStatus</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> status = <span class="string">'load'</span>,</span><br><span class="line">    nowTime = <span class="built_in">parseFloat</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()),</span><br><span class="line">    startTime = <span class="built_in">parseFloat</span>((<span class="keyword">new</span> <span class="built_in">Date</span>(start)).getTime()),</span><br><span class="line">    endTime = <span class="built_in">parseFloat</span>((<span class="keyword">new</span> <span class="built_in">Date</span>(end)).getTime()),</span><br><span class="line">    lastStartTime = <span class="built_in">parseFloat</span>(startTime - nowTime),</span><br><span class="line">    lastEndTime = <span class="built_in">parseFloat</span>(endTime - nowTime);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœªå¼€å§‹</span></span><br><span class="line">  <span class="keyword">if</span> (lastStartTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> status = <span class="string">'load'</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (lastStartTime &lt;= <span class="number">0</span> &amp;&amp; lastEndTime &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿›è¡Œä¸­</span></span><br><span class="line">    <span class="keyword">return</span> status = <span class="string">'start'</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (lastEndTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// å·²ç»“æŸ</span></span><br><span class="line">    <span class="keyword">return</span> status = <span class="string">'end'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å„ä¸ªæ—¶é—´æ®µçŠ¶æ€åˆ‡æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isTimeStartEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> timer;</span><br><span class="line">  <span class="keyword">var</span> timersArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>];</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ—¶é—´çŠ¶æ€</span></span><br><span class="line">  $.each(timersArr, <span class="function"><span class="keyword">function</span> (<span class="params">i, item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> start = <span class="built_in">eval</span>(<span class="string">'starttime'</span> + item);</span><br><span class="line">    <span class="keyword">var</span> end = <span class="built_in">eval</span>(<span class="string">'endtime'</span> + item);</span><br><span class="line">    <span class="keyword">var</span> status = timeStatus(start, end);</span><br><span class="line">   </span><br><span class="line">    switchCaseEvent(item, status);</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> *ç§’æ€æ—¶é—´ç›‘æ§ï¼šåˆ¤æ–­æ—¶é—´æ®µå‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">intervalStartEvent</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> bigTimer;</span><br><span class="line">  <span class="keyword">var</span> isClear = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> status = timeStatus(start, end);</span><br><span class="line">  <span class="comment">// æ—¶é—´æˆªæ­¢ï¼Œæ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">  <span class="keyword">if</span> (status === <span class="string">'end'</span>) &#123;</span><br><span class="line">    isClear = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (isClear) &#123;</span><br><span class="line">    clearTimeout(bigTimer);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    bigTimer = setTimeout(<span class="string">'intervalStartEvent(starttime1, endtime23);'</span>, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç›‘æ§æ—¶é—´æ®µå‡½æ•°</span></span><br><span class="line">  isTimeStartEvent();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æç¤ºåŠbuttonçŠ¶æ€åˆ‡æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">switchCaseEvent</span>(<span class="params">item, type</span>) </span>&#123;</span><br><span class="line">  item = item || <span class="number">1</span>;</span><br><span class="line">  type = type || <span class="string">'end'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (item) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn1'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn2'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn3'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn4'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn5'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn6'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">13</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn7'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">14</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">15</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn8'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">17</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn9'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">18</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">19</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn10'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">20</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">21</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn11'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">22</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">23</span>:</span><br><span class="line">      startAndEndEvent($(<span class="string">'#qiangbtn12'</span>), item, type);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡å­—çŠ¶æ€åˆ‡æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startAndEndEvent</span>(<span class="params">obj, item, type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">'start'</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> status = shopStatusArr[item - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (status) &#123;</span><br><span class="line">      $(<span class="string">'#qiang-time0'</span> + item).text(<span class="string">'å¼€å§‹ç§’æ€'</span>);</span><br><span class="line">      obj.removeClass(<span class="string">'unclick'</span>).text(<span class="string">'å¼€å§‹ç§’æ€'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $(<span class="string">'#qiang-time0'</span> + item).text(<span class="string">'å·²æŠ¢å…‰'</span>).css(<span class="string">'color'</span>, <span class="string">'#9b9b9b'</span>);</span><br><span class="line">      obj.addClass(<span class="string">'unclick unclick-over'</span>).text(<span class="string">'å·²æŠ¢å…‰'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'end'</span>) &#123;</span><br><span class="line">    $(<span class="string">'#qiang-time0'</span> + item).text(<span class="string">'å·²æŠ¢å…‰'</span>).css(<span class="string">'color'</span>, <span class="string">'#9b9b9b'</span>);</span><br><span class="line">    obj.addClass(<span class="string">'unclick unclick-time'</span>).text(<span class="string">'å·²æŠ¢å…‰'</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $(<span class="string">'#qiang-time0'</span> + item).text(<span class="string">'å³å°†å¼€å§‹'</span>);</span><br><span class="line">    <span class="comment">// ä¸¤å¯¹æ—¶é—´æ®µå¯¹åº”åŒä¸€ä¸ªæŒ‰é’®ï¼Œåˆ¤æ–­æœ¬æ®µæ—¶é—´æ˜¯å¦æˆªæ­¢ï¼Œå†å¼€å¯å¦ä¸€æ®µæ—¶é—´çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (obj.hasClass(<span class="string">'unclick-time'</span>)) &#123;</span><br><span class="line">      obj.removeClass(<span class="string">'unclick'</span>).text(<span class="string">'å³å°†å¼€å§‹'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŠŸèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾ç½®Cookie</title>
      <link href="/2018/11/03/web-cookie/"/>
      <url>/2018/11/03/web-cookie/</url>
      
        <content type="html"><![CDATA[<h3 id="è®¾ç½®Cookieæ€»ç»“"><a href="#è®¾ç½®Cookieæ€»ç»“" class="headerlink" title="è®¾ç½®Cookieæ€»ç»“"></a>è®¾ç½®Cookieæ€»ç»“</h3><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¶è—åŠŸèƒ½</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">addFavorite</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> title = <span class="string">'æ„æ³•åŠå¯¼ä½“STM32/STM8æŠ€æœ¯ç¤¾åŒº - æä¾›æœ€æ–°çš„STèµ„è®¯å’ŒæŠ€æœ¯äº¤æµ'</span>;</span><br><span class="line">   <span class="keyword">var</span> URL = <span class="string">'http://www.stmcu.org.cn/'</span>; </span><br><span class="line">   <span class="comment">// IE10</span></span><br><span class="line">   <span class="keyword">if</span>(<span class="built_in">document</span>.all) &#123;</span><br><span class="line">     <span class="built_in">window</span>.external.addFavorite(URL, title);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     alert(<span class="string">'æ‰‹åŠ¨ Ctrl+D å¯ä»¥æ”¶è—æˆ‘ä»¬çš„ç½‘ç«™å“¦'</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// è®¾ç½®cookieï¼ŒåŒä¸€åŸŸåéƒ½å¯è·å–</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, exdays</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> exdays = exdays || <span class="number">1024</span>;</span><br><span class="line">   <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">   d.setTime(d.getTime() + (exdays * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>));</span><br><span class="line">   <span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + <span class="string">";path=/;expires="</span> + d.toGMTString();</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// è¯»å–cookiesï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è®¾ç½®çš„name</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> name = name + <span class="string">"="</span>;</span><br><span class="line">   <span class="keyword">var</span> ca = <span class="built_in">document</span>.cookie.split(<span class="string">';'</span>);</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ca.length; i++) &#123;</span><br><span class="line">     <span class="keyword">var</span> c = ca[i].trim();</span><br><span class="line">     <span class="keyword">if</span> (c.indexOf(name) == <span class="number">0</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> c.substring(name.length, c.length);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">checkCookie</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> user = getCookie(<span class="string">"msgCookie"</span>);</span><br><span class="line">   <span class="keyword">var</span> width = <span class="built_in">window</span>.innerWidth||<span class="built_in">document</span>.documentElement.clientWidth||<span class="built_in">document</span>.body.clientWidth;</span><br><span class="line">   <span class="keyword">if</span>(width &gt;= <span class="number">1080</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (user != <span class="string">""</span>) &#123;</span><br><span class="line">       msgHide();</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       msgShow();</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å…³é—­æ—¶è®¾ç½®cookie</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">closeModal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   msgHide();</span><br><span class="line">   setCookie(<span class="string">"msgCookie"</span>, <span class="string">'msgCookie'</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">msgHide</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">document</span>.getElementById(<span class="string">'newsTipsModal'</span>).style.display = <span class="string">'none'</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">msgShow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">document</span>.getElementById(<span class="string">'newsTipsModal'</span>).style.display = <span class="string">'block'</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// init</span></span><br><span class="line"> checkCookie();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŠŸèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ JavaScriptæ·±å…¥ç³»åˆ—ç®€è¦æ€»ç»“</title>
      <link href="/2018/10/31/js-learn-prototype/"/>
      <url>/2018/10/31/js-learn-prototype/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ JavaScriptæ·±å…¥ç³»åˆ—ç®€è¦æ€»ç»“<br><a id="more"></a></p><h3 id="ä»åŸå‹åˆ°åŸå‹é“¾"><a href="#ä»åŸå‹åˆ°åŸå‹é“¾" class="headerlink" title="ä»åŸå‹åˆ°åŸå‹é“¾"></a>ä»åŸå‹åˆ°åŸå‹é“¾</h3><p>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾</a></p><blockquote><p>æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸ºè°ƒç”¨è¯¥å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹</p></blockquote><p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype1.png" alt="æ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹çš„å…³ç³»å›¾"></p><blockquote><p>æ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé™¤nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ªå±æ€§ï¼š<code>__proto__</code>ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹</p></blockquote><p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype2.png" alt="å®ä¾‹ä¸å®ä¾‹åŸå‹çš„å…³ç³»å›¾"></p><blockquote><p>æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°</p></blockquote><p><img src="https://raw.githubusercontent.com/mqyqingfeng/Blog/master/Images/prototype3.png" alt=""></p><blockquote><p>åŸå‹å¯¹è±¡æ˜¯é€šè¿‡ <code>Object</code> æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œæœ€å<code>Object.prototype.__proto__ = null</code></p></blockquote><p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype5.png" alt="åŸå‹é“¾ç¤ºæ„å›¾"></p><h3 id="è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</h3><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/mqyqingfeng/Blog/issues/3" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</a></p><blockquote><p>javascripté‡‡ç”¨çš„æ˜¯<code>è¯æ³•ä½œç”¨åŸŸ(lexical scoping)</code>ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š</p></blockquote><ul><li>è¯æ³•ä½œç”¨åŸŸï¼Œå³é™æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†</li><li>åŠ¨æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š</li></ul><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"></a>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h3><p>å½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª<code>æ‰§è¡Œä¸Šä¸‹æ–‡(execution context)</code>ï¼Œå¹¶ä¸”å‹å…¥<code>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(Execution context stack, ESC)</code></p><p>å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä¼šå°†å‡½æ•°çš„<code>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</code>ä¸­å¼¹å‡º</p><h3 id="å˜é‡å¯¹è±¡"><a href="#å˜é‡å¯¹è±¡" class="headerlink" title="å˜é‡å¯¹è±¡"></a>å˜é‡å¯¹è±¡</h3><p>1ã€å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šå…¨å±€å¯¹è±¡</p><p>2ã€å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šåªåŒ…æ‹¬<code>Arguments</code>å¯¹è±¡</p><p>3ã€è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼</p><p>4ã€ä»£ç æ‰§è¡Œé˜¶æ®µï¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼</p><p>æ€»ç»“ï¼šæœªè¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹å‰ï¼Œ<code>å˜é‡å¯¹è±¡(VO)</code>ä¸­çš„å±æ€§éƒ½ä¸èƒ½è®¿é—®ï¼ä½†æ˜¯è¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹åï¼Œ<code>å˜é‡å¯¹è±¡(VO)</code>è½¬å˜ä¸ºäº†<code>æ´»åŠ¨å¯¹è±¡(AO)</code>ï¼Œé‡Œé¢çš„å±æ€§éƒ½èƒ½è¢«è®¿é—®äº†ï¼Œç„¶åå¼€å§‹è¿›è¡Œæ‰§è¡Œé˜¶æ®µçš„æ“ä½œã€‚å®ƒä»¬å…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤„äºæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒç”Ÿå‘½å‘¨æœŸã€‚</p><p>æœ€åï¼Œå‡½æ•°æ˜¯â€œç¬¬ä¸€ç­‰å…¬æ°‘â€ï¼Œè®°ä½è¿™ä¸ªï¼Œå˜é‡åç§°å’Œå‡½æ•°åç§°ç›¸åŒçš„å£°æ˜ï¼Œä¼˜å…ˆæ‰§è¡Œå‡½æ•°å£°æ˜</p><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><h3 id="ä»ECMAScriptè§„èŒƒè§£è¯»this"><a href="#ä»ECMAScriptè§„èŒƒè§£è¯»this" class="headerlink" title="ä»ECMAScriptè§„èŒƒè§£è¯»this"></a>ä»ECMAScriptè§„èŒƒè§£è¯»this</h3><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h3><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><p>é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚</p><p>è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚</p><p>é‚£ä¹ˆï¼Œé—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡ã€‚</p><h3 id="å‚æ•°æŒ‰å€¼ä¼ é€’"><a href="#å‚æ•°æŒ‰å€¼ä¼ é€’" class="headerlink" title="å‚æ•°æŒ‰å€¼ä¼ é€’"></a>å‚æ•°æŒ‰å€¼ä¼ é€’</h3><p>ECMAScriptä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚</p><p>å³ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚</p><p>å‚æ•°å¦‚æœæ˜¯åŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹æŒ‰å…±äº«ä¼ é€’ã€‚</p><p>å…±äº«ä¼ é€’æ˜¯æŒ‡ï¼Œåœ¨ä¼ é€’å¯¹è±¡çš„æ—¶å€™ï¼Œä¼ é€’å¯¹è±¡çš„å¼•ç”¨çš„å‰¯æœ¬ã€‚</p><h3 id="callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°"><a href="#callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°"></a>callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°</h3><p><code>call()</code>åœ¨ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œè‹¥å¹²ä¸ªæŒ‡å®šçš„å‚æ•°å€¼çš„å‰æä¸‹ï¼Œè°ƒç”¨æŸä¸ªå‡½æ•°æˆ–æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mycall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="comment">//è·å–è°ƒç”¨callçš„å‡½æ•°ï¼Œç”¨thiså¯ä»¥è·å–</span></span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    args.push(<span class="string">'arguments['</span> + i + <span class="string">']'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠŠä¼ ç»™callçš„å‚æ•°ä¼ é€’ç»™äº†context.fnå‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">'context.fn('</span> + args + <span class="string">')'</span>);</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>apply()</code>åŒ<code>call()</code>ï¼Œåªä¸è¿‡å°†å¤šä¸ªå‚æ•°å€¼ï¼Œä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥è€Œå·²ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myapply = <span class="function"><span class="keyword">function</span>(<span class="params">context, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = <span class="built_in">Object</span>(context) || <span class="built_in">window</span>;</span><br><span class="line">  context.fn = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">    result = context.fn();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> index = <span class="number">0</span>; index &lt; arr.length; index++) &#123;</span><br><span class="line">      args.push(<span class="string">'arr['</span> + index + <span class="string">']'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="built_in">eval</span>(<span class="string">'context.fn('</span> + args + <span class="string">')'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="bindçš„æ¨¡æ‹Ÿå®ç°"><a href="#bindçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="bindçš„æ¨¡æ‹Ÿå®ç°"></a>bindçš„æ¨¡æ‹Ÿå®ç°</h3><p><code>bind()</code>æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨ï¼Œbind()ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„thisï¼Œä¹‹åçš„ä¸€ç³»åˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ï¼Œä½œä¸ºå®ƒçš„å‚æ•°ã€‚</p><h3 id="newçš„æ¨¡æ‹Ÿå®ç°"><a href="#newçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="newçš„æ¨¡æ‹Ÿå®ç°"></a>newçš„æ¨¡æ‹Ÿå®ç°</h3><p>newè¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»å‹ä¹‹ä¸€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†´ç¾½çš„åšå®¢ä¹‹JavaScriptã€ES6ç³»åˆ—é›†é”¦</title>
      <link href="/2018/10/26/blog-01/"/>
      <url>/2018/10/26/blog-01/</url>
      
        <content type="html"><![CDATA[<blockquote><p>JavaScriptæ·±å…¥ç³»åˆ— 15 ç¯‡å·²å®Œç»“<br>JavaScriptä¸“é¢˜ç³»åˆ— 20 ç¯‡å·²å®Œç»“<br>underscore ç³»åˆ— 8 ç¯‡å·²å®Œç»“<br><a id="more"></a></p></blockquote><h2 id="å†´ç¾½çš„åšå®¢"><a href="#å†´ç¾½çš„åšå®¢" class="headerlink" title="å†´ç¾½çš„åšå®¢"></a>å†´ç¾½çš„åšå®¢</h2><h3 id="ä¸“æ "><a href="#ä¸“æ " class="headerlink" title="ä¸“æ "></a>ä¸“æ </h3><ul><li><a href="https://juejin.im/user/58e4b9b261ff4b006b3227f4" target="_blank" rel="noopener">æ˜é‡‘ä¸»é¡µ</a></li><li><p><a href="https://segmentfault.com/u/yayu/articles" target="_blank" rel="noopener">segmentfaultä¸»é¡µ</a></p></li><li><p><a href="https://www.zhihu.com/people/qing-feng-yi-yang/activities" target="_blank" rel="noopener">çŸ¥ä¹</a></p></li></ul><h3 id="æ·±å…¥ç³»åˆ—ç›®å½•"><a href="#æ·±å…¥ç³»åˆ—ç›®å½•" class="headerlink" title="æ·±å…¥ç³»åˆ—ç›®å½•"></a>æ·±å…¥ç³»åˆ—ç›®å½•</h3><ol><li><a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener">JavaScirptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/3" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/4" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/5" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹å˜é‡å¯¹è±¡</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/6" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ä½œç”¨åŸŸé“¾</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/7" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ä»ECMAScriptè§„èŒƒè§£è¯»this</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/8" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/9" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹é—­åŒ…</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/10" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹å‚æ•°æŒ‰å€¼ä¼ é€’</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/11" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/12" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹bindçš„æ¨¡æ‹Ÿå®ç°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/13" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹newçš„æ¨¡æ‹Ÿå®ç°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/14" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ç±»æ•°ç»„å¯¹è±¡ä¸arguments</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/15" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/16" target="_blank" rel="noopener">JavaScriptæ·±å…¥ä¹‹ç»§æ‰¿çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/17" target="_blank" rel="noopener">JavaScriptæ·±å…¥ç³»åˆ—15ç¯‡æ­£å¼å®Œç»“ï¼</a></li></ol><h3 id="ä¸“é¢˜ç³»åˆ—ç›®å½•"><a href="#ä¸“é¢˜ç³»åˆ—ç›®å½•" class="headerlink" title="ä¸“é¢˜ç³»åˆ—ç›®å½•"></a>ä¸“é¢˜ç³»åˆ—ç›®å½•</h3><ol><li><a href="https://github.com/mqyqingfeng/Blog/issues/22" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦é˜²æŠ–</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/26" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦èŠ‚æµ</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/27" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹æ•°ç»„å»é‡</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/28" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š)</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/30" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸‹)</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/32" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹æ·±æµ…æ‹·è´</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/33" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹ä»é›¶å®ç°jQueryçš„extend</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/35" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹å¦‚ä½•æ±‚æ•°ç»„çš„æœ€å¤§å€¼å’Œæœ€å°å€¼</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/36" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹æ•°ç»„æ‰å¹³åŒ–</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/37" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹å­¦underscoreåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æŒ‡å®šå…ƒç´ </a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/40" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹jQueryé€šç”¨éå†æ–¹æ³•eachçš„å®ç°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/41" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/42" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹å‡½æ•°æŸ¯é‡ŒåŒ–</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/43" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹åå‡½æ•°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/44" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹æƒ°æ€§å‡½æ•°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/45" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹å‡½æ•°ç»„åˆ</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/46" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹å‡½æ•°è®°å¿†</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/49" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹é€’å½’</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/51" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹ä¹±åº</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/52" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹è§£è¯» v8 æ’åºæºç </a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/53" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ç³»åˆ—20ç¯‡æ­£å¼å®Œç»“ï¼</a></li></ol><h3 id="underscore-ç³»åˆ—ç›®å½•"><a href="#underscore-ç³»åˆ—ç›®å½•" class="headerlink" title="underscore ç³»åˆ—ç›®å½•"></a>underscore ç³»åˆ—ç›®å½•</h3><ol><li><a href="https://github.com/mqyqingfeng/Blog/issues/56" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹å¦‚ä½•å†™è‡ªå·±çš„ underscore</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/57" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹é“¾å¼è°ƒç”¨</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/58" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹å†…éƒ¨å‡½æ•° cb å’Œ optimizeCb</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/60" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹å†…éƒ¨å‡½æ•° restArgs</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/62" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹é˜²å†²çªä¸ Utility Functions</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/63" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹å®ç°ä¸€ä¸ªæ¨¡æ¿å¼•æ“(ä¸Š)</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/70" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹å®ç°ä¸€ä¸ªæ¨¡æ¿å¼•æ“(ä¸‹)</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/77" target="_blank" rel="noopener">underscore ç³»åˆ—ä¹‹å­—ç¬¦å®ä½“ä¸ _.escape</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/79" target="_blank" rel="noopener">underscore çš„æºç è¯¥å¦‚ä½•é˜…è¯»ï¼Ÿ</a></li></ol><h3 id="ES6-ç³»åˆ—ç›®å½•"><a href="#ES6-ç³»åˆ—ç›®å½•" class="headerlink" title="ES6 ç³»åˆ—ç›®å½•"></a>ES6 ç³»åˆ—ç›®å½•</h3><ol><li><a href="https://github.com/mqyqingfeng/Blog/issues/82" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹ let å’Œ const</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/84" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æ¨¡æ¿å­—ç¬¦ä¸²</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/85" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹ç®­å¤´å‡½æ•°</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/87" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æ¨¡æ‹Ÿå®ç° Symbol ç±»å‹</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/90" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹è¿­ä»£å™¨ä¸ for of</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/91" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Set æ•°æ®ç»“æ„</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/92" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹ WeakMap</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/98" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Promise</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/99" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹ Generator çš„è‡ªåŠ¨æ‰§è¡Œ</a></li><li><a href="https://github.com/mqyqingfeng/Blog/issues/100" target="_blank" rel="noopener">ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Async</a></li></ol><h3 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h3><ol><li><a href="https://juejin.im/post/5bbc54a2e51d450e5a7445b4" target="_blank" rel="noopener">å¦‚ä½•è½»æ¾æ‹¿åˆ°æ·˜å®å‰ç«¯ offer</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Purl.js-JSè·å–åœ°å€æ ä¿¡æ¯ç”¨ä¾‹æµ‹è¯•</title>
      <link href="/2018/09/23/js-purl/"/>
      <url>/2018/09/23/js-purl/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Purl.jså¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¥è·å–åœ°å€æ çš„ä¸€äº›ä¿¡æ¯ï¼Œ å¯ä»¥ä½¿ç”¨åŸç”Ÿjsï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨jQuery</p></blockquote><ul><li><a href="https://www.bootcdn.cn/purl/readme/" target="_blank" rel="noopener">Purl.jså®˜æ–¹æ–‡æ¡£</a></li></ul><a id="more"></a><table><thead><tr><th style="text-align:left">Attributes</th><th>Info</th></tr></thead><tbody><tr><td style="text-align:left">source</td><td>The whole url being parsed</td></tr><tr><td style="text-align:left">protocol</td><td>eg. http, https, file, etc</td></tr><tr><td style="text-align:left">host</td><td>eg. <a href="http://www.mydomain.com" target="_blank" rel="noopener">www.mydomain.com</a>, localhost etc</td></tr><tr><td style="text-align:left">port</td><td>eg. 80</td></tr><tr><td style="text-align:left">relative</td><td>The relative path to the file including the querystring (eg. /folder/dir/index.html?item=value)</td></tr><tr><td style="text-align:left">path</td><td>The path to the file (eg. /folder/dir/index.html)</td></tr><tr><td style="text-align:left">directory</td><td>The directory part of the path (eg. /folder/dir/)</td></tr><tr><td style="text-align:left">file</td><td>The basename of the file eg. index.html</td></tr><tr><td style="text-align:left">query</td><td>The entire query string if it exists, eg. item=value&amp;item2=value2</td></tr><tr><td style="text-align:left">fragment or anchor</td><td>The entire string after the # symbol</td></tr></tbody></table><h4 id="åˆå§‹åŒ–ï¼š"><a href="#åˆå§‹åŒ–ï¼š" class="headerlink" title="åˆå§‹åŒ–ï¼š"></a>åˆå§‹åŒ–ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url;</span><br><span class="line"><span class="keyword">var</span> myurl;</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#clickBtn"</span>).find(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res, resInfo;</span><br><span class="line"></span><br><span class="line">  myurl = $(<span class="string">"#urlArea"</span>).val();</span><br><span class="line">  <span class="comment">// å¦‚æœmyurlä¸ºç©ºï¼Œåˆ™ä¼šè·å–å½“å‰é¡µé¢çš„url</span></span><br><span class="line">  url = purl(myurl);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">"#urlArea"</span>).val(myurl);</span><br><span class="line"></span><br><span class="line">  res = $(<span class="keyword">this</span>).text();</span><br><span class="line">  resInfo = getUrlInfo(url, res);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">"#inputRes"</span>).val(resInfo);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlInfo</span>(<span class="params">url, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (res === <span class="string">'param'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> url.param();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res === <span class="string">'segment'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> url.segment();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> url.attr(res);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œè¯•è¯•çœ‹ï¼š"><a href="#è¿è¡Œè¯•è¯•çœ‹ï¼š" class="headerlink" title="è¿è¡Œè¯•è¯•çœ‹ï¼š"></a>è¿è¡Œè¯•è¯•çœ‹ï¼š</h4><ul><li><a href="https://codepen.io/istaotao/pen/EeJoKP" target="_blank" rel="noopener">codepenå®Œæ•´ä»£ç </a> </li></ul><h4 id="æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š"><a href="#æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š" class="headerlink" title="æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š"></a>æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</h4><p><img src="https://cdn.files.qdfuns.com/article/content/picture/201807/20/221014v16gkkkdks3eegac.png" alt="æˆªå›¾"></p><h4 id="è®°å½•åœ¨QDfuns"><a href="#è®°å½•åœ¨QDfuns" class="headerlink" title="è®°å½•åœ¨QDfuns:"></a>è®°å½•åœ¨QDfuns:</h4><ul><li><a href="https://www.qdfuns.com/article/32286/0a69e234cca1cab2f2005425338623a8.html" target="_blank" rel="noopener">Purl.js-ä½¿ç”¨JSè·å–URLä¿¡æ¯</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsæ’ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5 Canvas å›¾å½¢ç»˜åˆ¶</title>
      <link href="/2018/09/23/canvas-01/"/>
      <url>/2018/09/23/canvas-01/</url>
      
        <content type="html"><![CDATA[<blockquote><p>canvas å…ƒç´ å¹¶é Canvas ä¸­æœ€å¼ºå¤§çš„éƒ¨åˆ†ï¼ŒçœŸæ­£çš„å…³é”®éƒ¨åˆ†æ˜¯ 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œè¿™æ˜¯ä½ çœŸæ­£ç»˜åˆ¶å›¾å½¢çš„åœ°æ–¹ã€‚canvas å…ƒç´ çš„ç”¨é€”åªæ˜¯ä½œä¸º 2D æ¸²æŸ“ä¸Šä¸‹æ–‡çš„åŒ…è£…å™¨ï¼Œå®ƒåŒ…å«ç»˜å›¾å’Œå›¾å½¢æ“ä½œæ‰€éœ€è¦çš„å…¨éƒ¨æ–¹æ³•å’Œä¸°å¯ŒåŠŸèƒ½ã€‚ç†è§£è¿™ä¸€ç‚¹æ˜¯å¾ˆé‡è¦çš„ï¼Œå¼ºè°ƒä¸€ä¸‹ï¼šç»˜å›¾æ˜¯åœ¨ 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨ canvas å…ƒç´ ä¸­è¿›è¡Œã€‚å¯ä»¥é€šè¿‡ canvas å…ƒç´ è®¿é—®å’Œæ˜¾ç¤º 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚<a href="http://techbrood.com/h5b2a?p=html-canvas-2dcontext" target="_blank" rel="noopener">ã€å¼•å…¥åŸæ–‡ã€‘</a></p></blockquote><a id="more"></a><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p><a href="https://codepen.io/istaotao/pen/LJvzEm" target="_blank" rel="noopener">HTML5 Canvas ç²‰å°˜æ€ç²’å­å¼•åŠ›æ•ˆåº”</a></p><h2 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><p><a href="https://www.qdfuns.com/article/32286/453691c72f71e7534b062c8baa8e3506.html" target="_blank" rel="noopener">HTML5 Canvas å›¾å½¢ç»˜åˆ¶ åˆçº§</a></p><p><a href="https://www.qdfuns.com/article/32286/4c494e2cdc21135c41be95fbb685e379.html" target="_blank" rel="noopener">HTML5 Canvas å›¾å½¢ç»˜åˆ¶ ä¸­çº§</a></p><p><a href="https://www.qdfuns.com/article/32286/237e32dfb71a2626c02cfc74c65f7271.html" target="_blank" rel="noopener">HTML5 è·Ÿéšé¼ æ ‡ç§»åŠ¨çš„é›ªèŠ±åŠ¨ç”»</a></p><p><a href="https://www.qdfuns.com/article/32286/e833cda2cb9eacc01f09ffae5734405e.html" target="_blank" rel="noopener">HTML5 Canvas å¾ˆé…·ç‚«çš„ç²‰å°˜æ€ç²’å­å¼•åŠ›æ•ˆåº”å®è·µ</a></p><p><a href="https://www.qdfuns.com/article/32286/c05adac0d8a4f65121707a336bd1190b.html" target="_blank" rel="noopener">HTML5 å¾ˆé…·ç‚«çš„ç‚¹çº¿ç²’å­ç‰¹æ•ˆï¼Œä½ ä¸è¯•ä¸€ä¸‹ï¼Ÿ</a></p>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬ã€‘é«˜æ•ˆå­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§</title>
      <link href="/2018/09/22/js-learn/"/>
      <url>/2018/09/22/js-learn/</url>
      
        <content type="html"><![CDATA[<p>åˆå§‹æ•´ç†äºæ…•è¯¾ç½‘æ‰‹è®°<a href="http://www.imooc.com/article/12113" target="_blank" rel="noopener">é«˜æ•ˆå­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§</a><br><a id="more"></a></p><h2 id="æ›´å¿«å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§"><a href="#æ›´å¿«å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§" class="headerlink" title="æ›´å¿«å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§"></a>æ›´å¿«å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§</h2><blockquote><p><strong>å½“äººä»¬è¯•å›¾å­¦ä¹ JavaScriptæˆ–å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ—¶å€™ï¼Œä»–ä»¬é€šå¸¸ä¼šé‡åˆ°å¦‚ä¸‹æŒ‘æˆ˜ã€‚</strong></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. ä¸€äº›æ¦‚å¿µè®©ä»–ä»¬æ„Ÿåˆ°å›°æƒ‘ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä¹‹å‰å­¦è¿‡å…¶ä»–ç±»å‹çš„è¯­è¨€ã€‚</span><br><span class="line"></span><br><span class="line">2. å¾ˆéš¾æ‰¾åˆ°å­¦ä¹ çš„æ—¶é—´ï¼ˆæˆ–è€…åŠ¨åŠ›ï¼‰å»å­¦ä¹ ã€‚</span><br><span class="line"></span><br><span class="line">3. ä½ å¾ˆå®¹æ˜“å¿˜æ‰ä¹‹å‰å­¦åˆ°çš„ä¸œè¥¿ã€‚</span><br><span class="line"></span><br><span class="line">4. JavaScriptå·¥å…·å¤ªå¤šå¹¶ä¸”ç»å¸¸æ›´æ–°ï¼Œä»¥è‡³äºå¾ˆéš¾æ‰¾åˆ°å­¦ä¹ çš„åˆ‡å…¥ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">5. ...</span><br></pre></td></tr></table></figure><p><strong>å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›éš¾é¢˜æœ€ç»ˆèƒ½å¤Ÿè¢«å…‹æœã€‚åœ¨è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°†å±•ç¤ºå…­ä¸ªèƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¿«ã€æ›´å¼€å¿ƒã€æ›´é«˜æ•ˆåœ°å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§ã€‚</strong></p><h3 id="1ã€ä¸è¦è®©å¯¹æœªæ¥çš„å¿§è™‘å¹²æ‰°ä½ ç°åœ¨çš„å­¦ä¹ "><a href="#1ã€ä¸è¦è®©å¯¹æœªæ¥çš„å¿§è™‘å¹²æ‰°ä½ ç°åœ¨çš„å­¦ä¹ " class="headerlink" title="1ã€ä¸è¦è®©å¯¹æœªæ¥çš„å¿§è™‘å¹²æ‰°ä½ ç°åœ¨çš„å­¦ä¹ "></a>1ã€ä¸è¦è®©å¯¹æœªæ¥çš„å¿§è™‘å¹²æ‰°ä½ ç°åœ¨çš„å­¦ä¹ </h3><blockquote><p>æœ‰äº›JavaScriptåˆå­¦è€…ä¼šé—®åˆšå¼€å§‹è¦å­¦ä¹ å“ªç§æ¡†æ¶ï¼Œä½†æ˜¯å¦‚æœä½ è¿˜æ²¡èƒ½ç†Ÿç»ƒä½¿ç”¨åŸç”ŸJavaScriptï¼Œä½ å°±ä¸åº”è¯¥é—®è¿™ç§é—®é¢˜ã€‚å› ä¸ºä½ ä¼šèŠ±å¾ˆå¤šæ—¶é—´ç ”ç©¶å„ç§æ¡†æ¶è€Œå¾—ä¸åˆ°è¿›æ­¥ã€‚</p></blockquote><blockquote><p>èµ°å‡ºè¿™ä¸ªé™·é˜±çš„ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ¶å®šä¸€ä¸ªå­¦ä¹ è·¯å¾„å›¾ã€‚ä¾‹å¦‚ï¼Œè¦æˆä¸ºå‰ç«¯å¼€å‘ï¼Œä½ çš„è·¯å¾„å›¾å¯èƒ½æ˜¯ä¸‹å›¾ã€‚åœ¨å°†æ¥ä½ èƒ½å¤Ÿä½¿ç”¨HTMLå’ŒCSSåˆ¶ä½œåŠ¨æ€é¡µé¢ã€‚</p></blockquote><p><img src="http://img.mukewang.com/57ad9d660001149f07470214.png" alt="å‰ç«¯å¼€å‘å­¦ä¹ è·¯å¾„å›¾"></p><h3 id="2ã€ä¸è¦è®©è‡ªä¿¡éª—ä½ è¿›å…¥æŒç»­é—å¿˜çš„é™·é˜±"><a href="#2ã€ä¸è¦è®©è‡ªä¿¡éª—ä½ è¿›å…¥æŒç»­é—å¿˜çš„é™·é˜±" class="headerlink" title="2ã€ä¸è¦è®©è‡ªä¿¡éª—ä½ è¿›å…¥æŒç»­é—å¿˜çš„é™·é˜±"></a>2ã€ä¸è¦è®©è‡ªä¿¡éª—ä½ è¿›å…¥æŒç»­é—å¿˜çš„é™·é˜±</h3><p><strong>å¿«é€Ÿç†è§£ä¸€ä¸ªæ¦‚å¿µä¼šæ˜¯JavaScriptè¿›æ­¥çš„æœ€å¤§é˜»ç¢ï¼Œä¸‹é¢æˆ‘å°†è§£é‡Šã€‚</strong></p><blockquote><p>å½“ä½ é‡åˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè€Œä½ å¥½åƒç†è§£äº†ï¼Œä½ å¾ˆå¯èƒ½æŠ‘åˆ¶ä¸ä½å†…å¿ƒè·³åˆ°ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„å†²åŠ¨ã€‚</p></blockquote><blockquote><p>ç°å®å¯èƒ½æ˜¯ä½ ä¼šç†è§£ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹ç„¶åç»§ç»­è·³åˆ°ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚</p></blockquote><blockquote><p>ä½†æ˜¯ï¼Œå¾ˆå¿«ä½ ä¼šåˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨è¿™ä¸ªèŠ‚ç‚¹ä½ å‘ç°è‡ªå·±å·²ç»å¿˜äº†å‰é¢æ‰€å­¦ï¼Œäºæ˜¯ä½ éœ€è¦å›è¿‡å¤´å¤ä¹ ï¼Œä½ å¿«é€ŸçŸäº†ä¸€ä¸‹ä¹‹å‰æ‰€å­¦ç„¶ååˆç»§ç»­å­¦ä¹ æ–°çš„çŸ¥è¯†ã€‚</p></blockquote><blockquote><p>   ä½†æ˜¯ç°åœ¨ï¼Œä½ å¿˜è®°äº†å…¶ä»–ä¸œè¥¿ã€‚</p></blockquote><blockquote><p>   ä½ ä¸€ç›´é‡å¤è¿™ç§ç»§ç»­-å›é¡¾-ç»§ç»­-å›é¡¾æ¨¡å¼ç›´åˆ°ä½ å‘ç°è‡ªå·±å®Œå…¨è¿·å¤±ã€‚</p><p>   ä½ å¼€å§‹æ²®ä¸§ï¼Œæƒ³è¦ä¼‘æ¯ï¼Œç„¶åå½“ä½ å¼€å§‹é‡æŒ¯æ——é¼“ï¼Œå´å‘ç°è‡ªå·±å·²ç»å¿˜æ‰æ‰€æœ‰ã€‚</p></blockquote><p><strong>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªåº”å¯¹ä¸Šè¿°é—®é¢˜çš„æ–¹æ³•ï¼š</strong></p><ul><li><p>ä¸€æ¬¡åªå­¦ä¸€æ ·ä¸œè¥¿ï¼›</p></li><li><p>åšç»ƒä¹ â€”â€”å®é™…å°±æ˜¯æ•²ä»£ç ï¼›</p></li></ul><blockquote><p>   å½“ä½ å­¦ä¹ ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œä½ è¦å°†å®ƒå®è·µå‡ºæ¥ï¼Œç»ƒä¹ å®ƒï¼Œä¸å®ƒå’Œå–„ç›¸å¤„ï¼Œç”šè‡³èƒ½å¤Ÿå°†å®ƒä¸å…¶ä»–æ¦‚å¿µè”ç³»åˆ°ä¸€èµ·ã€‚</p></blockquote><blockquote><p>   å½“ä½ å­¦ä¹ ä¸€ä¸ªç¤ºä¾‹ï¼Œæœ€é‡è¦çš„æ˜¯ä½ è¦è‡ªå·±å°†ä»£ç æ•²å‡ºæ¥ï¼Œè¿™æ ·èƒ½å¸®åŠ©ä½ å¸æ”¶å®ƒã€‚å¦å¤–ï¼Œä¸€æ¬¡åªå­¦ä¸€ä¸ªä¸œè¥¿èƒ½å¤Ÿå¸®åŠ©ä½ å·©å›ºæ‰€å­¦ï¼Œå› ä¸ºè®°å¿†æ›´å°‘çš„ä¸œè¥¿æ›´å®¹æ˜“ã€‚</p></blockquote><p><strong>è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥è²Œä¼¼æ¯”é˜…è¯»ç„¶åå¿«é€Ÿè·³åˆ°ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒæ‰€èŠ±çš„æ—¶é—´æ›´å°‘ï¼Œå› ä¸ºè¿™æ ·ä½ å°±ä¸éœ€è¦é¢‘ç¹å¤ä¹ ä¹‹å‰æ‰€å­¦ã€‚æˆ‘åœ¨å¥½å‡ ä¸ªåœºåˆåæ‰è‰°éš¾çš„é¢†æ‚Ÿåˆ°è¿™ä¸ªé“ç†ã€‚</strong></p><h3 id="3ã€ä½¿ç”¨æ­£ç¡®çš„æ€ç»´æ–¹å¼ç»ƒä¹ "><a href="#3ã€ä½¿ç”¨æ­£ç¡®çš„æ€ç»´æ–¹å¼ç»ƒä¹ " class="headerlink" title="3ã€ä½¿ç”¨æ­£ç¡®çš„æ€ç»´æ–¹å¼ç»ƒä¹ "></a>3ã€ä½¿ç”¨æ­£ç¡®çš„æ€ç»´æ–¹å¼ç»ƒä¹ </h3><p><strong>å¾ˆå¤šäººè®¤ä¸ºæ•²ä»£ç æ˜¯çƒ¦äººçš„é‡å¤æ€§å·¥ä½œï¼Œæ‰€ä»¥ä»–ä»¬é€šå¸¸ä¼šè·³è¿‡è¿™ä¸ªæ­¥éª¤è¯•ç€å¯»æ‰¾æ·å¾„ã€‚å¦‚æœä½ è¯•å›¾ä¸ºJavaScriptç»ƒä¹ å¯»æ‰¾æ·å¾„ï¼Œä½ å°†ä¼šä¸ºæ­¤èŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚</strong></p><p><strong>ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•æ‰èƒ½ä½¿å¾—æ•²ä»£ç æ›´åŠ çš„æœ‰è¶£ï¼Œä½¿å¾—æˆ‘ä»¬æ„¿æ„å»æ•²ä»£ç å‘¢ï¼Ÿ</strong></p><p><em>è¯•ç€æ”¹å˜ä¸ºä¸‹é¢çš„æ€ç»´æ¨¡å¼ï¼š</em></p><blockquote><p> å¦‚æœä½ åˆšå­¦äº†ä¸€ä¸ªJavaScriptæ¦‚å¿µï¼Œç„¶è€Œä½ è¢«å‘ŠçŸ¥ä¸èƒ½ä½¿ç”¨å®ƒï¼Œå¯¹æ­¤ä½ æ„Ÿè§‰å¦‚ä½•ï¼Ÿä¸ªäººæ¥è¯´æˆ‘ä¼šæ„Ÿåˆ°æœ‰ç‚¹æ¼ç«ï¼Œç‰¹åˆ«æ˜¯ä¸ºäº†å¼„æ‡‚å®ƒæˆ‘èŠ±è´¹äº†å®è´µçš„æ—¶é—´ã€‚è¿™å°±åƒæ˜¯ä¸€ä¸ªå°å­©å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ç©å…·ï¼Œä½†å´è¢«é™åˆ¶ä¸èƒ½ç©å®ƒã€‚</p></blockquote><blockquote><p>å½“ä½ å­¦ä¹ JavaScriptçš„æ–°çŸ¥è¯†ï¼Œè¯•ç€å°†è¿™ä¸ªçŸ¥è¯†ç‚¹è§†ä½œä¸€ä¸ªæ–°ç©å…·ï¼Œä¾‹å¦‚æ–°è½¦ã€ä¸€åŒæ–°é‹ã€æˆ–ä»»ä½•ä½ è§‰å¾—å€¼å¾—æœ‰è¶£çš„ä¸œè¥¿ã€‚ç„¶åï¼Œä¸è¦æŠŠæ•²ä»£ç å½“æˆå·¥ä½œï¼Œå°†æ•²ä»£ç è§†ä½œä½ æ­£åœ¨ç©æ¸¸æˆã€‚ä½ æ­£åœ¨ä½¿ç”¨åˆšå­¦çš„æŠ€èƒ½åšä¸€äº›å¾ˆé…·çš„äº‹æƒ…ã€‚ç»™è‡ªå·±æƒŠå–œï¼ŒæŠŠæˆæœå±•ç¤ºç»™ä½ çš„æœ‹å‹ã€‚</p></blockquote><blockquote><p>   å¸¦ç€æ¸¸æˆçš„æ€ç»´æ¨¡å¼ä½ å°†å­¦å¾—æ›´å¿«ï¼Œå°†è®°å¿†çš„æ›´ç‰¢ï¼ŒåŒæ—¶ä½ å°†ä½“ä¼šåˆ°æ›´å¤šä¹è¶£ã€‚</p></blockquote><h3 id="4ã€ä½¿ç”¨FacebookæŠ€å·§ä¸ºç¼–ç¨‹è…¾æ—¶é—´"><a href="#4ã€ä½¿ç”¨FacebookæŠ€å·§ä¸ºç¼–ç¨‹è…¾æ—¶é—´" class="headerlink" title="4ã€ä½¿ç”¨FacebookæŠ€å·§ä¸ºç¼–ç¨‹è…¾æ—¶é—´"></a>4ã€ä½¿ç”¨FacebookæŠ€å·§ä¸ºç¼–ç¨‹è…¾æ—¶é—´</h3><blockquote><p>äººä»¬é‡åˆ°çš„ä¸€ä¸ªæ™®éé—®é¢˜æ˜¯ï¼Œä»–ä»¬é€šå¸¸æ‰¾ä¸åˆ°æ—¶é—´å»æ•²ä»£ç ã€‚é€šå¸¸ï¼Œè¿™äº›äººä¼šèŠ±å¥½å‡ ä¸ªå°æ—¶æµè§ˆä¾‹å¦‚Facebookã€YouTubeã€Wikipediaæˆ–è€…Redditè¿™æ ·çš„ç½‘ç«™ã€‚æ— è®ºä½ æ˜¯å¦ç¬¦åˆä¸Šè¿°æè¿°ï¼Œæˆ‘ä»¬éƒ½èƒ½ä»ä¸­å­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚</p></blockquote><blockquote><p> æˆ‘å½“ç„¶æœ‰æ—¶é—´åªæµè§ˆFacebookä¸€ä¼šå„¿ï¼Œä½†é€šå¸¸æˆ‘ä¼šåœ¨ä¸Šé¢å¾…å¥½å‡ ä¸ªå°æ—¶æµè§ˆå¾€è¿”ã€‚è¿™æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿæˆ‘è®¤ä¸ºåŸå› åœ¨äºï¼Œåˆšå¼€å§‹æˆ‘å¹¶æ²¡æ‰“ç®—èŠ±åœ¨è¿™ä¸Šé¢èŠ±è´¹é‚£ä¹ˆå¤šæ—¶é—´ã€‚å¼€å§‹è¡ŒåŠ¨æ˜¯åšä¸€ä»¶äº‹æƒ…æœ€å›°éš¾çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥å°†ç›®æ ‡è®¾å®šçš„è¶³å¤Ÿå°èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è¿›å…¥çŠ¶æ€ã€‚å¦‚æœæœ‰äººé—®æˆ‘æ˜¯ä¸æ˜¯æ‰“ç®—èŠ±å‡ ä¸ªå°æ—¶æµè§ˆFacebookï¼Œæˆ‘ä¼šå›ç­”ä¸ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰æ—¶é—´ã€‚ç„¶è€Œï¼Œå¯¹äºä»…ä»…å°è¯•ä¸€ä¸‹æˆ‘æ˜¯èƒ½å¤Ÿæ¥å—çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘èƒ½å¤Ÿæ²‰æµ¸å…¶ä¸­çš„æ–¹æ³•ã€‚</p></blockquote><blockquote><p>  <strong>å¥½æ¶ˆæ¯æ˜¯ï¼Œä½ èƒ½å¤Ÿå¯¹æ•²ä»£ç è¿ç”¨åŒæ ·çš„å¿ƒç†æŠ€å·§ã€‚</strong></p><p>   <strong>ä¸è¦è®¡åˆ’èŠ±å‡ ä¸ªå°æ—¶æ•²ä»£ç ï¼Œå› ä¸ºä½ ä¼šå‘ç°è‡ªå·±æ²¡æœ‰æ—¶é—´ã€‚</strong></p><p>   <strong>ç›¸åçš„ï¼Œå‘Šè¯‰è‡ªå·±åªæ•²ä¸‰åˆ†é’Ÿä»£ç ã€‚è¿™æ ·ä½ å°±ä¸éœ€è¦ä¸ºå¯»æ‰¾æ•²ä»£ç çš„æ—¶é—´çƒ¦å¿ƒã€‚</strong></p></blockquote><h3 id="5ã€æ€è€ƒçš„æ›´æ…¢ä½ å°†å­¦å¾—æ›´å¿«"><a href="#5ã€æ€è€ƒçš„æ›´æ…¢ä½ å°†å­¦å¾—æ›´å¿«" class="headerlink" title="5ã€æ€è€ƒçš„æ›´æ…¢ä½ å°†å­¦å¾—æ›´å¿«"></a>5ã€æ€è€ƒçš„æ›´æ…¢ä½ å°†å­¦å¾—æ›´å¿«</h3><blockquote><p>è¿™ä¸€æ¡å¬èµ·æ¥è¿åç›´è§‰ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘å°†ç”¨ä¸€ä¸ªæ•…äº‹æ¥è§£é‡Šã€‚</p></blockquote><blockquote><p>æˆ‘çš„ä¸€ä¸ªæœ‹å‹åˆä¸€æ¬¡å¯¹JavaScriptçš„ä¸€ä¸ªç‰¹æ€§æ„Ÿåˆ°å›°æƒ‘ã€‚æˆ‘è®©ä»–å°†ä»–çŸ¥é“çš„è§£é‡Šç»™æˆ‘å¬ï¼Œç„¶åå‘Šè¯‰æˆ‘å“ªå„¿è®©ä»–å›°æƒ‘ã€‚å½“å®ƒå‘æˆ‘è§£é‡Šä»£ç ï¼Œæˆ‘å‘ç°ä»–åœ¨è·³æ­¥ã€‚</p></blockquote><blockquote><p>â€œç­‰ä¼šå„¿ï¼â€æˆ‘è¯´é“ã€‚â€œæ…¢æ…¢æ¥ï¼Œç„¶åå°†è¿™äº›ä¸€æ­¥æ­¥è§£é‡Šç»™æˆ‘å¬ã€‚â€</p></blockquote><blockquote><p>æˆ‘çš„æœ‹å‹ç›´æ¥å°†æ•´ä¸ªä»£ç çš„åŠŸèƒ½æ€»ç»“ç»™æˆ‘å¬ã€‚</p></blockquote><blockquote><p>æˆ‘å†æ¬¡è®©ä»–æš‚åœã€‚â€œä½ è¿˜æ˜¯åœ¨è·³æ­¥ã€‚å†è§£é‡Šä¸€æ¬¡ï¼Œè¿™æ¬¡æˆ‘éœ€è¦ä½ ä¸€æ­¥æ­¥å°†æ¯ä¸€è¡Œä»£ç å‘ç”Ÿäº†ä»€ä¹ˆè§£é‡Šç»™æˆ‘å¬ã€‚â€</p></blockquote><blockquote><p>è¿™ä¸€æ¬¡ï¼Œæˆ‘çš„æœ‹å‹èƒ½å¤Ÿæ›´å¥½çš„è§£é‡Šä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚å…³é”®åœ¨äºä»–èŠ±æ—¶é—´å»ç†è§£æ¯ä¸€è¡Œä»£ç è€Œä¸æ˜¯è¯•å›¾ä¸€ä¸‹ç†è§£æ‰€æœ‰ã€‚</p></blockquote><blockquote><p>åœ¨ä¸Šè¿°è¿™ç§æ¡ˆä¾‹ä¸­ï¼Œ<strong>æ€è€ƒçš„æ›´æ…¢å®é™…ä¸Šè®©ä½ å­¦å¾—æ›´å¿«ã€‚</strong></p></blockquote><h3 id="6ã€åœ¨å†™å¤æ‚ä»£ç å‰å…ˆç”¨ç®€å•è¯­è¨€å†™ä¸‹"><a href="#6ã€åœ¨å†™å¤æ‚ä»£ç å‰å…ˆç”¨ç®€å•è¯­è¨€å†™ä¸‹" class="headerlink" title="6ã€åœ¨å†™å¤æ‚ä»£ç å‰å…ˆç”¨ç®€å•è¯­è¨€å†™ä¸‹"></a>6ã€åœ¨å†™å¤æ‚ä»£ç å‰å…ˆç”¨ç®€å•è¯­è¨€å†™ä¸‹</h3><blockquote><p>å¦‚æœä½ è¦å†™çš„ä»£ç æ˜¯å¤æ‚å¹¶ä¸”ä¸å¸¸è§çš„ï¼Œå…ˆç”¨ç®€å•è¯­è¨€å°†ä»£ç å†™ä¸‹ã€‚è¿™æ ·ï¼Œä½ èƒ½å¤Ÿä½ èƒ½å¤Ÿåœ¨çœŸæ­£å†™ä¹‹å‰çŸ¥é“è‡ªå·±è¦åšä»€ä¹ˆã€‚ä¸‹é¢æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„ä¸¤ä¸ªå¥½å¤„ï¼š</p></blockquote><ul><li><p>ä½ å°†æ›´å®¹æ˜“æ›´å¿«é€Ÿçš„å†™ä»£ç ï¼Œå› ä¸ºä½ ä¸éœ€è¦æ—¶åˆ»åœä¸‹æ¥æ€è€ƒè‡ªå·±å°†è¦æ€ä¹ˆåšã€‚</p></li><li><p>ç”±äºä½ çŸ¥é“ä»£ç è¦å¹²ä»€ä¹ˆï¼Œèƒ½å¤Ÿæ›´å¥½çš„æ’é™¤é”™è¯¯ã€‚</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>æˆ‘ä»¬å·²ç»è®²äº†å¥½å‡ ä¸ªæ›´å¿«é€Ÿå­¦ä¹ JavaScriptçš„æ–¹æ³•ï¼Œä½†æ˜¯ä½ ä¹Ÿèƒ½å°†ä¸Šè¿°æ–¹æ³•è¿ç”¨äºå­¦ä¹ å…¶ä»–ä¸œè¥¿ã€‚ä¸‹é¢æ˜¯ä¸Šè¿°æ–¹æ³•çš„æ¦‚æ‹¬ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰ã€ä¸è¦å†æƒ³å°†è¦å­¦ä»€ä¹ˆï¼Œæ²‰æµ¸äºç°åœ¨ï¼›</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰ã€é€šè¿‡æŠŠæ–°æŠ€èƒ½å½“åšç©å…·ä½¿å¾—ç»ƒä¹ æ›´æœ‰è¶£ï¼›</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰ã€å°±åƒæµè§ˆFacebookã€YouTubeä¹‹ç±»çš„ç½‘ç«™ä¸€æ ·ï¼Œåœ¨æ•²ä»£ç å‰å‘Šè¯‰è‡ªå·±åªæ•²å‡ åˆ†é’Ÿï¼Œè¿™æ ·ä½ å°±æ‹¥æœ‰äº†æ•²ä»£ç çš„æ—¶é—´ï¼›</span><br><span class="line"></span><br><span class="line">ï¼ˆ4ï¼‰ã€æ…¢ä¸‹æ¥ï¼Œå°æ­¥å‘å‰ï¼Œä½ å°†å­¦å¾—æ›´å¿«ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼š<a href="http://www.zcfy.cc" target="_blank" rel="noopener">ä¼—æˆç¿»è¯‘</a></p><p>è¯‘è€…ï¼š<a href="http://www.zcfy.cc/@Ryan" target="_blank" rel="noopener">Ryan</a></p><p>é“¾æ¥ï¼š<a href="http://www.zcfy.cc/article/436" target="_blank" rel="noopener">http://www.zcfy.cc/article/436</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶åˆ¶ä½œedmé‚®ä»¶ï¼Œéœ€è¦äº†è§£çš„ä¸€äº›è§„åˆ™</title>
      <link href="/2018/09/19/edm-01/"/>
      <url>/2018/09/19/edm-01/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯é¢„è§ˆçª—å£é€šå¸¸åªæ˜¯ä¸€å°éƒ¨åˆ†å±å¹•å®½åº¦ï¼Œä½ æœ€å¥½ä¸Šä½ çš„ç”µå­é‚®ä»¶çš„å®½åº¦è®¾è®¡åœ¨å¤§çº¦600pxã€‚æ²¡æœ‰äººå–œæ¬¢æ°´å¹³æ»šåŠ¨æ¡<br><a id="more"></a></p><h3 id="ä¸€ã€åˆè§"><a href="#ä¸€ã€åˆè§" class="headerlink" title="ä¸€ã€åˆè§"></a>ä¸€ã€åˆè§</h3><h4 id="table"><a href="#table" class="headerlink" title="table"></a>table</h4><ul><li><code>&lt;table&gt;</code> æ ‡ç­¾å®šä¹‰ HTML è¡¨æ ¼</li><li>ç®€å•çš„ HTML è¡¨æ ¼ç”± <code>table</code> å…ƒç´ ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª <code>tr</code>ã€<code>th</code> æˆ– <code>td</code> å…ƒç´ ç»„æˆ</li><li><code>tr(table row)</code> å…ƒç´ å®šä¹‰è¡¨æ ¼è¡Œï¼Œ<code>th(table head)</code> å…ƒç´ å®šä¹‰è¡¨å¤´ï¼Œ<code>td(table data)</code> å…ƒç´ å®šä¹‰è¡¨æ ¼å•å…ƒ</li><li>æ›´å¤æ‚çš„ HTML è¡¨æ ¼ä¹Ÿå¯èƒ½åŒ…æ‹¬ <code>caption</code>ã€<code>col</code>ã€<code>colgroup</code>ã€<code>thead</code>ã€<code>tfoot</code> ä»¥åŠ <code>tbody</code> å…ƒç´ </li><li><a href="http://www.w3school.com.cn/tags/tag_table.asp" target="_blank" rel="noopener">HTML table æ ‡ç­¾</a></li></ul><h4 id="tableå±æ€§"><a href="#tableå±æ€§" class="headerlink" title="tableå±æ€§"></a>tableå±æ€§</h4><ul><li><code>border</code> â€” è§„å®šè¡¨æ ¼è¾¹æ¡†çš„å®½åº¦</li><li><code>align</code> â€” è§„å®šè¡¨æ ¼ç›¸å¯¹å‘¨å›´å…ƒç´ çš„å¯¹é½æ–¹å¼ <code>(left,center,right)</code></li><li><code>valign</code> â€” å‚ç›´ï¼Œé»˜è®¤æ˜¯<code>valign=&quot;middle&quot;</code>ï¼Œä½†æ˜¯ä¼šä¿®æ”¹ä¸º<code>valign=&quot;top&quot;</code></li><li><code>cellspacing</code> â€” è§„å®šå•å…ƒæ ¼ä¹‹é—´çš„ç©ºé—´</li><li><code>cellpadding</code> â€” è§„å®šå•å…ƒè¾¹æ²¿ä¸å…¶å†…å®¹ä¹‹é—´çš„ç©ºç™½</li><li><code>width</code> â€” è§„å®šè¡¨æ ¼çš„å®½åº¦</li><li><code>height</code> â€” è§„å®šè¡¨æ ¼çš„é«˜åº¦</li><li><code>background</code> â€” èƒŒæ™¯å›¾åƒ</li><li><code>bgcolor</code> â€” èƒŒæ™¯é¢œè‰²</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">bgcolor</span>=<span class="string">"#cccccc"</span> <span class="attr">cellspacing</span>=<span class="string">"10"</span> <span class="attr">cellpadding</span>=<span class="string">"20"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>è¯­æ–‡<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ•°å­¦<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>è‹±è¯­<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="style"><a href="#style" class="headerlink" title="style"></a>style</h4><ul><li><code>widthã€height</code></li><li><code>font-family</code></li><li><code>font-size</code></li><li><code>font-weight</code></li><li><code>color</code></li><li><code>line-height</code></li><li><code>border</code></li><li><code>background-color</code></li><li><code>background-image</code></li><li><code>vertical-align</code></li></ul><h4 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h4><h5 id="è¡Œå†…å…ƒç´ "><a href="#è¡Œå†…å…ƒç´ " class="headerlink" title="è¡Œå†…å…ƒç´ "></a>è¡Œå†…å…ƒç´ </h5><ul><li><code>&lt;a href=&quot;http://www.eefocus.com&quot; target=&quot;_blank&quot;&gt;</code></li><li><code>&lt;img src=&quot;http://baidu.com/hao123.png&quot; alt=&quot;hao123å›¾ç‰‡&quot;&gt;</code></li><li><code>&lt;span&gt;æˆ‘ä¹Ÿå¯ä»¥æ˜¯ä¸€æ®µè¯ï¼Œåªæ˜¯æ²¡æ³•è‡ªä¸»è®¾ç½®å®½åº¦è€Œå·²&lt;/span&gt;</code></li></ul><h5 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h5><ul><li><code>&lt;p&gt;æˆ‘æ˜¯ä¸€æ®µè¯...&lt;/p&gt;</code></li></ul><h3 id="äºŒã€äº†è§£"><a href="#äºŒã€äº†è§£" class="headerlink" title="äºŒã€äº†è§£"></a>äºŒã€äº†è§£</h3><h4 id="åŸºæœ¬æ ¼å¼"><a href="#åŸºæœ¬æ ¼å¼" class="headerlink" title="åŸºæœ¬æ ¼å¼"></a>åŸºæœ¬æ ¼å¼</h4><h5 id="Area-1"><a href="#Area-1" class="headerlink" title="Area-1"></a>Area-1</h5><ul><li>HTML ç¼–ç æ ¼å¼ï¼š<code>utf-8</code></li><li>é¡µé¢å°½é‡ä¿æŒå®½ï¼ˆ600px~800pxï¼‰ã€é«˜ï¼ˆ1024pxï¼‰ï¼Œæ•´ä½“é‚®ä»¶ä¸è¦å¤ªå¤§ï¼Œæ¯”å¦‚15kï¼ˆå„ä¸ªé‚®ç®±ä¸åŒï¼‰å·¦å³ï¼Œä¸ç„¶å¾ˆå®¹æ˜“èµ°åƒåœ¾é‚®ç®±</li><li>æ ·å¼ä½¿ç”¨è¡Œé—´æ ·å¼ï¼Œå¦‚ï¼š<code>&lt;td style=&quot;font-family:Arial, Helvetica, sans-serif;font-size:12px;color:#000000;&quot; &gt;æ–‡å­—&lt;/td&gt;</code>å…¶ä»–çš„æ–¹å¼ä¼šè¢«æ— è§†</li></ul><h5 id="Area-2"><a href="#Area-2" class="headerlink" title="Area-2"></a>Area-2</h5><ul><li><code>font-family</code> å±æ€§ä¸èƒ½ä¸ºç©º</li><li>ä½¿ç”¨<code>&lt;table&gt;</code>å¸ƒå±€ï¼Œå±…ä¸­æ˜¾ç¤ºä½¿ç”¨<code>align=&quot;center</code></li><li>ä¸ä½¿ç”¨ table ä»¥å¤–çš„ <code>body</code>ã€<code>meta</code>å’Œ<code>html</code>ä¹‹ç±»çš„æ ‡ç­¾ï¼Œéƒ¨åˆ†é‚®ç®±ç³»ç»Ÿä¼šæŠŠè¿™äº›è¿‡æ»¤æ‰</li><li>ä¸ä½¿ç”¨ <code>flashã€javaã€javascriptã€framesã€iframeã€activeX</code> ä»¥åŠ <code>dhtml</code></li><li>ä¸è¦å‡ºç°<code>onmouseover</code>ã€<code>onmouseout</code>ï¼Œå³ä½¿è®¾å®šäº†ï¼Œä¹Ÿä¼šè¢«è¿‡æ»¤æ‰</li></ul><h5 id="Area-3"><a href="#Area-3" class="headerlink" title="Area-3"></a>Area-3</h5><ul><li>åŒºåŸŸä¸åŒºåŸŸä¹‹é—´çš„ä¸Šä¸‹ã€å·¦å³ä¹‹é—´çš„ç©ºç™½é—´éš™ï¼Œä½¿ç”¨æ ‡å‡†çš„<code>&lt;td width=15&gt;&amp;nbsp;&lt;/td&gt;</code>æˆ–<code>&lt;td height=&quot;15&quot;&gt;&amp;nbsp;&lt;/td&gt;</code>ï¼Œä¸è¦ä½¿ç”¨<code>padding=&quot;15px&quot;</code> â€” é˜²æ­¢å„ä¸ªé‚®ç®±çš„è§£æä¸åŒ</li></ul><h4 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h4><ul><li>å›¾ç‰‡çš„æ¯ä¸ªå±æ€§éƒ½è¦å®šä¹‰å®Œæ•´ï¼Œå¦‚ï¼š<code>&lt;img src=&quot;http://www.eefocus.com/logo.png&quot; style=&quot;vertical-align:top;display:block;&quot; width=&quot;210&quot; height=&quot;100&quot;  alt=&quot;logo&quot;/&gt;</code></li><li>å®šä¹‰<code>style=&quot;vertical-align:top;&quot;</code> â€” é˜²æ­¢å›¾ç‰‡ä¹‹é—´ä¼šæœ‰ç¼éš™ã€å˜å½¢ç­‰æ˜¾ç¤ºå¼‚å¸¸çš„æƒ…å†µ</li><li>å®šä¹‰<code>display:block</code> â€” è§£å†³Outlookç”µå­é‚®ä»¶å®¢æˆ·ä¸­å›¾ç‰‡åº•éƒ¨å¢åŠ ç©ºç™½é—´è·çš„é—®é¢˜</li><li>é™åˆ¶æ¯å¼ å›¾ç‰‡çš„å¤§å°<code>width=&quot;200 height=&quot;200&quot;</code>æˆ–è€…<code>style=&quot;width:200px;height:200px;&quot;</code></li><li>æ·»åŠ æ¯å¼ å›¾ç‰‡altå±æ€§ï¼Œå¦‚ï¼š<code>alt=&quot;æˆ‘æ˜¯å¹²å•¥çš„&quot;</code> â€” é˜²æ­¢å›¾ç‰‡æ— æ³•åŠ è½½ï¼Œä¹Ÿå¯ä»¥çŸ¥æ™“è¿™æ˜¯åšä»€ä¹ˆçš„</li><li>å›¾ç‰‡æ ¼å¼ä½¿ç”¨<code>jpgã€png</code>ï¼Œå°½é‡ä¸è¦ä½¿ç”¨<code>gif</code></li><li>åœ°å€ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆä»¥<code>http/https</code>å¼€å¤´çš„ï¼‰</li><li>å°½é‡ä¸ä½¿ç”¨èƒŒæ™¯å›¾ç‰‡<code>background-image</code>ï¼ˆOutlookä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼š<code>bgColor=&quot;f3f3f3&quot;</code>ï¼‰ï¼Œç›´æ¥ä½¿ç”¨å›¾ç‰‡<code>&lt;img src=&quot;&quot;&gt;</code></li><li>ä¸ºäº†ä¿æŒå„ä¸ªé‚®ç®±çš„ä¸€è‡´æ€§ï¼Œå°½é‡ä½¿ç”¨å›¾ç‰‡ï¼Œå¤§å›¾å¯æ‹†åˆ†æˆå‡ å¼ å°å›¾æ‹¼æ¥ï¼Œæ¯å¼ å›¾ç‰‡ä¸è¦å¤ªå¤§ï¼ˆ15Kä»¥å†…ï¼‰</li></ul><h4 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h4><ul><li>åœ°å€ç»å¯¹è·¯å¾„ï¼š<code>&lt;a href=&quot;http://www.eefocus.com&quot;&gt;Logo Plus&lt;/a&gt;</code></li><li>åœ°å€ä¸å¯è¿‡é•¿ï¼ˆè¶…è¿‡255ä¸ªå­—ç¬¦ï¼‰ï¼Œå°½é‡ç®€çŸ­</li><li>æ•°é‡å°½é‡ä¸è¶…è¿‡10ä¸ª</li><li>åœ°å€ä¸è¦ä½¿ç”¨ç‰¹æ®Šç¬¦å·ï¼Œé¿å…è§£æé”™è¯¯</li><li>æ–‡å­—ä¸­å‡ºç°é“¾æ¥åœ°å€ï¼Œè¢«å±è”½çš„é£é™©æ¯”è¾ƒé«˜ï¼Œä¸€èˆ¬æ˜¯æ–‡å­—+é“¾æ¥ã€å›¾ç‰‡+é“¾æ¥</li><li>ä¸è¦ä½¿ç”¨åœ°å›¾åŠŸèƒ½é“¾æ¥ï¼Œå¾ˆå®¹æ˜“è¢«åˆ’åˆ†ä¸ºåƒåœ¾é‚®ç®±</li><li>ä¸ºé¿å…ç”¨æˆ·æ”¶åˆ°çš„é‚®ä»¶å›¾ç‰‡æ— æ³•æµè§ˆï¼Œè¯·åˆ¶ä½œä¸€ä»½å’Œé‚®ä»¶å†…å®¹ä¸€æ ·çš„web é¡µé¢ï¼Œç„¶ååœ¨é‚®ä»¶é¡¶éƒ¨å†™ä¸€å¥è¯ï¼šâ€œå¦‚æœæ‚¨æ— æ³•æŸ¥çœ‹é‚®ä»¶å†…å®¹ï¼Œè¯·ç‚¹å‡»è¿™é‡Œâ€ï¼Œ é“¾æ¥åˆ°æ”¾æœ‰åŒæ ·å†…å®¹çš„webé¡µé¢</li></ul><h4 id="Outlooké‚®ç®±è§„åˆ™"><a href="#Outlooké‚®ç®±è§„åˆ™" class="headerlink" title="Outlooké‚®ç®±è§„åˆ™"></a>Outlooké‚®ç®±è§„åˆ™</h4><ul><li>å†…æ•›å…ƒç´ çš„<code>padding</code>æ— æ•ˆã€<code>vertical-align</code>ä¸èƒ½è¢«è¯†åˆ«ï¼Œå¯å®šä¹‰åœ¨<code>td</code></li><li>åˆ«æƒ³ç€ç»§æ‰¿çš„äº‹å„¿ï¼ŒæŸä¸€å—çš„æ ·å¼éƒ½å•ç‹¬è®¾ç½®ï¼Œæ¯”å¦‚é“¾æ¥æ ·å¼ï¼Œæ–‡å­—æ ·å¼ç­‰</li><li><code>p</code>æ ‡ç­¾çš„<code>width</code>ä¸èµ·ä½œç”¨ï¼Œå¯å®šä¹‰åœ¨<code>td</code></li><li><code>p</code>æ ‡ç­¾çš„å­—ä½“é¢œè‰²ä¼šè¢«è¦†ç›–ï¼Œå¯å•ç‹¬ä½¿ç”¨è¯¸å¦‚<code>span</code>ç­‰é‡æ–°è®¾ç½®å­—ä½“é¢œè‰²ï¼Œæˆ–è€…ä½¿ç”¨<code>style</code>å®šä¹‰åœ¨td</li><li>å½“è®¾ç½® <code>&lt;img align=&quot;left&quot; /&gt;</code> æˆ– <code>&lt;img align=&quot;right&quot; /&gt;</code>æ—¶ï¼Œå›¾ç‰‡ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œåœ¨å…¶çˆ¶å…ƒç´ è®¾ç½®äº† <code>margin</code> æˆ– <code>padding</code> çš„è¯ï¼Œéƒ½æ— æ³•ä½¿å…¶ä¸‹ç§»ï¼Œå·¦ç§»æˆ–å³ç§»</li><li><code>line-height</code>é»˜è®¤ä¸º<code>1.6</code></li><li><code>#FFFFFF</code>å…³äºé¢œè‰²å€¼ï¼Œä½¿ç”¨å…­ä½å¹¶ä¸”å¤§å†™ï¼Œä½¿ç”¨ç®€å†™åœ¨outlookä¸‹è¢«å¿½ç•¥ï¼ˆå¾ˆç¥å¥‡ï¼‰</li><li>å…³äºé“¾æ¥ï¼Œå¯ä»¥å•ç‹¬è®¾ç½®ï¼š<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:link</span>,</span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: white;</span><br><span class="line">      <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">      <span class="attribute">text-decoration</span>: none;</span><br><span class="line">      <span class="attribute">color</span>: white;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">      <span class="attribute">text-decoration</span>: none;</span><br><span class="line">      <span class="attribute">color</span>: white;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul><h5 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h5><ul><li>é¿å…ä½¿ç”¨<code>margin padding</code>ç­‰å±æ€§ï¼Œå®šä¹‰å®½é«˜çš„å±æ€§æ”¾åœ¨<code>td</code>ï¼Œå®šä¹‰æ ·å¼æ”¾åœ¨<code>p</code>æˆ–è€…<code>span</code>ç­‰æ ‡ç­¾å†…</li><li>ä¸€èˆ¬è€Œè¨€ï¼ŒæŒ‡å®šè¡¨æ ¼å•å…ƒæ ¼å®½åº¦è¦æ¯”æŒ‡å®šè¡¨æ ¼è‡ªèº«å®½åº¦è¦å¥½ </li><li>ä½¿ç”¨bgcoloræ¥æ›¿æ‰¾style=â€background:â€,åœ¨ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä¸­HTMLå±æ€§è¦æ¯”CSSæ ·å¼æ›´å¥½ï¼Œä½†æ˜¯ä¼˜å…ˆç­‰çº§ä¾æ—§æ˜¯ï¼šcssæ ·å¼&gt;htmlå±æ€§</li><li>æ–°æµªé‚®ç®±ä¼šå¿½ç•¥æ‰<code>cellpadding</code>ï¼Œä¸€èˆ¬è®¾ç½®ä¸º<code>0</code><h3 id="ä¸‰ã€æ‚Ÿé“"><a href="#ä¸‰ã€æ‚Ÿé“" class="headerlink" title="ä¸‰ã€æ‚Ÿé“"></a>ä¸‰ã€æ‚Ÿé“</h3><h4 id="é‚®ä»¶è®¾è®¡"><a href="#é‚®ä»¶è®¾è®¡" class="headerlink" title="é‚®ä»¶è®¾è®¡"></a>é‚®ä»¶è®¾è®¡</h4></li><li>ç”µå­é‚®ä»¶çš„è®¾è®¡è¿‡ç¨‹æ˜¯éå¸¸çº ç»“çš„ï¼Œä¸ºäº†ç¾è¿˜å¾—è€ƒè™‘åˆ¶ä½œè¿‡ç¨‹çš„ç…ç†¬<h5 id="ä¿æŒç®€å•"><a href="#ä¿æŒç®€å•" class="headerlink" title="ä¿æŒç®€å•"></a>ä¿æŒç®€å•</h5></li><li>å½“è®¾è®¡ä¸€ä¸ªHTMLç”µå­é‚®ä»¶æ—¶ï¼Œè¯·è®°ä½ä¿æŒç®€å•ï¼Œç¼–ç çš„æ—¶å€™è€ƒè™‘åšæŒä¸¤åˆ—å¸ƒå±€ï¼Œè¿™æ ·èƒ½ä¸ºæ‚¨çœå»å¾ˆå¤šéº»çƒ¦çš„äº‹æƒ…<h5 id="å‡å°‘å›¾åƒçš„ä½¿ç”¨ç”šè‡³é¿å…ä½¿ç”¨"><a href="#å‡å°‘å›¾åƒçš„ä½¿ç”¨ç”šè‡³é¿å…ä½¿ç”¨" class="headerlink" title="å‡å°‘å›¾åƒçš„ä½¿ç”¨ç”šè‡³é¿å…ä½¿ç”¨"></a>å‡å°‘å›¾åƒçš„ä½¿ç”¨ç”šè‡³é¿å…ä½¿ç”¨</h5></li><li>è®°ä½ä½ çš„è®¾è®¡ä¸èƒ½å¤ªèŠ±å“¨ï¼Œå› ä¸ºOutlookä¸æ”¯æŒèƒŒæ™¯å›¾åƒ<h5 id="çª„å±æœ€å¥½"><a href="#çª„å±æœ€å¥½" class="headerlink" title="çª„å±æœ€å¥½"></a>çª„å±æœ€å¥½</h5></li><li>å› ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯é¢„è§ˆçª—å£é€šå¸¸åªæ˜¯ä¸€å°éƒ¨åˆ†å±å¹•å®½åº¦ï¼Œä½ æœ€å¥½ä¸Šä½ çš„ç”µå­é‚®ä»¶çš„å®½åº¦è®¾è®¡åœ¨å¤§çº¦600pxã€‚æ²¡æœ‰äººå–œæ¬¢æ°´å¹³æ»šåŠ¨æ¡<h5 id="ä¿æŒä¸€è‡´"><a href="#ä¿æŒä¸€è‡´" class="headerlink" title="ä¿æŒä¸€è‡´"></a>ä¿æŒä¸€è‡´</h5></li><li>è®°ä½ï¼Œæˆ‘ä»¬ä½¿ç”¨å›ºå®šçš„å…ƒç´ å±æ€§cellpaddingå’Œcellspacingè®¾ç½®å•å…ƒæ ¼çš„è¾¹è·å’Œå•å…ƒæ ¼çš„é—´è·ã€‚è¿™æ ·ä¿æŒå…ƒç´ ä¹‹é—´çš„é—´è·ä¸€è‡´æ€§æ˜¯æ­£ç¡®çš„ä¸è°¨æ…çš„<blockquote><p>èŠ‚é€‰è‡ªï¼š<a href="http://www.w3cplus.com/css/getting-started-with-html-emails.html" target="_blank" rel="noopener">å¼€å§‹åˆ¶ä½œHTML Email </a>ä¹‹é‚®ä»¶è®¾è®¡</p></blockquote><h4 id="é‚®ä»¶åˆ¶ä½œ"><a href="#é‚®ä»¶åˆ¶ä½œ" class="headerlink" title="é‚®ä»¶åˆ¶ä½œ"></a>é‚®ä»¶åˆ¶ä½œ</h4></li><li>ç”µå­é‚®ä»¶çš„åˆ¶ä½œè¿‡ç¨‹æ˜¯éå¸¸ç…ç†¬çš„ï¼Œä¸€ä¸å°å¿ƒå°±ä¹±äº†ã€ä¹±äº†ã€‚<h4 id="é‚®ä»¶æµ‹è¯•"><a href="#é‚®ä»¶æµ‹è¯•" class="headerlink" title="é‚®ä»¶æµ‹è¯•"></a>é‚®ä»¶æµ‹è¯•</h4></li><li>ç”µå­é‚®ä»¶çš„æµ‹è¯•è¿‡ç¨‹æ˜¯éå¸¸ç—›è‹¦çš„ï¼Œä¹Ÿæ˜¯æœ€è®©äººå¥”æºƒçš„ï¼Œå› ä¸ºä½ å¾ˆæœ‰å¯èƒ½æ‹†äº†è¥¿å¢™è¡¥ä¸œå¢™</li></ul><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><h5 id="æˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•é‚®ä»¶ï¼šæ•ˆæœå›¾"><a href="#æˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•é‚®ä»¶ï¼šæ•ˆæœå›¾" class="headerlink" title="æˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•é‚®ä»¶ï¼šæ•ˆæœå›¾"></a>æˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•é‚®ä»¶ï¼š<a href="https://www.qdfuns.com/article.php?mod=view&amp;id=333432fb9305a8331f6cc39998a2626e&amp;uid=32286" target="_blank" rel="noopener">æ•ˆæœå›¾</a></h5>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EDM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac ç»ˆç«¯ç®€æ˜“å­¦ä¹ æ€»ç»“</title>
      <link href="/2018/08/13/macos-bash/"/>
      <url>/2018/08/13/macos-bash/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€ç›®å½•åŸºæœ¬æ“ä½œ"><a href="#ä¸€ã€ç›®å½•åŸºæœ¬æ“ä½œ" class="headerlink" title="ä¸€ã€ç›®å½•åŸºæœ¬æ“ä½œ"></a>ä¸€ã€ç›®å½•åŸºæœ¬æ“ä½œ</h3><h5 id="1-pwd-â€”-è·å–å½“å‰æ‰€åœ¨è·¯å¾„"><a href="#1-pwd-â€”-è·å–å½“å‰æ‰€åœ¨è·¯å¾„" class="headerlink" title="1. pwd â€” è·å–å½“å‰æ‰€åœ¨è·¯å¾„"></a>1. <code>pwd</code> â€” è·å–å½“å‰æ‰€åœ¨è·¯å¾„</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yangtaodeMacBook-Pro:<span class="built_in">test</span> yangtao$ <span class="built_in">pwd</span></span><br><span class="line">/Users/yangtao/Desktop/æ–‡ä»¶åˆ›å»º/<span class="built_in">test</span></span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="2-ls-â€”-åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"><a href="#2-ls-â€”-åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="2. ls â€” åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶"></a>2. <code>ls</code> â€” åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</h5><ul><li><code>ls -l</code> â€” ç”¨é•¿æ ¼å¼åˆ—å‡ºæ¥</li><li><code>ls -a</code> â€” åˆ—å‡ºæ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰</li><li><code>ls -al</code> â€” ä»¥é•¿æ ¼å¼åˆ—å‡ºæ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰</li></ul><h5 id="3-cd-â€”-ç›®å½•é—´çš„åˆ‡æ¢"><a href="#3-cd-â€”-ç›®å½•é—´çš„åˆ‡æ¢" class="headerlink" title="3. cd â€” ç›®å½•é—´çš„åˆ‡æ¢"></a>3. <code>cd</code> â€” ç›®å½•é—´çš„åˆ‡æ¢</h5><p>å¯ä»¥ä½¿ç”¨<code>tab</code>é”®è¡¥å…¨ç›®å½•åç§°ï¼Œå°†æ–‡ä»¶æ‹–å…¥ç»ˆç«¯ï¼Œå¯ä»¥æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„ç›®å½•</p><ul><li><code>cd</code> â€” (æ— å‚æ•°)è¿”å› home ç›®å½•</li><li><code>cd ~</code> â€” è¿”å› home ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨<code>cd ~/Music</code>å¿«é€Ÿåˆ°è¾¾è¯¥ç›®å½•ï¼Œä½¿ç”¨<code>cd ~Guest/</code>è¿›å…¥ Guest ç”¨æˆ·çš„ home ç›®å½•</li><li><code>cd -</code> â€” è¿”å›ä¸Šä¸€æ¬¡æ“ä½œçš„ç›®å½•ï¼Œå¯ä¸å½“å‰ç›®å½•è¿›è¡Œåˆ‡æ¢</li><li><code>cd ..</code> â€” è¿”å›ä¸Šä¸€å±‚ç›®å½•ï¼Œ<code>..</code>è¡¨ç¤ºä¸Šä¸€å±‚ç›®å½•ï¼Œè€Œ<code>.</code>è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œå¦‚<code>./Music</code>ï¼Œè¡¨ç¤ºå½“å‰ç›®å½•ä¸‹çš„ Music æ–‡ä»¶</li></ul><h5 id="4-mkdir-æ–‡ä»¶å-â€”-ï¼ˆmake-dirï¼‰æ–°å»ºæ–‡ä»¶å¤¹"><a href="#4-mkdir-æ–‡ä»¶å-â€”-ï¼ˆmake-dirï¼‰æ–°å»ºæ–‡ä»¶å¤¹" class="headerlink" title="4. mkdir æ–‡ä»¶å â€” ï¼ˆmake dirï¼‰æ–°å»ºæ–‡ä»¶å¤¹"></a>4. <code>mkdir æ–‡ä»¶å</code> â€” ï¼ˆmake dirï¼‰æ–°å»ºæ–‡ä»¶å¤¹</h5><h5 id="5-rmdir-æ–‡ä»¶å-â€”-ï¼ˆremove-dirï¼‰åˆ é™¤æ–‡ä»¶å¤¹"><a href="#5-rmdir-æ–‡ä»¶å-â€”-ï¼ˆremove-dirï¼‰åˆ é™¤æ–‡ä»¶å¤¹" class="headerlink" title="5. rmdir æ–‡ä»¶å â€” ï¼ˆremove dirï¼‰åˆ é™¤æ–‡ä»¶å¤¹"></a>5. <code>rmdir æ–‡ä»¶å</code> â€” ï¼ˆremove dirï¼‰åˆ é™¤æ–‡ä»¶å¤¹</h5><p>å¦‚æœæ–‡ä»¶å¤¹å†…ä¸ä¸ºç©ºï¼Œåˆ™æ— æ³•ç”¨ rmdir åˆ é™¤æ–‡ä»¶å¤¹</p><h5 id="6-rm-æ–‡ä»¶å-â€”-ï¼ˆremove-dirï¼‰åˆ é™¤æ–‡ä»¶"><a href="#6-rm-æ–‡ä»¶å-â€”-ï¼ˆremove-dirï¼‰åˆ é™¤æ–‡ä»¶" class="headerlink" title="6. rm æ–‡ä»¶å â€” ï¼ˆremove dirï¼‰åˆ é™¤æ–‡ä»¶"></a>6. <code>rm æ–‡ä»¶å</code> â€” ï¼ˆremove dirï¼‰åˆ é™¤æ–‡ä»¶</h5><p>æ³¨æ„ï¼šç”¨<code>rm</code>åˆ é™¤æ‰çš„æ–‡ä»¶æ˜¯æ— æ³•ä»å›æ”¶ç«™ä¸­æ‰¾å›çš„ï¼è€Œä¸”ä¸èƒ½ä½¿ç”¨ rm æ¥åˆ é™¤æ–‡ä»¶å¤¹</p><h5 id="7-mv-åŸæ–‡ä»¶-ç›®æ ‡ç›®å½•-æ–°æ–‡ä»¶å-â€”-ç§»åŠ¨"><a href="#7-mv-åŸæ–‡ä»¶-ç›®æ ‡ç›®å½•-æ–°æ–‡ä»¶å-â€”-ç§»åŠ¨" class="headerlink" title="7. mv åŸæ–‡ä»¶ ç›®æ ‡ç›®å½•/æ–°æ–‡ä»¶å â€” ç§»åŠ¨"></a>7. <code>mv åŸæ–‡ä»¶ ç›®æ ‡ç›®å½•/æ–°æ–‡ä»¶å</code> â€” ç§»åŠ¨</h5><p>æŠŠæ–‡ä»¶ä»ä¸€ä¸ªåœ°æ–¹ç§»åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œä½†æ˜¯å½“æ²¡æœ‰ç»™å‡ºå¦å¤–ä¸€ä¸ªç›®å½•æ—¶ï¼Œç§»åŠ¨çš„ç°è±¡å°±æ˜¯ä¸ºå…¶æ›´æ”¹äº†åå­—</p><h5 id="8-cp-å¸¦ç›®å½•æ–‡ä»¶-ç›®æ ‡ç›®å½•-â€”-å¤åˆ¶ç²˜è´´"><a href="#8-cp-å¸¦ç›®å½•æ–‡ä»¶-ç›®æ ‡ç›®å½•-â€”-å¤åˆ¶ç²˜è´´" class="headerlink" title="8. cp å¸¦ç›®å½•æ–‡ä»¶ ç›®æ ‡ç›®å½• â€” å¤åˆ¶ç²˜è´´"></a>8. <code>cp å¸¦ç›®å½•æ–‡ä»¶ ç›®æ ‡ç›®å½•</code> â€” å¤åˆ¶ç²˜è´´</h5><h5 id="9-man-å‘½ä»¤-â€”-æŸ¥çœ‹ä½¿ç”¨æ‰‹å†Œ"><a href="#9-man-å‘½ä»¤-â€”-æŸ¥çœ‹ä½¿ç”¨æ‰‹å†Œ" class="headerlink" title="9. man å‘½ä»¤ â€” æŸ¥çœ‹ä½¿ç”¨æ‰‹å†Œ"></a>9. <code>man å‘½ä»¤</code> â€” æŸ¥çœ‹ä½¿ç”¨æ‰‹å†Œ</h5><h5 id="10-touch-â€”-åˆ›å»ºæ–‡ä»¶"><a href="#10-touch-â€”-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="10. touch â€” åˆ›å»ºæ–‡ä»¶"></a>10. <code>touch</code> â€” åˆ›å»ºæ–‡ä»¶</h5><h5 id="11-cat-â€”-æŸ¥çœ‹æ–‡ä»¶å†…å®¹"><a href="#11-cat-â€”-æŸ¥çœ‹æ–‡ä»¶å†…å®¹" class="headerlink" title="11. cat â€” æŸ¥çœ‹æ–‡ä»¶å†…å®¹"></a>11. <code>cat</code> â€” æŸ¥çœ‹æ–‡ä»¶å†…å®¹</h5><h4 id="äºŒã€å†å²æ“ä½œ"><a href="#äºŒã€å†å²æ“ä½œ" class="headerlink" title="äºŒã€å†å²æ“ä½œ"></a>äºŒã€å†å²æ“ä½œ</h4><h5 id="1-å‘ä¸Šï¼ˆå‘ä¸‹ï¼‰ç®­å¤´"><a href="#1-å‘ä¸Šï¼ˆå‘ä¸‹ï¼‰ç®­å¤´" class="headerlink" title="1. å‘ä¸Šï¼ˆå‘ä¸‹ï¼‰ç®­å¤´"></a>1. <code>å‘ä¸Šï¼ˆå‘ä¸‹ï¼‰ç®­å¤´</code></h5><p>æŸ¥çœ‹ä¸Šä¸€ä¸ªï¼ˆä¸‹ä¸€ä¸ªï¼‰å‘½ä»¤ï¼Œå¯ä»¥ä¸€ç›´å‘å‰æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡çš„å‘½ä»¤</p><h5 id="2-l-â€”-æ‰¾å‡ºä¸ä½ æœ€è¿‘ä¸€æ¬¡çš„-l-å¼€å¤´çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ"><a href="#2-l-â€”-æ‰¾å‡ºä¸ä½ æœ€è¿‘ä¸€æ¬¡çš„-l-å¼€å¤´çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ" class="headerlink" title="2. !l â€” æ‰¾å‡ºä¸ä½ æœ€è¿‘ä¸€æ¬¡çš„ l å¼€å¤´çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ"></a>2. <code>!l</code> â€” æ‰¾å‡ºä¸ä½ æœ€è¿‘ä¸€æ¬¡çš„ l å¼€å¤´çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ</h5><h5 id="3-history-â€”-æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡å‘½ä»¤çš„å†å²è®°å½•"><a href="#3-history-â€”-æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡å‘½ä»¤çš„å†å²è®°å½•" class="headerlink" title="3. history â€” æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡å‘½ä»¤çš„å†å²è®°å½•"></a>3. <code>history</code> â€” æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡å‘½ä»¤çš„å†å²è®°å½•</h5><h4 id="ä¸‰ã€è¿›ç¨‹ç®¡ç†æ“ä½œ"><a href="#ä¸‰ã€è¿›ç¨‹ç®¡ç†æ“ä½œ" class="headerlink" title="ä¸‰ã€è¿›ç¨‹ç®¡ç†æ“ä½œ"></a>ä¸‰ã€è¿›ç¨‹ç®¡ç†æ“ä½œ</h4><h5 id="1-ps-â€”-æŸ¥çœ‹å½“å‰ç»ˆç«¯è¿è¡Œçš„ç¨‹åº"><a href="#1-ps-â€”-æŸ¥çœ‹å½“å‰ç»ˆç«¯è¿è¡Œçš„ç¨‹åº" class="headerlink" title="1. ps â€” æŸ¥çœ‹å½“å‰ç»ˆç«¯è¿è¡Œçš„ç¨‹åº"></a>1. <code>ps</code> â€” æŸ¥çœ‹å½“å‰ç»ˆç«¯è¿è¡Œçš„ç¨‹åº</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yangtaodeMacBook-Pro:<span class="built_in">test</span> yangtao$ ps</span><br><span class="line">  PID TTY           TIME CMD</span><br><span class="line">19083 ttys000    0:00.40 -bash</span><br></pre></td></tr></table></figure><h5 id="2-ps-ax-â€”åˆ—å‡ºè¿™å°ç”µè„‘æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰ç¨‹åº"><a href="#2-ps-ax-â€”åˆ—å‡ºè¿™å°ç”µè„‘æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰ç¨‹åº" class="headerlink" title="2. ps ax â€”åˆ—å‡ºè¿™å°ç”µè„‘æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰ç¨‹åº"></a>2. <code>ps ax</code> â€”åˆ—å‡ºè¿™å°ç”µè„‘æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰ç¨‹åº</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">20008   ??  S      0:00.12 /System/Library/Frameworks/QuickLook.framework/Resources/quicklookd.app/Contents/MacOS/quicklookd</span><br><span class="line">19082 s000  Ss     0:00.02 login -pf yangtao</span><br><span class="line">19083 s000  S      0:00.40 -bash</span><br><span class="line">20079 s000  R+     0:00.00 ps ax</span><br><span class="line">yangtaodeMacBook-Pro:<span class="built_in">test</span> yangtao$</span><br></pre></td></tr></table></figure><h5 id="3-top-â€”-æ˜¾ç¤ºè¿™å°è®¡ç®—æœºä¸Šæœ‰å“ªäº›è¿›ç¨‹ï¼Œæ˜¾ç¤ºå†…å­˜ã€CPUã€è´Ÿè½½ç­‰"><a href="#3-top-â€”-æ˜¾ç¤ºè¿™å°è®¡ç®—æœºä¸Šæœ‰å“ªäº›è¿›ç¨‹ï¼Œæ˜¾ç¤ºå†…å­˜ã€CPUã€è´Ÿè½½ç­‰" class="headerlink" title="3. top â€” æ˜¾ç¤ºè¿™å°è®¡ç®—æœºä¸Šæœ‰å“ªäº›è¿›ç¨‹ï¼Œæ˜¾ç¤ºå†…å­˜ã€CPUã€è´Ÿè½½ç­‰"></a>3. <code>top</code> â€” æ˜¾ç¤ºè¿™å°è®¡ç®—æœºä¸Šæœ‰å“ªäº›è¿›ç¨‹ï¼Œæ˜¾ç¤ºå†…å­˜ã€CPUã€è´Ÿè½½ç­‰</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PID    COMMAND      %CPU TIME     <span class="comment">#TH   #WQ  #PORT MEM    PURG   CMPRS  PGRP  PPID  STATE    BOOSTS           %CPU_ME %CPU_OTHRS UID  FAULTS    COW</span></span><br><span class="line">20088  top          4.1  00:00.99 1/1   0    23    6724K  0B     0B     20088 19083 running  *0[1]            0.00000 0.00000    0    7185+     105</span><br><span class="line">20087  AGSService   0.0  00:00.03 2     1    36    1716K  0B     0B     20087 1     sleeping *0[1]            0.00000 0.00000    0    3076</span><br></pre></td></tr></table></figure><h5 id="4-kill-PID-â€”-ç»“æŸæŒ‡å®šè¿›ç¨‹-ID-çš„è¿›ç¨‹"><a href="#4-kill-PID-â€”-ç»“æŸæŒ‡å®šè¿›ç¨‹-ID-çš„è¿›ç¨‹" class="headerlink" title="4. kill [PID] â€” ç»“æŸæŒ‡å®šè¿›ç¨‹ ID çš„è¿›ç¨‹"></a>4. <code>kill [PID]</code> â€” ç»“æŸæŒ‡å®šè¿›ç¨‹ ID çš„è¿›ç¨‹</h5><p><strong>å…·ä½“åšæ³•ï¼š</strong> å…ˆä½¿ç”¨ top å‘½ä»¤æŸ¥çœ‹æƒ³è¦ç»“æŸè¿›ç¨‹çš„ PIDï¼Œç„¶åä½¿ç”¨å‘½ä»¤<code>kill [PID]</code></p><p><strong>Tipsï¼š</strong> å¦‚æœé‡åˆ°æ— æ³•æ€æ‰çš„è¿›ç¨‹ï¼Œè¾“å…¥å‘½ä»¤<code>sudo kill -9 [PID]</code> (ä¼ªè£…è¶…çº§ç®¡ç†å‘˜ï¼Œå¼ºè¿«æ€æ‰è¯¥è¿›ç¨‹)ï¼Œæ¥ç€è¾“å…¥è‡ªå·±ç”¨æˆ·çš„å¯†ç ï¼ˆå‰ææ˜¯è‡ªå·±è¿™ä¸ªç”¨æˆ·å…·æœ‰ sudo çš„èµ„æ ¼ï¼‰</p><h4 id="å››ã€ä¸‡èƒ½çš„-grep-æ“ä½œ"><a href="#å››ã€ä¸‡èƒ½çš„-grep-æ“ä½œ" class="headerlink" title="å››ã€ä¸‡èƒ½çš„ grep æ“ä½œ"></a>å››ã€ä¸‡èƒ½çš„ grep æ“ä½œ</h4><h5 id="1-grep-800-log-txt-â€”-ä»-log-txt-ä¸­æ‰¾å‡º-800-ä½ç½®çš„æ•°æ®"><a href="#1-grep-800-log-txt-â€”-ä»-log-txt-ä¸­æ‰¾å‡º-800-ä½ç½®çš„æ•°æ®" class="headerlink" title="1. grep 800 log.txt â€” ä» log.txt ä¸­æ‰¾å‡º 800 ä½ç½®çš„æ•°æ®"></a>1. <code>grep 800 log.txt</code> â€” ä» log.txt ä¸­æ‰¾å‡º 800 ä½ç½®çš„æ•°æ®</h5><h5 id="2-grep-n-800-log-txt-â€”-ä»-log-txt-ä¸­æ‰¾å‡º-800-ä½ç½®çš„æ•°æ®-å¹¶åœ¨å‰é¢åŠ ä¸Šè¡Œå·"><a href="#2-grep-n-800-log-txt-â€”-ä»-log-txt-ä¸­æ‰¾å‡º-800-ä½ç½®çš„æ•°æ®-å¹¶åœ¨å‰é¢åŠ ä¸Šè¡Œå·" class="headerlink" title="2. grep -n 800 log.txt â€” ä» log.txt ä¸­æ‰¾å‡º 800 ä½ç½®çš„æ•°æ®,å¹¶åœ¨å‰é¢åŠ ä¸Šè¡Œå·"></a>2. <code>grep -n 800 log.txt</code> â€” ä» log.txt ä¸­æ‰¾å‡º 800 ä½ç½®çš„æ•°æ®,å¹¶åœ¨å‰é¢åŠ ä¸Šè¡Œå·</h5><h5 id="3-grep-n-Hello-æ˜¯å¦åŠ ä¸Šè¡Œå·-â€”-ä»å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ‰¾å‡ºå‡ºç°è¿‡-Hello-çš„æ–‡ä»¶"><a href="#3-grep-n-Hello-æ˜¯å¦åŠ ä¸Šè¡Œå·-â€”-ä»å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ‰¾å‡ºå‡ºç°è¿‡-Hello-çš„æ–‡ä»¶" class="headerlink" title="3. grep (-n) Hello * (æ˜¯å¦åŠ ä¸Šè¡Œå·) â€” ä»å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ‰¾å‡ºå‡ºç°è¿‡ Hello çš„æ–‡ä»¶"></a>3. <code>grep (-n) Hello * (æ˜¯å¦åŠ ä¸Šè¡Œå·)</code> â€” ä»å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ‰¾å‡ºå‡ºç°è¿‡ Hello çš„æ–‡ä»¶</h5><h5 id="4-ls-usr-bin-grep-ls-â€”-æŸ¥çœ‹-usr-bin-ç›®å½•ä¸‹é¢å¸¦-ls-çš„ç›®å½•"><a href="#4-ls-usr-bin-grep-ls-â€”-æŸ¥çœ‹-usr-bin-ç›®å½•ä¸‹é¢å¸¦-ls-çš„ç›®å½•" class="headerlink" title="4. ls /usr/bin | grep ls â€” æŸ¥çœ‹/usr/bin ç›®å½•ä¸‹é¢å¸¦ ls çš„ç›®å½•"></a>4. <code>ls /usr/bin | grep ls</code> â€” æŸ¥çœ‹/usr/bin ç›®å½•ä¸‹é¢å¸¦ ls çš„ç›®å½•</h5><h5 id="5-ls-usr-bin-grep-ls-wc-â€”-è®¡ç®—å‡ºå•è¯çš„æ•°é‡"><a href="#5-ls-usr-bin-grep-ls-wc-â€”-è®¡ç®—å‡ºå•è¯çš„æ•°é‡" class="headerlink" title="5. ls /usr/bin | grep ls | wc â€” è®¡ç®—å‡ºå•è¯çš„æ•°é‡"></a>5. <code>ls /usr/bin | grep ls | wc</code> â€” è®¡ç®—å‡ºå•è¯çš„æ•°é‡</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yangtaodeMacBook-Pro:<span class="built_in">test</span> yangtao$ ls /usr/bin | grep ls | wc</span><br><span class="line">      16      16     124</span><br><span class="line"><span class="comment"># 16è¡Œ 16ä¸ªå•è¯ 124ä¸ªå­—ç¬¦</span></span><br></pre></td></tr></table></figure><h4 id="äº”ã€ç¯å¢ƒå˜é‡æ“ä½œ"><a href="#äº”ã€ç¯å¢ƒå˜é‡æ“ä½œ" class="headerlink" title="äº”ã€ç¯å¢ƒå˜é‡æ“ä½œ"></a>äº”ã€ç¯å¢ƒå˜é‡æ“ä½œ</h4><h5 id="1-set-grep-PATH-â€”-æŸ¥çœ‹ç¯å¢ƒå˜é‡"><a href="#1-set-grep-PATH-â€”-æŸ¥çœ‹ç¯å¢ƒå˜é‡" class="headerlink" title="1. set | grep PATH â€” æŸ¥çœ‹ç¯å¢ƒå˜é‡"></a>1. <code>set | grep PATH</code> â€” æŸ¥çœ‹ç¯å¢ƒå˜é‡</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yangtaodeMacBook-Pro:~ yangtao$ <span class="built_in">set</span> | grep PATH</span><br><span class="line">PATH=/usr/<span class="built_in">local</span>/bin:/usr/bin:/bin:/usr/sbin:/sbin</span><br></pre></td></tr></table></figure><h5 id="2-set-grep-PATH-â€”-å°†å…¶ä»–æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆæœ¬æœºç”¨æˆ·ä¸‹é¢çš„-bin-ç›®å½•ï¼‰æ·»åŠ åˆ°-PATH"><a href="#2-set-grep-PATH-â€”-å°†å…¶ä»–æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆæœ¬æœºç”¨æˆ·ä¸‹é¢çš„-bin-ç›®å½•ï¼‰æ·»åŠ åˆ°-PATH" class="headerlink" title="2. set | grep PATH â€” å°†å…¶ä»–æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆæœ¬æœºç”¨æˆ·ä¸‹é¢çš„ bin ç›®å½•ï¼‰æ·»åŠ åˆ° PATH"></a>2. <code>set | grep PATH</code> â€” å°†å…¶ä»–æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆæœ¬æœºç”¨æˆ·ä¸‹é¢çš„ bin ç›®å½•ï¼‰æ·»åŠ åˆ° PATH</h5><p>è¿™æ ·åšåªæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å½“å‰ç»ˆç«¯ï¼Œæ˜¯å¯ä»¥ç›´æ¥ç”Ÿæ•ˆçš„ï¼Œä½†æ˜¯å½“ä½ å…³é—­åï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ä¸è¢«ä¿å­˜çš„ã€‚</p><p>åœ¨<code>/etc/profile</code>è¿™ä¸ªæ–‡ä»¶æ˜¯ä»»ä½•äººæ‰“å¼€ç»ˆç«¯éƒ½ä¼šæ‰§è¡Œçš„ï¼Œæ˜¯ç³»ç»Ÿçº§çš„ profileã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰è‡ªå·±çš„ profileï¼Œå¯ä»¥åœ¨è‡ªå·±çš„å®¶ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å‘½åä¸ºï¼š<code>.profile</code>ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šåœ¨ä½ æ‰“å¼€ç»ˆç«¯æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</p><p>æˆ‘ä»¬å°†åˆšåˆšçš„å‘½ä»¤ 2 è¾“å…¥å…¶ä¸­ï¼Œç„¶åä¿å­˜é€€å‡ºï¼ˆvim ä¸‹ä½¿ç”¨<code>:wq</code>ï¼‰<br>è¿™æ ·çš„è¯ï¼Œåœ¨æˆ‘ä»¬åˆšåˆšå·²ç»ç™»å½•çš„ç»ˆç«¯é‡Œé¢å®ƒè¿˜æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œå‡å¦‚ä½ å¸Œæœ›å®ƒå¯ä»¥ç«‹åˆ»ç”Ÿæ•ˆï¼Œä½ å¯ä»¥ä½¿ç”¨<code>source</code>å‘½ä»¤ã€‚</p><h5 id="3-source-â€”-ä¾‹å¦‚ï¼šsource-profile"><a href="#3-source-â€”-ä¾‹å¦‚ï¼šsource-profile" class="headerlink" title="3. source â€” ä¾‹å¦‚ï¼šsource .profile"></a>3. <code>source</code> â€” ä¾‹å¦‚ï¼š<code>source .profile</code></h5><p>ä½¿ Shell è¯»å…¥æŒ‡å®šçš„ Shell ç¨‹åºæ–‡ä»¶å¹¶ä¾æ¬¡æ‰§è¡Œæ–‡ä»¶ä¸­çš„æ‰€æœ‰è¯­å¥ï¼Œé€šå¸¸ç”¨äºé‡æ–°æ‰§è¡Œåˆšä¿®æ”¹çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸å¿…æ³¨é”€å¹¶é‡æ–°ç™»å½•</p><h4 id="å…­ã€ç½‘ç»œé…ç½®æ“ä½œ"><a href="#å…­ã€ç½‘ç»œé…ç½®æ“ä½œ" class="headerlink" title="å…­ã€ç½‘ç»œé…ç½®æ“ä½œ"></a>å…­ã€ç½‘ç»œé…ç½®æ“ä½œ</h4><h5 id="1-ifconfig-â€”-åˆ—å‡ºæœ¬æœºæ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡ä»¥åŠå…¶ä¸Šé¢çš„é…ç½®ï¼Œä¸»è¦æŒ‡çš„æ˜¯-ip-åœ°å€å’Œ-mac-åœ°å€"><a href="#1-ifconfig-â€”-åˆ—å‡ºæœ¬æœºæ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡ä»¥åŠå…¶ä¸Šé¢çš„é…ç½®ï¼Œä¸»è¦æŒ‡çš„æ˜¯-ip-åœ°å€å’Œ-mac-åœ°å€" class="headerlink" title="1. ifconfig â€” åˆ—å‡ºæœ¬æœºæ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡ä»¥åŠå…¶ä¸Šé¢çš„é…ç½®ï¼Œä¸»è¦æŒ‡çš„æ˜¯ ip åœ°å€å’Œ mac åœ°å€"></a>1. <code>ifconfig</code> â€” åˆ—å‡ºæœ¬æœºæ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡ä»¥åŠå…¶ä¸Šé¢çš„é…ç½®ï¼Œä¸»è¦æŒ‡çš„æ˜¯ ip åœ°å€å’Œ mac åœ°å€</h5><p>æˆ‘çš„è¿çš„æ˜¯ en5ï¼Œå®ƒçš„çŠ¶æ€æ—¶ activeï¼ˆæœ€åä¸€è¡Œï¼‰ï¼ŒåŸæ–‡æ˜¯ en4</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">en5: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500</span><br><span class="line">ether ac:de:48:00:11:22</span><br><span class="line">inet6 fe80::aede:48ff:fe00:1122%en5 prefixlen 64 scopeid 0x7</span><br><span class="line">nd6 options=201&lt;PERFORMNUD,DAD&gt;</span><br><span class="line">media: autoselect</span><br><span class="line">status: active</span><br></pre></td></tr></table></figure><p><em>å…¶ä»–ç”¨æ³•ï¼š</em></p><ul><li><p><code>ifconfig en4 down/up</code> â€” å…³é—­ï¼ˆæˆ–æ‰“å¼€ï¼‰æŸä¸ªç½‘ç»œæ¥å£ï¼Œæ¯”å¦‚ en4,ä¸€èˆ¬éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥éœ€è¦åœ¨å‰é¢åŠ  sudo å‘½ä»¤</p></li><li><p><code>sudo ifconfig en4 add 10.10.10.12 netmask 255.255.255.0</code> â€” ç»™ en4 åŠ å…¥åˆ«çš„ç½‘æ®µ</p></li><li><code>sudo ifconfig en4 delete 10.10.10.12</code> â€” ç»™ en4 åˆ é™¤æŒ‡å®šç½‘æ®µ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸´æ—¶ä¿®æ”¹MACåœ°å€</span></span><br><span class="line">ifconfig en0 down // å…³é—­ç½‘å¡è®¾å¤‡ï¼ˆè¿™é‡Œå‡è®¾æ˜¯en0ï¼‰</span><br><span class="line">ifconfig en0 hw ether [MACåœ°å€] // ä¿®æ”¹MACåœ°å€</span><br><span class="line">ifconfig en0 up // é‡å¯ç½‘å¡</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸´æ—¶ä¿®æ”¹å†…ç½‘ipåœ°å€</span></span><br><span class="line">ifconfig en0 down</span><br><span class="line">ifconfig en0 192.168.169.245 netmask 255.255.255.0</span><br></pre></td></tr></table></figure><h5 id="2-ping-â€”-æ£€æµ‹ç½‘ç»œæ˜¯å¦æ˜¯è¿é€šçŠ¶æ€"><a href="#2-ping-â€”-æ£€æµ‹ç½‘ç»œæ˜¯å¦æ˜¯è¿é€šçŠ¶æ€" class="headerlink" title="2. ping â€” æ£€æµ‹ç½‘ç»œæ˜¯å¦æ˜¯è¿é€šçŠ¶æ€"></a>2. <code>ping</code> â€” æ£€æµ‹ç½‘ç»œæ˜¯å¦æ˜¯è¿é€šçŠ¶æ€</h5><h5 id="3-netstat-â€”-æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯"><a href="#3-netstat-â€”-æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯" class="headerlink" title="3. netstat â€” æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯"></a>3. <code>netstat</code> â€” æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯</h5><p><em>å…¶ä»–ç”¨æ³•ï¼š</em></p><ul><li><p><code>netstat -l</code> â€” åˆ—å‡ºæœ¬æœºè¿›è¡Œç›‘å¬çš„ç«¯å£</p></li><li><p><code>netstat -lt</code> â€” åªåˆ—å‡º tcp çš„è¿æ¥ï¼ŒåŒç†åœ¨ l åé¢è·Ÿä¸Š u çš„è¯ï¼Œå°†ä¼šåˆ—å‡ºå„ç§ udp çš„ç›‘å¬ç«¯å£</p></li><li><p><code>netstat -s</code> â€” æŸ¥çœ‹ç»Ÿè®¡æ•°æ®</p></li><li><p><code>netstat -p</code> â€” åˆ—å‡ºè¿›ç¨‹ä¿¡æ¯ï¼Œä½ å¯ä»¥äº†è§£æ˜¯å“ªä¸€ä¸ªç¨‹åºåœ¨å“ªä¸€ä¸ªç«¯å£ä¸Šåšäº›ä»€ä¹ˆäº‹æƒ…</p></li><li><p><code>netstat -pc</code> â€” ä¼šæ˜¾ç¤ºå‡ºå®æ—¶æ›´æ–°çš„è¿›ç¨‹ä¿¡æ¯</p></li><li><p><code>netstat -r</code> â€” æŸ¥çœ‹è·¯ç”±è¡¨</p></li><li><code>netstat -i</code> â€” æŸ¥çœ‹æ¥å£ä¿¡æ¯</li></ul><blockquote><p>è¯¦æƒ…å‚è€ƒ<br><a href="https://www.jianshu.com/p/0e43268f01db" target="_blank" rel="noopener">Mac ç»ˆç«¯å­¦ä¹ ç³»åˆ—</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
            <tag> ç»ˆç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitä¹‹æœ¬åœ°æ‹‰å–Githubä»£ç ã€ä¿®æ”¹è¿œç¨‹URL</title>
      <link href="/2018/08/09/git-revert/"/>
      <url>/2018/08/09/git-revert/</url>
      
        <content type="html"><![CDATA[<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1533488265900&amp;di=91f78407d4ffda11e55202ceafda93c4&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg3.imgtn.bdimg.com%2Fit%2Fu%3D2417199588%2C1851489715%26fm%3D214%26gp%3D0.jpg" alt=""></p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Workspaceï¼šå·¥ä½œåŒº</span><br><span class="line">Index / Stageï¼šæš‚å­˜åŒº</span><br><span class="line">Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</span><br><span class="line">Remoteï¼šè¿œç¨‹ä»“åº“</span><br></pre></td></tr></table></figure><h4 id="è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨git"><a href="#è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨git" class="headerlink" title="è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨git"></a>è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨git</h4><ul><li>åšå®¢æ¨èï¼š<ul><li><a href="https://juejin.im/entry/5b66e89951882563522b78ae/" target="_blank" rel="noopener">å¦‚ä½•ä½¿ç”¨Gitä¸Šä¼ é¡¹ç›®ä»£ç åˆ°github</a> </li><li><a href="https://juejin.im/entry/5b66ec5c51882536e875be76/" target="_blank" rel="noopener">Gitè¿œç¨‹æ“ä½œè¯¦è§£â€”é˜®ä¸€å³°</a></li><li><a href="https://juejin.im/entry/5667d39d00b0ee7fa8c9f99f" target="_blank" rel="noopener">å¸¸ç”¨ Git å‘½ä»¤æ¸…å•â€”é˜®ä¸€å³°</a></li></ul></li></ul><h4 id="æœ¬åœ°æ‹‰å–ä»“åº“ä»£ç -â€”-clone"><a href="#æœ¬åœ°æ‹‰å–ä»“åº“ä»£ç -â€”-clone" class="headerlink" title="æœ¬åœ°æ‹‰å–ä»“åº“ä»£ç  â€” clone"></a>æœ¬åœ°æ‹‰å–ä»“åº“ä»£ç  â€” clone</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/yangtao2o/yangtao2o.github.io.git</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹è¿œç¨‹URL-â€”-remote"><a href="#ä¿®æ”¹è¿œç¨‹URL-â€”-remote" class="headerlink" title="ä¿®æ”¹è¿œç¨‹URL â€” remote"></a>ä¿®æ”¹è¿œç¨‹URL â€” remote</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git remote -v    <span class="comment"># æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œä»“åº“åç§°</span></span><br><span class="line">git remote show origin   <span class="comment"># æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ä»“åº“çŠ¶æ€</span></span><br><span class="line">git remote add origin https://github.com/yangtao2o/yangtao2o.github.io.git  <span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€</span></span><br><span class="line">git remote <span class="built_in">set</span>-url origin https://github.com/..io.git   <span class="comment"># è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€(ç”¨äºä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€)</span></span><br><span class="line">git remote rename &lt;old name&gt; &lt;new name&gt;  <span class="comment"># ä¿®æ”¹è¿œç¨‹ä¸»æœºçš„åç§°</span></span><br><span class="line">git remote rm &lt;repository&gt;   <span class="comment"># åˆ é™¤è¿œç¨‹ä»“åº“</span></span><br></pre></td></tr></table></figure><h4 id="ä»£ç å›æ»š"><a href="#ä»£ç å›æ»š" class="headerlink" title="ä»£ç å›æ»š"></a>ä»£ç å›æ»š</h4><ul><li><p>å¦‚æœæ˜¯åœ¨workspaceï¼Œæœªgit pushï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¼šæ¸…ç©ºå·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤çš„å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD  <span class="comment"># å…¨éƒ¨æ’¤é”€</span></span><br><span class="line">git checkout -- hello.html  <span class="comment"># åªæ¢å¤hello.htmlæ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœå·²æäº¤ï¼Œä½¿ç”¨<code>git revert</code>ï¼Œä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ¥å›æ»šè¦ä½ è¦å›æ»šçš„ä½ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD</span><br></pre></td></tr></table></figure></li><li><p>å‚è€ƒï¼š<a href="https://juejin.im/entry/5b6707f25188251ac22b6f0f/" target="_blank" rel="noopener">Gitçš„æ’¤æ¶ˆæ“ä½œ - é‡ç½®, ç­¾å‡º å’Œ æ’¤æ¶ˆ</a></p><h4 id="ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›é—®é¢˜"><a href="#ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›é—®é¢˜" class="headerlink" title="ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›é—®é¢˜"></a>ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›é—®é¢˜</h4></li><li><p><code>git pull</code>æ—¶<code>fatal:refusing to merge unrelated histories</code></p><ul><li><code>git pull --allow-unrelated-histories</code></li></ul></li><li><p><code>origin</code>ä¸€èˆ¬æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ä»£ç åº“ï¼Œæ‰€ä»¥å¯ä»¥åšä»»ä½•çš„<code>git pull or git push</code>ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¼•å…¥äº†ä»–äººçš„ä»£ç åº“ï¼Œå°±æˆäº†<code>upstream</code>ï¼Œåªèƒ½<code>git fetch</code>ï¼Œé€šè¿‡<code>fork</code>åˆ°è‡ªå·±çš„ä»“åº“é‡Œï¼Œå¦‚åŒ<code>origin</code></p><ul><li>å…³äº<code>forkã€originã€upstreamã€clone</code>ä¹‹é—´çš„å…³ç³»åšæ–‡æ¨èï¼š <a href="https://juejin.im/entry/5b66f8d5f265da0f574e0884/" target="_blank" rel="noopener">GitHubå…³äºforkã€originã€upstreamã€cloneçš„è—•æ–­ä¸è¿</a></li></ul></li><li><p><a href="https://juejin.im/entry/5b66ea75e51d45195312a173/" target="_blank" rel="noopener">git submoduleä½¿ç”¨ä»¥åŠæ³¨æ„äº‹é¡¹</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macOSå®‰è£…homebrewæŠ¥é”™ LibreSSL SSL_read SSL_ERROR_SYSCALL errno 54</title>
      <link href="/2018/08/05/macos-brew/"/>
      <url>/2018/08/05/macos-brew/</url>
      
        <content type="html"><![CDATA[<blockquote><p>LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54</p></blockquote><a id="more"></a><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="# å®‰è£…"></a># å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl <span class="string">"https://nodejs.org/dist/latest/node-<span class="variable">$&#123;VERSION:-$(wget -qO- https://nodejs.org/dist/latest/ | sed -nE 's|.*&gt;node-(.*)\.pkg&lt;/a&gt;.*|\1|p')&#125;</span>.pkg"</span> &gt; <span class="string">"<span class="variable">$HOME</span>/Downloads/node-latest.pkg"</span> &amp;&amp; sudo installer -store -pkg <span class="string">"<span class="variable">$HOME</span>/Downloads/node-latest.pkg"</span> -target <span class="string">"/"</span></span><br></pre></td></tr></table></figure><h4 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="# æŠ¥é”™"></a># æŠ¥é”™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">==&gt; Tapping homebrew/core</span><br><span class="line">Cloning into <span class="string">'/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core'</span>...</span><br><span class="line">fatal: unable to access <span class="string">'https://github.com/Homebrew/homebrew-core/'</span>: LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54</span><br><span class="line">Error: Failure <span class="keyword">while</span> executing; `git <span class="built_in">clone</span> https://github.com/Homebrew/homebrew-core /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1` exited with 128.</span><br><span class="line">Error: Failure <span class="keyword">while</span> executing; `/usr/<span class="built_in">local</span>/bin/brew tap homebrew/core` exited with 1.</span><br></pre></td></tr></table></figure><h4 id="è§£å†³ï¼š"><a href="#è§£å†³ï¼š" class="headerlink" title="# è§£å†³ï¼š"></a># è§£å†³ï¼š</h4><ul><li>æ‰§è¡Œä¸‹é¢è¿™å¥å‘½ä»¤ï¼Œæ›´æ¢ä¸ºä¸­ç§‘é™¢çš„é•œåƒï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> git://mirrors.ustc.edu.cn/homebrew-core.git/ /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1</span><br></pre></td></tr></table></figure><ul><li>æŠŠhomebrew-coreçš„é•œåƒåœ°å€ä¹Ÿè®¾ä¸ºä¸­ç§‘é™¢çš„å›½å†…é•œåƒ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>"</span> </span><br><span class="line"></span><br><span class="line">git remote <span class="built_in">set</span>-url origin https://mirrors.ustc.edu.cn/brew.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>/Library/Taps/homebrew/homebrew-core"</span> </span><br><span class="line"></span><br><span class="line">git remote <span class="built_in">set</span>-url origin https://mirrors.ustc.edu.cn/homebrew-core.git</span><br></pre></td></tr></table></figure><ul><li>æ›´æ–°</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li>æŠ¥é”™è§£å†³ï¼š<a href="https://blog.csdn.net/qq_35624642/article/details/79682979" target="_blank" rel="noopener">macOS High Sierra10.13.3å®‰è£…homebrewæŠ¥é”™LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54è§£å†³æ–¹æ³•</a></li><li><a href="https://blog.csdn.net/qq_41234116/article/details/79366454" target="_blank" rel="noopener">Macå®‰è£…ï¼Œç®€å•å®ç”¨ï¼Œå¸è½½homebrewè¯¦ç»†æ•™ç¨‹</a> </li></ul>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
            <tag> Homebrew </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macOSä¸‹nodeç‰ˆæœ¬ç®¡ç†ä¸‹è½½æ–°ç‰ˆæœ¬æ—¶ä¸­æ–­è¿”å›Segmentation fault 11</title>
      <link href="/2018/08/05/macos-node/"/>
      <url>/2018/08/05/macos-node/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰è®°ï¼šå®‰è£… node çš„æ—¶å€™å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘éœ€è¦æŒ‡å®šæŸä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥å®‰è£…äº† n æ¨¡å—ï¼Œæ¥è¿›è¡Œç‰ˆæœ¬åˆ‡æ¢ï¼Œä½†æ˜¯é€”ä¸­å‘ç”Ÿäº†æŠ¥é”™ï¼šSegmentation faultï¼š11ï¼Œå¯¼è‡´ npm å‘½ä»¤æ— æ³•ä½¿ç”¨ï¼Œç”±äºä½¿ç”¨çš„ macOSï¼Œå¤§å®¶éƒ½æ¨è HomeBrewï¼Œäºæ˜¯è¿æ»šå¸¦çˆ¬åœ°ä»ä¸€ä¸ªå‘è·³åˆ°å¦ä¸€ä¸ªå‘ï¼Œå¥½ç–¼å•Šâ€¦</p></blockquote><a id="more"></a><h4 id="n-æ¨¡å—"><a href="#n-æ¨¡å—" class="headerlink" title="n æ¨¡å—"></a>n æ¨¡å—</h4><ul><li>é¦–å…ˆ <strong>n æ¨¡å—ä¸æ”¯æŒ Windowsï¼ï¼ï¼</strong></li><li>å®‰è£…ï¼š<code>sudo npm install -g n</code></li><li>å‚è€ƒï¼š<a href="https://blog.csdn.net/kiddd_fu/article/details/78655672" target="_blank" rel="noopener">node ç‰ˆæœ¬æ›´æ–°çš„ç®€ä¾¿æ–¹æ³•â€”â€”ç¥å¥‡çš„ n æ¨¡å—</a></li><li>ç‰ˆæœ¬åˆ‡æ¢ï¼š<code>n</code>ï¼Œç„¶åä¸Šä¸‹åˆ‡æ¢ï¼Œåœ†ç‚¹åœ¨å“ªå„¿å°±æ˜¯å“ªä¸ªï¼Œä½†æ˜¯é—®é¢˜ä¸¤ä¸ªæˆ–è€…å¤šä¸ªéƒ½æ˜¯ç°è‰²ï¼Œå³æ²¡æœ‰åœ†ç‚¹ï¼Œæ€ä¹ˆåŠï¼Ÿ<ul><li>è¿™æ—¶ï¼Œåˆ‡å›å»ä½¿ç”¨<code>node -v</code>å°±ä¼šæŠ¥é”™ï¼š<code>Segmentation fault: 11</code> ï¼Œå½“ç„¶ï¼Œnpm ç›´æ¥<code>npm: command not found</code></li></ul></li><li>è§£å†³ï¼š<code>sudo n 8.1.3</code></li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/8/4/165046762420dadb?w=1268&amp;h=478&amp;f=jpeg&amp;s=170090" alt=""></p><ul><li>å‚è€ƒï¼š<a href="https://blog.csdn.net/Dcatfly/article/details/75201172" target="_blank" rel="noopener">n æ¨¡å—ç®¡ç† node ç‰ˆæœ¬é‡åˆ°çš„é—®é¢˜</a></li><li>ä½†æ˜¯åˆ‡æ¢åˆ° 8.11.3ï¼Œé—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œæ‰€ä»¥åˆ é™¤ï¼š<code>sudo n rm 8.11.3</code></li><li>å¸è½½ npmï¼š<code>sudo npm uninstall npm -g</code>ï¼Œç„¶åå» node å®˜ç½‘é‡æ–°ä¸‹è½½<code>8.11.3LTS</code>ï¼Œå®‰è£…æˆåŠŸï¼Œä½†æ˜¯ä½¿ç”¨<code>n list</code>ï¼Œå¹¶æœªæŸ¥çœ‹åˆ°æ­¤ç‰ˆæœ¬</li><li>äºæ˜¯ï¼Œé‡æ–°å†èµ°ä¸€éï¼š<code>sudo n 8.11.3</code>ï¼ŒæˆåŠŸã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
            <tag> Nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptç®—æ³•åˆçº§ç»ƒä¹ </title>
      <link href="/2018/08/01/js-algo-1/"/>
      <url>/2018/08/01/js-algo-1/</url>
      
        <content type="html"><![CDATA[<h3 id="éœ€è¦å®šä¹‰ä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ•°"><a href="#éœ€è¦å®šä¹‰ä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ•°" class="headerlink" title="# éœ€è¦å®šä¹‰ä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ•°"></a># éœ€è¦å®šä¹‰ä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ourFunction</span>(<span class="params">ourMin, ourMax</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (ourMax - ourMin + <span class="number">1</span>)) + ourMin;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ourFunction(<span class="number">1</span>, <span class="number">9</span>);</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="è®¡ç®—ä¸€ä¸ªæ•´æ•°çš„é˜¶ä¹˜"><a href="#è®¡ç®—ä¸€ä¸ªæ•´æ•°çš„é˜¶ä¹˜" class="headerlink" title="# è®¡ç®—ä¸€ä¸ªæ•´æ•°çš„é˜¶ä¹˜"></a># è®¡ç®—ä¸€ä¸ªæ•´æ•°çš„é˜¶ä¹˜</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorialize</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ</span></span><br><span class="line">  <span class="keyword">if</span>(num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> num *= factorialize(num - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">factorialize(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><h3 id="æ¥ä¸€æ®µå›æ–‡"><a href="#æ¥ä¸€æ®µå›æ–‡" class="headerlink" title="# æ¥ä¸€æ®µå›æ–‡"></a># æ¥ä¸€æ®µå›æ–‡</h3><ul><li><a href="http://www.w3cplus.com/javascript/palindrome-check-in-javascript.html" target="_blank" rel="noopener">JavaScriptç®—æ³•ç»ƒä¹ ï¼š JavaScriptä¸­å›æ–‡(Palindromes)å¤„ç†</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">palindrome</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ</span></span><br><span class="line">  <span class="keyword">var</span> re = <span class="regexp">/[\W_]/g</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> lowRegStr = str.toLowerCase().replace(re, <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">var</span> reveRegStr = lowRegStr.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line">  <span class="keyword">return</span> lowRegStr == reveRegStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">palindrome(<span class="string">"eye"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">palindrome</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ</span></span><br><span class="line">  <span class="keyword">var</span> re = <span class="regexp">/[\W_]/g</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> lowRegStr = str.toLowerCase().replace(re, <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>, l=lowRegStr.length; i&lt;l/<span class="number">2</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(lowRegStr[i] != lowRegStr[l - <span class="number">1</span> -i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">palindrome(<span class="string">"eye"</span>);</span><br></pre></td></tr></table></figure><h3 id="åœ¨å¥å­ä¸­æ‰¾å‡ºæœ€é•¿çš„å•è¯ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚"><a href="#åœ¨å¥å­ä¸­æ‰¾å‡ºæœ€é•¿çš„å•è¯ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚" class="headerlink" title="# åœ¨å¥å­ä¸­æ‰¾å‡ºæœ€é•¿çš„å•è¯ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚"></a># åœ¨å¥å­ä¸­æ‰¾å‡ºæœ€é•¿çš„å•è¯ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚</h3><ul><li><a href="http://www.cnblogs.com/chenjinxinlove/p/5579043.html" target="_blank" rel="noopener">js æ•°ç»„æ’åºå’Œç®—æ³•æ’åº</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findLongestWord</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> strArr = str = str.split(<span class="string">' '</span>);</span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;strArr.length; i++) &#123;</span><br><span class="line">    newArr.push(strArr[i].length);</span><br><span class="line">  &#125;</span><br><span class="line">  newArr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> b - a;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> newArr[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">findLongestWord(<span class="string">"What if we try a super-long word such as otorhinolaryngology"</span>);</span><br></pre></td></tr></table></figure><h3 id="ç¡®ä¿å­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ï¼Œå…¶ä½™éƒ¨åˆ†å°å†™ã€‚"><a href="#ç¡®ä¿å­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ï¼Œå…¶ä½™éƒ¨åˆ†å°å†™ã€‚" class="headerlink" title="# ç¡®ä¿å­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ï¼Œå…¶ä½™éƒ¨åˆ†å°å†™ã€‚"></a># ç¡®ä¿å­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ï¼Œå…¶ä½™éƒ¨åˆ†å°å†™ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">titleCase</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> strArr = str.split(<span class="string">' '</span>);</span><br><span class="line">  <span class="keyword">var</span> newStrArr = [];</span><br><span class="line">  <span class="keyword">var</span> newStr = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;strArr.length; i++) &#123;</span><br><span class="line">    newStr = strArr[i][<span class="number">0</span>].toUpperCase();</span><br><span class="line">    newStr += strArr[i].substr(<span class="number">1</span>).toLowerCase();</span><br><span class="line">    newStrArr.push(newStr);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  newStrArr = newStrArr.join(<span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newStrArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">titleCase(<span class="string">"I'm a little tea pot"</span>);</span><br></pre></td></tr></table></figure><h3 id="æ‰¾å‡ºå¤šä¸ªæ•°ç»„ä¸­çš„æœ€å¤§æ•°"><a href="#æ‰¾å‡ºå¤šä¸ªæ•°ç»„ä¸­çš„æœ€å¤§æ•°" class="headerlink" title="# æ‰¾å‡ºå¤šä¸ªæ•°ç»„ä¸­çš„æœ€å¤§æ•°"></a># æ‰¾å‡ºå¤šä¸ªæ•°ç»„ä¸­çš„æœ€å¤§æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">largestOfFour</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  <span class="keyword">var</span> num = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.length; i++) &#123;</span><br><span class="line">    num = arr[i].sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> b - a;</span><br><span class="line">    &#125;);</span><br><span class="line">    newArr.push(num[<span class="number">0</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">largestOfFour([[<span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">13</span>, <span class="number">27</span>, <span class="number">18</span>, <span class="number">26</span>], [<span class="number">32</span>, <span class="number">35</span>, <span class="number">37</span>, <span class="number">39</span>], [<span class="number">1000</span>, <span class="number">1001</span>, <span class="number">857</span>, <span class="number">1</span>]]);</span><br></pre></td></tr></table></figure><h3 id="åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²-str-æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²-target-ç»“å°¾ã€‚"><a href="#åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²-str-æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²-target-ç»“å°¾ã€‚" class="headerlink" title="# åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²(str)æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²(target)ç»“å°¾ã€‚"></a># åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²(str)æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²(target)ç»“å°¾ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">confirmEnding</span>(<span class="params">str, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = target.length;</span><br><span class="line">  <span class="keyword">if</span>(str.substr(-len) == target) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">confirmEnding(<span class="string">"He has to give me a new name"</span>, <span class="string">"name"</span>);</span><br><span class="line">confirmEnding(<span class="string">"Bastian"</span>, <span class="string">"n"</span>);</span><br></pre></td></tr></table></figure><h3 id="é‡å¤ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²-numæ¬¡ï¼Œå¦‚æœnumæ˜¯ä¸€ä¸ªè´Ÿæ•°åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚"><a href="#é‡å¤ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²-numæ¬¡ï¼Œå¦‚æœnumæ˜¯ä¸€ä¸ªè´Ÿæ•°åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚" class="headerlink" title="# é‡å¤ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸² numæ¬¡ï¼Œå¦‚æœnumæ˜¯ä¸€ä¸ªè´Ÿæ•°åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚"></a># é‡å¤ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸² numæ¬¡ï¼Œå¦‚æœnumæ˜¯ä¸€ä¸ªè´Ÿæ•°åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeat</span>(<span class="params">str, num</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ</span></span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  <span class="keyword">var</span> newStr = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">if</span>(num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    newStr = <span class="string">''</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;num; i++) &#123;</span><br><span class="line">      newArr.push(str);</span><br><span class="line">    &#125;</span><br><span class="line">    newStr = newArr.join(<span class="string">''</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">repeat(<span class="string">"abc"</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure><h3 id="å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿â€¦"><a href="#å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿â€¦" class="headerlink" title="# å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿â€¦"></a># å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿â€¦</h3><ul><li>å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿ï¼Œåˆ™æŠŠå¤šä½™çš„éƒ¨åˆ†ç”¨â€¦æ¥è¡¨ç¤ºã€‚åˆ‡è®°ï¼Œæ’å…¥åˆ°å­—ç¬¦ä¸²å°¾éƒ¨çš„ä¸‰ä¸ªç‚¹å·ä¹Ÿä¼šè®¡å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŒ‡å®šçš„å‚æ•°numå°äºæˆ–ç­‰äº3ï¼Œåˆ™æ·»åŠ çš„ä¸‰ä¸ªç‚¹å·ä¸ä¼šè®¡å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">truncate</span>(<span class="params">str, num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newStr=<span class="string">''</span>;</span><br><span class="line">  <span class="keyword">if</span>(num &gt;= str.length) &#123;</span><br><span class="line">    newStr = str.slice(<span class="number">0</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(num &gt; <span class="number">3</span>) &#123;</span><br><span class="line">    newStr = str.slice(<span class="number">0</span>, num<span class="number">-3</span>) + <span class="string">'...'</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    newStr = str.slice(<span class="number">0</span>, num) + <span class="string">'...'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">truncate(<span class="string">"A-tisket a-tasket A green and yellow basket"</span>, <span class="number">11</span>);</span><br></pre></td></tr></table></figure><h3 id="æŠŠä¸€ä¸ªæ•°ç»„arræŒ‰ç…§æŒ‡å®šçš„æ•°ç»„å¤§å°sizeåˆ†å‰²æˆè‹¥å¹²ä¸ªæ•°ç»„å—ã€‚"><a href="#æŠŠä¸€ä¸ªæ•°ç»„arræŒ‰ç…§æŒ‡å®šçš„æ•°ç»„å¤§å°sizeåˆ†å‰²æˆè‹¥å¹²ä¸ªæ•°ç»„å—ã€‚" class="headerlink" title="# æŠŠä¸€ä¸ªæ•°ç»„arræŒ‰ç…§æŒ‡å®šçš„æ•°ç»„å¤§å°sizeåˆ†å‰²æˆè‹¥å¹²ä¸ªæ•°ç»„å—ã€‚"></a># æŠŠä¸€ä¸ªæ•°ç»„arræŒ‰ç…§æŒ‡å®šçš„æ•°ç»„å¤§å°sizeåˆ†å‰²æˆè‹¥å¹²ä¸ªæ•°ç»„å—ã€‚</h3><ul><li><a href="https://segmentfault.com/q/1010000004921251" target="_blank" rel="noopener">jså°†ä¸€ä½æ•°ç»„åˆ†å‰²æˆæ¯ä¸‰ä¸ªä¸€ç»„</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chunk</span>(<span class="params">arr, size</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.length; i+=size) &#123;</span><br><span class="line">    newArr.push(arr.slice(i, i+size));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">chunk([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>], <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h3 id="è¿”å›ä¸€ä¸ªæ•°ç»„è¢«æˆªæ–­nä¸ªå…ƒç´ åè¿˜å‰©ä½™çš„å…ƒç´ ï¼Œæˆªæ–­ä»ç´¢å¼•0å¼€å§‹ã€‚"><a href="#è¿”å›ä¸€ä¸ªæ•°ç»„è¢«æˆªæ–­nä¸ªå…ƒç´ åè¿˜å‰©ä½™çš„å…ƒç´ ï¼Œæˆªæ–­ä»ç´¢å¼•0å¼€å§‹ã€‚" class="headerlink" title="# è¿”å›ä¸€ä¸ªæ•°ç»„è¢«æˆªæ–­nä¸ªå…ƒç´ åè¿˜å‰©ä½™çš„å…ƒç´ ï¼Œæˆªæ–­ä»ç´¢å¼•0å¼€å§‹ã€‚"></a># è¿”å›ä¸€ä¸ªæ•°ç»„è¢«æˆªæ–­nä¸ªå…ƒç´ åè¿˜å‰©ä½™çš„å…ƒç´ ï¼Œæˆªæ–­ä»ç´¢å¼•0å¼€å§‹ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">slasher</span>(<span class="params">arr, howMany</span>) </span>&#123;</span><br><span class="line">  arr.splice(<span class="number">0</span>, howMany);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">slasher([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h3 id="å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ åŒ…å«äº†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„æ‰€æœ‰å­—ç¬¦ï¼Œå‡½æ•°è¿”å›trueã€‚"><a href="#å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ åŒ…å«äº†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„æ‰€æœ‰å­—ç¬¦ï¼Œå‡½æ•°è¿”å›trueã€‚" class="headerlink" title="# å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ åŒ…å«äº†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„æ‰€æœ‰å­—ç¬¦ï¼Œå‡½æ•°è¿”å›trueã€‚"></a># å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ åŒ…å«äº†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„æ‰€æœ‰å­—ç¬¦ï¼Œå‡½æ•°è¿”å›trueã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mutation</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str1 = arr[<span class="number">0</span>].toLowerCase();  </span><br><span class="line">  <span class="keyword">var</span> str2 = arr[<span class="number">1</span>].toLowerCase();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;str2.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(str1.indexOf(str2[i]) == <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mutation([<span class="string">"hello"</span>, <span class="string">"hey"</span>]);</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤æ•°ç»„ä¸­çš„æ‰€æœ‰å‡å€¼ã€‚"><a href="#åˆ é™¤æ•°ç»„ä¸­çš„æ‰€æœ‰å‡å€¼ã€‚" class="headerlink" title="# åˆ é™¤æ•°ç»„ä¸­çš„æ‰€æœ‰å‡å€¼ã€‚"></a># åˆ é™¤æ•°ç»„ä¸­çš„æ‰€æœ‰å‡å€¼ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bouncer</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  newArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(val !== (<span class="literal">undefined</span> &amp;&amp; <span class="literal">null</span> &amp;&amp; <span class="string">""</span> &amp;&amp; <span class="literal">NaN</span> &amp;&amp; <span class="literal">false</span> &amp;&amp; <span class="number">0</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bouncer([<span class="number">7</span>, <span class="string">"ate"</span>, <span class="string">""</span>, <span class="literal">false</span>, <span class="number">9</span>]);</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„æ’åºå¹¶æ‰¾å‡ºå…ƒç´ ç´¢å¼•ï¼Œå…ˆç»™æ•°ç»„æ’åºï¼Œç„¶åæ‰¾åˆ°æŒ‡å®šçš„å€¼åœ¨æ•°ç»„çš„ä½ç½®ï¼Œæœ€åè¿”å›ä½ç½®å¯¹åº”çš„ç´¢å¼•ã€‚"><a href="#æ•°ç»„æ’åºå¹¶æ‰¾å‡ºå…ƒç´ ç´¢å¼•ï¼Œå…ˆç»™æ•°ç»„æ’åºï¼Œç„¶åæ‰¾åˆ°æŒ‡å®šçš„å€¼åœ¨æ•°ç»„çš„ä½ç½®ï¼Œæœ€åè¿”å›ä½ç½®å¯¹åº”çš„ç´¢å¼•ã€‚" class="headerlink" title="# æ•°ç»„æ’åºå¹¶æ‰¾å‡ºå…ƒç´ ç´¢å¼•ï¼Œå…ˆç»™æ•°ç»„æ’åºï¼Œç„¶åæ‰¾åˆ°æŒ‡å®šçš„å€¼åœ¨æ•°ç»„çš„ä½ç½®ï¼Œæœ€åè¿”å›ä½ç½®å¯¹åº”çš„ç´¢å¼•ã€‚"></a># æ•°ç»„æ’åºå¹¶æ‰¾å‡ºå…ƒç´ ç´¢å¼•ï¼Œå…ˆç»™æ•°ç»„æ’åºï¼Œç„¶åæ‰¾åˆ°æŒ‡å®šçš„å€¼åœ¨æ•°ç»„çš„ä½ç½®ï¼Œæœ€åè¿”å›ä½ç½®å¯¹åº”çš„ç´¢å¼•ã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">where</span>(<span class="params">arr, num</span>) </span>&#123;</span><br><span class="line">  arr.push(num);</span><br><span class="line">  arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a-b;</span><br><span class="line">  &#125;);  </span><br><span class="line">  <span class="keyword">return</span> arr.indexOf(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">where([<span class="number">40</span>, <span class="number">60</span>], <span class="number">50</span>);</span><br></pre></td></tr></table></figure><h3 id="å®ç°ä¸€ä¸ªæ‘§æ¯-destroyer-å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‘§æ¯çš„æ•°ç»„ï¼Œå…¶ä½™çš„å‚æ•°æ˜¯å¾…æ‘§æ¯çš„å€¼ã€‚"><a href="#å®ç°ä¸€ä¸ªæ‘§æ¯-destroyer-å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‘§æ¯çš„æ•°ç»„ï¼Œå…¶ä½™çš„å‚æ•°æ˜¯å¾…æ‘§æ¯çš„å€¼ã€‚" class="headerlink" title="# å®ç°ä¸€ä¸ªæ‘§æ¯(destroyer)å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‘§æ¯çš„æ•°ç»„ï¼Œå…¶ä½™çš„å‚æ•°æ˜¯å¾…æ‘§æ¯çš„å€¼ã€‚"></a># å®ç°ä¸€ä¸ªæ‘§æ¯(destroyer)å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‘§æ¯çš„æ•°ç»„ï¼Œå…¶ä½™çš„å‚æ•°æ˜¯å¾…æ‘§æ¯çš„å€¼ã€‚</h3><ul><li><a href="http://blog.csdn.net/wangmc0827/article/details/72529116" target="_blank" rel="noopener">FCCâ€“Seek and Destroyï¼ˆæ‘§æ¯æ•°ç»„ï¼‰</a></li><li><a href="http://www.cnblogs.com/codepen2010/p/6824934.html" target="_blank" rel="noopener">Seek and Destroy(ç®—æ³•)</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">destroyer</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">  <span class="keyword">var</span> arg = <span class="built_in">arguments</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;arg.length; i++) &#123;</span><br><span class="line">    newArr.push(arg[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  arr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> newArr.indexOf(val) &lt; <span class="number">0</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">destroyer([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><blockquote><p>å‘è¡¨äº<a href="http://www.imooc.com/article/20814" target="_blank" rel="noopener">æ…•è¯¾ç½‘æ‰‹è®°</a></p></blockquote><blockquote><p>é¢˜ç›®æ¥è‡ªï¼š <strong>FreeCodeCamp</strong> <a href="https://freecodecamp.cn/map-aside#nested-collapseBasicAlgorithmScripting" target="_blank" rel="noopener">BasicAlgorithmScripting</a><br>å‚è€ƒèµ„æ–™ï¼š <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">JavaScriptæ ‡å‡†åº“</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> JavaScriptç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GithubæŠ¥é”™fatal unable to access No such file or directory</title>
      <link href="/2018/07/30/github-01/"/>
      <url>/2018/07/30/github-01/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰æœ‰å®‰è£…è¿‡githubæ—§ç‰ˆï¼Œä¸€ç›´æ­£å¸¸ï¼Œåæ¥æ›´æ–°äº†æ–°ç‰ˆï¼Œä½†æ˜¯<code>git pull</code>çš„æ—¶å€™å¦‚æœ‰å¦‚ä¸‹æŠ¥é”™ï¼š<br><a id="more"></a></p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access 'https://github.com/eefocus/deploy.git/': schannel: failed to open CA file 'C:/Users/Administrator/AppData/Local/GitHubDesktop/app-1.2.3/resources/app/git/mingw64/bin/curl-ca-bundle.crt': No such file or directory</span><br></pre></td></tr></table></figure><ul><li>æ‰¾åˆ°<code>C:\ProgramData\Git\config</code>ï¼Œæ‰“å¼€ï¼Œä¿®æ”¹<code>sslCAinfo</code>ï¼ˆè·¯å¾„å¾—çœ‹è‡ªå·±æ–‡ä»¶ç›¸å¯¹åº”çš„ä½ç½®ï¼‰å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[core]</span><br><span class="line">symlinks = true</span><br><span class="line">autocrlf = true</span><br><span class="line">fscache = true</span><br><span class="line">[color]</span><br><span class="line">diff = auto</span><br><span class="line">status = auto</span><br><span class="line">branch = auto</span><br><span class="line">interactive = true</span><br><span class="line">[pack]</span><br><span class="line">[help]</span><br><span class="line">format = html</span><br><span class="line">[https]</span><br><span class="line">sslCAinfo = C:/Users/Administrator/AppData/Local/GitHubDesktop/app-1.2.6/resources/app/git/mingw64/ssl/certs/curl-ca-bundle.crt</span><br><span class="line">[sendemail]</span><br><span class="line">smtpserver = /bin/msmtp.exe</span><br><span class="line"></span><br><span class="line">[diff &quot;astextplain&quot;]</span><br><span class="line">textconv = astextplain</span><br><span class="line">[rebase]</span><br><span class="line">autosquash = true</span><br></pre></td></tr></table></figure><ul><li><strong>é‡ç‚¹æç¤º</strong>ï¼šé»˜è®¤çš„æ˜¯<code>[http]</code>ï¼Œå¦‚æœæœ‰å¿…è¦ä½ éœ€è¦æ”¹æˆ<code>[https]</code></li><li>å¦‚æœæ‰¾ä¸åˆ°<code>C:\ProgramData</code>æ–‡ä»¶ï¼ˆæˆ‘çš„æ˜¯win10ï¼‰ï¼Œåœ¨æŸ¥çœ‹ä¸‹å°†éšè—çš„é¡¹ç›®æ‰“ä¸ªå‹¾<br><img src="https://user-images.githubusercontent.com/19526072/43298424-81590c1a-9188-11e8-8968-666bdd839ced.png" alt="æ‰“å¼€éšè—æ–‡ä»¶"></li></ul><blockquote><p>å‚è€ƒï¼š<a href="http://www.mamicode.com/info-detail-2368065.html" target="_blank" rel="noopener">GitHub DesktopæŠ¥é”™fatal: unable to access â€˜https://github.comâ€¦â€¦: schannel: failed to open CA file â€˜C:/Usersâ€¦â€¦bundle.crtâ€™: No such file or directoryçš„è§£å†³åŠæ³•</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€å‘å·¥å…· </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å­¦ä¹ èµ„æ–™å³¡è°·</title>
      <link href="/2018/07/06/dev-data/"/>
      <url>/2018/07/06/dev-data/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç† 2017-2018 çš„å‰ç«¯å­¦ä¹ èµ„æ–™</p></blockquote><a id="more"></a><h3 id="å­¦ä¹ èµ„æ–™ç«™"><a href="#å­¦ä¹ èµ„æ–™ç«™" class="headerlink" title="å­¦ä¹ èµ„æ–™ç«™"></a>å­¦ä¹ èµ„æ–™ç«™</h3><h4 id="ç½‘ç«™"><a href="#ç½‘ç«™" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h4><ul><li><strong><a href="https://juejin.im/post/5a0c1956f265da430a501f51" target="_blank" rel="noopener">(2017)ä¸ªäººåˆ†äº«â€“web å‰ç«¯å­¦ä¹ èµ„æºåˆ†äº«</a></strong></li><li><strong><a href="https://developer.mozilla.org/zh-CN/docs/Learn" target="_blank" rel="noopener">å­¦ä¹  Web å¼€å‘</a></strong></li><li><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide" target="_blank" rel="noopener">Web å¼€å‘è€…æŒ‡å—</a></strong></li><li><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/Tutorials" target="_blank" rel="noopener">æ•™ç¨‹</a></strong></li><li><strong><a href="http://www.w3school.com.cn/" target="_blank" rel="noopener">W3school</a></strong></li><li><strong><a href="https://www.w3.org/" target="_blank" rel="noopener">W3C</a></strong></li><li><strong><a href="http://www.hewebgl.com/" target="_blank" rel="noopener">WebGL ä¸­æ–‡ç½‘</a></strong></li></ul><h4 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h4><ul><li><strong><a href="http://es6.ruanyifeng.com/#docs/intro" target="_blank" rel="noopener">ECMAScript 6 å…¥é—¨</a></strong></li><li><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="noopener">JavaScript</a></strong></li><li><strong><a href="http://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&amp;mid=2651552568&amp;idx=1&amp;sn=2c85a858b0a28d1c256354312f535f13&amp;chksm=8025acf9b75225efea70a70b3d753bd53ec596f2d90371d960d5643e8c5946cea79f355c7513&amp;mpshare=1&amp;scene=23&amp;srcid=0906yyeOcwhCqvE1DrkomSbR#rd" target="_blank" rel="noopener">æ€ä¹ˆå­¦ JavaScriptï¼Ÿ</a></strong></li><li><strong><a href="http://www.jianshu.com/p/72e318848de8" target="_blank" rel="noopener">10 ä¸ªæœ€ä½³çš„ JavaScript é£æ ¼æŒ‡å—</a></strong></li></ul><h4 id="æ¡†æ¶ã€åº“"><a href="#æ¡†æ¶ã€åº“" class="headerlink" title="æ¡†æ¶ã€åº“"></a>æ¡†æ¶ã€åº“</h4><ul><li><strong><a href="http://www.bootcss.com/" target="_blank" rel="noopener">å‰ç«¯æ¡†æ¶ã€èµ„æ–™æ±‡é›†</a></strong></li><li><strong><a href="https://www.lodashjs.com/" target="_blank" rel="noopener">Lodash</a></strong>â€” æ˜¯ä¸€ä¸ªä¸€è‡´æ€§ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½çš„ JavaScript å®ç”¨å·¥å…·åº“ã€‚</li><li><strong><a href="http://www.bootcss.com/p/headroom.js/" target="_blank" rel="noopener">Headroom.js</a></strong>â€” ä¸ºé¡µé¢é¡¶éƒ¨å¤šç•™äº›ç©ºé—´ã€‚åœ¨ä¸éœ€è¦é¡µå¤´æ—¶å°†å…¶éšè—ã€‚</li><li><strong><a href="http://www.bootcss.com/p/icheck/" target="_blank" rel="noopener">iCheck</a></strong>â€”å¢å¼ºå¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®</li><li><strong><a href="http://www.hewebgl.com/article/articledir/1" target="_blank" rel="noopener">Three.js</a></strong>â€” æ˜¯ JavaScript ç¼–å†™çš„ WebGL ç¬¬ä¸‰æ–¹åº“ã€‚æä¾›äº†éå¸¸å¤šçš„ 3D æ˜¾ç¤ºåŠŸèƒ½ã€‚</li></ul><h4 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h4><ul><li><strong><a href="https://github.com/geeeeeeeeek/git-recipes" target="_blank" rel="noopener">é«˜è´¨é‡çš„ Git ä¸­æ–‡æ•™ç¨‹</a></strong>â€”è¯¥ Wiki çš„ç¼–è€…éå¸¸è®¤çœŸç»†è‡´åœ°æ€»ç»“å’Œç¿»è¯‘äº†è®¸å¤š Github çŸ¥è¯†å’ŒæŠ€å·§</li><li><strong><a href="http://www.yangzhiping.com/tech/github.html" target="_blank" rel="noopener">å¦‚ä½•é«˜æ•ˆåˆ©ç”¨ GitHub</a></strong></li><li><strong><a href="http://www.bootcss.com/p/git-guide/" target="_blank" rel="noopener">Git - ç®€æ˜“æŒ‡å—</a></strong></li><li><strong><a href="https://zhuanlan.zhihu.com/p/24081900" target="_blank" rel="noopener">å…¨é¢ç†è§£ Git</a></strong></li><li><strong><a href="https://gruntjs.com/" target="_blank" rel="noopener">Grunt</a></strong>â€”é¡¹ç›®æ„å»ºå·¥å…·</li><li><strong><a href="http://www.gulpjs.com.cn/" target="_blank" rel="noopener">Gulp</a></strong>â€”ç”¨è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·å¢å¼ºä½ çš„å·¥ä½œæµç¨‹ï¼</li><li><strong><a href="https://webpack.bootcss.com/" target="_blank" rel="noopener">Webpack</a></strong>â€”å‰ç«¯èµ„æºæ¨¡å—åŒ–ç®¡ç†å’Œæ‰“åŒ…å·¥å…·</li><li><strong><a href="http://www.jianshu.com/p/42e11515c10f" target="_blank" rel="noopener">å…¥é—¨ Webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†</a></strong></li></ul><h4 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h4><ul><li><strong><a href="http://www.zhangxinxu.com/" target="_blank" rel="noopener">å¼ é‘«æ—­</a></strong></li><li><strong><a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></strong></li><li><strong><a href="http://www.ruanyifeng.com/blog/javascript/" target="_blank" rel="noopener">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—ä¹‹ JavaScript</a></strong></li></ul><h4 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h4><ul><li><strong><a href="http://blog.jobbole.com/105633/" target="_blank" rel="noopener">HTTPS å·¥ä½œåŸç†å’Œ TCP æ¡æ‰‹æœºåˆ¶</a></strong></li></ul><h3 id="å¿«é€ŸæŸ¥æ‰¾åŒº"><a href="#å¿«é€ŸæŸ¥æ‰¾åŒº" class="headerlink" title="å¿«é€ŸæŸ¥æ‰¾åŒº"></a>å¿«é€ŸæŸ¥æ‰¾åŒº</h3><ul><li><strong><a href="https://github.com/yangtao2o/learninglog/wiki/JavaScriptç»å…¸å®ä¾‹#regexp" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦</a></strong></li></ul><h3 id="å­¦ä¹ ä¹¦ç±"><a href="#å­¦ä¹ ä¹¦ç±" class="headerlink" title="å­¦ä¹ ä¹¦ç±"></a>å­¦ä¹ ä¹¦ç±</h3><ul><li><strong><a href="https://github.com/yangtao2o/learninglog/wiki/JavaScriptç»å…¸å®ä¾‹" target="_blank" rel="noopener">JavaScript ç»å…¸å®ä¾‹</a></strong><ul><li>æ…•è¯¾ç½‘æ‰‹è®°<a href="http://www.imooc.com/article/20555" target="_blank" rel="noopener">å½’çº³ã€ŠJavaScript ç»å…¸å®ä¾‹ã€‹ä¹‹ JS ä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—</a></li></ul></li><li><strong><a href="https://freecodecamp.cn/map-aside#nested-collapseBasicAlgorithmScripting" target="_blank" rel="noopener">FreeCodeCamp</a></strong><ul><li>æ…•è¯¾ç½‘å‘å¸ƒæ‰‹è®° <a href="http://www.imooc.com/article/20814" target="_blank" rel="noopener">JavaScript ç®—æ³•åˆçº§ç»ƒä¹ </a></li></ul></li></ul><h3 id="ä¸ªäººæ‰‹è®°é›†é”¦"><a href="#ä¸ªäººæ‰‹è®°é›†é”¦" class="headerlink" title="ä¸ªäººæ‰‹è®°é›†é”¦"></a>ä¸ªäººæ‰‹è®°é›†é”¦</h3><ul><li><strong><a href="http://www.imooc.com/u/3120512/articles" target="_blank" rel="noopener">æ…•è¯¾ç½‘æ‰‹è®°</a></strong></li><li><strong><a href="https://www.qdfuns.com/u/32286.html" target="_blank" rel="noopener">å‰ç«¯ç½‘ç¬”è®°</a></strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> å‰ç«¯å­¦ä¹ èµ„æ–™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoå¸¸ç”¨å‘½ä»¤é›†åˆ</title>
      <link href="/2018/07/06/hexo-order/"/>
      <url>/2018/07/06/hexo-order/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th style="text-align:left">ç®€å†™</th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:left">hexo n â€œæˆ‘çš„åšå®¢â€</td><td>hexo new â€œæˆ‘çš„åšå®¢â€</td><td>#æ–°å»ºæ–‡ç« </td></tr><tr><td style="text-align:left">hexo p</td><td>hexo publish</td></tr><tr><td style="text-align:left">hexo g</td><td>hexo generate</td><td>#ç”Ÿæˆ</td></tr><tr><td style="text-align:left">hexo s</td><td>hexo server</td><td>#å¯åŠ¨æœåŠ¡é¢„è§ˆ</td></tr><tr><td style="text-align:left">hexo d</td><td>hexo deploy</td><td>#éƒ¨ç½²</td></tr></tbody></table><a id="more"></a><table><thead><tr><th style="text-align:left">æœåŠ¡å™¨</th><th></th></tr></thead><tbody><tr><td style="text-align:left">hexo server #Hexo</td><td>ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚</td></tr><tr><td style="text-align:left">hexo server -s</td><td>#é™æ€æ¨¡å¼</td></tr><tr><td style="text-align:left">hexo server -p 5000</td><td>#æ›´æ”¹ç«¯å£</td></tr><tr><td style="text-align:left">hexo server -i 192.168.1.1</td><td>#è‡ªå®šä¹‰ IP</td></tr><tr><td style="text-align:left">hexo clean</td><td>#æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤</td></tr><tr><td style="text-align:left">hexo g</td><td>#ç”Ÿæˆé™æ€ç½‘é¡µ</td></tr><tr><td style="text-align:left">hexo d</td><td>#å¼€å§‹éƒ¨ç½²</td></tr></tbody></table><table><thead><tr><th style="text-align:left">ç›‘è§†æ–‡ä»¶å˜åŠ¨</th><th></th></tr></thead><tbody><tr><td style="text-align:left">hexo generate</td><td>#ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶å¿«é€Ÿè€Œä¸”ç®€å•</td></tr><tr><td style="text-align:left">hexo generate â€“watch</td><td>#ç›‘è§†æ–‡ä»¶å˜åŠ¨</td></tr></tbody></table><table><thead><tr><th style="text-align:left">å®Œæˆåéƒ¨ç½²ï¼ˆä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼‰</th><th style="text-align:left">è‰ç¨¿</th></tr></thead><tbody><tr><td style="text-align:left">hexo generate â€“deploy</td><td style="text-align:left">hexo publish [layout] <title></title></td></tr><tr><td style="text-align:left">hexo deploy â€“generate</td><td style="text-align:left">â€¦</td></tr><tr><td style="text-align:left">hexo deploy -g</td><td style="text-align:left">â€¦</td></tr><tr><td style="text-align:left">hexo server -g</td><td style="text-align:left">â€¦</td></tr></tbody></table><table><thead><tr><th style="text-align:left">æ¨¡ç‰ˆ</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">hexo new â€œpostNameâ€</td><td style="text-align:left">#æ–°å»ºæ–‡ç« </td></tr><tr><td style="text-align:left">hexo new page â€œpageNameâ€</td><td style="text-align:left">#æ–°å»ºé¡µé¢</td></tr><tr><td style="text-align:left">hexo generate</td><td style="text-align:left">#ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•</td></tr><tr><td style="text-align:left">hexo server</td><td style="text-align:left">#å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œâ€™ctrl + câ€™å…³é—­serverï¼‰</td></tr><tr><td style="text-align:left">hexo deploy</td><td style="text-align:left">#å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub</td></tr><tr><td style="text-align:left">hexo new [layout] <title></title></td><td style="text-align:left">..</td></tr><tr><td style="text-align:left">hexo new photo â€œMy Galleryâ€</td><td style="text-align:left">..</td></tr><tr><td style="text-align:left">hexo new â€œHello Worldâ€ â€“lang tw</td><td style="text-align:left">..</td></tr></tbody></table><blockquote><p>å‚è€ƒ :<a href="https://blog.csdn.net/qq_26975307/article/details/62447489" target="_blank" rel="noopener">Hexoå¸¸ç”¨å‘½ä»¤ç¬”è®°</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºä½¿ç”¨Hexoä¸»é¢˜Yiliaä¸­ç¢°åˆ°çš„é—®é¢˜ä¸€äºŒ</title>
      <link href="/2018/04/08/hexo-yilia/"/>
      <url>/2018/04/08/hexo-yilia/</url>
      
        <content type="html"><![CDATA[<ul><li>å…³äºä½¿ç”¨ä¸»é¢˜ <a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">Yilia</a>çš„ä¸€äº›é—®é¢˜çš„é›†åˆåœ°ï¼š<a href="https://github.com/litten/hexo-theme-yilia/issues" target="_blank" rel="noopener">Issues</a></li></ul><blockquote><p>é¦–æ¨ï¼š<a href="http://www.ahonn.me/2016/12/15/create-a-hexo-theme-from-scratch/" target="_blank" rel="noopener">ä»é›¶å¼€å§‹åˆ¶ä½œ Hexo ä¸»é¢˜ </a></p></blockquote><a id="more"></a><blockquote><p>Q1ï¼šä¸»é¡µå¦‚ä½•æˆªå–æ–‡æœ¬é•¿åº¦ï¼Ÿ</p></blockquote><ul><li>åœ¨éœ€è¦æˆªæ–­çš„ä½ç½®ä½¿ç”¨ <code>&lt;!-- More --&gt;</code> å³å¯</li></ul><blockquote><p>Q2ï¼šå¦‚ä½•è®¾ç½®å¤šä¸ªæ ‡ç­¾ï¼Ÿ</p></blockquote><ul><li><code>tags: [Hexo,Theme]</code>ï¼Œå‚è€ƒ<a href="https://www.zhihu.com/question/48934747/answer/113403121" target="_blank" rel="noopener">æ­¤å¤„</a></li></ul><blockquote><p>Q3ï¼šæ›´æ¢ä¸»é¢˜çš„æ—¶å€™æŠ¥é”™</p></blockquote><ul><li>ä¸€èˆ¬æ˜¯ç”±äºä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„ <code>key: value</code>å‰åå‡ºç°äº†ç©ºæ ¼ï¼Œæˆ–è€…ä¹‹é—´æ²¡æœ‰ç©ºæ ¼å¯¼è‡´çš„</li></ul><blockquote><p>Q4ï¼šå¦‚ä½•åˆ›å»º about ç­‰é¡µé¢ï¼Ÿå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰é¡µé¢ï¼Ÿ</p></blockquote><ul><li><code>hexo new page &quot;about&quot;</code></li><li>å‚è€ƒ<br>_ <a href="https://blog.csdn.net/lcyaiym/article/details/76762105?locationNum=5&amp;fps=1" target="_blank" rel="noopener">hexo çš„ Next åˆ›å»º tags </a><br>_ <a href="https://refined-x.com/2017/07/10/Hexo%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95/" target="_blank" rel="noopener">Hexo è‡ªå®šä¹‰é¡µé¢çš„æ–¹æ³• </a></li></ul><blockquote><p>å…¶ä»–</p></blockquote><ul><li>é€‰æ‹© faviconï¼š<a href="http://www.easyicon.net/language.zh-cn/" target="_blank" rel="noopener">easyicon</a></li></ul><p><img src="/img/about-bg.jpg" alt="banner"></p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Hexo+Githubæ­å»ºè‡ªå·±çš„ä¸ªäººç½‘ç«™</title>
      <link href="/2018/04/08/hexo/"/>
      <url>/2018/04/08/hexo/</url>
      
        <content type="html"><![CDATA[<h3 id="Hexo-å®˜æ–¹æ–‡æ¡£"><a href="#Hexo-å®˜æ–¹æ–‡æ¡£" class="headerlink" title="Hexo å®˜æ–¹æ–‡æ¡£"></a><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo å®˜æ–¹æ–‡æ¡£</a></h3><a id="more"></a><blockquote><p><a href="https://www.jekyll.com.cn/" target="_blank" rel="noopener">å°†çº¯æ–‡æœ¬è½¬åŒ–ä¸ºé™æ€ç½‘ç«™å’Œåšå®¢æ¡†æ¶ï¼šjekyll</a></p></blockquote><h3 id="å‚è€ƒç½‘ç«™"><a href="#å‚è€ƒç½‘ç«™" class="headerlink" title="å‚è€ƒç½‘ç«™"></a>å‚è€ƒç½‘ç«™</h3><ul><li><a href="https://zoumiaojiang.com/article/how-to-build-a-blog/" target="_blank" rel="noopener">å¿«é€Ÿä½æˆæœ¬çš„æ­å»ºä¸€ä¸ªé©¬é©¬è™è™çš„åšå®¢</a></li><li><a href="https://huangxuan.me/" target="_blank" rel="noopener">Hux Blogä¸€ç”Ÿæƒ³åšæµªæ¼«æå®¢</a></li><li><a href="https://www.jianshu.com/p/b96fd206571a" target="_blank" rel="noopener">æ•™ä½ å®šåˆ¶Hexoçš„landscapeæ‰“é€ è‡ªå·±çš„ä¸»é¢˜</a></li><li><a href="http://www.codertian.com/2015/11/26/github-hexo-blog/" target="_blank" rel="noopener">ã€å®ç”¨æŠ€èƒ½ã€‘ä½¿ç”¨github+Hexoäººäººéƒ½èƒ½æ‹¥æœ‰ä¸€ä¸ªåšå®¢</a></li><li><a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">GitHub+Hexo æ­å»ºä¸ªäººç½‘ç«™è¯¦ç»†æ•™ç¨‹</a></li><li><a href="https://blog.csdn.net/guin_guo/article/details/51090481" target="_blank" rel="noopener">ä½¿ç”¨github page + hexo3.0 æ­å»ºä¸ªäººåšå®¢ï¼ŒåŠ ç»‘å®šåŸŸåã€‚</a></li><li>ã€å¾ˆè¯¦ç»†ã€‘<a href="https://www.cnblogs.com/visugar/p/6821777.html" target="_blank" rel="noopener">hexoä»é›¶å¼€å§‹åˆ°æ­å»ºå®Œæ•´</a></li></ul><h3 id="ä¸»é¢˜æ¨è"><a href="#ä¸»é¢˜æ¨è" class="headerlink" title="ä¸»é¢˜æ¨è"></a>ä¸»é¢˜æ¨è</h3><ul><li>åˆé›†ï¼š<a href="https://hexo.io/themes/" target="_blank" rel="noopener">Themes|Hexo</a> </li><li><a href="https://www.jianshu.com/p/bcdbe7347c8d" target="_blank" rel="noopener">Hexoåšå®¢ä¸»é¢˜æ¨è</a></li><li><a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">hexo-theme-yilia</a></li><li><a href="https://blog.csdn.net/u011026329/article/details/52939341" target="_blank" rel="noopener">Yelee â€”â€” ç®€è€Œä¸å‡ Hexo åŒæ åšå®¢ä¸»é¢˜</a></li><li><a href="https://material.viosey.com/docs/#/start" target="_blank" rel="noopener">Material Theme</a></li><li><a href="http://haojen.github.io/" target="_blank" rel="noopener">Haojen â€˜s Blog</a> <ul><li><a href="https://haojen.github.io/2017/05/09/Anisina-%E4%B8%AD%E6%96%87%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">Anisina ä¸­æ–‡ä½¿ç”¨æ•™ç¨‹</a></li></ul></li><li><a href="https://blog.daraw.cn/" target="_blank" rel="noopener">DaraW</a><ul><li><a href="https://github.com/CodeDaraW/Hacker" target="_blank" rel="noopener">Hacker</a></li></ul></li><li><a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank" rel="noopener">laughing</a></li><li><a href="http://www.ccblog.win/" target="_blank" rel="noopener">http://www.ccblog.win/</a></li><li><a href="https://github.com/CodeDaraW/Hacker" target="_blank" rel="noopener">Hacker</a></li><li>åŠ è½½é€Ÿåº¦å¿«åˆ—è¡¨é¡µï¼š<a href="http://blog.minfive.com/" target="_blank" rel="noopener">A simple &amp; beautiful &amp; fast theme for Hexo</a></li><li>åå‘Vueï¼š<a href="https://github.com/yanm1ng/hexo-theme-vexo" target="_blank" rel="noopener">Vexo</a></li><li>è®¾è®¡ç±»ï¼š<a href="https://github.com/miccall/hexo-theme-Mic_Theme" target="_blank" rel="noopener">Mic_Theme</a></li><li>é…·ç‚«ç±»ï¼š<ul><li><a href="https://github.com/ochukai/hexo-theme-ochuunn" target="_blank" rel="noopener">hexo-theme-ochuunn</a></li><li><a href="http://firework.studio/archer-demo/" target="_blank" rel="noopener">Archer</a></li></ul></li><li>æ‰å¹³åŒ–ç±»ï¼š<a href="http://blog.minfive.com/" target="_blank" rel="noopener">A simple &amp; beautiful &amp; fast theme for Hexo</a><ul><li><a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank" rel="noopener">hexo-theme-skapp</a></li></ul></li><li>ç®€æ´ã€æ˜äº†<ul><li><a href="https://github.com/Huxpro/huxpro.github.io" target="_blank" rel="noopener">hexo-theme-huxblog</a> </li><li><a href="http://gaoryrt.com/" target="_blank" rel="noopener">A plain theme for Hexo</a> â€” æ¯”è¾ƒä¸ªæ€§åŒ–</li><li><a href="https://blog.daraw.cn/" target="_blank" rel="noopener">DARAW</a></li><li><a href="https://mikecoder.github.io/oj-code/" target="_blank" rel="noopener">hexo-theme-gandalfr</a></li><li><a href="http://www.ahonn.me/" target="_blank" rel="noopener">Even</a></li></ul></li><li>å¡ç‰‡å¼ï¼š<a href="https://xaoxuu.com/wiki/material-x/" target="_blank" rel="noopener">Material X</a><h3 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h3></li><li><a href="http://moxfive.xyz/" target="_blank" rel="noopener">MOxFIVE</a> </li></ul><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><ul><li><a href="https://www.zhihu.com/question/52272170" target="_blank" rel="noopener">hexo+Github Pageæ­å»ºçš„åšå®¢æ— æ³•åŠ è½½æ ·å¼è¡¨ï¼Ÿ</a></li><li><a href="https://segmentfault.com/a/1190000007385345" target="_blank" rel="noopener">hexo githubpage åˆå§‹åŒ– å¹¶è§£å†³åŒæ­¥é™æ€é¡µé¢é—®é¢˜</a></li><li><a href="https://help.github.com/articles/changing-a-remote-s-url/" target="_blank" rel="noopener">Changing a remoteâ€™s URL</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹ä¹‹ç¬¬3ç« </title>
      <link href="/2018/04/08/js-chapter-3/"/>
      <url>/2018/04/08/js-chapter-3/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¬¬3ç« -JavaScriptçš„æ„å»ºå—"><a href="#ç¬¬3ç« -JavaScriptçš„æ„å»ºå—" class="headerlink" title="ç¬¬3ç«  JavaScriptçš„æ„å»ºå—"></a>ç¬¬3ç«  JavaScriptçš„æ„å»ºå—</h3><a id="more"></a><h4 id="3ç§åŸºæœ¬çš„åˆ›å»ºå‡½æ•°æ–¹å¼ï¼š"><a href="#3ç§åŸºæœ¬çš„åˆ›å»ºå‡½æ•°æ–¹å¼ï¼š" class="headerlink" title="3ç§åŸºæœ¬çš„åˆ›å»ºå‡½æ•°æ–¹å¼ï¼š"></a>3ç§åŸºæœ¬çš„åˆ›å»ºå‡½æ•°æ–¹å¼ï¼š</h4><ul><li>å£°æ˜å¼å‡½æ•°</li><li>åŒ¿åå‡½æ•°æˆ–å‡½æ•°æ„é€ å‡½æ•°</li><li>å‡½æ•°å­—é¢å€¼æˆ–å‡½æ•°è¡¨è¾¾å¼</li></ul><h4 id="3-1-æ”¾ç½®å‡½æ•°å¹¶æå‡"><a href="#3-1-æ”¾ç½®å‡½æ•°å¹¶æå‡" class="headerlink" title="3.1 æ”¾ç½®å‡½æ•°å¹¶æå‡"></a>3.1 æ”¾ç½®å‡½æ•°å¹¶æå‡</h4><ul><li>å£°æ˜å¼å‡½æ•°ï¼Œå¯ä»¥æ”¾ç½®åœ¨ä»£ç ä¸­çš„ä»»ä½•ä½ç½®ï¼›å‡½æ•°è¡¨è¾¾å¼ï¼Œå¿…é¡»å°†å…¶æ”¾ç½®åœ¨ä½¿ç”¨å‡½æ•°çš„ä½ç½®ä¹‹å‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å£°æ˜ä¸€ä¸ªå˜é‡ä¹‹å‰æ‰“å°a</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a'</span>, a);  <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="comment">// åœ¨å£°æ˜ä¸€ä¸ªå˜é‡å¹¶èµ‹å€¼</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'aa'</span>, aa);  <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> aa = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å˜é‡å‘ç”Ÿäº†æå‡ï¼Œä½†æ˜¯èµ‹å€¼å¹¶æ²¡æœ‰ï¼Œèµ‹å€¼æ˜¯åœ¨ç›¸åº”çš„ä½ç½®å‘ç”Ÿçš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¼å‡½æ•°ï¼Œåœ¨è®¿é—®è¯¥å‡½æ•°ä¹‹å‰ï¼Œæå‡å°†ç¡®ä¿æŠŠå‡½æ•°å£°æ˜ç§»åŠ¨åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨</span></span><br><span class="line"><span class="built_in">console</span>.log(mytest());  <span class="comment">//success</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mytest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">'success'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼å°±ä¼šæŠ¥é”™ï¼Œå˜é‡å¯èƒ½å£°æ˜äº†ï¼Œä½†æ²¡æœ‰å®ä¾‹åŒ–ï¼Œä½†æ˜¯ä½ çš„ä»£ç è¯•å›¾å°†è¿™ä¸ªå˜é‡å½“åšä¸€ä¸ªå‡½æ•°å¯¹å¾…</span></span><br><span class="line"><span class="built_in">console</span>.log(mytest2());  <span class="comment">//TypeError: mytest2 is not a function</span></span><br><span class="line"><span class="keyword">var</span> mytest2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">'success2'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-æŠŠä¸€ä¸ªå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°"><a href="#3-2-æŠŠä¸€ä¸ªå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°" class="headerlink" title="3.2 æŠŠä¸€ä¸ªå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°"></a>3.2 æŠŠä¸€ä¸ªå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">otherFunction</span>(<span class="params">x, y, z</span>) </span>&#123;</span><br><span class="line">x(y, z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯ä»¥åƒä¼ é€’ä¸€ä¸ªå‘½åçš„å˜é‡ä¸€æ ·ï¼Œå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> param = <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a1, a2</span>) </span>&#123; alert(a1 + <span class="string">" "</span> + a2); &#125;;</span><br><span class="line">otherFunction(param, <span class="string">"Hello"</span>, <span class="string">"World"</span>);</span><br></pre></td></tr></table></figure><ul><li>å‡½æ•°å¼ç¼–ç¨‹å’ŒJavaScript<ul><li><strong>é«˜é˜¶å‡½æ•°ï¼š</strong> ä¸€ä¸ªå‡½æ•°æ¥å—å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä¸¤è€…éƒ½å…·å¤‡</li><li><strong>å‡½æ•°å¼ç¼–ç¨‹ï¼š</strong> å¯¹åº”ç”¨ç¨‹åºå¤æ‚æ€§è¿›è¡ŒæŠ½è±¡çš„ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨æ•´é½ã€å¹²å‡€çš„å‡½æ•°è°ƒç”¨æ›¿ä»£äº†å¤æ‚çš„å¾ªç¯å’Œæ¡ä»¶è¯­å¥ï¼ˆä»£ç å¯è¯»æ€§é«˜ï¼‰</li><li>æ¯”å¦‚ï¼šå°†æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—ç›¸åŠ </li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forå¾ªç¯ç›¸åŠ </span></span><br><span class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">34</span>, <span class="number">3</span>, <span class="number">15</span>, <span class="number">4</span>, <span class="number">18</span>];</span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">sum += nums[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'sum'</span>, sum);  <span class="comment">//75</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nums2 = [<span class="number">1</span>, <span class="number">34</span>, <span class="number">3</span>, <span class="number">15</span>, <span class="number">4</span>, <span class="number">18</span>];</span><br><span class="line"><span class="keyword">var</span> sum2 = nums2.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">n1, n2</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> n1 + n2;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'sum2'</span>, sum2);  <span class="comment">//75</span></span><br></pre></td></tr></table></figure><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce_clone" target="_blank" rel="noopener">arr.reduce([callback, initialValue])</a> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆä¸ºä¸€ä¸ªå€¼ã€‚</li></ul><h4 id="3-3-å®ç°é€’å½’ç®—æ³•"><a href="#3-3-å®ç°é€’å½’ç®—æ³•" class="headerlink" title="3.3 å®ç°é€’å½’ç®—æ³•"></a>3.3 å®ç°é€’å½’ç®—æ³•</h4><ul><li>æƒ³è¦å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒé€’å½’åœ°éå†ä¸€ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªåå‘çš„æ•°ç»„å­—ç¬¦ä¸²</li><li>ç¼ºç‚¹ï¼šé€’å½’å¾ˆæ¶ˆè€—å†…å­˜</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜¶ä¹˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> n == <span class="number">1</span> ? n : n * factorial(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'é˜¶ä¹˜'</span>, factorial(<span class="number">4</span>));  <span class="comment">// 24</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–æ³¢é‚£å¥‘</span></span><br><span class="line"><span class="keyword">var</span> fibonacci = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> n &lt; <span class="number">2</span> ? n : fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æ–æ³¢é‚£å¥‘'</span>, fibonacci(<span class="number">10</span>));  <span class="comment">//55</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ä¸€ä¸ªé€’å½’å‡½æ•°å­—é¢å€¼æ¥åè½¬æ•°ç»„å…ƒç´ ï¼Œä»æœ€å¤§é•¿åº¦å¼€å§‹ï¼Œæ¯æ¬¡è¿­ä»£éƒ½å°†è¿™ä¸ªå€¼è‡ªå‡</span></span><br><span class="line"><span class="comment">// å½“ä¸º 0 æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> reverseArrary = <span class="function"><span class="keyword">function</span>(<span class="params">x, index, str</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> index == <span class="number">0</span> ? str : reverseArrary(x, --index, (str += <span class="string">" "</span> + x[index]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'apple'</span>, <span class="string">'orange'</span>, <span class="string">'peach'</span>, <span class="string">'lime'</span>];</span><br><span class="line"><span class="keyword">var</span> str = reverseArrary(arr, arr.length, <span class="string">""</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str'</span>, str);  <span class="comment">//lime peach orange apple</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦åè¿‡æ¥ï¼ŒæŒ‰ç…§é¡ºåºæŠŠæ•°ç»„è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> orderArray = <span class="function"><span class="keyword">function</span>(<span class="params">x, i, str</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> i == x.length - <span class="number">1</span> ? str : orderArray(x, ++i, (str += x[i] + <span class="string">" "</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> numStr = orderArray(numArr, <span class="number">-1</span>, <span class="string">""</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'numStr'</span>, numStr);  <span class="comment">//1 2 3 4</span></span><br></pre></td></tr></table></figure><h4 id="3-4-ä½¿ç”¨ä¸€ä¸ªå®šæ—¶å™¨å’Œå›è°ƒé˜²æ­¢ä»£ç é˜»å¡"><a href="#3-4-ä½¿ç”¨ä¸€ä¸ªå®šæ—¶å™¨å’Œå›è°ƒé˜²æ­¢ä»£ç é˜»å¡" class="headerlink" title="3.4 ä½¿ç”¨ä¸€ä¸ªå®šæ—¶å™¨å’Œå›è°ƒé˜²æ­¢ä»£ç é˜»å¡"></a>3.4 ä½¿ç”¨ä¸€ä¸ªå®šæ—¶å™¨å’Œå›è°ƒé˜²æ­¢ä»£ç é˜»å¡</h4><ul><li>åœ¨ç¨‹åºçš„è¾“å‡ºä¸­ï¼Œ3ä¸ªå¤–å›´çš„ <code>console.log()</code> ç«‹å³è¢«å¤„ç†äº†</li><li>é˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªäº‹ä»¶æ˜¯ç¬¬ä¸€ä¸ª <code>noBlock()</code> å‡½æ•°è°ƒç”¨ï¼Œå…¶ä¸­åˆè°ƒç”¨äº† <code>factorial()</code> ï¼Œè®°å½•äº†å…¶è¿è¡Œæ—¶å€™çš„æ´»åŠ¨ï¼Œæœ€åè·Ÿç€å›è°ƒå‡½æ•°çš„è°ƒç”¨</li><li>ç¬¬äºŒæ¬¡åŒæ ·åœ°è°ƒç”¨äº† <code>callBack()</code></li><li>ç¬¬ä¸‰æ¬¡è°ƒç”¨ <code>callBack()</code> çš„æ—¶å€™ï¼Œå›è°ƒå‡½æ•°ä¸­çš„è°ƒç”¨é’ˆå¯¹ç¬¬ä¸€æ¬¡ <code>callBack()</code> ï¼Œå¹¶ä½¿ç”¨äº†ç¬¬ä¸€æ¬¡å‡½æ•°è°ƒç”¨çš„æœ€ç»ˆç»“æœï¼š6</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'n'</span>, n);</span><br><span class="line"><span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1</span> : n * factorial(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">noBlock</span>(<span class="params">n, callback</span>) </span>&#123;</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> val = factorial(n);</span><br><span class="line"><span class="keyword">if</span>(callback &amp;&amp; <span class="keyword">typeof</span> callback == <span class="string">'function'</span>) &#123;</span><br><span class="line">callback(val);</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Top of the morning to you'</span>);</span><br><span class="line">noBlock(<span class="number">3</span>, <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'first call ends width '</span> + n);</span><br><span class="line">noBlock(n, <span class="function"><span class="keyword">function</span>(<span class="params">m</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'final result is '</span> + m);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tst = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">tst += i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'value of tst is '</span> + tst);</span><br><span class="line">noBlock(<span class="number">4</span>, <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end result is '</span> + n);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'not doing too much'</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>å¾…ç»­~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> JavaScriptç»å…¸å®ä¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹ä¹‹ç¬¬2ç« </title>
      <link href="/2018/04/08/js-chapter-2/"/>
      <url>/2018/04/08/js-chapter-2/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¬¬2ç« -JavaScriptæ•°ç»„"><a href="#ç¬¬2ç« -JavaScriptæ•°ç»„" class="headerlink" title="ç¬¬2ç«  JavaScriptæ•°ç»„"></a>ç¬¬2ç«  JavaScriptæ•°ç»„</h3><a id="more"></a><h4 id="2-1-åœ¨æ•°ç»„ä¸­æœç´¢"><a href="#2-1-åœ¨æ•°ç»„ä¸­æœç´¢" class="headerlink" title="2.1 åœ¨æ•°ç»„ä¸­æœç´¢"></a>2.1 åœ¨æ•°ç»„ä¸­æœç´¢</h4><ul><li><code>indexOf()ã€lastIndexOf()</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animals = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'seal'</span>, <span class="string">'elephant'</span>, <span class="string">'walrus'</span>, <span class="string">'lion'</span>);</span><br><span class="line"><span class="keyword">var</span> index = animals.indexOf(<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">var</span> index2 = animals.lastIndexOf(<span class="string">'lion'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'i'</span>,index);  <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'i2'</span>,index2);  <span class="comment">//5</span></span><br></pre></td></tr></table></figure><ul><li><a href="http://www.runoob.com/jsref/jsref-findindex.html" target="_blank" rel="noopener">findIndex()</a> æ–¹æ³•è¿”å›ä¼ å…¥ä¸€ä¸ªæµ‹è¯•æ¡ä»¶ï¼ˆå‡½æ•°ï¼‰ç¬¦åˆæ¡ä»¶çš„æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nums = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">199</span>, <span class="number">80</span>, <span class="number">400</span>, <span class="number">30</span>, <span class="number">90</span>];</span><br><span class="line"><span class="keyword">var</span> over = nums.findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> (ele &gt;= <span class="number">100</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'nums'</span>,nums[over]);  <span class="comment">//199</span></span><br></pre></td></tr></table></figure><h4 id="2-2-ç”¨concat-å’Œapply-å°†ä¸€ä¸ªäºŒç»´æ•°ç»„æ‰å¹³åŒ–"><a href="#2-2-ç”¨concat-å’Œapply-å°†ä¸€ä¸ªäºŒç»´æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="2.2 ç”¨concat()å’Œapply()å°†ä¸€ä¸ªäºŒç»´æ•°ç»„æ‰å¹³åŒ–"></a>2.2 ç”¨concat()å’Œapply()å°†ä¸€ä¸ªäºŒç»´æ•°ç»„æ‰å¹³åŒ–</h4><ul><li>concat() æ–¹æ³•ç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜ç°æœ‰çš„æ•°ç»„ï¼Œè€Œä»…ä»…ä¼šè¿”å›è¢«è¿æ¥æ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬ã€‚<ul><li><code>arrayObject.concat(arrayX,arrayX,......,arrayX)</code></li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruitarray = [];</span><br><span class="line">fruitarray[<span class="number">0</span>] = [<span class="string">'stranwberry'</span>, <span class="string">'orange'</span>];</span><br><span class="line">fruitarray[<span class="number">1</span>] = [<span class="string">'lime'</span>, <span class="string">'peach'</span>, <span class="string">'banana'</span>];</span><br><span class="line">fruitarray[<span class="number">2</span>] = [<span class="string">'tangerine'</span>, <span class="string">'apricot'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'array'</span>,fruitarray.concat());</span><br><span class="line"><span class="keyword">var</span> newArray = fruitarray.concat.apply([], fruitarray);</span><br><span class="line"><span class="built_in">console</span>.log(newArray);</span><br></pre></td></tr></table></figure><ul><li><a href="http://www.cnblogs.com/lengyuehuahun/p/5643625.html" target="_blank" rel="noopener">apply()ä¸call()çš„åŒºåˆ«</a></li><li><a href="https://www.zhihu.com/question/20289071" target="_blank" rel="noopener">å¦‚ä½•ç†è§£å’Œç†Ÿç»ƒè¿ç”¨jsä¸­çš„callåŠapplyï¼Ÿ</a><ul><li><code>obj.call(thisObj, arg1, arg2, ...);</code></li><li><code>obj.apply(thisObj, [arg1, arg2, ...]);</code></li></ul></li><li>call() &amp; apply()ï¼ŒåŠ¨æ€æ”¹å˜this</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'add'</span>, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'sum'</span>, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>);  <span class="comment">//Window</span></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>);  <span class="comment">//Window</span></span><br><span class="line"></span><br><span class="line">add.call(sum, <span class="number">1</span>, <span class="number">2</span>);  <span class="comment">//sum(a, b)</span></span><br><span class="line">sum.call(add, <span class="number">1</span>, <span class="number">2</span>);  <span class="comment">//add(a ,b)</span></span><br></pre></td></tr></table></figure><ul><li>argumentsè£…æ¢ä¸ºæ•°ç»„, è¿”å›çš„æ˜¯æ•°ç»„ï¼Œä½†æ˜¯argumentsæœ¬èº«ä¿æŒä¸å˜</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arg = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line"><span class="comment">// [].slice.call(document.getElementsByTagName('li'));</span></span><br></pre></td></tr></table></figure><ul><li>å€Ÿç”¨åˆ«äººçš„æ–¹æ³•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">name: <span class="string">'jack'</span>,</span><br><span class="line">showName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'this name:'</span>,<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = &#123;</span><br><span class="line">name: <span class="string">'rose'</span></span><br><span class="line">&#125;</span><br><span class="line">foo.showName();  <span class="comment">//jack</span></span><br><span class="line">foo.showName.call(bar);  <span class="comment">//rose</span></span><br></pre></td></tr></table></figure><ul><li>å®ç°ç»§æ‰¿</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Student = <span class="function"><span class="keyword">function</span>(<span class="params">name, age, high</span>) </span>&#123;</span><br><span class="line">Person.call(<span class="keyword">this</span>, name, age);</span><br><span class="line"><span class="keyword">this</span>.high = high;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å°è£…å¯¹è±¡ä¿è¯thisçš„æŒ‡å‘</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">_this.$box.on(<span class="string">'mousedown'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> _this.fndown.apply(_this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-åˆ é™¤æˆ–æ›¿æ¢æ•°ç»„å…ƒç´ "><a href="#2-3-åˆ é™¤æˆ–æ›¿æ¢æ•°ç»„å…ƒç´ " class="headerlink" title="2.3 åˆ é™¤æˆ–æ›¿æ¢æ•°ç»„å…ƒç´ "></a>2.3 åˆ é™¤æˆ–æ›¿æ¢æ•°ç»„å…ƒç´ </h4><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice" target="_blank" rel="noopener">splice()</a> æ–¹æ³•ä¸ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">slice()</a> æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œsplice() æ–¹æ³•ä¼šç›´æ¥å¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animals = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'rabbit'</span>, <span class="string">'pig'</span>, <span class="string">'apple'</span>);</span><br><span class="line"><span class="comment">// ä»æ•°ç»„åˆ é™¤å…ƒç´ </span></span><br><span class="line">animals.splice(animals.indexOf(<span class="string">'apple'</span>), <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(animals);  <span class="comment">// ["dog", "cat", "rabbit", "pig"]</span></span><br><span class="line"><span class="comment">// æ›¿æ¢</span></span><br><span class="line">animals.splice(animals.indexOf(<span class="string">'pig'</span>), <span class="number">1</span>, <span class="string">'monkey'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(animals);  <span class="comment">//["dog", "cat", "rabbit", "monkey"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å¾ªç¯å’Œåˆ†å‰²æ¥æ›¿æ¢å’Œåˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> charSets = [<span class="string">"ab"</span>, <span class="string">"bb"</span>, <span class="string">"cd"</span>, <span class="string">"ab"</span>, <span class="string">"cc"</span>, <span class="string">"ab"</span>, <span class="string">"dd"</span>, <span class="string">"ab"</span>];</span><br><span class="line"><span class="keyword">while</span>(charSets.indexOf(<span class="string">'ab'</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">charSets.splice(charSets.indexOf(<span class="string">'ab'</span>), <span class="number">1</span>, <span class="string">'**'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(charSets);  <span class="comment">//["**", "bb", "cd", "**", "cc", "**", "dd", "**"]</span></span><br><span class="line"><span class="keyword">while</span>(charSets.indexOf(<span class="string">'**'</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">charSets.splice(charSets.indexOf(<span class="string">'**'</span>), <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(charSets); <span class="comment">//["bb", "cd", "cc", "dd"]</span></span><br></pre></td></tr></table></figure><h4 id="2-4-æå–ä¸€ä¸ªæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†"><a href="#2-4-æå–ä¸€ä¸ªæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†" class="headerlink" title="2.4 æå–ä¸€ä¸ªæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†"></a>2.4 æå–ä¸€ä¸ªæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†</h4><ul><li>ä¸æ›´æ”¹åŸæ•°ç»„ï¼Œä½¿ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">slice()</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animals = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'rabbit'</span>, <span class="string">'pig'</span>, <span class="string">'apple'</span>);</span><br><span class="line"><span class="keyword">var</span> newAnimals = animals.slice(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(animals);  <span class="comment">//["dog", "cat", "rabbit", "pig", "apple"]</span></span><br><span class="line"><span class="built_in">console</span>.log(newAnimals);  <span class="comment">//["cat"]</span></span><br></pre></td></tr></table></figure><h4 id="2-5-å¯¹æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°"><a href="#2-5-å¯¹æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°" class="headerlink" title="2.5 å¯¹æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°"></a>2.5 å¯¹æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°</h4><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/forEach" target="_blank" rel="noopener">Array.prototype.forEach()</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> charSets = [<span class="string">"ab"</span>, <span class="string">"bb"</span>, <span class="string">"cd"</span>, <span class="string">"ab"</span>, <span class="string">"cc"</span>, <span class="string">"ab"</span>, <span class="string">"dd"</span>, <span class="string">"ab"</span>];</span><br><span class="line">charSets.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(element == <span class="string">'ab'</span>) array[index] = <span class="string">'**'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(charSets);  <span class="comment">//["**", "bb", "cd", "**", "cc", "**", "dd", "**"]</span></span><br></pre></td></tr></table></figure><h4 id="2-6-ä½¿ç”¨forEach-å’Œcall-éå†querySelectorAll-çš„ç»“æœ"><a href="#2-6-ä½¿ç”¨forEach-å’Œcall-éå†querySelectorAll-çš„ç»“æœ" class="headerlink" title="2.6 ä½¿ç”¨forEach()å’Œcall()éå†querySelectorAll()çš„ç»“æœ"></a>2.6 ä½¿ç”¨forEach()å’Œcall()éå†querySelectorAll()çš„ç»“æœ</h4><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/querySelectorAll" target="_blank" rel="noopener">querySelectorAll()</a></li><li>å¯ä»¥å°†forEach()å¼ºåˆ¶å’Œä¸€ä¸ªNodeListä¸€èµ·ä½¿ç”¨</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cells = <span class="built_in">document</span>.querySelectorAll(<span class="string">'td + td'</span>);</span><br><span class="line">[].forEach.call(cells, <span class="function"><span class="keyword">function</span>(<span class="params">cell</span>) </span>&#123;</span><br><span class="line">sum += <span class="built_in">parseFloat</span>(cell.firstChild.data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="2-7-å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„"><a href="#2-7-å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„" class="headerlink" title="2.7 å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„"></a>2.7 å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</h4><ul><li>å°†ä¸€ä¸ªåè¿›åˆ¶çš„æ•°ç»„è½¬åŒ–ä¸ºæ–°çš„ç­‰ä»·çš„åå…­è¿›åˆ¶æ•°ç»„</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener">map()</a>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚</li><li>ä¸forEach()ä¸åŒï¼Œä¸ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œä½†æ˜¯å¿…é¡»è¿”å›ä¸€ä¸ªå€¼</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> decArray = [<span class="number">23</span>, <span class="number">3</span>, <span class="number">24</span>, <span class="number">45</span>, <span class="number">500</span>, <span class="number">9</span>, <span class="number">70</span>];</span><br><span class="line"><span class="keyword">var</span> hexArray = decArray.map(<span class="function"><span class="keyword">function</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> ele.toString(<span class="number">16</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(decArray);  <span class="comment">//[23, 3, 24, 45, 500, 9, 70]</span></span><br><span class="line"><span class="built_in">console</span>.log(hexArray);  <span class="comment">//["17", "3", "18", "2d", "1f4", "9", "46"]</span></span><br></pre></td></tr></table></figure><h4 id="2-8-åˆ›å»ºä¸€ä¸ªè¿‡æ»¤åçš„æ•°ç»„"><a href="#2-8-åˆ›å»ºä¸€ä¸ªè¿‡æ»¤åçš„æ•°ç»„" class="headerlink" title="2.8 åˆ›å»ºä¸€ä¸ªè¿‡æ»¤åçš„æ•°ç»„"></a>2.8 åˆ›å»ºä¸€ä¸ªè¿‡æ»¤åçš„æ•°ç»„</h4><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener">filter()</a> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚ </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> charSet = [<span class="string">'**'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>, <span class="string">'**'</span>, <span class="string">'cd'</span>];</span><br><span class="line"><span class="keyword">var</span> newArray = charSet.filter(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> element != <span class="string">"**"</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newArray);  <span class="comment">//["bb", "cc", "cd"]</span></span><br></pre></td></tr></table></figure><h4 id="2-9-éªŒè¯æ•°ç»„å†…å®¹"><a href="#2-9-éªŒè¯æ•°ç»„å†…å®¹" class="headerlink" title="2.9 éªŒè¯æ•°ç»„å†…å®¹"></a>2.9 éªŒè¯æ•°ç»„å†…å®¹</h4><ul><li>ä½¿ç”¨Array <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every" target="_blank" rel="noopener">every()</a>æ–¹æ³•æ¥æ£€æŸ¥æ¯ä¸ªå…ƒç´ æ˜¯å¦ç¬¦åˆç»™å®šçš„æ¡ä»¶</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some" target="_blank" rel="noopener">some()</a> æ–¹æ³•ç¡®ä¿è‡³å°‘æŸäº›å…ƒç´ ç¬¦åˆè¯¥æ¡ä»¶</li><li>åŒºåˆ«ï¼ševery()æ–¹æ³•åªè¦å‡½æ•°è¿”å›ä¸€ä¸ªfalseå€¼ï¼Œå¤„ç†å°±ä¼šç»“æŸï¼Œè€Œsome()æ–¹æ³•ä¼šç»§ç»­æµ‹è¯•æ¯ä¸ªå…ƒç´ ï¼Œç›´è‡³è¿”å›trueï¼Œæ­¤æ—¶ï¼Œä¸å†éªŒè¯å…¶ä»–å…ƒç´ ï¼Œå³å¯è¿”å›ture</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testValue</span>(<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> testExp = <span class="regexp">/^[a-zA-Z]+$/</span>;</span><br><span class="line"><span class="keyword">return</span> testExp.test(element);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> elemSet = [<span class="string">'**'</span>, <span class="number">123</span>, <span class="string">'adv'</span>, <span class="string">'-'</span>, <span class="number">45</span>, <span class="string">'AAA'</span>];</span><br><span class="line"><span class="keyword">var</span> result = elemSet.every(testValue);</span><br><span class="line"><span class="keyword">var</span> result2 = elemSet.some(testValue);</span><br><span class="line"><span class="built_in">console</span>.log(result);  <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(result2);  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> elemSet2 = [<span class="string">'aaa'</span>, <span class="string">'animals'</span>, <span class="string">'vvv'</span>];</span><br><span class="line">result = elemSet2.every(testValue);</span><br><span class="line">result2 = elemSet2.some(testValue);</span><br><span class="line"><span class="built_in">console</span>.log(result);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(result2);  <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h4 id="2-10-ä½¿ç”¨ä¸€ä¸ªå…³è”æ•°ç»„æ¥å­˜å‚¨è¡¨å•å…ƒç´ åå’Œå€¼"><a href="#2-10-ä½¿ç”¨ä¸€ä¸ªå…³è”æ•°ç»„æ¥å­˜å‚¨è¡¨å•å…ƒç´ åå’Œå€¼" class="headerlink" title="2.10 ä½¿ç”¨ä¸€ä¸ªå…³è”æ•°ç»„æ¥å­˜å‚¨è¡¨å•å…ƒç´ åå’Œå€¼"></a>2.10 ä½¿ç”¨ä¸€ä¸ªå…³è”æ•°ç»„æ¥å­˜å‚¨è¡¨å•å…ƒç´ åå’Œå€¼</h4><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/keys" target="_blank" rel="noopener">keys()</a> æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Arrayè¿­ä»£å™¨ï¼Œå®ƒåŒ…å«æ•°ç»„ä¸­æ¯ä¸ªç´¢å¼•çš„é”®ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elemArray = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> elem = <span class="built_in">document</span>.forms[<span class="number">0</span>].elements[<span class="number">0</span>];</span><br><span class="line">elemArray[elem.id] = elem.value;</span><br><span class="line"><span class="keyword">var</span> elemArray = &#123;<span class="attr">name</span>: <span class="string">'yt'</span>, <span class="attr">age</span>:<span class="number">25</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(elemArray).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> value = elemArray[key];</span><br><span class="line"><span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>å¾…ç»­~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> JavaScriptç»å…¸å®ä¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹ä¹‹ç¬¬1ç« </title>
      <link href="/2018/04/08/js-chapter-1/"/>
      <url>/2018/04/08/js-chapter-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹å„èŠ‚ä¸­çš„å®Œæ•´ä»£ç è§£å†³äº†å¸¸è§çš„ç¼–ç¨‹é—®é¢˜ï¼Œå¹¶ä¸”ç»™å‡ºäº†åœ¨ä»»ä½•æµè§ˆå™¨ä¸­æ„å»ºWebåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚åªéœ€è¦å°†è¿™äº›ä»£ç ç¤ºä¾‹å¤åˆ¶å¹¶ç²˜è´´åˆ°ä½ è‡ªå·±çš„é¡¹ç›®ä¸­å°±è¡Œäº†ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆå·¥ä½œï¼Œå¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦ä¹ JavaScriptçš„å¾ˆå¤šçŸ¥è¯†ã€‚</p></blockquote><h3 id="ç¬¬1ç« -JavaScriptä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—"><a href="#ç¬¬1ç« -JavaScriptä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—" class="headerlink" title="ç¬¬1ç«  JavaScriptä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—"></a>ç¬¬1ç«  JavaScriptä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—</h3><h4 id="1-1-JavaScriptå¯¹è±¡ã€åŸºæœ¬ç±»å‹å’Œå­—é¢å€¼ä¹‹é—´çš„åŒºåˆ«"><a href="#1-1-JavaScriptå¯¹è±¡ã€åŸºæœ¬ç±»å‹å’Œå­—é¢å€¼ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="1.1 JavaScriptå¯¹è±¡ã€åŸºæœ¬ç±»å‹å’Œå­—é¢å€¼ä¹‹é—´çš„åŒºåˆ«"></a>1.1 JavaScriptå¯¹è±¡ã€åŸºæœ¬ç±»å‹å’Œå­—é¢å€¼ä¹‹é—´çš„åŒºåˆ«</h4><ul><li><p>5ç§åŸºæœ¬ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”å€¼ã€nullã€undefinedï¼Œæœ‰3ä¸ªæœ‰å¯¹åº”çš„æ„é€ æ–¹æ³•å¯¹è±¡:stringã€Numberã€Boolean </p></li><li><p>åŸºæœ¬ç±»å‹å˜é‡ä¸¥æ ¼ç­‰äºå­—é¢å€¼ï¼Œè€Œå¯¹è±¡å®ä¾‹åˆ™ä¸ä¼šï¼Œå› ä¸ºåŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼æ¥æ¯”è¾ƒçš„ï¼Œè€Œå€¼æ˜¯å­—é¢å€¼</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> num2 = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num1);  <span class="comment">//number </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num2);  <span class="comment">//object</span></span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="1-2-ä»å­—ç¬¦ä¸²æå–ä¸€ä¸ªåˆ—è¡¨"><a href="#1-2-ä»å­—ç¬¦ä¸²æå–ä¸€ä¸ªåˆ—è¡¨" class="headerlink" title="1.2 ä»å­—ç¬¦ä¸²æå–ä¸€ä¸ªåˆ—è¡¨"></a>1.2 ä»å­—ç¬¦ä¸²æå–ä¸€ä¸ªåˆ—è¡¨</h4><ul><li>æå–ä¹‹å‰ï¼š<code>This is a list of items: cherries, limes, oranges, apples.</code></li><li>æå–ä¹‹åï¼š<code>[&#39;cherries&#39;,&#39;limes&#39;,&#39;oranges&#39;,&#39;apples&#39;]</code></li><li><strong><a href="http://www.w3school.com.cn/jsref/jsref_indexOf.asp" target="_blank" rel="noopener">indexOf()</a></strong> æ–¹æ³•å¯è¿”å›æŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚</li><li><strong><a href="http://www.w3school.com.cn/jsref/jsref_substring.asp" target="_blank" rel="noopener">substring()</a></strong> æ–¹æ³•ç”¨äºæå–å­—ç¬¦ä¸²ä¸­ä»‹äºä¸¤ä¸ªæŒ‡å®šä¸‹æ ‡ä¹‹é—´çš„å­—ç¬¦ã€‚</li><li><strong><a href="http://www.w3school.com.cn/jsref/jsref_split.asp" target="_blank" rel="noopener">split()</a></strong> æ–¹æ³•ç”¨äºæŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sentence = <span class="string">'This is one sentence. This is a sentence with a list of items: cherries, oranges, apples, bananas. That was the list of items.'</span>;</span><br><span class="line"><span class="keyword">var</span> start = sentence.indexOf(<span class="string">':'</span>);</span><br><span class="line"><span class="keyword">var</span> end = sentence.indexOf(<span class="string">'.'</span>, start+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> listStr = sentence.substring(start+<span class="number">1</span>, end);</span><br><span class="line"><span class="keyword">var</span> fruits = listStr.split(<span class="string">','</span>);</span><br><span class="line"><span class="built_in">console</span>.log(fruits);  <span class="comment">//[" cherries", " oranges", " apples", " bananas"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å–å‡ºç©ºæ ¼ç­‰</span></span><br><span class="line">fruits.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">elmnt,indx,arry</span>) </span>&#123;</span><br><span class="line">    arry[indx] = elmnt.trim();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(fruits);  <span class="comment">//["cherries", "oranges", "apples", "bananas"]</span></span><br></pre></td></tr></table></figure><h4 id="1-3-æ£€æŸ¥ä¸€ä¸ªå­˜åœ¨çš„ã€éç©ºçš„å­—ç¬¦ä¸²"><a href="#1-3-æ£€æŸ¥ä¸€ä¸ªå­˜åœ¨çš„ã€éç©ºçš„å­—ç¬¦ä¸²" class="headerlink" title="1.3 æ£€æŸ¥ä¸€ä¸ªå­˜åœ¨çš„ã€éç©ºçš„å­—ç¬¦ä¸²"></a>1.3 æ£€æŸ¥ä¸€ä¸ªå­˜åœ¨çš„ã€éç©ºçš„å­—ç¬¦ä¸²</h4><ul><li>æƒ³è¦éªŒè¯ä¸€ä¸ªå˜é‡å·²ç»å®šä¹‰äº†ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å®ƒä¸ä¸ºç©º</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> unknowVariable === <span class="string">'string'</span> &amp;&amp; unknowVariable.length &gt; <span class="number">0</span>) &#123;...&#125;</span><br></pre></td></tr></table></figure><h4 id="1-4-æ’å…¥ç‰¹æ®Šå­—ç¬¦"><a href="#1-4-æ’å…¥ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="1.4 æ’å…¥ç‰¹æ®Šå­—ç¬¦"></a>1.4 æ’å…¥ç‰¹æ®Šå­—ç¬¦</h4><ul><li>æƒ³è¦å‘å­—ç¬¦ä¸²ä¸­æ’å…¥ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¢è¡Œ</li><li>è½¬ä¹‰åºåˆ—éƒ½ä»¥ä¸€ä¸ª<em>åæ–œæ </em> å¼€å§‹ï¼ˆ\ï¼‰</li></ul><h4 id="1-5-ä½¿ç”¨æ–°å­—ç¬¦ä¸²æ›¿æ¢æ¨¡å¼"><a href="#1-5-ä½¿ç”¨æ–°å­—ç¬¦ä¸²æ›¿æ¢æ¨¡å¼" class="headerlink" title="1.5 ä½¿ç”¨æ–°å­—ç¬¦ä¸²æ›¿æ¢æ¨¡å¼"></a>1.5 ä½¿ç”¨æ–°å­—ç¬¦ä¸²æ›¿æ¢æ¨¡å¼</h4><ul><li>ä½¿ç”¨Stringå¯¹è±¡çš„replaceæ–¹æ³•å’Œä¸€ä¸ª <strong><a href="http://www.runoob.com/js/js-regexp.html" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼</a></strong></li><li><strong><a href="http://www.w3school.com.cn/jsref/jsref_replace.asp" target="_blank" rel="noopener">replace()</a></strong> æ–¹æ³•ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œæˆ–æ›¿æ¢ä¸€ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚</li></ul><h4 id="æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦"><a href="#æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦"></a>æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦</h4><table><thead><tr><th>å­—ç¬¦</th><th>åŒ¹é…</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>^</td><td>åŒ¹é…è¾“å…¥çš„å¼€å¤´</td><td>/^This/ åŒ¹é…This isâ€¦</td></tr><tr><td>$</td><td>åŒ¹é…è¾“å…¥çš„ç»“æŸ</td><td>/end$/ åŒ¹é…This is the end</td></tr><tr><td>*</td><td>åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡</td><td>/se*/ åŒ¹é…s seeeeæˆ–se</td></tr><tr><td>?</td><td>åŒ¹é…0æ¬¡æˆ–1æ¬¡</td><td>/ap?/ åŒ¹é…apple and and</td></tr><tr><td>+</td><td>åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡</td><td>/ap+/ åŒ¹é…apple ä½†æ˜¯ä¸åŒ¹é…and</td></tr><tr><td>{n}</td><td>ä¸¥æ ¼åŒ¹é…næ¬¡</td><td>/ap{2}/ ä¸¥æ ¼åŒ¹é…apple ä½†æ˜¯ä¸åŒ¹é…apie</td></tr><tr><td>{n,}</td><td>åŒ¹é…næ¬¡æˆ–å¤šæ¬¡</td><td>/ap{2,}/ åŒ¹é…appleä¸­çš„pï¼Œä½†æ˜¯ä¸åŒ¹é…apieä¸­çš„p</td></tr><tr><td>{n,m}</td><td>è‡³å°‘åŒ¹é…næ¬¡ï¼Œä¹‹å¤šåŒ¹é…m<br>é™¤æ¢è¡Œä»¥å¤–çš„ä»»ä½•å­—ç¬¦</td><td>/ap{2,4}/ åŒ¹é…appppppleä¸­çš„4ä¸ªp<br>/a.e/ åŒ¹é…apeå’Œaxe</td></tr><tr><td>[â€¦]</td><td>æ–¹æ‹¬å·ä¸­çš„ä»»ä½•å­—ç¬¦</td><td>/a[px]e/ åŒ¹é…ape axe ä½†æ˜¯ä¸åŒ¹é…apxe</td></tr><tr><td>[^â€¦]</td><td>é™¤äº†æ–¹æ‹¬å·ä»¥å¤–çš„ä»»ä½•å­—ç¬¦</td><td>/a[^px]/ åŒ¹é…ale ä½†æ˜¯ä¸åŒ¹é…ape axe</td></tr><tr><td>\b</td><td>åŒ¹é…å•è¯è¾¹ç•Œ</td><td>/\bno/ åŒ¹é…nonoä¸­çš„ç¬¬ä¸€ä¸ªno</td></tr><tr><td>\B</td><td>åŒ¹é…éå•è¯è¾¹ç•Œ</td><td>/\Bno/ åŒ¹é…nonoä¸­çš„ç¬¬äºŒä¸ªno</td></tr><tr><td>\d</td><td>æ•°å­—0åˆ°9</td><td>/\d{3}/ åŒ¹é…Now in 123 ä¸­çš„123</td></tr><tr><td>\D</td><td>åŒ¹é…ä»»ä½•éæ•°å­—å­—ç¬¦</td><td>/\D{2,4}/ åŒ¹é…Now in 123 ä¸­çš„Now in</td></tr><tr><td>\w</td><td>åŒ¹é…ä»»ä½•å•è¯å­—ç¬¦ï¼ˆå­—æ¯ã€æ•°ç»„å’Œä¸‹åˆ’çº¿</td><td>/\w/ åŒ¹é…javaScriptä¸­çš„j</td></tr><tr><td>\W</td><td>åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ï¼ˆéå­—æ¯ã€æ•°ç»„å’Œä¸‹åˆ’çº¿ï¼‰</td><td>/\W/ åŒ¹é…100%ä¸­çš„%</td></tr><tr><td>\n</td><td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œ</td><td></td></tr><tr><td>\s</td><td>ä¸€ä¸ªå•ä¸ªçš„ç©ºç™½å­—ç¬¦</td><td></td></tr><tr><td>\S</td><td>ä¸€ä¸ªå•ä¸ªçš„éç©ºç™½å­—ç¬¦</td><td></td></tr><tr><td>\t</td><td>ä¸€ä¸ªåˆ¶è¡¨ç¬¦</td><td></td></tr><tr><td>(x)</td><td>æ•è·æ‹¬å·</td><td>è®°ä½åŒ¹é…çš„å­—ç¬¦</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> searchString = <span class="string">"Now is the time, this is the tame"</span>;</span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/t\w&#123;2&#125;e/g</span>;</span><br><span class="line"><span class="keyword">var</span> replacement = searchString.replace(re, <span class="string">'place'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(replacement);  <span class="comment">//Now is the place, this is the place</span></span><br></pre></td></tr></table></figure><h4 id="1-6-æ‰¾åˆ°å¹¶çªå‡ºæ˜¾ç¤ºä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹"><a href="#1-6-æ‰¾åˆ°å¹¶çªå‡ºæ˜¾ç¤ºä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹" class="headerlink" title="1.6 æ‰¾åˆ°å¹¶çªå‡ºæ˜¾ç¤ºä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹"></a>1.6 æ‰¾åˆ°å¹¶çªå‡ºæ˜¾ç¤ºä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹</h4><ul><li>RegExp <strong><a href="http://www.w3school.com.cn/jsref/jsref_exec_regexp.asp" target="_blank" rel="noopener">exec()</a></strong> æ–¹æ³•ç”¨äºæ£€ç´¢å­—ç¬¦ä¸²ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…</li><li>RegExpObject.exec(string)</li><li>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾åŒ¹é…çš„ç»“æœã€‚å¦‚æœæœªæ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›å€¼ä¸º null</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> searchString2 = <span class="string">"Now is the time and this is the time and that is the time"</span>;</span><br><span class="line"><span class="keyword">var</span> parttern = <span class="regexp">/t\w*e/g</span>;  <span class="comment">//\w åŒ¹é…ä»»ä½•å•è¯å­—ç¬¦</span></span><br><span class="line"><span class="keyword">var</span> matchArray;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨regexp execæ£€æŸ¥æ¨¡å¼ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå¤„ç†å®ƒ</span></span><br><span class="line"><span class="keyword">while</span>((matchArray = parttern.exec(searchString2)) != <span class="literal">null</span>) &#123;</span><br><span class="line">str += <span class="string">"at "</span> + matchArray.index + <span class="string">" we found "</span> + matchArray[<span class="number">0</span>] + <span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"><span class="comment">// at 7 we found the</span></span><br><span class="line"><span class="comment">// at 11 we found time</span></span><br><span class="line"><span class="comment">// at 28 we found the</span></span><br><span class="line"><span class="comment">// at 32 we found time</span></span><br><span class="line"><span class="comment">// at 49 we found the</span></span><br><span class="line"><span class="comment">// at 53 we found time</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ä¾‹1-1</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"searchSubmit"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">var</span> pattern = <span class="built_in">document</span>.getElementById(<span class="string">"pattern"</span>).value;</span><br><span class="line">    <span class="keyword">var</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(pattern, <span class="string">"g"</span>);</span><br><span class="line">    <span class="comment">//è·å–å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">var</span> searchString = <span class="built_in">document</span>.getElementById(<span class="string">"inComing"</span>).value;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> matchArray;</span><br><span class="line">    <span class="keyword">var</span> resultString = <span class="string">"&lt;pre&gt;"</span>;</span><br><span class="line">    <span class="keyword">var</span> first = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> last = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ‰¾åˆ°æ¯ä¸€ä¸ªåŒ¹é…</span></span><br><span class="line">    <span class="keyword">while</span>((matchArray = re.exec(searchString)) != <span class="literal">null</span>) &#123;</span><br><span class="line">    last = matchArray.index;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è·å–æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå°†å…¶è¿æ¥èµ·æ¥</span></span><br><span class="line">    resultString += searchString.substring(first, last);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä½¿ç”¨classï¼Œæ·»åŠ åŒ¹é…çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    resultString += <span class="string">'&lt;span class="found"&gt;'</span> + matchArray[<span class="number">0</span>] + <span class="string">'&lt;/span&gt;'</span>;</span><br><span class="line">    first = re.lastIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å®Œæˆå­—ç¬¦ä¸²</span></span><br><span class="line">    resultString += searchString.substring(first, searchString.length);</span><br><span class="line">    resultString += <span class="string">"&lt;/pre&gt;"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ’å…¥é¡µé¢</span></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"searchResult"</span>).innerHTML = resultString;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-7-ä½¿ç”¨æ•è·åœ†æ‹¬å·äº¤æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å•è¯"><a href="#1-7-ä½¿ç”¨æ•è·åœ†æ‹¬å·äº¤æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å•è¯" class="headerlink" title="1.7 ä½¿ç”¨æ•è·åœ†æ‹¬å·äº¤æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å•è¯"></a>1.7 ä½¿ç”¨æ•è·åœ†æ‹¬å·äº¤æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å•è¯</h4><ul><li>äº¤æ¢åç§°ï¼Œè®©å§“æ°å…ˆå‡ºç°</li><li>è§£å†³ï¼šä½¿ç”¨æ•è·åœ†æ‹¬å·å’Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°å¹¶è®°ä½ä»–ä»¬çš„åå­—ï¼Œç„¶åäº’æ¢ä»–ä»¬</li><li><strong><a href="http://www.w3school.com.cn/jsref/jsref_replace.asp" target="_blank" rel="noopener">replace()</a></strong> æ–¹æ³•ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œæˆ–æ›¿æ¢ä¸€ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚</li></ul><table><thead><tr><th>å­—ç¬¦</th><th>æ›¿æ¢æ–‡æœ¬</th></tr></thead><tbody><tr><td>$1ã€$2ã€â€¦ã€$99</td><td>ä¸ regexp ä¸­çš„ç¬¬ 1 åˆ°ç¬¬ 99 ä¸ªå­è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬ã€‚</td></tr><tr><td>$&amp;</td><td>ä¸ regexp ç›¸åŒ¹é…çš„å­ä¸²ã€‚</td></tr><tr><td>$`</td><td>ä½äºåŒ¹é…å­ä¸²å·¦ä¾§çš„æ–‡æœ¬ã€‚</td></tr><tr><td>$â€™</td><td>ä½äºåŒ¹é…å­ä¸²å³ä¾§çš„æ–‡æœ¬ã€‚</td></tr><tr><td>$$</td><td>å…è®¸æ›¿æ¢ä¸­æœ‰ä¸€ä¸ªå­—é¢å€¼ç¾å…ƒç¬¦å·($)</td></tr><tr><td>$n</td><td>æ’å…¥ä½¿ç”¨RegExpçš„ç¬¬næ¬¡æ•è·åœ†æ‹¬å·çš„å€¼</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myName = <span class="string">"Tao Yang"</span>;</span><br><span class="line"><span class="keyword">var</span> nameRe = <span class="regexp">/^(\w+)\s(\w+)$/</span>;</span><br><span class="line"><span class="keyword">var</span> myNewName = myName.replace(nameRe, <span class="string">"$2 $1"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(myNewName);  <span class="comment">//Yang Tao</span></span><br></pre></td></tr></table></figure><h4 id="1-8-ä½¿ç”¨å‘½åå®ä½“æ¥æ›¿ä»£HTMLæ ‡ç­¾"><a href="#1-8-ä½¿ç”¨å‘½åå®ä½“æ¥æ›¿ä»£HTMLæ ‡ç­¾" class="headerlink" title="1.8 ä½¿ç”¨å‘½åå®ä½“æ¥æ›¿ä»£HTMLæ ‡ç­¾"></a>1.8 ä½¿ç”¨å‘½åå®ä½“æ¥æ›¿ä»£HTMLæ ‡ç­¾</h4><ul><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŠŠå°–æ‹¬å·(&lt;&gt;)è½¬æ¢ä¸ºå‘½åçš„å®ä½“ï¼š&lt;å’Œ&gt;</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pieceOfHtml = <span class="string">"&lt;p&gt;This is a &lt;span&gt;paragraph&lt;/span&gt;&lt;/p&gt;"</span>;</span><br><span class="line">pieceOfHtml = pieceOfHtml.replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&amp;lt;"</span>);</span><br><span class="line">pieceOfHtml = pieceOfHtml.replace(<span class="regexp">/&gt;/g</span>, <span class="string">"&amp;gt;"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(pieceOfHtml); <span class="comment">//&amp;lt;p&amp;gt;This is a &amp;lt;span&amp;gt;paragraph&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-9-ISO-8610æ ¼å¼çš„æ—¥æœŸè½¬æ¢ä¸ºDateå¯¹è±¡å¯æ¥å—çš„ä¸€ç§å½¢å¼"><a href="#1-9-ISO-8610æ ¼å¼çš„æ—¥æœŸè½¬æ¢ä¸ºDateå¯¹è±¡å¯æ¥å—çš„ä¸€ç§å½¢å¼" class="headerlink" title="1.9 ISO 8610æ ¼å¼çš„æ—¥æœŸè½¬æ¢ä¸ºDateå¯¹è±¡å¯æ¥å—çš„ä¸€ç§å½¢å¼"></a>1.9 ISO 8610æ ¼å¼çš„æ—¥æœŸè½¬æ¢ä¸ºDateå¯¹è±¡å¯æ¥å—çš„ä¸€ç§å½¢å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dtstr = <span class="string">"2014-3-04T19:35:32Z"</span>;</span><br><span class="line">dtstr = dtstr.replace(<span class="regexp">/\D/g</span>, <span class="string">" "</span>);</span><br><span class="line"><span class="built_in">console</span>.log(dtstr);  <span class="comment">//2014 3 04 19 35 32</span></span><br><span class="line"><span class="keyword">var</span> dtcomps = dtstr.split(<span class="string">" "</span>);</span><br><span class="line"><span class="comment">//åœ¨åŸºäº1çš„ISO 8610æœˆä»½å’ŒåŸºäº0çš„æ—¥æœŸæ ¼å¼ä¹‹é—´è½¬æ¢</span></span><br><span class="line">dtcomps[<span class="number">1</span>]--;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> convdt = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.UTC.apply(<span class="literal">null</span>, dtcomps));</span><br><span class="line"><span class="built_in">console</span>.log(convdt.toString());  <span class="comment">//Wed Mar 05 2014 03:35:32 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span></span><br></pre></td></tr></table></figure><h4 id="1-10-ä½¿ç”¨å¸¦æœ‰å®šæ—¶å™¨çš„å‡½æ•°é—­åŒ…"><a href="#1-10-ä½¿ç”¨å¸¦æœ‰å®šæ—¶å™¨çš„å‡½æ•°é—­åŒ…" class="headerlink" title="1.10 ä½¿ç”¨å¸¦æœ‰å®šæ—¶å™¨çš„å‡½æ•°é—­åŒ…"></a>1.10 ä½¿ç”¨å¸¦æœ‰å®šæ—¶å™¨çš„å‡½æ•°é—­åŒ…</h4><ul><li>ä½¿ç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºsetInterval()æˆ–setTimeout()æ–¹æ³•è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> intervalId = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"redbox"</span>).addEventListener(<span class="string">'click'</span>, startBox, <span class="literal">false</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startBox</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(intervalId == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> x = <span class="number">100</span>;</span><br><span class="line">        intervalId = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            x += <span class="number">5</span>;</span><br><span class="line">            <span class="keyword">var</span> left = x + <span class="string">"px"</span>;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">"redbox"</span>).style.left = left;</span><br><span class="line">        &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        clearInterval(intervalId);</span><br><span class="line">        intervalId = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-11-è®°å½•ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´æ¶ˆè€—çš„æ—¶é—´"><a href="#1-11-è®°å½•ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´æ¶ˆè€—çš„æ—¶é—´" class="headerlink" title="1.11 è®°å½•ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´æ¶ˆè€—çš„æ—¶é—´"></a>1.11 è®°å½•ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´æ¶ˆè€—çš„æ—¶é—´</h4><ul><li>åœ¨ç¬¬ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªDateå¯¹è±¡ï¼Œå½“ç¬¬äºŒä¸ªæ—¶é—´å‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Dateå¯¹è±¡ï¼Œå¹¶ä¸”ä»ç¬¬äºŒä¸ªå¯¹è±¡ä¸­å‡å»ç¬¬ä¸€ä¸ªå¯¹è±¡ã€‚ä¸¤è€…ä¹‹é—´çš„å·®ä»¥æ¯«ç§’è¡¨ç¤ºçš„ï¼Œè¦è½¬æ¢ä¸ºç§’ï¼Œå°±é™¤ä»¥1000</li><li>ä¸¤ä¸ªæ—¥æœŸå¯ä»¥ç›¸å‡ï¼Œä½†æ˜¯ç›¸åŠ å°±æˆäº†æ‹¼æ¥å­—ç¬¦ä¸²</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    doEvent(firstDate);</span><br><span class="line">&#125;, <span class="number">25000</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> secondDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> diff = secondDate - firstDate;</span><br><span class="line">    <span class="built_in">console</span>.log(diff);   <span class="comment">//25001</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-12-åè¿›åˆ¶æ•°è½¬åŒ–ä¸ºåå…­è¿›åˆ¶å€¼"><a href="#1-12-åè¿›åˆ¶æ•°è½¬åŒ–ä¸ºåå…­è¿›åˆ¶å€¼" class="headerlink" title="1.12 åè¿›åˆ¶æ•°è½¬åŒ–ä¸ºåå…­è¿›åˆ¶å€¼"></a>1.12 åè¿›åˆ¶æ•°è½¬åŒ–ä¸ºåå…­è¿›åˆ¶å€¼</h4><ul><li>ä½¿ç”¨Numberå¯¹è±¡çš„ <strong><a href="http://www.w3school.com.cn/jsref/jsref_toString_boolean.asp" target="_blank" rel="noopener">toString()</a></strong> æ–¹æ³•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">255</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num.toString(<span class="number">16</span>));  <span class="comment">//ff</span></span><br></pre></td></tr></table></figure><h4 id="1-13-æƒ³è¦å°†è¡¨ä¸­ä¸€åˆ—çš„æ‰€æœ‰æ•°å­—åŠ å’Œ"><a href="#1-13-æƒ³è¦å°†è¡¨ä¸­ä¸€åˆ—çš„æ‰€æœ‰æ•°å­—åŠ å’Œ" class="headerlink" title="1.13 æƒ³è¦å°†è¡¨ä¸­ä¸€åˆ—çš„æ‰€æœ‰æ•°å­—åŠ å’Œ"></a>1.13 æƒ³è¦å°†è¡¨ä¸­ä¸€åˆ—çš„æ‰€æœ‰æ•°å­—åŠ å’Œ</h4><ul><li>éå†è¡¨ä¸­åŒ…å«äº†æ•°å­—å€¼çš„åˆ—ï¼Œå°†å…¶è½¬æ¢ä¸ºæ•°å­—ï¼Œå¹¶åŠ å’Œ</li><li><strong><a href="http://www.runoob.com/jsref/met-document-queryselector.html" target="_blank" rel="noopener">querySelector()</a></strong>  æ–¹æ³•è¿”å›æ–‡æ¡£ä¸­åŒ¹é…æŒ‡å®š CSS é€‰æ‹©å™¨çš„ä¸€ä¸ªå…ƒç´ </li><li>å¦‚æœä½ éœ€è¦è¿”å›æ‰€æœ‰çš„å…ƒç´ ï¼Œè¯·ä½¿ç”¨ querySelectorAll() æ–¹æ³•æ›¿ä»£</li><li>å…¨å±€å‡½æ•° <strong><a href="http://www.runoob.com/jsref/jsref-parseint.html" target="_blank" rel="noopener">parseInt()</a></strong> å’Œ <strong><a href="http://www.runoob.com/jsref/jsref-parsefloat.html" target="_blank" rel="noopener">parseFloat()</a></strong> éƒ½æŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//ä½¿ç”¨querySelectorAllæ‰¾åˆ°ç¬¬äºŒåˆ—çš„æ‰€æœ‰å•å…ƒæ ¼</span></span><br><span class="line"><span class="keyword">var</span> cells = <span class="built_in">document</span>.querySelectorAll(<span class="string">"td:nth-of-type(2)"</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>, l=cells.length; i&lt;l; i++) &#123;</span><br><span class="line">    sum += <span class="built_in">parseFloat</span>(cells[i].firstChild.data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-14-åœ¨è§’åº¦å’Œå¼§åº¦ä¹‹é—´è½¬æ¢"><a href="#1-14-åœ¨è§’åº¦å’Œå¼§åº¦ä¹‹é—´è½¬æ¢" class="headerlink" title="1.14 åœ¨è§’åº¦å’Œå¼§åº¦ä¹‹é—´è½¬æ¢"></a>1.14 åœ¨è§’åº¦å’Œå¼§åº¦ä¹‹é—´è½¬æ¢</h4><ul><li>å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> radians = degrees * (<span class="built_in">Math</span>.PI / <span class="number">180</span>);</span><br></pre></td></tr></table></figure><ul><li>å°†å¼§åº¦è½¬åŒ–ä¸ºè§’åº¦</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> degrees = radians * (<span class="number">180</span> / <span class="built_in">Math</span>.PI);</span><br></pre></td></tr></table></figure><h4 id="1-15-æ‰¾åˆ°é¡µé¢å…ƒç´ å¯å®¹çº³çš„ä¸€ä¸ªåœ†çš„åŠå¾„å’Œåœ†å¿ƒ"><a href="#1-15-æ‰¾åˆ°é¡µé¢å…ƒç´ å¯å®¹çº³çš„ä¸€ä¸ªåœ†çš„åŠå¾„å’Œåœ†å¿ƒ" class="headerlink" title="1.15 æ‰¾åˆ°é¡µé¢å…ƒç´ å¯å®¹çº³çš„ä¸€ä¸ªåœ†çš„åŠå¾„å’Œåœ†å¿ƒ"></a>1.15 æ‰¾åˆ°é¡µé¢å…ƒç´ å¯å®¹çº³çš„ä¸€ä¸ªåœ†çš„åŠå¾„å’Œåœ†å¿ƒ</h4><ul><li><a href="http://www.w3school.com.cn/jsref/jsref_min.asp" target="_blank" rel="noopener">Math.min(x,y)</a>æ–¹æ³•å¯è¿”å›æŒ‡å®šçš„æ•°å­—ä¸­å¸¦æœ‰æœ€ä½å€¼çš„æ•°å­—ã€‚</li><li>æ±‚å‡ºå®½åº¦å’Œé«˜åº¦ä¸­è¾ƒå°çš„ä¸€ä¸ªï¼Œç”¨å…¶é™¤ä»¥2å¾—åˆ°åŠå¾„</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> circleRadius = <span class="built_in">Math</span>.min(elemengWidth, elemengHeight) / <span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li>ç»™æŒ‡å®šé¡µé¢å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ï¼Œé€šè¿‡å°†äºŒè€…éƒ½é™¤ä»¥2æ¥æ‰¾åˆ°å…¶ä¸­å¿ƒç‚¹</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = elemengWidth / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> y = elemengHeight / <span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle" target="_blank" rel="noopener">Window.getComputedStyle()</a>æ–¹æ³•ç»™å‡ºåº”ç”¨æ´»åŠ¨æ ·å¼è¡¨åçš„å…ƒç´ çš„æ‰€æœ‰CSSå±æ€§çš„å€¼ï¼Œå¹¶è§£æè¿™äº›å€¼å¯èƒ½åŒ…å«çš„ä»»ä½•åŸºæœ¬è®¡ç®—ã€‚</li><li><a href="http://www.zhangxinxu.com/wordpress/2012/05/getcomputedstyle-js-getpropertyvalue-currentstyle/" target="_blank" rel="noopener">getComputedStyle()</a></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>å°†ä¸€ä¸ªSVGåœ†æ”¾å…¥åˆ°ä¸€ä¸ªdivå…ƒç´ ä¸­<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-id">#elem</span> &#123;</span></span><br><span class="line"><span class="undefined">width: 100%;</span></span><br><span class="line"><span class="undefined">height: 500px;</span></span><br><span class="line"><span class="css"><span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line"><span class="css"><span class="selector-tag">background-color</span>: <span class="selector-id">#ddd</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"elem"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">circle</span> <span class="attr">id</span>=<span class="string">"circ"</span> <span class="attr">width</span>=<span class="string">"10"</span> <span class="attr">height</span>=<span class="string">"10"</span> <span class="attr">r</span>=<span class="string">"10"</span> <span class="attr">fill</span>=<span class="string">"#f90"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"elem"</span>);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> style = <span class="built_in">window</span>.getComputedStyle(box, <span class="literal">null</span>);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> width = <span class="built_in">parseInt</span>(style.getPropertyValue(<span class="string">"width"</span>));</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> height = <span class="built_in">parseInt</span>(style.getPropertyValue(<span class="string">"height"</span>));</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">'w'</span>, width, <span class="string">'h'</span>, height);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> x = width / <span class="number">2</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> y = height / <span class="number">2</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> circleRadius = <span class="built_in">Math</span>.min(width, height) / <span class="number">2</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> circ = <span class="built_in">document</span>.getElementById(<span class="string">"circ"</span>);</span></span><br><span class="line"><span class="javascript">circ.setAttribute(<span class="string">"r"</span>, circleRadius);</span></span><br><span class="line"><span class="javascript">circ.setAttribute(<span class="string">"cx"</span>, x);</span></span><br><span class="line"><span class="javascript">circ.setAttribute(<span class="string">"cy"</span>, y);</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">'r'</span>, circleRadius, <span class="string">' cx'</span>, x, <span class="string">' cy'</span>, y);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-16-è®¡ç®—åœ†å¼§çš„é•¿åº¦"><a href="#1-16-è®¡ç®—åœ†å¼§çš„é•¿åº¦" class="headerlink" title="1.16 è®¡ç®—åœ†å¼§çš„é•¿åº¦"></a>1.16 è®¡ç®—åœ†å¼§çš„é•¿åº¦</h4><ul><li>ç»™å®šäº†ä¸€ä¸ªåœ†çš„åŠå¾„åŠåœ†å¼§è§’çš„è§’åº¦å€¼ï¼Œæ±‚è¯¥åœ†å¼§çš„é•¿åº¦</li><li>ä½¿ç”¨<code>Math.PI</code>æŠŠè§’åº¦è½¬æ¢ä¸ºå¼§åº¦ï¼Œå¹¶åœ¨å…¬å¼ä¸­ä½¿ç”¨è¯¥ç»“æœæ¥æ±‚å¾—åœ†å¼§çš„é•¿åº¦</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> radians = degrees * (<span class="built_in">Math</span>.PI / <span class="number">180</span>);</span><br><span class="line"><span class="keyword">var</span> arclength = radians * radians;</span><br></pre></td></tr></table></figure><blockquote><p>å¾…ç»­~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> JavaScriptç»å…¸å®ä¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQueryå·¥å…·å‡½æ•°æ“ä½œDOM</title>
      <link href="/2017/05/21/practice-jquery-dom/"/>
      <url>/2017/05/21/practice-jquery-dom/</url>
      
        <content type="html"><![CDATA[<blockquote><p>jQuery å®æˆ˜ã€‹ï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ç¬¬ä¹ç« å­¦ä¹ æ€»ç»“</p></blockquote><a id="more"></a><h2 id="è¿‡æ»¤æ•°ç»„"><a href="#è¿‡æ»¤æ•°ç»„" class="headerlink" title="è¿‡æ»¤æ•°ç»„"></a>è¿‡æ»¤æ•°ç»„</h2><p><strong><code>$.grep(array,callback[,invert])</code></strong></p><ul><li>invert ä¸º true,åˆ™å›è°ƒå‡½æ•°çš„å€¼æ˜¯ falseï¼Œå¯¼è‡´å€¼è¢«æ”¶é›†ï¼›</li><li>invert ä¸º false,åˆ™å›è°ƒå‡½æ•°çš„å€¼æ˜¯ trueï¼Œå¯¼è‡´å€¼æ•°æ®æ”¶é›†ï¼›</li><li>åˆå§‹å…ƒç´ ä¸å˜ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> originalArray = [<span class="number">0</span>, <span class="number">34</span>, <span class="number">32</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">23</span>, <span class="number">3214</span>, <span class="number">342</span>, <span class="number">1</span>, <span class="number">43</span>, <span class="number">56</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">75</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bigNum1 = $.grep(</span><br><span class="line">  originalArray,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value &gt; <span class="number">10</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bigNum2 = $.grep(</span><br><span class="line">  originalArray,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value &gt; <span class="number">10</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bigNum1"</span>, bigNum1);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bigNum2"</span>, bigNum2);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"originalArray"</span>, originalArray);</span><br></pre></td></tr></table></figure><p><img src="http://img1.sycdn.imooc.com/5920f0b40001e7ed06950175.png" alt="console"></p><h2 id="è½¬æ¢æ•°ç»„"><a href="#è½¬æ¢æ•°ç»„" class="headerlink" title="è½¬æ¢æ•°ç»„"></a>è½¬æ¢æ•°ç»„</h2><p><strong><code>$.map(collection, callback)</code></strong></p><ul><li><code>collection[Array | Object]</code></li><li><code>callback(Function)</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰å€¼å’Œåˆå§‹æ•°ç»„å€¼çš„ç´¢å¼•ï¼›å¦‚æœä¼ é€’çš„æ˜¯å¯¹è±¡ï¼Œåˆ™ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„å½“å‰å€¼ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oneBased = $.map([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">4</span>], <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value + <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"oneBased"</span>, oneBased);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†æ”¶é›†åˆ°çš„ä¿å­˜å­—ç¬¦ä¸²çš„æ•°ç»„æå–é‡Œé¢çš„æ•°å€¼ï¼Œå¦‚è‹¥æ˜¯ï¼Œåˆ™æå–ï¼Œå¦‚è‹¥ä¸æ˜¯ï¼Œåˆ™å¿½ç•¥ï¼›</span></span><br><span class="line"><span class="keyword">var</span> strings = [<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"4"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> values1 = $.map(strings, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Number</span>(value);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">isNaN</span>(result) ? <span class="literal">null</span> : result;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> values2 = $.map(strings, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">isNaN</span>(value) ? <span class="literal">null</span> : value;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"values1"</span>, values1);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"values2"</span>, values2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤„ç†ä»è½¬æ¢å‡½æ•°é‡Œè¿”å›çš„æ•°ç»„ï¼Œå¹¶å­˜å…¥ç»“æœæ•°ç»„ä¸­</span></span><br><span class="line"><span class="keyword">var</span> characters = $.map([<span class="string">"hello"</span>, <span class="string">"world"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value.split(<span class="string">""</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"characters"</span>, characters);</span><br></pre></td></tr></table></figure><p><img src="http://img1.sycdn.imooc.com/5920f7710001ee9706960181.png" alt="console2"></p><p><strong><code>$.inArray</code></strong></p><ul><li><code>$.inArray(value, array[, fromIndex])</code>ç¡®å®šä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªç‰¹å®šçš„å€¼ï¼Œæˆ–è€…ä½ç½®</li><li><code>fromIndex(Number)</code> æ•°ç»„ä¸­å¼€å§‹æŸ¥è¯¢çš„ä½ç½®ï¼›é»˜è®¤ 0</li><li>è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå‡ºç°å€¼å¾—ä½ç½®ç´¢å¼•ï¼Œæ²¡æœ‰è¿”å›-1</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> index1 = $.inArray(<span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"><span class="keyword">var</span> index2 = $.inArray(<span class="number">3</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"index1"</span>, index1); <span class="comment">//index 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"index2"</span>, index2); <span class="comment">//index -1(æœªæ‰¾åˆ°)</span></span><br></pre></td></tr></table></figure><p><strong><code>$.makeArray(object)</code></strong> â€“ æŠŠç±»æ•°ç»„å¯¹è±¡è½¬æ¢ä¸º JavaScript æ•°ç»„</p><p><strong><code>$.merge(array1, array2)</code></strong> â€“ åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªæ•°ç»„è¢«ä¿®æ”¹åä½œä¸ºç»“æœè¿”å›</p><h2 id="æ‰©å±•å¯¹è±¡"><a href="#æ‰©å±•å¯¹è±¡" class="headerlink" title="æ‰©å±•å¯¹è±¡"></a>æ‰©å±•å¯¹è±¡</h2><p><strong><code>$.extend([deep,] target, [source1, source2,...,sourceN])</code></strong></p><ul><li>é€šè¿‡ä¼ é€’çš„å¯¹è±¡å±æ€§æ¥æ‰©å±• target å¯¹è±¡ï¼›æ‰©å±•åçš„å¯¹è±¡å¯ä½œä¸ºè¿”å›å€¼</li><li><code>deep(Boolean)</code> å¿½ç•¥æˆ–è€…ä¸º falseï¼Œä½¿ç”¨æµ…æ‹·è´æ‰©å±•ï¼›trueï¼Œåˆ™ä½¿ç”¨æ·±æ‹·è´æ‰©å±•</li><li><code>target(Object)</code> ä½¿ç”¨æºå…ƒç´ å±æ€§æ¥æ‰©å±•ç›®æ ‡å¯¹è±¡</li><li><code>source1...(Object)</code> ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¯¹è±¡,å±æ€§ä¼šæ·»åŠ åˆ° target ç›®æ ‡å¯¹è±¡ä¸­</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$.extend()å‡½æ•°åˆå¹¶äº†å¤šä¸ªæºå¯¹è±¡çš„å±æ€§ä¸åŒ…å«é‡å¤å€¼ï¼Œè€Œä¸”æŒ‰ç…§é¡ºåºæ’åº</span></span><br><span class="line"><span class="keyword">var</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> source1 = &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">5</span>, <span class="attr">e</span>: <span class="number">6</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> source2 = &#123; <span class="attr">c</span>: <span class="number">8</span>, <span class="attr">e</span>: <span class="number">10</span>, <span class="attr">f</span>: <span class="number">9</span> &#125;;</span><br><span class="line"></span><br><span class="line">$.extend(target, source1, source2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"target(after)"</span>, target);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼ é€’ç©ºå¯¹è±¡ä½œä¸ºç›®æ ‡</span></span><br><span class="line"><span class="keyword">var</span> newObject = $.extend(&#123;&#125;, source1, source2);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"newObject"</span>, newObject);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">var</span> target1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> source11 = &#123; <span class="attr">b</span>: &#123; <span class="attr">foo</span>: <span class="string">"bar"</span> &#125;, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> source22 = &#123; <span class="attr">b</span>: &#123; <span class="attr">oof</span>: <span class="string">"rab"</span> &#125;, <span class="attr">d</span>: <span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line">$.extend(<span class="literal">true</span>, target1, source11, source22);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"target1"</span>, target1);</span><br></pre></td></tr></table></figure><p><img src="http://img1.sycdn.imooc.com/59217be70001859607000553.png" alt="console"></p><h2 id="åºåˆ—åŒ–å‚æ•°"><a href="#åºåˆ—åŒ–å‚æ•°" class="headerlink" title="åºåˆ—åŒ–å‚æ•°"></a>åºåˆ—åŒ–å‚æ•°</h2><p><strong><code>$.param(params[, traditional])</code></strong></p><ul><li>åºåˆ—åŒ–ä¸ºé€‚å½“çš„å­—ç¬¦ä¸²ä¼ é€’ä¿¡æ¯ï¼Œä¾¿äºä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²æäº¤è¯·æ±‚</li><li><code>params(Array|jQuery|Object)</code></li><li><code>traditional(Boolean)</code> æ˜¯å¦æ‰§è¡Œä¼ ç»Ÿçš„å½±å­åºåˆ—åŒ–</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">lable</span> <span class="attr">for</span>=<span class="string">"name"</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"YangTao"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">lable</span> <span class="attr">for</span>=<span class="string">"surname"</span>&gt;</span>Surname:<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"surname"</span> <span class="attr">name</span>=<span class="string">"surname"</span> <span class="attr">value</span>=<span class="string">"Bluth"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">lable</span> <span class="attr">for</span>=<span class="string">"address"</span>&gt;</span>Address:<span class="tag">&lt;/<span class="name">lable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"address"</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">value</span>=<span class="string">"Fake street 1, Beijing, China"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> formResult = $.param($(<span class="string">"input"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"formResult"</span>, formResult);</span><br></pre></td></tr></table></figure><p><img src="http://img1.sycdn.imooc.com/592180f500018e7007010100.png" alt="console"></p><h2 id="æµ‹è¯•å¯¹è±¡"><a href="#æµ‹è¯•å¯¹è±¡" class="headerlink" title="æµ‹è¯•å¯¹è±¡"></a>æµ‹è¯•å¯¹è±¡</h2><ul><li><strong><code>$.isArray(param)</code></strong> param æ˜¯ JavaScript æ•°ç»„ï¼Œè¿”å› true,å¦åˆ™è¿”å› false</li><li><strong><code>$.isFunction(param)</code></strong> param æ˜¯å‡½æ•°ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</li><li><strong><code>$.isNumeric(param)</code></strong> param æ˜¯æ•°å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</li><li><strong><code>$.isWindow(param)</code></strong> param è¡¨ç¤º window å¯¹è±¡ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</li><li><strong><code>$.isEmptyObject(param)</code></strong> param æ˜¯ JavaScript å¯¹è±¡ï¼Œä¸åŒ…å«å±æ€§ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</li><li><strong><code>$.isPlainObject(param)</code></strong> param è¡¨ç¤ºç”¨ <code>via{}</code> æˆ–è€… <code>new Object()</code>åˆ›å»ºçš„ JavaScript å¯¹è±¡ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</li><li><strong><code>$.isXMLDoc(param)</code></strong> param è¡¨ç¤º XML æ–‡æ¡£æˆ– XML èŠ‚ç‚¹ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</li></ul><h2 id="æŸ¥çœ‹å€¼çš„ç±»å‹"><a href="#æŸ¥çœ‹å€¼çš„ç±»å‹" class="headerlink" title="æŸ¥çœ‹å€¼çš„ç±»å‹"></a>æŸ¥çœ‹å€¼çš„ç±»å‹</h2><ul><li><strong><code>$.type(param)</code></strong></li></ul><h2 id="è§£æå‡½æ•°"><a href="#è§£æå‡½æ•°" class="headerlink" title="è§£æå‡½æ•°"></a>è§£æå‡½æ•°</h2><ul><li><strong><code>$.paramJSON(json)</code></strong></li><li><strong><code>$.paramXML(xml)</code></strong></li><li><strong><code>$.paramHTML(html[,context][,keepScripts])</code></strong></li></ul><h2 id="æµ‹è¯•åŒ…å«"><a href="#æµ‹è¯•åŒ…å«" class="headerlink" title="æµ‹è¯•åŒ…å«"></a>æµ‹è¯•åŒ…å«</h2><ul><li><strong><code>$.contains(container, contained)</code></strong> æµ‹è¯•å…ƒç´ æ˜¯å¦åŒ…å«åœ¨ DOM å±‚çš„å¦ä¸€ä¸ªå…ƒç´ ä¸­</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>embedåµŒå…¥å¤šä¸ªä¼˜é…·è§†é¢‘å¹¶è‡ªåŠ¨æ’­æ”¾</title>
      <link href="/2017/01/22/practice-video-embed/"/>
      <url>/2017/01/22/practice-video-embed/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="å…³äº-embed-æ ‡ç­¾"><a href="#å…³äº-embed-æ ‡ç­¾" class="headerlink" title="å…³äº embed æ ‡ç­¾"></a>å…³äº embed æ ‡ç­¾</h2><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¤šä¸ªè§†é¢‘é€‰æ‹©ï¼›</li><li>å¼¹å‡ºæ¨¡æ€æ¡†ï¼Œä¸èƒ½ä¸Šä¸‹æ»‘åŠ¨ï¼›</li><li>è§†é¢‘è‡ªå¸¦å¯å…¨å±ï¼›</li><li>è§†é¢‘è‡ªåŠ¨æ’­æ”¾ï¼›</li><li>å…¼å®¹ IEï¼ŒIE ä¼šæœ‰æ’­æ”¾æ®‹ç•™ï¼Œæ‰€ä»¥è®©å…¶åˆ·æ–°é¡µé¢ï¼›</li><li>å…¶ä»–æµè§ˆå™¨ï¼šç«ç‹ï¼Œè°·æ­Œï¼Œedgeï¼Œsafari ç­‰ï¼›</li></ul><p>é¦–å…ˆï¼Œå…ˆçœ‹ä¸€ä¸‹åµŒå…¥ç½‘é¡µä¸­ä¼˜é…·è§†é¢‘çš„å®Œæ•´ä»£ç ï¼ˆç›´æ¥ä»ä¼˜é…·åˆ†äº«å¾—åˆ°çš„ HTML ä»£ç ï¼‰ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>embed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">'http://player.youku.com/player.php/sid/XMjQ4MDg2MTc2MA==/v.swf'</span> <span class="attr">allowFullScreen</span>=<span class="string">'true'</span> <span class="attr">quality</span>=<span class="string">'high'</span> <span class="attr">width</span>=<span class="string">'480'</span> <span class="attr">height</span>=<span class="string">'400'</span> <span class="attr">align</span>=<span class="string">'middle'</span> <span class="attr">allowScriptAccess</span>=<span class="string">'always'</span> <span class="attr">type</span>=<span class="string">'application/x-shockwave-flash'</span>&gt;</span><span class="tag">&lt;/<span class="name">embed</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­ï¼Œ<code>&lt;embed&gt;</code>çš„ç›¸å…³å±æ€§ï¼š</p><ul><li><code>src</code> â€” æŒ‡å‘èµ„æºï¼›</li><li><code>quality=&#39;high&#39;</code> â€” è§†é¢‘çš„é»˜è®¤æ¸…æ™°åº¦ï¼Œä¸€èˆ¬ä¸º high;</li><li><code>width,height</code> â€” è§†é¢‘çš„å®½ã€é«˜åº¦ï¼›</li><li><code>align=&#39;middle&#39;</code> â€” è§†é¢‘çš„ä½ç½®ï¼›</li><li><code>allowFullScreen=&#39;true&#39;</code> â€” æ˜¯å¦è¿è¡Œå…¨å±è§‚çœ‹ï¼Œé»˜è®¤ true;</li><li><code>type=&#39;application/x-shockwave-flash&#39;</code> â€” å„ä¸ªæµè§ˆå™¨æ”¯æŒæƒ…å†µï¼›</li><li><code>allowScriptAccess=&#39;always&#39;</code> â€” ç‰¹æ®Šå±æ€§ï¼Œç”¨äºç¡®ä¿ Flash å½±ç‰‡å¯èƒ½ç‰¹å®šäºæŸä¸ªç‰ˆæœ¬çš„ Flashï¼›</li></ul><p>å¸¸ç”¨çš„åŸºæœ¬å±æ€§å°±è¿™äº›äº†ï¼Œä¸è¿‡ï¼Œè¿™ä¸ªåµŒå…¥çš„è§†é¢‘ï¼Œé»˜è®¤æ˜¯ä¸è‡ªåŠ¨æ’­æ”¾ï¼Œä¸‹é¢æ¥çœ‹çœ‹è‡ªåŠ¨æ’­æ”¾çš„è®¾ç½®ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>embed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">'http://player.youku.com/player.php/sid/XMjQ4MDg2MTc2MA==/v.swf?VideoIDS=XMjQ4MDg2MTc2MA==&amp;isAutoPlay=true&amp;isShowRelatedVideo=false&amp;showAd=0'</span> <span class="attr">allowFullScreen</span>=<span class="string">'true'</span> <span class="attr">quality</span>=<span class="string">'high'</span> <span class="attr">width</span>=<span class="string">'480'</span> <span class="attr">height</span>=<span class="string">'400'</span> <span class="attr">align</span>=<span class="string">'middle'</span> <span class="attr">allowScriptAccess</span>=<span class="string">'always'</span> <span class="attr">type</span>=<span class="string">'application/x-shockwave-flash'</span>&gt;</span><span class="tag">&lt;/<span class="name">embed</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›å±æ€§ä¸€çœ‹å°±æ˜ç™½ï¼š</p><ul><li><code>isAutoPlay=true</code> â€” æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼›</li><li><code>isShowRelatedVideo=false</code> â€” æ˜¯å¦å±•ç¤ºç›¸å…³è§†é¢‘ï¼›</li></ul><p>å¥½äº†ï¼Œembed çš„å¸¸ç”¨å±æ€§ä»‹ç»å®Œæ¯•ï¼Œæ¥ä¸‹æ¥å’±ä»¬ä¸€èµ·çœ‹çœ‹å¦‚ä½•è·Ÿæ¢è§†é¢‘çš„é“¾æ¥ï¼š</p><h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>ç”±äºæ˜¯å¤šä¸ªè§†é¢‘å±•ç¤ºï¼Œæ‰€ä»¥å¤åˆ¶å¤šä¸ª data-item å€¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"videoList"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video01"</span>&gt;</span>è§†é¢‘01<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video02"</span>&gt;</span>è§†é¢‘02<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video03"</span>&gt;</span>è§†é¢‘03<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video04"</span>&gt;</span>è§†é¢‘04<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><p>æ¨¡æ€æ¡†è®¾ç½®ï¼Œå¹¶ä¸”è®¾ç½®è§†é¢‘å…³é—­æŒ‰é’®ï¼Œï¼ˆè¿™é‡Œæ²¡æœ‰ç›´æ¥å°† embed çš„å†…å®¹å†™å…¥åœ¨é¡µé¢ä¸Šï¼Œé˜²æ­¢æœ‰äº›æµè§ˆå™¨ç›´æ¥è·³è¿‡ js ä»£ç ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é®ç½©å±‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mask"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è§†é¢‘åŒº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"videoModal"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"closeBtn"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>x<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h3><p>ä½¿ç”¨ jquery è·å–åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦æ˜¯éœ€è¦ç‚¹å‡»çš„å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> embedEle;</span><br><span class="line"><span class="keyword">var</span> videoID = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">var</span> videoSrc;</span><br><span class="line"><span class="keyword">var</span> videoModal = $(<span class="string">"#videoModal"</span>);</span><br><span class="line"><span class="keyword">var</span> $targetEle = $(<span class="string">"#videoList"</span>).find(<span class="string">"li"</span>);</span><br><span class="line"><span class="comment">//ç‚¹å‡»è§†é¢‘ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯buttonï¼Œæ’é™¤å…¶ä»–å†…å®¹</span></span><br><span class="line">$targetEle.click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> dataItem = $(<span class="keyword">this</span>).attr(<span class="string">"data-item"</span>);</span><br><span class="line">  <span class="keyword">var</span> $para1 = $(<span class="keyword">this</span>).find(<span class="string">"p"</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> $para2 = $(<span class="keyword">this</span>).find(<span class="string">"p"</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">if</span> (e.target == $para1 || e.target == $para2) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    videoID = isWhichSrc(dataItem);</span><br><span class="line">    videoFunc(videoID);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ ¹æ®<code>data-item</code>çš„å€¼ï¼Œè·å–ç‚¹å‡»çš„<code>data-item</code>ï¼Œå¹¶æ‰§è¡Œ<code>isWhichSrc(num)</code>å‡½æ•°,å¹¶å°†è·å–åˆ°çš„è§†é¢‘é“¾æ¥èµ‹å€¼ç»™<code>videoID = isWhichSrc(dataItem);</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®å¾—åˆ°çš„data-itemå€¼åˆ¤æ–­ç›¸å¯¹åº”çš„è§†é¢‘ID</span></span><br><span class="line"><span class="keyword">var</span> isWhichSrc = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num == <span class="number">1</span>) &#123;</span><br><span class="line">    videoID = <span class="string">"XMjQ4MDg2MTc2MA"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (num == <span class="number">2</span>) &#123;</span><br><span class="line">    videoID = <span class="string">"XMTY0OTYzNTU0NA"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (num == <span class="number">3</span>) &#123;</span><br><span class="line">    videoID = <span class="string">"XMTQyMDExNjA4NA"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (num == <span class="number">4</span>) &#123;</span><br><span class="line">    videoID = <span class="string">"XMTc2MDAxOTIwOA"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> videoID;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åå°†æ­¤å€¼ä¼ å…¥ç»™<code>videoFunc(videoid)</code>ï¼›è¯¥å‡½æ•°ä¸­ï¼Œåˆ›å»º<code>embed</code>å¹¶æ·»åŠ åˆ°é¡µé¢ä¸Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®è§†é¢‘IDèµ‹å€¼è§†é¢‘é“¾æ¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">videoFunc</span>(<span class="params">videoid</span>) </span>&#123;</span><br><span class="line">  videoSrc =</span><br><span class="line">    <span class="string">"http://player.youku.com/player.php/sid/"</span> +</span><br><span class="line">    videoid +</span><br><span class="line">    <span class="string">"==/v.swf?VideoIDS="</span> +</span><br><span class="line">    videoid +</span><br><span class="line">    <span class="string">"==&amp;isAutoPlay=true&amp;isShowRelatedVideo=false&amp;showAd=0"</span>;</span><br><span class="line"></span><br><span class="line">  embedEle =</span><br><span class="line">    <span class="string">"&lt;embed src='"</span> +</span><br><span class="line">    videoSrc +</span><br><span class="line">    <span class="string">"' allowFullScreen='true' quality='high' width='610' height='460' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'&gt;&lt;/embed&gt;"</span>;</span><br><span class="line">  <span class="comment">//å°†è·å¾—çš„embedæ ‡ç­¾æ·»åŠ è¿›å»</span></span><br><span class="line">  videoModal.append(embedEle);</span><br><span class="line">  $(<span class="string">"#videoModal"</span>).slideDown(<span class="number">600</span>);</span><br><span class="line">  showMask();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åå°±æ˜¯å…³äºé®ç½©å±‚çš„å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showMask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"body"</span>).css(<span class="string">"overflow"</span>, <span class="string">"hidden"</span>);</span><br><span class="line">  $(<span class="string">"#mask"</span>)</span><br><span class="line">    .css(&#123; <span class="attr">height</span>: $(<span class="built_in">document</span>).height(), <span class="attr">width</span>: $(<span class="built_in">document</span>).width() &#125;)</span><br><span class="line">    .slideDown(<span class="number">600</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideMask</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#mask"</span>).slideUp(<span class="number">600</span>);</span><br><span class="line">  bodyShow();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bodyShow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"body"</span>).css(<span class="string">"overflow"</span>, <span class="string">"auto"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´æ —å­"><a href="#å®Œæ•´æ —å­" class="headerlink" title="å®Œæ•´æ —å­"></a>å®Œæ•´æ —å­</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>youku-video-embed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">"http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    * &#123;</span></span><br><span class="line"><span class="undefined">      margin: 0;</span></span><br><span class="line"><span class="undefined">      padding: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/*é®ç½©å±‚*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-id">#mask</span> &#123;</span></span><br><span class="line"><span class="undefined">      position: fixed;</span></span><br><span class="line"><span class="undefined">      top: 0;</span></span><br><span class="line"><span class="undefined">      left: 0;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">opacity</span>: 0<span class="selector-class">.8</span>;</span></span><br><span class="line"><span class="undefined">      filter: alpha(opacity=80);</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">      z-index: 99;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/*è§†é¢‘*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-id">#closeBtn</span> &#123;</span></span><br><span class="line"><span class="undefined">      float: right;</span></span><br><span class="line"><span class="undefined">      padding-right: 5px;</span></span><br><span class="line"><span class="undefined">      width: 14px;</span></span><br><span class="line"><span class="undefined">      height: 20px;</span></span><br><span class="line"><span class="undefined">      line-height: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#closeBtn</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="undefined">      font-size: 18px;</span></span><br><span class="line"><span class="undefined">      font-weight: bold;</span></span><br><span class="line"><span class="undefined">      cursor: pointer;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#666</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#closeBtn</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">      text-decoration: none;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#videoModal</span> &#123;</span></span><br><span class="line"><span class="undefined">      display: none;</span></span><br><span class="line"><span class="undefined">      position: fixed;</span></span><br><span class="line"><span class="undefined">      top: 10%;</span></span><br><span class="line"><span class="undefined">      left: 50%;</span></span><br><span class="line"><span class="undefined">      margin-left: -305px;</span></span><br><span class="line"><span class="undefined">      width: 610px;</span></span><br><span class="line"><span class="undefined">      height: 480px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">      z-index: 100;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/*æŒ‰é’®*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line"><span class="undefined">      margin: 0 auto;</span></span><br><span class="line"><span class="undefined">      width: 100%;</span></span><br><span class="line"><span class="undefined">      max-width: 1140px;</span></span><br><span class="line"><span class="undefined">      text-align: center;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    h3 &#123;</span></span><br><span class="line"><span class="undefined">      margin-top: 20px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#b403b7</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    ul &#123;</span></span><br><span class="line"><span class="undefined">      overflow: hidden;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    ul li &#123;</span></span><br><span class="line"><span class="undefined">      float: left;</span></span><br><span class="line"><span class="undefined">      list-style-type: none;</span></span><br><span class="line"><span class="undefined">      margin: 10px 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    p &#123;</span></span><br><span class="line"><span class="undefined">      font-size: 14px;</span></span><br><span class="line"><span class="undefined">      font-family: "å¾®è½¯é›…é»‘";</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.wrapper</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="undefined">      margin-top: 50px;</span></span><br><span class="line"><span class="undefined">      width: 200px;</span></span><br><span class="line"><span class="undefined">      height: 200px;</span></span><br><span class="line"><span class="undefined">      cursor: pointer;</span></span><br><span class="line"><span class="undefined">      border-radius: 8px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#666</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.wrapper</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">opacity</span>: 0<span class="selector-class">.8</span>;</span></span><br><span class="line"><span class="undefined">      filter: alpha(opacity=80);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é®ç½©å±‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mask"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†é¢‘åŒº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"videoModal"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"closeBtn"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>x<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æŒ‰é’®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>embedé“¾æ¥ä¼˜é…·è§†é¢‘è‡ªåŠ¨æ’­æ”¾<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"videoList"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video01"</span>&gt;</span>è§†é¢‘01<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video02"</span>&gt;</span>è§†é¢‘02<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video03"</span>&gt;</span>è§†é¢‘03<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-item</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"video04"</span>&gt;</span>è§†é¢‘04<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘ç®€ä»‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--js--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> embedEle;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> videoID = <span class="string">""</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> videoSrc;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> videoModal = $(<span class="string">"#videoModal"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $targetEle = $(<span class="string">"#videoList"</span>).find(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="comment">//ç‚¹å‡»è§†é¢‘ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯buttonï¼Œæ’é™¤å…¶ä»–å†…å®¹</span></span></span><br><span class="line"><span class="javascript">      $targetEle.click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> dataItem = $(<span class="keyword">this</span>).attr(<span class="string">"data-item"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> $para1 = $(<span class="keyword">this</span>).find(<span class="string">"p"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> $para2 = $(<span class="keyword">this</span>).find(<span class="string">"p"</span>)[<span class="number">1</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (e.target == $para1 || e.target == $para2) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">          videoID = isWhichSrc(dataItem);</span></span><br><span class="line"><span class="undefined">          videoFunc(videoID);</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;);</span></span><br><span class="line"><span class="javascript">      <span class="comment">//å…³é—­</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">"#closeBtn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">        videoModal</span></span><br><span class="line"><span class="undefined">          .slideUp(600)</span></span><br><span class="line"><span class="javascript">          .find(<span class="string">"embed"</span>)</span></span><br><span class="line"><span class="undefined">          .remove();</span></span><br><span class="line"><span class="javascript">        <span class="comment">//å…¼å®¹IEï¼Œè®©å…¶åˆ·æ–°é¡µé¢ï¼Œå¯¹å…¶ä»–æµè§ˆå™¨æ— æ•ˆ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.execCommand(<span class="string">"Refresh"</span>);</span></span><br><span class="line"><span class="undefined">        hideMask();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">      &#125;);</span></span><br><span class="line"><span class="javascript">      <span class="comment">//æ ¹æ®å¾—åˆ°çš„data-itemå€¼åˆ¤æ–­ç›¸å¯¹åº”çš„è§†é¢‘ID</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> isWhichSrc = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (num == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">          videoID = <span class="string">"XMjQ4MDg2MTc2MA"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (num == <span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="javascript">          videoID = <span class="string">"XMTY0OTYzNTU0NA"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (num == <span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="javascript">          videoID = <span class="string">"XMTQyMDExNjA4NA"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (num == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="javascript">          videoID = <span class="string">"XMTc2MDAxOTIwOA"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> videoID;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">//æ ¹æ®è§†é¢‘IDèµ‹å€¼è§†é¢‘é“¾æ¥</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">videoFunc</span>(<span class="params">videoid</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">        videoSrc =</span></span><br><span class="line"><span class="javascript">          <span class="string">"http://player.youku.com/player.php/sid/"</span> +</span></span><br><span class="line"><span class="undefined">          videoid +</span></span><br><span class="line"><span class="javascript">          <span class="string">"==/v.swf?VideoIDS="</span> +</span></span><br><span class="line"><span class="undefined">          videoid +</span></span><br><span class="line"><span class="javascript">          <span class="string">"==&amp;isAutoPlay=true&amp;isShowRelatedVideo=false&amp;showAd=0"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        embedEle =</span></span><br><span class="line"><span class="javascript">          <span class="string">"&lt;embed src='"</span> +</span></span><br><span class="line"><span class="undefined">          videoSrc +</span></span><br><span class="line"><span class="javascript">          <span class="string">"' allowFullScreen='true' quality='high' width='610' height='460' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'&gt;&lt;/embed&gt;"</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//å°†è·å¾—çš„embedæ ‡ç­¾æ·»åŠ è¿›å»</span></span></span><br><span class="line"><span class="undefined">        videoModal.append(embedEle);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#videoModal"</span>).slideDown(<span class="number">600</span>);</span></span><br><span class="line"><span class="undefined">        showMask();</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">//é®ç½©å±‚éƒ¨åˆ†</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">showMask</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"body"</span>).css(<span class="string">"overflow"</span>, <span class="string">"hidden"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#mask"</span>)</span></span><br><span class="line"><span class="javascript">          .css(&#123; <span class="attr">height</span>: $(<span class="built_in">document</span>).height(), <span class="attr">width</span>: $(<span class="built_in">document</span>).width() &#125;)</span></span><br><span class="line"><span class="undefined">          .slideDown(600);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">hideMask</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#mask"</span>).slideUp(<span class="number">600</span>);</span></span><br><span class="line"><span class="undefined">        bodyShow();</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">bodyShow</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"body"</span>).css(<span class="string">"overflow"</span>, <span class="string">"auto"</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†JavaScriptçš„è§£æä¸æ‰§è¡Œè¿‡ç¨‹</title>
      <link href="/2016/09/16/practice-compiler/"/>
      <url>/2016/09/16/practice-compiler/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="å…¨å±€é¢„å¤„ç†"><a href="#å…¨å±€é¢„å¤„ç†" class="headerlink" title="å…¨å±€é¢„å¤„ç†"></a>å…¨å±€é¢„å¤„ç†</h2><p>å…ˆæ‰«æå‡½æ•°å£°æ˜ï¼Œå†æ‰«æå˜é‡å£°æ˜ï¼š</p><ul><li>å‡½æ•°ï¼šç”¨å£°æ˜çš„æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼›</li><li>å˜é‡ï¼šç”¨ var å®šä¹‰çš„å˜é‡ï¼›åˆå§‹åŒ–ä¸º undefinedï¼›</li></ul><p>å¦‚æœå‡ºç°<em>å‘½åå†²çª</em> æ—¶ï¼š</p><ul><li>å‡½æ•°å£°æ˜ï¼šè¦†ç›–ï¼›</li><li>å˜é‡å£°æ˜ï¼šå¿½ç•¥ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f(); <span class="comment">//fff</span></span><br><span class="line">g(); <span class="comment">//TypeError: g is not a function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"fff"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"ggg"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>f()å‡½æ•°æ˜¯å£°æ˜æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼Œg()æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼Œå…¨å±€é¢„å¤„ç†æ—¶è¯æ³•ç¯å¢ƒä¸­ï¼Œåªèƒ½æ˜¯ç”¨å£°æ˜çš„æ–¹å¼åˆ›å»ºçš„å‡½æ•°ã€‚</p><p>å› æ­¤ï¼Œå…¨å±€é¢„å¤„ç†æ—¶ g()ä»è¯­ä¹‰ä¸Šçœ‹ï¼Œåº”è¯¥æ˜¯å‡½æ•°ï¼Œä½†æ˜¯ç”±äº g()æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼Œä¸ä¼šåœ¨è¯æ³•ç¯å¢ƒä¸­ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶ä¼šæŠ¥é”™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//ReferenceError: b is not defined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">b = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œè¯æ³•ç¯å¢ƒä¸­åªæœ‰ç”¨ var å®šä¹‰çš„å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">alert(f); <span class="comment">//function f()&#123;alert('567');&#125;</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"123"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"567"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"890"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‘½åå†²çªæ—¶ï¼Œå‡½æ•°å…·æœ‰â€œä¼˜å…ˆæƒâ€ï¼Œå˜é‡ä¼šç›´æ¥è¢«å¿½ç•¥ï¼Œè€Œå‡½æ•°ä¼šè¢«è¦†ç›–ã€‚</p><h2 id="å…¨å±€æ‰§è¡Œè¿‡ç¨‹"><a href="#å…¨å±€æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="å…¨å±€æ‰§è¡Œè¿‡ç¨‹"></a>å…¨å±€æ‰§è¡Œè¿‡ç¨‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">alert(a); <span class="comment">//undefined</span></span><br><span class="line">alert(b); <span class="comment">//ReferenceError: b is not defined</span></span><br><span class="line">alert(f); <span class="comment">//function f() &#123;console.log('f');&#125;</span></span><br><span class="line">alert(g); <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">b = <span class="number">2</span>;</span><br><span class="line">alert(b); <span class="comment">//2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"f"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"g"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">alert(g); <span class="comment">//function () &#123;console.log('g');&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†åˆ†ææ–¹ä¾¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯æ³•ç¯å¢ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LexicalEnvironment &#123;&#125; === <span class="built_in">window</span>ï¼›</span><br></pre></td></tr></table></figure><p>å…¨å±€é¢„å¤„ç†æ—¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span> &#123;</span><br><span class="line">    <span class="comment">//å…ˆæ‰«æå‡½æ•°å£°æ˜ï¼š</span></span><br><span class="line">    f: æŒ‡å‘å‡½æ•°,</span><br><span class="line">    <span class="comment">//å†æ‰«é¢å˜é‡å£°æ˜ï¼š</span></span><br><span class="line">    a: <span class="literal">undefined</span>,</span><br><span class="line">    g: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¨å±€æ‰§è¡Œæ—¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span> &#123;</span><br><span class="line">    f: æŒ‡å‘å‡½æ•°,</span><br><span class="line">    a: <span class="number">1</span>,</span><br><span class="line">    b: <span class="number">2</span>,</span><br><span class="line">    g: æŒ‡å‘å‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°é¢„å¤„ç†é˜¶æ®µ"><a href="#å‡½æ•°é¢„å¤„ç†é˜¶æ®µ" class="headerlink" title="å‡½æ•°é¢„å¤„ç†é˜¶æ®µ"></a>å‡½æ•°é¢„å¤„ç†é˜¶æ®µ</h2><ul><li>æ¯è°ƒç”¨ä¸€æ¬¡ï¼Œäº§ç”Ÿä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼ˆæˆ–æ‰§è¡Œä¸Šä¸‹æ–‡<code>Execution Context</code>ï¼‰ï¼›</li><li>å…ˆä¼ å…¥å‡½æ•°çš„å‚æ•°ï¼Œè‹¥å‚æ•°å€¼ä¸ºç©ºï¼Œåˆå§‹åŒ–<code>undefined</code>ï¼›</li><li>ç„¶åæ˜¯å†…éƒ¨å‡½æ•°å£°æ˜ï¼Œè‹¥å‘ç”Ÿå‘½åå†²çªï¼Œä¼šè¦†ç›–ï¼›</li><li>æ¥ç€å°±æ˜¯å†…éƒ¨<code>var</code>å˜é‡å£°æ˜ï¼Œè‹¥å‘ç”Ÿå‘½åå†²çªï¼Œä¼šå¿½ç•¥ï¼›</li></ul><h2 id="å‡½æ•°æ‰§è¡Œé˜¶æ®µ"><a href="#å‡½æ•°æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="å‡½æ•°æ‰§è¡Œé˜¶æ®µ"></a>å‡½æ•°æ‰§è¡Œé˜¶æ®µ</h2><ul><li>ç»™é¢„å¤„ç†é˜¶æ®µçš„æˆå‘˜èµ‹å€¼ï¼›</li><li>æ—  var å£°æ˜çš„å˜é‡ï¼Œä¼šæˆä¸ºå…¨å±€æˆå‘˜ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  alert(a); <span class="comment">//1</span></span><br><span class="line">  alert(b); <span class="comment">//funciton b()&#123;&#125;</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p><code>VOï¼ˆVariable Objectï¼‰</code>â€”â€”&gt; å˜é‡å¯¹è±¡</p><p>å‡½æ•°ä¸­çš„æ¿€æ´»å¯¹è±¡ï¼š<code>VOï¼ˆfunctionContextï¼‰=== AO;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO(f) &#123;</span><br><span class="line">    a: <span class="number">1</span>,                   <span class="comment">//å˜é‡å‘½åå†²çªï¼Œå¿½ç•¥</span></span><br><span class="line">    b: æŒ‡å‘å‡½æ•°,            <span class="comment">//å‡½æ•°å‘½åå†²çªï¼Œè¦†ç›–</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  alert(a); <span class="comment">//10</span></span><br><span class="line">  alert(b); <span class="comment">//undefined</span></span><br><span class="line">  alert(c); <span class="comment">//undefined</span></span><br><span class="line">  alert(d); <span class="comment">//function d()&#123;&#125;</span></span><br><span class="line">  alert(e); <span class="comment">//undefined</span></span><br><span class="line">  <span class="comment">//alert(x);     //ReferenceError: x is not defined</span></span><br><span class="line">  <span class="keyword">var</span> c = <span class="number">10</span>;</span><br><span class="line">  alert(c); <span class="comment">//10</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> e = <span class="function"><span class="keyword">function</span> <span class="title">_e</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  alert(e); <span class="comment">//function _e()&#123;&#125;</span></span><br><span class="line">  (<span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">  b = <span class="number">20</span>;</span><br><span class="line">  alert(b); <span class="comment">//20</span></span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>å‡½æ•°é¢„å¤„ç†æ—¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">AOï¼ˆtestï¼‰ &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‚æ•°ï¼š</span></span><br><span class="line">    a: <span class="number">10</span>,</span><br><span class="line">    b: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡½æ•°å£°æ˜ï¼š</span></span><br><span class="line">    d: æŒ‡å‘å‡½æ•°ï¼Œ</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å˜é‡å£°æ˜ï¼š</span></span><br><span class="line">    c: <span class="literal">undefined</span>,</span><br><span class="line">    e: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°æ‰§è¡Œæ—¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">AOï¼ˆtestï¼‰ &#123;</span><br><span class="line">    a: <span class="number">10</span>,</span><br><span class="line">    b: <span class="number">20</span>,</span><br><span class="line">    d: æŒ‡å‘å‡½æ•°ï¼Œ</span><br><span class="line">    c: <span class="number">10</span>,</span><br><span class="line">    e: æŒ‡å‘å‡½æ•°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†JavaScriptçš„å¯¹è±¡å±æ€§ç±»å‹</title>
      <link href="/2016/09/14/practice-object-attribute/"/>
      <url>/2016/09/14/practice-object-attribute/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="ä½•ä¸ºå¯¹è±¡"><a href="#ä½•ä¸ºå¯¹è±¡" class="headerlink" title="ä½•ä¸ºå¯¹è±¡"></a>ä½•ä¸ºå¯¹è±¡</h2><p>ç®€å•ç‚¹è¯´ï¼Œå¯¹è±¡åŒ…å«å±æ€§æˆ–æ–¹æ³•ï¼Œè€Œå¯¹è±¡çš„æ¯ä¸ªå±æ€§æˆ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªåå­—åˆéƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹è±¡å°±æ˜¯ä¸€ç»„åå€¼å¯¹ï¼ˆé”®å€¼å¯¹ï¼‰ï¼Œå…¶ä¸­å€¼å¯ä»¥æ˜¯æ•°æ®æˆ–å‡½æ•°ã€‚</p><p>æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯åŸºäºä¸€ä¸ªå¼•ç”¨ç±»å‹åˆ›å»ºçš„ï¼Œè¿™ä¸ªå¼•ç”¨ç±»å‹å¯ä»¥æ˜¯åŸç”Ÿç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰ç±»å‹ã€‚</p><h2 id="åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡"><a href="#åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡"></a>åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡</h2><p>åˆ›å»ºä¸€ä¸ª Object çš„å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">varperson = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">person.name = <span class="string">"Bob"</span>;</span><br><span class="line">person.age = <span class="number">24</span>;</span><br><span class="line">person.job = <span class="string">"Teacher"</span>;</span><br><span class="line"></span><br><span class="line">person.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”¨å¯¹è±¡å­—é¢é‡é‡æ–°åˆ›å»ºå¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Bob"</span>,</span><br><span class="line">  age: <span class="number">24</span>,</span><br><span class="line">  job: <span class="string">"Teacher"</span>,</span><br><span class="line"></span><br><span class="line">  sayName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ç”¨ä¸¤ç§æ–¹å¼åˆ›å»ºçš„ person å¯¹è±¡éƒ½æœ‰ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚</p></blockquote><h2 id="å±æ€§ç±»å‹"><a href="#å±æ€§ç±»å‹" class="headerlink" title="å±æ€§ç±»å‹"></a>å±æ€§ç±»å‹</h2><p>å±æ€§ç±»å‹åˆ†ä¸ºæ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§ã€‚</p><p>æ•°æ®å±æ€§æœ‰ 4 ä¸ªç‰¹æ€§ï¼š</p><ul><li><code>[[Configurable]]</code></li><li><code>[[Enumerable]]</code></li><li><code>[[Writable]]</code></li><li><code>[[Value]]</code></li></ul><p>è®¿é—®å™¨å±æ€§ä¹Ÿæœ‰ 4 ä¸ªç‰¹æ€§ï¼Œä¸åŒ…å«æ•°æ®å€¼ï¼ŒåŒ…å«ä¸€å¯¹å„¿ <code>getter</code> å’Œ <code>setter</code> å‡½æ•°ï¼š</p><ul><li><p><code>[[Configurable]]</code></p></li><li><p><code>[[Enumerable]]</code></p></li><li><p><code>[[Get]]</code></p></li><li><p><code>[[Set]]</code></p></li></ul><p>ä¿®æ”¹å±æ€§é»˜è®¤çš„ç‰¹æ€§<code>Object.defineProperty()</code>æ–¹æ³•ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š</p><ol><li>å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼›</li><li>å±æ€§çš„åå­—ï¼›</li><li>ä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡ï¼›</li></ol><p>æ•°æ®å±æ€§ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;&#125;ï¼›</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"name"</span>, &#123;</span><br><span class="line">    writeable: <span class="literal">false</span>,</span><br><span class="line">    configurable: <span class="literal">false</span>,</span><br><span class="line">    value: <span class="string">"Bob"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">alert(person.name);           <span class="comment">//"Bob"</span></span><br><span class="line">person.name = <span class="string">"Mike"</span>;</span><br><span class="line">alert(person.name);            <span class="comment">//"Bob"</span></span><br></pre></td></tr></table></figure><p>ä¾‹å­ä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸º name çš„å±æ€§ï¼Œç”±äº writable è®¾ç½®ä¸º false,name çš„å€¼æ˜¯â€œåªè¯»â€çš„ï¼Œä¸å¯ä¿®æ”¹ï¼›</p><p>æŠŠ configurable è®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºä¸èƒ½ä»å¯¹è±¡ä¸­åˆ é™¤ï¼ˆdeleteï¼‰å±æ€§ï¼Œè€Œä¸”ï¼Œä¸€æ—¦æŠŠå±æ€§å®šä¹‰ä¸ºä¸å¯é…ç½®çš„ï¼Œå†æ¬¡è°ƒç”¨ <code>Object.defineProperty()</code>æ–¹æ³•ä¿®æ”¹ writable ä¹‹å¤–çš„ç‰¹æ€§ï¼Œä¼šå¯¼è‡´é”™è¯¯ã€‚</p><p>åœ¨è°ƒç”¨<code>Object.defineProperty()</code>æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œ<code>configurableã€ enumerableã€ writable</code>ç‰¹æ€§çš„é»˜è®¤å€¼éƒ½æ˜¯<code>false</code>;</p><p>å¦‚æœä¸è°ƒç”¨<code>Object.defineProperty()</code>æ–¹æ³•æ—¶ï¼Œå³ç›´æ¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰çš„å±æ€§ï¼Œä»–ä»¬çš„<code>configurable enumerable writable</code>ç‰¹æ€§çš„é»˜è®¤å€¼éƒ½æ˜¯<code>true</code>ï¼Œ<code>value</code>ç‰¹æ€§ä¸ºæŒ‡å®šçš„å€¼ï¼ˆé»˜è®¤å€¼ä¸º<code>undefined</code>ï¼‰ï¼›</p><p>getter setter æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Bob"</span>,</span><br><span class="line">  job: <span class="string">"Teacher"</span>,</span><br><span class="line"></span><br><span class="line">  get age() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="number">1992</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  set age(val) &#123;</span><br><span class="line">    alert(<span class="string">"Age can't be set to "</span> + val);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(person.age); <span class="comment">//24</span></span><br><span class="line">person.age = <span class="number">100</span>; <span class="comment">//Age can't be set to 100</span></span><br><span class="line">alert(person.age); <span class="comment">//still 24</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç åˆ›å»ºäº†ä¸€ä¸ª person å¯¹è±¡ï¼Œå¹¶å®šä¹‰äº†ä¸¤ä¸ªé»˜è®¤çš„å±æ€§ï¼šname å’Œ job,è€Œä¸”åŒ…å«æœ‰ä¸€ä¸ª getter å‡½æ•°å’Œä¸€ä¸ª setter å‡½æ•°ã€‚</p><ul><li>getter å‡½æ•°è¿”å› age çš„å€¼ï¼›</li><li>setter å‡½æ•°è¿”å›è®¾ç½® age çš„å€¼ valï¼›</li></ul><p>å®šä¹‰å¤šä¸ªå±æ€§ï¼š<code>Object.defineProperties()</code>æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå¯¹è±¡å‚æ•°ï¼š</p><ol><li>ç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯è¦æ·»åŠ å’Œä¿®æ”¹å…¶å±æ€§çš„å¯¹è±¡ï¼›</li><li>ç¬¬äºŒä¸ªå¯¹è±¡çš„å±æ€§ä¸ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸­è¯æ·»åŠ æˆ–ä¿®æ”¹çš„å±æ€§ä¸€ä¸€å¯¹åº”ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(book, &#123;</span><br><span class="line">  _year: &#123;</span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="number">2016</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  edition: &#123;</span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  year: &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>._year;</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (val &gt; <span class="number">2016</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._year = val;</span><br><span class="line">        <span class="keyword">this</span>.edition += val - <span class="number">2016</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(book.year); <span class="comment">//2016</span></span><br><span class="line"><span class="built_in">console</span>.log(book.edition); <span class="comment">//1</span></span><br><span class="line">book.year = <span class="number">2018</span>;</span><br><span class="line"><span class="built_in">console</span>.log(book.edition); <span class="comment">//3</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç åœ¨ book å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸¤ä¸ªæ•°æ®å±æ€§ï¼ˆ<code>_year</code> å’Œ <code>edition</code>ï¼‰å’Œä¸€ä¸ªè®¿é—®å™¨å±æ€§ï¼ˆyearï¼‰ã€‚</p><p>è¯»å–å±æ€§çš„ç‰¹æ€§<code>Object.getOwnPropertyDescriptor()</code>æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li>å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼›</li><li>è¦è¯»å–å…¶æè¿°ç¬¦çš„å±æ€§åç§°ã€‚</li></ol><p>è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š</p><ul><li>æ•°æ®å±æ€§ï¼Œå¯¹è±¡çš„å±æ€§æœ‰<code>configurable ã€enumerableã€ writableã€value</code>ï¼›</li><li>è®¿é—®å™¨å±æ€§ï¼Œå¯¹è±¡çš„å±æ€§æœ‰<code>configurable ã€enumerableã€ getã€set</code>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(book, &#123;</span><br><span class="line">  _year: &#123;</span><br><span class="line">    value: <span class="number">2016</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  edition: &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  year: &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>._year;</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (val &gt; <span class="number">2016</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._year = val;</span><br><span class="line">        <span class="keyword">this</span>.edition += val - <span class="number">2016</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(book, <span class="string">"_year"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(descriptor.value); <span class="comment">//2016</span></span><br><span class="line"><span class="built_in">console</span>.log(descriptor.configurable); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> descriptor.get); <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(book, <span class="string">"year"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(descriptor.value); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(descriptor.enumerable); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> descriptor.get); <span class="comment">//function</span></span><br></pre></td></tr></table></figure><ul><li><code>æ•°æ®å±æ€§_year</code>ï¼Œvalue ç­‰äºæœ€åˆçš„å€¼ï¼Œconfigurable æ˜¯ falseï¼Œè€Œ get ç­‰äº undefinedï¼›</li><li><code>è®¿é—®å™¨å±æ€§ year</code>ï¼Œvalue ç­‰äº undefinedï¼Œenumerable æ˜¯ falseï¼Œè€Œ get æ˜¯ä¸€ä¸ªæŒ‡å‘ getter å‡½æ•°çš„æŒ‡é’ˆã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†JavaScriptçš„é¢å‘å¯¹è±¡</title>
      <link href="/2016/08/21/practice-object/"/>
      <url>/2016/08/21/practice-object/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="é¦–å…ˆï¼Œé¢å‘å¯¹è±¡æ˜¯ä»€ä¹ˆ"><a href="#é¦–å…ˆï¼Œé¢å‘å¯¹è±¡æ˜¯ä»€ä¹ˆ" class="headerlink" title="é¦–å…ˆï¼Œé¢å‘å¯¹è±¡æ˜¯ä»€ä¹ˆ"></a>é¦–å…ˆï¼Œé¢å‘å¯¹è±¡æ˜¯ä»€ä¹ˆ</h2><blockquote><p>æµ…æ˜¾åœ°è¯´ï¼Œ<strong>é¢å‘å¯¹è±¡</strong>å°±æ˜¯åªå…³æ³¨å¯¹è±¡æä¾›çš„åŠŸèƒ½ï¼Œä¸åœ¨ä¹å…¶å†…éƒ¨çš„å…·ä½“ç»†èŠ‚ï¼›</p><p>æ¯”å¦‚ï¼Œç”µè§†æœºï¼Œæˆ‘ä»¬çŸ¥é“æ€ä¹ˆæ‰“å¼€ã€å…³é—­ã€è°ƒå°ï¼Œä½†ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä¸çŸ¥é“å®ƒåˆ°åº•æ˜¯å¦‚ä½•æ‰“å¼€ã€å…³é—­ã€è°ƒå°çš„ã€‚</p><p>å†æ¯”å¦‚ï¼Œé»‘åŒ£å­ï¼›</p><p><strong>é¢å‘å¯¹è±¡æ˜¯ä¸€ç§é€šç”¨æ€æƒ³</strong>ï¼Œå¹¶éåªæœ‰ç¼–ç¨‹ä¸­æ‰ä½¿ç”¨ï¼Œä»»ä½•äº‹æƒ…éƒ½å¯ä»¥æ‰¾åˆ°å®ƒçš„å½±å­ã€‚</p></blockquote><h2 id="OOP-çš„ç‰¹ç‚¹"><a href="#OOP-çš„ç‰¹ç‚¹" class="headerlink" title="OOP çš„ç‰¹ç‚¹"></a>OOP çš„ç‰¹ç‚¹</h2><blockquote><p>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹ç‚¹ï¼š</p><p><strong>1. æŠ½è±¡</strong>â€”æŠ“ä½æ ¸å¿ƒé—®é¢˜ï¼›</p><p><strong>2. å°è£…</strong>â€”åªè€ƒè™‘åŠŸèƒ½ä½¿ç”¨ï¼Œä¸è€ƒè™‘å†…éƒ¨å®ç°ï¼›</p><p><strong>3. ç»§æ‰¿</strong>â€”ä»å·²æœ‰çš„å¯¹è±¡ä¸Šï¼Œç»§æ‰¿å‡ºæ–°çš„å¯¹è±¡ï¼›</p></blockquote><h2 id="åŸå‹"><a href="#åŸå‹" class="headerlink" title="åŸå‹"></a>åŸå‹</h2><blockquote><p>å®šä¹‰å°±ä¸ç²˜è´´äº†ï¼Œé€šä¿—æ»´è¯´ï¼Œprototype ç±»ä¼¼äºæˆ‘ä»¬ css ä¸­çš„ classï¼›</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬ç»™å¤šä¸ª div æ·»åŠ ç›¸åŒçš„å±æ€§æ—¶ï¼Œå°±ä¼šä½¿ç”¨ classï¼›åŒæ ·çš„ï¼Œä½¿ç”¨ prototype å°±æ˜¯éœ€è¦æ·»åŠ å¤šä¸ªæ–¹æ³•ï¼š</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CreatePerson.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line">CreatePerson.prototype.showQQ = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"æˆ‘çš„qqå·æ˜¯ï¼š"</span> + <span class="keyword">this</span>.qq);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ä»£ç ä¸­ï¼Œä¸€ä¸ªäººçš„åå­—å’Œ QQ å·ï¼Œå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„å‡½æ•°æ¥è§£å†³ï¼Œè‹¥ä¸¤ä¸ªï¼Œåä¸ªçš„å°±éº»çƒ¦äº†ï¼Œå› æ­¤ä½¿ç”¨åŸå‹<strong>prototype</strong>å¯ä»¥å¾ˆå¥½åœ°è§£å†³<strong>å‡½æ•°é‡å¤</strong>å¯¼è‡´çš„<strong>èµ„æºæµªè´¹</strong>ã€‚</p></blockquote><h2 id="ç±»å’Œå¯¹è±¡çš„å…³ç³»"><a href="#ç±»å’Œå¯¹è±¡çš„å…³ç³»" class="headerlink" title="ç±»å’Œå¯¹è±¡çš„å…³ç³»"></a>ç±»å’Œå¯¹è±¡çš„å…³ç³»</h2><blockquote><p><strong>å¯¹è±¡</strong>ï¼Œç”±æ–¹æ³•å’Œå±æ€§ç»„æˆï¼›</p><p><strong>ç±»</strong>ï¼Œæ¯”å¦‚æ•°ç»„ Arrayï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ arr æ˜¯<strong>å¯¹è±¡</strong>ï¼ŒArray æ˜¯<strong>ç±»</strong>ï¼›</p><p>æˆ‘ä»¬å¯ä»¥æŠŠ<strong>ç±»</strong>çœ‹åšæ˜¯åˆ¶ä½œäº§å“çš„<strong>ç£¨å…·</strong>ï¼Œè€Œ<strong>å¯¹è±¡</strong>å°±æ˜¯ç”±æ¨¡å…·åˆ¶ä½œå‡ºæ¥çš„<strong>äº§å“</strong>ã€‚</p></blockquote><ul><li><strong>ç±»</strong> â€” æ¨¡å…·ï¼›</li><li><strong>å¯¹è±¡</strong> â€” äº§å“ï¼›</li></ul><h2 id="ä»£ç ï¼šé¢å‘è¿‡ç¨‹"><a href="#ä»£ç ï¼šé¢å‘è¿‡ç¨‹" class="headerlink" title="ä»£ç ï¼šé¢å‘è¿‡ç¨‹"></a>ä»£ç ï¼šé¢å‘è¿‡ç¨‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, qq</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åŠ newä¹‹åï¼Œç³»ç»Ÿå·å·ç»™åŠ äº†var this=new Object();</span></span><br><span class="line">  <span class="comment">// var person1 = new Object();</span></span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.qq = qq;</span><br><span class="line">  <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.showQQ = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æˆ‘çš„QQå·æ˜¯"</span> + <span class="keyword">this</span>.qq);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// åŠ newåè¿™é‡Œåˆå·å·åœ°æ‰§è¡Œreturn this;</span></span><br><span class="line">  <span class="comment">// return person1;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> createPerson(<span class="string">"æ¨å­é¾™"</span>, <span class="string">"33441524"</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> createPerson(<span class="string">"ç‹å¾·å½ª"</span>, <span class="string">"66111314"</span>);</span><br><span class="line"></span><br><span class="line">person1.showName();</span><br><span class="line">person1.showQQ();</span><br><span class="line"></span><br><span class="line">person2.showName();</span><br><span class="line">person2.showQQ();</span><br><span class="line"><span class="built_in">console</span>.log(person1.showName == person2.showName);</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šä»£ç æ˜¯ç”±<strong>å·¥å‚æ–¹å¼</strong>åˆ›å»º;</p><p>ç”¨æ„é€ å‡½æ•°<code>function createPerson(name, qq) {}</code>åˆ›å»ºä¸€ä¸ªç±»ï¼›</p><p>è°ƒç”¨å‡½æ•°ä½¿ç”¨å…³é”®å­— newï¼š<code>var person1 = new createPerson()</code>;è¿™æ—¶ç³»ç»Ÿå°±æ˜¯æ›¿ä½ åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½å¯¹è±¡<code>var this=new Object();</code>å¹¶ä¸”è¿˜æ›¿ä½ è¿”å›äº†è¿™ä¸ªå¯¹è±¡<code>return this;</code></p><p><strong>å·¥å‚æ–¹å¼</strong>çš„é—®é¢˜ï¼šå‡½æ•°é‡å¤ä½¿ç”¨å¯¼è‡´èµ„æºæµªè´¹ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(person1.showName == person2.showName); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><h2 id="ä»£ç ï¼šé¢å‘å¯¹è±¡"><a href="#ä»£ç ï¼šé¢å‘å¯¹è±¡" class="headerlink" title="ä»£ç ï¼šé¢å‘å¯¹è±¡"></a>ä»£ç ï¼šé¢å‘å¯¹è±¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CreatePerson</span>(<span class="params">name, qq</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.qq = qq;</span><br><span class="line">&#125;</span><br><span class="line">CreatePerson.prototype.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"æˆ‘æ˜¯"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line">CreatePerson.prototype.showQQ = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"æˆ‘çš„qqå·æ˜¯ï¼š"</span> + <span class="keyword">this</span>.qq);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 =<span class="keyword">new</span> CreatePerson(<span class="string">"ç‹å¾·å½ª"</span>, <span class="number">330441338</span>);</span><br><span class="line"><span class="keyword">var</span> person2 =<span class="keyword">new</span> CreatePerson(<span class="string">"æ¨å­é¾™"</span>, <span class="number">369898363</span>);</span><br><span class="line"></span><br><span class="line">person1.showName();</span><br><span class="line">person1.showQQ();</span><br><span class="line"></span><br><span class="line">person2.showName();</span><br><span class="line">person2.showQQ();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1.showName == person2.showName)ï¼›</span><br></pre></td></tr></table></figure><h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><blockquote><ol><li>ä½¿ç”¨<strong>æ„é€ å‡½æ•°åŠ å±æ€§</strong>ï¼›</li><li>ä½¿ç”¨<strong>åŸå‹åŠ æ–¹æ³•</strong>ï¼›<br>è¿™æ—¶<code>console.log(person1.showName == person2.showName)ï¼›</code>ï¼Œä¼šæ˜¯<code>true</code>ï¼Œå› ä¸º person1 å’Œ person2 éƒ½æ¥è‡ªåŒä¸ªåŸå‹:<code>CreatePerson.prototype.showName()</code>ã€‚</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®è·µ|JSåŒ€é€Ÿè¿åŠ¨å’Œç¼“å†²è¿åŠ¨</title>
      <link href="/2016/08/09/practice-speed-move/"/>
      <url>/2016/08/09/practice-speed-move/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•ï¼šæœ‰ä»£ç æœ‰æ€»ç»“çš„ JS åŒ€é€Ÿè¿åŠ¨å’Œç¼“å†²è¿åŠ¨å­¦ä¹ æŠ¥å‘Š</p></blockquote><a id="more"></a><h2 id="JS-åŒ€é€Ÿè¿åŠ¨çš„å­¦ä¹ æ€»ç»“"><a href="#JS-åŒ€é€Ÿè¿åŠ¨çš„å­¦ä¹ æ€»ç»“" class="headerlink" title="JS åŒ€é€Ÿè¿åŠ¨çš„å­¦ä¹ æ€»ç»“"></a>JS åŒ€é€Ÿè¿åŠ¨çš„å­¦ä¹ æ€»ç»“</h2><h3 id="åŒ€é€Ÿè¿åŠ¨è¦ç‚¹"><a href="#åŒ€é€Ÿè¿åŠ¨è¦ç‚¹" class="headerlink" title="åŒ€é€Ÿè¿åŠ¨è¦ç‚¹"></a>åŒ€é€Ÿè¿åŠ¨è¦ç‚¹</h3><ol><li>ç‚¹å‡»â€œå¼€å§‹â€ï¼Œç‰©ä½“å‘å³åŒ€é€Ÿè¿åŠ¨ 600 ä¸ªåƒç´ ï¼›ç‚¹å‡»â€œè¿”å›â€ï¼Œç‰©ä½“åŒ€é€Ÿå›åˆ°åˆå§‹ä½ç½®ï¼›</li><li>css æ ·å¼è¡¨ä¸­ï¼Œè®¾ç½®ç»å¯¹å®šä½ï¼›</li><li>JS ä»£ç ä¸­ï¼š<ul><li>åˆå§‹åŒ–å®šæ—¶å™¨ï¼štimer=null;</li><li>å¼€å§‹è¿åŠ¨æ—¶ï¼Œå…³é—­å·²æœ‰çš„å®šæ—¶å™¨:clearInterval(timer);ï¼›å¦åˆ™ä½ è¿ç»­ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œç‰©ä½“ä¼šå› ä¸ºå®šæ—¶å™¨çš„æ¯æ¬¡å¼€å¯ä½†æ²¡æœ‰æ¸…é™¤æ¯æ¬¡çš„å¼€å¯ï¼Œä¼šå¯¼è‡´ä¸€å¡ä¸€å¡çš„è¿åŠ¨ï¼›</li><li>è®¾ç½® speedï¼Œæ ¹æ®ç›®æ ‡å€¼å’Œ offsetLeft ä¹‹å·®æ¥åˆ¤æ–­æ­£è´Ÿï¼›</li><li>ä½¿ç”¨ if()åˆ¤æ–­ï¼ŒæŠŠè¿åŠ¨å’Œåœæ­¢éš”å¼€ï¼›</li></ul></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åŒ€é€Ÿè¿åŠ¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 300px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">inset</span> <span class="selector-id">#890</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#588</span>;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>; <span class="comment">/*è®¾ç½®ç»å¯¹å®šä½*/</span></span></span><br><span class="line"><span class="undefined">        left: 0;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">box-shadow</span>: 10<span class="selector-tag">px</span> 9<span class="selector-tag">px</span> 12<span class="selector-tag">px</span> <span class="selector-id">#599</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="undefined">        font-family: "æ–°å®‹ä½“";</span></span><br><span class="line"><span class="undefined">        font-size: 30px;</span></span><br><span class="line"><span class="undefined">        color: white;</span></span><br><span class="line"><span class="undefined">        margin-top: 14px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oBtn1 = <span class="built_in">document</span>.getElementById(<span class="string">"btn1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oBtn2 = <span class="built_in">document</span>.getElementById(<span class="string">"btn2"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oPar = <span class="built_in">document</span>.getElementById(<span class="string">"par1"</span>);</span></span><br><span class="line"><span class="javascript">        oBtn1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(600);</span></span><br><span class="line"><span class="javascript">          oPar.innerHTML = <span class="string">"ç‚¹å‡»è¿”å›ï¼Œæˆ‘ä¼šå›åˆ°èµ·ç‚¹"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        oBtn2.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(0);</span></span><br><span class="line"><span class="javascript">          oPar.innerHTML = <span class="string">"ç‚¹å‡»å¼€å§‹,æˆ‘å°†åŒ€é€Ÿè¿åŠ¨"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">iTarget</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">//å¼€å§‹è¿åŠ¨å‰ï¼Œæ¸…é™¤å®šæ—¶å™¨</span></span></span><br><span class="line"><span class="undefined">        clearInterval(timer);</span></span><br><span class="line"><span class="javascript">        timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//è®¾ç½®speedçš„åˆå§‹å€¼ä¸º0,å¹¶ä¸”æ ¹æ®ç›®æ ‡å€¼åˆ¤æ–­æ­£è´Ÿ</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> speed = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (oDiv.offsetLeft &gt; iTarget) &#123;</span></span><br><span class="line"><span class="undefined">            speed = -10;</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">            speed = 10;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//ç”¨ifå’Œelseéš”å¼€è¿åŠ¨å’Œåœæ­¢</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (oDiv.offsetLeft == iTarget) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ¸…é™¤å®šæ—¶å™¨</span></span></span><br><span class="line"><span class="undefined">            clearInterval(timer);</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            oDiv.style.left = oDiv.offsetLeft + speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;, 30);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btn1"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"å¼€å§‹"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btn2"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"è¿”å›"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"par1"</span>&gt;</span>ç‚¹å‡»å¼€å§‹,æˆ‘å°†åŒ€é€Ÿè¿åŠ¨<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…³äº-speed-çš„-Bug"><a href="#å…³äº-speed-çš„-Bug" class="headerlink" title="å…³äº speed çš„ Bug"></a>å…³äº speed çš„ Bug</h3><ol><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¾ç½® speed ä¸ºå¶æ•°ï¼Œå¦‚ä¸Šæ‰€ç¤ºä»£ç ï¼Œä¼šå¦‚æœŸåˆ°è¾¾ç›®æ ‡ç‚¹ï¼›</p></li><li><p>è‹¥ speed ä¸ºå¥‡æ•°å‘¢ï¼Ÿ</p></li><li><p>è®¾ speed=7ï¼Œç›®æ ‡ç‚¹ä¸º 100ï¼Œä» 0 å¼€å§‹åŒ€é€Ÿè¿åŠ¨ï¼Œç»è¿‡ 14 æ¬¡çš„é€’åŠ ï¼Œåˆ°è¾¾ 98 å¤„ï¼Œè¿™æ—¶ï¼Œé—®é¢˜å‡ºç°äº†ï¼šè‹¥å†é€’åŠ  7ï¼Œå°±ä¼šè¶…è¿‡ç›®æ ‡ç‚¹ 100ï¼Œè‹¥ä¸é€’åŠ ï¼Œå°±ä¼šè¾¾ä¸åˆ°ç›®æ ‡ç‚¹ï¼›æ‰€ä»¥ï¼Œå¼€å§‹å‰åå¡é¡¿ã€‚</p></li><li><p>å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><ul><li>ä½¿ç”¨ <code>Math.abs()</code>;</li><li>speed æœ‰å¯èƒ½ä¸ºæ­£ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸ºè´Ÿï¼Œæˆ‘ä»¬ä½¿ç”¨ç»å¯¹å€¼ï¼Œè®©ç›®æ ‡å’Œç‰©ä½“ä¹‹é—´çš„è·ç¦»<code>&lt;=7</code>,å³ï¼š<code>Math.abs(iTarget-ele.offsetLeft) &lt;= 7</code></li><li>è¿™æ—¶ä¸ç®¡æ€ä¹ˆæ ·ï¼Œéƒ½æ˜¯ä¸è¶³ 7 ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¨å·§åœ°è®¤ä¸ºå®ƒå·²ç» åˆ°è¾¾ç›®æ ‡ç‚¹äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥æ¸…é™¤å®šæ—¶å™¨ï¼›ä½ å†è¯•è¯•çœ‹ï¼Œå°±ä¸ä¼šæ™ƒåŠ¨äº†ï¼Œä¸è¿‡è¿˜æ²¡è¾¾åˆ°ç›®æ ‡ç‚¹ã€‚</li><li>ä¸ºäº†ç²¾å‡†åœ°è¾¾åˆ°ç›®æ ‡ç‚¹ï¼Œæˆ‘ä»¬å°±è®¤ä¸º left ç›´æ¥åˆ°è¾¾ç›®æ ‡ç‚¹ï¼Œå³ï¼š<code>ele.style.left = iTarget + &quot;px&quot;</code>;</li></ul></li><li><p>æœ€åï¼šåªæœ‰åŒ€é€Ÿè¿åŠ¨æ‰ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼›ç¼“å†²è¿åŠ¨æ²¡æœ‰ï¼Œå› ä¸ºå®ƒçš„ speed æ˜¯ä¸€ç›´éšä¹‹å˜åŒ–ï¼Œè¶Šæ¥è¶Šå°ï¼Œç›´åˆ°åˆ°è¾¾ç›®æ ‡ç‚¹ã€‚</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åŒ€é€Ÿè¿åŠ¨ä¹‹speed<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 200px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#880</span>;</span></span><br><span class="line"><span class="undefined">        margin-top: 35px;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        left: 0;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="undefined">        font-size: 24px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="undefined">        line-height: 200px;</span></span><br><span class="line"><span class="undefined">        margin-top: 0;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div2</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div3</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 0;</span></span><br><span class="line"><span class="undefined">        height: 300px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        left: 300px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div3</span> &#123;</span></span><br><span class="line"><span class="undefined">        left: 600px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn_1 = <span class="built_in">document</span>.getElementById(<span class="string">"btn1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn_2 = <span class="built_in">document</span>.getElementById(<span class="string">"btn2"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn_3 = <span class="built_in">document</span>.getElementById(<span class="string">"btn3"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        btn_1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(600);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        btn_2.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(300);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        btn_3.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(0);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">iTarget</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="undefined">        clearInterval(timer);</span></span><br><span class="line"><span class="javascript">        timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> speed = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (iTarget &gt; ele.offsetLeft) &#123;</span></span><br><span class="line"><span class="undefined">            speed = 7;</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">            speed = -7;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(iTarget - ele.offsetLeft) &lt;= <span class="number">7</span>) &#123;</span></span><br><span class="line"><span class="undefined">            clearInterval(timer);</span></span><br><span class="line"><span class="javascript">            ele.style.left = iTarget + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            ele.style.left = ele.offsetLeft + speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;, 30);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn1"</span> <span class="attr">value</span>=<span class="string">"600px"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn2"</span> <span class="attr">value</span>=<span class="string">"300px"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> <span class="attr">value</span>=<span class="string">"0px"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯åŒ€é€Ÿè¿åŠ¨<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŒ€é€Ÿè¿åŠ¨ä¹‹åˆ†äº«æ "><a href="#åŒ€é€Ÿè¿åŠ¨ä¹‹åˆ†äº«æ " class="headerlink" title="åŒ€é€Ÿè¿åŠ¨ä¹‹åˆ†äº«æ "></a>åŒ€é€Ÿè¿åŠ¨ä¹‹åˆ†äº«æ </h3><ol><li>å½“é¼ æ ‡ç»è¿‡â€œåˆ†äº«â€æ—¶ï¼Œä¼šå¼¹å‡ºæ•´ä¸ªåˆ†äº«æ ï¼›é¼ æ ‡ç¦»å¼€æ—¶ï¼Œåˆä¼šæ¢å¤åˆ°åˆå§‹çŠ¶æ€ï¼›</li><li>css æ ·å¼è¡¨ä¸­ï¼šè®¾ç½®ç»å¯¹å®šä½ï¼Œå¹¶è®¾ç½® left ä¹‹ä¸º-150pxï¼Œéšè—åˆ†äº«æ ï¼›</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ†äº«æ <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      * &#123;</span></span><br><span class="line"><span class="undefined">        margin: 0px;</span></span><br><span class="line"><span class="undefined">        padding: 0px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 300px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#f60</span>;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        top: 100px;</span></span><br><span class="line"><span class="undefined">        left: -150px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 30px;</span></span><br><span class="line"><span class="undefined">        height: 54px;</span></span><br><span class="line"><span class="undefined">        padding-top: 6px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#c38</span>;</span></span><br><span class="line"><span class="undefined">        color: white;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        right: -30px;</span></span><br><span class="line"><span class="undefined">        top: 120px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">        oDiv.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(0);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        oDiv.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(-150);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">iTarget</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="undefined">        clearInterval(timer);</span></span><br><span class="line"><span class="javascript">        timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//offsetLeft:æ ¹æ®å®šä½çš„å·¦è¾¹è·ï¼Œæ‰€ä»¥è¦è®¾ç½®divçš„ç»å¯¹å®šä½</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> speed = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (oDiv.offsetLeft &gt; iTarget) &#123;</span></span><br><span class="line"><span class="undefined">            speed = -10;</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">            speed = 10;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (oDiv.offsetLeft == iTarget) &#123;</span></span><br><span class="line"><span class="undefined">            clearInterval(timer);</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            oDiv.style.left = oDiv.offsetLeft + speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;, 30);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>åˆ†äº«<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="åŒ€é€Ÿè¿åŠ¨ä¹‹æ·¡å…¥æ·¡å‡º"><a href="#åŒ€é€Ÿè¿åŠ¨ä¹‹æ·¡å…¥æ·¡å‡º" class="headerlink" title="åŒ€é€Ÿè¿åŠ¨ä¹‹æ·¡å…¥æ·¡å‡º"></a>åŒ€é€Ÿè¿åŠ¨ä¹‹æ·¡å…¥æ·¡å‡º</h3><ol><li>æ‰€è°“æ·¡å…¥æ·¡å‡ºï¼Œå°±æ˜¯å½“é¼ æ ‡ç§»åˆ°ç›®æ ‡æ—¶ï¼Œç›®æ ‡çš„é€æ˜åº¦ä¼šåŒ€é€Ÿæ¢å¤åˆ° 100%ï¼Œåä¹‹ï¼Œé€æ˜åº¦ä¼šè¿”å›åˆ°åˆå§‹å€¼ï¼›</li><li><p>css æ ·å¼è¡¨ä¸­ï¼Œé€æ˜åº¦çš„è®¾ç½®è€ƒè™‘æµè§ˆå™¨å…¼å®¹ï¼š</p><ul><li><code>IEï¼šfilter: alpha(opacity:30)</code>;</li><li>å…¶å®ƒï¼š<code>opacity: 0.3</code>;</li></ul></li><li><p>è¿™é‡Œå¯ä¸å…³ offset ä»€ä¹ˆäº‹ï¼Œé‚£æ€ä¹ˆåŠå‘¢?</p><p>å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå˜é‡ï¼Œå¹¶èµ‹å€¼ç»™å®ƒï¼Œæ¯”å¦‚ï¼švar alpha=30ï¼›</p><p>ç„¶åï¼Œå°† speed çš„å€¼é€’åŠ ç»™å®ƒï¼šalpha = alpha + speed;</p><p>è¿™æ ·ï¼Œåªæ˜¯å°†æ¯æ¬¡çš„ speed å€¼èµ‹ç»™å˜é‡ alphaï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å®šæ—¶å™¨æ¥åŒ€é€Ÿæ”¹å˜é€æ˜åº¦ã€‚</p></li><li><p>ç”±äºå…¼å®¹é—®é¢˜ï¼Œæˆ‘ä»¬åˆ†å¼€å¤„ç†ï¼š</p><ul><li><code>oDiv.style.filter = &quot;alpha(opacity:&#39; + alpha + &#39;)&quot;</code>;</li><li><code>oDiv.style.opacity = alpha/100;</code>(å› ä¸ºåˆå§‹å€¼æ˜¯ 30)</li></ul></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ·¡å…¥æ·¡å‡º<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 300px;</span></span><br><span class="line"><span class="undefined">        height: 150px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#880</span>;</span></span><br><span class="line"><span class="undefined">        filter: alpha(opacity: 30);</span></span><br><span class="line"><span class="css">        <span class="selector-tag">opacity</span>: 0<span class="selector-class">.3</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">        oDiv.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          getChange(100);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        oDiv.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          getChange(30);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> alpha = <span class="number">30</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">getChange</span>(<span class="params">iTarget</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        clearInterval(timer);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> speed = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (alpha &lt; iTarget) &#123;</span></span><br><span class="line"><span class="undefined">            speed = 10;</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">            speed = -10;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (alpha == iTarget) &#123;</span></span><br><span class="line"><span class="undefined">            clearInterval(timer);</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">            alpha += speed;</span></span><br><span class="line"><span class="javascript">            oDiv.style.filter = <span class="string">"alpha(opacity:' + alpha + ')"</span>;</span></span><br><span class="line"><span class="undefined">            oDiv.style.opacity = alpha / 100;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;, 30);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="JS-ç¼“å†²è¿åŠ¨çš„å­¦ä¹ æ€»ç»“"><a href="#JS-ç¼“å†²è¿åŠ¨çš„å­¦ä¹ æ€»ç»“" class="headerlink" title="JS ç¼“å†²è¿åŠ¨çš„å­¦ä¹ æ€»ç»“"></a>JS ç¼“å†²è¿åŠ¨çš„å­¦ä¹ æ€»ç»“</h2><h3 id="ç¼“å†²è¿åŠ¨çš„è¦ç‚¹"><a href="#ç¼“å†²è¿åŠ¨çš„è¦ç‚¹" class="headerlink" title="ç¼“å†²è¿åŠ¨çš„è¦ç‚¹"></a>ç¼“å†²è¿åŠ¨çš„è¦ç‚¹</h3><ol><li>é¡¾åæ€ä¹‰ï¼Œæ‰€è°“ç¼“å†²ï¼Œå°±æ˜¯è¯´é€Ÿåº¦ä¸åŒï¼›åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œè·ç¦»è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šå¤§ï¼›è·ç¦»è¶Šå°ï¼Œé€Ÿåº¦ä¹Ÿå°±è¶Šå°ã€‚</li><li>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦æ”¹å˜ speedï¼Œå°±åŸºæœ¬ä¸Š OKã€‚</li><li>é¦–å…ˆï¼Œé€šè¿‡å¾—åˆ°ä½ç§»é‡ï¼Œå†é™¤ä»¥ä¸€ä¸ªæ•°å€¼ï¼Œå°±å¯ä»¥æ”¹å˜é€Ÿåº¦ï¼š<code>var speed = (iTarget - ele.offsetLeft)/10;</code></li><li><p>ç„¶åï¼Œå› ä¸ºæ˜¯å˜é€Ÿï¼Œæ‰€ä»¥æœ‰å¯èƒ½å‡ºç°å°æ•°ï¼Œä¸è¶³ä»¥è¾¾åˆ°ç›®æ ‡å€¼ï¼›è¿™æ—¶ï¼Œé€šè¿‡ Math å¯¹è±¡ï¼Œå¯ä»¥ä½¿ speed å–æ•´ï¼Œè§£å†³ä¸è¶³ 1 ä¸ªåƒç´ çš„é—®é¢˜ï¼š</p><ul><li>å½“ <code>speed&gt;0</code> æ—¶ï¼Œç‰©ä½“ä»å·¦å¾€å³è¿åŠ¨ï¼Œç¦»ç›®æ ‡å€¼è¿˜å·®ä¸è¶³ 1pxï¼Œæ‰€ä»¥æˆ‘ä»¬å°† speed å‘ä¸Šå–æ•´ï¼Œ<code>Math.ceil(speed)</code>;</li><li>å½“ <code>speed&lt;0</code> æ—¶ï¼Œåä¹‹ï¼Œç¦»ç›®æ ‡å€¼è¿˜å·®ä¸è¶³-1px,ç”±äºæ˜¯è´Ÿæ•°ï¼Œæˆ‘ä»¬å‘ä¸‹å–æ•´ï¼Œæ¯”å¦‚-0.9ï¼Œé€šè¿‡ <code>Math.floor(-0.9)</code>ï¼Œå¾—å‡º-1ï¼›</li></ul></li><li><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶èµ‹å€¼ç»™ speedï¼š<code>speed = speed&gt;0 ? Math.ceil(speed) : Math.floor(speed);</code></p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç¼“å†²è¿åŠ¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 200px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#880</span>;</span></span><br><span class="line"><span class="undefined">        margin-top: 35px;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        left: 0;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="undefined">        font-size: 24px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="undefined">        line-height: 200px;</span></span><br><span class="line"><span class="undefined">        margin-top: 0;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div2</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div3</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 0;</span></span><br><span class="line"><span class="undefined">        height: 300px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        left: 300px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div3</span> &#123;</span></span><br><span class="line"><span class="undefined">        left: 600px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn_1 = <span class="built_in">document</span>.getElementById(<span class="string">"btn1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn_2 = <span class="built_in">document</span>.getElementById(<span class="string">"btn2"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn_3 = <span class="built_in">document</span>.getElementById(<span class="string">"btn3"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        btn_1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(600);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        btn_2.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(300);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        btn_3.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          startMove(0);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">iTarget</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="undefined">        clearInterval(timer);</span></span><br><span class="line"><span class="javascript">        timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//é€šè¿‡ä½ç§»é‡é™¤ä»¥10ï¼Œä½¿speedå˜é€Ÿï¼Œä»¥è‡´å®ç°å‡é€Ÿã€åœæ­¢ã€‚</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> speed = (iTarget - ele.offsetLeft) / <span class="number">10</span>;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//å–æ•´ï¼Œè§£å†³æœ€åä¸è¶³1pxçš„ä½ç§»é‡è¢«å¿½ç•¥çš„é—®é¢˜ã€‚</span></span></span><br><span class="line"><span class="javascript">          speed = speed &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(speed) : <span class="built_in">Math</span>.floor(speed);</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (ele.offsetLeft == iTarget) &#123;</span></span><br><span class="line"><span class="undefined">            clearInterval(timer);</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            ele.style.left = ele.offsetLeft + speed + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;, 30);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn1"</span> <span class="attr">value</span>=<span class="string">"600px"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn2"</span> <span class="attr">value</span>=<span class="string">"300px"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> <span class="attr">value</span>=<span class="string">"0px"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ç¼“å†²è¿åŠ¨<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®è·µ|åˆ¶ä½œä¸€ä¸ªç®€æ˜“æ•°ç æ—¶é’Ÿ</title>
      <link href="/2016/08/04/practice-easy-clock/"/>
      <url>/2016/08/04/practice-easy-clock/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ­£å¸¸æ˜¾ç¤ºæ—¶é—´çš„æ—¶åˆ†ç§’ï¼Œå½“é¼ æ ‡ç§»ä¸Šå»çš„æ—¶å€™ï¼Œåˆ‡æ¢æˆå¹´æœˆæ—¥</p><p><img src="http://img1.sycdn.imooc.com/57a423af0001050406990285.gif" alt="Gif"></p><p>çº¿ä¸Šæ¼”ç¤º<a href="https://yangtao2o.github.io/clock/" target="_blank" rel="noopener">ã€æˆ³æˆ‘ã€‘</a></p><h2 id="ä¸»è¦ç‰¹è‰²"><a href="#ä¸»è¦ç‰¹è‰²" class="headerlink" title="ä¸»è¦ç‰¹è‰²"></a>ä¸»è¦ç‰¹è‰²</h2><ol><li>ç®€æ´</li><li>é‡‘å±è‰²å½©</li><li>setInterval()â€“&gt;å®šæ—¶å™¨</li><li>è¿ç”¨äº‹ä»¶ onmouseover()å’Œ onmouseout()ï¼Œä½¿æ—¶é—´ä¸æ—¥æœŸä¹‹é—´è‡ªå¦‚åˆ‡æ¢</li><li>ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œè¿˜æœ›å¤§å®¶ä¸€èµ·ä¿®æ”¹ï¼Œä½¿ä¹‹æ›´åŠ å®Œå–„</li></ol><h2 id="ä¸€äº›é—®é¢˜"><a href="#ä¸€äº›é—®é¢˜" class="headerlink" title="ä¸€äº›é—®é¢˜"></a>ä¸€äº›é—®é¢˜</h2><p>å„ä¸ªæµè§ˆå™¨çš„æ˜¾ç¤ºä¸æ˜¯å¾ˆç†æƒ³ï¼Œæˆ‘å·²ç»æƒ³å°½å„ç§åŠæ³•ï¼Œä½¿ä¹‹å¹³ç¨³å±•ç°ï¼›</p><ol><li>ç«ç‹â€“&gt;è¿›è¡Œäº‹ä»¶åˆ‡æ¢æ—¶ï¼Œæµ®åº¦æ¯”è¾ƒå¤§ï¼›</li><li>è°·æ­Œâ€“&gt;å®Œç¾è¿è¡Œ(å»æ‰æŸäº›æ ·å¼ï¼‰ï¼›</li><li>IEâ€“&gt;é™¤äº†æœ€æ–°çš„ï¼Œå…¶ä»–çš„ä¸æ•¢å¤šæƒ³ï¼›</li></ol><h2 id="æ—¶åˆ†ç§’"><a href="#æ—¶åˆ†ç§’" class="headerlink" title="æ—¶åˆ†ç§’"></a>æ—¶åˆ†ç§’</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> imgs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">checkTime</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>) <span class="keyword">return</span> <span class="string">"0"</span> + x;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="string">""</span> + x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">oShowTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> oHou = oDate.getHours();</span><br><span class="line">    <span class="keyword">var</span> oMin = oDate.getMinutes();</span><br><span class="line">    <span class="keyword">var</span> oSec = oDate.getSeconds();</span><br><span class="line">    <span class="keyword">var</span> str = checkTime(oHou) + checkTime(oMin) + checkTime(oSec);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">      imgs[i].src = <span class="string">"images/"</span> + str[i] + <span class="string">".JPG"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  setInterval(oShowTime, <span class="number">1000</span>);</span><br><span class="line">  oShowTime();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ—¶é—´ä¸æ—¥æœŸäº‹ä»¶åˆ‡æ¢"><a href="#æ—¶é—´ä¸æ—¥æœŸäº‹ä»¶åˆ‡æ¢" class="headerlink" title="æ—¶é—´ä¸æ—¥æœŸäº‹ä»¶åˆ‡æ¢"></a>æ—¶é—´ä¸æ—¥æœŸäº‹ä»¶åˆ‡æ¢</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line">  <span class="keyword">var</span> imgs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">/*åˆ¤æ–­è·å–åˆ°çš„æ•°å­—æ˜¯å¦å°äº10*/</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">checkTime</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>) <span class="keyword">return</span> <span class="string">"0"</span> + x;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="string">""</span> + x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*é¼ æ ‡ç‚¹å‡»äº‹ä»¶*/</span></span><br><span class="line">  oDiv.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearInterval(timer);</span><br><span class="line">    fnDate();</span><br><span class="line">  &#125;;</span><br><span class="line">  oDiv.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearInterval(timer);</span><br><span class="line">    fnTime();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*è·å–çš„æ—¥æœŸå‡½æ•°*/</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fnDate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">oShowDate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">      <span class="keyword">var</span> oYea = oDate.getFullYear();</span><br><span class="line">      oYea = oYea.toString();</span><br><span class="line">      <span class="keyword">var</span> oMon = oDate.getMonth() + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">var</span> oDay = oDate.getDay();</span><br><span class="line">      <span class="keyword">var</span> str = oYea.substr(<span class="number">2</span>, <span class="number">2</span>) + checkTime(oMon) + checkTime(oDay);</span><br><span class="line">      <span class="keyword">var</span> aPar = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">        imgs[i].src = <span class="string">"images/"</span> + str[i] + <span class="string">".JPG"</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; aPar.length; j++) &#123;</span><br><span class="line">        aPar[j].innerHTML = <span class="string">"-"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    timer = setInterval(oShowDate, <span class="number">1000</span>);</span><br><span class="line">    oShowDate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*è·å–çš„æ—¶é—´å‡½æ•°*/</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fnTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">oShowTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">      <span class="keyword">var</span> oHou = oDate.getHours();</span><br><span class="line">      <span class="keyword">var</span> oMin = oDate.getMinutes();</span><br><span class="line">      <span class="keyword">var</span> oSec = oDate.getSeconds();</span><br><span class="line">      <span class="keyword">var</span> str = checkTime(oHou) + checkTime(oMin) + checkTime(oSec);</span><br><span class="line">      <span class="keyword">var</span> aPar = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">        imgs[i].src = <span class="string">"images/"</span> + str[i] + <span class="string">".JPG"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; aPar.length; j++) &#123;</span><br><span class="line">        aPar[j].innerHTML = <span class="string">":"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    timer = setInterval(oShowTime, <span class="number">1000</span>);</span><br><span class="line">    oShowTime();</span><br><span class="line">  &#125;</span><br><span class="line">  fnTime();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ ·å¼è®¾ç½®"><a href="#æ ·å¼è®¾ç½®" class="headerlink" title="æ ·å¼è®¾ç½®"></a>æ ·å¼è®¾ç½®</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">80px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#div1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">40px</span> solid <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">14px</span> <span class="number">12px</span> <span class="number">#777</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">150px</span> auto;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">580px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">9px</span>; <span class="comment">/*è°·æ­Œæµè§ˆå™¨ä¸ç”¨è®¾ç½®*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">110px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">12px</span> <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ•°ç é’Ÿè¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      body &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#333</span>;</span></span><br><span class="line"><span class="undefined">        font-size: 80px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 600px;</span></span><br><span class="line"><span class="undefined">        height: 180px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 40<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="undefined">        border-radius: 60px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">box-shadow</span>: 10<span class="selector-tag">px</span> 14<span class="selector-tag">px</span> 12<span class="selector-tag">px</span> <span class="selector-id">#777</span>;</span></span><br><span class="line"><span class="undefined">        margin: 150px auto;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 580px;</span></span><br><span class="line"><span class="undefined">        height: 160px;</span></span><br><span class="line"><span class="undefined">        margin: 15px 5px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">padding-left</span>: 9<span class="selector-tag">px</span>; <span class="comment">/*è°·æ­Œæµè§ˆå™¨ä¸ç”¨è®¾ç½®*/</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">      img &#123;</span></span><br><span class="line"><span class="undefined">        width: 60px;</span></span><br><span class="line"><span class="undefined">        height: 110px;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        margin: 20px 10px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">      p &#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#555</span>;</span></span><br><span class="line"><span class="undefined">        height: 110px;</span></span><br><span class="line"><span class="undefined">        line-height: 110px;</span></span><br><span class="line"><span class="undefined">        margin: 12px 5px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> imgs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*åˆ¤æ–­è·å–åˆ°çš„æ•°å­—æ˜¯å¦å°äº10*/</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">checkTime</span>(<span class="params">x</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (x &lt; <span class="number">10</span>) <span class="keyword">return</span> <span class="string">"0"</span> + x;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">else</span> <span class="keyword">return</span> <span class="string">""</span> + x;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*é¼ æ ‡ç‚¹å‡»äº‹ä»¶*/</span></span></span><br><span class="line"><span class="javascript">        oDiv.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          clearInterval(timer);</span></span><br><span class="line"><span class="undefined">          fnDate();</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        oDiv.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          clearInterval(timer);</span></span><br><span class="line"><span class="undefined">          fnTime();</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">/*è·å–çš„æ—¥æœŸå‡½æ•°*/</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">fnDate</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> <span class="title">oShowDate</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oYea = oDate.getFullYear();</span></span><br><span class="line"><span class="undefined">            oYea = oYea.toString();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oMon = oDate.getMonth() + <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oDay = oDate.getDay();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> str = oYea.substr(<span class="number">2</span>, <span class="number">2</span>) + checkTime(oMon) + checkTime(oDay);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> aPar = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">              imgs[i].src = <span class="string">"images/"</span> + str[i] + <span class="string">".JPG"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; aPar.length; j++) &#123;</span></span><br><span class="line"><span class="javascript">              aPar[j].innerHTML = <span class="string">"-"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">          timer = setInterval(oShowDate, 1000);</span></span><br><span class="line"><span class="undefined">          oShowDate();</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">/*è·å–çš„æ—¶é—´å‡½æ•°*/</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">fnTime</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="keyword">function</span> <span class="title">oShowTime</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oHou = oDate.getHours();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oMin = oDate.getMinutes();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> oSec = oDate.getSeconds();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> str = checkTime(oHou) + checkTime(oMin) + checkTime(oSec);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> aPar = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">              imgs[i].src = <span class="string">"images/"</span> + str[i] + <span class="string">".JPG"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; aPar.length; j++) &#123;</span></span><br><span class="line"><span class="javascript">              aPar[j].innerHTML = <span class="string">":"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">          timer = setInterval(oShowTime, 1000);</span></span><br><span class="line"><span class="undefined">          oShowTime();</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        fnTime();</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/0.JPG"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/0.JPG"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/0.JPG"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/0.JPG"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/0.JPG"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/0.JPG"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®è·µ|æ•™ä½ åˆ¶ä½œç®€æ˜“å»¶æ—¶æç¤ºæ¡†</title>
      <link href="/2016/08/04/practice-easy-tooltip/"/>
      <url>/2016/08/04/practice-easy-tooltip/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h3 id="åŠ¨æ€æ•ˆæœå›¾"><a href="#åŠ¨æ€æ•ˆæœå›¾" class="headerlink" title="åŠ¨æ€æ•ˆæœå›¾"></a>åŠ¨æ€æ•ˆæœå›¾</h3><p><img src="http://img1.sycdn.imooc.com/57a430ad00013c0702580240.gif" alt="åŠ¨æ€æ•ˆæœå›¾"></p><h3 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h3><p>åˆ†åˆ«ä½¿ç”¨ç‚¹å‡»äº‹ä»¶ onmouseover å’Œ onmouseout,æ¥è®¾ç½® oDiv2 çš„å±æ€§ï¼Œä½¿ä¹‹æ˜¾ç¤ºæˆ–éšè—ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oDiv1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="keyword">var</span> oDiv2 = <span class="built_in">document</span>.getElementById(<span class="string">"div2"</span>);</span><br><span class="line">oDiv1.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  oDiv2.style.display = <span class="string">"block"</span>;</span><br><span class="line">&#125;;</span><br><span class="line">oDiv1.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  oDiv2.style.display = <span class="string">"none"</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h3><p>è®¾ç½® oDiv2 å»¶æ—¶ 1 ç§’åå†æ¶ˆå¤±ï¼Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªå˜é‡ timer æŠŠå®ƒå­˜èµ·æ¥;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">oDiv1.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    oDiv2.style.display = <span class="string">"none"</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h3><p>å½“é¼ æ ‡ç§»åˆ° oDiv2 çš„æ—¶å€™ï¼Œç”±äºå»¶æ—¶ä¸€ç§’åä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥è¿™æ—¶è¦æ¸…é™¤å®šæ—¶å™¨ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">oDiv2.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  clearTimeout(timer);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h3><p>å½“é¼ æ ‡ç¦»å¼€ oDiv2 çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ oDiv1 å’Œ oDiv2 ä¹‹é—´æ¥æ¥å›å›å¾˜å¾Šæ—¶ï¼Œä¼šæœ‰ä¸€ç¬é—´çš„é¢‘é—ªï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä¹Ÿè¦è®¾ç½®å½“é¼ æ ‡ç¦»å¼€ oDiv2 æ—¶æ¥ä¸ªå®šæ—¶å™¨ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">oDiv2.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    oDiv2.style.display = <span class="string">"none"</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äº”æ­¥"><a href="#ç¬¬äº”æ­¥" class="headerlink" title="ç¬¬äº”æ­¥"></a>ç¬¬äº”æ­¥</h3><p>å½“é¼ æ ‡ä» oDiv2 ç§»åŠ¨åˆ° oDiv1 çš„æ—¶å€™ï¼Œç”±äº oDiv2 çš„ onmouseout å®šæ—¶å™¨æ²¡æœ‰æ¸…é™¤ï¼Œæ‰€ä»¥è¿‡ä¸€ç§’åï¼ŒoDiv2 è¿˜æ˜¯ä¼šæ¶ˆå¤±ï¼›è¿™é‡Œï¼Œæˆ‘ä»¬å°±æ¸…é™¤å®šæ—¶å™¨ï¼ˆå½“ oDiv2 ç§»åŠ¨åˆ° oDiv1 æ—¶ï¼Œä½¿ oDiv2 ä¸Šçš„å®šæ—¶å™¨è§£é™¤ï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">oDiv1.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  clearTimeout(timer);</span><br><span class="line">  oDiv2.style.display = <span class="string">"block"</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>å½“ä»£ç ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•ä½¿ä¹‹ç®€åŒ–ï¼Œè¿™æ ·å°±ä¸ä¼šæ˜¾å¾—å†—ä½™ï¼›</p><p>åœ¨ JS ä¸­ï¼Œå…è®¸æˆ‘ä»¬è¿™æ ·åšï¼š<code>a=b=c=1</code>;<br>æ‰€ä»¥ï¼Œè§‚å¯Ÿä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">oDiv1.onmouseover = oDiv2.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  clearTimeout(timer);</span><br><span class="line">  oDiv2.style.display = <span class="string">"block"</span>;</span><br><span class="line">&#125;;</span><br><span class="line">oDiv1.onmouseout = oDiv2.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    oDiv2.style.display = <span class="string">"none"</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼Œæƒ³é€šåˆ¶ä½œçš„æ­¥éª¤ï¼Œå†™ä»£ç æ‰ä¼šè¡Œäº‘æµæ°´ã€‚</p><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å»¶æ—¶æç¤º<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      body &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#fc9</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div2</span> &#123;</span></span><br><span class="line"><span class="undefined">        margin: 10px;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 3<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#eee</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#f60</span>;</span></span><br><span class="line"><span class="undefined">        font-size: 20px;</span></span><br><span class="line"><span class="undefined">        padding-top: 10px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#div2</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 300px;</span></span><br><span class="line"><span class="undefined">        height: 250px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#599</span>;</span></span><br><span class="line"><span class="undefined">        font-size: large;</span></span><br><span class="line"><span class="undefined">        line-height: 48px;</span></span><br><span class="line"><span class="undefined">        padding-top: 10px;</span></span><br><span class="line"><span class="undefined">        display: none;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv2 = <span class="built_in">document</span>.getElementById(<span class="string">"div2"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">        oDiv1.onmouseover = oDiv2.onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">          clearTimeout(timer);</span></span><br><span class="line"><span class="javascript">          oDiv2.style.display = <span class="string">"block"</span>;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        oDiv1.onmouseout = oDiv2.onmouseout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            oDiv2.style.display = <span class="string">"none"</span>;</span></span><br><span class="line"><span class="undefined">          &#125;, 1000);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">      ç™»å²³é˜³æ¥¼</span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æœç”«<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>&gt;</span></span><br><span class="line">      æ˜”é—»æ´åº­æ°´ï¼Œä»Šä¸Šå²³é˜³æ¥¼ã€‚<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      å´æ¥šä¸œå—å¼ï¼Œä¹¾å¤æ—¥å¤œæµ®ã€‚<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      äº²æœ‹æ— ä¸€å­—ï¼Œè€ç—…æœ‰å­¤èˆŸã€‚<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      æˆé©¬å…³å±±åŒ—ï¼Œå‡­è½©æ¶•æ³—æµã€‚</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p><strong>æ•ˆæœå›¾</strong><br><img src="http://img1.sycdn.imooc.com/57a2c92b0001665b05840395.jpg" alt="å›¾ç‰‡æè¿°"></p>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®è·µ|å­¦ä¹ åˆ¶ä½œä¸€ä¸ªç®€æ˜“æ—¥å†</title>
      <link href="/2016/08/03/practice-easy-calendar/"/>
      <url>/2016/08/03/practice-easy-calendar/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ•´ç†å…¥å‘å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="åŠ¨æ€æ•ˆæœå›¾-GIF-å›¾ç‰‡"><a href="#åŠ¨æ€æ•ˆæœå›¾-GIF-å›¾ç‰‡" class="headerlink" title="åŠ¨æ€æ•ˆæœå›¾ GIF å›¾ç‰‡"></a>åŠ¨æ€æ•ˆæœå›¾ GIF å›¾ç‰‡</h2><p><img src="http://img1.sycdn.imooc.com/57a42f40000123ac01040336.gif" alt="ç¤ºä¾‹å›¾GIF"></p><h2 id="å…ˆå†™-html-çš„-body-éƒ¨åˆ†ä»£ç "><a href="#å…ˆå†™-html-çš„-body-éƒ¨åˆ†ä»£ç " class="headerlink" title="å…ˆå†™ html çš„ body éƒ¨åˆ†ä»£ç "></a>å…ˆå†™ html çš„ body éƒ¨åˆ†ä»£ç </h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tabs"</span> <span class="attr">class</span>=<span class="string">"calender"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>JAN<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>FER<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>3<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>MAR<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>4<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>APR<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>5<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>MAY<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>6<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>JUN<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>7<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>JUL<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>8<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>AUG<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>9<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>SEP<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>10<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>OCT<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>11<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>NOV<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>12<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>DEC<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1æœˆæ´»åŠ¨<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>ä¸€æœˆå°å¯’æ¥å¤§å¯’<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®-css-æ ·å¼"><a href="#è®¾ç½®-css-æ ·å¼" class="headerlink" title="è®¾ç½® css æ ·å¼"></a>è®¾ç½® css æ ·å¼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#890</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#tabs</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">340px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#tabs</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">list-style-type</span>: none;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">65px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#588</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#222</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">** cssæ ·å¼è®¾ç½®ä¸.activeæœ‰å†²çªæ—¶ï¼Œ</span></span><br><span class="line"><span class="comment">** ä¼˜å…ˆçº§id&gt;class</span></span><br><span class="line"><span class="comment">** ç»†åŒ–é€‰æ‹©ç¬¦</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-id">#tabs</span> <span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#c66</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="javascript-ä»£ç "><a href="#javascript-ä»£ç " class="headerlink" title="javascript ä»£ç "></a>javascript ä»£ç </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> array = [</span><br><span class="line">    <span class="string">"ä¸€æœˆå°å¯’æ¥å¤§å¯’"</span>,</span><br><span class="line">    <span class="string">"äºŒæœˆç«‹æ˜¥é›¨æ°´è¿"</span>,</span><br><span class="line">    <span class="string">"æƒŠè›°æ˜¥åˆ†åœ¨ä¸‰æœˆ"</span>,</span><br><span class="line">    <span class="string">"æ¸…æ˜è°·é›¨å››æœˆå¤©"</span>,</span><br><span class="line">    <span class="string">"äº”æœˆç«‹å¤å’Œå°æ»¡"</span>,</span><br><span class="line">    <span class="string">"å…­æœˆèŠ’ç§å¤è‡³è¿"</span>,</span><br><span class="line">    <span class="string">"ä¸ƒæœˆå¤§æš‘å’Œå°æš‘"</span>,</span><br><span class="line">    <span class="string">"ç«‹ç§‹å¤„æš‘å…«æœˆé—´"</span>,</span><br><span class="line">    <span class="string">"ä¹æœˆç™½éœ²æ¥ç§‹åˆ†"</span>,</span><br><span class="line">    <span class="string">"å¯’éœ²éœœé™åæœˆå…¨"</span>,</span><br><span class="line">    <span class="string">"ç«‹å†¬å°é›ªåä¸€æœˆ"</span>,</span><br><span class="line">    <span class="string">"å¤§é›ªå†¬è‡³è¿æ–°å¹´"</span></span><br><span class="line">  ];</span><br><span class="line">  <span class="comment">// è¿™é‡Œå®šä¹‰oDiv.get...æ˜¯ä¸ºäº†å®šä¹‰classNameä½œç”¨å¯¹è±¡æ˜¯idä¸ºtabsä¸‹çš„æ‰€æœ‰divæ–‡æœ¬</span></span><br><span class="line">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"tabs"</span>);</span><br><span class="line">  <span class="keyword">var</span> aLi = oDiv.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line">  <span class="keyword">var</span> oTxt = oDiv.getElementsByTagName(<span class="string">"div"</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aLi.length; i++) &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªindexå±æ€§å¯¹aLiè¿›è¡Œç¼–å·</span></span><br><span class="line">    aLi[i].index = i;</span><br><span class="line">    aLi[i].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œæ˜¯ç›¸å¯¹äºæœªè¢«ç‚¹å‡»çš„éƒ¨åˆ†çš„æ ·å¼</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aLi.length; i++) &#123;</span><br><span class="line">        aLi[i].className = <span class="string">""</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.className = <span class="string">"active"</span>;</span><br><span class="line">      <span class="comment">// é€šè¿‡ä¹‹å‰çš„indexç¼–å·ç»‘å®šæŒ‡å®šçš„divæ–‡æœ¬</span></span><br><span class="line">      oTxt.innerHTML =</span><br><span class="line">        <span class="string">"&lt;h2&gt;"</span> +</span><br><span class="line">        (<span class="keyword">this</span>.index + <span class="number">1</span>) +</span><br><span class="line">        <span class="string">"æœˆæ´»åŠ¨&lt;/h2&gt;&lt;h4&gt;"</span> +</span><br><span class="line">        array[<span class="keyword">this</span>.index] +</span><br><span class="line">        <span class="string">"&lt;/h4&gt;"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç®€æ˜“æ—¥å†<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      body &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#890</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#tabs</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 10<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="undefined">        margin: 50px auto;</span></span><br><span class="line"><span class="undefined">        width: 340px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#ddd</span>;</span></span><br><span class="line"><span class="undefined">        text-align: center;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-id">#tabs</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        list-style-type: none;</span></span><br><span class="line"><span class="undefined">        width: 70px;</span></span><br><span class="line"><span class="undefined">        height: 65px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 4<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#588</span>;</span></span><br><span class="line"><span class="undefined">        margin: 5px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#222</span>;</span></span><br><span class="line"><span class="undefined">        color: white;</span></span><br><span class="line"><span class="undefined">        line-height: 8px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#tabs</span> <span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#c66</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.text</span> &#123;</span></span><br><span class="line"><span class="undefined">        clear: both;</span></span><br><span class="line"><span class="undefined">        margin: 10px 40px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#eee</span>;</span></span><br><span class="line"><span class="undefined">        padding: 2px;</span></span><br><span class="line"><span class="undefined">        line-height: 14px;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> array = [</span></span><br><span class="line"><span class="javascript">          <span class="string">"ä¸€æœˆå°å¯’æ¥å¤§å¯’"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"äºŒæœˆç«‹æ˜¥é›¨æ°´è¿"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"æƒŠè›°æ˜¥åˆ†åœ¨ä¸‰æœˆ"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"æ¸…æ˜è°·é›¨å››æœˆå¤©"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"äº”æœˆç«‹å¤å’Œå°æ»¡"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"å…­æœˆèŠ’ç§å¤è‡³è¿"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"ä¸ƒæœˆå¤§æš‘å’Œå°æš‘"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"ç«‹ç§‹å¤„æš‘å…«æœˆé—´"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"ä¹æœˆç™½éœ²æ¥ç§‹åˆ†"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"å¯’éœ²éœœé™åæœˆå…¨"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"ç«‹å†¬å°é›ªåä¸€æœˆ"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">"å¤§é›ªå†¬è‡³è¿æ–°å¹´"</span></span></span><br><span class="line"><span class="undefined">        ];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"tabs"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> aLi = oDiv.getElementsByTagName(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oTxt = oDiv.getElementsByTagName(<span class="string">"div"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aLi.length; i++) &#123;</span></span><br><span class="line"><span class="undefined">          aLi[i].index = i;</span></span><br><span class="line"><span class="javascript">          aLi[i].onmouseover = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aLi.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">              aLi[i].className = <span class="string">""</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.className = <span class="string">"active"</span>;</span></span><br><span class="line"><span class="undefined">            oTxt.innerHTML =</span></span><br><span class="line"><span class="javascript">              <span class="string">"&lt;h2&gt;"</span> +</span></span><br><span class="line"><span class="javascript">              (<span class="keyword">this</span>.index + <span class="number">1</span>) +</span></span><br><span class="line"><span class="xml">              "æœˆæ´»åŠ¨<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">h4</span>&gt;</span>" +</span></span><br><span class="line"><span class="javascript">              array[<span class="keyword">this</span>.index] +</span></span><br><span class="line"><span class="javascript">              <span class="string">"&lt;/h4&gt;"</span>;</span></span><br><span class="line"><span class="undefined">          &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tabs"</span> <span class="attr">class</span>=<span class="string">"calender"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>JAN<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>FER<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>3<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>MAR<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>4<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>APR<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>5<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>MAY<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>6<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>JUN<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>7<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>JUL<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>8<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>AUG<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>9<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>SEP<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>10<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>OCT<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>11<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>NOV<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h2</span>&gt;</span>12<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>DEC<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1æœˆæ´»åŠ¨<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>ä¸€æœˆå°å¯’æ¥å¤§å¯’<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Html </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
