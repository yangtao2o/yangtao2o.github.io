{"meta":{"title":"å¤§æ¶›å­","subtitle":"ç®€å•ã€æè‡´ã€ä¸å¤±é£è¶£","description":"å¤§æ¶›å­å†™åšå®¢çš„åœ°æ–¹ï¼Œè®°å½•æ—¥å¸¸å‰ç«¯å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠå­¦ä¹ åˆ°çš„çŸ¥è¯†ã€‚","author":"æ¨æ¶›","url":"https://www.yangtao.site"},"pages":[{"title":"æ¬¢è¿æ¥åˆ°ã€Œå¤§æ¶›å­å®¢æ ˆã€","date":"2019-12-02T11:54:54.382Z","updated":"2019-12-02T11:54:54.382Z","comments":true,"path":"about/index.html","permalink":"https://www.yangtao.site/about/index.html","excerpt":"","text":"è¿™é‡Œï¼Œä½ å¯ä»¥è¯´ä¸€äº›è¯â€¦ ç­‰æˆ‘æƒ³å¥½äº†ï¼Œå†è®¤è®¤çœŸçœŸåœ°ä»‹ç»ä¸‹è‡ªå·±å§ï¼Œhahahaâ€¦ å¦‚æœè¦è”ç³»æˆ‘ï¼Œè®°å¾—ç•™ä¸‹è”ç³»æ–¹å¼ï¼Œæˆ–è€…æœ€ä¸‹è¾¹æœ‰æˆ‘çš„è”ç³»æ–¹å¼å™¢â€¦ ğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜ºğŸ˜º"},{"title":"å¤©æ¶¯è‹¥æ¯”é‚» | èƒ¡å¤©ä¾ƒåœ°","date":"2020-04-05T03:34:10.820Z","updated":"2020-04-05T03:34:10.820Z","comments":true,"path":"friends/index.html","permalink":"https://www.yangtao.site/friends/index.html","excerpt":"","text":"å„ä½èµ°è¿‡è·¯è¿‡çš„æœ‹å‹æƒ³äº¤æ¢å‹é“¾çš„è¯ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ï¼Œè¦æœ‰åç§°ã€å¤´åƒé“¾æ¥ã€å’Œè‡³å°‘ä¸€ä¸ªæ ‡ç­¾å“¦ï½ åç§°ï¼š å¤§æ¶›å­å³¡è°·å¤´åƒï¼š https://ae01.alicdn.com/kf/H77cd89dcc6ad420297a555d36891af53B.jpgç½‘å€ï¼š https://www.yangtao.siteæ ‡ç­¾ï¼š å‰ç«¯å¼€å‘ æ‘„å½± åˆ†ç»„å’Œæ ‡ç­¾ä¸åˆé€‚çš„è¯å¯ä»¥ç•™è¨€æˆ–è€…å‘é‚®ä»¶ç§èŠæˆ‘è¿›è¡Œæ›´æ”¹ã€‚å¤´åƒå°ºå¯¸æ˜¯ 64pxï¼Œ3 å€ç²¾ç»†åº¦å°±è¶³å¤Ÿäº†ï¼Œä¹Ÿå°±æ˜¯ 192pxï¼Œå¦‚æœæ–‡ä»¶ä½“ç§¯å¤ªå¤§å¯ä»¥å‹ç¼©ä¸€ä¸‹ã€‚"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2019-03-13T14:13:17.374Z","updated":"2019-03-13T14:13:17.374Z","comments":true,"path":"tags/index.html","permalink":"https://www.yangtao.site/tags/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-03-13T13:46:54.784Z","updated":"2019-03-13T13:46:54.784Z","comments":true,"path":"categories/index.html","permalink":"https://www.yangtao.site/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Hiï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ~","slug":"hello-world","date":"2048-10-24T05:14:15.000Z","updated":"2020-03-18T04:09:39.746Z","comments":true,"path":"2048/10/24/hello-world/","link":"","permalink":"https://www.yangtao.site/2048/10/24/hello-world/","excerpt":"","text":"æ¬¢è¿åœ¨æ­¤ç•™è¨€ï¼Œæˆ–è€…å»å‹é“¾çœ‹çœ‹å¤§å®¶ ~","categories":[],"tags":[]},{"title":"åœ¨ Nginx æœåŠ¡å™¨ä¸Šé…ç½® HTTPS è¯ä¹¦","slug":"http-https","date":"2020-04-04T13:56:50.000Z","updated":"2020-04-05T03:26:01.512Z","comments":true,"path":"2020/04/04/http-https/","link":"","permalink":"https://www.yangtao.site/2020/04/04/http-https/","excerpt":"å®‰è£… https è¯ä¹¦çš„ä¸€äº›è¿‡ç¨‹","text":"å®‰è£… https è¯ä¹¦çš„ä¸€äº›è¿‡ç¨‹ ä¸‹è½½è¯ä¹¦æˆ‘ä½¿ç”¨çš„é˜¿é‡Œäº‘å…è´¹ä¸ªäººç‰ˆï¼Œæœ‰æ•ˆæœŸä¸€å¹´ã€‚ 1234567891011~/Downloads â¯â¯â¯ cd 3713633_www.yangtao.site_nginx/~/D/3713633_www.yangtao.site_nginx â¯â¯â¯ ls3713633_www.yangtao.site.key 3713633_www.yangtao.site.pem~/D/3713633_www.yangtao.site_nginx â¯â¯â¯scp 3713633_www.yangtao.site.key 3713633_www.yangtao.site.pem root@47.101.33.81:/usr/local/nginx/cert/root@47.101.33.81's password:Permission denied, please try again.root@47.101.33.81's password:3713633_www.yangtao.site.key 100% 1675 88.9KB/s 00:003713633_www.yangtao.site.pem 100% 3675 274.2KB/s 00:00~/D/3713633_www.yangtao.site_nginx â¯â¯â¯ 12root@istaotao:/usr/local/nginx/cert# ls3713633_www.yangtao.site.key 3713633_www.yangtao.site.pem ä¿®æ”¹é…ç½®æŒ‰ç…§ä¸‹æ–‡ä¸­æ³¨é‡Šå†…å®¹ä¿®æ”¹ nginx.conf æ–‡ä»¶ï¼š 12345678910111213141516server &#123; listen 443 ssl; #SSLåè®®è®¿é—®ç«¯å£å·ä¸º443ã€‚æ­¤å¤„å¦‚æœªæ·»åŠ sslï¼Œå¯èƒ½ä¼šé€ æˆNginxæ— æ³•å¯åŠ¨ã€‚ server_name localhost; #å°†localhostä¿®æ”¹ä¸ºæ‚¨è¯ä¹¦ç»‘å®šçš„åŸŸåï¼Œä¾‹å¦‚ï¼šwww.example.comã€‚ root html; index index.html index.htm; ssl_certificate cert/domain name.pem; #å°†domain name.pemæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„æ–‡ä»¶åã€‚ ssl_certificate_key cert/domain name.key; #å°†domain name.keyæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„å¯†é’¥æ–‡ä»¶åã€‚ ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #ä½¿ç”¨æ­¤åŠ å¯†å¥—ä»¶ã€‚ ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #ä½¿ç”¨è¯¥åè®®è¿›è¡Œé…ç½®ã€‚ ssl_prefer_server_ciphers on; location / &#123; root html; #ç«™ç‚¹ç›®å½•ã€‚ index index.html index.htm; &#125;&#125; å¼ºåˆ¶ http è·³è½¬ä½¿ç”¨ curl å‘½ä»¤ï¼š 123456789101112131415161718192021222324252627~ â¯â¯â¯ curl baidu.com -v* Trying 220.181.38.148...* TCP_NODELAY set* Connected to baidu.com (220.181.38.148) port 80 (#0)&gt; GET / HTTP/1.1&gt; Host: baidu.com&gt; User-Agent: curl/7.64.1&gt; Accept: */*&gt;&lt; HTTP/1.1 200 OK&lt; Date: Sat, 04 Apr 2020 16:33:35 GMT&lt; Server: Apache&lt; Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT&lt; ETag: \"51-47cf7e6ee8400\"&lt; Accept-Ranges: bytes&lt; Content-Length: 81&lt; Cache-Control: max-age=86400&lt; Expires: Sun, 05 Apr 2020 16:33:35 GMT&lt; Connection: Keep-Alive&lt; Content-Type: text/html&lt;&lt;html&gt;&lt;meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\"&gt;&lt;/html&gt;* Connection #0 to host baidu.com left intact* Closing connection 0~ â¯â¯â¯ å¯ä»¥çœ‹åˆ°ç™¾åº¦å¾ˆå·§å¦™çš„åˆ©ç”¨ meta çš„åˆ·æ–°ä½œç”¨ï¼Œå°† baidu.com è·³è½¬åˆ° www.baidu.comåŒç†, æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªç‰¹æ€§æ¥å®ç° http å‘ https çš„è·³è½¬ 1234# index.html&lt;html&gt; &lt;meta http-equiv=\"refresh\" content=\"0;url=https://www.yangtao.site/\" /&gt;&lt;/html&gt; 12345678server &#123; listen 80; server_name yangtao.site; location / &#123; root /var/www/html/refresh/; &#125;&#125; æµ‹è¯• yangtao.siteï¼š 123456789101112131415161718192021222324~ â¯â¯â¯ curl yangtao.site -v* Trying 47.101.33.81...* TCP_NODELAY set* Connected to yangtao.site (47.101.33.81) port 80 (#0)&gt; GET / HTTP/1.1&gt; Host: yangtao.site&gt; User-Agent: curl/7.64.1&gt; Accept: */*&gt;&lt; HTTP/1.1 200 OK&lt; Server: nginx/1.14.0 (Ubuntu)&lt; Date: Sat, 04 Apr 2020 16:34:16 GMT&lt; Content-Type: text/html&lt; Content-Length: 91&lt; Last-Modified: Sat, 04 Apr 2020 16:04:03 GMT&lt; Connection: keep-alive&lt; ETag: \"5e88aff3-5b\"&lt; Accept-Ranges: bytes&lt;&lt;html&gt; &lt;meta http-equiv=\"refresh\" content=\"0;url=https://www.yangtao.site/\"&gt;&lt;/html&gt;* Connection #0 to host yangtao.site left intact* Closing connection 0 å‚è€ƒèµ„æ–™ åœ¨ Nginx/Tengine æœåŠ¡å™¨ä¸Šå®‰è£…è¯ä¹¦ Nginx é…ç½® https è¯ä¹¦ nginx é…ç½® http å¼ºåˆ¶è·³è½¬ https","categories":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"https://www.yangtao.site/categories/æœåŠ¡ç«¯/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.yangtao.site/tags/Hexo/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://www.yangtao.site/tags/Ubuntu/"}]},{"title":"JavaScript æ·±æµ…æ‹·è´","slug":"code-copy","date":"2020-04-03T03:04:25.000Z","updated":"2020-04-03T03:46:22.371Z","comments":true,"path":"2020/04/03/code-copy/","link":"","permalink":"https://www.yangtao.site/2020/04/03/code-copy/","excerpt":"æµ…æ‹·è´æŠ€å·§ï¼šæ•°ç»„concat sliceï¼Œå¯¹è±¡Object.assign()ç­‰ï¼›æ·±æ‹·è´æŠ€å·§ï¼šJSON.parse(JSON.stringify(arr1))ã€‚","text":"æµ…æ‹·è´æŠ€å·§ï¼šæ•°ç»„concat sliceï¼Œå¯¹è±¡Object.assign()ç­‰ï¼›æ·±æ‹·è´æŠ€å·§ï¼šJSON.parse(JSON.stringify(arr1))ã€‚ æ•°ç»„çš„æµ…æ‹·è´å¦‚æœæ•°ç»„å…ƒç´ æ˜¯åŸºæœ¬ç±»å‹ï¼Œå°±ä¼šæ‹·è´ä¸€ä»½ï¼Œäº’ä¸å½±å“ï¼Œè€Œå¦‚æœæ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œå°±ä¼šåªæ‹·è´å¯¹è±¡å’Œæ•°ç»„çš„å¼•ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬æ— è®ºåœ¨æ–°æ—§æ•°ç»„è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¸¤è€…éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚ æˆ‘ä»¬æŠŠè¿™ç§å¤åˆ¶å¼•ç”¨çš„æ‹·è´æ–¹æ³•ç§°ä¹‹ä¸ºæµ…æ‹·è´ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯æ·±æ‹·è´ï¼Œæ·±æ‹·è´å°±æ˜¯æŒ‡å®Œå…¨çš„æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼Œå³ä½¿åµŒå¥—äº†å¯¹è±¡ï¼Œä¸¤è€…ä¹Ÿç›¸äº’åˆ†ç¦»ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚ æ¯”å¦‚ï¼Œæ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼šconcatã€sliceï¼š 123456789var arr = [\"old\", 1, true, null, undefined];var newArr = arr.concat();newArr.shift();console.log(arr); // [ 'old', 1, true, null, undefined ]console.log(newArr); // [ 1, true, null, undefined ]var newArr2 = arr.slice();console.log(newArr2); // [ 'old', 1, true, null, undefined ] ä½†æ˜¯å¦‚æœæ•°ç»„åµŒå¥—äº†å¯¹è±¡æˆ–è€…æ•°ç»„çš„è¯ï¼Œå°±ä¼šéƒ½å—å½±å“ï¼Œæ¯”å¦‚ï¼š 123456var arrObj = [&#123; a: 1 &#125;, &#123; b: 2 &#125;];var newArrObj = arrObj.concat();newArrObj[0].a = \"aaa\";console.log(newArrObj); // [ &#123; a: 'aaa' &#125;, &#123; b: 2 &#125; ]console.log(arrObj); // [ &#123; a: 'aaa' &#125;, &#123; b: 2 &#125; ] æ•°ç»„çš„æ·±æ‹·è´ä½¿ç”¨ JSON.stringify()å’ŒJSON.parse()ï¼Œä¸ç®¡æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡ï¼Œéƒ½å¯ä»¥å®ç°æ·±æ‹·è´ï¼Œä½†æ˜¯ä¸èƒ½æ‹·è´å‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ª nullï¼š 12345var arr1 = [\"old\", 1, true, [\"old1\", \"old2\"], &#123; old: 1 &#125;, function() &#123;&#125;];var newArr1 = JSON.parse(JSON.stringify(arr1));newArr1.shift();console.log(arr1); // [ 'old', 1, true, [ 'old1', 'old2' ], &#123; old: 1 &#125;, [Function] ]console.log(newArr1); // [ 1, true, [ 'old1', 'old2' ], &#123; old: 1 &#125;, null ] Object.assignObject.assign() æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚ 12// target ç›®æ ‡å¯¹è±¡ï¼Œsources æºå¯¹è±¡Object.assign(target, ...sources); Object.assign æ–¹æ³•åªä¼šæ‹·è´æºå¯¹è±¡è‡ªèº«çš„å¹¶ä¸”å¯æšä¸¾çš„å±æ€§åˆ°ç›®æ ‡å¯¹è±¡ã€‚è¯¥æ–¹æ³•ä½¿ç”¨æºå¯¹è±¡çš„[[Get]]å’Œç›®æ ‡å¯¹è±¡çš„[[Set]]ï¼Œæ‰€ä»¥å®ƒä¼šè°ƒç”¨ç›¸å…³ getter å’Œ setterã€‚ String ç±»å‹å’Œ Symbol ç±»å‹çš„å±æ€§éƒ½ä¼šè¢«æ‹·è´ã€‚ 1234// èµ‹å€¼ä¸€ä¸ªå¯¹è±¡const obj = &#123; a: 1 &#125;;const copy = Object.assign(&#123;&#125;, obj);console.log(copy); // &#123; a: 1 &#125; é’ˆå¯¹æ·±æ‹·è´ï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–åŠæ³•ï¼Œå¦‚å€ŸåŠ© JSONï¼Œå› ä¸º Object.assign()æ‹·è´çš„æ˜¯å±æ€§å€¼ã€‚å‡å¦‚æºå¯¹è±¡çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒä¹ŸåªæŒ‡å‘é‚£ä¸ªå¼•ç”¨ã€‚ 12345obj1 = &#123; a: 0, b: &#123; c: 0 &#125; &#125;;let obj3 = JSON.parse(JSON.stringify(obj1));obj1.a = 4;obj1.b.c = 4;console.log(JSON.stringify(obj3)); // &#123;\"a\":0,\"b\":&#123;\"c\":0&#125;&#125; æµ…æ‹·è´çš„å®ç°æŠ€å·§å‹çš„æ‹·è´ï¼Œå¦‚ä¸Šè¾¹ä½¿ç”¨çš„ concatã€sliceã€JSON.stringifyç­‰ï¼Œå¦‚æœè¦å®ç°ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„çš„æµ…æ‹·è´ï¼Œè¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ æ€è·¯ï¼šæ—¢ç„¶æ˜¯æµ…æ‹·è´ï¼Œé‚£å°±åªéœ€è¦éå†ï¼ŒæŠŠå¯¹åº”çš„å±æ€§åŠå±æ€§å€¼æ·»åŠ åˆ°æ–°çš„å¯¹è±¡ï¼Œå¹¶è¿”å›ã€‚ ä»£ç å®ç°ï¼š 1234567891011121314151617181920var shallowCopy = function(obj) &#123; if (typeof obj !== \"object\") return; // åˆ¤æ–­æ–°å»ºçš„æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡ var newObj = obj instanceof Array ? [] : &#123;&#125;; // éå†objï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯objçš„å±æ€§æ‰æ‹·è´ for (var key in obj) &#123; if (obj.hasOwnProperty(key)) &#123; newObj[key] = obj[key]; &#125; &#125; return newObj;&#125;;var arr20 = [\"old\", 1, true, [\"old1\", \"old2\"], &#123; old: 1 &#125;, function() &#123;&#125;];var newArr20 = shallowCopy(arr20);console.log(&#123; newArr20 &#125;);// [ 'old', 1, true, [ 'old1', 'old2' ], &#123; old: 1 &#125;, [Function] ] æ·±æ‹·è´çš„å®ç°æ€è·¯ï¼šå¦‚æœæ˜¯å¯¹è±¡ï¼Œé€šè¿‡é€’å½’è°ƒç”¨æ‹·è´å‡½æ•° ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728var deepCopy = function(obj) &#123; if (typeof obj !== \"object\") return; var newObj = obj instanceof Array ? [] : &#123;&#125;; for (var key in obj) &#123; if (obj.hasOwnProperty(key)) &#123; newObj[key] = typeof obj[key] !== \"object\" ? obj[key] : deepCopy(obj[key]); &#125; &#125; return newObj;&#125;;var obj = &#123; a: function() &#123;&#125;, b: &#123; name: \"Tony\", age: 10 &#125;, c: [1, 2, 3]&#125;;var newObj = deepCopy(obj);console.log(newObj);// &#123; a: [Function: a],// b: &#123; name: 'Tony', age: 10 &#125;,// c: [ 1, 2, 3 ] &#125; æ¨¡æ‹Ÿ jQuery çš„ extendextend çš„ç”¨æ³•ï¼šåˆå¹¶ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„å¯¹è±¡çš„å†…å®¹åˆ°ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚ 1jQuery.extend( [deep], target, object1 [, objectN ] ) deepï¼Œå¸ƒå°”å€¼ï¼Œå¦‚æœä¸º trueï¼Œè¿›è¡Œæ·±æ‹·è´ï¼›false åšæµ…æ‹·è´ï¼Œtarget å°±å¾€åç§»åŠ¨åˆ°ç¬¬äºŒä¸ªå‚æ•° targetï¼Œè¡¨ç¤ºè¦æ‹“å±•çš„ç›®æ ‡ï¼Œæˆ‘ä»¬å°±ç§°å®ƒä¸ºç›®æ ‡å¯¹è±¡å§ã€‚ åé¢çš„å‚æ•°ï¼Œéƒ½ä¼ å…¥å¯¹è±¡ï¼Œå†…å®¹éƒ½ä¼šå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å°±ç§°å®ƒä»¬ä¸ºå¾…å¤åˆ¶å¯¹è±¡å§ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980var toString = class2type.toString;var hasOwn = class2type.hasOwnProperty;function isPlainObject(obj) &#123; var proto, Ctor; if (!obj || toString.call(obj) !== \"[object Object]\") &#123; return false; &#125; proto = Object.getPrototypeOf(obj); if (!proto) &#123; return true; &#125; Ctor = hasOwn.call(proto, \"constructor\") &amp;&amp; proto.constructor; return ( typeof Ctor === \"function\" &amp;&amp; hasOwn.toString.call(Ctor) === hasOwn.toString.call(Object) );&#125;function extend() &#123; // é»˜è®¤ä¸è¿›è¡Œæ·±æ‹·è´ var deep = false; var name, options, src, copy, clone, copyIsArray; var length = arguments.length; // è®°å½•è¦å¤åˆ¶çš„å¯¹è±¡çš„ä¸‹æ ‡ var i = 1; // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¼ å¸ƒå°”å€¼çš„æƒ…å†µä¸‹ï¼Œtarget é»˜è®¤æ˜¯ç¬¬ä¸€ä¸ªå‚æ•° var target = arguments[0] || &#123;&#125;; // å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¸ƒå°”å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ target if (typeof target == \"boolean\") &#123; deep = target; target = arguments[i] || &#123;&#125;; i++; &#125; // å¦‚æœtargetä¸æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•è¿›è¡Œå¤åˆ¶çš„ï¼Œæ‰€ä»¥è®¾ä¸º &#123;&#125; if (typeof target !== \"object\" &amp;&amp; !isFunction(target)) &#123; target = &#123;&#125;; &#125; // å¾ªç¯éå†è¦å¤åˆ¶çš„å¯¹è±¡ä»¬ for (; i &lt; length; i++) &#123; // è·å–å½“å‰å¯¹è±¡ options = arguments[i]; // è¦æ±‚ä¸èƒ½ä¸ºç©º é¿å… extend(a,,b) è¿™ç§æƒ…å†µ if (options != null) &#123; for (name in options) &#123; // ç›®æ ‡å±æ€§å€¼ src = target[name]; // è¦å¤åˆ¶çš„å¯¹è±¡çš„å±æ€§å€¼ copy = options[name]; // è§£å†³å¾ªç¯å¼•ç”¨ if (target === copy) &#123; continue; &#125; // è¦é€’å½’çš„å¯¹è±¡å¿…é¡»æ˜¯ plainObject æˆ–è€…æ•°ç»„ if ( deep &amp;&amp; copy &amp;&amp; (isPlainObject(copy) || (copyIsArray = Array.isArray(copy))) ) &#123; // è¦å¤åˆ¶çš„å¯¹è±¡å±æ€§å€¼ç±»å‹éœ€è¦ä¸ç›®æ ‡å±æ€§å€¼ç›¸åŒ if (copyIsArray) &#123; copyIsArray = false; clone = src &amp;&amp; Array.isArray(src) ? src : []; &#125; else &#123; clone = src &amp;&amp; isPlainObject(src) ? src : &#123;&#125;; &#125; target[name] = extend(deep, clone, copy); &#125; else if (copy !== undefined) &#123; target[name] = copy; &#125; &#125; &#125; &#125; return target;&#125; å­¦ä¹ èµ„æ–™ JavaScript ä¸“é¢˜ä¹‹æ·±æµ…æ‹·è´ JavaScript ä¸“é¢˜ä¹‹ä»é›¶å®ç° jQuery çš„ extend","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"JavaScript é˜²æŠ–ã€èŠ‚æµ","slug":"code-debounce-throttle","date":"2020-04-03T02:19:34.000Z","updated":"2020-04-03T02:29:34.877Z","comments":true,"path":"2020/04/03/code-debounce-throttle/","link":"","permalink":"https://www.yangtao.site/2020/04/03/code-debounce-throttle/","excerpt":"æ€§èƒ½ä¼˜åŒ–ä¸­å¯¹äºé¢‘ç¹è§¦å‘äº‹ä»¶ï¼Œå¸¸ç”¨çš„ä¸¤ç§è§£å†³æ–¹å¼ï¼šdebounce å’Œ throttleã€‚","text":"æ€§èƒ½ä¼˜åŒ–ä¸­å¯¹äºé¢‘ç¹è§¦å‘äº‹ä»¶ï¼Œå¸¸ç”¨çš„ä¸¤ç§è§£å†³æ–¹å¼ï¼šdebounce å’Œ throttleã€‚ åœ¨å‰ç«¯å¼€å‘ä¸­ä¼šé‡åˆ°ä¸€äº›é¢‘ç¹çš„äº‹ä»¶è§¦å‘ï¼Œæ¯”å¦‚ï¼š window çš„ resizeã€scroll mousedownã€mousemove keyupã€keydown é˜²æŠ–é˜²æŠ–çš„åŸç†å°±æ˜¯ï¼š ä½ å°½ç®¡è§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘ä¸€å®šåœ¨äº‹ä»¶è§¦å‘ n ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ n ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£æˆ‘å°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œn ç§’åæ‰æ‰§è¡Œã€‚ æ€»ä¹‹ï¼Œå°±æ˜¯è¦ç­‰ä½ è§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œæˆ‘æ‰æ‰§è¡Œ! èµ·æ­¥1234567function debounce(func, wait) &#123; var timer; return function() &#123; clearTimeout(timer); timer = setTimeout(func, wait); &#125;;&#125; thisã€argumentsã€è¿”å›å€¼1234567891011121314function debounce(func, wait) &#123; var timer; return function() &#123; var _this = this; var args = arguments; clearTimeout(timer); timer = setTimeout(function() &#123; var result = func.apply(_this, args); &#125;, wait); return result; &#125;;&#125; ç«‹åˆ»æ‰§è¡Œè¿™ä¸ªéœ€æ±‚å°±æ˜¯ï¼š æˆ‘ä¸å¸Œæœ›éè¦ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œï¼Œæˆ‘å¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼Œç„¶åç­‰åˆ°åœæ­¢è§¦å‘ n ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚ 123456789101112131415161718192021222324252627282930function debounce(func, wait, immediate) &#123; var timerId, result; return function() &#123; var _this = this; var _args = arguments; if (timerId) clearTimeout(timerId); if (immediate) &#123; // è§¦å‘ func ä»é˜Ÿå°¾æåˆ°é˜Ÿå‰ã€‚è®°ä½ï¼šfuncåŒæ­¥æ‰§è¡Œï¼Œtimerå¼‚æ­¥æ‰§è¡Œ // 1. callNow åˆå§‹å€¼æ˜¯ true, åŒæ­¥ç«‹å³æ‰§è¡Œï¼›éšå timer æ‰å¼€å§‹æ‰§è¡Œ // 2. wait æœŸé—´ï¼Œtimer æ˜¯ä¸€ä¸ª ID æ•°å­—ï¼Œæ‰€ä»¥ callNow ä¸º falseï¼Œfunc åœ¨æ­¤æœŸé—´æ°¸è¿œä¸ä¼šæ‰§è¡Œ // 3. wait ä¹‹åï¼Œtimer èµ‹å€¼ nullï¼ŒcallNow ä¸º trueï¼Œfunc åˆå¼€å§‹ç«‹å³æ‰§è¡Œã€‚ // ä¾æ¬¡å¾ªç¯ var callNow = !timerId; timerId = setTimeout(function() &#123; timerId = null; &#125;, wait); if (callNow) &#123; result = func.apply(_this, _args); &#125; &#125; else &#123; timerId = setTimeout(function() &#123; result = func.apply(_this, _args); &#125;, wait); &#125; return result; &#125;;&#125; éœ€è¦ç†è§£ï¼š timeId æ˜¯é—­åŒ…å˜é‡ï¼Œåˆå§‹åŒ–æ—¶æ˜¯ undefined setTimeout è¿”å›çš„æ˜¯å®šæ—¶å™¨çš„ id ï¼Œä¸€ä¸ª &gt; 0 çš„æ•°å­— clearTimeout ä¸ä¼šæ”¹å˜ timeId çš„å€¼ è‹¥ timeId ç»å†è¿‡èµ‹å€¼ï¼Œå³æ‰§è¡Œè¿‡ setTimeout ï¼Œåˆ™ !timeId ä¸ºå‡ å–æ¶ˆé˜²æŠ–æ¯”å¦‚è¯´æˆ‘ debounce çš„æ—¶é—´é—´éš”æ˜¯ 10 ç§’é’Ÿï¼Œimmediate ä¸º trueï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘åªæœ‰ç­‰ 10 ç§’åæ‰èƒ½é‡æ–°è§¦å‘äº‹ä»¶ï¼Œç°åœ¨æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åï¼Œå–æ¶ˆé˜²æŠ–ï¼Œè¿™æ ·æˆ‘å†å»è§¦å‘ï¼Œå°±å¯ä»¥åˆç«‹åˆ»æ‰§è¡Œå•¦ã€‚ 123456789101112131415161718192021222324252627282930function debounce(func, wait, immediate) &#123; var timerId, result; var debounced = function() &#123; var _this = this; var _args = arguments; if (timerId) clearTimeout(timerId); if (immediate) &#123; var callNow = !timerId; timerId = setTimeout(function() &#123; timerId = null; &#125;, wait); if (callNow) &#123; result = func.apply(_this, _args); &#125; &#125; else &#123; timerId = setTimeout(function() &#123; result = func.apply(_this, _args); &#125;, wait); &#125; return result; &#125;; debounced.cancel = function() &#123; clearTimeout(timerId); timerId = null; &#125;; return debounced;&#125; ç”¨æ³•ï¼š 12345var setUseAction = debounce(getUserAction, 10000, true);container.onmousemove = setUseAction;button.addEventListener(\"click\", function() &#123; setUseAction.cancel();&#125;); èŠ‚æµèŠ‚æµçš„åŸç†å¾ˆç®€å•ï¼šå¦‚æœä½ æŒç»­è§¦å‘äº‹ä»¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡äº‹ä»¶ã€‚ æ ¹æ®é¦–æ¬¡æ˜¯å¦æ‰§è¡Œä»¥åŠç»“æŸåæ˜¯å¦æ‰§è¡Œï¼Œæ•ˆæœæœ‰æ‰€ä¸åŒï¼Œå®ç°çš„æ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚æˆ‘ä»¬ç”¨ leading ä»£è¡¨é¦–æ¬¡æ˜¯å¦æ‰§è¡Œï¼Œtrailing ä»£è¡¨ç»“æŸåæ˜¯å¦å†æ‰§è¡Œä¸€æ¬¡ã€‚ å…³äºèŠ‚æµçš„å®ç°ï¼Œæœ‰ä¸¤ç§ä¸»æµçš„å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨æ—¶é—´æˆ³ï¼Œä¸€ç§æ˜¯è®¾ç½®å®šæ—¶å™¨ã€‚ æ—¶é—´æˆ³å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³(æœ€ä¸€å¼€å§‹å€¼è®¾ä¸º 0 )ï¼Œå¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚ 12345678910111213function throttle(func, wait) &#123; var context, args; var previous = 0; return function() &#123; var now = +new Date(); context = this; args = arguments; if (now - previous &gt; wait) &#123; func.apply(context, args); previous = now; &#125; &#125;;&#125; å®šæ—¶å™¨å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚ 12345678910111213function throttle(func, wait) &#123; var context, args, timeout; return function() &#123; context = this; args = arguments; if (!timeout) &#123; timeout = setTimeout(function() &#123; timeout = null; func.apply(context, args); &#125;, wait); &#125; &#125;;&#125; æ‰€ä»¥æ¯”è¾ƒä¸¤ä¸ªæ–¹æ³•ï¼š ç¬¬ä¸€ç§äº‹ä»¶ä¼šç«‹åˆ»æ‰§è¡Œï¼Œç¬¬äºŒç§äº‹ä»¶ä¼šåœ¨ n ç§’åç¬¬ä¸€æ¬¡æ‰§è¡Œ ç¬¬ä¸€ç§äº‹ä»¶åœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ‰§è¡Œäº‹ä»¶ï¼Œç¬¬äºŒç§äº‹ä»¶åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶ åŒå‰‘åˆç’§é¼ æ ‡ç§»å…¥èƒ½ç«‹åˆ»æ‰§è¡Œï¼Œåœæ­¢è§¦å‘çš„æ—¶å€™è¿˜èƒ½å†æ‰§è¡Œä¸€æ¬¡ï¼ 12345678910111213141516171819202122232425262728293031function throttle(func, wait) &#123; var context, args, timeout, result; var previous = 0; var later = function() &#123; previous = +new Date(); timeout = null; result = func.apply(context, args); &#125;; var throttled = function() &#123; var now = +new Date(); var remaining = wait - (now - previous); context = this; args = arguments; if (remaining &lt;= 0 || remaining &gt; wait) &#123; if (timeout) &#123; clearTimeout(timeout); timeout = null; &#125; result = func.apply(context, args); previous = now; &#125; else if (!timeout) &#123; timeout = setTimeout(later, remaining); &#125; return result; &#125;; return throttled;&#125; ä¼˜åŒ–è®¾ç½®ä¸ª options ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç„¶åæ ¹æ®ä¼ çš„å€¼åˆ¤æ–­åˆ°åº•å“ªç§æ•ˆæœï¼Œæˆ‘ä»¬çº¦å®š: leadingï¼šfalse è¡¨ç¤ºç¦ç”¨ç¬¬ä¸€æ¬¡æ‰§è¡Œ trailing: false è¡¨ç¤ºç¦ç”¨åœæ­¢è§¦å‘çš„å›è°ƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445function throttle(func, wait, options) &#123; var context, args, timeout, result; var previous = 0; if (!options) &#123; options = &#123;&#125;; &#125; var later = function() &#123; previous = options.leading ? 0 : new Date().getTime(); timeout = null; result = func.apply(context, args); &#125;; var throttled = function() &#123; var now = new Date().getTime(); if (!previous &amp;&amp; options.leading === false) &#123; previous = now; &#125; var remaining = wait - (now - previous); context = this; args = arguments; if (remaining &lt;= 0 || remaining &gt; wait) &#123; if (timeout) &#123; clearTimeout(timeout); timeout = null; &#125; result = func.apply(context, args); previous = now; &#125; else if (!timeout &amp;&amp; options.trailing !== false) &#123; timeout = setTimeout(later, remaining); &#125; return result; &#125;; // å–æ¶ˆ throttled.cancel = function() &#123; clearTimeout(timeout); previous = 0; timeout = null; &#125;; return throttled;&#125; æ³¨æ„ï¼šå°±æ˜¯ leadingï¼šfalse å’Œ trailing: false ä¸èƒ½åŒæ—¶è®¾ç½®ã€‚ å­¦ä¹ èµ„æ–™ JavaScript ä¸“é¢˜ä¹‹è·Ÿç€ underscore å­¦é˜²æŠ– JavaScript ä¸“é¢˜ä¹‹è·Ÿç€ underscore å­¦èŠ‚æµ","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å…³äº Array æ–¹æ³•çš„ç”¨æ³•åŠ Polyfill","slug":"handwriting-array","date":"2020-04-01T09:49:51.000Z","updated":"2020-04-01T14:30:41.941Z","comments":true,"path":"2020/04/01/handwriting-array/","link":"","permalink":"https://www.yangtao.site/2020/04/01/handwriting-array/","excerpt":"ä¸»è¦æœ‰ï¼šisArray reduce flat forEach some every filter map ç­‰ Array æ–¹æ³•ã€‚","text":"ä¸»è¦æœ‰ï¼šisArray reduce flat forEach some every filter map ç­‰ Array æ–¹æ³•ã€‚ map, filter, reduce å„è‡ªæœ‰ä»€ä¹ˆä½œç”¨map çš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œéå†åŸæ•°ç»„ï¼Œå°†æ¯ä¸ªå…ƒç´ æ‹¿å‡ºæ¥åšä¸€äº›å˜æ¢ç„¶åæ”¾å…¥åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚ 1[1, 2, 3].map(v =&gt; v + 1) // -&gt; [2, 3, 4] å¦å¤– map çš„å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰ç´¢å¼•å…ƒç´ ï¼Œç´¢å¼•ï¼ŒåŸæ•°ç»„ 1['1','2','3'].map(parseInt) ç¬¬ä¸€è½®éå† parseInt(&#39;1&#39;, 0) -&gt; 1 ç¬¬äºŒè½®éå† parseInt(&#39;2&#39;, 1) -&gt; NaN ç¬¬ä¸‰è½®éå† parseInt(&#39;3&#39;, 2) -&gt; NaN filter çš„ä½œç”¨ä¹Ÿæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œåœ¨éå†æ•°ç»„çš„æ—¶å€™å°†è¿”å›å€¼ä¸º true çš„å…ƒç´ æ”¾å…¥æ–°æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå‡½æ•°åˆ é™¤ä¸€äº›ä¸éœ€è¦çš„å…ƒç´  123let array = [1, 2, 4, 6]let newArray = array.filter(item =&gt; item !== 6)console.log(newArray) // [1, 2, 4] å’Œ map ä¸€æ ·ï¼Œfilter çš„å›è°ƒå‡½æ•°ä¹Ÿæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç”¨å¤„ä¹Ÿç›¸åŒã€‚ reduce å¯ä»¥å°†æ•°ç»„ä¸­çš„å…ƒç´ é€šè¿‡å›è°ƒå‡½æ•°æœ€ç»ˆè½¬æ¢ä¸ºä¸€ä¸ªå€¼ã€‚ å¯¹äº reduce æ¥è¯´ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å›è°ƒå‡½æ•°å’Œåˆå§‹å€¼ã€‚ å›è°ƒå‡½æ•°æ¥å—å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºç´¯è®¡å€¼ã€å½“å‰å…ƒç´ ã€å½“å‰ç´¢å¼•ã€åŸæ•°ç»„ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ reduce æ¥å®ç° map å‡½æ•°ï¼š 1234567const arr = [1, 2, 3]const mapArray = arr.map(value =&gt; value * 2)const reduceArray = arr.reduce((acc, current) =&gt; &#123; acc.push(current * 2) return acc&#125;, [])console.log(mapArray, reduceArray) // [2, 4, 6] Array.isArray å®ç°å¯ä»¥é€šè¿‡ toString() æ¥è·å–æ¯ä¸ªå¯¹è±¡çš„ç±»å‹ã€‚ä¸ºäº†æ¯ä¸ªå¯¹è±¡éƒ½èƒ½é€šè¿‡ Object.prototype.toString() æ¥æ£€æµ‹ï¼Œéœ€è¦ä»¥ Function.prototype.call() æˆ–è€… Function.prototype.apply() çš„å½¢å¼æ¥è°ƒç”¨ï¼Œä¼ é€’è¦æ£€æŸ¥çš„å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ 1234Array.myIsArray = function(o) &#123; return Object.prototype.toString.call(o) === \"[object Array]\";&#125;;console.log(Array.myIsArray([])); // true Array.prototype.reduce å®ç°reduce() æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„reducerå‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚ç”± reduce è¿”å›çš„å€¼å°†æ˜¯æœ€åä¸€æ¬¡å›è°ƒè¿”å›å€¼ã€‚è¯­æ³•ï¼š 1arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue]) callback accumulator ç´¯è®¡å™¨ currentValue å½“å‰å€¼ currentIndex å½“å‰ç´¢å¼•ï¼Œå¯é€‰ array æ•°ç»„ï¼Œå¯é€‰ initialValue å¯é€‰ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callback å‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ æ —å­æ±‚æ•°ç»„ä¹‹å’Œï¼š 12const array1 = [1, 2, 3, 4];let result = array1.reduce((prev, curr) =&gt; prev + curr); //10 æ•°ç»„å»é‡ï¼š 12345678let arr = [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4];let result = arr.sort().reduce((init, current) =&gt; &#123; if (init.length === 0 || init[init.length - 1] !== current) &#123; init.push(current); &#125; return init;&#125;, []);console.log(result); //[1,2,3,4,5] æŒ‰é¡ºåºè¿è¡Œ Promiseï¼š 123456789101112131415function runPromiseInSequence(arr, input) &#123; return arr.reduce( (promiseChain, currentFunction) =&gt; promiseChain.then(currentFunction), Promise.resolve(input) );&#125;// p1, p2, f3, p4 is promise function or normal functionfunction p1(a) &#123; return new Promise((resolve, reject) =&gt; &#123; resolve(a * 5); &#125;);&#125;const promiseArr = [p1, p2, f3, p4];runPromiseInSequence(promiseArr, 10).then(console.log); åŠŸèƒ½å‹å‡½æ•°ç®¡é“ï¼š 12345678910111213141516171819202122// Building-blocks to use for compositionconst double = x =&gt; x + x;const triple = x =&gt; 3 * x;// Function composition enabling pipe functionalityconst pipe = (...functions) =&gt; input =&gt; functions.reduce((acc, fn) =&gt; fn(acc), input);// è¿™é‡Œå…¶å®å°±æ˜¯const pipe = function(...functions) &#123; return function(input) &#123; return functions.reduce(function(acc, fn) &#123; return fn(acc); &#125;, input); &#125;;&#125;;// Composed functions for multiplication of specific valuesconst multiply6 = pipe(double, triple);// Usagemultiply6(6); // 36 æ¨¡æ‹Ÿå®ç°ç¬¬ä¸€ç‰ˆï¼š 1234567891011Array.prototype.myreduce = function(callback, initialValue) &#123; // åˆ¤æ–­ç¬¬ä¸€æ¬¡è°ƒç”¨ callback å‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ // å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ const _this = this; let accumulator = initialValue ? initialValue : this[0]; for (let i = initialValue ? 0 : 1; i &lt; this.length; i++) &#123; accumulator = callback(accumulator, this[i], i, _this); &#125; return accumulator;&#125;; ç¬¬äºŒç‰ˆï¼š 1234567891011121314151617181920212223242526272829303132333435363738Array.prototype.myreduce = function reduce(callbackfn) &#123; const O = this; // ä¿å­˜åŸæ•°ç»„ const len = O.length &gt;&gt;&gt; 0; // typeof ('1' &gt;&gt;&gt; 0) -&gt; number let k = 0, // ä¸‹æ ‡å€¼åˆå§‹åŒ– accumulator = undefined, // ç´¯åŠ å™¨åˆå§‹åŒ– kPresent = false, // kä¸‹æ ‡å¯¹åº”çš„å€¼æ˜¯å¦å­˜åœ¨ initialValue = arguments.length &gt; 1 ? arguments[1] : undefined; // åˆå§‹å€¼ if (typeof callbackfn !== \"function\") &#123; thrownewTypeError(callbackfn + \" is not a function\"); &#125; // æ•°ç»„ä¸ºç©ºï¼Œå¹¶ä¸”æœ‰åˆå§‹å€¼ï¼ŒæŠ¥é”™ if (len === 0 &amp;&amp; arguments.length &lt; 2) &#123; thrownewTypeError(\"Reduce of empty array with no initial value\"); &#125; // å¦‚æœåˆå§‹å€¼å­˜åœ¨ï¼Œç´¯åŠ å™¨ä¸ºåˆå§‹å€¼ï¼Œå¦åˆ™ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  if (arguments.length &gt; 1) &#123; accumulator = initialValue; &#125; else &#123; accumulator = O[k++]; &#125; while (k &lt; len) &#123; // åˆ¤æ–­æ˜¯å¦ä¸º empty [,,,] kPresent = O.hasOwnProperty(k); if (kPresent) &#123; const kValue = O[k]; // å½“å‰å€¼ // è°ƒç”¨ callbackfn accumulator = callbackfn(accumulator, kValue, k, O); &#125; k++; &#125; return accumulator;&#125;; Array.prototype.flat å®ç°flat() æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚ 123456var newArray = arr.flat([depth]);// depth å¯é€‰// æŒ‡å®šè¦æå–åµŒå¥—æ•°ç»„çš„ç»“æ„æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º 1// è¿”å›å€¼// ä¸€ä¸ªåŒ…å«å°†æ•°ç»„ä¸å­æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„æ–°æ•°ç»„ã€‚ ä¾‹å­ï¼š 12345678910111213141516var arr = [1, 2, [3, 4]];// å±•å¼€ä¸€å±‚æ•°ç»„arr.flat();// ç­‰æ•ˆäºarr.reduce((acc, val) =&gt; acc.concat(val), []);// [1, 2, 3, 4]// ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ ...const flattened = arr =&gt; [].concat(...arr);// å±•å¼€ä¸¤å±‚æ•°ç»„arr.flat(2);// ä½¿ç”¨ Infinityï¼Œå¯å±•å¼€ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„arr.flat(Infinity); ä½¿ç”¨ reduceã€concat å’Œé€’å½’å±•å¼€æ— é™å¤šå±‚åµŒå¥—çš„æ•°ç»„ï¼š 123456789function flatDeep(arr, d = 1) &#123; return d &gt; 0 ? arr.reduce( (acc, val) =&gt; acc.concat(Array.isArray(val) ? flatDeep(val, d - 1) : val), [] ) : arr.slice();&#125; forEachï¼š 12345678910111213141516171819202122// forEach éå†æ•°ç»„ä¼šè‡ªåŠ¨è·³è¿‡ç©ºå…ƒç´ const eachFlat = (arr = [], depth = 1) =&gt; &#123; const result = []; // ç¼“å­˜é€’å½’ç»“æœ // å¼€å§‹é€’å½’ (function flat(arr, depth) &#123; // forEach ä¼šè‡ªåŠ¨å»é™¤æ•°ç»„ç©ºä½ arr.forEach(item =&gt; &#123; // æ§åˆ¶é€’å½’æ·±åº¦ if (Array.isArray(item) &amp;&amp; depth &gt; 0) &#123; // é€’å½’æ•°ç»„ flat(item, depth - 1); &#125; else &#123; // ç¼“å­˜å…ƒç´  result.push(item); &#125; &#125;); &#125;)(arr, depth); // è¿”å›é€’å½’ç»“æœ return result;&#125;;eachFlat([1, 2, [3, [4, [5]]]], Infinity); //[1, 2, 3, 4, 5] forâ€¦ofï¼š 123456789101112131415// for of å¾ªç¯ä¸èƒ½å»é™¤æ•°ç»„ç©ºä½ï¼Œéœ€è¦æ‰‹åŠ¨å»é™¤const forFlat = (arr = [], depth = 1) =&gt; &#123; const result = []; (function flat(arr, depth) &#123; for (let item of arr) &#123; if (Array.isArray(item) &amp;&amp; depth &gt; 0) &#123; flat(item, depth - 1); &#125; else &#123; // å»é™¤ç©ºå…ƒç´ ï¼Œæ·»åŠ éundefinedå…ƒç´  item !== void 0 &amp;&amp; result.push(item); &#125; &#125; &#125;)(arr, depth); return result;&#125;; å…¶ä»–æ–¹æ³•è§MDNã€‚ Array.prototype.forEach å®ç°forEach() æ–¹æ³•å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ç»™å®šçš„å‡½æ•°ã€‚è¯­æ³•ï¼š 1arr.forEach(callback(currentValue [, index [, array]])[, thisArg]) forEach() ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ æ‰§è¡Œä¸€æ¬¡ callback å‡½æ•°ï¼›ä¸ map() æˆ–è€… reduce() ä¸åŒçš„æ˜¯ï¼Œå®ƒæ€»æ˜¯è¿”å› undefined å€¼ï¼Œå¹¶ä¸”ä¸å¯é“¾å¼è°ƒç”¨ã€‚ ä¾‹å­ï¼šå¯¹è±¡å¤åˆ¶å™¨å‡½æ•° 12345678910111213141516function copy(obj) &#123; const copy = Object.create(Object.getPrototypeOf(obj)); // propNames is [\"a\", \"b\"] const propNames = Object.getOwnPropertyNames(obj); propNames.forEach(function(name) &#123; // desc is &#123;value: 1, writable: true, enumerable: true, configurable: true&#125; const desc = Object.getOwnPropertyDescriptor(obj, name); Object.defineProperty(copy, name, desc); &#125;); return copy;&#125;const obj1 = &#123; a: 1, b: 2 &#125;;const obj2 = copy(obj1); // ç°åœ¨ obj2 çœ‹èµ·æ¥å’Œ obj1 ä¸€æ¨¡ä¸€æ ·äº† æ¨¡æ‹Ÿå®ç°ï¼š 12345678910111213141516171819202122232425262728Array.prototype.myforEach = function(callback, thisArg) &#123; var k, T; if (this == null) &#123; throw new TypeError(\" this is null or not defined\"); &#125; var O = Object(this); var len = O.length &gt;&gt;&gt; 0; if (typeof callback !== \"function\") &#123; throw new TypeError(callback + \" is not a function\"); &#125; if (arguments.length &gt; 1) &#123; T = thisArg; &#125; k = 0; while (k &lt; len) &#123; var kValue; // å·²åˆ é™¤æˆ–è€…æœªåˆå§‹åŒ–çš„é¡¹å°†è¢«è·³è¿‡ if (k in O) &#123; kValue = O[k]; callback.call(T, kValue, k, O); &#125; k++; &#125;&#125;; Array.prototype.every å®ç°every() æ–¹æ³•æµ‹è¯•ä¸€ä¸ªæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½èƒ½é€šè¿‡æŸä¸ªæŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ 12345678910111213141516171819202122232425262728293031323334if (!Array.prototype.every) &#123; Array.prototype.every = function(callbackfn, thisArg) &#123; \"use strict\"; var T, k; if (this == null) &#123; throw new TypeError(\"this is null or not defined\"); &#125; var O = Object(this); var len = O.length &gt;&gt;&gt; 0; if (typeof callbackfn !== \"function\") &#123; throw new TypeError(); &#125; if (arguments.length &gt; 1) &#123; T = thisArg; &#125; k = 0; while (k &lt; len) &#123; var kValue; if (k in O) &#123; kValue = O[k]; var testResult = callbackfn.call(T, kValue, k, O); if (!testResult) &#123; return false; &#125; &#125; k++; &#125; return true; &#125;;&#125; Array.prototype.some å®ç°some() æ–¹æ³•æµ‹è¯•æ•°ç»„ä¸­æ˜¯ä¸æ˜¯è‡³å°‘æœ‰ 1 ä¸ªå…ƒç´ é€šè¿‡äº†è¢«æä¾›çš„å‡½æ•°æµ‹è¯•ã€‚å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª Boolean ç±»å‹çš„å€¼ã€‚ 12345678910111213141516171819202122232425if (!Array.prototype.some) &#123; Array.prototype.some = function(fun /*, thisArg*/) &#123; \"use strict\"; if (this == null) &#123; throw new TypeError(\"Array.prototype.some called on null or undefined\"); &#125; if (typeof fun !== \"function\") &#123; throw new TypeError(); &#125; var t = Object(this); var len = t.length &gt;&gt;&gt; 0; var thisArg = arguments.length &gt;= 2 ? arguments[1] : void 0; for (var i = 0; i &lt; len; i++) &#123; if (i in t &amp;&amp; fun.call(thisArg, t[i], i, t)) &#123; return true; &#125; &#125; return false; &#125;;&#125; Array.prototype.map å®ç°map() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚ map æ–¹æ³•ä¼šç»™åŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æŒ‰é¡ºåºè°ƒç”¨ä¸€æ¬¡ callback å‡½æ•°ã€‚callback æ¯æ¬¡æ‰§è¡Œåçš„è¿”å›å€¼ï¼ˆåŒ…æ‹¬ undefinedï¼‰ç»„åˆèµ·æ¥å½¢æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚ ç”¨æ³•ï¼š 1234[\"1\", \"2\", \"3\"].map(parseInt); // [1, NaN, NaN]// parseInt(string, radix) -&gt; map(parseInt(value, index))[\"1\", \"2\", \"3\"].map(str =&gt; parseInt(str)); // [1, 2, 3] Plyfill: 12345678910111213141516171819202122232425262728293031323334if (!Array.prototype.map) &#123; Array.prototype.map = function(callback /*, thisArg*/) &#123; var T, A, k; if (this == null) &#123; throw new TypeError(\"this is null or not defined\"); &#125; var O = Object(this); var len = O.length &gt;&gt;&gt; 0; if (typeof callback !== \"function\") &#123; throw new TypeError(callback + \" is not a function\"); &#125; if (arguments.length &gt; 1) &#123; T = arguments[1]; &#125; A = new Array(len); k = 0; while (k &lt; len) &#123; var kValue, mappedValue; if (k in O) &#123; kValue = O[k]; mappedValue = callback.call(T, kValue, k, O); A[k] = mappedValue; &#125; k++; &#125; return A; &#125;;&#125; Array.prototype.filter å®ç°filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚ filter ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€æ¬¡ callback å‡½æ•°ï¼Œå¹¶åˆ©ç”¨æ‰€æœ‰ä½¿å¾— callback è¿”å› true æˆ–ç­‰ä»·äº true çš„å€¼çš„å…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚ ç”¨æ³•ï¼š 12345678910const fruits = [\"apple\", \"banana\", \"grapes\", \"mango\", \"orange\"];const filterItems = query =&gt; &#123; return fruits.filter( el =&gt; el.toLowerCase().indexOf(query.toLowerCase()) &gt; -1 );&#125;;console.log(filterItems(\"ap\")); // ['apple', 'grapes']console.log(filterItems(\"an\")); // ['banana', 'mango', 'orange'] Polyfill: 1234567891011121314151617181920212223242526272829if (!Array.prototype.filter) &#123; Array.prototype.filter = function(func /*, thisArg*/) &#123; \"use strict\"; if (!((typeof func === \"Function\" || typeof func === \"function\") &amp;&amp; this)) throw new TypeError(); var len = this.length &gt;&gt;&gt; 0, res = new Array(len), // preallocate array t = this, c = 0, i = -1, T; if (arguments.length &gt; 1) &#123; T = arguments[1]; &#125; while (++i !== len) &#123; if (i in this) &#123; if (func.call(T, t[i], i, t)) &#123; res[c++] = t[i]; &#125; &#125; &#125; res.length = c; // shrink down array to proper size return res; &#125;;&#125; Array è¿­ä»£æ–¹æ³• Array.prototype.forEach()ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚ Array.prototype.entries()è¿”å›ä¸€ä¸ªæ•°ç»„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥è¿­ä»£å™¨ä¼šåŒ…å«æ‰€æœ‰æ•°ç»„å…ƒç´ çš„é”®å€¼å¯¹ã€‚ Array.prototype.every()å¦‚æœæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ»¡è¶³æµ‹è¯•å‡½æ•°ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ Array.prototype.some()å¦‚æœæ•°ç»„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æµ‹è¯•å‡½æ•°ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ Array.prototype.filter()å°†æ‰€æœ‰åœ¨è¿‡æ»¤å‡½æ•°ä¸­è¿”å› true çš„æ•°ç»„å…ƒç´ æ”¾è¿›ä¸€ä¸ªæ–°æ•°ç»„ä¸­å¹¶è¿”å›ã€‚ Array.prototype.find()æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æµ‹è¯•å‡½æ•°çš„å…ƒç´ å¹¶è¿”å›é‚£ä¸ªå…ƒç´ çš„å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å› undefinedã€‚ Array.prototype.findIndex()æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æµ‹è¯•å‡½æ•°çš„å…ƒç´ å¹¶è¿”å›é‚£ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å› -1ã€‚ Array.prototype.keys()è¿”å›ä¸€ä¸ªæ•°ç»„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥è¿­ä»£å™¨ä¼šåŒ…å«æ‰€æœ‰æ•°ç»„å…ƒç´ çš„é”®ã€‚ Array.prototype.map()è¿”å›ä¸€ä¸ªç”±å›è°ƒå‡½æ•°çš„è¿”å›å€¼ç»„æˆçš„æ–°æ•°ç»„ã€‚ Array.prototype.reduce()ä»å·¦åˆ°å³ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠä¸Šæ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼æ”¾åœ¨ä¸€ä¸ªæš‚å­˜å™¨ä¸­ä¼ ç»™ä¸‹æ¬¡å›è°ƒå‡½æ•°ï¼Œå¹¶è¿”å›æœ€åä¸€æ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚ Array.prototype.reduceRight()ä»å³åˆ°å·¦ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠä¸Šæ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼æ”¾åœ¨ä¸€ä¸ªæš‚å­˜å™¨ä¸­ä¼ ç»™ä¸‹æ¬¡å›è°ƒå‡½æ•°ï¼Œå¹¶è¿”å›æœ€åä¸€æ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚ Array.prototype.values()è¿”å›ä¸€ä¸ªæ•°ç»„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥è¿­ä»£å™¨ä¼šåŒ…å«æ‰€æœ‰æ•°ç»„å…ƒç´ çš„å€¼ã€‚ Array.prototype[@@iterator]()å’Œä¸Šé¢çš„ values() æ–¹æ³•æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"https://www.yangtao.site/tags/æ‰‹å†™ç³»åˆ—/"}]},{"title":"æ‰‹å†™ç³»åˆ—ä¹‹ newã€instanceofã€classã€typeAPI","slug":"handwriting-class","date":"2020-03-30T10:20:19.000Z","updated":"2020-04-01T11:42:00.302Z","comments":true,"path":"2020/03/30/handwriting-class/","link":"","permalink":"https://www.yangtao.site/2020/03/30/handwriting-class/","excerpt":"ä¸»è¦æœ‰ï¼šnewã€Object.create()ã€Object.setPrototypeOf()ã€instanceofã€classã€type APIã€åŸå‹é“¾ç»§æ‰¿ç­‰ã€‚","text":"ä¸»è¦æœ‰ï¼šnewã€Object.create()ã€Object.setPrototypeOf()ã€instanceofã€classã€type APIã€åŸå‹é“¾ç»§æ‰¿ç­‰ã€‚ new å®ç°æˆ‘ä»¬çœ‹ä¸‹ new åšäº†ä»€ä¹ˆï¼š åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼› å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤ this å°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ è¿”å›æ–°å¯¹è±¡ã€‚ 123456789101112131415161718function objectFactory() &#123; // 1. æ–°å»ºä¸€ä¸ªå¯¹è±¡ obj const obj = new Object(); // 2. å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä¼ å…¥çš„æ„é€ å‡½æ•° Constructorã€‚ // æ­¤å¤–å› ä¸º shift ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥ arguments ä¼šè¢«å»é™¤ç¬¬ä¸€ä¸ªå‚æ•° const Constructor = [].shift.call(arguments); // 3. å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§ obj.__proto__ = Constructor.prototype; // 4. ä½¿ç”¨ applyï¼Œæ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§ // å¦‚æœæ„é€ å‡½æ•°è¿”å›å€¼æ˜¯å¯¹è±¡åˆ™è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯å¯¹è±¡åˆ™è¿”å›æ–°çš„å®ä¾‹å¯¹è±¡ const ret = Constructor.apply(obj, arguments); // 5. è¿”å› obj return typeof ret === \"object\" ? ret : obj;&#125; ES6ï¼š 123456789function createNew(Con, ...args) &#123; this.obj = &#123;&#125;; this.obj = Object.create(Con.prototype); // Object.setPrototypeOf(this.obj, Con.prototype); const ret = Con.apply(this.obj, args); return ret instanceof Object ? ret : this.obj;&#125; Object.create å®ç°Object.create()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„__proto__ã€‚ ä½¿ç”¨ Object.create123456789101112131415161718192021222324252627282930313233343536var o;// åˆ›å»ºåŸå‹ä¸º null çš„ç©ºå¯¹è±¡o = Object.create(null);o = &#123;&#125;;// ä»¥å­—é¢é‡æ–¹å¼åˆ›å»ºçš„ç©ºå¯¹è±¡å°±ç›¸å½“äºï¼šo = Object.create(Object.prototype);function Constructor() &#123;&#125;o = new Constructor();// ä¸Šé¢çš„ä¸€å¥å°±ç›¸å½“äº:o = Object.create(Constructor.prototype);// ç›¸å½“äºObject.setPrototypeOf(o, Constructor.prototype);// å†ç›¸å½“äºo.__proto__ === Constructor.prototype);// å“‡å“¦ï¼Œå®Œç¾o = Object.create(Object.prototype, &#123; // fooä¼šæˆä¸ºæ‰€åˆ›å»ºå¯¹è±¡çš„æ•°æ®å±æ€§ foo: &#123; writable: true, configurable: true, value: \"hello\" &#125;, // barä¼šæˆä¸ºæ‰€åˆ›å»ºå¯¹è±¡çš„è®¿é—®å™¨å±æ€§ bar: &#123; configurable: false, get: function() &#123; return 10; &#125;, set: function(value) &#123; console.log(\"Setting `o.bar` to\", value); &#125; &#125;&#125;); æ¨¡æ‹Ÿ Object.create å®ç°åŸç†é‡‡ç”¨äº†åŸå‹å¼ç»§æ‰¿ï¼šå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚ 12345Object.mycreate = function(proto) &#123; function F() &#123;&#125; F.prototype = proto; return new F();&#125;; è¯¦ç»† Polyfillï¼Œè§ MDNï¼šObject.create()ï¼Œå…¶å®å°±å¤šäº†å‚æ•°çš„åˆ¤æ–­ç­‰ä¿¡æ¯ã€‚ Object.setPrototypeOf å®ç°Object.setPrototypeOf() æ–¹æ³•è®¾ç½®ä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡çš„åŸå‹ ( å³, å†…éƒ¨[[Prototype]]å±æ€§ï¼‰åˆ°å¦ä¸€ä¸ªå¯¹è±¡æˆ– nullã€‚ æ³¨æ„ï¼šç”±äºæ€§èƒ½é—®é¢˜ï¼Œä½ åº”è¯¥ä½¿ç”¨ Object.create() æ¥åˆ›å»ºå¸¦æœ‰ä½ æƒ³è¦çš„[[Prototype]]çš„æ–°å¯¹è±¡ã€‚è¯¦æƒ…è§ï¼šMDNã€‚ ä½¿ç”¨è¾ƒæ—§çš„ Object.prototype.__proto__ å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å®šä¹‰ setPrototypeOfï¼š 1234567// ä»…é€‚ç”¨äºChromeå’ŒFireFoxï¼Œåœ¨IEä¸­ä¸å·¥ä½œï¼šObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) &#123; obj.__proto__ = proto; return obj; &#125;; instanceof å®ç°ç”¨æ³•ï¼šinstanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚ åŸç†ï¼šå…¶å®å°±æ˜¯æ²¿ç€åŸå‹é“¾ä¸€ç›´è¯¢é—®ï¼Œç›´åˆ°__proto__ä¸º nullä¸ºæ­¢ã€‚ æ³¨æ„ï¼šObject.prototype.isPrototypeOf()ç”¨äºæµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨äºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚isPrototypeOf() ä¸ instanceof è¿ç®—ç¬¦ä¸åŒã€‚åœ¨è¡¨è¾¾å¼ â€œobject instanceof AFunctionâ€œä¸­ï¼Œobject çš„åŸå‹é“¾æ˜¯é’ˆå¯¹ AFunction.prototype è¿›è¡Œæ£€æŸ¥çš„ï¼Œè€Œä¸æ˜¯é’ˆå¯¹ AFunction æœ¬èº«ã€‚ å¦‚æœä½ æœ‰æ®µä»£ç åªåœ¨éœ€è¦æ“ä½œç»§æ‰¿è‡ªä¸€ä¸ªç‰¹å®šçš„åŸå‹é“¾çš„å¯¹è±¡çš„æƒ…å†µä¸‹æ‰§è¡Œï¼ŒåŒ instanceof æ“ä½œç¬¦ä¸€æ · isPrototypeOf() æ–¹æ³•å°±ä¼šæ´¾ä¸Šç”¨åœº: 1234567891011function Car() &#123;&#125;var mycar = new Car();// æ³¨æ„ä¸‹é¢ instanceof å’Œ isPrototypeOf() ä¹‹é—´çš„åŒºåˆ«ï¼š// instanceof ä¸­çš„ mycar åŸå‹é“¾æ˜¯é’ˆå¯¹ Car.prototypeï¼Œè€Œä¸æ˜¯ Car æœ¬èº«var a = mycar instanceof Car; // è¿”å› truevar b = mycar instanceof Object; // è¿”å› true// isPrototypeOf() ä¹Ÿæ˜¯ Car.prototypeï¼Œä¸è¿‡æ˜¯æ˜¾å¼çš„ï¼Œæ³¨æ„è¿™ç‚¹å°å°åŒºåˆ«var aa = Car.prototype.isPrototypeOf(mycar); // truevar bb = Object.prototype.isPrototypeOf(mycar); // true è¦æ£€æµ‹å¯¹è±¡ä¸æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·åš: 123456if (!(mycar instanceof Car)) &#123; // Do something&#125;if (!Car.prototype.isPrototypeOf(mycar)) &#123; // Do something&#125; instanceof æ¨¡æ‹Ÿå®ç°ï¼šä¸»è¦æ˜¯æ²¿ç€__proto__åˆ¤æ–­ï¼šL.__proto__æ˜¯å¦ç­‰äºR.prototypeï¼š 123456789101112function myinstanceof(L, R) &#123; const O = R.prototype; L = L.__proto__; while (true) &#123; if (L === null) return false; if (O === L) return true; L = L.__proto__; &#125;&#125;var a = myinstanceof(mycar, Car); // è¿”å› truevar b = myinstanceof(mycar, Object); // è¿”å› true åŸå‹é“¾ç»§æ‰¿å®ç°ç”¨æ³•12345678910111213141516171819function Parent(name) &#123; this.name = name;&#125;Parent.prototype.getName = function() &#123; return this.name;&#125;;function Child(name, age) &#123; Parent.call(this, name); this.age = age;&#125;Child.prototype = Object.create(Parent.prototype);Child.prototype.constructor = Child;Child.prototype.getMsg = function() &#123; return `My name is $&#123;this.name&#125;, $&#123;this.age&#125; years old.`;&#125;; ES6: 123456789101112131415161718class Parent &#123; constructor(name) &#123; this.name = name; &#125; getName() &#123; return this.name; &#125;&#125;class Child extends Parent &#123; constructor(name, age) &#123; super(name); this.age = age; &#125; getMsg() &#123; return `My name is $&#123;this.name&#125;, $&#123;this.age&#125; years old.`; &#125;&#125; å°è£…ç»§æ‰¿æ–¹æ³•ç¬¬ä¸€ç‰ˆï¼š 123456function prototype(child, parent) &#123; const F = function() &#123;&#125;; F.prototype = parent.prototype; child.prototype = new F(); child.prototype.constructor = child;&#125; ç¬¬äºŒç‰ˆï¼š 12345678910function create(o) &#123; const F = function() &#123;&#125;; F.prototype = o; return new F();&#125;function prototype(child, parent) &#123; child.prototype = create(parent.prototype); child.prototype.constructor = child;&#125; ç¬¬ä¸‰ç‰ˆï¼š 1234function prototype(child, parent) &#123; child.prototype = Object.create(parent.prototype); child.prototype.constructor = child;&#125; ä½¿ç”¨åˆ°çš„å‡ ç§ç»§æ‰¿æ–¹å¼ç»„åˆå¼ç»§æ‰¿ï¼šèåˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹ï¼Œæ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ã€‚ç»„åˆç»§æ‰¿æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°ã€‚ åŸå‹å¼ç»§æ‰¿ï¼šObject.create çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚ å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼šåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ PSï¼šå…¶ä»–å‡ ç§ç»§æ‰¿æ–¹å¼è§è¿™é‡ŒJavaScript æ·±å…¥ä¹‹ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹ã€‚ å¼•ç”¨ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­å¯¹å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„å¤¸èµå°±æ˜¯ï¼š è¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚ class å®ç°ä¸»è¦æ˜¯æ¨¡æ‹Ÿä½¿ç”¨extendsï¼Œå¹¶æ¨¡æ‹Ÿsuperå¯ä»¥ç»™å…¶çˆ¶æ„é€ å‡½æ•°ä¼ å€¼ï¼Œå¦‚ Parent ä¸­çš„ optï¼š 1234567891011121314151617181920class Parent &#123; constructor(opt) &#123; this.name = opt.name; &#125; getName() &#123; return this.name; &#125;&#125;class Child extends Parent &#123; constructor(opt) &#123; super(opt); this.age = opt.age; &#125; getAge() &#123; return this.age + \" years old.\"; &#125;;&#125;const me = new Child(&#123; name: \"Yang\", age: 28 &#125;); å¼€å§‹æ¨¡æ‹Ÿå®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748function _extends(child, parent) &#123; child.prototype = Object.create(parent &amp;&amp; parent.prototype); child.prototype.constructor = child; Object.setPrototypeOf ? Object.setPrototypeOf(child, parent) : (child.__proto__ = parent);&#125;function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(\"Cannot call a class as a function\"); &#125;&#125;var Parent = (function() &#123; function Parent(opt) &#123; _classCallCheck(this, Parent); this.name = opt.name; &#125; Parent.prototype.getName = function getName() &#123; return this.name; &#125;; return Parent;&#125;)();var Child = (function(_Parent) &#123; _extends(Child, _Parent); function Child(opt) &#123; _classCallCheck(this, Child); // Constrctor =&gt; _Parent.call(this, opt) var _this = (_Parent != null &amp;&amp; _Parent.call(this, opt)) || this; _this.age = opt.age; return _this; &#125; Child.prototype.getAge = function getAge() &#123; return this.age + \" years old.\"; &#125;; return Child;&#125;)(Parent);const myself = new Child(&#123; name: \"YyY\", age: 18 &#125;); é™„åŠ ä¸¤ç¯‡æ–‡ç« ï¼š ES6 ç³»åˆ—ä¹‹ Babel æ˜¯å¦‚ä½•ç¼–è¯‘ Class çš„(ä¸Š) ES6 ç³»åˆ—ä¹‹ Babel æ˜¯å¦‚ä½•ç¼–è¯‘ Class çš„(ä¸‹) Array.isArray å®ç°å¯ä»¥é€šè¿‡ toString() æ¥è·å–æ¯ä¸ªå¯¹è±¡çš„ç±»å‹ã€‚ä¸ºäº†æ¯ä¸ªå¯¹è±¡éƒ½èƒ½é€šè¿‡ Object.prototype.toString() æ¥æ£€æµ‹ï¼Œéœ€è¦ä»¥ Function.prototype.call() æˆ–è€… Function.prototype.apply() çš„å½¢å¼æ¥è°ƒç”¨ï¼Œä¼ é€’è¦æ£€æŸ¥çš„å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ 1234Array.myIsArray = function(o) &#123; return Object.prototype.toString.call(o) === \"[object Array]\";&#125;;console.log(Array.myIsArray([])); // true type API å®ç°å†™ä¸€ä¸ª type å‡½æ•°èƒ½æ£€æµ‹å„ç§ç±»å‹çš„å€¼ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œå°±ä½¿ç”¨ typeofï¼Œå¼•ç”¨ç±»å‹å°±ä½¿ç”¨ toStringã€‚ æ­¤å¤–é‰´äº typeof çš„ç»“æœæ˜¯å°å†™ï¼Œæˆ‘ä¹Ÿå¸Œæœ›æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯å°å†™ã€‚ 123456789101112131415161718192021222324252627var class2type = &#123;&#125;;\"Boolean Number String Function Array Date RegExp Object Error Null Undefined Symbol Set Map BigInt\" .split(\" \") .map(function(item) &#123; // æ ¼å¼å¦‚ï¼š\"[object Array]\": \"array\" class2type[\"[object \" + item + \"]\"] = item.toLowerCase(); &#125;);function type(obj) &#123; if (obj == null) &#123; return obj + \"\"; // IE6 &#125; return typeof obj === \"object\" || typeof obj === \"function\" ? class2type[Object.prototype.toString.call(obj)] : typeof obj;&#125;function isFunction(obj) &#123; return type(obj) === \"function\";&#125;var isArray = Array.isArray || function(obj) &#123; return type(obj) === \"array\"; &#125;; å‚è€ƒèµ„æ–™ï¼šJavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š) å‚è€ƒèµ„æ–™ å„ç§æ‰‹å†™æºç å®ç° JavaScript ä¸­å„ç§æºç å®ç°ï¼ˆå‰ç«¯é¢è¯•ç¬”è¯•å¿…å¤‡ï¼‰ JavaScript æ·±å…¥ä¹‹ new çš„æ¨¡æ‹Ÿå®ç° JavaScript æ·±å…¥ä¹‹ç±»æ•°ç»„å¯¹è±¡ä¸ arguments","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"https://www.yangtao.site/tags/æ‰‹å†™ç³»åˆ—/"}]},{"title":"æ‰‹å†™ç³»åˆ—ä¹‹ bindã€callã€apply","slug":"handwriting-call-apply-bind","date":"2020-03-29T07:50:44.000Z","updated":"2020-03-29T07:59:31.611Z","comments":true,"path":"2020/03/29/handwriting-call-apply-bind/","link":"","permalink":"https://www.yangtao.site/2020/03/29/handwriting-call-apply-bind/","excerpt":"bind() æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind() çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚(æ¥è‡ªäº MDN )","text":"bind() æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind() çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚(æ¥è‡ªäº MDN ) bind å®ç°æˆ‘ä»¬å¯ä»¥é¦–å…ˆå¾—å‡º bind å‡½æ•°çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š è¿”å›ä¸€ä¸ªå‡½æ•° å¯ä»¥ä¼ å…¥å‚æ•° å¦‚ï¼š 123456789101112var foo = &#123; value: 1&#125;;function bar(name, age) &#123; console.log(this.value); console.log(name); console.log(age);&#125;var bindFoo = bar.bind(foo, \"yyy\");bindFoo(\"28\"); ç¬¬ä¸€æ­¥ï¼šè¿”å›ä¸€ä¸ªå‡½æ•° 123456Function.prototype.mybind1 = function(context) &#123; const self = this; return function() &#123; return self.apply(context); &#125;;&#125;; ç¬¬äºŒæ­¥ï¼šå¯ä»¥ä¼ å‚ï¼Œå¹¶ä¸”å¯ä»¥è¿™æ ·ï¼šå‡½æ•°éœ€è¦ä¼  name å’Œ age ä¸¤ä¸ªå‚æ•°ï¼Œå¯ä»¥åœ¨ bind çš„æ—¶å€™ï¼Œåªä¼ ä¸€ä¸ª nameï¼Œåœ¨æ‰§è¡Œè¿”å›çš„å‡½æ•°çš„æ—¶å€™ï¼Œå†ä¼ å¦ä¸€ä¸ªå‚æ•° age! 1234567891011Function.prototype.mybind2 = function(context) &#123; const self = this; // æˆªå–å‚æ•°ï¼Œå¦‚ï¼š // context = [].shift.call(arguments) // args = [].slice.call(arguments) const args = Array.prototype.slice.call(arguments, 1); return function() &#123; const bindArgs = Array.prototype.slice.call(arguments); return self.apply(context, args.concat(bindArgs)); &#125;;&#125;; ç¬¬ä¸‰æ­¥ï¼šå½“ bind è¿”å›çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œbind æ—¶æŒ‡å®šçš„ this å€¼ä¼šå¤±æ•ˆï¼Œä½†ä¼ å…¥çš„å‚æ•°ä¾ç„¶ç”Ÿæ•ˆã€‚ 123456789101112131415161718192021222324Function.prototype.mybind3 = function(context) &#123; const self = this; const args = Array.prototype.slice.call(arguments, 1); // é€šè¿‡ä¸€ä¸ªç©ºå‡½æ•°æ¥è¿›è¡Œä¸­è½¬ const fNOP = function() &#123;&#125;; const fBound = function() &#123; const bindArgs = Array.prototype.slice.call(arguments); // this æŒ‡å‘ å®ä¾‹ï¼Œè¯´æ˜æ˜¯æ„é€ å‡½æ•°ï¼Œéœ€è¦å°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘è¯¥å®ä¾‹ï¼Œ // å¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼ // this æŒ‡å‘ windowï¼Œè¯´æ˜ä½¿æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context return self.apply( this instanceof fNOP ? this : context, args.concat(bindArgs) ); &#125;; fNOP.prototype = this.prototype; // è®©å®ä¾‹ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹(this.prototype)ä¸­çš„å€¼ fBound.prototype = new fNOP(); return fBound;&#125;; æœ€ç»ˆç‰ˆï¼š 12345678910111213141516171819202122Function.prototype.mybind = function(context) &#123; if (typeof this !== \"function\") &#123; throw new Error( \"Function.prototype.bind - what is trying to be bound is not callable\" ); &#125; const self = this; const args = Array.prototype.slice.call(arguments, 1); const fNOP = function() &#123;&#125;; const fBound = function() &#123; const bindArgs = Array.prototype.slice.call(arguments); return self.apply( this instanceof fNOP ? this : context, args.concat(bindArgs) ); &#125;; fNOP.prototype = this.prototype; fBound.prototype = new fNOP(); return fBound;&#125;; call å®ç°æˆ‘ä»¬æ¨¡æ‹Ÿçš„æ­¥éª¤å¯ä»¥åˆ†ä¸ºï¼š å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§ æ‰§è¡Œè¯¥å‡½æ•° åˆ é™¤è¯¥å‡½æ•° 12345678910111213141516171819202122232425262728293031323334353637Function.prototype.myCall = function(context) &#123; if (typeof this !== \"function\") &#123; throw new Error(`$&#123;this&#125; is not a function.`); &#125; if (typeof context != \"object\") &#123; throw new Error(\"Arguments error\"); &#125; var args = []; var result; context = context || window; // å¦‚æœæœ¬èº«å­˜åœ¨ fn å±æ€§ï¼Œå…ˆä¿å­˜ï¼Œä½¿ç”¨å®Œæ¯•ï¼Œåæ¢å¤ if (\"fn\" in context &amp;&amp; context.hasOwnProperty(\"fn\")) &#123; var fn = context.fn; var fnFlag = true; &#125; // 1. å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§ context.fn = this; for (var i = 1, l = arguments.length; i &lt; l; i++) &#123; // args = [\"arguments[1]\", \"arguments[2]\"] args.push(\"arguments[\" + i + \"]\"); &#125; // 2. æ‰§è¡Œè¯¥å‡½æ•° result = eval(\"context.fn(\" + args + \")\"); if (fnFlag) &#123; // æ¢å¤ context.fn = fn; &#125; else &#123; // 3. åˆ é™¤è¯¥å‡½æ•° delete context.fn; &#125; return result;&#125;; ES6: 1234567891011121314Function.prototype.myCall = function(context) &#123; if (typeof this !== \"function\") &#123; throw new Error(`$&#123;this&#125; is not a function.`); &#125; const args = [...arguments].slice(1); context = context || window; // 1. å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§ context.fn = this; // 2. æ‰§è¡Œè¯¥å‡½æ•° const result = context.fn(...args); // 3. åˆ é™¤è¯¥å‡½æ•° delete context.fn; return result;&#125;; apply å®ç°1234567891011121314151617181920Function.prototype.myapply = function(context, arr) &#123; if (typeof this !== \"function\") &#123; throw new Error(`$&#123;this&#125; is not a function.`); &#125; context = context || window; context.fn = this; let result; if (!arr) &#123; result = context.fn(); &#125; else &#123; let args = []; for (var i = 0, l = arr.length; i &lt; l; i++) &#123; args.push(\"arr[\" + i + \"]\"); &#125; result = eval(\"context.fn(\" + args + \")\"); &#125; delete context.fn; return result;&#125;; ES6: 12345678910111213141516171819Function.prototype.myapply = function(context) &#123; if (typeof this !== \"function\") &#123; throw new Error(`$&#123;this&#125; is not a function.`); &#125; context = context || window; context.fn = this; const args = arguments[1]; let result; if (!args) &#123; result = context.fn(); &#125; else &#123; result = context.fn(...args); &#125; delete context.fn; return result;&#125;; å‚è€ƒèµ„æ–™ å„ç§æ‰‹å†™æºç å®ç° JavaScript ä¸­å„ç§æºç å®ç°ï¼ˆå‰ç«¯é¢è¯•ç¬”è¯•å¿…å¤‡ï¼‰ JavaScript æ·±å…¥ä¹‹ call å’Œ apply çš„æ¨¡æ‹Ÿå®ç° JavaScript æ·±å…¥ä¹‹ bind çš„æ¨¡æ‹Ÿå®ç°","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"æ‰‹å†™ç³»åˆ—","slug":"æ‰‹å†™ç³»åˆ—","permalink":"https://www.yangtao.site/tags/æ‰‹å†™ç³»åˆ—/"}]},{"title":"æµè§ˆå™¨æ˜¯æ€ä¹ˆç¼“å­˜èµ„æºçš„","slug":"web-cache","date":"2020-03-27T12:24:41.000Z","updated":"2020-03-27T12:29:14.430Z","comments":true,"path":"2020/03/27/web-cache/","link":"","permalink":"https://www.yangtao.site/2020/03/27/web-cache/","excerpt":"å¯¹æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶æ¥åšä¸ªç®€è¦çš„æ€»ç»“ï¼šé¦–å…ˆé€šè¿‡ Cache-Control éªŒè¯å¼ºç¼“å­˜æ˜¯å¦å¯ç”¨ï¼›å¦‚æœå¼ºç¼“å­˜å¯ç”¨ï¼Œç›´æ¥ä½¿ç”¨ï¼›å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå³å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„If-Modified-Sinceæˆ–è€…If-None-Matchè¿™äº›æ¡ä»¶è¯·æ±‚å­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°ã€‚è‹¥èµ„æºæ›´æ–°ï¼Œè¿”å›èµ„æºå’Œ200 çŠ¶æ€ç ï¼›å¦åˆ™ï¼Œè¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜è·å–èµ„æº","text":"å¯¹æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶æ¥åšä¸ªç®€è¦çš„æ€»ç»“ï¼šé¦–å…ˆé€šè¿‡ Cache-Control éªŒè¯å¼ºç¼“å­˜æ˜¯å¦å¯ç”¨ï¼›å¦‚æœå¼ºç¼“å­˜å¯ç”¨ï¼Œç›´æ¥ä½¿ç”¨ï¼›å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå³å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„If-Modified-Sinceæˆ–è€…If-None-Matchè¿™äº›æ¡ä»¶è¯·æ±‚å­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°ã€‚è‹¥èµ„æºæ›´æ–°ï¼Œè¿”å›èµ„æºå’Œ200 çŠ¶æ€ç ï¼›å¦åˆ™ï¼Œè¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜è·å–èµ„æº å‰è¨€æµè§ˆå™¨ç¼“å­˜ï¼ˆBrower Cachingï¼‰æ˜¯æµè§ˆå™¨åœ¨æœ¬åœ°ç£ç›˜å¯¹ç”¨æˆ·æœ€è¿‘è¯·æ±‚è¿‡çš„æ–‡æ¡£è¿›è¡Œå­˜å‚¨ï¼Œå½“è®¿é—®è€…å†æ¬¡è®¿é—®åŒä¸€é¡µé¢æ—¶ï¼Œæµè§ˆå™¨å°±å¯ä»¥ç›´æ¥ä»æœ¬åœ°ç£ç›˜åŠ è½½æ–‡æ¡£ã€‚è¿™æ ·åšçš„å¥½å¤„æœ‰ï¼šå‡å°‘å†—ä½™æ•°æ®ä¼ è¾“ã€å‡å°‘æœåŠ¡å™¨è´Ÿæ‹…ã€åŠ å¿«å®¢æˆ·ç«¯åŠ è½½ç½‘é¡µçš„é€Ÿåº¦ã€‚ æµè§ˆå™¨çš„ç¼“å­˜è§„åˆ™åˆ†ä¸ºä¸¤å¤§å—ï¼šå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å¯¹äºæŸä¸ªæ–‡ä»¶æ¥è¯´ï¼Œå…·ä½“æ˜¯é‡‡ç”¨å“ªç§ç¼“å­˜æ–¹å¼ï¼Œç”± HTTP Response Headers è®¾ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ meta æ ‡ç­¾ï¼Œä½†æ˜¯ç°åœ¨è¶Šæ¥è¶Šå¤šæµè§ˆå™¨å¿½ç•¥è®¾ç½®ç¼“å­˜çš„ meta æ ‡ç­¾ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¨èé€šè¿‡ HTTP Response Headers è®¾ç½®ã€‚ å¼ºåˆ¶ç¼“å­˜é¦–å…ˆå®¢æˆ·ç«¯ä¼šæ£€æŸ¥æœ¬åœ°ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ‰€è¦è¯·æ±‚çš„æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±ä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚ HTTP Response Headers ä¸­ Cache-Control å’Œ Expires å­—æ®µéƒ½è¡¨ç¤ºå¯¹æœ¬èµ„æºå¯åŠ¨å¼ºåˆ¶ç¼“å­˜ï¼Œå…¶ä¸­ Cache-Control æ˜¯ http1.1 æ ‡å‡†ä¸­çš„å­—æ®µï¼Œè€Œ Expires æ˜¯ http1.0 çš„å­—æ®µï¼ŒCache-Control ä¼˜å…ˆçº§æ›´é«˜ï¼Œä½¿ç”¨æ›´å¹¿æ³›ã€‚ ExpiresExpires å³è¿‡æœŸæ—¶é—´ï¼Œå­˜åœ¨äºæœåŠ¡ç«¯è¿”å›çš„å“åº”å¤´ä¸­ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æ¥ä»ç¼“å­˜é‡Œé¢è·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚ï¼Œå¦‚ï¼š 1Expires: Wed, 22 Nov 2019 08:41:00 GMT Cache-ControlCache-Control çš„å€¼çš„å•ä½ä¸ºç§’ï¼Œå…³é”®å­— max-age è¡¨ç¤ºå¯ä»¥è¢«ç¼“å­˜å¤šé•¿æ—¶é—´ã€‚ 1cache-control: max-age=36029314 ç™¾åº¦é¦–é¡µåŠ è½½çš„ä¸€ä¸ªèµ„æºè¿”å›å¤´ä¸­å‡ºç°äº† Cache-Control å­—æ®µï¼Œå½“ Cache-Control å€¼è®¾ä¸º max-age=300 æ—¶ï¼Œåˆ™ä»£è¡¨åœ¨è¿™ä¸ªè¯·æ±‚æ­£ç¡®è¿”å›æ—¶é—´ï¼ˆæµè§ˆå™¨ä¹Ÿä¼šè®°å½•ä¸‹æ¥ï¼‰çš„ 5 åˆ†é’Ÿå†…å†æ¬¡åŠ è½½èµ„æºï¼Œå°±ä¼šå‘½ä¸­å¼ºç¼“å­˜ã€‚ å¸¸ç”¨çš„è®¾ç½®å€¼ï¼š no-cacheï¼š ä¸ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚éœ€è¦ä½¿ç”¨ç¼“å­˜åå•†ï¼Œå…ˆä¸æœåŠ¡å™¨ç¡®è®¤è¿”å›çš„å“åº”æ˜¯å¦è¢«æ›´æ”¹ï¼Œå¦‚æœä¹‹å‰çš„å“åº”ä¸­å­˜åœ¨ ETagï¼Œé‚£ä¹ˆè¯·æ±‚çš„æ—¶å€™ä¼šä¸æœåŠ¡ç«¯éªŒè¯ï¼Œå¦‚æœèµ„æºæœªè¢«æ›´æ”¹ï¼Œåˆ™å¯ä»¥é¿å…é‡æ–°ä¸‹è½½ã€‚ no-storeï¼š ç›´æ¥ç¦æ­¢æµè§ˆå™¨ç¼“å­˜æ•°æ®ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¯¥èµ„æºï¼Œéƒ½ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯æ¬¡éƒ½ä¼šä¸‹è½½å®Œæ•´çš„èµ„æºã€‚ publicï¼š å¯ä»¥è¢«æ‰€æœ‰çš„ç”¨æˆ·ç¼“å­˜ï¼ŒåŒ…æ‹¬ç»ˆç«¯ç”¨æˆ·å’Œ CDN ç­‰ä¸­é—´ä»£ç†æœåŠ¡å™¨ã€‚ privateï¼š åªèƒ½è¢«ç»ˆç«¯ç”¨æˆ·çš„æµè§ˆå™¨ç¼“å­˜ï¼Œä¸å…è®¸ CDN ç­‰ä¸­ç»§ç¼“å­˜æœåŠ¡å™¨å¯¹å…¶ç¼“å­˜ã€‚ s-maxageï¼šè¿™å’Œ max-age é•¿å¾—æ¯”è¾ƒåƒï¼Œä½†æ˜¯åŒºåˆ«åœ¨äº s-maxage æ˜¯é’ˆå¯¹ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ—¶é—´ã€‚ must-revalidateï¼šæ˜¯ç¼“å­˜å°±ä¼šæœ‰è¿‡æœŸçš„æ—¶å€™ï¼ŒåŠ ä¸Šè¿™ä¸ªå­—æ®µä¸€æ—¦ç¼“å­˜è¿‡æœŸï¼Œå°±å¿…é¡»å›åˆ°æºæœåŠ¡å™¨éªŒè¯ã€‚ æ³¨æ„ï¼šå½“ Expires å’Œ Cache-Control åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼ŒCache-Control ä¼šä¼˜å…ˆè€ƒè™‘ã€‚ å½“ç„¶ï¼Œè¿˜å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå½“èµ„æºç¼“å­˜æ—¶é—´è¶…æ—¶äº†ï¼Œä¹Ÿå°±æ˜¯å¼ºç¼“å­˜å¤±æ•ˆäº†ï¼Œæ¥ä¸‹æ¥æ€ä¹ˆåŠï¼Ÿæ²¡é”™ï¼Œè¿™æ ·å°±è¿›å…¥åˆ°ç¬¬äºŒçº§å±éšœâ€”â€”åå•†ç¼“å­˜äº†ã€‚ åå•†ç¼“å­˜å¼ºç¼“å­˜å¤±æ•ˆä¹‹åï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ç›¸åº”çš„ç¼“å­˜ tag æ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®è¿™ä¸ª tagï¼Œæ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œè¿™å°±æ˜¯åå•†ç¼“å­˜ã€‚ å…·ä½“æ¥è¯´ï¼Œè¿™æ ·çš„ç¼“å­˜ tag åˆ†ä¸ºä¸¤ç§: Last-Modified å’Œ ETagã€‚è¿™ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œå¹¶ä¸å­˜åœ¨è°å¯¹è°æœ‰ç»å¯¹çš„ä¼˜åŠ¿ï¼Œè·Ÿä¸Šé¢å¼ºç¼“å­˜çš„ä¸¤ä¸ª tag ä¸ä¸€æ ·ã€‚ Last-Modifiedèµ„æºè¢«æœåŠ¡å™¨è¿”å›æ—¶ï¼ŒHTTP Response Headers ä¸­çš„ Last-Modified è¿”å›å¤´æ ‡è¯†äº†æ­¤èµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ æµè§ˆå™¨å†æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œä¼šå°†ä¸Šæ¬¡ Last-Modified çš„å€¼ä½œä¸º if-Modified-Since å¤´çš„å€¼å‘é€ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼ŒæŸ¥çœ‹æœ€åä¿®æ”¹æ—¶é—´ä»¥åèµ„æºæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼š æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå°±è¿”å› 304ï¼Œä»ç¼“å­˜è¯»å– ä¿®æ”¹è¿‡ï¼Œè¿”å›çŠ¶æ€ 200 ä»¥åŠæ•´ä¸ªèµ„æº 1last-modified: Wed, 13 Nov 2019 15:16:37 GMT EtagETag æ˜¯æœåŠ¡å™¨æ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œç»™æ–‡ä»¶ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ï¼Œåªè¦é‡Œé¢çš„å†…å®¹æœ‰æ”¹åŠ¨ï¼Œè¿™ä¸ªå€¼å°±ä¼šå˜ã€‚æœåŠ¡å™¨é€šè¿‡å“åº”å¤´æŠŠè¿™ä¸ªå€¼ç»™æµè§ˆå™¨ã€‚ æµè§ˆå™¨æ¥æ”¶åˆ° ETag çš„å€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸ºIf-None-Matchè¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå¹¶æ”¾åˆ°è¯·æ±‚å¤´ä¸­ï¼Œç„¶åå‘ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨æ¥æ”¶åˆ° If-None-Match åï¼Œä¼šè·ŸæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„ ETag è¿›è¡Œæ¯”å¯¹ï¼š ä¸¤è€…ä¸ä¸€æ ·ï¼Œè¯´æ˜è¦æ›´æ–°äº†ã€‚è¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„ HTTP è¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ · å¦åˆ™è¿”å› 304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ç”¨ç¼“å­˜ 1etag: W/\"36BE6ECF0746FFAC5024A69C27141E08\" ä¸¤è€…å¯¹æ¯”ç²¾åº¦ä¸ŠEtag è¦ä¼˜äº Last-Modifiedã€‚Last-Modified çš„æ—¶é—´å•ä½æ˜¯ç§’ï¼Œå¦‚æœæŸä¸ªæ–‡ä»¶åœ¨ 1 ç§’å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆä»–ä»¬çš„ Last-Modified å…¶å®å¹¶æ²¡æœ‰ä½“ç°å‡ºæ¥ä¿®æ”¹ï¼Œä½†æ˜¯ Etag æ¯æ¬¡éƒ½ä¼šæ”¹å˜ç¡®ä¿äº†ç²¾åº¦ã€‚ æ€§èƒ½ä¸Šï¼ŒLast-Modified è¦ä¼˜äº Etagï¼Œæ¯•ç«Ÿ Last-Modified åªéœ€è¦è®°å½•æ—¶é—´ï¼Œè€Œ Etag éœ€è¦æœåŠ¡å™¨é€šè¿‡ç®—æ³•æ¥è®¡ç®—å‡ºä¸€ä¸ª hash å€¼ã€‚ ä¼˜å…ˆçº§ä¸Šï¼ŒæœåŠ¡å™¨æ ¡éªŒä¼˜å…ˆè€ƒè™‘ Etagã€‚ æµè§ˆå™¨ç¼“å­˜æµè§ˆå™¨ç¼“å­˜è¿™ä¸€å—ï¼Œæœ€é‡è¦çš„æ˜¯èƒ½åŒºåˆ†å¼€å¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ï¼š å®Œå…¨ä¸å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ˜¯å¼ºåˆ¶ç¼“å­˜ æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ˜¯åå•†ç¼“å­˜ï¼Œæ¶‰åŠåˆ° 304 çš„éƒ½æ˜¯åå•†ç¼“å­˜ æ€»ç»“ä¸€ä¸‹æµè§ˆå™¨ç¼“å­˜çš„å…¨è¿‡ç¨‹ï¼š æµè§ˆå™¨ç¬¬ä¸€æ¬¡åŠ è½½èµ„æºï¼ŒæœåŠ¡å™¨è¿”å› 200ï¼Œæµè§ˆå™¨ä»æœåŠ¡å™¨ä¸‹è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶ç¼“å­˜ä½èµ„æºæ–‡ä»¶ä¸ response header ä»¥ä¾›ä¸‹æ¬¡åŠ è½½æ—¶å¯¹æ¯”ä½¿ç”¨ï¼› ä¸‹ä¸€æ¬¡åŠ è½½èµ„æºæ—¶ï¼Œç”±äºå¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆçº§è¾ƒé«˜ï¼Œå…ˆæ¯”è¾ƒå½“å‰æ—¶é—´ä¸ä¸Šä¸€æ¬¡è¿”å› 200 æ—¶çš„æ—¶é—´å·®ï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡ cache-control è®¾ç½®çš„ max-ageï¼Œåˆ™æ²¡æœ‰è¿‡æœŸï¼Œå¹¶å‘½ä¸­å¼ºç¼“å­˜ï¼Œç›´æ¥ä»æœ¬åœ°è¯»å–èµ„æºã€‚å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ HTTP1.1ï¼Œåˆ™ä½¿ç”¨ expires å¤´åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼› å¦‚æœèµ„æºå·²è¿‡æœŸï¼Œåˆ™è¡¨æ˜å¼ºåˆ¶ç¼“å­˜æ²¡æœ‰è¢«å‘½ä¸­ï¼Œåˆ™å¼€å§‹åå•†ç¼“å­˜ï¼Œå‘æœåŠ¡å™¨å‘é€å¸¦æœ‰ If-None-Match å’Œ If-Modified-Since çš„è¯·æ±‚ï¼› æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œä¼˜å…ˆæ ¹æ® Etag çš„å€¼åˆ¤æ–­è¢«è¯·æ±‚çš„æ–‡ä»¶æœ‰æ²¡æœ‰åšä¿®æ”¹ï¼ŒEtag å€¼ä¸€è‡´åˆ™æ²¡æœ‰ä¿®æ”¹ï¼Œå‘½ä¸­åå•†ç¼“å­˜ï¼Œè¿”å› 304ï¼›å¦‚æœä¸ä¸€è‡´åˆ™æœ‰æ”¹åŠ¨ï¼Œç›´æ¥è¿”å›æ–°çš„èµ„æºæ–‡ä»¶å¸¦ä¸Šæ–°çš„ Etag å€¼å¹¶è¿”å› 200ï¼› å¦‚æœæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚æ²¡æœ‰ Etag å€¼ï¼Œåˆ™å°† If-Modified-Since å’Œè¢«è¯·æ±‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´åšæ¯”å¯¹ï¼Œä¸€è‡´åˆ™å‘½ä¸­åå•†ç¼“å­˜ï¼Œè¿”å› 304ï¼›ä¸ä¸€è‡´åˆ™è¿”å›æ–°çš„ last-modified å’Œæ–‡ä»¶å¹¶è¿”å› 200ã€‚ å…¶ä»–é—®é¢˜ç‚¹å‡»åˆ·æ–°æŒ‰é’®æˆ–è€…æŒ‰ F5æµè§ˆå™¨ç›´æ¥å¯¹æœ¬åœ°çš„ç¼“å­˜æ–‡ä»¶è¿‡æœŸï¼Œä½†æ˜¯ä¼šå¸¦ä¸ŠIf-Modifed-Sinceï¼ŒIf-None-Matchï¼Œè¿™å°±æ„å‘³ç€æœåŠ¡å™¨ä¼šå¯¹æ–‡ä»¶æ£€æŸ¥æ–°é²œåº¦ï¼Œè¿”å›ç»“æœå¯èƒ½æ˜¯ 304ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ 200ã€‚ ç”¨æˆ·æŒ‰ Ctrl+F5æµè§ˆå™¨ä¸ä»…ä¼šå¯¹æœ¬åœ°æ–‡ä»¶è¿‡æœŸï¼Œè€Œä¸”ä¸ä¼šå¸¦ä¸Š If-Modifed-Sinceï¼ŒIf-None-Matchï¼Œç›¸å½“äºä¹‹å‰ä»æ¥æ²¡æœ‰è¯·æ±‚è¿‡ï¼Œè¿”å›ç»“æœæ˜¯ 200ã€‚ åœ°å€æ å›è½¦æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæŒ‰ç…§æ­£å¸¸æµç¨‹ï¼Œæœ¬åœ°æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œç„¶åæœåŠ¡å™¨æ£€æŸ¥æ–°é²œåº¦ï¼Œæœ€åè¿”å›å†…å®¹ã€‚ æœ€åè¿˜å¯ä»¥æåˆ°ï¼Œä½ æ³¨æ„åˆ°å¾ˆå¤šç½‘ç«™çš„èµ„æºåé¢éƒ½åŠ äº†ç‰ˆæœ¬å·ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ï¼šæ¯æ¬¡å‡çº§äº† JS æˆ– CSS æ–‡ä»¶åï¼Œä¸ºäº†é˜²æ­¢æµè§ˆå™¨è¿›è¡Œç¼“å­˜ï¼Œå¼ºåˆ¶æ”¹å˜ç‰ˆæœ¬å·ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨å°±ä¼šé‡æ–°ä¸‹è½½æ–°çš„ JS æˆ– CSS æ–‡ä»¶ ï¼Œä»¥ä¿è¯ç”¨æˆ·èƒ½å¤ŸåŠæ—¶è·å¾—ç½‘ç«™çš„æœ€æ–°æ›´æ–°ã€‚ ç¼“å­˜çš„èµ„æºéƒ½å­˜åœ¨å“ªé‡ŒæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ï¼š Service Workerï¼šè¿è¡Œåœ¨ JavaScript ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè™½ç„¶ç”±äºè„±ç¦»äº†æµè§ˆå™¨çª—ä½“æ— æ³•ç›´æ¥è®¿é—® DOMï¼Œä½†æ˜¯å®ƒå¯ä»¥å®Œæˆç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æ¨é€ã€ç½‘ç»œä»£ç†ç­‰åŠŸèƒ½ã€‚ Memory Cacheï¼šå°±æ˜¯å†…å­˜ç¼“å­˜ï¼Œå®ƒçš„æ•ˆç‡æœ€å¿«ï¼Œä½†æ˜¯å­˜æ´»æ—¶é—´æœ€çŸ­ï¼Œä½ ä¸€å…³æ‰æµè§ˆå™¨ Memory Cache é‡Œçš„æ–‡ä»¶å°±è¢«æ¸…ç©ºäº†ã€‚ Disk Cacheï¼šCache èµ„æºè¢«å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œå­˜æ´»æ—¶é—´æ¯” Memory Cache è¦æŒä¹…å¾ˆå¤šã€‚ Push Cacheï¼šå³æ¨é€ç¼“å­˜ï¼Œè¿™æ˜¯æµè§ˆå™¨ç¼“å­˜çš„æœ€åä¸€é“é˜²çº¿ã€‚å®ƒæ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œè™½ç„¶ç°åœ¨åº”ç”¨çš„å¹¶ä¸å¹¿æ³›ï¼Œä½†éšç€ HTTP/2 çš„æ¨å¹¿ï¼Œå®ƒçš„åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›ã€‚ Node æ¼”ç¤º123456789101112131415161718192021222324252627282930313233343536373839const http = require(\"http\");const fs = require(\"fs\");const md5 = require(\"md5\");function handle(req, res) &#123; const html = fs.readFileSync(\"index.html\", \"utf-8\"); const script = fs.readFileSync(\"script.js\", \"utf-8\"); if (req.url === \"/\") &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); res.write(html); &#125; if (req.url === \"/script.js\") &#123; const etag = md5(script); const lastMidified = lastUpdatedDate(\"./script.js\"); const ifNoneMatch = req.headers[\"if-none-match\"]; let statusCode = ifNoneMatch === etag ? 304 : 200; res.writeHead(statusCode, &#123; \"Content-Type\": \"text/javascript\", \"Cache-Control\": \"no-cache\", \"Last-Modified\": lastMidified, Etag: etag &#125;); res.write(script); &#125; res.end();&#125;function lastUpdatedDate(file) &#123; const &#123; mtime &#125; = fs.statSync(file); return mtime;&#125;http.createServer(handle).listen(8000); å‚è€ƒèµ„æ–™ æµè§ˆå™¨æ˜¯æ€ä¹ˆç¼“å­˜èµ„æºçš„ èƒ½ä¸èƒ½è¯´ä¸€è¯´å‰ç«¯ç¼“å­˜ æµè§ˆå™¨ç¼“å­˜ cache-control etag","categories":[{"name":"ç½‘ç»œçŸ¥è¯†","slug":"ç½‘ç»œçŸ¥è¯†","permalink":"https://www.yangtao.site/categories/ç½‘ç»œçŸ¥è¯†/"}],"tags":[{"name":"http","slug":"http","permalink":"https://www.yangtao.site/tags/http/"}]},{"title":"5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ","slug":"node-5-util","date":"2020-03-26T14:20:41.000Z","updated":"2020-03-26T14:23:51.527Z","comments":true,"path":"2020/03/26/node-5-util/","link":"","permalink":"https://www.yangtao.site/2020/03/26/node-5-util/","excerpt":"ğŸ“¦ 5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ ğŸ‰ ğŸ‰ ğŸ‰","text":"ğŸ“¦ 5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ ğŸ‰ ğŸ‰ ğŸ‰ 1ã€ChalkGithubï¼šchalk è¿™æ˜¯ä¸€ä¸ªèƒ½ç»™ä½ çš„ log æŸ“è‰²çš„åº“,è®©ä½ çš„ä»£ç é“èµ·æ¥ !! 123456789101112131415161718192021222324252627282930313233343536373839404142const chalk = require(\"chalk\");const log = console.log;// Combine styled and normal stringslog(chalk.blue(\"Hello\") + \" World\" + chalk.red(\"!\"));// Compose multiple styles using the chainable APIlog(chalk.blue.bgRed.bold(\"Hello world!\"));// Pass in multiple argumentslog(chalk.blue(\"Hello\", \"World!\", \"Foo\", \"bar\", \"biz\", \"baz\"));// Nest styleslog(chalk.red(\"Hello\", chalk.underline.bgBlue(\"world\") + \"!\"));// Nest styles of the same type even (color, underline, background)log( chalk.green( \"I am a green line \" + chalk.blue.underline.bold(\"with a blue substring\") + \" that becomes green again!\" ));// ES2015 template literallog(`CPU: $&#123;chalk.red(\"90%\")&#125;RAM: $&#123;chalk.green(\"40%\")&#125;DISK: $&#123;chalk.yellow(\"70%\")&#125;`);// ES2015 tagged template literallog(chalk`CPU: &#123;red $&#123;cpu.totalPercent&#125;%&#125;RAM: &#123;green $&#123;(ram.used / ram.total) * 100&#125;%&#125;DISK: &#123;rgb(255,131,0) $&#123;(disk.used / disk.total) * 100&#125;%&#125;`);// Use RGB colors in terminal emulators that support it.log(chalk.keyword(\"orange\")(\"Yay for orange colored text!\"));log(chalk.rgb(123, 45, 67).underline(\"Underlined reddish color\"));log(chalk.hex(\"#DEADED\").bold(\"Bold gray!\")); 2ã€Inquirer.jsGithubï¼šInquirer.js ä¸€ä¸ªéå¸¸å¥½çœ‹çš„äº¤äº’å¼å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢,ç”¨å®ƒæ¥å®šåˆ¶ä½ çš„ CLI å§ ï¼ 123456789101112131415var inquirer = require(\"inquirer\");inquirer .prompt([ /* Pass your questions in here */ ]) .then(answers =&gt; &#123; // Use user feedback for... whatever!! &#125;) .catch(error =&gt; &#123; if (error.isTtyError) &#123; // Prompt couldn't be rendered in the current environment &#125; else &#123; // Something else when wrong &#125; &#125;); Checkbox list examplesï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364var inquirer = require(\"inquirer\");inquirer .prompt([ &#123; type: \"checkbox\", message: \"Select toppings\", name: \"toppings\", choices: [ new inquirer.Separator(\" = The Meats = \"), &#123; name: \"Pepperoni\" &#125;, &#123; name: \"Ham\" &#125;, &#123; name: \"Ground Meat\" &#125;, &#123; name: \"Bacon\" &#125;, new inquirer.Separator(\" = The Cheeses = \"), &#123; name: \"Mozzarella\", checked: true &#125;, &#123; name: \"Cheddar\" &#125;, &#123; name: \"Parmesan\" &#125;, new inquirer.Separator(\" = The usual =\"), &#123; name: \"Mushroom\" &#125;, &#123; name: \"Tomato\" &#125;, new inquirer.Separator(\" = The extras = \"), &#123; name: \"Pineapple\" &#125;, &#123; name: \"Olives\", disabled: \"out of stock\" &#125;, &#123; name: \"Extra cheese\" &#125; ], validate: function(answer) &#123; if (answer.length &lt; 1) &#123; return \"You must choose at least one topping.\"; &#125; return true; &#125; &#125; ]) .then(answers =&gt; &#123; console.log(JSON.stringify(answers, null, \" \")); &#125;); è¾“å‡ºï¼š 12345678910? Select toppings (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection) = The Meats =â¯â—¯ Pepperoni â—¯ Ham â—¯ Ground Meat â—¯ Bacon = The Cheeses = â—‰ Mozzarella(Move up and down to reveal more choices) 3ã€OraGithubï¼šora 1234567891011121314const ora = require(\"ora\");const spinner = ora(\"Loading unicorns\").start();setTimeout(() =&gt; &#123; spinner.color = \"cyan\"; spinner.text = \"Loading rainbows\";&#125;, 1000);setTimeout(() =&gt; &#123; spinner.text = \"Loading success\"; spinner.succeed(); // spinner.fail();&#125;, 3000); è¾“å‡ºï¼ˆicon æ˜¯æœ‰å¯¹åº”é¢œè‰²çš„ï¼‰ï¼š 12â § Loading rainbowsâœ” Loading success 4ã€figlet.jsGithubï¼šfiglet.js 12345678910var figlet = require(\"figlet\");figlet(\"Hello World!!\", function(err, data) &#123; if (err) &#123; console.log(\"Something went wrong...\"); console.dir(err); return; &#125; console.log(data);&#125;); ç„¶åè¾“å‡ºï¼š 12345 _ _ _ _ __ __ _ _ _ _| | | | ___| | | ___ \\ \\ / /__ _ __| | __| | | || |_| |/ _ \\ | |/ _ \\ \\ \\ /\\ / / _ \\| '__| |/ _` | | || _ | __/ | | (_) | \\ V V / (_) | | | | (_| |_|_||_| |_|\\___|_|_|\\___/ \\_/\\_/ \\___/|_| |_|\\__,_(_|_) 5ã€boxenGithubï¼šboxen 12345678910111213const boxen = require(\"boxen\");console.log(boxen(\"Hello World\", &#123; padding: 1, borderColor: \"yellow\" &#125;));console.log( boxen(\"I LOVE YOU\", &#123; padding: 1, margin: 1, borderStyle: \"classic\", borderColor: \"red\", backgroundColor: \"magenta\" &#125;)); è¾“å‡ºæ•ˆæœï¼š 1234567891011â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚â”‚ Hello World â”‚â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ +----------------+ | | | I LOVE YOU | | | +----------------+ èµ„æ–™ ğŸ“¦ 5 ä¸ªæœ‰è¶£çš„ Node.js åº“,å¸¦ä½ èµ°è¿› å½©è‰² Node.js ä¸–ç•Œ ğŸ‰","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"è·¨åŸŸèµ„æºå…±äº« CORS","slug":"cross-cors","date":"2020-03-25T06:43:47.000Z","updated":"2020-03-27T08:30:19.059Z","comments":true,"path":"2020/03/25/cross-cors/","link":"","permalink":"https://www.yangtao.site/2020/03/25/cross-cors/","excerpt":"è·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„ Web åº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚ â€” MDN","text":"è·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„ Web åº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚ â€” MDN ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ CORSå…è®¸åœ¨ä¸‹åˆ—åœºæ™¯ä¸­ä½¿ç”¨è·¨åŸŸ HTTP è¯·æ±‚ï¼š ç”± XMLHttpRequest æˆ– Fetch å‘èµ·çš„è·¨åŸŸ HTTP è¯·æ±‚ Web å­—ä½“ (CSS ä¸­é€šè¿‡ @font-face ä½¿ç”¨è·¨åŸŸå­—ä½“èµ„æº) WebGL è´´å›¾ ä½¿ç”¨ drawImage å°† Images/video ç”»é¢ç»˜åˆ¶åˆ° canvas ä¸¤ç§è¯·æ±‚æµè§ˆå™¨å°† CORS è¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰å’Œéç®€å•è¯·æ±‚ï¼ˆnot-so-simple requestï¼‰ã€‚ åªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ï¼ˆä¸ä¼šè§¦å‘ CORS é¢„æ£€è¯·æ±‚ï¼‰ã€‚ è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼šHEADã€GETã€POST HTTP çš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š Accept Accept-Language Content-Language Last-Event-ID Content-Typeï¼ˆåªé™äºä¸‰ä¸ªå€¼ï¼‰ application/x-www-form-urlencoded multipart/form-data text/plain å‡¡æ˜¯ä¸åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±å±äºéç®€å•è¯·æ±‚ã€‚ CORS å¦‚ä½•å·¥ä½œé¦–å…ˆï¼Œæµè§ˆå™¨åˆ¤æ–­è¯·æ±‚æ˜¯ç®€å•è¯·æ±‚è¿˜æ˜¯å¤æ‚è¯·æ±‚ï¼ˆéç®€å•è¯·æ±‚ï¼‰ã€‚ å¦‚æœæ˜¯å¤æ‚è¯·æ±‚ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒçœŸæ­£çš„è¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆä½¿ç”¨ OPTIONS æ–¹æ³•å‘é€ä¸€ä¸ªé¢„æ£€è¯·æ±‚ (preflight request)ï¼ŒOPTIONS æ˜¯ HTTP/1.1 åè®®ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œç”¨ä»¥ä»æœåŠ¡å™¨è·å–æ›´å¤šä¿¡æ¯ã€‚ è¯¥æ–¹æ³•ä¸ä¼šå¯¹æœåŠ¡å™¨èµ„æºäº§ç”Ÿå½±å“ï¼Œé¢„æ£€è¯·æ±‚ä¸­åŒæ—¶æºå¸¦äº†ä¸‹é¢ä¸¤ä¸ªé¦–éƒ¨å­—æ®µï¼š Access-Control-Request-Method: è¿™ä¸ªå­—æ®µè¡¨æ˜äº†è¯·æ±‚çš„æ–¹æ³•ï¼› Access-Control-Request-Headers: è¿™ä¸ªå­—æ®µè¡¨æ˜äº†è¿™ä¸ªè¯·æ±‚çš„ Headersï¼› Origin: è¿™ä¸ªå­—æ®µè¡¨æ˜äº†è¯·æ±‚å‘å‡ºçš„åŸŸã€‚ æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼Œä¼šä»¥ Access-Control-* response headers çš„å½¢å¼å¯¹å®¢æˆ·ç«¯è¿›è¡Œå›å¤ï¼š Access-Control-Allow-Origin: èƒ½å¤Ÿè¢«å…è®¸å‘å‡ºè¿™ä¸ªè¯·æ±‚çš„åŸŸåï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨*æ¥è¡¨æ˜å…è®¸æ‰€æœ‰åŸŸåï¼› Access-Control-Allow-Methods: ç”¨é€—å·åˆ†éš”çš„è¢«å…è®¸çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ï¼› Access-Control-Allow-Headers: ç”¨é€—å·åˆ†éš”çš„è¢«å…è®¸çš„è¯·æ±‚å¤´éƒ¨å­—æ®µçš„åˆ—è¡¨ï¼› Access-Control-Max-Age: è¿™ä¸ªé¢„æ£€è¯·æ±‚èƒ½è¢«ç¼“å­˜çš„æœ€é•¿æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…ï¼ŒåŒä¸€ä¸ªè¯·æ±‚ä¸ä¼šå†æ¬¡å‘å‡ºé¢„æ£€è¯·æ±‚ã€‚ ç®€å•è¯·æ±‚å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡º CORS è¯·æ±‚ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œè‡ªåŠ¨å¢åŠ ä¸€ä¸ª Origin å­—æ®µï¼Œç”¨æ¥è¯´æ˜è¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚æœåŠ¡å™¨æ‹¿åˆ°è¯·æ±‚ä¹‹åï¼Œåœ¨å›åº”æ—¶å¯¹åº”åœ°æ·»åŠ Access-Control-Allow-Originå­—æ®µï¼Œå¦‚æœ Origin ä¸åœ¨è¿™ä¸ªå­—æ®µçš„èŒƒå›´ä¸­ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šå°†å“åº”æ‹¦æˆªã€‚ Access-Control-Allow-Credentialsã€‚è¿™ä¸ªå­—æ®µæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€ Cookieï¼Œå¯¹äºè·¨åŸŸè¯·æ±‚ï¼Œæµè§ˆå™¨å¯¹è¿™ä¸ªå­—æ®µé»˜è®¤å€¼è®¾ä¸º falseï¼Œè€Œå¦‚æœéœ€è¦æ‹¿åˆ°æµè§ˆå™¨çš„ Cookieï¼Œéœ€è¦æ·»åŠ è¿™ä¸ªå“åº”å¤´å¹¶è®¾ä¸º true, å¹¶ä¸”åœ¨å‰ç«¯ä¹Ÿéœ€è¦è®¾ç½®withCredentialså±æ€§ï¼š 12let xhr = new XMLHttpRequest();xhr.withCredentials = true; Access-Control-Expose-Headersã€‚è¿™ä¸ªå­—æ®µæ˜¯ç»™ XMLHttpRequest å¯¹è±¡èµ‹èƒ½ï¼Œè®©å®ƒä¸ä»…å¯ä»¥æ‹¿åˆ°åŸºæœ¬çš„ 6 ä¸ªå“åº”å¤´å­—æ®µï¼ˆåŒ…æ‹¬Cache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedå’ŒPragmaï¼‰, è¿˜èƒ½æ‹¿åˆ°è¿™ä¸ªå­—æ®µå£°æ˜çš„å“åº”å¤´å­—æ®µã€‚æ¯”å¦‚è¿™æ ·è®¾ç½®: 1Access-Control-Expose-Headers: aaa é‚£ä¹ˆåœ¨å‰ç«¯å¯ä»¥é€šè¿‡ XMLHttpRequest.getResponseHeader(&#39;aaa&#39;) æ‹¿åˆ° aaa è¿™ä¸ªå­—æ®µçš„å€¼ã€‚ ä¸¾ä¸ªæ —å­æ¯”å¦‚ä¸‹é¢å¼€å¯ä¸€ä¸ªç«¯å£ä¸º 8001 çš„æœåŠ¡ï¼Œå»è¯·æ±‚ç«¯å£ä¸º 8000 çš„æ•°æ®ï¼š 12345678910111213141516const url = \"http://127.0.0.1:8000\";const data = &#123; username: \"example\" &#125;;const myHeaders = new Headers(&#123; \"Content-Type\": \"text/plain\"&#125;);fetch(url, &#123; method: \"POST\", headers: myHeaders, body: JSON.stringify(data), mode: \"cors\"&#125;) .then(res =&gt; res.json()) .then(res =&gt; &#123; console.log(JSON.parse(res.postData)); //&#123;username: \"example\"&#125; &#125;); ç«¯å£ä¸º 8000 çš„æœåŠ¡ç«¯è®¾ç½®ï¼š 1234567891011121314151617181920const http = require(\"http\");const server = http.createServer((req, res) =&gt; &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/plain\", \"Access-Control-Allow-Origin\": \"*\" &#125;); let resData = &#123;&#125;; let postData = []; req.on(\"data\", chunk =&gt; &#123; postData.push(chunk); &#125;); req.on(\"end\", () =&gt; &#123; resData.postData = Buffer.concat(postData).toString(); res.end(JSON.stringify(resData)); &#125;);&#125;);server.listen(8000); éç®€å•è¯·æ±‚éç®€å•è¯·æ±‚ç›¸å¯¹è€Œè¨€ä¼šæœ‰äº›ä¸åŒï¼Œä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢: é¢„æ£€è¯·æ±‚å’Œå“åº”å­—æ®µã€‚ é¢„æ£€è¯·æ±‚æ¯”å¦‚ä½¿ç”¨ PUT è¯·æ±‚æ–¹æ³•ï¼š 12345678910111213141516const url = \"http://127.0.0.1:8000\";const data = &#123; username: \"example\" &#125;;const myHeaders = new Headers(&#123; \"X-Custom-Header\": \"xxx\"&#125;);fetch(url, &#123; method: \"PUT\", // æ”¹æˆ PUT headers: myHeaders, body: JSON.stringify(data), mode: \"cors\"&#125;) .then(res =&gt; res.json()) .then(res =&gt; &#123; console.log(JSON.parse(res.postData)); //&#123;username: \"example\"&#125; &#125;); Node éƒ¨åˆ†ï¼š 12345678res.writeHead(200, &#123; \"Content-Type\": \"text/json\", \"Access-Control-Allow-Origin\": \"*\", \"Access-Control-Allow-Methods\": \"PUT, POST, GET\", \"Access-Control-Allow-Headers\": \"X-Custom-Header\", \"Access-Control-Max-Age\": 2000, \"Access-Control-Allow-Credentials\": true&#125;); å½“è¿™æ®µä»£ç æ‰§è¡Œåï¼Œé¦–å…ˆä¼šå‘é€é¢„æ£€è¯·æ±‚ã€‚è¿™ä¸ªé¢„æ£€è¯·æ±‚çš„è¯·æ±‚è¡Œå’Œè¯·æ±‚ä½“æ˜¯ä¸‹é¢è¿™ä¸ªæ ¼å¼: 12345OPTIONS / HTTP/1.1Host: 127.0.0.1:8000Access-Control-Request-Method: PUTAccess-Control-Request-Headers: x-custom-headerOrigin: http://127.0.0.1:8001 é¢„æ£€è¯·æ±‚çš„æ–¹æ³•æ˜¯OPTIONSï¼ŒåŒæ—¶ä¼šåŠ ä¸Š Origin æºåœ°å€å’Œ Host ç›®æ ‡åœ°å€ï¼Œè¿™å¾ˆç®€å•ã€‚åŒæ—¶ä¹Ÿä¼šåŠ ä¸Šä¸¤ä¸ªå…³é”®çš„å­—æ®µ: Access-Control-Request-Method, åˆ—å‡º CORS è¯·æ±‚ç”¨åˆ°å“ªä¸ª HTTP æ–¹æ³• Access-Control-Request-Headersï¼ŒæŒ‡å®š CORS è¯·æ±‚å°†è¦åŠ ä¸Šä»€ä¹ˆè¯·æ±‚å¤´ è¿™æ˜¯é¢„æ£€è¯·æ±‚ã€‚æ¥ä¸‹æ¥æ˜¯å“åº”å­—æ®µã€‚ å“åº”å­—æ®µä¹Ÿåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å¯¹äºé¢„æ£€è¯·æ±‚çš„å“åº”ï¼Œä¸€éƒ¨åˆ†æ˜¯å¯¹äºCORS è¯·æ±‚çš„å“åº”ã€‚ é¢„æ£€è¯·æ±‚çš„å“åº”ï¼š 12345678910HTTP/1.1 200 OKContent-Type: text/jsonAccess-Control-Allow-Origin: *Access-Control-Allow-Methods: PUT, POST, GETAccess-Control-Allow-Headers: X-Custom-HeaderAccess-Control-Max-Age: 2000Access-Control-Allow-Credentials: trueDate: Fri, 27 Mar 2020 08:16:58 GMTConnection: keep-aliveTransfer-Encoding: chunked åœ¨é¢„æ£€è¯·æ±‚çš„å“åº”è¿”å›åï¼Œå¦‚æœè¯·æ±‚ä¸æ»¡è¶³å“åº”å¤´çš„æ¡ä»¶ï¼Œåˆ™è§¦å‘XMLHttpRequestçš„onerroræ–¹æ³•ï¼Œå½“ç„¶åé¢çœŸæ­£çš„ CORS è¯·æ±‚ä¹Ÿä¸ä¼šå‘å‡ºå»äº†ã€‚ CORS è¯·æ±‚çš„å“åº”ï¼šç°åœ¨å®ƒå’Œç®€å•è¯·æ±‚çš„æƒ…å†µæ˜¯ä¸€æ ·çš„ã€‚æµè§ˆå™¨è‡ªåŠ¨åŠ ä¸Š Origin å­—æ®µï¼ŒæœåŠ¡ç«¯å“åº”å¤´è¿”å› Access-Control-Allow-Originã€‚åœ¨è®¾ç½®çš„Access-Control-Max-Age: 2000é‡Œæ˜¯ä¸ä¼šå†æ¬¡å‘é€é¢„æ£€è¯·æ±‚çš„ï¼Œé™¤éæ—¶é—´è¿‡æœŸã€‚ å‚è€ƒèµ„æ–™ ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿæµè§ˆå™¨å¦‚ä½•æ‹¦æˆªå“åº”ï¼Ÿå¦‚ä½•è§£å†³ é˜®ä¸€å³° è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ MDN HTTP è®¿é—®æ§åˆ¶ï¼ˆCORSï¼‰ ä½¿ç”¨ Fetch HTTPåè®®åŸç†+å®è·µWebå¼€å‘å·¥ç¨‹å¸ˆå¿…å­¦ - æ…•è¯¾ç½‘ä»˜è´¹è¯¾ç¨‹","categories":[{"name":"ç½‘ç»œçŸ¥è¯†","slug":"ç½‘ç»œçŸ¥è¯†","permalink":"https://www.yangtao.site/categories/ç½‘ç»œçŸ¥è¯†/"}],"tags":[{"name":"http","slug":"http","permalink":"https://www.yangtao.site/tags/http/"}]},{"title":"è·¨åŸŸè§£å†³æ–¹æ¡ˆ JSONP","slug":"cross-jsonp","date":"2020-03-25T03:07:14.000Z","updated":"2020-03-27T07:39:12.082Z","comments":true,"path":"2020/03/25/cross-jsonp/","link":"","permalink":"https://www.yangtao.site/2020/03/25/cross-jsonp/","excerpt":"JSONP è¯·æ±‚æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨äº† â€œAjax è¯·æ±‚ä¼šå—åˆ°åŒæºç­–ç•¥é™åˆ¶ï¼Œè€Œ script æ ‡ç­¾è¯·æ±‚ä¸ä¼šâ€ è¿™ä¸€ç‚¹æ¥ç»•è¿‡åŒæºç­–ç•¥ã€‚","text":"JSONP è¯·æ±‚æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨äº† â€œAjax è¯·æ±‚ä¼šå—åˆ°åŒæºç­–ç•¥é™åˆ¶ï¼Œè€Œ script æ ‡ç­¾è¯·æ±‚ä¸ä¼šâ€ è¿™ä¸€ç‚¹æ¥ç»•è¿‡åŒæºç­–ç•¥ã€‚ åŒæºç­–ç•¥ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ åŒæºç­–ç•¥æŒ‡çš„æ˜¯ï¼šåè®®+åŸŸå+ç«¯å£ä¸‰è€…çš†ç›¸åŒï¼Œå¯ä»¥è§†ä¸ºåœ¨åŒä¸€ä¸ªåŸŸï¼Œå¦åˆ™ä¸ºä¸åŒåŸŸã€‚åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚ ä½œç”¨æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚ æ‰€é™åˆ¶çš„è·¨åŸŸäº¤äº’åŒ…æ‹¬ï¼š Cookieã€LocalStorageã€IndexdDB ç­‰å­˜å‚¨å†…å®¹ï¼› DOM èŠ‚ç‚¹ï¼› Ajax è¯·æ±‚ã€‚ Ajax ä¸ºä»€ä¹ˆä¸èƒ½è·¨åŸŸAjax å…¶å®å°±æ˜¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª GET æˆ– POST è¯·æ±‚ï¼Œç„¶åå–å¾—æœåŠ¡å™¨å“åº”ç»“æœï¼Œè¿”å›å®¢æˆ·ç«¯ã€‚Ajax è·¨åŸŸè¯·æ±‚ï¼Œåœ¨æœåŠ¡å™¨ç«¯ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œåªæ˜¯æœåŠ¡ç«¯å“åº”æ•°æ®è¿”å›ç»™æµè§ˆå™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ ¹æ®å“åº”å¤´çš„Access-Control-Allow-Originå­—æ®µçš„å€¼æ¥åˆ¤æ–­æ˜¯å¦æœ‰æƒé™è·å–æ•°æ®ã€‚å› æ­¤ï¼ŒæœåŠ¡ç«¯å¦‚æœæ²¡æœ‰è®¾ç½®è·¨åŸŸå­—æ®µè®¾ç½®ï¼Œè·¨åŸŸæ˜¯æ²¡æœ‰æƒé™è®¿é—®ï¼Œæ•°æ®è¢«æµè§ˆå™¨ç»™æ‹¦æˆªäº†ã€‚ æ‰€ä»¥ï¼Œè¦è§£å†³çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•ä»å®¢æˆ·ç«¯æ‹¿åˆ°è¿”å›çš„æ•°æ®ï¼Ÿ å…¶å®ï¼Œåœ¨åŒæºç­–ç•¥çš„åŸºç¡€ä¸Šï¼Œé€‰æ‹©æ€§åœ°ä¸ºåŒæºç­–ç•¥å¼€æ”¾äº†ä¸€äº›åé—¨ã€‚ä¾‹å¦‚ imgã€scriptã€style ç­‰æ ‡ç­¾ï¼Œéƒ½å…è®¸è·¨åŸŸå¼•ç”¨èµ„æºã€‚ æ‰€ä»¥ï¼Œ JSONP æ¥äº†ã€‚ JSONP å®ç°JSONP(JSON with Paddingï¼ˆå¡«å……ï¼‰)æ˜¯ JSON çš„ä¸€ç§â€œä½¿ç”¨æ¨¡å¼â€ï¼Œæœ¬è´¨ä¸æ˜¯ Ajax è¯·æ±‚ï¼Œæ˜¯ script æ ‡ç­¾è¯·æ±‚ã€‚JSONP è¯·æ±‚æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨äº† â€œAjax è¯·æ±‚ä¼šå—åˆ°åŒæºç­–ç•¥é™åˆ¶ï¼Œè€Œ script æ ‡ç­¾è¯·æ±‚ä¸ä¼šâ€ è¿™ä¸€ç‚¹æ¥ç»•è¿‡åŒæºç­–ç•¥ã€‚ ç®€å• JSONP å®ç°ï¼š 12345678910111213141516171819202122class Jsonp &#123; constructor(req) &#123; this.url = req.url; this.callbackName = req.callbackName; &#125; create() &#123; const script = document.createElement(\"script\"); const url = `$&#123;this.url&#125;?callback=$&#123;this.callbackName&#125;`; script.src = url; document.getElementsByTagName(\"head\")[0].appendChild(script); &#125;&#125;new Jsonp(&#123; url: \"http://127.0.0.1:8000/\", callbackName: \"getMsg\"&#125;).create();function getMsg(data) &#123; data = JSON.parse(data); console.log(`My name is $&#123;data.name&#125;, and $&#123;data.age&#125; years old.`);&#125; æœåŠ¡ç«¯ï¼ˆNodeï¼‰: 123456789101112131415const http = require(\"http\");const querystring = require(\"querystring\");const server = http.createServer((req, res) =&gt; &#123; const url = req.url; const query = querystring.parse(url.split(\"?\")[1]); const &#123; callback &#125; = query; const data = &#123; name: \"Yang Min\", age: \"8\" &#125;; res.end(`$&#123;callback&#125;('$&#123;JSON.stringify(data)&#125;')`);&#125;);server.listen(8000); å‰ç«¯åˆ©ç”¨ http-server -p 8001 .ï¼Œå¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œç„¶å Node ä¹Ÿå¼€å¯ä¸€ä¸ªç«¯å£ä¸º 8000 çš„æœåŠ¡ï¼Œè¿è¡Œï¼š 1My name is Yang Min, and 8 years old. ä¸€ä¸ª JSONP çš„æ­¥éª¤å®è´¨å®¢æˆ·ç«¯å‘é€ script è¯·æ±‚ï¼Œå‚æ•°ä¸­å¸¦ç€å¤„ç†è¿”å›æ•°æ®çš„å›è°ƒå‡½æ•°çš„åå­— (é€šå¸¸æ˜¯ callback)ï¼Œå¦‚è¯·æ±‚ script çš„ url æ˜¯ï¼š 1http://127.0.0.1:8000/?callback=getMsg æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œä»¥å›è°ƒå‡½æ•°åå’Œè¿”å›æ•°æ®ç»„æˆç«‹å³æ‰§è¡Œå‡½æ•°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šå…¶ä¸­ callback çš„å€¼æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„å›è°ƒå‡½æ•°çš„åå­—ï¼Œå‡è®¾å›è°ƒå‡½æ•°çš„åå­—æ˜¯ getMsgï¼Œè¿”å›è„šæœ¬çš„å†…å®¹å°±æ˜¯ï¼š 1getMsg(\"&#123;name: 'Yang Min', age: '8'&#125;\"); å®¢æˆ·ç«¯æ”¶åˆ° JavaScript è„šæœ¬å†…å®¹åï¼Œç«‹å³æ‰§è¡Œè„šæœ¬ï¼Œè¿™æ ·å°±å®ç°äº†è·å–è·¨åŸŸæœåŠ¡å™¨æ•°æ®çš„ç›®çš„ã€‚ å¾ˆæ˜æ˜¾ï¼Œç”±äº JSONP æŠ€æœ¯æœ¬è´¨ä¸Šåˆ©ç”¨äº† script è„šæœ¬è¯·æ±‚ï¼Œæ‰€ä»¥åªèƒ½å®ç° GET è·¨åŸŸè¯·æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ JSONP è·¨åŸŸçš„æœ€å¤§é™åˆ¶ã€‚ ç”±äº server äº§ç”Ÿçš„å“åº”ä¸º json æ•°æ®çš„åŒ…è£…ï¼ˆæ•…ç§°ä¹‹ä¸º jsonpï¼Œå³ json paddingï¼‰ï¼Œå½¢å¦‚ï¼šgetMsg(&quot;{name: &#39;Yang Min&#39;, age: &#39;8&#39;}&quot;) JSONP å°è£…å®¢æˆ·ç«¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142const jsonp = (&#123; url, params, callbackName &#125;) =&gt; &#123; const generateURL = () =&gt; &#123; let dataStr = \"\"; for (let key in params) &#123; dataStr += `$&#123;key&#125;=$&#123;params[key]&#125;&amp;`; &#125; dataStr += `callback=$&#123;callbackName&#125;`; return `$&#123;url&#125;?$&#123;dataStr&#125;`; &#125;; return new Promise((resolve, reject) =&gt; &#123; // åˆå§‹åŒ–å›è°ƒå‡½æ•°åç§° callbackName = callbackName || \"cb\" + Math.random() .toString() .replace(\".\", \"\"); let scriptEle = document.createElement(\"script\"); scriptEle.src = generateURL(); document.body.appendChild(scriptEle); // ç»‘å®šåˆ° window ä¸Šï¼Œä¸ºäº†åé¢è°ƒç”¨ window[callbackName] = data =&gt; &#123; resolve(data); // script æ‰§è¡Œå®Œäº†ï¼Œæˆä¸ºæ— ç”¨å…ƒç´ ï¼Œéœ€è¦æ¸…é™¤ document.body.removeChild(scriptEle); &#125;; &#125;);&#125;;jsonp(&#123; url: \"http://127.0.0.1:8000/\", params: &#123; name: \"Yang Min\", age: \"8\" &#125;, callbackName: \"getData\"&#125;) .then(data =&gt; JSON.parse(data)) .then(data =&gt; &#123; console.log(data); // &#123;name: \"Yang Min\", age: \"8\"&#125; &#125;); Node ç«¯ï¼š 123456789101112131415const http = require(\"http\");const querystring = require(\"querystring\");const server = http.createServer((req, res) =&gt; &#123; const url = req.url; const query = querystring.parse(url.split(\"?\")[1]); const &#123; name, age, callback &#125; = query; const data = &#123; name, age &#125; res.end(`$&#123;callback&#125;('$&#123;JSON.stringify(data)&#125;')`);&#125;);server.listen(8000); jQuery ä¸­çš„ JSONPNode éƒ¨åˆ†ä¸å˜ï¼Œä½¿ç”¨ jQuery(3.4.1) å¦‚ä¸‹ï¼š 123456789101112131415161718function getAjaxData() &#123; $.ajax(&#123; type: \"get\", async: false, url: \"http://127.0.0.1:8000/\", dataType: \"jsonp\", //ç”± JSON æ”¹ä¸º JSONP jsonp: \"callback\", //ä¼ é€’ç»™è¯·æ±‚å¤„ç†ç¨‹åºæˆ–é¡µé¢çš„ï¼Œæ ‡è¯†jsonpå›è°ƒå‡½æ•°å(ä¸€èˆ¬ä¸º:callback) jsonpCallback: \"getData\", //callbackçš„functionåç§°ï¼ŒæˆåŠŸå°±ä¼šç›´æ¥èµ° success æ–¹æ³• success: function(data) &#123; data = JSON.parse(data); console.log(`My name is $&#123;data.name&#125;, and $&#123;data.age&#125; years old.`); &#125;, error: function() &#123; console.log(\"Error\"); &#125; &#125;);&#125;getAjaxData(); ä½¿ç”¨å»¶è¿Ÿå¯¹è±¡é‡æ–°å†™ä¸‹ï¼š 12345678910111213141516171819function getAjaxData() &#123; const def = $.ajax(&#123; type: \"get\", async: false, url: \"http://127.0.0.1:8000/\", dataType: \"jsonp\", jsonp: \"callback\", jsonpCallback: \"getData\" &#125;); def .done(data =&gt; &#123; data = JSON.parse(data); console.log(`My name is $&#123;data.name&#125;, and $&#123;data.age&#125; years old.`); &#125;) .fail(err =&gt; &#123; console.log(err); &#125;);&#125; JSONP ç¼ºç‚¹ åªæ”¯æŒ GET è¯·æ±‚ åªæ”¯æŒè·¨åŸŸ HTTP è¯·æ±‚è¿™ç§æƒ…å†µï¼Œä¸èƒ½è§£å†³ä¸åŒåŸŸçš„ä¸¤ä¸ªé¡µé¢ä¹‹é—´å¦‚ä½•è¿›è¡Œ JavaScript è°ƒç”¨çš„é—®é¢˜ è°ƒç”¨å¤±è´¥çš„æ—¶å€™ä¸ä¼šè¿”å›å„ç§ HTTP çŠ¶æ€ç ã€‚ å®‰å…¨æ€§ï¼Œä¸‡ä¸€å‡å¦‚æä¾› JSONP çš„æœåŠ¡å­˜åœ¨é¡µé¢æ³¨å…¥æ¼æ´ï¼Œå³å®ƒè¿”å›çš„ javascript çš„å†…å®¹è¢«äººæ§åˆ¶çš„ã€‚ å‚è€ƒèµ„æ–™ ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿæµè§ˆå™¨å¦‚ä½•æ‹¦æˆªå“åº”ï¼Ÿå¦‚ä½•è§£å†³ jsonp è·¨åŸŸåŸç†åˆ†æ - åˆ†æäº† Ajax å’Œ jsonp ä¹‹é—´çš„å…³ç³»","categories":[{"name":"ç½‘ç»œçŸ¥è¯†","slug":"ç½‘ç»œçŸ¥è¯†","permalink":"https://www.yangtao.site/categories/ç½‘ç»œçŸ¥è¯†/"}],"tags":[{"name":"http","slug":"http","permalink":"https://www.yangtao.site/tags/http/"}]},{"title":"Node ä¸­é—´ä»¶åŸç†","slug":"node-middleware","date":"2020-03-20T09:59:34.000Z","updated":"2020-03-20T10:06:45.464Z","comments":true,"path":"2020/03/20/node-middleware/","link":"","permalink":"https://www.yangtao.site/2020/03/20/node-middleware/","excerpt":"Koa å’Œ Express çš„è®¾è®¡é£æ ¼éå¸¸ç±»ä¼¼ï¼Œåº•å±‚ä¹Ÿéƒ½æ˜¯å…±ç”¨çš„åŒä¸€å¥— HTTP åŸºç¡€åº“ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªæ˜¾è‘—çš„åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„é»˜è®¤å¼‚æ­¥è§£å†³æ–¹æ¡ˆä¹‹å¤–ï¼Œä¸»è¦çš„ç‰¹ç‚¹è¿˜æœ‰ä¸‹é¢å‡ ä¸ªã€‚","text":"Koa å’Œ Express çš„è®¾è®¡é£æ ¼éå¸¸ç±»ä¼¼ï¼Œåº•å±‚ä¹Ÿéƒ½æ˜¯å…±ç”¨çš„åŒä¸€å¥— HTTP åŸºç¡€åº“ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªæ˜¾è‘—çš„åŒºåˆ«ï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„é»˜è®¤å¼‚æ­¥è§£å†³æ–¹æ¡ˆä¹‹å¤–ï¼Œä¸»è¦çš„ç‰¹ç‚¹è¿˜æœ‰ä¸‹é¢å‡ ä¸ªã€‚ MiddlewareKoa çš„ä¸­é—´ä»¶å’Œ Express ä¸åŒï¼ŒKoa é€‰æ‹©äº†æ´‹è‘±åœˆæ¨¡å‹ã€‚ æ‰€æœ‰çš„è¯·æ±‚ç»è¿‡ä¸€ä¸ªä¸­é—´ä»¶çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œå¯¹æ¯” Express å½¢å¼çš„ä¸­é—´ä»¶ï¼ŒKoa çš„æ¨¡å‹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°åç½®å¤„ç†é€»è¾‘ï¼Œå¯¹æ¯” Koa å’Œ Express çš„ Compress ä¸­é—´ä»¶å°±å¯ä»¥æ˜æ˜¾çš„æ„Ÿå—åˆ° Koa ä¸­é—´ä»¶æ¨¡å‹çš„ä¼˜åŠ¿ã€‚ Contextå’Œ Express åªæœ‰ Request å’Œ Response ä¸¤ä¸ªå¯¹è±¡ä¸åŒï¼ŒKoa å¢åŠ äº†ä¸€ä¸ª Context çš„å¯¹è±¡ï¼Œä½œä¸ºè¿™æ¬¡è¯·æ±‚çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆåœ¨ Koa 1 ä¸­ä¸ºä¸­é—´ä»¶çš„ thisï¼Œåœ¨ Koa 2 ä¸­ä½œä¸ºä¸­é—´ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼‰ã€‚ æˆ‘ä»¬å¯ä»¥å°†ä¸€æ¬¡è¯·æ±‚ç›¸å…³çš„ä¸Šä¸‹æ–‡éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚ç±»ä¼¼ traceId è¿™ç§éœ€è¦è´¯ç©¿æ•´ä¸ªè¯·æ±‚ï¼ˆåœ¨åç»­ä»»ä½•ä¸€ä¸ªåœ°æ–¹è¿›è¡Œå…¶ä»–è°ƒç”¨éƒ½éœ€è¦ç”¨åˆ°ï¼‰çš„å±æ€§å°±å¯ä»¥æŒ‚è½½ä¸Šå»ã€‚ç›¸è¾ƒäº request å’Œ response è€Œè¨€æ›´åŠ ç¬¦åˆè¯­ä¹‰ã€‚ åŒæ—¶ Context ä¸Šä¹ŸæŒ‚è½½äº† Request å’Œ Response ä¸¤ä¸ªå¯¹è±¡ã€‚å’Œ Express ç±»ä¼¼ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æä¾›äº†å¤§é‡çš„ä¾¿æ·æ–¹æ³•è¾…åŠ©å¼€å‘ï¼Œä¾‹å¦‚ get request.query get request.hostname set response.body set response.status å¼‚å¸¸å¤„ç†é€šè¿‡åŒæ­¥æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç å¸¦æ¥çš„å¦å¤–ä¸€ä¸ªéå¸¸å¤§çš„å¥½å¤„å°±æ˜¯å¼‚å¸¸å¤„ç†éå¸¸è‡ªç„¶ï¼Œä½¿ç”¨ try catch å°±å¯ä»¥å°†æŒ‰ç…§è§„èŒƒç¼–å†™çš„ä»£ç ä¸­çš„æ‰€æœ‰é”™è¯¯éƒ½æ•è·åˆ°ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥å¾ˆä¾¿æ·çš„ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚ 123456789async function onerror(ctx, next) &#123; try &#123; await next(); &#125; catch (err) &#123; ctx.app.emit(\"error\", err); ctx.body = \"server error\"; ctx.status = err.status || 500; &#125;&#125; åªéœ€è¦å°†è¿™ä¸ªä¸­é—´ä»¶æ”¾åœ¨å…¶ä»–ä¸­é—´ä»¶ä¹‹å‰ï¼Œå°±å¯ä»¥æ•è·å®ƒä»¬æ‰€æœ‰çš„åŒæ­¥æˆ–è€…å¼‚æ­¥ä»£ç ä¸­æŠ›å‡ºçš„å¼‚å¸¸äº†ã€‚ æ³¨ï¼šä»¥ä¸Šæ‰€æœ‰çš†æ¥è‡ªEgg.js ä¸ Koa ä¸­é—´ä»¶æ¨¡æ‹ŸExpress123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101const http = require(\"http\");const slice = Array.prototype.slice;class LikeExpress &#123; constructor() &#123; // å­˜æ”¾ä¸­é—´ä»¶çš„åˆ—è¡¨ this.routes = &#123; all: [], // app.use(...) get: [], // app.get(...) post: [] // app.post(...) &#125;; &#125; register(path) &#123; const info = &#123;&#125;; if (typeof path === \"string\") &#123; info.path = path; // ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œè½¬æ¢ä¸ºæ•°ç»„ï¼Œå­˜å…¥ stack info.stack = slice.call(arguments, 1); &#125; else &#123; info.path = \"/\"; // ä»ç¬¬ä¸€ä¸ªå‚æ•°å¼€å§‹ï¼Œè½¬æ¢ä¸ºæ•°ç»„ï¼Œå­˜å…¥ stack info.stack = slice.call(arguments, 0); &#125; return info; &#125; use() &#123; const info = this.register.apply(this, arguments); this.routes.all.push(info); &#125; get() &#123; const info = this.register.apply(this, arguments); this.routes.get.push(info); &#125; post() &#123; const info = this.register.apply(this, arguments); this.routes.post.push(info); &#125; match(method, url) &#123; let stack = []; if (url === \"/favicon.ico\") &#123; return stack; &#125; // è·å– routes let curRoutes = []; curRoutes = curRoutes.concat(this.routes.all); curRoutes = curRoutes.concat(this.routes[method]); curRoutes.forEach(routeInfo =&gt; &#123; if (url.indexOf(routeInfo.path) === 0) &#123; // url === '/api/get-cookie' ä¸” routeInfo.path === '/' // url === '/api/get-cookie' ä¸” routeInfo.path === '/api' // url === '/api/get-cookie' ä¸” routeInfo.path === '/api/get-cookie' stack = stack.concat(routeInfo.stack); &#125; &#125;); return stack; &#125; // æ ¸å¿ƒçš„ next æœºåˆ¶ handle(req, res, stack) &#123; const next = () =&gt; &#123; // æ‹¿åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä¸­é—´ä»¶ const middleware = stack.shift(); if (middleware) &#123; // æ‰§è¡Œä¸­é—´ä»¶å‡½æ•° middleware(req, res, next); &#125; &#125;; next(); &#125; callback() &#123; return (req, res) =&gt; &#123; res.json = data =&gt; &#123; res.setHeader(\"Content-type\", \"application/json\"); res.end(JSON.stringify(data)); &#125;; const url = req.url; const method = req.method.toLowerCase(); const resultList = this.match(method, url); this.handle(req, res, resultList); &#125;; &#125; listen(...args) &#123; const server = http.createServer(this.callback()); server.listen(...args); &#125;&#125;// å·¥å‚å‡½æ•°module.exports = () =&gt; &#123; return new LikeExpress();&#125;; Koa12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758const http = require(\"http\");// ç»„åˆä¸­é—´ä»¶function compose(middlewareList) &#123; return function(ctx) &#123; function dispatch(i) &#123; const fn = middlewareList[i]; try &#123; return Promise.resolve( fn(ctx, dispatch.bind(null, i + 1)) // promise ); &#125; catch (err) &#123; return Promise.reject(err); &#125; &#125; return dispatch(0); &#125;;&#125;class LikeKoa2 &#123; constructor() &#123; this.middlewareList = []; &#125; use(fn) &#123; this.middlewareList.push(fn); return this; &#125; createContext(req, res) &#123; const ctx = &#123; req, res &#125;; ctx.query = req.query; return ctx; &#125; handleRequest(ctx, fn) &#123; return fn(ctx); &#125; callback() &#123; const fn = compose(this.middlewareList); return (req, res) =&gt; &#123; const ctx = this.createContext(req, res); return this.handleRequest(ctx, fn); &#125;; &#125; listen(...args) &#123; const server = http.createServer(this.callback()); server.listen(...args); &#125;&#125;module.exports = LikeKoa2; é¡¹ç›®å®è·µNode.js ä»é›¶å¼€å‘ web serveråšå®¢é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨expressã€koa2é‡æ„","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"Cookieã€Sessionã€LocalStorageã€SessionStorage","slug":"cookie-session","date":"2020-03-20T04:08:07.000Z","updated":"2020-03-31T03:30:13.505Z","comments":true,"path":"2020/03/20/cookie-session/","link":"","permalink":"https://www.yangtao.site/2020/03/20/cookie-session/","excerpt":"Session æ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ï¼›Cookie æ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç° Session çš„ä¸€ç§æ–¹å¼ï¼›LocalStorage æ˜¯ Web Storage API çš„ä¸€ç§ç±»å‹ï¼Œèƒ½åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨é”®å€¼å¯¹æ•°æ®ï¼›SessionStorage åªå­˜å‚¨å½“å‰ä¼šè¯é¡µ(tab é¡µ)çš„æ•°æ®ï¼Œä¸€æ—¦ç”¨æˆ·å…³é—­å½“å‰é¡µæˆ–è€…æµè§ˆå™¨ï¼Œæ•°æ®å°±è‡ªåŠ¨è¢«æ¸…é™¤æ‰äº†ã€‚","text":"Session æ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ï¼›Cookie æ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç° Session çš„ä¸€ç§æ–¹å¼ï¼›LocalStorage æ˜¯ Web Storage API çš„ä¸€ç§ç±»å‹ï¼Œèƒ½åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨é”®å€¼å¯¹æ•°æ®ï¼›SessionStorage åªå­˜å‚¨å½“å‰ä¼šè¯é¡µ(tab é¡µ)çš„æ•°æ®ï¼Œä¸€æ—¦ç”¨æˆ·å…³é—­å½“å‰é¡µæˆ–è€…æµè§ˆå™¨ï¼Œæ•°æ®å°±è‡ªåŠ¨è¢«æ¸…é™¤æ‰äº†ã€‚ Cookieåœ¨ç½‘ç«™ä¸­ï¼Œhttp è¯·æ±‚æ˜¯æ— çŠ¶æ€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å³ä½¿ç¬¬ä¸€æ¬¡å’ŒæœåŠ¡å™¨è¿æ¥åå¹¶ä¸”ç™»å½•æˆåŠŸåï¼Œç¬¬äºŒæ¬¡è¯·æ±‚æœåŠ¡å™¨ä¾ç„¶ä¸èƒ½çŸ¥é“å½“å‰è¯·æ±‚æ˜¯å“ªä¸ªç”¨æˆ·ã€‚ cookie çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€æ¬¡ç™»å½•åæœåŠ¡å™¨è¿”å›ä¸€äº›æ•°æ®ï¼ˆcookieï¼‰ç»™æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨ä¿å­˜åœ¨æœ¬åœ°ï¼Œå½“è¯¥ç”¨æˆ·å‘é€ç¬¬äºŒæ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨çš„æŠŠä¸Šæ¬¡è¯·æ±‚å­˜å‚¨çš„ cookie æ•°æ®è‡ªåŠ¨çš„æºå¸¦ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡æµè§ˆå™¨æºå¸¦çš„æ•°æ®å°±èƒ½åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å“ªä¸ªäº†ã€‚ cookie å­˜å‚¨çš„æ•°æ®é‡æœ‰é™ï¼Œä¸åŒçš„æµè§ˆå™¨æœ‰ä¸åŒçš„å­˜å‚¨å¤§å°ï¼Œä½†ä¸€èˆ¬ä¸è¶…è¿‡ 4KBã€‚å› æ­¤ä½¿ç”¨ cookie åªèƒ½å­˜å‚¨ä¸€äº›å°é‡çš„æ•°æ®ã€‚ Cookie çš„ä¼˜ç‚¹ï¼š èƒ½ç”¨äºå’ŒæœåŠ¡ç«¯é€šä¿¡ å½“ cookie å¿«è¦è‡ªåŠ¨è¿‡æœŸæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°è®¾ç½®è€Œä¸æ˜¯åˆ é™¤ Cookie ç¼ºç‚¹ï¼š å¢åŠ äº†æ–‡æ¡£ä¼ è¾“çš„è´Ÿè½½ åªèƒ½å­˜å‚¨å°‘é‡çš„æ•°æ® åªèƒ½å­˜å‚¨å­—ç¬¦ä¸² æ½œåœ¨çš„ å®‰å…¨é—®é¢˜ï¼ˆé€šè¿‡æœåŠ¡ç«¯è®¾ç½® httpOnlyï¼‰ è§£å†³åŠæ³•ï¼šWeb Storage API (Local and Session Storage)ã€‚ åˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°å’Œåˆ é™¤ Cookieï¼š 12345678// è¯»å–document.cookie;// ä¿®æ”¹/æ›´æ–°document.cookie = \"testname=Yangtao\";// åˆ é™¤ï¼Œè®¾ç½®expiresçš„è¿‡æœŸæ—¶é—´document.cookie = \"testname=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\"; å®¢æˆ·ç«¯è®¾ç½®ï¼š 1234567891011121314151617181920212223242526272829303132333435(function() &#123; var getAndSetCookie = &#123; init: function() &#123; this.checkCookie(); &#125;, // è®¾ç½®cookieï¼ŒåŒä¸€åŸŸåéƒ½å¯è·å– setCookie: function(name, value, exdays) &#123; var exdays = exdays || 1; var d = new Date(); d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000); document.cookie = name + \"=\" + escape(value) + \";path=/;expires=\" + d.toGMTString(); &#125;, // è¯»å–cookiesï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è®¾ç½®çš„name getCookie: function(name) &#123; var name = name + \"=\"; var ca = document.cookie.split(\";\"); for (var i = 0; i &lt; ca.length; i++) &#123; var c = ca[i].trim(); if (c.indexOf(name) == 0) &#123; return c.substring(name.length, c.length); &#125; &#125; return \"\"; &#125;, checkCookie: function(pc) &#123; var user = this.getCookie(\"msgCookie\"); if (user == \"\") &#123; this.setCookie(\"msgCookie\", \"msgCookie\", 1); &#125; &#125; &#125;; // init getAndSetCookie.init();&#125;)(); Node è®¾ç½®ï¼š 1234567891011121314151617181920212223242526// è·å– cookie è¿‡æœŸæ—¶é—´const getCookieExpires = () =&gt; &#123;const d = new Date();d.setTime(d.getTime() + 24 * 60 * 60 * 1000);return d.toGMTString();&#125;;// è®¾ç½®res.setHeader(\"Set-Cookie\",`username=$&#123;data.username&#125;; path=/; httpOnly; expires=$&#123;getCookieExpires()&#125;`);// è§£æ cookiereq.cookie = &#123;&#125;;const cookieStr = req.headers.cookie || \"\"; // \"k1=v1; k2=v2; k3=v3\"cookieStr.split(\";\").forEach(item =&gt; &#123; if (!item) &#123; return; &#125; const str = item.split(\"=\"); const key = str[0].trim(); const val = str[1].trim(); req.cookie[key] = val;&#125;); Sessionsession å’Œ cookie çš„ä½œç”¨æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†å­˜å‚¨ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ã€‚ä¸åŒçš„æ˜¯ï¼Œcookie æ˜¯å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œè€Œ session å­˜å‚¨åœ¨æœåŠ¡å™¨ã€‚ å­˜å‚¨åœ¨æœåŠ¡å™¨çš„æ•°æ®ä¼šæ›´åŠ çš„å®‰å…¨ï¼Œä¸å®¹æ˜“è¢«çªƒå–ã€‚ä½†å­˜å‚¨åœ¨æœåŠ¡å™¨ä¹Ÿæœ‰ä¸€å®šçš„å¼Šç«¯ï¼Œå°±æ˜¯ä¼šå ç”¨æœåŠ¡å™¨çš„èµ„æºï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº† redisã€‚ Session çš„é—®é¢˜ï¼š session æ˜¯ä¸€ä¸ªå˜é‡å­˜åœ¨ nodejs è¿›ç¨‹å†…å­˜ä¸­ è¿›ç¨‹å†…å­˜æœ‰é™ï¼Œè®¿é—®é‡è¿‡å¤§ï¼Œå†…å­˜å®¹æ˜“æš´å¢ çº¿ä¸Šå¤šä¸ºå¤šè¿›ç¨‹ï¼Œè¿›ç¨‹é—´å†…å­˜æ— æ³•å…±äº« å¯ä»¥å€ŸåŠ© redis è§£å†³ Cookie+Sessioncookie å’Œ session çš„ä½¿ç”¨å·²ç»å‡ºç°äº†ä¸€äº›éå¸¸æˆç†Ÿçš„æ–¹æ¡ˆã€‚åœ¨å¦‚ä»Šçš„å¸‚åœºæˆ–è€…ä¼ä¸šé‡Œï¼Œä¸€èˆ¬æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š 1ã€å­˜å‚¨åœ¨æœåŠ¡ç«¯ é€šè¿‡ cookie å­˜å‚¨ä¸€ä¸ª session_idï¼Œç„¶åå…·ä½“çš„æ•°æ®åˆ™æ˜¯ä¿å­˜åœ¨ session ä¸­ã€‚å¦‚æœç”¨æˆ·å·²ç»ç™»å½•ï¼Œåˆ™æœåŠ¡å™¨ä¼šåœ¨ cookie ä¸­ä¿å­˜ä¸€ä¸ª session_idï¼Œä¸‹æ¬¡å†æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šæŠŠè¯¥ session_id æºå¸¦ä¸Šæ¥ï¼ŒæœåŠ¡å™¨æ ¹æ® session_id åœ¨ session åº“ä¸­è·å–ç”¨æˆ·çš„ session æ•°æ®ã€‚å°±èƒ½çŸ¥é“è¯¥ç”¨æˆ·åˆ°åº•æ˜¯è°ï¼Œä»¥åŠä¹‹å‰ä¿å­˜çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ã€‚è¿™ç§ä¸“ä¸šæœ¯è¯­å«åš server side sessionã€‚ 2ã€å°† session æ•°æ®åŠ å¯†ï¼Œç„¶åå­˜å‚¨åœ¨ cookie ä¸­ è¿™ç§ä¸“ä¸šæœ¯è¯­å«åš client side sessionã€‚ æ€»ç»“ï¼š å­˜å‚¨åœ¨æµè§ˆå™¨çš„ä¸€æ®µå­—ç¬¦ä¸² è·¨åŸŸä¸å…±äº« å¯ä»¥å­˜å‚¨ç»“æ„åŒ–æ•°æ®ï¼Œæ ¼å¼ä¸ºï¼šâ€k1=v1; k2=v2; k3=v3â€ æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ JavaScript ä¿®æ”¹ cookieï¼ˆæœ‰é™åˆ¶ï¼‰ æ¯æ¬¡å‘é€ http è¯·æ±‚ï¼Œéƒ½å°†è¯·æ±‚åŸŸçš„ cookie ä¸€èµ·å‘ç»™ server server å¯ä»¥ä¿®æ”¹ cookieï¼Œå¹¶è¿”ç»™æµè§ˆå™¨ 12345678910111213141516171819202122232425262728293031323334353637383940const SESSION_DATA = &#123;&#125;;let needSetCookie = false;const serverHandle = (req, res) =&gt; &#123; // è§£æ session let userId = req.cookie.userid; if (userId) &#123; if (!SESSION_DATA[userId]) &#123; SESSION_DATA[userId] = &#123;&#125;; &#125; &#125; else &#123; needSetCookie = true; userId = `$&#123;Date.now()&#125;_$&#123;Math.random()&#125;`; SESSION_DATA[userId] = &#123;&#125;; &#125; req.session = SESSION_DATA[userId]; // æ“ä½œ cookie if (needSetCookie) &#123; res.setHeader( \"Set-Cookie\", `userid=$&#123;userId&#125;; path=/; httpOnly; expires=$&#123;getCookieExpires()&#125;` ); &#125; // ... // è·å–usernameå¹¶èµ‹å€¼ if (data.username) &#123; req.session.username = data.username; return new SuccessModel(); &#125; // ç„¶åè¿”å› if (req.session.username) &#123; return Promise.resolve( new SuccessModel(&#123; session: req.session &#125;) ); &#125;&#125;; è¯¦ç»†å†…å®¹ï¼šç™»å½• LocalStorageLocal Storage æ˜¯ Web Storage API çš„ä¸€ç§ç±»å‹ï¼Œèƒ½åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚ Local Storage å› æä¾›äº†æ›´ç›´è§‚å’Œå®‰å…¨çš„ API æ¥å­˜å‚¨ç®€å•çš„æ•°æ®ï¼Œè¢«è§†ä¸ºæ›¿ä»£ Cookies çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ä»æŠ€æœ¯ä¸Šè¯´ï¼Œå°½ç®¡ Local Storage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²åŒ–çš„ JSON æ•°æ®ã€‚è¿™å°±æ„å‘³ç€ï¼ŒLocal Storage èƒ½æ¯” Cookies å­˜å‚¨æ›´å¤æ‚çš„æ•°æ®ã€‚ åˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°å’Œåˆ é™¤ Local Storageï¼š 1234567891011121314// Createconst user = &#123; name: \"Bob\", age: 25 &#125;;localStorage.setItem(\"user\", JSON.stringify(user));// Read (Single)console.log(JSON.parse(localStorage.getItem(\"user\")));// Updateconst updatedUser = &#123; name: \"Bob\", age: 24 &#125;;localStorage.setItem(\"user\", JSON.stringify(updatedUser));// DeletelocalStorage.removeItem(\"user\"); Local Storage çš„ä¼˜ç‚¹ï¼šç›¸æ¯”äº Cookieï¼Œå…¶æä¾›äº†æ›´ç›´è§‚åœ°æ¥å£æ¥å­˜å‚¨æ•°æ®æ›´å®‰å…¨,èƒ½å­˜å‚¨æ›´å¤šæ•°æ®ã€‚ Local Storage çš„ç¼ºç‚¹ï¼šåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ï¼Œæµè§ˆå™¨æ”¯æŒIE8+/Edge/Firefox 2+/Chrome/Safari 4+/Opera 11.5+(caniuse) SessionStorageSession Storage å’Œ Local Storage éå¸¸ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ Session Storage åªå­˜å‚¨å½“å‰ä¼šè¯é¡µ(tab é¡µ)çš„æ•°æ®ï¼Œä¸€æ—¦ç”¨æˆ·å…³é—­å½“å‰é¡µæˆ–è€…æµè§ˆå™¨ï¼Œæ•°æ®å°±è‡ªåŠ¨è¢«æ¸…é™¤æ‰äº†ã€‚ åˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°å’Œåˆ é™¤ Session Storageï¼š 12345678910111213// Createconst user = &#123; name: 'Bob', age: 25 &#125;sessionStorage.setItem('user', JSON.stringify(user))// Read (Single)console.log( JSON.parse(sessionStorage.getItem('user')) )// Updateconst updatedUser = &#123; name: 'Bob', age: 24 &#125;sessionStorage.setItem('user', JSON.stringify(updatedUser))// DeletesessionStorage.removeItem('user') sessionStorageã€localStorageã€cookie éƒ½æ˜¯åœ¨æµè§ˆå™¨ç«¯å­˜å‚¨çš„æ•°æ®ã€‚ å…¶ä¸­ï¼ŒsessionStorage çš„æ¦‚å¿µå¾ˆç‰¹åˆ«ï¼Œå¼•å…¥äº†ä¸€ä¸ªâ€œæµè§ˆå™¨çª—å£â€çš„æ¦‚å¿µï¼ŒsessionStorage æ˜¯åœ¨åŒæºçš„åŒçª—å£ä¸­ï¼Œå§‹ç»ˆå­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦è¿™ä¸ªæµè§ˆå™¨çª—å£æ²¡æœ‰å…³é—­ï¼Œå³ä½¿åˆ·æ–°é¡µé¢æˆ–è¿›å…¥åŒæºå¦ä¸€ä¸ªé¡µé¢ï¼Œæ•°æ®ä»ç„¶å­˜åœ¨ï¼Œå…³é—­çª—å£å sessionStorage å°±ä¼šè¢«é”€æ¯ï¼ŒåŒæ—¶â€œç‹¬ç«‹â€æ‰“å¼€çš„ä¸åŒçª—å£ï¼Œå³ä½¿åŒä¸€é¡µé¢ï¼ŒsessionStorage å¯¹è±¡ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ å®¢æˆ·ç«¯å­˜å‚¨æ–¹å¼å¼‚åŒcookieï¼ŒsessionStorage å’Œ localStorage çš„åŒºåˆ«ï¼Ÿ cookie æ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Š çš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰- cookie æ•°æ®å§‹ç»ˆåœ¨åŒæºçš„ http è¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œè®°ä¼šåœ¨æµ è§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ sessionStorage å’Œ localStorage ä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ° ä¿å­˜ å­˜å‚¨å¤§å°ï¼š cookie æ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡ 4k sessionStorage å’Œ localStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯” cookie å¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ° 5M æˆ–æ›´å¤§ æœ‰æ•ˆæœŸï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰ï¼š localStorage: å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ® sessionStorage: æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ cookie: è®¾ç½®çš„ cookie è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­ å‚è€ƒèµ„æ–™ è‡ªå·±åšå®¢é¡¹ç›®ä¸­ä»€ä¹ˆæ˜¯ cookie COOKIE å’Œ SESSION æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æµ…è°ˆ cookieï¼ŒsessionStorageï¼ŒlocalStorage","categories":[{"name":"ç½‘ç»œçŸ¥è¯†","slug":"ç½‘ç»œçŸ¥è¯†","permalink":"https://www.yangtao.site/categories/ç½‘ç»œçŸ¥è¯†/"}],"tags":[{"name":"http","slug":"http","permalink":"https://www.yangtao.site/tags/http/"},{"name":"web","slug":"web","permalink":"https://www.yangtao.site/tags/web/"},{"name":"cookie","slug":"cookie","permalink":"https://www.yangtao.site/tags/cookie/"}]},{"title":"Understanding JavaScript Bind ()","slug":"js-bind","date":"2020-03-16T09:09:08.000Z","updated":"2020-03-16T11:04:08.368Z","comments":true,"path":"2020/03/16/js-bind/","link":"","permalink":"https://www.yangtao.site/2020/03/16/js-bind/","excerpt":"å¦‚ä½•å°†â€œthisâ€çš„ä¸Šä¸‹æ–‡ä¿ç•™åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Ÿæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦ä½¿ç”¨Function.prototype.bind()ã€‚èµ„æ–™åœ°å€ï¼šUnderstanding JavaScript Bind ()","text":"å¦‚ä½•å°†â€œthisâ€çš„ä¸Šä¸‹æ–‡ä¿ç•™åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Ÿæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦ä½¿ç”¨Function.prototype.bind()ã€‚èµ„æ–™åœ°å€ï¼šUnderstanding JavaScript Bind ()","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"React è®¾è®¡æ€æƒ³ã€è½¬è½½ã€‘","slug":"react-design-ideass","date":"2020-03-16T03:24:11.000Z","updated":"2020-03-16T03:28:38.441Z","comments":true,"path":"2020/03/16/react-design-ideass/","link":"","permalink":"https://www.yangtao.site/2020/03/16/react-design-ideass/","excerpt":"è¯‘è€…åºï¼šæœ¬æ–‡æ˜¯ React æ ¸å¿ƒå¼€å‘è€…ã€æœ‰ React API ç»ˆç»“è€…ä¹‹ç§°çš„ Sebastian MarkbÃ¥ge æ’°å†™ï¼Œé˜è¿°äº†ä»–è®¾è®¡ React çš„åˆè¡·ã€‚é˜…è¯»æ­¤æ–‡ï¼Œä½ èƒ½ç«™åœ¨æ›´é«˜çš„é«˜åº¦æ€è€ƒ React çš„è¿‡å»ã€ç°åœ¨å’Œæœªæ¥ã€‚åŸæ–‡åœ°å€ï¼šhttps://github.com/reactjs/react-basic","text":"è¯‘è€…åºï¼šæœ¬æ–‡æ˜¯ React æ ¸å¿ƒå¼€å‘è€…ã€æœ‰ React API ç»ˆç»“è€…ä¹‹ç§°çš„ Sebastian MarkbÃ¥ge æ’°å†™ï¼Œé˜è¿°äº†ä»–è®¾è®¡ React çš„åˆè¡·ã€‚é˜…è¯»æ­¤æ–‡ï¼Œä½ èƒ½ç«™åœ¨æ›´é«˜çš„é«˜åº¦æ€è€ƒ React çš„è¿‡å»ã€ç°åœ¨å’Œæœªæ¥ã€‚åŸæ–‡åœ°å€ï¼šhttps://github.com/reactjs/react-basic æˆ‘å†™æ­¤æ–‡æ˜¯æƒ³æ­£å¼åœ°é˜è¿°æˆ‘å¿ƒä¸­ React çš„å¿ƒæ™ºæ¨¡å‹ã€‚ç›®çš„æ˜¯è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šè¿™æ ·è®¾è®¡ Reactï¼ŒåŒæ—¶ä½ ä¹Ÿå¯ä»¥æ ¹æ®è¿™äº›è®ºç‚¹åæ¨å‡º Reactã€‚ ä¸å¯å¦è®¤ï¼Œæ­¤æ–‡ä¸­çš„éƒ¨åˆ†è®ºæ®æˆ–å‰æå°šå­˜äº‰è®®ï¼Œè€Œä¸”éƒ¨åˆ†ç¤ºä¾‹çš„è®¾è®¡å¯èƒ½å­˜åœ¨ bug æˆ–ç–å¿½ã€‚è¿™åªæ˜¯æ­£å¼ç¡®å®šå®ƒçš„æœ€åˆé˜¶æ®µã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„å®Œå–„å®ƒçš„æƒ³æ³•å¯ä»¥éšæ—¶æäº¤ pull requestã€‚æœ¬æ–‡ä¸ä¼šä»‹ç»æ¡†æ¶ç»†èŠ‚ä¸­çš„å¥‡æŠ€æ·«å·§ï¼Œç›¸ä¿¡è¿™æ ·èƒ½æçº²æŒˆé¢†ï¼Œè®©ä½ çœ‹æ¸… React ç”±ç®€å•åˆ°å¤æ‚çš„è®¾è®¡è¿‡ç¨‹ã€‚ React.js çš„çœŸå®å®ç°ä¸­å……æ»¡äº†å…·ä½“é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ¸è¿›å¼çš„è§£æ³•ï¼Œç®—æ³•ä¼˜åŒ–ï¼Œå†å²é—ç•™ä»£ç ï¼Œdebug å·¥å…·ä»¥åŠå…¶ä»–ä¸€äº›å¯ä»¥è®©å®ƒçœŸçš„å…·æœ‰é«˜å¯ç”¨æ€§çš„å†…å®¹ã€‚è¿™äº›ä»£ç å¯èƒ½å¹¶ä¸ç¨³å®šï¼Œå› ä¸ºæœªæ¥æµè§ˆå™¨çš„å˜åŒ–å’ŒåŠŸèƒ½æƒé‡çš„å˜åŒ–éšæ—¶é¢ä¸´æ”¹å˜ã€‚æ‰€ä»¥å…·ä½“çš„ä»£ç å¾ˆéš¾å½»åº•è§£é‡Šæ¸…æ¥šã€‚ æˆ‘åå‘äºé€‰æ‹©ä¸€ç§æˆ‘èƒ½å®Œå…¨ hold ä½çš„ç®€æ´çš„å¿ƒæ™ºæ¨¡å‹æ¥ä½œä»‹ç»ã€‚ å˜æ¢ï¼ˆTransformationï¼‰è®¾è®¡ React çš„æ ¸å¿ƒå‰ææ˜¯è®¤ä¸º UI åªæ˜¯æŠŠæ•°æ®é€šè¿‡æ˜ å°„å…³ç³»å˜æ¢æˆå¦ä¸€ç§å½¢å¼çš„æ•°æ®ã€‚åŒæ ·çš„è¾“å…¥å¿…ä¼šæœ‰åŒæ ·çš„è¾“å‡ºã€‚è¿™æ°å¥½å°±æ˜¯çº¯å‡½æ•°ã€‚ 123function NameBox(name) &#123; return &#123; fontWeight: \"bold\", labelContent: name &#125;;&#125; 12&apos;Sebastian MarkbÃ¥ge&apos; -&gt;&#123; fontWeight: &apos;bold&apos;, labelContent: &apos;Sebastian MarkbÃ¥ge&apos; &#125;; æŠ½è±¡ï¼ˆAbstractionï¼‰ä½ ä¸å¯èƒ½ä»…ç”¨ä¸€ä¸ªå‡½æ•°å°±èƒ½å®ç°å¤æ‚çš„ UIã€‚é‡è¦çš„æ˜¯ï¼Œä½ éœ€è¦æŠŠ UI æŠ½è±¡æˆå¤šä¸ªéšè—å†…éƒ¨ç»†èŠ‚ï¼Œåˆå¯å¤ç”¨çš„å‡½æ•°ã€‚é€šè¿‡åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°æ¥å®ç°å¤æ‚çš„ UIï¼Œè¿™å°±æ˜¯æŠ½è±¡ã€‚ 123456function FancyUserBox(user) &#123; return &#123; borderStyle: \"1px solid blue\", childContent: [\"Name: \", NameBox(user.firstName + \" \" + user.lastName)] &#125;;&#125; 12345678&#123; firstName: &apos;Sebastian&apos;, lastName: &apos;MarkbÃ¥ge&apos; &#125; -&gt;&#123; borderStyle: &apos;1px solid blue&apos;, childContent: [ &apos;Name: &apos;, &#123; fontWeight: &apos;bold&apos;, labelContent: &apos;Sebastian MarkbÃ¥ge&apos; &#125; ]&#125;; ç»„åˆï¼ˆCompositionï¼‰ä¸ºäº†çœŸæ­£è¾¾åˆ°é‡ç”¨çš„ç‰¹æ€§ï¼Œåªé‡ç”¨å¶å­ç„¶åæ¯æ¬¡éƒ½ä¸ºä»–ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨æ˜¯ä¸å¤Ÿçš„ã€‚ä½ è¿˜éœ€è¦å¯ä»¥åŒ…å«å…¶ä»–æŠ½è±¡çš„å®¹å™¨å†æ¬¡è¿›è¡Œç»„åˆã€‚æˆ‘ç†è§£çš„â€œç»„åˆâ€å°±æ˜¯å°†ä¸¤ä¸ªæˆ–è€…å¤šä¸ªä¸åŒçš„æŠ½è±¡åˆå¹¶ä¸ºä¸€ä¸ªã€‚ 12345678910function FancyBox(children) &#123; return &#123; borderStyle: \"1px solid blue\", children: children &#125;;&#125;function UserBox(user) &#123; return FancyBox([\"Name: \", NameBox(user.firstName + \" \" + user.lastName)]);&#125; çŠ¶æ€ï¼ˆStateï¼‰UI ä¸å•å•æ˜¯å¯¹æœåŠ¡å™¨ç«¯æˆ–ä¸šåŠ¡é€»è¾‘çŠ¶æ€çš„å¤åˆ¶ã€‚å®é™…ä¸Šè¿˜æœ‰å¾ˆå¤šçŠ¶æ€æ˜¯é’ˆå¯¹å…·ä½“çš„æ¸²æŸ“ç›®æ ‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ª text field ä¸­æ‰“å­—ã€‚å®ƒä¸ä¸€å®šè¦å¤åˆ¶åˆ°å…¶ä»–é¡µé¢æˆ–è€…ä½ çš„æ‰‹æœºè®¾å¤‡ã€‚æ»šåŠ¨ä½ç½®è¿™ä¸ªçŠ¶æ€æ˜¯ä¸€ä¸ªå…¸å‹çš„ä½ å‡ ä¹ä¸ä¼šå¤åˆ¶åˆ°å¤šä¸ªæ¸²æŸ“ç›®æ ‡çš„ã€‚ æˆ‘ä»¬å€¾å‘äºä½¿ç”¨ä¸å¯å˜çš„æ•°æ®æ¨¡å‹ã€‚æˆ‘ä»¬æŠŠå¯ä»¥æ”¹å˜ state çš„å‡½æ•°ä¸²è”èµ·æ¥ä½œä¸ºåŸç‚¹æ”¾ç½®åœ¨é¡¶å±‚ã€‚ 12345678910111213141516171819202122232425function FancyNameBox(user, likes, onClick) &#123; return FancyBox([ \"Name: \", NameBox(user.firstName + \" \" + user.lastName), \"Likes: \", LikeBox(likes), LikeButton(onClick) ]);&#125;// å®ç°ç»†èŠ‚var likes = 0;function addOneMoreLike() &#123; likes++; rerender();&#125;// åˆå§‹åŒ–FancyNameBox( &#123; firstName: \"Sebastian\", lastName: \"MarkbÃ¥ge\" &#125;, likes, addOneMoreLike); æ³¨æ„ï¼šæœ¬ä¾‹æ›´æ–°çŠ¶æ€æ—¶ä¼šå¸¦æ¥å‰¯ä½œç”¨ï¼ˆaddOneMoreLike å‡½æ•°ä¸­ï¼‰ã€‚æˆ‘å®é™…çš„æƒ³æ³•æ˜¯å½“ä¸€ä¸ªâ€œupdateâ€ä¼ å…¥æ—¶æˆ‘ä»¬è¿”å›ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„çŠ¶æ€ï¼Œä½†é‚£æ ·ä¼šæ¯”è¾ƒå¤æ‚ã€‚æ­¤ç¤ºä¾‹å¾…æ›´æ–° Memoizationå¯¹äºçº¯å‡½æ•°ï¼Œä½¿ç”¨ç›¸åŒçš„å‚æ•°ä¸€æ¬¡æ¬¡è°ƒç”¨æœªå…å¤ªæµªè´¹èµ„æºã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°çš„ memorized ç‰ˆæœ¬ï¼Œç”¨æ¥è¿½è¸ªæœ€åä¸€ä¸ªå‚æ•°å’Œç»“æœã€‚è¿™æ ·å¦‚æœæˆ‘ä»¬ç»§ç»­ä½¿ç”¨åŒæ ·çš„å€¼ï¼Œå°±ä¸éœ€è¦åå¤æ‰§è¡Œå®ƒäº†ã€‚ 1234567891011121314151617181920212223function memoize(fn) &#123; var cachedArg; var cachedResult; return function(arg) &#123; if (cachedArg === arg) &#123; return cachedResult; &#125; cachedArg = arg; cachedResult = fn(arg); return cachedResult; &#125;;&#125;var MemoizedNameBox = memoize(NameBox);function NameAndAgeBox(user, currentTime) &#123; return FancyBox([ \"Name: \", MemoizedNameBox(user.firstName + \" \" + user.lastName), \"Age in milliseconds: \", currentTime - user.dateOfBirth ]);&#125; åˆ—è¡¨ï¼ˆListsï¼‰å¤§éƒ¨åˆ† UI éƒ½æ˜¯å±•ç¤ºåˆ—è¡¨æ•°æ®ä¸­ä¸åŒ item çš„åˆ—è¡¨ç»“æ„ã€‚è¿™æ˜¯ä¸€ä¸ªå¤©ç„¶çš„å±‚çº§ã€‚ ä¸ºäº†ç®¡ç†åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ª item çš„ state ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›é€ ä¸€ä¸ª Map å®¹çº³å…·ä½“ item çš„ stateã€‚ 123456789101112131415function UserList(users, likesPerUser, updateUserLikes) &#123; return users.map(user =&gt; FancyNameBox(user, likesPerUser.get(user.id), () =&gt; updateUserLikes(user.id, likesPerUser.get(user.id) + 1) ) );&#125;var likesPerUser = new Map();function updateUserLikes(id, likeCount) &#123; likesPerUser.set(id, likeCount); rerender();&#125;UserList(data.users, likesPerUser, updateUserLikes); æ³¨æ„ï¼šç°åœ¨æˆ‘ä»¬å‘ FancyNameBox ä¼ äº†å¤šä¸ªä¸åŒçš„å‚æ•°ã€‚è¿™æ‰“ç ´äº†æˆ‘ä»¬çš„ memoization å› ä¸ºæˆ‘ä»¬æ¯æ¬¡åªèƒ½å­˜å‚¨ä¸€ä¸ªå€¼ã€‚æ›´å¤šç›¸å…³å†…å®¹åœ¨ä¸‹é¢ã€‚ è¿ç»­æ€§ï¼ˆContinuationsï¼‰ä¸å¹¸çš„æ˜¯ï¼Œè‡ªä» UI ä¸­æœ‰å¤ªå¤šçš„åˆ—è¡¨ï¼Œæ˜ç¡®çš„ç®¡ç†å°±éœ€è¦å¤§é‡çš„é‡å¤æ€§æ ·æ¿ä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨è¿Ÿä¸€äº›å‡½æ•°çš„æ‰§è¡Œï¼Œè¿›è€ŒæŠŠä¸€äº›æ¨¡æ¿ç§»å‡ºä¸šåŠ¡é€»è¾‘ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨â€œæŸ¯é‡ŒåŒ–â€ï¼ˆJavaScript ä¸­çš„ bindï¼‰ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä»æ ¸å¿ƒçš„å‡½æ•°å¤–é¢ä¼ é€’ stateï¼Œè¿™æ ·å°±æ²¡æœ‰æ ·æ¿ä»£ç äº†ã€‚ ä¸‹é¢è¿™æ ·å¹¶æ²¡æœ‰å‡å°‘æ ·æ¿ä»£ç ï¼Œä½†è‡³å°‘æŠŠå®ƒä»å…³é”®ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»ã€‚ 12345678910function FancyUserList(users) &#123; return FancyBox(UserList.bind(null, users));&#125;const box = FancyUserList(data.users);const resolvedChildren = box.children(likesPerUser, updateUserLikes);const resolvedBox = &#123; ...box, children: resolvedChildren&#125;; State Mapä¹‹å‰æˆ‘ä»¬çŸ¥é“å¯ä»¥ä½¿ç”¨ç»„åˆé¿å…é‡å¤æ‰§è¡Œç›¸åŒçš„ä¸œè¥¿è¿™æ ·ä¸€ç§é‡å¤æ¨¡å¼ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ‰§è¡Œå’Œä¼ é€’ state é€»è¾‘æŒªåŠ¨åˆ°è¢«å¤ç”¨å¾ˆå¤šçš„ä½å±‚çº§çš„å‡½æ•°ä¸­å»ã€‚ 12345678910111213141516171819202122232425262728function FancyBoxWithState( children, stateMap, updateState) &#123; return FancyBox( children.map(child =&gt; child.continuation( stateMap.get(child.key), updateState )) );&#125;function UserList(users) &#123; return users.map(user =&gt; &#123; continuation: FancyNameBox.bind(null, user), key: user.id &#125;);&#125;function FancyUserList(users) &#123; return FancyBoxWithState.bind(null, UserList(users) );&#125;const continuation = FancyUserList(data.users);continuation(likesPerUser, updateUserLikes); Memoization Mapä¸€æ—¦æˆ‘ä»¬æƒ³åœ¨ä¸€ä¸ª memoization åˆ—è¡¨ä¸­ memoize å¤šä¸ª item å°±ä¼šå˜å¾—å¾ˆå›°éš¾ã€‚å› ä¸ºä½ éœ€è¦åˆ¶å®šå¤æ‚çš„ç¼“å­˜ç®—æ³•æ¥å¹³è¡¡è°ƒç”¨é¢‘ç‡å’Œå†…å­˜å æœ‰ç‡ã€‚ è¿˜å¥½ UI åœ¨åŒä¸€ä¸ªä½ç½®ä¼šç›¸å¯¹çš„ç¨³å®šã€‚ç›¸åŒçš„ä½ç½®ä¸€èˆ¬æ¯æ¬¡éƒ½ä¼šæ¥å—ç›¸åŒçš„å‚æ•°ã€‚è¿™æ ·ä»¥æ¥ï¼Œä½¿ç”¨ä¸€ä¸ªé›†åˆæ¥åš memoization æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ç­–ç•¥ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨å¯¹å¾… state åŒæ ·çš„æ–¹å¼ï¼Œåœ¨ç»„åˆçš„å‡½æ•°ä¸­ä¼ é€’ä¸€ä¸ª memoization ç¼“å­˜ã€‚ 12345678910111213141516171819202122232425function memoize(fn) &#123; return function(arg, memoizationCache) &#123; if (memoizationCache.arg === arg) &#123; return memoizationCache.result; &#125; const result = fn(arg); memoizationCache.arg = arg; memoizationCache.result = result; return result; &#125;;&#125;function FancyBoxWithState(children, stateMap, updateState, memoizationCache) &#123; return FancyBox( children.map(child =&gt; child.continuation( stateMap.get(child.key), updateState, memoizationCache.get(child.key) ) ) );&#125;const MemoizedFancyNameBox = memoize(FancyNameBox); ä»£æ•°æ•ˆåº”ï¼ˆAlgebraic Effectsï¼‰å¤šå±‚æŠ½è±¡éœ€è¦å…±äº«çç¢æ•°æ®æ—¶ï¼Œä¸€å±‚å±‚ä¼ é€’æ•°æ®éå¸¸éº»çƒ¦ã€‚å¦‚æœèƒ½æœ‰ä¸€ç§æ–¹å¼å¯ä»¥åœ¨å¤šå±‚æŠ½è±¡ä¸­å¿«æ·åœ°ä¼ é€’æ•°æ®ï¼ŒåŒæ—¶åˆä¸éœ€è¦ç‰µæ¶‰åˆ°ä¸­é—´å±‚çº§ï¼Œé‚£è¯¥æœ‰å¤šå¥½ã€‚React ä¸­æˆ‘ä»¬æŠŠå®ƒå«åšâ€œcontextâ€ã€‚ æœ‰æ—¶å€™æ•°æ®ä¾èµ–å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æŠ½è±¡æ ‘è‡ªä¸Šè€Œä¸‹è¿›è¡Œã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨å¸ƒå±€ç®—æ³•ä¸­ï¼Œä½ éœ€è¦åœ¨å®ç°ä»–ä»¬çš„ä½ç½®ä¹‹å‰äº†è§£å­èŠ‚ç‚¹çš„å¤§å°ã€‚ ç°åœ¨ï¼Œè¿™ä¸ªä¾‹å­æœ‰ä¸€ç‚¹è¶…çº²ã€‚æˆ‘ä¼šä½¿ç”¨ ä»£æ•°æ•ˆåº” è¿™ä¸ªç”±æˆ‘å‘èµ·çš„ ECMAScript æ–°ç‰¹æ€§æè®®ã€‚å¦‚æœä½ å¯¹å‡½æ•°å¼ç¼–ç¨‹å¾ˆç†Ÿæ‚‰ï¼Œå®ƒä»¬ åœ¨é¿å…ç”± monad å¼ºåˆ¶å¼•å…¥çš„ä»ªå¼ä¸€æ ·çš„ç¼–ç ã€‚ 123456789101112131415161718192021222324function ThemeBorderColorRequest() &#123; &#125;function FancyBox(children) &#123; const color = raise new ThemeBorderColorRequest(); return &#123; borderWidth: '1px', borderColor: color, children: children &#125;;&#125;function BlueTheme(children) &#123; return try &#123; children(); &#125; catch effect ThemeBorderColorRequest -&gt; [, continuation] &#123; continuation('blue'); &#125;&#125;function App(data) &#123; return BlueTheme( FancyUserList.bind(null, data.users) );&#125; åŸæ–‡åœ°å€ï¼šReact è®¾è®¡æ€æƒ³","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"react","slug":"react","permalink":"https://www.yangtao.site/tags/react/"}]},{"title":"Gulp è‡ªåŠ¨åŒ–æ„å»º","slug":"gulp-v4","date":"2020-03-14T04:18:36.000Z","updated":"2020-03-14T04:25:07.814Z","comments":true,"path":"2020/03/14/gulp-v4/","link":"","permalink":"https://www.yangtao.site/2020/03/14/gulp-v4/","excerpt":"Gulp è‡ªåŠ¨åŒ–æ„å»ºçš„ä¸€äº›è¿‡ç¨‹ï¼Œä»¥åŠå…¶ä»–æ’ä»¶çš„ç»“åˆä½¿ç”¨ç­‰","text":"Gulp è‡ªåŠ¨åŒ–æ„å»ºçš„ä¸€äº›è¿‡ç¨‹ï¼Œä»¥åŠå…¶ä»–æ’ä»¶çš„ç»“åˆä½¿ç”¨ç­‰ èµ·æ­¥ Gulp å¿«é€Ÿå…¥é—¨æŒ‡å— Github Demo å¯¼å‡ºé¡¹ç›®æ ¹ç›®å½•åˆ›å»ºgulpfile.js: 123456function defaultTask(cb) &#123; console.log(\"success\"); cb();&#125;exports.default = defaultTask; gulp å‘½ä»¤ï¼š 12345âœ gulp-project git:(master) âœ— gulp[17:06:29] Using gulpfile ~/Documents/GitHub/gulp-project/gulpfile.js[17:06:29] Starting 'default'...success[17:06:29] Finished 'default' after 2.67 ms Gulpfile åˆ†å‰² Node çš„æ¨¡å—è§£æåŠŸèƒ½å…è®¸ä½ å°† gulpfile.jsâ€™ æ–‡ä»¶æ›¿æ¢ä¸ºåŒæ ·å‘½åä¸º gulpfile.js çš„ç›®å½•ï¼Œè¯¥ç›®å½•ä¸­åŒ…å«äº†ä¸€ä¸ªåä¸º index.js çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶è¢«å½“ä½œ gulpfile.js ä½¿ç”¨ã€‚å¹¶ä¸”ï¼Œè¯¥ç›®å½•ä¸­è¿˜å¯ä»¥åŒ…å«å„ä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼ˆtaskï¼‰æ¨¡å—ã€‚ â€” å®˜æ–¹æ–‡æ¡£ åˆ›å»º gulpfile.jsç›®å½•ï¼Œgulpfile.jsç›®å½•ä¸‹æ–°å»º index.js ç»„åˆä»»åŠ¡ series() å…è®¸å°†å¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡ç»„åˆä¸ºä¸€ä¸ªæ›´å¤§çš„æ“ä½œ å¯¹äºå¸Œæœ›ä»¥æœ€å¤§å¹¶å‘æ¥è¿è¡Œçš„ä»»åŠ¡ï¼ˆtasksï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ parallel() æ–¹æ³•å°†å®ƒä»¬ç»„åˆèµ·æ¥ 12345678910111213141516171819202122232425262728293031323334353637383940const &#123; series, parallel &#125; = require(\"gulp\");function clean(cb) &#123; cb();&#125;function cssTranspile(cb) &#123; cb();&#125;function cssMinify(cb) &#123; cb();&#125;function jsTranspile(cb) &#123; cb();&#125;function jsBundle(cb) &#123; cb();&#125;function jsMinify(cb) &#123; cb();&#125;function publish(cb) &#123; cb();&#125;function build(cb) &#123; cb();&#125;exports.default = series( clean, parallel(cssTranspile, series(jsTranspile, jsBundle)), parallel(cssMinify, jsMinify), publish); è¾“å‡ºï¼š 12345678910111213141516[16:50:36] Starting 'default'...[16:50:36] Starting 'clean'...[16:50:36] Finished 'clean' after 606 Î¼s[16:50:36] Starting 'cssTranspile'...[16:50:36] Finished 'cssTranspile' after 199 Î¼s[16:50:36] Starting 'jsTranspile'...[16:50:36] Finished 'jsTranspile' after 131 Î¼s[16:50:36] Starting 'jsBundle'...[16:50:36] Finished 'jsBundle' after 125 Î¼s[16:50:36] Starting 'cssMinify'...[16:50:36] Starting 'jsMinify'...[16:50:36] Finished 'cssMinify' after 183 Î¼s[16:50:36] Finished 'jsMinify' after 218 Î¼s[16:50:36] Starting 'publish'...[16:50:36] Finished 'publish' after 115 Î¼s[16:50:36] Finished 'default' after 4.55 ms å½“ä¸€ä¸ªç»„åˆæ“ä½œæ‰§è¡Œæ—¶ï¼Œè¿™ä¸ªç»„åˆä¸­çš„æ¯ä¸€ä¸ªä»»åŠ¡æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½ä¼šè¢«æ‰§è¡Œã€‚ 12345678910111213141516171819// This is INCORRECTconst &#123; series, parallel &#125; = require(\"gulp\");const clean = function(cb) &#123; // body omitted cb();&#125;;const css = series(clean, function(cb) &#123; // body omitted cb();&#125;);const javascript = series(clean, function(cb) &#123; // body omitted cb();&#125;);exports.default = parallel(css, javascript); è¾“å‡ºï¼š 12345678910[17:02:45] Starting 'default'...[17:02:45] Starting 'clean'...[17:02:45] Starting 'clean'...[17:02:45] Finished 'clean' after 850 Î¼s[17:02:45] Starting '&lt;anonymous&gt;'...[17:02:45] Finished 'clean' after 2.04 ms[17:02:45] Starting '&lt;anonymous&gt;'...[17:02:45] Finished '&lt;anonymous&gt;' after 563 Î¼s[17:02:45] Finished '&lt;anonymous&gt;' after 438 Î¼s[17:02:45] Finished 'default' after 7.67 ms é‡æ„ï¼š 12345678910111213141516171819// This is INCORRECTconst &#123; series, parallel &#125; = require(\"gulp\");const clean = function(cb) &#123; // body omitted cb();&#125;;const css = function(cb) &#123; // body omitted cb();&#125;;const javascript = function(cb) &#123; // body omitted cb();&#125;;exports.default = series(clean, parallel(css, javascript)); å†æ¬¡è¾“å‡ºï¼š 12345678[17:04:48] Starting 'default'...[17:04:48] Starting 'clean'...[17:04:48] Finished 'clean' after 546 Î¼s[17:04:48] Starting 'css'...[17:04:48] Starting 'javascript'...[17:04:48] Finished 'css' after 242 Î¼s[17:04:48] Finished 'javascript' after 285 Î¼s[17:04:48] Finished 'default' after 3.4 ms å¼‚æ­¥æ‰§è¡Œ Node åº“ä»¥å¤šç§æ–¹å¼å¤„ç†å¼‚æ­¥åŠŸèƒ½ã€‚æœ€å¸¸è§çš„æ¨¡å¼æ˜¯ error-first callbacksï¼Œä½†æ˜¯ä½ è¿˜å¯èƒ½ä¼šé‡åˆ° streamsã€promisesã€event emittersã€child processes, æˆ– observablesã€‚gulp ä»»åŠ¡ï¼ˆtaskï¼‰è§„èŒƒåŒ–äº†æ‰€æœ‰è¿™äº›ç±»å‹çš„å¼‚æ­¥åŠŸèƒ½ã€‚ â€” å®˜æ–¹æ–‡æ¡£ è¿”å› stream 1234567const &#123; src, dest &#125; = require(\"gulp\");function streamTask() &#123; return src(\"*.js\").pipe(dest(\"output\"));&#125;exports.default = streamTask; ç„¶åå‘ç°ï¼Œæ ¹ç›®å½•ä¸‹ä¼šçœ‹åˆ° output ç›®å½•ï¼ŒåŠæ ¹ç›®å½•ä¸‹æ‰€æœ‰ä»¥ *jsç»“å°¾çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®å½•ã€‚ è¿”å› promise 12345function promiseTask() &#123; return Promise.resolve(\"the value is ignored\");&#125;exports.default = promiseTask; è¿”å› event emitter123456789const &#123; EventEmitter &#125; = require(\"events\");function eventEmitterTask() &#123; const emitter = new EventEmitter(); setTimeout(() =&gt; emitter.emit(\"finish\"), 250); return emitter;&#125;exports.default = eventEmitterTask; ä½¿ç”¨ callback123456function callbackTask(cb) &#123; // `cb()` should be called by some async work cb();&#125;exports.default = callbackTask; ä½¿ç”¨ async/await123456789const fs = require(\"fs\");async function asyncAwaitTask() &#123; const &#123; version &#125; = fs.readFileSync(\"package.json\"); console.log(\"version\"); await Promise.resolve(\"some result\");&#125;exports.default = asyncAwaitTask; ä½¿ç”¨æ’ä»¶12345678910const &#123; src, dest &#125; = require(\"gulp\");const uglify = require(\"gulp-uglify\");const rename = require(\"gulp-rename\");exports.default = function() &#123; return src(\"src/assets/**/*.js\") .pipe(uglify()) .pipe(rename(&#123; extname: \".min.js\" &#125;)) .pipe(dest(\"output/\"));&#125;; browsersync Browsersync + Gulp.js ä¸‹è½½ï¼š 1npm install browser-sync gulp --save-dev ä½¿ç”¨ï¼š 12345678910111213141516171819const &#123; task, watch &#125; = require(\"gulp\");const browserSync = require(\"browser-sync\").create();const reload = browserSync.reload;const serve = function(cb) &#123; browserSync.init(&#123; server: &#123; baseDir: \"./src\", https: true, directory: true //ä»ä¸ç›®å½•åˆ—è¡¨çš„åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ–‡ä»¶å³æˆ // index: \"index.html\" //ä»åº”ç”¨ç¨‹åºç›®å½•ä¸­æä¾›æ–‡ä»¶ï¼ŒæŒ‡å®šç‰¹å®šæ–‡ä»¶åä¸ºç´¢å¼• &#125;, port: 8080, notify: false // å¼€å¯é™é»˜æ¨¡å¼ &#125;); watch(\"src/*.html\").on(\"change\", reload);&#125;;task(serve); æœ¬åœ°ä½¿ç”¨ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061const &#123; src, dest, watch, series, parallel &#125; = require(\"gulp\");const uglify = require(\"gulp-uglify\");const rename = require(\"gulp-rename\");const browserSync = require(\"browser-sync\").create();const reload = browserSync.reload;const jsWatcher = watch(\"src/**/*.js\");const cssWatcher = watch(\"src/**/*.css\");const htmlWatcher = watch(\"src/**/*.html\");const clean = function(cb) &#123; // body omitted cb();&#125;;const css = function(cb) &#123; // body omitted cb();&#125;;const javascript = function(cb) &#123; // body omitted cb();&#125;;const serve = function(cb) &#123; browserSync.init(&#123; server: &#123; baseDir: \"./src\", // https: true, directory: true //ä»ä¸ç›®å½•åˆ—è¡¨çš„åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ–‡ä»¶å³æˆï¼Œå¦‚æœè¦æŒ‡å®šæ–‡ä»¶ï¼Œå¯æ³¨é‡Šæ‰ // index: \"index.html\" //ä»åº”ç”¨ç¨‹åºç›®å½•ä¸­æä¾›æ–‡ä»¶ï¼ŒæŒ‡å®šç‰¹å®šæ–‡ä»¶åä¸ºç´¢å¼• &#125;, port: 8080, notify: false // å¼€å¯é™é»˜æ¨¡å¼ &#125;);&#125;;// ç›‘å¬ globs å¹¶åœ¨å‘ç”Ÿæ›´æ”¹æ—¶è¿è¡Œä»»åŠ¡jsWatcher.on(\"change\", function(path, stats) &#123; console.log(`File $&#123;path&#125; was changed`);&#125;);cssWatcher.on(\"change\", function(path, stats) &#123; console.log(`File $&#123;path&#125; was changed`);&#125;);htmlWatcher.on(\"change\", function(path, stats) &#123; console.log(`File $&#123;path&#125; was changed`); reload(); // Reloading Browsers&#125;);exports.build = function() &#123; return src(\"src/assets/**/*.js\") .pipe(uglify()) .pipe(rename(&#123; extname: \".min.js\" &#125;)) .pipe(dest(\"output/\"));&#125;;exports.serve = serve;exports.default = series(clean, parallel(css, javascript)); ç„¶ååœ¨æ ¹ç›®å½•ä¸‹çš„package.jsonï¼Œä¿®æ”¹ï¼š 12345\"scripts\": &#123; \"dev\": \"gulp\", \"build\": \"gulp build\", \"serve\": \"gulp serve\"&#125;, å¯åŠ¨ï¼š 1npm run serve Gulp + SASS-å¦‚ä½•å®‰è£… Sass 1npm install node-sass gulp-sass --save-dev gulpfile.js æ–‡ä»¶ä¸»è¦é…ç½®å¦‚ä¸‹ï¼š 1234567891011const &#123; src, dest, watch &#125; = require(\"gulp\");const sass = require(\"gulp-sass\");sass.compiler = require(\"node-sass\");function scss() &#123; return src(scssGlobSrc) .pipe(sass(&#123; outputStyle: \"expanded\" &#125;).on(\"error\", sass.logError)) .pipe(dest(\"dist/sass\"));&#125;exports.scss = scss; å¯åŠ¨ï¼šgulp scssã€‚ Gulp + Browsersync Browsersync + Gulp.js ä¸‹è½½ï¼š 1npm install browser-sync gulp --save-dev ä½¿ç”¨ï¼š 1234567891011121314151617181920const &#123; task, watch &#125; = require(\"gulp\");const browserSync = require(\"browser-sync\").create();const reload = browserSync.reload;const serve = function(cb) &#123; browserSync.init(&#123; server: &#123; baseDir: \"./src\", https: true, directory: true //ä»ä¸ç›®å½•åˆ—è¡¨çš„åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ–‡ä»¶å³æˆ // index: \"index.html\" //ä»åº”ç”¨ç¨‹åºç›®å½•ä¸­æä¾›æ–‡ä»¶ï¼ŒæŒ‡å®šç‰¹å®šæ–‡ä»¶åä¸ºç´¢å¼• &#125;, port: 8080, notify: false // å¼€å¯é™é»˜æ¨¡å¼ &#125;); watch(\"src/*.html\").on(\"change\", reload);&#125;;exports.serve = serve; è¿è¡Œï¼š 1gulp serve Gulp + TypeScriptæ ¹ç›®å½•ä¸‹åˆå§‹åŒ–ï¼štsc --initã€‚ å®‰è£…ä¾èµ–ï¼š 1npm i -D typescript gulp-typescript é…ç½®ï¼š 1234567891011const ts = require(\"gulp-typescript\");const tsProject = ts.createProject(\"tsconfig.json\");function typescript() &#123; return tsProject .src() .pipe(tsProject()) .js.pipe(dest(\"dist/ts\"));&#125;exports.typescript = typescript; src ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ main.tsï¼š 1234567891011121314151617181920class Student &#123; fullName: string; constructor(public firstName: string, public lastName: string) &#123; this.fullName = `$&#123;firstName&#125; $&#123;lastName&#125; `; &#125;&#125;interface Person &#123; firstName: string; lastName: string;&#125;function greeter(person: Person) &#123; console.log(`hello, $&#123;person.firstName&#125; $&#123;person.lastName&#125;`);&#125;let user = new Student(\"Yang\", \"Tao\");greeter(user);console.log(user.fullName); è¿è¡Œï¼š 1gulp typescript Riot Riot.js æ¡†æ¶æ·±å…¥è§£æ riot.js æ•™ç¨‹ã€ä¸€ã€‘ç®€ä»‹ RIOTæ–‡æ¡£","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"gulp","slug":"gulp","permalink":"https://www.yangtao.site/tags/gulp/"}]},{"title":"Zepto-core-1.1.6 æºç æ³¨é‡Šã€è½¬è½½ã€‘","slug":"zepto-v1.6.6","date":"2020-03-13T06:05:37.000Z","updated":"2020-03-16T04:05:11.179Z","comments":true,"path":"2020/03/13/zepto-v1.6.6/","link":"","permalink":"https://www.yangtao.site/2020/03/13/zepto-v1.6.6/","excerpt":"åŸæ–‡ï¼šzepto-core-1.1.6 æºç æ³¨é‡Š","text":"åŸæ–‡ï¼šzepto-core-1.1.6 æºç æ³¨é‡Š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000100110021003100410051006100710081009101010111012101310141015101610171018101910201021102210231024102510261027102810291030103110321033103410351036103710381039104010411042104310441045104610471048104910501051105210531054105510561057105810591060106110621063106410651066106710681069107010711072107310741075107610771078107910801081108210831084108510861087108810891090109110921093109410951096109710981099110011011102110311041105110611071108110911101111111211131114111511161117111811191120112111221123112411251126112711281129113011311132113311341135113611371138113911401141114211431144114511461147114811491150115111521153115411551156115711581159116011611162116311641165116611671168116911701171117211731174117511761177117811791180118111821183118411851186118711881189119011911192119311941195119611971198119912001201120212031204120512061207120812091210121112121213121412151216121712181219122012211222122312241225122612271228122912301231123212331234123512361237123812391240124112421243124412451246124712481249125012511252125312541255125612571258125912601261126212631264126512661267126812691270127112721273127412751276127712781279128012811282128312841285128612871288128912901291129212931294129512961297129812991300130113021303130413051306130713081309131013111312131313141315131613171318131913201321132213231324132513261327132813291330133113321333133413351336133713381339134013411342134313441345134613471348134913501351135213531354135513561357135813591360136113621363136413651366136713681369137013711372137313741375137613771378137913801381138213831384138513861387138813891390139113921393139413951396139713981399140014011402140314041405140614071408140914101411141214131414141514161417141814191420142114221423142414251426142714281429143014311432143314341435143614371438143914401441144214431444144514461447144814491450145114521453145414551456145714581459146014611462146314641465146614671468146914701471147214731474147514761477147814791480148114821483148414851486148714881489149014911492149314941495149614971498149915001501150215031504150515061507150815091510151115121513151415151516151715181519152015211522152315241525152615271528152915301531153215331534153515361537153815391540154115421543154415451546154715481549155015511552155315541555155615571558155915601561156215631564156515661567156815691570157115721573157415751576157715781579158015811582158315841585158615871588158915901591159215931594159515961597159815991600160116021603160416051606160716081609161016111612161316141615161616171618161916201621162216231624162516261627162816291630163116321633163416351636163716381639164016411642164316441645164616471648164916501651165216531654165516561657165816591660166116621663166416651666166716681669167016711672167316741675167616771678167916801681168216831684168516861687168816891690169116921693169416951696169716981699170017011702170317041705170617071708170917101711171217131714171517161717171817191720172117221723172417251726172717281729173017311732173317341735173617371738173917401741174217431744174517461747174817491750175117521753175417551756175717581759176017611762176317641765176617671768176917701771177217731774177517761777177817791780178117821783178417851786178717881789179017911792179317941795179617971798179918001801180218031804180518061807180818091810181118121813181418151816181718181819182018211822182318241825182618271828182918301831183218331834183518361837183818391840184118421843184418451846184718481849185018511852185318541855185618571858185918601861186218631864/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */var Zepto = (function() &#123; var undefined, key, $, classList, // è·å–æ•°ç»„çš„slice å’Œ filterï¼ˆè¿”å›æ•°ç»„ä¸­çš„æ»¡è¶³å›è°ƒå‡½æ•°ä¸­æŒ‡å®šçš„æ¡ä»¶çš„å…ƒç´ ï¼‰æ–¹æ³• emptyArray = [], slice = emptyArray.slice, filter = emptyArray.filter, document = window.document, elementDisplay = &#123;&#125;, classCache = &#123;&#125;, cssNumber = &#123; \"column-count\": 1, columns: 1, \"font-weight\": 1, \"line-height\": 1, opacity: 1, \"z-index\": 1, zoom: 1 &#125;, // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt; fragmentRE = /^\\s*&lt;(\\w+|!)[^&gt;]*&gt;/, // åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt; ä¸åŒ¹é… &lt;img src=\"\"/&gt; &lt;p&gt;123&lt;/p&gt; singleTagRE = /^&lt;(\\w+)\\s*\\/?&gt;(?:&lt;\\/\\1&gt;|)$/, // å•æ ‡ç­¾ tagExpanderRE = /&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^&gt;]*)\\/&gt;/gi, // body html rootNodeRE = /^(?:body|html)$/i, // å¤§å†™å­—æ¯ capitalRE = /([A-Z])/g, // special attributes that should be get/set via method calls // åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§ methodAttributes = [ \"val\", \"css\", \"html\", \"text\", \"data\", \"width\", \"height\", \"offset\" ], adjacencyOperators = [\"after\", \"prepend\", \"before\", \"append\"], table = document.createElement(\"table\"), tableRow = document.createElement(\"tr\"), // æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨ containers = &#123; tr: document.createElement(\"tbody\"), tbody: table, thead: table, tfoot: table, td: tableRow, th: tableRow, // é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div \"*\": document.createElement(\"div\") &#125;, // interactive ï¼Ÿï¼Ÿï¼Ÿ readyRE = /complete|loaded|interactive/, // åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸² simpleSelectorRE = /^[\\w-]*$/, class2type = &#123;&#125;, toString = class2type.toString, zepto = &#123;&#125;, camelize, uniq, tempParent = document.createElement(\"div\"), // å±æ€§è½¬æ¢ä¸º camalCase æ ¼å¼ã€‚ // $.fn.prop æ–¹æ³•ç”¨åˆ°äº† propMap = &#123; tabindex: \"tabIndex\", readonly: \"readOnly\", for: \"htmlFor\", class: \"className\", maxlength: \"maxLength\", cellspacing: \"cellSpacing\", cellpadding: \"cellPadding\", rowspan: \"rowSpan\", colspan: \"colSpan\", usemap: \"useMap\", frameborder: \"frameBorder\", contenteditable: \"contentEditable\" &#125;, // åˆ¤æ–­æ˜¯å¦æ˜¯arrçš„å‡½æ•° isArray = Array.isArray || function(object) &#123; return object instanceof Array; &#125;; // ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125; // åˆ¤æ–­ element æ˜¯å¦ç¬¦åˆ selector çš„é€‰æ‹©è¦æ±‚ zepto.matches = function(element, selector) &#123; // selectoræœ‰å€¼ï¼Œelementæœ‰å€¼ï¼Œelementæ˜¯æ™®é€šDOMèŠ‚ç‚¹ if (!selector || !element || element.nodeType !== 1) return false; // elem.matchesSelector('.item') // åˆ¤æ–­å½“å‰çš„ elem æ˜¯å¦ç¬¦åˆä¼ å…¥çš„ selector çš„è¦æ±‚ var matchesSelector = element.webkitMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.matchesSelector; if (matchesSelector) return matchesSelector.call(element, selector); // æµè§ˆå™¨ä¸æ”¯æŒ matchesSelector // fall back to performing a selector: var match, parent = element.parentNode, temp = !parent; // ä¸Šæ–‡å®šä¹‰ tempParent = document.createElement('div'), // å¦‚æœæ²¡æœ‰parentï¼Œparentèµ‹å€¼ä¸ºä¸€ä¸ªdivï¼Œç„¶åå°†å½“å‰å…ƒç´ åŠ å…¥åˆ°è¿™ä¸ªdivä¸­ if (temp) &#123; parent = tempParent; tempParent.appendChild(element); // (parent = tempParent).appendChild(element); è¿™ç§å†™æ³•ä¸æ˜“è¯» &#125; // é€šè¿‡ qsa è·å–åŒ¹é…çš„å…ƒç´ ï¼Œåˆ¤æ–­å…¶ä¸­æœ‰æ²¡æœ‰ element match = ~zepto.qsa(parent, selector).indexOf(element); if (temp) &#123; // å¦‚æœæ²¡æœ‰parentæ—¶ï¼Œä¹‹å‰æ‰§è¡Œè¿‡ tempParent.appendChild(element); // æ­¤æ—¶è¦ç§»é™¤å­å…ƒç´  tempParent.removeChild(element); &#125; // temp &amp;&amp; tempParent.removeChild(element) // è¿™ç§å†™æ³•ä¸æ˜“è¯» // è¿”å›æœ€ç»ˆçš„åŒ¹é…ç»“æœï¼Œç»è¿‡ qsa åˆ¤æ–­çš„ç»“æœ return match; &#125;; function type(obj) &#123; return obj == null ? String(obj) // null undefined : class2type[toString.call(obj)] || \"object\"; // ä¸‹æ–‡å®šä¹‰ï¼š // // Populate the class2type map // $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) &#123; // class2type[ \"[object \" + name + \"]\" ] = name.toLowerCase() // &#125;) &#125; function isFunction(value) &#123; return type(value) == \"function\"; &#125; // windowçš„ç‰¹ç‚¹ï¼šwindow.window === window function isWindow(obj) &#123; return obj != null &amp;&amp; obj == obj.window; &#125; // document.nodeType === 9 // elem.DOCUMENT_NODE ä¹Ÿç­‰äº 9 ï¼ˆè¿™é‡Œç›´æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯9ä¹Ÿè¡Œï¼Ÿï¼Ÿï¼Ÿï¼‰ function isDocument(obj) &#123; return obj != null &amp;&amp; obj.nodeType == obj.DOCUMENT_NODE; &#125; function isObject(obj) &#123; return type(obj) == \"object\"; &#125; // åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åŸºæœ¬çš„objectï¼šObject.getPrototypeOf(obj) == Object.prototype function isPlainObject(obj) &#123; return ( isObject(obj) &amp;&amp; !isWindow(obj) &amp;&amp; Object.getPrototypeOf(obj) == Object.prototype ); &#125; // æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„ function likeArray(obj) &#123; return typeof obj.length == \"number\"; &#125; // ç­›é€‰æ•°ç»„ï¼Œè¸¢å‡º null undefined å…ƒç´  function compact(array) &#123; return filter.call(array, function(item) &#123; return item != null; &#125;); &#125; // ä¸‹æ–‡å®šä¹‰ï¼š // $.fn = &#123; // concat: emptyArray.concat, // $.fn.concat.apply([], array) â€”â€” æ— è®º array æ˜¯ä¸æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ // ä¾‹å¦‚ $.fn.concat.call([], 'abc') è¿”å›çš„æ˜¯ ['abc'] function flatten(array) &#123; return array.length &gt; 0 ? $.fn.concat.apply([], array) : array; &#125; // camelize å·²åœ¨ä¸Šæ–‡å®šä¹‰ // ç”¨äº css çš„ camalCase è½¬æ¢ï¼Œä¾‹å¦‚ background-color è½¬æ¢ä¸º backgroundColor camelize = function(str) &#123; return str.replace(/-+(.)?/g, function(match, chr) &#123; return chr ? chr.toUpperCase() : \"\"; &#125;); &#125;; // å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼ function dasherize(str) &#123; return str .replace(/::/g, \"/\") .replace(/([A-Z]+)([A-Z][a-z])/g, \"$1_$2\") .replace(/([a-z\\d])([A-Z])/g, \"$1_$2\") .replace(/_/g, \"-\") .toLowerCase(); &#125; // uniqå˜é‡å·²ç»åœ¨å‰é¢å®šä¹‰ // ç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3] uniq = function(array) &#123; return filter.call(array, function(item, idx) &#123; return array.indexOf(item) == idx; &#125;); &#125;; // ä¸Šæ–‡å®šä¹‰ classCache = &#123;&#125; function classRE(name) &#123; return name in classCache ? classCache[name] : (classCache[name] = new RegExp(\"(^|\\\\s)\" + name + \"(\\\\s|$)\")); // classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š // &#123; // abc: /(^|\\s)abc(\\s|$)/, // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc ' // xyz: /(^|\\s)abc(\\s|$)/, // ... // &#125; &#125; // ä¼ å…¥ä¸€ä¸ª css çš„ name å’Œ valueï¼Œåˆ¤æ–­è¿™ä¸ª value æ˜¯å¦éœ€è¦å¢åŠ  'px' function maybeAddPx(name, value) &#123; // dasherize(name) å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼ // \\!cssNumber[dasherize(name)] åˆ¤æ–­è½¬æ¢å‡ºæ¥çš„ css name æ˜¯å¦å†è¿™ä¸ªæ•°ç»„ä¹‹å¤– return typeof value == \"number\" &amp;&amp; !cssNumber[dasherize(name)] ? // å¦‚æœ value æ˜¯æ•°å­—ï¼Œå¹¶ä¸” name ä¸åœ¨ cssNumber æ•°ç»„ä¹‹å†…ï¼Œå°±éœ€è¦åŠ  'px'ï¼Œå¦åˆ™ä¸éœ€è¦ // ä¾‹å¦‚ 'width'ã€'font-size' å°±éœ€è¦åŠ  'px'ï¼Œ 'font-weight' å°±ä¸éœ€è¦åŠ  value + \"px\" : value; // å‰æ–‡å®šä¹‰---------------------- // cssNumber = &#123; // 'column-count': 1, // 'columns': 1, // 'font-weight': 1, // 'line-height': 1, // 'opacity': 1, // 'z-index': 1, // 'zoom': 1 // &#125;, // function dasherize(str) &#123; // return str.replace(/::/g, '/') // .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2') // .replace(/([a-z\\d])([A-Z])/g, '$1_$2') // .replace(/_/g, '-') // .toLowerCase() // &#125; &#125; // è·å–ä¸€ä¸ªå…ƒç´ çš„é»˜è®¤ display æ ·å¼å€¼ï¼Œå¯èƒ½çš„ç»“æœæ˜¯ï¼šinline block inline-block table .... ï¼ˆnone è½¬æ¢ä¸º blockï¼‰ // $.fn.show æ–¹æ³•ä¸­ç”¨åˆ°äº† function defaultDisplay(nodeName) &#123; var element, display; // å‰æ–‡å®šä¹‰ elementDisplay = &#123;&#125; if (!elementDisplay[nodeName]) &#123; // å¦‚æœ elementDisplay å¯¹è±¡ä¸­ï¼Œæ²¡æœ‰å­˜å‚¨ nodeName çš„ä¿¡æ¯ // åˆ™æ–°å»ºä¸€ä¸ª nodeName å…ƒç´ ï¼Œæ·»åŠ åˆ° body ä¸­ element = document.createElement(nodeName); document.body.appendChild(element); // è·å–å®ƒçš„é»˜è®¤çš„ display æ ·å¼ä¿¡æ¯ã€‚ display = getComputedStyle(element, \"\").getPropertyValue(\"display\"); // æ¥ç€é©¬ä¸Šç§»é™¤å…ƒç´ ï¼ï¼ï¼ element.parentNode.removeChild(element); // 'none' æ¢æˆ 'block'ï¼Œå¦å¤–è¿˜å¯èƒ½æ˜¯ 'inline' 'inline-block' 'table' ç­‰ç­‰... display == \"none\" &amp;&amp; (display = \"block\"); // å­˜å‚¨ä¸‹æ¥ elementDisplay[nodeName] = display; // ä¸‹æ–‡å®šä¹‰ // var nativeGetComputedStyle = getComputedStyle; // window.getComputedStyle = function(element)&#123; // try &#123; // return nativeGetComputedStyle(element) // &#125; catch(e) &#123; // return null // &#125; // &#125; // è§£é‡Šï¼š // å¦‚æœæµè§ˆå™¨æ”¯æŒ getComputedStyle åˆ™ä½¿ç”¨ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå°±è¿”å› null // getComputedStyle(elem, 'ä¼ªç±»ï¼Œå¦‚ :link') è¿”å›ä¸€ä¸ª CSSStyleDeclaration å¯¹è±¡ï¼Œé‡Œé¢å­˜å‚¨äº†å…ƒç´ çš„æ ·å¼ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ getPropertyValue('name') æ–¹æ³•è·å– &#125; // æœ€ç»ˆè¿”å› display ç»“æœ return elementDisplay[nodeName]; &#125; // è¿”å›ä¸€ä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œæ•°ç»„å½¢å¼ function children(element) &#123; // æœ‰äº›æµè§ˆå™¨æ”¯æŒ elem.children è·å–å­å…ƒç´ ï¼Œæœ‰äº›ä¸æ”¯æŒ return \"children\" in element ? // ä¸Šæ–‡å®šä¹‰ slice = [].slice // slice.call(likeArr) å¯ä»¥å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ slice.call(element.children) : // æµè§ˆå™¨ä¸æ”¯æŒ elem.children åªèƒ½é€šè¿‡ elem.childNodes è·å–å­å…ƒç´  // åªå» node.nodeType == 1 çš„å­å…ƒç´ ï¼Œé€šè¿‡ $.map æ‹¼æ¥æˆæ•°ç»„ // $.map ä¸‹æ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) &#123;....&#125; // $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„ $.map(element.childNodes, function(node) &#123; if (node.nodeType == 1) return node; &#125;); &#125; // ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125; // ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) &#123; /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ &#125; // `$.zepto.fragment` takes a html string and an optional tag name // to generate DOM nodes nodes from the given html string. // The generated DOM nodes are returned as an array. // This function can be overriden in plugins for example to make // it compatible with browsers that don't support the DOM fully. zepto.fragment = function(html, name, properties) &#123; /* å‚æ•°ï¼š @html: å¾…å¤„ç†çš„htmlå­—ç¬¦ä¸² @name: é€šè¿‡ name å¯åœ¨ containers ä¸­æŸ¥æ‰¾å®¹å™¨èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¼ å…¥ï¼Œå–å¾—çš„å®¹å™¨é»˜è®¤ä¸º div @properties: èŠ‚ç‚¹å±æ€§å¯¹è±¡ */ var dom, nodes, container; // ä¸Šæ–‡å®šä¹‰ï¼šsingleTagRE = /^&lt;(\\w+)\\s*\\/?&gt;(?:&lt;\\/\\1&gt;|)$/, // åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt; ä¸åŒ¹é… &lt;img src=\"\"/&gt; &lt;p&gt;123&lt;/p&gt; // å¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™ç›´æ¥ç”¨è¯¥æ ‡ç­¾åˆ›å»ºå…ƒç´  // RegExp.$1 è¡¨ç¤ºæ­£åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼Œåœ¨æ­¤å³ (\\w+) åŒ¹é…çš„å†…å®¹ï¼Œ // A special case optimization for a single tag if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1)); if (!dom) &#123; // è¯´æ˜ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œdomæœªè¢«èµ‹å€¼ // ä¸Šæ–‡å®šä¹‰ tagExpanderRE = /&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^&gt;]*)\\/&gt;/ig, // å•æ ‡ç­¾ // å°† &lt;p/&gt;æˆ–&lt;p /&gt;ï¼Œæ›¿æ¢ä¸º &lt;p&gt;&lt;/p&gt;ï¼Œå°†&lt;p abc/&gt;æ›¿æ¢ä¸º&lt;p&gt;abc&lt;/p&gt; // &lt;input/&gt; ï¼ˆåœ¨ tagExpanderRE ä¸­å®šä¹‰ï¼‰çš„ä¸æ›¿æ¢ if (html.replace) html = html.replace(tagExpanderRE, \"&lt;$1&gt;&lt;/$2&gt;\"); // fragmentRE = /^\\s*&lt;(\\w+|!)[^&gt;]*&gt;/, // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt; // å¦‚æœ name æœªä¼ å…¥ï¼Œåˆ™èµ‹å€¼ä¸º html çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾ if (name === undefined) name = fragmentRE.test(html) &amp;&amp; RegExp.$1; // ä¸Šæ–‡å®šä¹‰ // æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨ // containers = &#123; // 'tr': document.createElement('tbody'), // 'tbody': table, // 'thead': table, // 'tfoot': table, // 'td': tableRow, // 'th': tableRow, // é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div // '*': document.createElement('div') // &#125;, if (!(name in containers)) name = \"*\"; container = containers[name]; container.innerHTML = \"\" + html; // è½¬å˜ä¸ºå­—ç¬¦ä¸²çš„å¿«æ·æ–¹å¼ // éå† container çš„å­å…ƒç´ ï¼ˆå…ˆè½¬æ¢ä¸ºæ•°ç»„å½¢å¼ï¼‰ // è¿”å›çš„åŒæ—¶ï¼Œå°†æ¯ä¸ªå­å…ƒç´ ç§»é™¤ã€‚ // $.each è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ•°ç»„ slice.call(container.childNodes) dom = $.each(slice.call(container.childNodes), function() &#123; container.removeChild(this); &#125;); &#125; // èµ‹å€¼å±æ€§ if (isPlainObject(properties)) &#123; // å…ˆå°†domè½¬æ¢ä¸º zepto å¯¹è±¡ nodes = $(dom); $.each(properties, function(key, value) &#123; // ä¸Šæ–‡å®šä¹‰ï¼š // åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§ // methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'], if (methodAttributes.indexOf(key) &gt; -1) nodes[key](value); // æ»¡è¶³ methodAttributes çš„ï¼Œé€šè¿‡æ–¹æ³•èµ‹å€¼ else nodes.attr(key, value); // å¦åˆ™ï¼Œé€šè¿‡å±æ€§å¤åˆ¶ &#125;); &#125; // æœ€ç»ˆè¿”å›çš„domå¯èƒ½æœ‰ä¸¤ç§å½¢å¼ // ç¬¬ä¸€ï¼Œå¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªzeptoå¯¹è±¡ dom = $(document.createElement(RegExp.$1)) // ç¬¬äºŒï¼Œå¦‚æœ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªDOMèŠ‚ç‚¹çš„æ•°ç»„ return dom; &#125;; // ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125; // ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) &#123; /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ &#125; // ä¸Šæ–‡å®šä¹‰ zepto.fragment = function(html, name, properties) &#123; /* é€šè¿‡htmlå­—ç¬¦ä¸²è·å–æ–‡æ¡£ç¢ç‰‡ */ &#125; // `$.zepto.Z` swaps out the prototype of the given `dom` array // of nodes with `$.fn` and thus supplying all the Zepto functions // to the array. Note that `__proto__` is not supported on Internet // Explorer. This method can be overriden in plugins. zepto.Z = function(dom, selector) &#123; dom = dom || []; // å°† dom éšå¼åŸå‹å¼ºåˆ¶æ”¹ä¸º $.fn // ä¸‹æ–‡ zepto.Z.prototype = $.fn å› æ­¤ï¼Œdom.__proto__ = $.fn å³ dom.__proto__ = zepto.Z.prototype å¯ä»¥ä¸è¾ƒçœŸçš„è®¤ä¸º zepto.Z å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆä½†æ„Ÿè§‰è¿™ä¹ˆè®¾è®¡ï¼Œæœ‰äº›è¹©è„šï¼‰ dom.__proto__ = $.fn; dom.selector = selector || \"\"; return dom; &#125;; // `$.zepto.isZ` should return `true` if the given object is a Zepto // collection. This method can be overriden in plugins. zepto.isZ = function(object) &#123; // ä¸Šæ–‡ dom.__proto__ = $.fn // ä¸‹æ–‡ zepto.Z.prototype = $.fn // å¯çŸ¥ï¼šdom.__proto__ === $.fn === zepto.Z.prototype // å› æ­¤ï¼Œzeptoå¯¹è±¡éƒ½ç¬¦åˆ object instanceof zepto.Z return object instanceof zepto.Z; &#125;; // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and // takes a CSS selector and an optional context (and handles various // special cases). // This method can be overriden in plugins. zepto.init = function(selector, context) &#123; var dom; // If nothing given, return an empty Zepto collection if (!selector) return zepto.Z(); // Optimize for string selectors else if (typeof selector == \"string\") &#123; // å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ï¼š // ç¬¬ä¸€ï¼Œä¸€æ®µ html ä»£ç ï¼Œæ—¨åœ¨é€šè¿‡zeptoç”Ÿæˆdomå¯¹è±¡ // ç¬¬äºŒï¼Œä¸€æ®µæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ—¨åœ¨é€šè¿‡zeptoæŸ¥æ‰¾domå¯¹è±¡ // å°†æŸ¥è¯¢ç»“æœå­˜å‚¨åˆ° dom å˜é‡ä¸­ selector = selector.trim(); // If it's a html fragment, create nodes from it // Note: In both Chrome 21 and Firefox 15, DOM error 12 // is thrown if the fragment doesn't begin with &lt; // ä¸Šæ–‡å®šä¹‰ï¼š // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt; // fragmentRE = /^\\s*&lt;(\\w+|!)[^&gt;]*&gt;/, if (selector[0] == \"&lt;\" &amp;&amp; fragmentRE.test(selector)) // ç¬¬ä¸€ï¼ŒRegExp.$1å–å‡ºæ¥çš„å°±æ˜¯ç¬¬ä¸€ä¸ªæ ‡ç­¾åç§°ï¼Œå³æ­£åˆ™ä¸­ (\\w+|!) å¯¹åº”çš„å†…å®¹ // ç¬¬äºŒï¼Œæ­¤æ—¶çš„ context åº”è¯¥ä¼ å…¥çš„æ˜¯csså±æ€§å¯¹è±¡ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰ (dom = zepto.fragment(selector, RegExp.$1, context)), (selector = null); // If there's a context, create a collection on that context first, and select // nodes from there // å¦‚æœ selector ä¸æ˜¯htmlå­—ç¬¦ä¸²æ ‡ç­¾ï¼Œå¹¶ä¸” context æœ‰å€¼ï¼Œåˆ™ä»contextä¸­æŸ¥æ‰¾ // find åº”è¯¥æ˜¯åœ¨ $.fn ä¸­å®šä¹‰çš„ï¼Œæœ‰å¾…è§£è¯»ï¼Ÿï¼Ÿï¼Ÿ else if (context !== undefined) return $(context).find(selector); // If it's a CSS selector, use it to select nodes. // é™¤äº†ä»¥ä¸Šæƒ…å†µï¼Œå°±ä»æ•´ä¸ª document æ‰§è¡Œ qsa çš„æŸ¥æ‰¾ else dom = zepto.qsa(document, selector); &#125; // If a function is given, call it when the DOM is ready // å¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™dom readyæ—¶æ‰§è¡Œï¼Œ // readyæ–¹æ³•åº”è¯¥åœ¨ $.fn ä¸­å®šä¹‰ï¼Œæœ‰å¾…è§£æ¯’ else if (isFunction(selector)) return $(document).ready(selector); // If a Zepto collection is given, just return it // ä¼ å…¥çš„å‚æ•°æœ¬èº«å°±å·²ç»æ˜¯ zepto å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å› else if (zepto.isZ(selector)) return selector; else &#123; // compactå‡½æ•°ï¼šè¸¢å‡ºæ•°ç»„ä¸­ == null çš„å…ƒç´  // normalize array if an array of nodes is given if (isArray(selector)) dom = compact(selector); // å¦‚æœä¼ å…¥çš„æ˜¯objectï¼Œç›´æ¥å¼ºåˆ¶å¡è¿›ä¸€ä¸ªæ•°ç»„ // Wrap DOM nodes. else if (isObject(selector)) (dom = [selector]), (selector = null); // åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­ // ä»æ­¤å¾€ä¸‹ï¼Œæ„Ÿè§‰å’Œä¸Šæ–‡ selector æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œé‡å¤äº† // ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ // fragmentRE.test å³åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ html æ ‡ç­¾å¼€å¤´ï¼ˆå³æ˜¯å¦æ˜¯html fragementï¼‰ // If it's a html fragment, create nodes from it else if (fragmentRE.test(selector)) //æ­¤æ—¶ï¼Œcontext ä¹Ÿæ˜¯å±æ€§é›†åˆï¼Œä¸æ˜¯å®¹å™¨ï¼ï¼ï¼ //ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰ (dom = zepto.fragment(selector.trim(), RegExp.$1, context)), (selector = null); // åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­ // If there's a context, create a collection on that context first, and select // nodes from there else if (context !== undefined) return $(context).find(selector); // And last but no least, if it's a CSS selector, use it to select nodes. else dom = zepto.qsa(document, selector); &#125; // æœ€ç»ˆï¼Œè¿˜æ˜¯é€šè¿‡ zepto.Z åˆ›å»ºäº†å¯¹è±¡ // è¿™é‡Œçš„ domï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ // create a new Zepto collection from the nodes found return zepto.Z(dom, selector); &#125;; // `$` will be the base `Zepto` object. When calling this // function just call `$.zepto.init, which makes the implementation // details of selecting nodes and creating Zepto collections // patchable in plugins. $ = function(selector, context) &#123; return zepto.init(selector, context); &#125;; // $ æœ€ç»ˆè¢«è¿™ä¸ªåŒ¿åå‡½æ•°æ‰€è¿”å›ï¼Œå¹¶å¤åˆ¶ç»™äº†å…¨å±€çš„ Zepto å˜é‡ // å…¨å±€çš„ zepto å˜é‡æš´éœ²ç»™äº† windowï¼Œå¹¶ä¸”å¯èƒ½æœ‰ä¸€ä¸ªåˆ«åâ€”â€” $ // æ­¤ $ éå½¼ $ // å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™é‡Œè‚¯å®šéå¸¸ç»•ï¼ˆè¿˜ä¸å¦‚æŠŠè¿™é‡Œçš„ $ æ”¹æ”¹åå­—ï¼‰ function extend(target, source, deep) &#123; // key åœ¨ä¸Šæ–‡å·²ç»å®šä¹‰ï¼Œå¦åˆ™å°±æ±¡æŸ“å…¨å±€å˜é‡äº† // æ·±åº¦é€’å½’ï¼Œé¦–å…ˆå¿…é¡» deep å‚æ•°ä¸º true // å…¶æ¬¡ï¼Œsource[key] å¿…é¡»æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œæ‰æœ‰å¿…è¦æ·±åº¦é€’å½’ï¼ˆå¦åˆ™æ²¡å¿…è¦ï¼‰ for (key in source) if (deep &amp;&amp; (isPlainObject(source[key]) || isArray(source[key]))) &#123; // source[key] æ˜¯å¯¹è±¡ï¼Œè€Œ target[key] ä¸æ˜¯å¯¹è±¡ // åˆ™ target[key] = &#123;&#125; åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„ if (isPlainObject(source[key]) &amp;&amp; !isPlainObject(target[key])) target[key] = &#123;&#125;; // source[key] æ˜¯æ•°ç»„ï¼Œè€Œ target[key] ä¸æ˜¯æ•°ç»„ // åˆ™ target[key] = [] åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„ if (isArray(source[key]) &amp;&amp; !isArray(target[key])) target[key] = []; // æ‰§è¡Œé€’å½’ extend(target[key], source[key], deep); &#125; // ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œè¯´æ˜ source[key] æ˜¯ä¸€èˆ¬çš„å€¼ç±»å‹ï¼Œç›´æ¥èµ‹å€¼ç»™ target å°±æ˜¯äº† else if (source[key] !== undefined) target[key] = source[key]; &#125; // Copy all but undefined properties from one or more // objects to the `target` object. $.extend = function(target) &#123; // ä¸€èˆ¬ä¼ å…¥çš„å‚æ•°ä¼šæ˜¯ï¼š // (targetObj, srcObj1, srcObj2, srcObj1...) // (true, targetObj, srcObj1, srcObj2, srcObj1...) // arguments æ˜¯å¯¹è±¡æ•°ç»„ï¼Œslice.call ä¼šè¿”å›çœŸæ­£çš„æ•°ç»„ï¼ˆæ­¤å¤„è¿”å›ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼‰ var deep, args = slice.call(arguments, 1); // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯booleanï¼Œè¿™é‡Œä¼šæŠŠç¬¬äºŒä¸ªå‚æ•°å½“åš targetï¼Œå…¶ä»–çš„ä½œä¸º source if (typeof target == \"boolean\") &#123; deep = target; target = args.shift(); &#125; // å°†æ‰€æœ‰çš„ source æ·»åŠ åˆ° target ä¸­ args.forEach(function(arg) &#123; extend(target, arg, deep); &#125;); return target; // æ„Ÿè§‰è¿™æ ·è®¾è®¡æ˜¯æ¯”è¾ƒå¥½ï¼Œå¾ˆå¥½çš„å°†ä¸šåŠ¡å’Œåº•å±‚è¿›è¡Œäº†åˆ†ç¦»ï¼ˆè™½ç„¶æ¯”è¾ƒç®€å•ï¼‰ï¼š // æ ¸å¿ƒæ–¹æ³•å† function extend(...)&#123;...&#125; ä¸­å®šä¹‰ï¼Œ // è€Œ $.extend æ–¹æ³•ä¸­åšä¸€äº›å¤–å›´çš„åˆ¤æ–­å’Œå¤„ç†ï¼Œæœ€ç»ˆè°ƒç”¨ extend å‡½æ•°å»æ‰§è¡Œ &#125;; // `$.zepto.qsa` is Zepto's CSS selector implementation which // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`. // This method can be overriden in plugins. zepto.qsa = function(element, selector) &#123; /* @element: å®¹å™¨ @selector: é€‰æ‹©å™¨ */ var found, maybeID = selector[0] == \"#\", maybeClass = !maybeID &amp;&amp; selector[0] == \".\", // IDæˆ–classå½¢å¼ï¼šè¿”å› selector.slice(1) å³IDæˆ–è€…classçš„å€¼ // å¦åˆ™ï¼šè¿”å› selectorï¼Œå¦‚é€šè¿‡ tagName æŸ¥è¯¢ nameOnly = maybeID || maybeClass ? selector.slice(1) : selector, // Ensure that a 1 char tag name still gets checked // æ˜¯å¦æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„é€‰æ‹©å™¨ï¼Œå¦‚ 'div#div1 .item[link] .red'ï¼‰ isSimple = simpleSelectorRE.test(nameOnly); // ä¸Šæ–‡å®šä¹‰ï¼š // // åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸² // simpleSelectorRE = /^[\\w-]*$/, // ä»¥ä¸‹ä»£ç çš„åŸºæœ¬æ€è·¯æ˜¯ï¼š // 1. ä¼˜å…ˆé€šè¿‡ ID è·å–å…ƒç´ ï¼› // 2. ç„¶åè¯•å›¾é€šè¿‡ className å’Œ tagName è·å–å…ƒç´  // 3. æœ€åé€šè¿‡ querySelectorAll æ¥è·å– return isDocument(element) &amp;&amp; isSimple &amp;&amp; maybeID ? // è¿™æ˜¯æœ€ç®€å•çš„å½¢å¼ï¼šå®¹å™¨æ˜¯documentã€é€‰æ‹©å™¨æ˜¯ä¸€ä¸ªid // å› ä¸º getElementById åªèƒ½åœ¨ document ä¸Šç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå•ç‹¬æ‹¿å‡ºæ¥ (found = element.getElementById(nameOnly)) ? [found] : [] : element.nodeType !== 1 &amp;&amp; element.nodeType !== 9 ? // å®¹å™¨ä¸æ˜¯ä¸€èˆ¬å…ƒç´ ï¼Œä¹Ÿä¸æ˜¯documentï¼Œç›´æ¥è¿”å› [] [] : // å°†è·å–çš„æ‰€æœ‰å…ƒç´ é›†åˆï¼Œéƒ½è½¬æ¢ä¸ºæ•°ç»„ slice.call( isSimple &amp;&amp; !maybeID ? // isSimpleæƒ…å†µä¸‹ï¼ŒnameOnly åªå¯èƒ½æ˜¯ className æˆ–è€… tagName // getElementsByClassName å’Œ getElementsByTagName å¯ä»¥åœ¨ elem ä¸Šç”¨ï¼Œè€Œä¸”æ¯” querySelectorAll é€Ÿåº¦å¿« // æ‰€ä»¥ï¼Œåªè¦elemå®¹å™¨æœ‰å€¼ï¼Œå°½é‡å•ç‹¬æ‹¿å‡ºæ¥å¤„ç† maybeClass ? element.getElementsByClassName(nameOnly) // If it's simple, it could be a class : element.getElementsByTagName(selector) // Or a tag : // æœ€åå…¶ä»–æƒ…å†µï¼Œåªèƒ½é€šè¿‡ querySelectorAll æ¥å¤„ç† element.querySelectorAll(selector) // Or it's not simple, and we need to query all ); &#125;; // æ ¹æ® selector ç­›é€‰ nodes // å¹¶å°† nodes å°è£…ä¸º zepto å¯¹è±¡ // $.fn.filter ä¸‹æ–‡å®šä¹‰ function filtered(nodes, selector) &#123; return selector == null ? $(nodes) : $(nodes).filter(selector); &#125; // åˆ¤æ–­ parent æ˜¯å¦åŒ…å« node $.contains = document.documentElement.contains ? // æµè§ˆå™¨æ”¯æŒ contains æ–¹æ³• function(parent, node) &#123; return parent !== node &amp;&amp; parent.contains(node); &#125; : // ä¸æ”¯æŒ contains æ–¹æ³• function(parent, node) &#123; while (node &amp;&amp; (node = node.parentNode)) if (node === parent) return true; return false; &#125;; // å¦‚æœ arg æ˜¯å‡½æ•°ï¼Œåˆ™æ”¹å˜å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå’Œå‚æ•° // å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è¿”å› arg // $.fn.html æ–¹æ³•å°±ç”¨åˆ°äº† function funcArg(context, arg, idx, payload) &#123; return isFunction(arg) ? arg.call(context, idx, payload) : arg; &#125; // è®¾ç½®å±æ€§ function setAttribute(node, name, value) &#123; value == null ? node.removeAttribute(name) : node.setAttribute(name, value); &#125; // è®¾ç½®æˆ–è·å– node çš„ className // è€ƒè™‘ svg ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ // access className property while respecting SVGAnimatedString function className(node, value) &#123; var klass = node.className || \"\", svg = klass &amp;&amp; klass.baseVal !== undefined; // è·å– if (value === undefined) return svg ? klass.baseVal : klass; // è®¾ç½® svg ? (klass.baseVal = value) : (node.className = value); &#125; // å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š // \"true\" =&gt; true // \"false\" =&gt; false // \"null\" =&gt; null // \"42\" =&gt; 42 // \"42.5\" =&gt; 42.5 // \"08\" =&gt; \"08\" // JSON =&gt; parse if valid // String =&gt; self function deserializeValue(value) &#123; try &#123; return value ? // valueã€æœ‰å€¼ã€çš„æƒ…å†µï¼š value == \"true\" || // å¦‚æœ value == 'true'ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æœ¬èº«å°±è¿”å› true ï¼Œå¯¼è‡´æ•´ä¸ªå‡½æ•°è¿”å›true // value !== 'true' çš„æƒ…å†µï¼š (value == \"false\" ? false // \"null\" =&gt; null : value == \"null\" ? null // \"null\" =&gt; null : +value + \"\" == value ? +value // æ•°å­—ï¼š\"42\" =&gt; 42 \"42.5\" =&gt; 42.5 ï¼ˆ ä½†æ˜¯ '08' å´ä¸ç¬¦åˆè¿™ä¸ªæ¡ä»¶ ï¼‰ : /^[\\[\\&#123;]/.test(value) ? $.parseJSON(value) // '[...]' æˆ–è€… '&#123;...&#125;' : value) // å…¶ä»– : // valueã€æ— å€¼ã€çš„æƒ…å†µï¼š undefined / '' / flase / 0 / null value; &#125; catch (e) &#123; return value; &#125; &#125; // å°†ä¸Šæ–‡å®šä¹‰çš„å‡½æ•°ï¼Œæš´éœ²ç»™ $ å¯¹è±¡ï¼ˆå…¶å® $ æ˜¯ä¸€ä¸ª functionï¼‰ $.type = type; $.isFunction = isFunction; $.isWindow = isWindow; $.isArray = isArray; $.isPlainObject = isPlainObject; $.isEmptyObject = function(obj) &#123; var name; for (name in obj) return false; return true; &#125;; $.inArray = function(elem, array, i) &#123; return emptyArray.indexOf.call(array, elem, i); &#125;; $.camelCase = camelize; $.trim = function(str) &#123; return str == null ? \"\" : String.prototype.trim.call(str); &#125;; // plugin compatibility $.uuid = 0; $.support = &#123;&#125;; $.expr = &#123;&#125;; // é‡æ–°ç»„ç»‡ elements å¯¹è±¡ï¼ˆæ•°ç»„ã€å¯¹è±¡æˆ–è€…å¯¹è±¡æ•°ç»„ï¼‰ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½ç”¨ callback è¿›è¡Œæ£€éªŒ // æ£€éªŒé€šè¿‡åï¼Œå°†å…ƒç´ pushè¿›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¹¶è¿”å› $.map = function(elements, callback) &#123; var value, values = [], i, key; // æ•°ç»„ï¼Œæˆ–è€…å¯¹è±¡æ•°ç»„ if (likeArray(elements)) for (i = 0; i &lt; elements.length; i++) &#123; // éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­ value = callback(elements[i], i); if (value != null) values.push(value); &#125; // å¯¹è±¡ else for (key in elements) &#123; // éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­ value = callback(elements[key], key); if (value != null) values.push(value); &#125; // è¿”å›æ•°ç»„ // flatten å‡½æ•°ä¸Šæ–‡å®šä¹‰çš„ï¼Œä½œç”¨ï¼šæ— è®º values æ˜¯å¦æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ­£ç¡®çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œä¼ å…¥ 'abc' ï¼Œè¿”å› ['abc'] return flatten(values); &#125;; // éå† elements æ‰€æœ‰å…ƒç´ ï¼ˆæ•°ç»„ã€å¯¹è±¡æ•°ç»„ã€å¯¹è±¡ï¼‰ï¼Œæ‰§è¡Œ callback æ–¹æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯è¿”å› elements // æ³¨æ„1ï¼šcallback.call(elements[i], i, elements[i]) å‡½æ•°æ‰§è¡Œçš„ç¯å¢ƒå’Œå‚æ•° // æ³¨æ„2ï¼š=== false) return elements ä¸€æ—¦æœ‰å‡½æ•°è¿”å› falseï¼Œå³è·³å‡ºå¾ªç¯ï¼Œç±»ä¼¼ break // æ³¨æ„3ï¼šæ— è®ºå“ªç§æƒ…å†µï¼Œæœ€ç»ˆè¿”å›çš„è¿˜æ˜¯ elements $.each = function(elements, callback) &#123; var i, key; if (likeArray(elements)) &#123; for (i = 0; i &lt; elements.length; i++) if (callback.call(elements[i], i, elements[i]) === false) return elements; &#125; else &#123; for (key in elements) if (callback.call(elements[key], key, elements[key]) === false) return elements; &#125; return elements; &#125;; // ä¸Šæ–‡å®šä¹‰ï¼šfilter = emptyArray.filter // ç­›é€‰æ•°ç»„ $.grep = function(elements, callback) &#123; return filter.call(elements, callback); &#125;; if (window.JSON) $.parseJSON = JSON.parse; // Populate the class2type map $.each( \"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) &#123; class2type[\"[object \" + name + \"]\"] = name.toLowerCase(); /* ä¸Šæ–‡å°† class2type èµ‹å€¼ä¸º &#123;&#125; æœ€ç»ˆå°† class2type èµ‹å€¼ä¸ºï¼š &#123; '[object boolean]': 'boolean', '[object number]': 'number', '[object string]': 'string', ... &#125; å­˜å‚¨è¿™ä¸ªæ•°æ®æ˜¯ä¸ºäº†æ–¹ä¾¿çš„è·å–ä¸€äº›å¯¹è±¡çš„ç±»å‹ï¼Œ ä¾‹å¦‚ Object.prototype.toString.call([]) è¿”å›çš„æ˜¯ '[Object Array]' é‚£ä¹ˆå³å¯æ ¹æ®è¿™ä¸ªè·å– [] çš„ç±»å‹æ˜¯ 'array' */ &#125; ); // Define methods that will be available on all // Zepto collections $.fn = &#123; // ä¸ºä½•è¦è¿™ä¹ˆå¤šæ•°ç»„çš„æ–¹æ³•ï¼Ÿ // å› ä¸ºä¸€ä¸ª zepto å¯¹è±¡ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ // Because a collection acts like an array // copy over these useful array functions. forEach: emptyArray.forEach, reduce: emptyArray.reduce, // æ–¹æ³•ä½•ç”¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ push: emptyArray.push, sort: emptyArray.sort, indexOf: emptyArray.indexOf, concat: emptyArray.concat, // `map` and `slice` in the jQuery API work differently // from their array counterparts map: function(fn) &#123; // $.map ä¸Šæ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) &#123;....&#125; // $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡ã€å¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„ // æœ€åï¼Œç”¨ $ å°è£…è¿”å› return $( // $.map è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ $.map( this, // é’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœå‡½æ•°è¿”å›çš„ !=null å°±å°†æ’å…¥åˆ°æ–°è¿”å›çš„æ•°ç»„ function(el, i) &#123; return fn.call(el, i, el); &#125; ) ); /* $('div').map(function(key, value)&#123; return value.id; // æˆ–è€… return this.id; &#125;) è¿™ä¸ªç»“æœå°±æ˜¯ $(['div1', 'div2' ...]) */ &#125;, slice: function() &#123; // ç›´æ¥æ•°ç»„çš„sliceæ–¹æ³•ï¼Œå¹¶å°†ç»“æœç”¨ $ å°è£…è¿”å› return $(slice.apply(this, arguments)); &#125;, // åœ¨ zepto.init å‡½æ•°ä¸­ï¼Œå½“ä¼ å…¥çš„å‡½æ•°æ˜¯å‡½æ•°æ—¶ï¼Œå°±ç”¨åˆ°äº† ready // else if (isFunction(selector)) return $(document).ready(selector) ready: function(callback) &#123; // need to check if document.body exists for IE as that browser reports // document ready when it hasn't yet created the body element // ä¸‹æ–‡å®šä¹‰ï¼šreadyRE = /complete|loaded|interactive/, if (readyRE.test(document.readyState) &amp;&amp; document.body) callback($); else document.addEventListener( \"DOMContentLoaded\", function() &#123; callback($); &#125;, false ); // è¿”å›å½“å‰å¯¹è±¡ return this; &#125;, get: function(idx) &#123; return idx === undefined ? slice.call(this) // æœªä¼ å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€æ•´ä¸ªæ•°ç»„ : // æœ‰å‚æ•°ï¼Œåˆ™è¯•å›¾è¿”å›å•ä¸ªå…ƒç´ ï¼ˆå¤§äº0ï¼Œå°äº0 ä¸¤ç§æƒ…å†µï¼‰ this[idx &gt;= 0 ? idx : idx + this.length]; &#125;, // å°†zeptoé›†åˆå˜ä¸ºçº¯æ•°ç»„ toArray: function() &#123; return this.get(); &#125;, size: function() &#123; return this.length; &#125;, // å°†å…ƒç´ ä»è¿™ä¸ªDOMæ ‘ä¸­ç§»é™¤ remove: function() &#123; return this.each(function() &#123; if (this.parentNode != null) this.parentNode.removeChild(this); &#125;); &#125;, each: function(callback) &#123; // [].every ES5ä¸­Arrayçš„æ–°ç‰¹æ€§ã€‚å¾ªç¯æ•°ç»„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›æ˜¯å¦ç¬¦åˆcallbackå‡½æ•°çš„è¦æ±‚ // every å‡½æ•°è¿”å›çš„æ˜¯ false æˆ–è€… trueï¼ˆä¸è¿‡è¿™é‡Œè¿”å›ä»€ä¹ˆæ— æ‰€è°“ï¼Œæ‰§è¡Œå°±å¯ä»¥äº†ï¼‰ emptyArray.every.call(this, function(el, idx) &#123; return callback.call(el, idx, el) !== false; &#125;); // æœ€åè¿”å›æœ¬èº«å¯¹è±¡ return this; &#125;, filter: function(selector) &#123; // notå‡½æ•°ä¸‹æ–‡å®šä¹‰ // å¦‚æœç»™notä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™è¿”å›ä¸ç¬¦åˆè¿™ä¸ªå‡½æ•°è§„åˆ™çš„å…ƒç´ çš„æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰ if (isFunction(selector)) return this.not(this.not(selector)); // ä¸Šæ–‡å®šä¹‰ï¼šzepto.matches åˆ¤æ–­elementsæ˜¯å¦ç¬¦åˆ selector çš„è¦æ±‚ // zepto.matches = function(element, selector) &#123;...&#125; return $( filter.call(this, function(element) &#123; // åˆ©ç”¨ [].filter æ–¹æ³•åšç­›é€‰ï¼Œåˆ©ç”¨ zepto.matches åšåˆ¤æ–­ return zepto.matches(element, selector); &#125;) ); &#125;, // $('div') å¯èƒ½åªæœ‰ä¸‰ä¸ª div èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ $('div').add('p') å†ä¸‰ä¸ª div èŠ‚ç‚¹çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸‰ä¸ª p èŠ‚ç‚¹ add: function(selector, context) &#123; // uniqå‡½æ•°â€”â€”æ•°ç»„å»é‡ï¼Œä¾‹å¦‚ï¼šç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3] return $(uniq(this.concat($(selector, context)))); &#125;, is: function(selector) &#123; // æ³¨æ„ï¼šè¿™é‡Œåªå¯¹ this[0] ç¬¬ä¸€ä¸ªå…ƒç´ åšåˆ¤æ–­äº†ï¼Œå…¶ä»–çš„å…ƒç´ ä¸ç®¡äº† return this.length &gt; 0 &amp;&amp; zepto.matches(this[0], selector); &#125;, not: function(selector) &#123; var nodes = []; // å­˜å‚¨æœ€åè¿”å›çš„ç»“æœ // å¦‚æœå‚æ•°æ˜¯å‡½æ•° if (isFunction(selector) &amp;&amp; selector.call !== undefined) this.each(function(idx) &#123; // éå†å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•° // å½“å‡½æ•°è¿”å› false æ—¶ï¼ˆå³ä¸ç¬¦åˆå‡½æ•°çš„è§„åˆ™ï¼‰ï¼Œåˆ™å°†å½“å‰å…ƒç´ pushåˆ°ç»“æœä¸­ï¼Œç­‰å¾…è¿”å› if (!selector.call(this, idx)) nodes.push(this); &#125;); // å¦‚æœå‚æ•°ä¸æ˜¯å‡½æ•° else &#123; // ä¸º excludes èµ‹å€¼ var excludes = // å¦‚æœ selector æ˜¯å­—ç¬¦ä¸²ï¼ˆcssé€‰æ‹©å™¨ï¼‰ï¼Œåˆ™ç”¨filterè¿‡æ»¤ï¼Œå°†ç»“æœå­˜å‚¨åˆ° excludes ä¸­ typeof selector == \"string\" ? this.filter(selector) : // å¦‚æœ selector ä¸æ˜¯å­—ç¬¦ä¸² // å¦‚æœæ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„ï¼ˆå¹¶ä¸” selector.item æ˜¯å‡½æ•°ï¼Ÿï¼Ÿï¼Ÿï¼‰ï¼Œåˆ™ç”Ÿæˆæ•°ç»„ï¼Œèµ‹å€¼ç»™ excludes likeArray(selector) &amp;&amp; isFunction(selector.item) ? slice.call(selector) : // å¦åˆ™ç›´æ¥ç”Ÿæˆ zepto å¯¹è±¡ï¼Œèµ‹å€¼ç»™ excludes $(selector); // è‡³æ­¤ï¼Œexcludes ä¸­å°±å­˜å‚¨äº†é€šè¿‡ selector æŸ¥æ‰¾å‡ºæ¥çš„å…ƒç´  // [].forEach æ˜¯ES5çš„æ–°ç‰¹æ€§ this.forEach(function(el) &#123; // å–å‡º excludes ä¸­ä¸åŒ…å«çš„å…ƒç´ ï¼Œpushåˆ°ç»“æœä¸­ if (excludes.indexOf(el) &lt; 0) nodes.push(el); &#125;); &#125; // è¿”å›æœ€åçš„ç»“æœï¼Œç”¨ $ å°è£… return $(nodes); &#125;, has: function(selector) &#123; // ç»è¿‡ filter å‡½æ•°å¤„ç†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¤„ç†åçš„å€¼ return this.filter(function() &#123; return isObject(selector) ? // å¦‚æœ seletor æ˜¯ objectï¼ˆå¯èƒ½æ˜¯elemèŠ‚ç‚¹ï¼‰ï¼Œåˆ™ç”¨ $.contains åˆ¤æ–­ $.contains(this, selector) : // å¦åˆ™ï¼ˆselectoræ˜¯cssé€‰æ‹©å­—ç¬¦ä¸²ï¼‰åˆ™è¿”å›findåçš„sizeï¼ˆå¦‚æœ size === 0 å³ç›¸å½“äºè¿”å› falseï¼‰ $(this) .find(selector) .size(); // $.fn.find åœ¨ä¸‹æ–‡å®šä¹‰ &#125;); &#125;, eq: function(idx) &#123; // å–å‡ºæŒ‡å®šindexçš„å…ƒç´  // å¯æ”¯æŒ -1ã€0ã€1ã€2 â€¦â€¦ return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1); &#125;, first: function() &#123; var el = this[0]; // ä¸æ˜¯ object åˆ™ç›´æ¥è¿”å› // æ˜¯ object ç±»å‹ï¼Œåˆ™ç”¨ $ å°è£… ï¼ˆå› ä¸ºæ—¶åˆ»éƒ½è¦æ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼ï¼‰ return el &amp;&amp; !isObject(el) ? el : $(el); &#125;, last: function() &#123; var el = this[this.length - 1]; return el &amp;&amp; !isObject(el) ? el : $(el); &#125;, find: function(selector) &#123; // result å­˜å‚¨è¿”å›ç»“æœ var result, $this = this; // å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºçš„ zepto å¯¹è±¡ if (!selector) result = $(); // å¦‚æœselectoræ˜¯å¯¹è±¡ else if (typeof selector == \"object\") result = $(selector).filter(function() &#123; var node = this; return emptyArray.some.call($this, function(parent) &#123; return $.contains(parent, node); &#125;); &#125;); // å¦‚æœ selector ä¸æ˜¯å¯¹è±¡ï¼ˆå³æ˜¯cssé€‰æ‹©å™¨ï¼‰ï¼š // å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ qsa åˆ¤æ–­ï¼Œç»“æœç»è¿‡ $ å°è£…åèµ‹å€¼ç»™ result else if (this.length == 1) result = $(zepto.qsa(this[0], selector)); // å¦‚æœæœ‰å¤šä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ map éå†æ‰€æœ‰å…ƒç´ ï¼Œä½¿ç”¨ qsa é’ˆå¯¹æ¯ä¸ªå…ƒç´ åˆ¤æ–­ï¼Œç¬¦åˆæ¡ä»¶å³è¿”å›ï¼ˆmapå°†è¿”å›åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ $ å°è£…ï¼Œæ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼‰ else result = this.map(function() &#123; return zepto.qsa(this, selector); &#125;); // è¿”å›æœ€ç»ˆç»“æœ return result; &#125;, // ä»å…ƒç´ æœ¬èº«å¼€å§‹ï¼Œé€çº§å‘ä¸Šçº§å…ƒç´ åŒ¹é…ï¼Œå¹¶è¿”å›æœ€å…ˆåŒ¹é…selectorçš„å…ƒç´  closest: function(selector, context) &#123; var node = this[0], collection = false; // å¦‚æœ selector æ˜¯å¯¹è±¡ï¼Œåˆ™ç”¨ $ å°è£…åï¼Œèµ‹å€¼ç»™ collection if (typeof selector == \"object\") collection = $(selector); while ( // whileå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ï¼š // ç¬¬ä¸€ï¼Œnodeæœ‰å€¼ï¼ˆnodeä¸€å¼€å§‹è¢«èµ‹å€¼ä¸ºå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ // ç¬¬äºŒï¼Œcollectionæœ‰å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å¯¹è±¡ï¼‰åˆ™collectionåŒ…å«nodeï¼›collectionæ— å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å­—ç¬¦ä¸²ï¼Œcssé€‰æ‹©ï¼‰ï¼Œåˆ™nodeæ»¡è¶³selectoræ¡ä»¶ // æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä¸æ»¡è¶³ç¬¬äºŒæ¡ä»¶ï¼Œåˆ™å¾ªç¯ç»§ç»­ï¼ˆnodeè¯•å›¾èµ‹å€¼ä¸ºnode.parentNodeï¼‰ï¼›å¦åˆ™ï¼Œå¾ªç¯è·³å‡ºï¼ˆè¯´æ˜å·²ç»æ‰¾åˆ°äº†ç¬¦åˆæ¡ä»¶çš„çˆ¶èŠ‚ç‚¹ï¼‰ node &amp;&amp; !(collection ? collection.indexOf(node) &gt;= 0 : zepto.matches(node, selector)) ) // nodeèµ‹å€¼æˆ node.parentNode // å‰ææ¡ä»¶æ˜¯ï¼šnode != context &amp;&amp; node ä¸æ˜¯ documentï¼Œå¦‚æœæ˜¯è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œé‚£å°±ä¸ç»§ç»­èµ‹å€¼ node = node !== context &amp;&amp; !isDocument(node) &amp;&amp; node.parentNode; // è¿”å›æœ€ç»ˆç»“æœ return $(node); &#125;, // è·å–å¯¹è±¡é›†åˆæ¯ä¸ªå…ƒç´ æ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ ã€‚ $('h1').parents() =&gt; [&lt;div#container&gt;, &lt;body&gt;, &lt;html&gt;] parents: function(selector) &#123; var ancestors = [], nodes = this; while (nodes.length &gt; 0) // å¯èƒ½éœ€è¦æ‰§è¡Œå¤šæ¬¡ while å¾ªç¯ // æ¯æ¬¡æ‰§è¡Œ $.map å‡½æ•°éƒ½ä¼šå¯¹ nodes é‡æ–°èµ‹å€¼ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­å¾ªç¯ // å› ä¸ºè¦è·å–æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰ç¥–å…ˆå…ƒç´ ï¼Œæ‰€ä»¥è¦å¤šæ¬¡å¾ªç¯ nodes = $.map(nodes, function(node) &#123; // ä½¿ç”¨ $.mapï¼ˆè¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ç”¨ $ å°è£…ï¼‰éå†æ‰€æœ‰å…ƒç´  if ( (node = node.parentNode) &amp;&amp; !isDocument(node) &amp;&amp; ancestors.indexOf(node) &lt; 0 ) &#123; // å°†ç¬¦åˆæ¡ä»¶çš„å…ƒç´ pushåˆ°ç»“æœä¸­ // æ¡ä»¶ï¼šä¸èƒ½æ˜¯ documentï¼Œç»“æœä¸­å…ƒç´ ä¸èƒ½é‡å¤ã€‚å¦åˆ™ä¸æ‰§è¡Œpush ancestors.push(node); // è¿”å›çš„ node ï¼Œå°†æ‹¼æ¥å‡ºæ–°æ•°ç»„ï¼Œé‡æ–°å¤åˆ¶ç»™ nodesï¼Œç„¶åè¯•å›¾ç»§ç»­æ‰§è¡Œ while å¾ªç¯ return node; &#125; &#125;); // å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºï¼Œè¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´  return filtered(ancestors, selector); &#125;, // è·å–å¯¹è±¡é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ ã€‚å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºã€‚è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚ parent: function(selector) &#123; // pluck å‡½æ•°åœ¨ä¸‹æ–‡å®šä¹‰ // parent å‡½æ•°ï¼Œåªè·å–ç¬¬ä¸€çº§çˆ¶èŠ‚ç‚¹å³å¯ return filtered(uniq(this.pluck(\"parentNode\")), selector); &#125;, // è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤ children: function(selector) &#123; return filtered( this.map(function() &#123; return children(this); &#125;), selector ); &#125;, // è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„å­å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡å­—å’Œæ³¨é‡ŠèŠ‚ç‚¹ contents: function() &#123; return this.map(function() &#123; return slice.call(this.childNodes); &#125;); &#125;, // è·å–å¯¹è±¡é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤ siblings: function(selector) &#123; return filtered( this.map(function(i, el) &#123; // è·å–å…„å¼ŸèŠ‚ç‚¹ return filter.call(children(el.parentNode), function(child) &#123; return child !== el; &#125;); &#125;), selector ); &#125;, empty: function() &#123; return this.each(function() &#123; this.innerHTML = \"\"; &#125;); &#125;, // `pluck` is borrowed from Prototype.js pluck: function(property) &#123; // è·å–è‡ªå®šä¹‰å±æ€§ï¼Œè¿”å›å€¼ï¼Œæ‹¼æ¥æ•°ç»„ return $.map(this, function(el) &#123; return el[property]; &#125;); &#125;, show: function() &#123; // è¿”å›å½“å‰å¯¹è±¡ï¼Œä¿è¯å¯é“¾å¼æ“ä½œ return this.each(function() &#123; // ç¬¬ä¸€æ­¥ï¼Œé’ˆå¯¹å†…è”æ ·å¼ï¼Œå°† none æ”¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦‚ &lt;p id=\"p2\" style=\"display:none;\"&gt;p2&lt;/p&gt; this.style.display == \"none\" &amp;&amp; (this.style.display = \"\"); // ç¬¬äºŒæ­¥ï¼Œé’ˆå¯¹cssæ ·å¼ï¼Œå¦‚æœæ˜¯ none åˆ™ä¿®æ”¹ä¸ºé»˜è®¤çš„æ˜¾ç¤ºæ ·å¼ if (getComputedStyle(this, \"\").getPropertyValue(\"display\") == \"none\") this.style.display = defaultDisplay(this.nodeName); // show æ–¹æ³•æ˜¯ä¸ºäº†æ˜¾ç¤ºå¯¹è±¡ï¼Œè€Œå¯¹è±¡éšè—çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šå†…è”æ ·å¼ æˆ– cssæ ·å¼ // this.style.display åªèƒ½è·å–å†…è”æ ·å¼çš„å€¼ï¼ˆè·å–å±æ€§å€¼ï¼‰ // getComputedStyle(this, '').getPropertyValue(\"display\") å¯ä»¥è·å–å†…è”ã€cssæ ·å¼çš„å€¼ï¼ˆè·å– renderTree çš„å€¼ï¼‰ // å› æ­¤ï¼Œè¿™ä¸¤æ­¥éƒ½è¦åšåˆ¤æ–­ï¼Œ &#125;); &#125;, replaceWith: function(newContent) &#123; // å…ˆåœ¨å‰é¢æ’å…¥ï¼Œç„¶åå°†å½“å‰å¯¹è±¡ç§»é™¤ return this.before(newContent).remove(); &#125;, wrap: function(structure) &#123; // æ˜¯å¦æ˜¯å‡½æ•° var func = isFunction(structure); if (this[0] &amp;&amp; !func) var dom = $(structure).get(0), // ä½•æ—¶ç”¨ clone ï¼Ÿ // ç¬¬ä¸€ï¼Œdom.parentNode è¯´æ˜ dom åœ¨æ–‡æ¡£ç»“æ„ä¸­ï¼Œä¸ clone å°±ä¼šè¢«ç§»åŠ¨ // ç¬¬äºŒï¼Œthis.length &gt; 1 è¯´æ˜å½“å‰å¯¹è±¡æœ‰å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è¦æ·»åŠ ï¼Œæ‰€æœ‰è¦clone clone = dom.parentNode || this.length &gt; 1; return this.each(function(index) &#123; // å€Ÿç”¨ wrapAll æ–¹æ³•æ¥åšåŒ…è£… $(this).wrapAll( func ? structure.call(this, index) : clone ? dom.cloneNode(true) : dom ); &#125;); &#125;, // åœ¨æ‰€æœ‰åŒ¹é…å…ƒç´ å¤–é¢åŒ…ä¸€ä¸ªå•ç‹¬çš„ç»“æ„ wrapAll: function(structure) &#123; if (this[0]) &#123; // å…ˆå°† structure æ’å…¥åˆ°æ–‡æ¡£ç»“æ„ $(this[0]).before((structure = $(structure))); var children; // drill down to the inmost element // é€šè¿‡å¾ªç¯ï¼Œå°† structure é‡æ–°èµ‹å€¼ä¸ºå½“å‰ structure çš„æœ€æ·±å¤„çš„ä¸€ä¸ªå­å…ƒç´  while ((children = structure.children()).length) structure = children.first(); // å°†æ‰€æœ‰å­å…ƒç´ éƒ½åŒ…è£¹è¿› structure $(structure).append(this); &#125; // è¿”å›å½“å‰å¯¹è±¡ return this; &#125;, wrapInner: function(structure) &#123; // æ˜¯å¦æ˜¯å‡½æ•° var func = isFunction(structure); // è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ return this.each(function(index) &#123; var self = $(this), contents = self.contents(), // æ˜¯å‡½æ•°ï¼Œå³è·å–å‡½æ•°æ‰§è¡Œçš„è¿”å›ç»“æœï¼›å¦åˆ™ç›´æ¥ç”¨ structure å‚æ•° dom = func ? structure.call(this, index) : structure; // å¦‚æœå½“å‰å…ƒç´ æœ‰å†…å®¹ï¼Œåˆ™é€šè¿‡å†…å®¹ wrapAllã€‚æ— å†…å®¹ï¼Œåˆ™ç›´æ¥ç”¨è‡ªèº«çš„ append å¢åŠ  contents.length ? contents.wrapAll(dom) : self.append(dom); &#125;); &#125;, unwrap: function() &#123; // é€šè¿‡ this.parent() è·å–æ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹ï¼ˆé›†åˆï¼‰ // éå†è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„é›†åˆ this.parent().each(function() &#123; // å°†å½“å‰çˆ¶èŠ‚ç‚¹æ›¿æ¢ä¸ºå®ƒçš„å­èŠ‚ç‚¹ $(this).replaceWith($(this).children()); &#125;); // è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ return this; &#125;, clone: function() &#123; // é€šè¿‡ this.map å¾ªç¯å¯¹è±¡ï¼Œ // é’ˆå¯¹æ¯ä¸ªå…ƒç´ éƒ½è¿”å›å®ƒçš„clone è¿™ä¸ª this å’Œå‰é¢çš„ this ä¸ä¸€æ · // è¿”å›æ–°æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰ return this.map(function() &#123; return this.cloneNode(true); &#125;); &#125;, hide: function() &#123; return this.css(\"display\", \"none\"); &#125;, // åˆ‡æ¢æ˜¾ç¤ºå’Œéšè— toggle: function(setting) &#123; /* @setting true : å¼ºåˆ¶åˆ‡æ¢ä¸º show false : å¼ºåˆ¶åˆ‡æ¢ä¸º hide */ return this.each(function() &#123; var el = $(this); // æ¡ä»¶åˆ¤æ–­ï¼š // å¦‚æœ setting === undefined åˆ™çœ‹ el.css(\"display\") == \"none\" // å¦‚æœ setting !== undefined åˆ™çœ‹ !!setting (setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show() // å¦‚æœ true åˆ™æ˜¾ç¤º : el.hide(); // å¦‚æœ false åˆ™éšè— &#125;); &#125;, // å€ŸåŠ© previousElementSibling å±æ€§ prev: function(selector) &#123; return $(this.pluck(\"previousElementSibling\")).filter(selector || \"*\"); &#125;, // å€ŸåŠ© nextElementSibling å±æ€§ next: function(selector) &#123; return $(this.pluck(\"nextElementSibling\")).filter(selector || \"*\"); &#125;, html: function(html) &#123; return; // æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº« 0 in arguments ? this.each(function(idx) &#123; var originHtml = this.innerHTML; // ä¼ å…¥çš„ html å‚æ•°å…è®¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå…è®¸æ˜¯ä¸€ä¸ªå‡½æ•° // é€šè¿‡ funcArg å‡½æ•°ï¼š // 1.å¦‚æœ html æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›html // 2.å¦‚æœ html æ˜¯å‡½æ•°ï¼Œåˆ™æ‰§è¡Œæ‰§è¡Œå‡½æ•°ï¼ˆä¼ å…¥ idxã€originHtmlï¼‰ï¼Œè¿”å›å‡½æ•°æ‰§è¡Œç»“æœ $(this) .empty() .append(funcArg(this, html, idx, originHtml)); &#125;) : /* æ’æ’­ï¼š function funcArg(context, arg, idx, payload) &#123; return isFunction(arg) ? arg.call(context, idx, payload) : arg &#125; */ // æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼ 0 in this ? this[0].innerHTML // ç›´æ¥å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ innerHTML : null; &#125;, text: function(text) &#123; return; // æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº« 0 in arguments ? this.each(function(idx) &#123; // funcArgçš„åº”ç”¨ï¼Œå’Œhtmlæ–¹æ³•ä¸­ä¸€æ · var newText = funcArg(this, text, idx, this.textContent); this.textContent = newText == null ? \"\" : \"\" + newText; &#125;) : // æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼ 0 in this ? this[0].textContent : null; // ç›´æ¥å€Ÿç”¨ textContent å±æ€§ &#125;, attr: function(name, value) &#123; var result; return; // æƒ…å†µ1ï¼šæ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å€¼ï¼ˆè¯»å–å€¼åªèƒ½è¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼‰ typeof name == \"string\" &amp;&amp; !(1 in arguments) ? !this.length || this[0].nodeType !== 1 ? undefined : /* æ³¨é‡Šï¼š this[0]æ˜¯ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œæœ‰ã€å±æ€§ã€ä¹Ÿæœ‰ã€ç‰¹æ€§ã€ result = this[0].getAttribute(name) è¯•å›¾è·å– DOMèŠ‚ç‚¹å±æ€§ name in this[0] åˆ¤æ–­æ˜¯ä¸æ˜¯jså¯¹è±¡çš„å±æ€§ ç„¶åï¼Œè¯¥è¿”å›å“ªä¸€ä¸ªå°±è¿”å›å“ªä¸€ä¸ª */ !(result = this[0].getAttribute(name)) &amp;&amp; name in this[0] ? this[0][name] : result : // æƒ…å†µ2ï¼šæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å€¼ï¼ˆé’ˆå¯¹æ¯ä¸ªå…ƒç´ è®¾ç½®å€¼ï¼‰ this.each(function(idx) &#123; if (this.nodeType !== 1) return; // ä¼ å…¥çš„å‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡é›†åˆ // æ­¤æ—¶ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨ã€æƒ…å†µ1ã€å½“ä¸­ï¼Ÿï¼Ÿï¼Ÿæ­¤æ—¶ï¼Œvalueæ ¹æœ¬æ²¡æœ‰ç”¨å•Šï¼Ÿï¼Ÿï¼Ÿ if (isObject(name)) for (key in name) setAttribute(this, key, name[key]); // ä¼ å…¥çš„ä¸æ˜¯å¯¹è±¡ï¼Œå³è®¾ç½®ä¸€ä¸ªå•ä¸€çš„å±æ€§ã€‚ // ä½†æ˜¯ï¼Œè¿™é‡Œçš„ value å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•° // funcArg å³å¤„ç†äº† value æ˜¯å‡½æ•°å’Œéå‡½æ•°çš„ä¸¤ç§æƒ…å†µ else setAttribute( this, name, funcArg(this, value, idx, this.getAttribute(name)) ); &#125;); &#125;, removeAttr: function(name) &#123; return this.each(function() &#123; this.nodeType === 1 &amp;&amp; name.split(\" \").forEach( function(attribute) &#123; setAttribute(this, attribute); // å°†å±æ€§è®¾ç½®ä¸ºç©ºï¼ŒsetAttributeä¼šç§»é™¤å±æ€§ &#125;, this // æ”¹å‚æ•°å°†æˆä¸º forEach ä¸­å‡½æ•°çš„this ); &#125;); &#125;, // è¯»å–ã€è®¾ç½®å±æ€§ï¼ˆjså¯¹è±¡çš„å±æ€§ï¼‰ prop: function(name, value) &#123; // propMap ä¸­å­˜å‚¨çš„ï¼škeyæ˜¯htmlä¸­çš„å±æ€§åç§°ï¼Œvalueæ˜¯jså¯¹è±¡ä¸­çš„å±æ€§åç§° // ä¾‹å¦‚ï¼Œhtmlä¸­çš„ \"class\" åœ¨DOMå¯¹è±¡ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨ \"className\" è¿™ä¸ªåå­—è¯»å–ï¼ŒåŒç†äºï¼šfor maxlength cellspacing ç­‰ç­‰ name = propMap[name] || name; /* ä¸Šæ–‡å®šä¹‰ï¼š propMap = &#123; 'tabindex': 'tabIndex', 'readonly': 'readOnly', 'for': 'htmlFor', 'class': 'className', 'maxlength': 'maxLength', 'cellspacing': 'cellSpacing', 'cellpadding': 'cellPadding', 'rowspan': 'rowSpan', 'colspan': 'colSpan', 'usemap': 'useMap', 'frameborder': 'frameBorder', 'contenteditable': 'contentEditable' &#125; */ return; // æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å±æ€§ 1 in arguments ? this.each(function(idx) &#123; // è®¾ç½®å±æ€§å€¼ï¼ŒfuncArgå¤„ç†å‡½æ•°æˆ–è€…éå‡½æ•° this[name] = funcArg(this, value, idx, this[name]); &#125;) : // æ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å±æ€§ï¼ˆè¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ï¼‰ this[0] &amp;&amp; this[0][name]; &#125;, // å‰é¢åŠ ä¸Š 'data-' é€šè¿‡ attr è®¾ç½®æˆ–è€…è¯»å– data: function(name, value) &#123; /* ä¸Šæ–‡å®šä¹‰ï¼š capitalRE = /([A-Z])/g, //å¤§å†™å­—æ¯ */ // å‰é¢åŠ ä¸Š 'data-' å°† 'A' æ›¿æ¢ä¸º '-a' var attrName = \"data-\" + name.replace(capitalRE, \"-$1\").toLowerCase(); var data = 1 in arguments ? this.attr(attrName, value) : this.attr(attrName); return data !== null ? deserializeValue(data) : undefined; /* ä¸Šæ–‡å®šä¹‰çš„ï¼ŒdeserializeValue å‡½æ•°çš„ä½œç”¨æ˜¯ï¼š // å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š // \"true\" =&gt; true // \"false\" =&gt; false // \"null\" =&gt; null // \"42\" =&gt; 42 // \"42.5\" =&gt; 42.5 // \"08\" =&gt; \"08\" // JSON =&gt; parse if valid // String =&gt; self */ &#125;, val: function(value) &#123; return; // æœ‰å‚æ•°ï¼Œè®¾ç½®å€¼ 0 in arguments ? this.each(function(idx) &#123; // éå†æ¯ä¸ªå…ƒç´ ï¼Œç›´æ¥å¯¹ value å±æ€§èµ‹å€¼ this.value = funcArg(this, value, idx, this.value); &#125;) : // æ— å‚æ•°ï¼Œè¯»å–å€¼ this[0] &amp;&amp; // å¦‚æœå…ƒç´ æ˜¯ &lt;select multiple&gt; å¤šé€‰åˆ—è¡¨ (this[0].multiple ? // è¿”å›æ‰€æœ‰é€‰ä¸­çš„optionçš„å€¼çš„æ•°ç»„ $(this[0]) .find(\"option\") .filter(function() &#123; return this.selected; &#125;) .pluck(\"value\") : /* ä¸Šæ–‡å®šä¹‰ï¼š pluck: function(property)&#123; return $.map(this, function(el)&#123; return el[property] &#125;) &#125;, */ // å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è·å– value this[0].value); &#125;, // è·å–ã€è®¾ç½®å…ƒç´ çš„ offset offset: function(coordinates) &#123; // å¦‚æœæœ‰ coordinates å‚æ•°ï¼Œè®¾ç½®åæ ‡å€¼ï¼Œå¹¶è¿”å›å½“å‰å¯¹è±¡ if (coordinates) return this.each(function(index) &#123; var $this = $(this), // æ”¯æŒå‡½æ•°ï¼ˆä¼ å…¥ $this.offset() åšå‚æ•°ï¼‰å’Œéå‡½æ•° coords = funcArg(this, coordinates, index, $this.offset()), // æ‰¾åˆ°æœ€è¿‘çš„ â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€ çš„ç¥–å…ˆå…ƒç´ ï¼Œå¹¶è·å–å®ƒçš„ offset() parentOffset = $this.offsetParent().offset(), // left å’Œ top éœ€è¦å»æ‰å®šä½çš„ç¥–å…ˆå…ƒç´ çš„ leftã€top å€¼ props = &#123; top: coords.top - parentOffset.top, left: coords.left - parentOffset.left &#125;; // staticæ—¶ï¼Œè®¾ç½® topã€leftæ˜¯æ— æ•ˆçš„ if ($this.css(\"position\") == \"static\") props[\"position\"] = \"relative\"; // é€šè¿‡ css èµ‹å€¼ $this.css(props); &#125;); // å½“å‰å¯¹è±¡æ˜¯ç©ºï¼Œåˆ™è¿”å› null if (!this.length) return null; // å¦‚æœæ²¡æœ‰ coordinates å‚æ•°ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„åæ ‡å€¼ var obj = this[0].getBoundingClientRect(); /* elem.getBoundingClientRect() è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ åŒ…å«å…ƒç´ çš„ top bottom left right width height çš„å€¼ ä½†æ˜¯è¿™ä¸ª topã€bottomã€leftã€right æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£çš„è·ç¦»ï¼Œè€Œä¸æ˜¯é¡µé¢çš„è¾¹ç•Œ ï¼ˆæ³¨æ„ï¼Œelem.getBoundingClientRect()åœ¨IEä½ç‰ˆæœ¬æµè§ˆå™¨æœ‰2pxçš„å…¼å®¹é—®é¢˜ï¼‰ window.pageXOffset å’Œ window.pageYOffset å¯è·å–ç½‘é¡µæ»šåŠ¨çš„è·ç¦»ï¼Œ IEä½ç‰ˆæœ¬éœ€è¦ç”¨ document.body.scrollLeft å’Œ document.body.scrollTop å…¼å®¹ */ return &#123; left: obj.left + window.pageXOffset, top: obj.top + window.pageYOffset, width: Math.round(obj.width), height: Math.round(obj.height) &#125;; &#125;, // è®¾ç½®ã€è·å– css css: function(property, value) &#123; // åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ ·å¼ if (arguments.length &lt; 2) &#123; var computedStyle, element = this[0]; if (!element) return; // å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ— å€¼ï¼Œç›´æ¥è¿”å›ã€‚å¦åˆ™ç»§ç»­ // è·å–å…ƒç´ çš„è®¡ç®—åçš„æ ·å¼ computedStyle = getComputedStyle(element, \"\"); if (typeof property == \"string\") // æƒ…å†µ1ï¼Œå‚æ•°ä¸ºå­—ç¬¦ä¸²å½¢å¼ // å…ˆä»elemå†…è”æ ·å¼è·å–ï¼ˆelement.styleï¼‰ï¼Œæ­¤æ—¶éœ€è¦ camelize(property) è½¬æ¢ï¼Œå¦‚å°† background-color å˜ä¸º backgroundColor // å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™ä»cssæ ·å¼è·å– computedStyle.getPropertyValue(property) // ï¼ˆé‡è¦ï¼‰æ³¨é‡Šï¼šelem.style åªèƒ½è·å–å…ƒç´ è®¾ç½®çš„å†…è”æ ·å¼ã€ä¸èƒ½è·å–cssæ ·å¼ï¼›è€Œ getComputedStyle å¯è·å–å†…è”ã€cssæ ·å¼ã€‚ return ( element.style[camelize(property)] || computedStyle.getPropertyValue(property) ); else if (isArray(property)) &#123; // æƒ…å†µ2ï¼Œå‚æ•°ä¸ºæ•°ç»„å½¢å¼ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶ isObject æƒ…å†µå°šæœªåˆ¤æ–­ï¼‰ var props = &#123;&#125;; $.each(property, function(_, prop) &#123; props[prop] = element.style[camelize(prop)] || computedStyle.getPropertyValue(prop); &#125;); return props; // è¿”å›ä¸€ä¸ªå¯¹è±¡ &#125; &#125; // å…¶ä»–æƒ…å†µï¼šæœ‰ä¸¤ä¸ªå‚æ•°ã€propertyæ˜¯å¯¹è±¡ var css = \"\"; if (type(property) == \"string\") &#123; // æƒ…å†µ1ï¼Œproperty æ˜¯å­—ç¬¦ä¸²ï¼Œè®¾ç½®å•ä¸ªæ ·å¼ if (!value &amp;&amp; value !== 0) // å¦‚æœvalueå‚æ•°æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼ // æ³¨ï¼šæ­¤è®¡ç®—åªé€‚ç”¨äºå†…è”æ ·å¼çš„åˆ é™¤ï¼Œå¯¹ css æ ·å¼æ— æ•ˆï¼Œå› ä¸ºå®ƒåªé€šè¿‡ this.style.removeProperty è®¡ç®—ï¼Œè€Œ this.style è·å–ä¸åˆ°cssæ ·å¼ this.each(function() &#123; this.style.removeProperty(dasherize(property)); &#125;); // valueæœ‰æ­£å¸¸å€¼ï¼Œå°† css ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ 'font-size:20px'ï¼‰ç­‰å¾…èµ‹å€¼ç»™å†…è”æ ·å¼ // maybeAddPx(property, value) éœ€è¦å¢åŠ  px çš„å¢åŠ ä¸Š else css = dasherize(property) + \":\" + maybeAddPx(property, value); &#125; else &#123; // æƒ…å†µ2ï¼Œproperty æ˜¯å¯¹è±¡ï¼ˆæ­¤æ—¶å°±ä¸ç®¡ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»€ä¹ˆäº†ï¼Œä¸ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªæ ·å¼ for (key in property) if (!property[key] &amp;&amp; property[key] !== 0) // å¦‚æœå¯¹è±¡å±æ€§å€¼æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼ï¼ŒåŒç†ï¼Œåªé’ˆå¯¹å†…è”æ ·å¼ this.each(function() &#123; this.style.removeProperty(dasherize(key)); &#125;); // å¦åˆ™ï¼Œç»™ css èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šæ ·å¼å±æ€§ç”¨ ; éš”å¼€ else css += dasherize(key) + \":\" + maybeAddPx(key, property[key]) + \";\"; &#125; // é’ˆå¯¹æ¯ä¸ªå…ƒç´ ï¼Œè®¾ç½®å†…è”æ ·å¼ï¼ˆthis.style.cssTextå¯è·å–ã€è®¾ç½®å†…è”æ ·å¼ï¼‰ // æœ€åè¿”å›è‡ªèº« return this.each(function() &#123; this.style.cssText += \";\" + css; &#125;); /* ä¸Šæ–‡å®šä¹‰ï¼š // å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼ function dasherize(str) &#123; return str.replace(/::/g, '/') .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2') .replace(/([a-z\\d])([A-Z])/g, '$1_$2') .replace(/_/g, '-') .toLowerCase() &#125; */ &#125;, // è·å–ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚å½“elemenå‚æ•°æ²¡æœ‰ç»™å‡ºæ—¶ï¼Œè¿”å›å½“å‰å…ƒç´ åœ¨å…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä½ç½® index: function(element) &#123; /* ä¸Šæ–‡å®šä¹‰ï¼š $.fn.indexOf: emptyArray.indexOf */ // å…¶å® this æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æœ¬èº«å°±æœ‰ indexOf ï¼Œä¸ºä½•è¿˜è¦ä¸Šæ–‡çš„è¿™ä¸ªèµ‹å€¼å‘¢ï¼Ÿ // å› ä¸ºä¸Šæ–‡ä¸­ï¼Œthis.__proto__ ä¿®æ”¹äº†ï¼Œä¸æ˜¯ Array.prototype äº†ï¼Œä¹Ÿå°±æ²¡æœ‰ indexOf æ–¹æ³•äº† // å› æ­¤è¦æ‰‹åŠ¨èµ‹å€¼ï¼Œéœ€è¦å°†æ•°ç»„å¸¸ç”¨çš„æ–¹æ³•åœ¨é‡æ–°èµ‹å€¼ç»™ $.fn.indexOf return element ? this.indexOf($(element)[0]) : this.parent() .children() .indexOf(this[0]); &#125;, hasClass: function(name) &#123; if (!name) return false; return emptyArray.some.call( this, function(el) &#123; // this å°±æ˜¯ classRE(name) çš„è¿”å›å€¼ï¼ˆè¿”å›ä¸€ä¸ªæ­£åˆ™ï¼‰ // function className(node, value)&#123;...&#125; è·å–æˆ–è€…è®¾ç½®elemçš„className return this.test(className(el)); &#125;, classRE(name) ); // array.some(callback,[ thisObject]); åªè¦æ•°ç»„ä¸­ä¸€é¡¹ç¬¦åˆcallbackè¦æ±‚ï¼Œå³è¿”å›true /* // ä¸Šæ–‡å®šä¹‰ classCache = &#123;&#125; function classRE(name) &#123; return name in classCache ? classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)')) // classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š // &#123; // abc: /(^|\\s)abc(\\s|$)/, // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc ' // xyz: /(^|\\s)abc(\\s|$)/, // ... // &#125; &#125; */ &#125;, addClass: function(name) &#123; if (!name) return this; // é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½æ·»åŠ classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº« return this.each(function(idx) &#123; // è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node if (!(\"className\" in this)) return; // classList æ˜¯ä¸€å¼€å§‹å°±å®šä¹‰çš„ç©ºå˜é‡ classList = []; // è·å–å…ƒç´ çš„ clasname // æ”¯æŒä¼ å…¥å‡½æ•° var cls = className(this), newName = funcArg(this, name, idx, cls); // æŠŠè¦èµ‹å€¼çš„å€¼ï¼ŒæŒ‰ç…§ç©ºç™½åˆ†ç»„ï¼Œéå† newName.split(/\\s+/g).forEach(function(klass) &#123; // æŠŠå½“å‰å…ƒç´ ä¸å­˜åœ¨çš„classï¼Œpushåˆ°classlistä¸­ if (!$(this).hasClass(klass)) classList.push(klass); &#125;, this); // å¦‚æœclasslistæœ‰æ•°æ®ï¼Œåˆ™ä¸ºå½“å‰å…ƒç´ èµ‹å€¼æœ€æ–°çš„classå€¼ï¼ˆç°æœ‰çš„classnameå’Œæ–°çš„classnameæ‹¼æ¥ï¼‰ classList.length &amp;&amp; className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \")); &#125;); &#125;, removeClass: function(name) &#123; // é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½ç§»é™¤classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº« return this.each(function(idx) &#123; // è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node if (!(\"className\" in this)) return; // å¦‚æœå‚æ•°ç©ºï¼Œåˆ™ç§»é™¤å…ƒç´ çš„æ‰€æœ‰class if (name === undefined) return className(this, \"\"); // è·å–ç°æœ‰çš„classname classList = className(this); // ï¼ˆå¯ä»¥ä¼ å…¥å‡½æ•°ï¼‰éå†æ–°çš„classnameå­—ç¬¦ä¸² funcArg(this, name, idx, classList) .split(/\\s+/g) .forEach(function(klass) &#123; // classRE(klass) è¿”å›ä¸€ä¸ªæ­£åˆ™ï¼ŒåŒ¹é… 'classname' æˆ– ' classname ' æˆ– ' classname' æˆ– 'classname ' // é’ˆå¯¹ä¼ å…¥çš„classnameå­—ç¬¦ä¸²ï¼Œå¯¹æ¯ä¸ªç¬¦åˆæ¡ä»¶çš„classnameï¼Œéƒ½æ›¿æ¢ä¸º ' 'ï¼ˆå³åˆ é™¤äº†ï¼‰ classList = classList.replace(classRE(klass), \" \"); &#125;); // å¯¹æ•´ç†å¥½çš„classnameï¼Œé‡æ–°èµ‹å€¼ç»™å½“å‰å…ƒç´  className(this, classList.trim()); &#125;); &#125;, toggleClass: function(name, when) &#123; // when å‚æ•°ç›¸å½“äºä¸€ä¸ªæ¡ä»¶ï¼š // å¦‚æœ when === true åˆ™å•çº¯æ‰§è¡Œ addClass // å¦‚æœ when === false åˆ™å•çº¯æ‰§è¡Œ removeClass if (!name) return this; return this.each(function(idx) &#123; // name å¯æ¥æ”¶å‡½æ•°ï¼Œå¯ä»¥æ˜¯ç©ºç™½åˆ†å‰²å¼€æ¥çš„å¤šä¸ªclassname var $this = $(this), names = funcArg(this, name, idx, className(this)); // ç”¨ç©ºç™½åˆ†å‰²å¼€å¤šä¸ªclass names.split(/\\s+/g).forEach(function(klass) &#123; // å¦‚æœæœ‰ when å‚æ•°ï¼Œåˆ™åªé€šè¿‡whenå‚æ•°åˆ¤æ–­ï¼Œtrueåˆ™åªæ‰§è¡ŒaddClassï¼Œfalseåˆ™åªæ‰§è¡ŒremoveClass // å¦‚æœæ²¡æœ‰ when å‚æ•°ï¼Œåˆ™åˆ¤æ–­å…ƒç´ æœ‰æ²¡æœ‰è¯¥classï¼Œæœ‰åˆ™ç§»é™¤ï¼Œæ²¡æœ‰åˆ™æ·»åŠ  (when === undefined ? !$this.hasClass(klass) : when) ? $this.addClass(klass) : $this.removeClass(klass); &#125;); &#125;); &#125;, scrollTop: function(value) &#123; if (!this.length) return; // æ™®é€šelemæœ‰ scrollTop å±æ€§ï¼Œå¯ä»¥è·å–æˆ–è€…è®¾ç½®topå€¼ // windowå¯¹è±¡æ²¡æœ‰ scrollTop å±æ€§ï¼Œé€šè¿‡ pageYOffset è·å–ï¼Œé€šè¿‡ scrollTo() èµ‹å€¼ var hasScrollTop = \"scrollTop\" in this[0]; // value æ— å€¼ï¼Œè·å– top if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset; // value æœ‰å€¼ï¼Œè®¾ç½® top return this.each( hasScrollTop ? function() &#123; this.scrollTop = value; &#125; : function() &#123; this.scrollTo(this.scrollX, value); &#125; ); // window.scrollX è·å–æ¨ªå‘æ»šåŠ¨å€¼ &#125;, scrollLeft: function(value) &#123; if (!this.length) return; var hasScrollLeft = \"scrollLeft\" in this[0]; if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset; return this.each( hasScrollLeft ? function() &#123; this.scrollLeft = value; &#125; : function() &#123; this.scrollTo(value, this.scrollY); &#125; ); // window.scrollX è·å–çºµå‘æ»šåŠ¨å€¼ &#125;, position: function() &#123; if (!this.length) return; var elem = this[0], // Get *real* offsetParent offsetParent = this.offsetParent(), // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå®šä½è¿‡çš„ç¥–å…ˆå…ƒç´  â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€ // Get correct offsets offset = this.offset(), // è·å–è‡ªèº«çš„offset parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? &#123; top: 0, left: 0 &#125; : offsetParent.offset(); // è·å–å®šä½ç¥–å…ˆå…ƒç´ çš„offsetï¼ˆ bodyã€htmlç›´æ¥è®¾ç½® top:0;left:0 ï¼‰ // ä¸Šæ–‡å®šä¹‰ï¼š rootNodeRE = /^(?:body|html)$/i, // å»æ‰å½“å‰å…ƒç´ çš„ margin å®½åº¦ // Subtract element margins // note: when an element has margin: auto the offsetLeft and marginLeft // are the same in Safari causing offset.left to incorrectly be 0 offset.top -= parseFloat($(elem).css(\"margin-top\")) || 0; offset.left -= parseFloat($(elem).css(\"margin-left\")) || 0; // å¢åŠ çˆ¶å…ƒç´ çš„ border å®½åº¦ // Add offsetParent borders parentOffset.top += parseFloat($(offsetParent[0]).css(\"border-top-width\")) || 0; parentOffset.left += parseFloat($(offsetParent[0]).css(\"border-left-width\")) || 0; // Subtract the two offsets return &#123; top: offset.top - parentOffset.top, left: offset.left - parentOffset.left &#125;; &#125;, offsetParent: function() &#123; // é€šè¿‡ this.map éå†å½“å‰å¯¹è±¡æ‰€æœ‰å…ƒç´ ï¼Œè¿›è¡Œè®¡ç®—ï¼Œç„¶åæ‹¼æ¥æ–°çš„æ•°ç»„ï¼Œå¹¶è¿”å›ã€‚ä¿è¯é“¾å¼æ“ä½œ return this.map(function() &#123; var parent = this.offsetParent || document.body; // elem.offsetParent å¯è¿”å›æœ€è¿‘çš„æ”¹å…ƒç´ æœ€è¿‘çš„å·²ç»å®šä½çš„çˆ¶å…ƒç´  while ( parent &amp;&amp; !rootNodeRE.test(parent.nodeName) &amp;&amp; $(parent).css(\"position\") == \"static\" ) // å¦‚æœè·å–çš„parentä¸æ˜¯nullã€ä¸æ˜¯bodyæˆ–htmlã€è€Œä¸”position==static // åˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ offsetParentã€å¤§ä¸äº†æ‰¾åˆ° body ä¸ºæ­¢ parent = parent.offsetParent; // æœ€åè¿”å›æ”¹å…ƒç´  return parent; &#125;); &#125; &#125;; // for now $.fn.detach = $.fn.remove; // Generate the `width` and `height` functions [\"width\", \"height\"].forEach(function(dimension) &#123; // å°† width height å˜ä¸º Width Height var dimensionProperty = dimension.replace(/./, function(m) &#123; return m[0].toUpperCase(); &#125;); $.fn[dimension] = function(value) &#123; var offset, el = this[0]; // æƒ…å†µ1ï¼Œæ— å‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ if (value === undefined) return isWindow(el) ? el[\"inner\" + dimensionProperty] // window.innerHeight : isDocument(el) ? el.documentElement[\"scroll\" + dimensionProperty] // document.documentElement.scrollHeight : (offset = this.offset()) &amp;&amp; offset[dimension]; // this.offset().width // æƒ…å†µ2ï¼Œæœ‰å‚æ•°ï¼Œè®¾ç½®æ‰€æœ‰å…ƒç´ çš„å€¼ else return this.each(function(idx) &#123; el = $(this); // é€šè¿‡ css() æ–¹æ³•è®¾ç½®ï¼Œæ”¯æŒä¼ å…¥å‡½æ•° el.css(dimension, funcArg(this, value, idx, el[dimension]())); &#125;); &#125;; &#125;); // é’ˆå¯¹å½“å‰å…ƒç´ ã€éå†å­å…ƒç´ ï¼Œéƒ½æ‰§è¡Œ fun å‡½æ•° function traverseNode(node, fun) &#123; fun(node); for (var i = 0, len = node.childNodes.length; i &lt; len; i++) traverseNode(node.childNodes[i], fun); &#125; // ä¸Šæ–‡å®šä¹‰ adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ], // Generate the `after`, `prepend`, `before`, `append`, // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods. adjacencyOperators.forEach(function(operator, operatorIndex) &#123; var inside = operatorIndex % 2; //=&gt; prepend, append $.fn[operator] = function() &#123; // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings var argType, nodes = $.map(arguments, function(arg) &#123; argType = type(arg); return argType == \"object\" || argType == \"array\" || arg == null ? arg : zepto.fragment(arg); &#125;), parent, copyByClone = this.length &gt; 1; if (nodes.length &lt; 1) return this; return this.each(function(_, target) &#123; parent = inside ? target : target.parentNode; // convert all methods to a \"before\" operation target = operatorIndex == 0 ? target.nextSibling : operatorIndex == 1 ? target.firstChild : operatorIndex == 2 ? target : null; var parentInDocument = $.contains(document.documentElement, parent); nodes.forEach(function(node) &#123; if (copyByClone) node = node.cloneNode(true); else if (!parent) return $(node).remove(); parent.insertBefore(node, target); if (parentInDocument) traverseNode(node, function(el) &#123; if ( el.nodeName != null &amp;&amp; el.nodeName.toUpperCase() === \"SCRIPT\" &amp;&amp; (!el.type || el.type === \"text/javascript\") &amp;&amp; !el.src ) window[\"eval\"].call(window, el.innerHTML); &#125;); &#125;); &#125;); &#125;; // after =&gt; insertAfter // prepend =&gt; prependTo // before =&gt; insertBefore // append =&gt; appendTo $.fn[ inside ? operator + \"To\" : \"insert\" + (operatorIndex ? \"Before\" : \"After\") ] = function(html) &#123; $(html)[operator](this); return this; &#125;; &#125;); zepto.Z.prototype = $.fn; // Export internal API functions in the `$.zepto` namespace zepto.uniq = uniq; zepto.deserializeValue = deserializeValue; $.zepto = zepto; return $;&#125;)();window.Zepto = Zepto;window.$ === undefined &amp;&amp; (window.$ = Zepto);","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"zepto","slug":"zepto","permalink":"https://www.yangtao.site/tags/zepto/"}]},{"title":"Zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ","slug":"zepto","date":"2020-03-12T09:56:32.000Z","updated":"2020-03-16T04:03:15.930Z","comments":true,"path":"2020/03/12/zepto/","link":"","permalink":"https://www.yangtao.site/2020/03/12/zepto/","excerpt":"zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ","text":"zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ åŸå‹å¯¹è±¡Array.prototypeæ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œä¸ç®¡æ˜¯ä½ è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯å‡½æ•°å†…ç½®çš„ã€‚ 123var fn = function() &#123;&#125;;console.log(fn.prototype); // &#123;constructor: Æ’&#125;console.log(fn.prototype.constructor === fn); // true è¿™é‡Œçš„ fn.prototype æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„ constructor å±æ€§åˆæŒ‡å›äº†è¯¥å‡½æ•°æœ¬èº« fnã€‚ å³æ¯ä¸€ä¸ªåŸå‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª consctructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°ï¼Œæ¯”å¦‚ï¼š 1Array.prototype.constructor === Array; //true æˆ‘ä»¬æ¥ç€çœ‹ï¼š 1console.log(Array.prototype); // [constructor: Æ’, concat: Æ’, copyWithin: Æ’, fill: Æ’, find: Æ’, â€¦] è¿™é‡Œï¼Œé™¤äº† constructor å±æ€§ï¼Œè¿˜æœ‰å…¶ä»–å†…ç½®çš„å±æ€§ï¼Œå³æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ“ä½œæ•°ç»„çš„æ–¹æ³•ã€‚ __proto__(éšå¼åŸå‹)æ‰€æœ‰é€šè¿‡å‡½æ•° new ï¼ˆæ„é€ å‡½æ•°ï¼‰å‡ºæ¥çš„å®ä¾‹å¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ª __proto__å±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„ prototypeï¼Œæ¯”å¦‚ï¼š 12var arr = new Array();arr.__proto__ === Array.prototype; // true åŸå‹é“¾ï¼šç”±ç›¸äº’å…³è”çš„åŸå‹(__proto__)ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ã€‚ ä¸¾ä¸ªå…³äºç»§æ‰¿ extends çš„ä¾‹å­ï¼š 12345678910111213141516function Animal() &#123; this.eat = function() &#123; console.log(\"Animal eat\"); &#125;;&#125;function Dog() &#123; this.bark = function() &#123; console.log(\"Dog bark\"); &#125;;&#125;// ç»‘å®šåŸå‹ï¼Œå®ç°ç»§æ‰¿Dog.prototype = new Animal();var dog = new Dog();dog.eat(); // Animal eatdog.bark(); // Dog bark ä¸Šé¢çœ‹æ˜ç™½äº†ï¼Œé‚£ä¹ˆ ES6 çš„ç»§æ‰¿æˆ‘ä»¬ä¹Ÿå°±å¯ä»¥æ˜ç™½åŸç†äº†ï¼Œå³ class Dog extends Animal ç›¸å½“äº Dog.prototype = new Animal() 123456789101112131415161718192021class Animal &#123; constructor(name) &#123; this.name = name; &#125; eat() &#123; console.log(\"Animal eat!\" + this.name); &#125;&#125;class Dog extends Animal &#123; constructor(name) &#123; super(name); this.name = name; &#125; bark() &#123; console.log(\"Dog bark!\" + this.name); &#125;&#125;const dog = new Dog(\"å“ˆå£«å¥‡\");dog.eat();dog.bark(); æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¸…æ¥šä¸ºä»€ä¹ˆèƒ½è¿™æ ·ï¼š å½“æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆæ•°ç»„ï¼‰çš„æŸä¸ªåŠŸèƒ½æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«å…·æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç›´æ¥è°ƒç”¨ï¼Œæ²¡æœ‰çš„è¯ï¼Œé‚£å°±å»è‡ªèº«çš„__proto__å±æ€§ä¸­å»æ‰¾ 12345678910var obj = &#123; myfn: function() &#123; console.log(\"myfn\"); &#125;&#125;;obj.myfn(); // 'myfn'obj.hasOwnProperty(\"myfn\"); //trueobj.toString(); // \"[object Object]\"obj.hasOwnProperty(\"toString\"); // falseobj.__proto__.hasOwnProperty(\"toString\"); // true hasOwnProperty()å°±å¯ä»¥å¾—å‡ºè¿™ä¸ªå±æ€§æ˜¯å¦æ˜¯å±äºè¯¥å¯¹è±¡æœ¬èº«çš„å±æ€§: myfn æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œobj.hasOwnProperty(&#39;myfn&#39;)ä¸º true toString() æˆ‘ä»¬ä¸æ˜¯è‡ªå®šä¹‰çš„ï¼Œå´å¯ä»¥ä½¿ç”¨ï¼ŒæŸ¥ä¸€ä¸‹æ˜¯å¦å±äºè‡ªå®šä¹‰å±æ€§ï¼Œobj.hasOwnProperty(&#39;toString&#39;)ï¼Œç­”æ¡ˆä¸º false æ—¢ç„¶ä¸å±äºè‡ªå®šä¹‰å±æ€§ï¼Œé‚£å°±å»è‡ªèº«çš„__proto__å»æ‰¾ï¼Œç„¶åå»åŸå‹å¯¹è±¡ä¸ŠæŸ¥ä¸€ä¸‹ï¼Œobj.__proto__.hasOwnProperty(&#39;toString&#39;)ï¼Œå“¦ï¼ŒåŸæ¥åœ¨è¿™å„¿ åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°Array.prototype.concatï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„[].concatï¼Œ[]ï¼Œå› ä¸º[].__proto__ === Array.prototype __proto__æ˜¯å¯ä¿®æ”¹çš„æ¯”å¦‚ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªaddClass()æ–¹æ³•ï¼š 123456var arr = [1, 2, 3];arr.__proto__.addClass = function() &#123; console.log(123);&#125;;arr.push(4);arr.addClass(); // 123 ä½†æ˜¯ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œå¦‚ä¸‹é‡å†™ä¹‹åï¼Œå°±æ²¡æœ‰äº†è¯¸å¦‚ pushã€concat ç­‰æ–¹æ³•ï¼š 123456arr.__proto__ = &#123; addClass: function() &#123; console.log(123); &#125;&#125;;arr.push(3); //Uncaught TypeError: arr.push is not a function Object.prototypeçš„åŸå‹ä¸‡ç‰©çš†å¯¹è±¡ï¼Œåˆ°æœ€åä¾æ—§æ˜¯å¯¹è±¡ï¼Œæœ€åè¿™ä¸ªä¸œä¸œæ˜¯ä¸ªå•¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š 123456789101112131415161718// æ„é€ å‡½æ•° Personfunction Person() &#123;&#125;// å®ä¾‹å¯¹è±¡ myfnï¼Œå®ƒçš„ éšå¼åŸå‹ æŒ‡å‘äº†å…¶æ„é€ å‡½æ•°çš„ åŸå‹å¯¹è±¡var myfn = new Person();myfn.__proto__ === Person.prototype; //true// é‚£æ„é€ å‡½æ•° Person çš„ éšå¼åŸå‹åˆæŒ‡å‘äº†è°å‘¢Person.prototype.__proto__ === Object.prototype; //true// Functionå‘Function.prototype.__proto__ === Object.prototype; //true// è¿™ä¸ªå‘¢var fn = function() &#123;&#125;;fn.prototype.__proto__ === Object.prototype; //trueObject.prototype.__proto__ === null; //truetypeof null; //\"object\" æ€»ç»“ï¼š æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºå‡ºæ¥çš„å®ä¾‹ï¼ˆå¦‚ myfnï¼‰çš„åŸå‹ï¼ˆå¦‚myfn.__proto__ï¼‰,å³ï¼šmyfn.__proto__ === Person.prototype æ‰€æœ‰çš„å¯¹è±¡ï¼ˆé™¤ nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ï¼Œæ¯”å¦‚ï¼šmyfn.__proto__ === Person.prototype åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ ¹æ®ä¸Šæ¡ï¼Œé‚£åŸå‹çš„åŸå‹ï¼Œå°±æ˜¯Object.prototype æœ€åçš„ null å¯¹è±¡ï¼Œå¯ä»¥å½“åšæ˜¯ ä»€ä¹ˆéƒ½æ²¡æœ‰ ç›—ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å°±æ›´åŠ æ¸…æ¥šäº†ï¼ˆè“è‰²è¿™æ¡è¡¨ç¤ºçš„æ˜¯åŸå‹é“¾ï¼‰ å‚è€ƒèµ„æ–™ï¼š js åŸå‹é“¾åŸºç¡€ JavaScript æ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ æ·±å…¥ç†è§£ javascript åŸå‹å’Œé—­åŒ…ï¼ˆ3ï¼‰â€”â€”prototype åŸå‹ Zepto å¯¹è±¡è®¾è®¡ä¸»ä½“è®¾è®¡1234567891011121314151617181920212223242526272829303132333435363738394041var Zepto = (function() &#123; var $, zepto = &#123;&#125;; // ...çœç•¥Nè¡Œä»£ç ... zepto.Z = function(dom, selector) &#123; dom = dom || []; dom.__proto__ = $.fn; // å…³é”®ä½ç½® dom.selector = selector || \"\"; return dom; &#125;; zepto.init = function(selector, context) &#123; var dom; // é’ˆå¯¹å‚æ•°æƒ…å†µï¼Œåˆ†åˆ«å¯¹domèµ‹å€¼ // æœ€ç»ˆè°ƒç”¨ zepto.Z è¿”å›çš„æ•°æ® return zepto.Z(dom, selector); &#125;; $ = function(selector, context) &#123; return zepto.init(selector, context); &#125;; // é‡Œé¢æœ‰è‹¥å¹²ä¸ªå·¥å…·å‡½æ•° $.fn = &#123; forEach: emptyArray.forEach, // ...çœç•¥Nè¡Œä»£ç ... concat: function() &#123;&#125; // ...çœç•¥Nè¡Œä»£ç ... &#125;; // ...çœç•¥Nè¡Œä»£ç ... return $;&#125;)();window.Zepto = Zepto;window.$ === undefined &amp;&amp; (window.$ = Zepto); è‡ªå®šä¹‰æ¨¡æ‹Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142(function(window) &#123; var $, zepto = &#123;&#125;; function Z(dom, selector) &#123; var i, len = dom.length ? dom.length : 0; for (var i = 0; i &lt; dom.length; i++) &#123; this[i] = dom[i]; &#125; this.length = len; this.selector = selector || \"\"; &#125; zepto.Z = function(dom, selector) &#123; return new Z(dom, selector); &#125;; zepto.init = function(selector) &#123; var slice = Array.prototype.slice; var dom = slice.call(document.querySelectorAll(selector)); return zepto.Z(dom, selector); &#125;; $ = function(selector) &#123; return zepto.init(selector); &#125;; $.fn = &#123; css: function(key, value) &#123; console.log(\"css\"); &#125;, html: function(value) &#123; console.log(\"html\"); &#125; &#125;; Z.prototype = $.fn; window.$ = $;&#125;)(window); æµç¨‹ï¼š$() -&gt; zepto.init() -&gt; zepto.Z() -&gt; new Z() -&gt; Z.prototype = $.fn; æœ€æ–°ç‰ˆï¼ˆv1.2.0ï¼‰æ¨¡æ‹Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081// è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°(IIFEï¼Œç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼)(function(global, factory) &#123; // amd è§„èŒƒ if (typeof define === \"function\" &amp;&amp; define.amd) &#123; define(function() &#123; return factory(global); &#125;); &#125; else &#123; factory(global); &#125;&#125;)(this, function(window) &#123; var Zepto = (function() &#123; var $; var zepto = &#123;&#125;; // å¤§Zæ„é€ å‡½æ•° function Z(dom, selector) &#123; var i, len = dom ? dom.length : 0; for (i = 0; i &lt; len; i++) this[i] = dom[i]; this.length = len; this.selector = selector || \"\"; &#125; // zepto.Z() è¿”å›å¤§Zæ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œæ–¹ä¾¿å®ä¾‹å¯¹è±¡çš„ __proto å°±ä¼šæŒ‡å‘ Z.prototype zepto.Z = function(dom, selector) &#123; return new Z(dom, selector); &#125;; // è§£æ DOMï¼Œå¹¶è°ƒç”¨ zepto.Z() zepto.init = function(selector, context) &#123; // è‡ªå®šä¹‰æ¨¡æ‹Ÿæ–¹æ³•ï¼Œæºç å¹¶éè¿™æ ·ç®€å• var slice = Array.prototype.slice; var dom = slice.call(document.querySelectorAll(selector)); // create a new Zepto collection from the nodes found return zepto.Z(dom, selector); &#125;; // ç¬¬ä¸€æ­¥åˆå§‹åŒ– $ = function(selector, context) &#123; return zepto.init(selector, context); &#125;; // æ–¹æ³•å±æ€§ $.fn = &#123; constructor: zepto.Z, // æ‰‹åŠ¨ç»‘å®š constructor å±æ€§ length: 0, push: \"push method\", css: function() &#123; console.log(\"css\"); return this; // è¿”å› thisï¼Œå¯ä»¥é“¾å¼è°ƒç”¨ &#125;, html: function() &#123; console.log(\"html\") return this; &#125; &#125;; $.fn.on = function(event, data, callback) &#123; console.log(\"on method\"); &#125;; $.fn.off = function(event, data, callback) &#123; console.log(\"off method\"); &#125;; $.fn.bind = function(event, data, callback) &#123; return this.on(event, data, callback); &#125;; $.fn.unbind = function(event, callback) &#123; return this.off(event, callback); &#125;; // æœ€ç»ˆçš„æ–¹æ³•å±æ€§ç­‰éƒ½æŒ‡å‘äº† $.fnï¼Œè¿™é‡Œå°±æ˜¯åŸå‹çš„å…³é”®ä½¿ç”¨ zepto.Z.prototype = Z.prototype = $.fn; $.zepto = zepto; return $; &#125;)(); window.Zepto = Zepto; window.$ === undefined &amp;&amp; (window.$ = Zepto);&#125;); amd è§„èŒƒï¼š 123456789(function(global, factory) &#123; if (typeof define === \"function\" &amp;&amp; define.amd) &#123; define(function() &#123; return factory(global); &#125;); &#125; else &#123; factory(global); &#125;&#125;)(this, function(window) &#123;&#125;) å­¦ä¹ èµ„æ–™ zepto è®¾è®¡å’Œæºç åˆ†æ - è§†é¢‘ zepto å¯¹è±¡æ€æƒ³ä¸æºç åˆ†æ","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"zepto","slug":"zepto","permalink":"https://www.yangtao.site/tags/zepto/"}]},{"title":"AJAX è¯·æ±‚","slug":"ajax","date":"2020-01-07T07:06:16.000Z","updated":"2020-01-07T09:51:42.474Z","comments":true,"path":"2020/01/07/ajax/","link":"","permalink":"https://www.yangtao.site/2020/01/07/ajax/","excerpt":"å…³äº http è¯·æ±‚çš„å‡ ç§æ–¹å¼","text":"å…³äº http è¯·æ±‚çš„å‡ ç§æ–¹å¼ AJAXå…·ä½“æ¥è¯´ï¼ŒAJAX åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š åˆ›å»º XMLHttpRequest å®ä¾‹ å‘å‡º HTTP è¯·æ±‚ æ¥æ”¶æœåŠ¡å™¨ä¼ å›çš„æ•°æ® æ›´æ–°ç½‘é¡µæ•°æ® èµ·æ­¥1234567891011121314151617181920212223242526const MYTHOD = \"GET\";const URL = \"https://api.github.com/search/repositories?q=javascript&amp;sort=stars\";let xhr = null;//å¤„ç†ä½ç‰ˆæœ¬IEä¸å…¼å®¹é—®é¢˜if (window.XMLHttpRequest) &#123; xhr = new XMLHttpRequest();&#125; else &#123; xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");&#125;// æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œç›‘å¬é€šä¿¡çŠ¶æ€ï¼ˆreadyStateå±æ€§ï¼‰çš„å˜åŒ–xhr.onreadystatechange = function() &#123; if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123; console.log(xhr.responseText); &#125;&#125;;// æ•è·é”™è¯¯xhr.onerror = err =&gt; console.error(\"Error: \", xhr.statusText);// å‘å‡º HTTP è¯·æ±‚xhr.open(MYTHOD, URL, true);xhr.send(null); è®¾ç½®å¤´ä¿¡æ¯è¯¥æ–¹æ³•å¿…é¡»åœ¨ open()ä¹‹åã€send()ä¹‹å‰è°ƒç”¨ã€‚å¦‚æœè¯¥æ–¹æ³•å¤šæ¬¡è°ƒç”¨ï¼Œè®¾å®šåŒä¸€ä¸ªå­—æ®µï¼Œåˆ™æ¯ä¸€æ¬¡è°ƒç”¨çš„å€¼ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„å€¼å‘é€ã€‚ 123xhr.setRequestHeader(\"Content-Type\", \"application/json\");xhr.setRequestHeader(\"Content-Length\", JSON.stringify(data).length);xhr.send(JSON.stringify(data)); Ajax+Promise123456789101112131415161718192021222324252627282930313233343536373839404142434445let ajax = (&#123; method = \"GET\", path, body, headers &#125;) =&gt; &#123; //è¿›è¡ŒPromiseå°è£… return new Promise((resolve, reject) =&gt; &#123; let request = new XMLHttpRequest(); request.open(method, path, true); //é…ç½® if (method == \"GET\") &#123; request.send(null); &#125; else &#123; for (const key in headers) &#123; //éå†header,è®¾ç½®å“åº”å¤´ let value = headers[key]; request.setRequestHeader(key, value); &#125; request.send(body); &#125; request.onreadystatechange = () =&gt; &#123; if (request.readyState === 4) &#123; if (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) &#123; resolve.call(undefined, request.responseText); &#125; else if (request.status &gt;= 400) &#123; reject.call(undefined, request); &#125; &#125; &#125;; &#125;);&#125;;//ä½¿ç”¨ajaxajax(&#123; method: \"get\", path: \"https://api.github.com/search/repositories?q=javascript&amp;sort=stars\", headers: &#123; \"content-type\": \"application/json\" &#125;&#125;).then( responseText =&gt; &#123; console.log(responseText); &#125;, request =&gt; &#123; console.log(request); &#125;); jQuery ä½¿ç”¨get æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª deferred å¯¹è±¡ï¼š 1234567891011121314151617const URL = \"https://api.github.com/search/repositories?q=javascript&amp;sort=stars\";let request = $.get(URL);request .done(function(data) &#123; console.log(data); &#125;) .fail(function(err) &#123; console.log(err); &#125;);// æˆ–è€…let request = $.ajax(&#123; url: URL, type: \"GET\"&#125;);request.done(data =&gt; console.log(data)).fail(err =&gt; console.log(err)); ä½¿ç”¨ promiseï¼š 12345678910111213141516171819202122function getData() &#123; return new Promise((resolve, reject) =&gt; &#123; $.ajax(&#123; url: \"https://api.github.com/search/repositories?q=javascript&amp;sort=stars\", type: \"GET\", success: function(data) &#123; resolve(data); &#125;, error: function(err) &#123; resolve(err); &#125; &#125;); &#125;);&#125;getData() .then(function(data) &#123; console.log(data); &#125;) .catch(function(err) &#123; console.log(err); &#125;); Fetch å‡½æ•°Fetch æä¾›äº† Request å’Œ Response å¯¹è±¡ï¼ˆä»¥åŠä¸ç½‘ç»œè¯·æ±‚æœ‰å…³çš„å…¶ä»–å†…å®¹ï¼‰çš„ä¸€èˆ¬å®šä¹‰ã€‚ Fetch API æä¾›äº† fetch() æ–¹æ³•ï¼Œå®ƒè¢«å®šä¹‰åœ¨ BOM çš„ window å¯¹è±¡ä¸­ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å‘èµ·å¯¹è¿œç¨‹èµ„æºçš„è¯·æ±‚ã€‚ fetch() æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè®©ä½ èƒ½å¤Ÿå¯¹è¯·æ±‚çš„è¿”å›ç»“æœè¿›è¡Œæ£€ç´¢ã€‚ fetch çš„é…ç½®ï¼š Promise fetch(String url [, Object options]); Promise fetch(Request req [, Object options]); 1234567891011const URL = 'https://api.github.com/search/repositories?q=javascript&amp;sort=stars';let req = new Request(URL, &#123; method: \"GET\", cache: \"reload\" &#125;);fetch(req) .then(function(response) &#123; return response.json(); &#125;) .then(function(json) &#123; console.log(json); &#125;).catch(function(err) &#123; console.log(err); &#125; fetch å’Œ ajax çš„ä¸»è¦åŒºåˆ«ï¼š fetch()è¿”å›çš„ promise å°†ä¸ä¼šæ‹’ç» http çš„é”™è¯¯çŠ¶æ€ï¼Œå³ä½¿å“åº”æ˜¯ä¸€ä¸ª HTTP 404 æˆ–è€… 500 åœ¨é»˜è®¤æƒ…å†µä¸‹ fetch ä¸ä¼šæ¥å—æˆ–è€…å‘é€ cookies AxiosåŸºæœ¬ä½¿ç”¨ï¼š 123456const URL = \"https://api.github.com/search/repositories?q=javascript&amp;sort=stars\";axios .get(URL) .then(response =&gt; console.log(response)) .catch(err =&gt; console.log(err)); æˆ–è€…ä½¿ç”¨ async/awaitï¼š 12345678async function getData() &#123; try &#123; return await axios.get(URL); &#125; catch (error) &#123; console.error(error); &#125;&#125;getData().then(data =&gt; console.log(data)); èµ„æ–™ AJAX â€“ JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹(alpha) åŸç”Ÿ javaScript å®ç° Ajax å’Œ jQuery å®ç° Ajax å›è°ƒã€ä½¿ç”¨ Promise å°è£… ajax()ã€Promise å…¥é—¨ Fetch axios-æ˜“ç”¨ã€ç®€æ´ä¸”é«˜æ•ˆçš„ http åº“","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"Ajax","slug":"Ajax","permalink":"https://www.yangtao.site/tags/Ajax/"}]},{"title":"JavaScript ç±»å‹åˆ¤æ–­","slug":"code-typeof","date":"2020-01-07T06:42:25.000Z","updated":"2020-01-07T07:00:58.458Z","comments":true,"path":"2020/01/07/code-typeof/","link":"","permalink":"https://www.yangtao.site/2020/01/07/code-typeof/","excerpt":"å­¦ä¹ JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š)çš„æ–‡ç« æ€»ç»“ï¼Œå…¶å®å°±æ˜¯ç…§æŠ„ï¼Œå“ˆå“ˆå“ˆå“ˆâ€¦é¡ºä¾¿å‡ ä¸€å¥æ–‡ç« é‡Œçš„è¯ï¼šæ‰€æœ‰è¿™äº›ç‚¹ï¼Œéƒ½å¿…é¡»è„šè¸å®åœ°åœ¨å…·ä½“åº”ç”¨åœºæ™¯ä¸‹å»åˆ†æã€å»é€‰æ‹©ï¼Œè¦è®©åœºæ™¯è¯´è¯ã€‚","text":"å­¦ä¹ JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š)çš„æ–‡ç« æ€»ç»“ï¼Œå…¶å®å°±æ˜¯ç…§æŠ„ï¼Œå“ˆå“ˆå“ˆå“ˆâ€¦é¡ºä¾¿å‡ ä¸€å¥æ–‡ç« é‡Œçš„è¯ï¼šæ‰€æœ‰è¿™äº›ç‚¹ï¼Œéƒ½å¿…é¡»è„šè¸å®åœ°åœ¨å…·ä½“åº”ç”¨åœºæ™¯ä¸‹å»åˆ†æã€å»é€‰æ‹©ï¼Œè¦è®©åœºæ™¯è¯´è¯ã€‚ typeofæœ€æ–°çš„ ECMAScript æ ‡å‡†å®šä¹‰äº† 8 ç§æ•°æ®ç±»å‹ï¼š 7 ç§åŸå§‹ç±»å‹: Boolean Null Undefined Number String Symbol BigInt å’Œ Object ä½¿ç”¨ typeof æ£€æµ‹ç±»å‹å¦‚ä¸‹ï¼š 12345678\"Number\"; // number\"String\"; // string\"Boolean\"; // boolean\"Undefined\"; // undefined\"Null\"; // object\"Symbol\"; // symbol\"BigInt\"; // bigint\"Object\"; // object æ‰€ä»¥ typeof èƒ½æ£€æµ‹å‡ºä¸ƒç§åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä½†æ˜¯ï¼Œé™¤æ­¤ä¹‹å¤– Object ä¸‹è¿˜æœ‰å¾ˆå¤šç»†åˆ†çš„ç±»å‹å‘ï¼Œå¦‚ Arrayã€Functionã€Dateã€RegExpã€Error ç­‰ã€‚ å¦‚æœç”¨ typeof å»æ£€æµ‹è¿™äº›ç±»å‹ï¼Œè¿”å›çš„éƒ½æ˜¯ objectï¼Œé™¤äº† Functionï¼š 123456var date = new Date();var error = new Error();var fn = function() &#123;&#125;;console.log(typeof date); // objectconsole.log(typeof error); // objectconsole.log(typeof fn); // function Object.prototype.toStringæ‰€æœ‰ï¼Œè¯¥å¦‚ä½•åŒºåˆ† object å‘¢ï¼Ÿæˆ‘ä»¬ç”¨Object.prototype.toStringã€‚ è§„èŒƒï¼šå½“ toString æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¸‹é¢çš„æ­¥éª¤ä¼šè¢«æ‰§è¡Œï¼š å¦‚æœ this å€¼æ˜¯ undefinedï¼Œå°±è¿”å› [object Undefined] å¦‚æœ this çš„å€¼æ˜¯ nullï¼Œå°±è¿”å› [object Null] è®© O æˆä¸º ToObject(this) çš„ç»“æœ è®© class æˆä¸º O çš„å†…éƒ¨å±æ€§ [[Class]] çš„å€¼ æœ€åè¿”å›ç”± &quot;[object &quot; å’Œ class å’Œ &quot;]&quot; ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆçš„å­—ç¬¦ä¸² é€šè¿‡è§„èŒƒï¼Œæˆ‘ä»¬è‡³å°‘çŸ¥é“äº†è°ƒç”¨ Object.prototype.toString ä¼šè¿”å›ä¸€ä¸ªç”± &quot;[object &quot; å’Œ class å’Œ &quot;]&quot; ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè€Œ class æ˜¯è¦åˆ¤æ–­çš„å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚ æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°è¿™ä¸ª class å€¼å°±æ˜¯è¯†åˆ«å¯¹è±¡ç±»å‹çš„å…³é”®ï¼ æ­£æ˜¯å› ä¸ºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Object.prototype.toString æ–¹æ³•è¯†åˆ«å‡ºæ›´å¤šç±»å‹ï¼ å…ˆçœ‹ä¸‹å¸¸è§çš„ 15 ç§ï¼ˆES6 æ–°å¢ï¼šSymbol Set Mapï¼Œè¿˜æœ‰ BigIntï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839var number = 1; // [object Number]var string = \"123\"; // [object String]var boolean = true; // [object Boolean]var und = undefined; // [object Undefined]var nul = null; // [object Null]var obj = &#123; a: 1 &#125;; // [object Object]var array = [1, 2, 3]; // [object Array]var date = new Date(); // [object Date]var error = new Error(); // [object Error]var reg = /a/g; // [object RegExp]var func = function a() &#123;&#125;; // [object Function]var symb = Symbol(\"test\"); // [object Symbol]var set = new Set(); // [object Set]var map = new Map(); // [object Map]var bigI = BigInt(1); // [object BigInt]function checkType() &#123; for (var i = 0, l = arguments.length; i &lt; l; i++) &#123; console.log(Object.prototype.toString.call(arguments[i])); &#125;&#125;checkType( number, string, boolean, und, nul, obj, array, date, error, reg, func, symb, set, map, bigI); é™¤äº†ä»¥ä¸Š 15 ç§ï¼Œè¿˜æœ‰ä»¥ä¸‹ 3 ç§ï¼š 12345678console.log(Object.prototype.toString.call(Math)); // [object Math]console.log(Object.prototype.toString.call(JSON)); // [object JSON]var fn = function() &#123; console.log(Object.prototype.toString.call(arguments)); // [object Arguments]&#125;;fn(); type APIå†™ä¸€ä¸ª type å‡½æ•°èƒ½æ£€æµ‹å„ç§ç±»å‹çš„å€¼ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œå°±ä½¿ç”¨ typeofï¼Œå¼•ç”¨ç±»å‹å°±ä½¿ç”¨ toStringã€‚ æ­¤å¤–é‰´äº typeof çš„ç»“æœæ˜¯å°å†™ï¼Œæˆ‘ä¹Ÿå¸Œæœ›æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯å°å†™ã€‚ 12345678910111213141516var class2type = &#123;&#125;;\"Boolean Number String Function Array Date RegExp Object Error Null Undefined\" .split(\" \") .map(function(item) &#123; class2type[\"[object \" + item + \"]\"] = item.toLowerCase(); // e.g. '[object Boolean]': 'boolean' &#125;);function type(obj) &#123; if (obj == null) &#123; return obj + \"\"; // IE6 &#125; return typeof obj === \"object\" || typeof obj === \"function\" ? class2type[Object.prototype.toString.call(obj)] || \"object\" : typeof obj;&#125; è¿™é‡Œclass2type[Object.prototype.toString.call(obj)] || &quot;object&quot;çš„ objectï¼Œä¸ºäº† ES6 æ–°å¢çš„ Symbolã€Mapã€Set ç­‰ç±»å‹è¿”å› objectã€‚ å½“ç„¶ä¹Ÿå¯ä»¥æ·»åŠ è¿›å»ï¼Œè¿”å›çš„å°±æ˜¯å¯¹åº”çš„ç±»å‹ï¼š 12345678910111213141516var class2type = &#123;&#125;;\"Boolean Number String Function Array Date RegExp Object Error Null Undefined Symbol Set Map BigInt\" .split(\" \") .map(function(item) &#123; class2type[\"[object \" + item + \"]\"] = item.toLowerCase(); &#125;);function type(obj) &#123; if (obj == null) &#123; return obj + \"\"; // IE6 &#125; return typeof obj === \"object\" || typeof obj === \"function\" ? class2type[Object.prototype.toString.call(obj)] : typeof obj;&#125; isFunction123function isFunction(obj) &#123; return type(obj) === \"function\";&#125; isArray12345var isArray = Array.isArray || function(obj) &#123; return type(obj) === \"array\"; &#125;; plainObjectplainObject æ¥è‡ªäº jQueryï¼Œå¯ä»¥ç¿»è¯‘æˆçº¯ç²¹çš„å¯¹è±¡ï¼Œæ‰€è°“â€çº¯ç²¹çš„å¯¹è±¡â€ï¼Œå°±æ˜¯è¯¥å¯¹è±¡æ˜¯é€šè¿‡ â€œ{}â€ æˆ– â€œnew Objectâ€ åˆ›å»ºçš„ï¼Œè¯¥å¯¹è±¡å«æœ‰é›¶ä¸ªæˆ–è€…å¤šä¸ªé”®å€¼å¯¹ã€‚ ä¹‹æ‰€ä»¥è¦åˆ¤æ–­æ˜¯ä¸æ˜¯ plainObjectï¼Œæ˜¯ä¸ºäº†è·Ÿå…¶ä»–çš„ JavaScript å¯¹è±¡å¦‚ nullï¼Œæ•°ç»„ï¼Œå®¿ä¸»å¯¹è±¡ï¼ˆdocumentsï¼‰ç­‰ä½œåŒºåˆ†ï¼Œå› ä¸ºè¿™äº›ç”¨ typeof éƒ½ä¼šè¿”å› objectã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142// ä¸ŠèŠ‚ä¸­å†™ type å‡½æ•°æ—¶ï¼Œç”¨æ¥å­˜æ”¾ toString æ˜ å°„ç»“æœçš„å¯¹è±¡var class2type = &#123;&#125;;// ç›¸å½“äº Object.prototype.toStringvar toString = class2type.toString;// ç›¸å½“äº Object.prototype.hasOwnPropertyvar hasOwn = class2type.hasOwnProperty;function isPlainObject(obj) &#123; var proto, Ctor; // æ’é™¤æ‰æ˜æ˜¾ä¸æ˜¯objçš„ä»¥åŠä¸€äº›å®¿ä¸»å¯¹è±¡å¦‚Window if (!obj || toString.call(obj) !== \"[object Object]\") &#123; return false; &#125; /** * getPrototypeOf es5 æ–¹æ³•ï¼Œè·å– obj çš„åŸå‹ * ä»¥ new Object åˆ›å»ºçš„å¯¹è±¡ä¸ºä¾‹çš„è¯ * obj.__proto__ === Object.prototype */ proto = Object.getPrototypeOf(obj); // æ²¡æœ‰åŸå‹çš„å¯¹è±¡æ˜¯çº¯ç²¹çš„ï¼ŒObject.create(null) å°±åœ¨è¿™é‡Œè¿”å› true if (!proto) &#123; return true; &#125; /** * ä»¥ä¸‹åˆ¤æ–­é€šè¿‡ new Object æ–¹å¼åˆ›å»ºçš„å¯¹è±¡ * åˆ¤æ–­ proto æ˜¯å¦æœ‰ constructor å±æ€§ï¼Œå¦‚æœæœ‰å°±è®© Ctor çš„å€¼ä¸º proto.constructor * å¦‚æœæ˜¯ Object å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼ŒCtor åœ¨è¿™é‡Œå°±ç­‰äº Object æ„é€ å‡½æ•° */ Ctor = hasOwn.call(proto, \"constructor\") &amp;&amp; proto.constructor; // åœ¨è¿™é‡Œåˆ¤æ–­ Ctor æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯ Object æ„é€ å‡½æ•°ï¼Œç”¨äºåŒºåˆ†è‡ªå®šä¹‰æ„é€ å‡½æ•°å’Œ Object æ„é€ å‡½æ•° return ( typeof Ctor === \"function\" &amp;&amp; hasOwn.toString.call(Ctor) === hasOwn.toString.call(Object) );&#125; EmptyObjectjQuery æä¾›äº† isEmptyObject æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç©ºå¯¹è±¡ï¼Œä»£ç ç®€å•ï¼š 12345678910111213141516function isEmptyObject(obj) &#123; var name; // åˆ¤æ–­æ˜¯å¦æœ‰å±æ€§ï¼Œfor å¾ªç¯ä¸€æ—¦æ‰§è¡Œï¼Œå°±è¯´æ˜æœ‰å±æ€§ï¼Œæœ‰å±æ€§å°±ä¼šè¿”å› false for (name in obj) &#123; return false; &#125; return true;&#125;console.log(isEmptyObject(&#123;&#125;)); // trueconsole.log(isEmptyObject([])); // trueconsole.log(isEmptyObject(null)); // trueconsole.log(isEmptyObject(undefined)); // trueconsole.log(isEmptyObject(1)); // trueconsole.log(isEmptyObject(\"\")); // trueconsole.log(isEmptyObject(true)); // true Window å¯¹è±¡Window å¯¹è±¡ä½œä¸ºå®¢æˆ·ç«¯ JavaScript çš„å…¨å±€å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ª window å±æ€§æŒ‡å‘è‡ªèº«ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§åˆ¤æ–­æ˜¯å¦æ˜¯ Window å¯¹è±¡ã€‚ 123function isWindow(obj) &#123; return obj !== null &amp;&amp; obj === obj.window;&#125; isArrayLikeå¦‚æœ isArrayLike è¿”å› trueï¼Œè‡³å°‘è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼š æ˜¯æ•°ç»„ é•¿åº¦ä¸º 0 lengths å±æ€§æ˜¯å¤§äº 0 çš„æ•°å­—ç±»å‹ï¼Œå¹¶ä¸” obj[length - 1]å¿…é¡»å­˜åœ¨ 12345678910111213141516function isArrayLike(obj) &#123; // obj å¿…é¡»æœ‰ lengthå±æ€§ var length = !!obj &amp;&amp; \"length\" in obj &amp;&amp; obj.length; var typeRes = type(obj); // æ’é™¤æ‰å‡½æ•°å’Œ Window å¯¹è±¡ if (typeRes === \"function\" || isWindow(obj)) &#123; return false; &#125; return ( typeRes === \"array\" || length === 0 || (typeof length === \"number\" &amp;&amp; length &gt; 0 &amp;&amp; length - 1 in obj) );&#125; isElementåˆ¤æ–­æ˜¯ä¸æ˜¯ DOM å…ƒç´  123456function isElement(obj) &#123; return !!(obj &amp;&amp; obj.nodeType === 1);&#125;var div = document.createElement(\"div\");console.log(isElement(div)); // trueconsole.log(isElement(\"\")); // false åŸæ–‡åœ°å€ JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š) JavaScript ä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸‹)","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"JavaScript æ•°ç»„å»é‡çš„å‡ ç§æ–¹å¼","slug":"code-unique","date":"2020-01-07T05:14:42.000Z","updated":"2020-01-07T06:37:17.108Z","comments":true,"path":"2020/01/07/code-unique/","link":"","permalink":"https://www.yangtao.site/2020/01/07/code-unique/","excerpt":"æ•°ç»„å»é‡ï¼Œè€ç”Ÿå¸¸è°ˆï¼ŒæŠŠå­¦ä¹ åˆ°çš„å¤šç§æ–¹å¼è¿›è¡Œå½’çº³æ€»ç»“","text":"æ•°ç»„å»é‡ï¼Œè€ç”Ÿå¸¸è°ˆï¼ŒæŠŠå­¦ä¹ åˆ°çš„å¤šç§æ–¹å¼è¿›è¡Œå½’çº³æ€»ç»“ åŒå±‚å¾ªç¯ç¬¬ä¸€ç§ï¼š 1234567891011121314function unique(arr) &#123; var result = []; for (var i = 0, arrLen = arr.length; i &lt; arrLen; i++) &#123; for (var j = 0, resLen = result.length; j &lt; resLen; j++) &#123; if (arr[i] === result[j]) &#123; break; &#125; &#125; if (j === result.length) &#123; result.push(arr[i]); &#125; &#125; return result;&#125; ç¬¬äºŒç§ï¼š 12345678910111213function unique(arr) &#123; let arrary = [].concat(arr); // é¿å…ä¿®æ”¹åŸæ•°ç»„ï¼Œå­˜ä¸ªå‰¯æœ¬ for (let i = 0, len = arrary.length; i &lt; len; i++) &#123; for (let j = i + 1; j &lt; len; j++) &#123; if (arrary[i] === arrary[j]) &#123; arrary.splice(j, 1); // splice() ä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨ä¿®æ”¹é•¿åº¦ len--; j--; &#125; &#125; &#125; return arrary;&#125; indexOf æ–¹æ³•12345678910function unique(arr) &#123; const result = []; for (let i = 0, len = arr.length; i &lt; len; i++) &#123; const current = arr[i]; if (result.indexOf(current) === -1) &#123; result.push(current); &#125; &#125; return result;&#125; filter + indexOf æ–¹æ³•12345678910function unique(arr) &#123; let result = arr.filter(function(item, index, arr) &#123; return arr.indexOf(item) === index; &#125;); return result;&#125;// ES6let unique = arr =&gt; arr.filter((item, index, arr) =&gt; arr.indexOf(item) === index); å¦‚æœæˆ‘ä»¬å¯¹ä¸€ä¸ªå·²ç»æ’å¥½åºçš„æ•°ç»„å»é‡ï¼Œè¿™ç§æ–¹æ³•æ•ˆç‡è‚¯å®šé«˜äºä½¿ç”¨ indexOfï¼š 12345let unique = arr =&gt; arr .concat() .sort() .filter((item, index, arr) =&gt; !index || item !== arr[index - 1]); ä¸è¿‡å¯¹äºä¸‹é¢è¿™ç§å°±ä¼šå¤±æ•ˆï¼š 12const arr = [2, 1, 1, 3, \"1\", 1, \"1\"];//è¾“å‡º [ 1, '1', 1, '1', 2, 3 ] Object é”®å€¼å¯¹åˆ©ç”¨ä¸€ä¸ªç©ºçš„ Object å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„çš„å€¼å­˜æˆ Object çš„ key å€¼ï¼Œæ¯”å¦‚ Object[value1] = trueï¼Œåœ¨åˆ¤æ–­å¦ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œå¦‚æœ Object[value2]å­˜åœ¨çš„è¯ï¼Œå°±è¯´æ˜è¯¥å€¼æ˜¯é‡å¤çš„ã€‚ 12345678let unique = arr =&gt; &#123; const obj = &#123;&#125;; return arr.filter(item =&gt; obj.hasOwnProperty(typeof item + JSON.stringify(item)) ? false : (obj[typeof item + JSON.stringify(item)] = true) );&#125;; æ³¨æ„ï¼š typeof item + item æ˜¯ä¸ºäº†åŒºåˆ† 1 è¿˜æ˜¯ â€˜1â€™ typeof item + JSON.stringify(item) æ˜¯ä¸ºäº†åŒºåˆ† {value: 1}, {value: 1} å¦‚ï¼š 1234567const arr = [1, \"1\", &#123; value: 1 &#125;, &#123; value: 1 &#125;];let getObjType = arr =&gt; arr.map(item =&gt; typeof item + JSON.stringify(item));getObjType(arr);// [\"number1\", \"string\"1\"\", \"object&#123;\"value\":1&#125;\", \"object&#123;\"value\":1&#125;\"] Set é›†åˆ å’Œ Map é›†åˆES6 å»é‡æ–¹å¼å·²ç»æ˜¯éå¸¸çš„ç²¾ç®€ï¼š 12345678910// Setlet unique = arr =&gt; Array.from(new Set(arr))let unique = arr =&gt; [...new Set(arr)]// Maplet unique = arr =&gt; &#123; const seen = new Map(); return arr.filter(item =&gt; !seen.has(item) &amp;&amp; seen.set(item, true));&#125;; å­¦ä¹ èµ„æ–™ JavaScript ä¸“é¢˜ä¹‹æ•°ç»„å»é‡","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"Sass æ—¥å¸¸ä½¿ç”¨æ€»ç»“","slug":"css-sass","date":"2019-12-31T04:37:40.000Z","updated":"2020-01-02T12:35:28.598Z","comments":true,"path":"2019/12/31/css-sass/","link":"","permalink":"https://www.yangtao.site/2019/12/31/css-sass/","excerpt":"ä¸–ç•Œä¸Šæœ€æˆç†Ÿã€æœ€ç¨³å®šã€æœ€å¼ºå¤§çš„ä¸“ä¸šçº§CSSæ‰©å±•è¯­è¨€ï¼ - Sass å®˜ç½‘ç®€å•æ±‡æ€»ä¸€ä¸‹ sass çš„æ—¥å¸¸ä½¿ç”¨ï¼Œåˆç®€å•åœ°çœ‹äº†ä¸€ä¸‹ Bootstrap@4 é‡Œåº”ç”¨çš„ä¸€ä¸ª Demoã€‚","text":"ä¸–ç•Œä¸Šæœ€æˆç†Ÿã€æœ€ç¨³å®šã€æœ€å¼ºå¤§çš„ä¸“ä¸šçº§CSSæ‰©å±•è¯­è¨€ï¼ - Sass å®˜ç½‘ç®€å•æ±‡æ€»ä¸€ä¸‹ sass çš„æ—¥å¸¸ä½¿ç”¨ï¼Œåˆç®€å•åœ°çœ‹äº†ä¸€ä¸‹ Bootstrap@4 é‡Œåº”ç”¨çš„ä¸€ä¸ª Demoã€‚ å®‰è£…æˆ‘æœ¬åœ°ç»“åˆ gulp+sass è‡ªåŠ¨åŒ–å·¥å…·ä½¿ç”¨ï¼Œä¸»è¦å¦‚ä¸‹ï¼š 1npm install node-sass gulp-sass --save-dev gulpfile.js æ–‡ä»¶ä¸»è¦é…ç½®å¦‚ä¸‹ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒè¿™é‡Œã€‚ 1234567891011const &#123; src, dest, watch &#125; = require(\"gulp\");const sass = require(\"gulp-sass\");sass.compiler = require(\"node-sass\");function scss() &#123; return src(scssGlobSrc) .pipe(sass(&#123; outputStyle: \"expanded\" &#125;).on(\"error\", sass.logError)) .pipe(dest(\"dist/sass\"));&#125;exports.scss = scss; å¯åŠ¨ï¼šgulp scssã€‚ å¦‚ä½•å®‰è£… Sass å››ç§ç¼–è¯‘æ’ç‰ˆ123456789/*æœªç¼–è¯‘æ ·å¼*/.box &#123; width: 300px; height: 400px; &amp;-title &#123; height: 30px; line-height: 30px; &#125;&#125; nested ç¼–è¯‘æ’ç‰ˆæ ¼å¼ 123456789101112/*å‘½ä»¤è¡Œå†…å®¹*/sass style.scss:style.css --style nested/*ç¼–è¯‘è¿‡åæ ·å¼*/.box &#123; width: 300px; height: 400px;&#125;.box-title &#123; height: 30px; line-height: 30px;&#125; expanded ç¼–è¯‘æ’ç‰ˆæ ¼å¼ 123456789101112/*å‘½ä»¤è¡Œå†…å®¹*/sass style.scss:style.css --style expanded/*ç¼–è¯‘è¿‡åæ ·å¼*/.box &#123; width: 300px; height: 400px;&#125;.box-title &#123; height: 30px; line-height: 30px;&#125; compact ç¼–è¯‘æ’ç‰ˆæ ¼å¼ 123456789101112/*å‘½ä»¤è¡Œå†…å®¹*/sass style.scss:style.css --style compact/*ç¼–è¯‘è¿‡åæ ·å¼*/.box &#123; width: 300px; height: 400px;&#125;.box-title &#123; height: 30px; line-height: 30px;&#125; compressed ç¼–è¯‘æ’ç‰ˆæ ¼å¼ 123456789101112/*å‘½ä»¤è¡Œå†…å®¹*/sass style.scss:style.css --style compressed/*ç¼–è¯‘è¿‡åæ ·å¼*/.box &#123; width: 300px; height: 400px;&#125;.box-title &#123; height: 30px; line-height: 30px;&#125; é™é»˜æ³¨é‡Š123456body &#123; // è¿™ç§æ³¨é‡Šå†…å®¹ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„cssæ–‡ä»¶ä¸­ color: #333; /* è¿™ç§æ³¨é‡Šå†…å®¹ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„cssæ–‡ä»¶ä¸­ */ padding: 0;&#125; 12345body &#123; color: #333; /* è¿™ç§æ³¨é‡Šå†…å®¹ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„cssæ–‡ä»¶ä¸­ */ padding: 0;&#125; ä½¿ç”¨å˜é‡éå¸¸ç®€å•æ˜äº†ï¼Œå˜é‡ç”³æ˜ï¼š$color: #4a4a4a;ï¼Œå˜é‡å¼•ç”¨ï¼šcolor: $color;ï¼Œå…·ä½“ä¾‹å­æ¼”ç¤ºå¦‚ä¸‹ï¼š 123456789$bg-color: #f90;$font-color: #444;body &#123; background: $bg-color; color: $font-color;&#125;.selected &#123; border: 1px solid $font-color;&#125; 12345678body &#123; background: #f90; color: #444;&#125;.selected &#123; border: 1px solid #444;&#125; åµŒå¥— CSS è§„åˆ™æ–‡æ¡£ï¼šåœ¨ Sass ä¸­ï¼Œä½ å¯ä»¥åƒä¿„ç½—æ–¯å¥—å¨ƒé‚£æ ·åœ¨è§„åˆ™å—ä¸­åµŒå¥—è§„åˆ™å—ã€‚sass åœ¨è¾“å‡º css æ—¶ä¼šå¸®ä½ æŠŠè¿™äº›åµŒå¥—è§„åˆ™å¤„ç†å¥½ï¼Œé¿å…ä½ çš„é‡å¤ä¹¦å†™ã€‚ çœ‹ä¸ªä¾‹å­ï¼ŒåŸºæœ¬å°±çŸ¥é“ä»€ä¹ˆæ„æ€ï¼š 12345678910111213ul &#123; li &#123; a &#123; color: $font-color; &amp;:hover &#123; color: red; &#125; &amp;::after &#123; content: \"...\"; &#125; &#125; &#125;&#125; 1234567891011ul li a &#123; color: #444;&#125;ul li a:hover &#123; color: red;&#125;ul li a::after &#123; content: \"...\";&#125; å¤Ÿç®€æ´ï¼Œä¸è¿‡æœ‰ä¸€äº›åµŒå¥—è§„åˆ™ï¼Œéœ€è¦ç¨ç¨ç•™æ„ï¼Œæ¯”å¦‚ï¼š çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦&amp; ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥— å­ç»„åˆé€‰æ‹©å™¨å’ŒåŒå±‚ç»„åˆé€‰æ‹©å™¨ï¼š&gt;ã€+ å’Œ ~ å±æ€§åµŒå¥— çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦çˆ¶é€‰æ‹©å™¨çš„æ ‡è¯†ç¬¦&amp;ï¼Œè®°ä½&amp;æ˜¯çˆ¸çˆ¸ï¼Œä½ å¯ä»¥åœ¨çˆ¸çˆ¸çš„åè¾¹ï¼Œä¹Ÿå¯ä»¥åœ¨çˆ¸çˆ¸çš„å‰è¾¹ï¼Œéšä½ ï¼Œå“ˆå“ˆå“ˆå“ˆï¼š 1234567891011nav a &#123; color: $font-color; /* Dad after */ &amp;:hover &#123; color: red; &#125; /* Dad before */ .header &amp; &#123; color: #000; &#125;&#125; 12345678910111213nav a &#123; color: #444;&#125;/* Dad after */nav a:hover &#123; color: red;&#125;/* Dad before */.header nav a &#123; color: #000;&#125; Dad æ˜¯çˆ¸çˆ¸ä»¬ï¼šnav aï¼Œä»€ä¹ˆåœºæ™¯èƒ½ç”¨åˆ°Dad beforeï¼Ÿæƒ³æƒ³nav aæ˜¯é€šç”¨æ ·å¼ï¼Œæˆ‘æƒ³ç»™ header ç»„ä»¶å•ç‹¬nav açš„æ ·å¼ï¼Œå³.header nav aï¼Œå³.header &amp;ã€‚ å½“ç„¶ï¼Œè¿˜å¯ä»¥è¿™æ ·ç”¨ï¼š 123456789101112131415.main &#123; color: black; &amp;-sidebar &#123; border: 1px solid; &#125;&#125;// css.main &#123; color: black;&#125;.main-sidebar &#123; border: 1px solid;&#125; ç¾¤ç»„é€‰æ‹©å™¨çš„åµŒå¥—æ–‡æ¡£ä¾‹å­ï¼š 12345678910111213.container &#123; h1, h2, h3 &#123; margin-bottom: 0.8em; &#125;&#125;nav,aside &#123; a &#123; color: blue; &#125;&#125; 12345678910.container h1,.container h2,.container h3 &#123; margin-bottom: 0.8em;&#125;nav a,aside a &#123; color: blue;&#125; åå­—å°±å·²ç»å‘Šè¯‰å’±ä»¬è¿™ä¸ªè§„åˆ™çš„è¦ç‚¹æ˜¯ï¼šç¾¤ç»„ã€‚å¤§æ‹¬å·{å‰ç«¯çš„éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªç¾¤ç»„ï¼Œæ¯”å¦‚.containerï¼Œæ¯”å¦‚nav, asideï¼Œä¸è®ºå¤šå°‘ã€‚ åšä¸ºç¾¤ç»„çš„ä»»ä½•ä¸€å‘˜ï¼Œæœ‰æƒåˆ©è·å–å­å—£ï¼Œè€Œä¸”è¿˜å¾—è·Ÿå…¶ä»–ç¾¤ç»„æˆå‘˜ä¸€æ¨¡ä¸€æ ·ï¼Œè‹¥ Ta æœ‰ ä¸‰ä¸ªï¼ˆh1, h2, h3ï¼‰å­å—£ï¼Œé‚£ç¾¤ç»„çš„ä»»ä½•ä¸€å‘˜ä¹Ÿå¾—å„è‡ªæœ‰ä¸‰ä¸ªå­å—£ï¼›Ta å¦‚æœåªæœ‰ä¸€ä¸ªï¼ˆaï¼‰å­å—£ï¼Œå³ä½¿ç¾¤ç»„äººå¾ˆå¤šï¼Œä¹Ÿå¾—æ¯ä¸ªæˆå‘˜ä¸€äººä¸€ä¸ªã€‚ æ¼”ç»ƒï¼šæœ‰ä¸‰ä¸ªç»„ä»¶header article footerï¼Œæˆ‘å¸Œæœ›å­—ä½“é¢œè‰²æœ‰é»˜è®¤å€¼ï¼Œé“¾æ¥ä¾‹å¤–ï¼Œå¹¶ä¸”æœ‰ hover å˜åŒ–ã€‚ 1234567891011.header,.acticle,.footer &#123; color: $font-color; a &#123; color: #999; &amp;:hover &#123; color: red; &#125; &#125;&#125; 1234567891011121314151617.header,.acticle,.footer &#123; color: #444;&#125;.header a,.acticle a,.footer a &#123; color: #999;&#125;.header a:hover,.acticle a:hover,.footer a:hover &#123; color: red;&#125; å­ç»„åˆå’ŒåŒå±‚ç»„åˆå­ç»„åˆé€‰æ‹©å™¨ &gt; å’ŒåŒå±‚ç»„åˆé€‰æ‹©å™¨ +ã€~ï¼Œå’Œ CSS çš„è§„åˆ™ä¸€è‡´ã€‚ 123456789101112/* é€‰æ‹©article åçš„åŒå±‚æ‰€æœ‰ article å…ƒç´  */article ~ article &#123; border-top: 1px dashed #ccc;&#125;/* é€‰æ‹©navå…ƒç´ åç´§è·Ÿçš„articleå…ƒç´  */nav + article &#123; margin-top: 0;&#125;/* é€‰æ‹©articleä¸‹çš„æ‰€æœ‰å‘½ä¸­sectioné€‰æ‹©å™¨çš„å…ƒç´  */article &gt; section &#123; background: #eee;&#125; æ–‡æ¡£ä¾‹å­ï¼š 12345678910111213141516171819article &#123; ~ article &#123; border-top: 1px dashed #ccc; &#125; &gt; section &#123; background: #eee; &#125; dl &gt; &#123; dt &#123; color: #333; &#125; dd &#123; color: #555; &#125; &#125; nav + &amp; &#123; margin-top: 0; &#125;&#125; 12345678910111213141516171819article ~ article &#123; border-top: 1px dashed #ccc;&#125;article &gt; section &#123; background: #eee;&#125;article dl &gt; dt &#123; color: #333;&#125;article dl &gt; dd &#123; color: #555;&#125;nav + article &#123; margin-top: 0;&#125; åµŒå¥—å±æ€§ è§„åˆ™ï¼šæŠŠå±æ€§åä»ä¸­åˆ’çº¿-çš„åœ°æ–¹æ–­å¼€ï¼Œåœ¨æ ¹å±æ€§åè¾¹æ·»åŠ ä¸€ä¸ªå†’å·:ï¼Œç´§è·Ÿä¸€ä¸ª{ }å—ï¼ŒæŠŠå­å±æ€§éƒ¨åˆ†å†™åœ¨è¿™ä¸ª{ }å—ä¸­ã€‚å°±åƒ css é€‰æ‹©å™¨åµŒå¥—ä¸€æ ·ï¼Œsass ä¼šæŠŠä½ çš„å­å±æ€§ä¸€ä¸€è§£å¼€ï¼ŒæŠŠæ ¹å±æ€§å’Œå­å±æ€§éƒ¨åˆ†é€šè¿‡ä¸­åˆ’çº¿-è¿æ¥èµ·æ¥ï¼Œæœ€åç”Ÿæˆçš„æ•ˆæœä¸ä½ æ‰‹åŠ¨ä¸€ééå†™çš„ css æ ·å¼ä¸€æ ·ï¼š 123456789101112131415161718192021222324nav &#123; border: &#123; style: solid; width: 1px; color: #ccc; &#125;&#125;nav &#123; border: 1px solid #ccc &#123; left: 0px; &#125;&#125;// cssnav &#123; border-style: solid; border-width: 1px; border-color: #ccc;&#125;nav &#123; border: 1px solid #ccc; border-left: 0px;&#125; ä¸€å¥è¯ï¼šæˆ‘è¦æŠŠborder-styleé‡Œçš„-æ‰“æ–­ï¼Œæ‹†æ•£å·¦å³ï¼Œå¹¶æ›¿æ¢æˆ:ï¼Œé‡æ–°ä½¿ç”¨{}åµŒå¥—ä½¿ç”¨ï¼Œå®—æ—¨å°±æ˜¯ä¸ç ´ä¸ç«‹ï¼Œæœ‰ç ´æ‰æœ‰ç«‹ï¼ŒæŠŠæ‰€æœ‰é‡å¤çš„ä¸œè¥¿ç»Ÿç»Ÿå½’å¹¶ï¼Œåªå†™å…³é”®éƒ¨ä½ã€‚ @-Rules@import å¯¼å…¥åœ¨å•ç‹¬ä½¿ç”¨ css çš„ @import è§„åˆ™å¯¼å…¥æ–‡ä»¶ï¼Œæ˜¯ä¸åŠ link çš„æ•ˆç‡ï¼Œæ¯”å¦‚åŠ è½½å­—ä½“åº“ï¼Œæœ‰æ¬¡åœ¨é¡¹ç›®ä¸­å°±åƒè¿‡è¿™ä¸ªäºï¼Œé‚£ä¼šå‘èª“æ‰“æ­»æˆ‘ä¹Ÿä¸ç”¨è¿™ä¸ªè§„åˆ™ã€‚ sass çš„@import è§„åˆ™æ˜¯åœ¨ç”Ÿæˆ css æ–‡ä»¶æ—¶å°±æŠŠç›¸å…³æ–‡ä»¶å¯¼å…¥è¿›æ¥ï¼Œæ‰€ä»¥ï¼Œå’Œ css çš„@importæ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæ”¾å¿ƒé£Ÿç”¨ã€‚ ä½†æ˜¯ç”±äº sass å…¼å®¹åŸç”Ÿçš„ cssï¼Œæ‰€ä»¥å®ƒä¹Ÿæ”¯æŒåŸç”Ÿçš„ CSS@importï¼Œæ¯”å¦‚å¯¼å…¥æ–‡ä»¶æˆ–è€… url æ˜¯ä»¥ .cssç»“å°¾çš„ã€‚ ä½¿ç”¨ï¼š 1234567891011// å¸¸ç”¨æ–¹æ³•@import \"header\";@import \"footer\";// å¤šä¸ªå¯¼å…¥@import \"rounded-corners\", \"text-shadow\";// åµŒå¥—å¯¼å…¥.blue-theme &#123; @import \"blue-theme\";&#125; å¦‚æœå°†æ–‡ä»¶å‘½åä¸º _colors.scssï¼Œä¾¿ä¸ä¼šç¼–è¯‘_colours.css æ–‡ä»¶ï¼Œä½†æ˜¯å¯¼å…¥æ—¶ä¾ç„¶æ˜¯@import &quot;colors&quot;;ã€‚ @media åª’ä½“æŸ¥è¯¢Sass ä¸­ @media æŒ‡ä»¤ä¸ CSS ä¸­ç”¨æ³•ä¸€æ ·ï¼Œä¸è¿‡è¿˜å…è®¸å…¶åœ¨ CSS è§„åˆ™ä¸­åµŒå¥—ï¼Œç¼–è¯‘æ—¶ï¼Œ@media å°†è¢«ç¼–è¯‘åˆ°æ–‡ä»¶çš„æœ€å¤–å±‚ï¼ŒåŒ…å«åµŒå¥—çš„çˆ¶é€‰æ‹©å™¨ã€‚ 1234567891011121314151617181920.sidebar &#123; width: 300px; @media screen and (orientation: landscape) &#123; width: 500px; &#125;&#125;/* æ‹¼æ¥ and */@media screen &#123; .sidebar &#123; @media (max-width: 1140px) &#123; width: 960px; &#125; &#125; .other &#123; @media (max-width: 640px) &#123; width: 100%; &#125; &#125;&#125; 12345678910111213141516171819202122.sidebar &#123; width: 300px;&#125;@media screen and (orientation: landscape) &#123; .sidebar &#123; width: 500px; &#125;&#125;/* æ‹¼æ¥ and */@media screen and (max-width: 1140px) &#123; .sidebar &#123; width: 960px; &#125;&#125;@media screen and (max-width: 640px) &#123; .other &#123; width: 100%; &#125;&#125; @extendå’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œå°±æ˜¯ç»§æ‰¿ã€‚æ¯”å¦‚ä»£ç ä¸­çš„.errorï¼Œä»¥åŠåŒçº§.intrusionï¼Œéƒ½ä¼šè¢«ç»§æ‰¿ï¼š 1234567891011.error &#123; border: 1px #f00; background-color: #fdd;&#125;.error.intrusion &#123; background-image: url(\"/image/hacked.png\");&#125;.seriousError &#123; @extend .error; border-width: 3px;&#125; 1234567891011121314.error,.seriousError &#123; border: 1px #f00; background-color: #fdd;&#125;.error.intrusion,.intrusion.seriousError &#123; background-image: url(\"/image/hacked.png\");&#125;.seriousError &#123; border-width: 3px;&#125; æ§åˆ¶æŒ‡ä»¤@ifå’Œ JavaScript çš„ if ä¸€æ ·ï¼š 12345678910$type: monster;p &#123; @if $type == ocean &#123; color: blue; &#125; @else if $type == monster &#123; color: green; &#125; @else &#123; color: black; &#125;&#125; 123p &#123; color: green;&#125; @foråŒºåˆ«åœ¨äº through ä¸ to çš„å«ä¹‰ï¼šthrough åŒ…å«æœ€åä¸€ä½ï¼Œè€Œ to ä¸åŒ…å«ï¼š 12345678910@for $i from 1 to 3 &#123; .list-#&#123;$i&#125; &#123; width: 1em * $i; &#125;&#125;@for $i from 1 through 3 &#123; .item-#&#123;$i&#125; &#123; width: 2rem * $i; &#125;&#125; 12345678910111213141516171819.list-1 &#123; width: 1em;&#125;.list-2 &#123; width: 2em;&#125;.item-1 &#123; width: 2rem;&#125;.item-2 &#123; width: 4rem;&#125;.item-3 &#123; width: 6rem;&#125; @eachç±»ä¼¼äº JavaScript çš„ for...inï¼š 12345@each $kind in small, middle, large &#123; .#&#123;$kind&#125;-icon &#123; background-image: url(\"/images/#&#123;$kind&#125;-icon.png\"); &#125;&#125; 1234567891011.small-icon &#123; background-image: url(\"/images/small-icon.png\");&#125;.middle-icon &#123; background-image: url(\"/images/middle-icon.png\");&#125;.large-icon &#123; background-image: url(\"/images/large-icon.png\");&#125; æ··åˆå™¨æ··åˆå™¨ä½¿ç”¨@mixinæ ‡è¯†ç¬¦å®šä¹‰ï¼Œé€šè¿‡@includeæ¥ä½¿ç”¨è¿™ä¸ªæ··åˆå™¨ï¼Œç”¨æ¥è§£å†³å¤§æ®µé‡ç”¨çš„ä»£ç ã€‚ 1234567891011121314151617@mixin clearfix &#123; display: inline-block; &amp;:after &#123; content: \".\"; display: block; height: 0; clear: both; visibility: hidden; &#125; * html &amp; &#123; height: 1px; &#125;&#125;.clearfix &#123; @include clearfix;&#125; 123456789101112131415.clearfix &#123; display: inline-block;&#125;.clearfix:after &#123; content: \".\"; display: block; height: 0; clear: both; visibility: hidden;&#125;* html .clearfix &#123; height: 1px;&#125; æœ€å¼ºå¤§çš„ä¸€ç‚¹å°±æ˜¯å¦‚åŒå‡½æ•°ä¸€èˆ¬ï¼Œå¯ä»¥ä¼ å‚ï¼Œä¸ä»…å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å…³é”®è¯å‚æ•°ï¼Œè¿™æ ·å°±ä¸ç”¨ç®¡å‚æ•°å‰åé¡ºåºäº†ï¼š 1234567891011121314151617@mixin border-value($width: 1px, $color: #333, $style: solid) &#123; border-width: $width; border-color: $color; border-style: $style;&#125;/*ä¸ä¼ å‚*/h1 &#123; @include border-value;&#125;/*ä¼ å‚*/h2 &#123; @include border-value(2px, #666, dashed);&#125;/*å…³é”®è¯ä¼ å‚*/h3 &#123; @include border-value($style: dashed, $width: 3px, $color: #999);&#125; 1234567891011121314151617181920/*ä¸ä¼ å‚*/h1 &#123; border-width: 1px; border-color: #333; border-style: solid;&#125;/*ä¼ å‚*/h2 &#123; border-width: 2px; border-color: #666; border-style: dashed;&#125;/*å…³é”®è¯ä¼ å‚*/h3 &#123; border-width: 3px; border-color: #999; border-style: dashed;&#125; å‡½æ•°æŒ‡ä»¤ä¸ mixin ç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¼ é€’è‹¥å¹²ä¸ªå…¨å±€å˜é‡ç»™å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥å«æœ‰å¤šæ¡è¯­å¥ï¼Œéœ€è¦è°ƒç”¨ @return è¾“å‡ºç»“æœã€‚ 12345678910111213$grid-width: 40px;$gutter-width: 10px;@function grid-width($n) &#123; @return $n * $grid-width + ($n - 1) * $gutter-width;&#125;.sidebar1 &#123; width: grid-width(5);&#125;.sidebar2 &#123; width: grid-width($n: 10);&#125; 1234567.sidebar1 &#123; width: 240px;&#125;.sidebar2 &#123; width: 490px;&#125; SassScriptæ•°æ®ç±»å‹SassScript æ”¯æŒ 6 ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼š æ•°å­—ï¼Œ1, 2, 13, 10px å­—ç¬¦ä¸²ï¼Œæœ‰å¼•å·å­—ç¬¦ä¸²ä¸æ— å¼•å·å­—ç¬¦ä¸²ï¼Œ&quot;foo&quot;, &#39;bar&#39;, baz é¢œè‰²ï¼Œblue, #04a3f9, rgba(255,0,0,0.5) å¸ƒå°”å‹ï¼Œtrue, false ç©ºå€¼ï¼Œnull æ•°ç»„ (list)ï¼Œç”¨ç©ºæ ¼æˆ–é€—å·ä½œåˆ†éš”ç¬¦ï¼Œ1.5em 1em 0 2em, Helvetica, Arial, sans-serif maps, ç›¸å½“äº JavaScript çš„ objectï¼Œ(key1: value1, key2: value2) è¿ç®—SassScript æ”¯æŒæ•°å­—çš„åŠ å‡ä¹˜é™¤ã€å–æ•´ç­‰è¿ç®— (+, -, *, /, %)ï¼Œå…³ç³»è¿ç®— &lt;, &gt;, &lt;=, &gt;= ä¹Ÿå¯ç”¨äºæ•°å­—è¿ç®—ï¼Œç›¸ç­‰è¿ç®— ==, != å¯ç”¨äºæ‰€æœ‰æ•°æ®ç±»å‹ã€‚ æ’å€¼è¯­å¥ #{}é€šè¿‡ #{} æ’å€¼è¯­å¥å¯ä»¥åœ¨é€‰æ‹©å™¨æˆ–å±æ€§åä¸­ä½¿ç”¨å˜é‡ï¼Œé¿å… Sass è¿è¡Œè¿ç®—è¡¨è¾¾å¼ã€‚ Bootstrap@4 Bootstrap v4.4.1 å…¥å£æ–‡ä»¶ bootstrap.scssçš„å¼•å…¥ç»„ä»¶å¾ˆå¤šï¼Œæˆ‘ä»¬å°±æŒ‘ä¸€ä¸ªçœ‹çœ‹ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ float å†…å®¹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859.float-left &#123; float: left !important;&#125;.float-right &#123; float: right !important;&#125;.float-none &#123; float: none !important;&#125;@media (min-width: 576px) &#123; .float-sm-left &#123; float: left !important; &#125; .float-sm-right &#123; float: right !important; &#125; .float-sm-none &#123; float: none !important; &#125;&#125;@media (min-width: 768px) &#123; .float-md-left &#123; float: left !important; &#125; .float-md-right &#123; float: right !important; &#125; .float-md-none &#123; float: none !important; &#125;&#125;@media (min-width: 992px) &#123; .float-lg-left &#123; float: left !important; &#125; .float-lg-right &#123; float: right !important; &#125; .float-lg-none &#123; float: none !important; &#125;&#125;@media (min-width: 1200px) &#123; .float-xl-left &#123; float: left !important; &#125; .float-xl-right &#123; float: right !important; &#125; .float-xl-none &#123; float: none !important; &#125;&#125; ç„¶åï¼Œæˆ‘ä»¬å»çœ‹çœ‹ bootstrap æ˜¯å¦‚ä½•å®ç°çš„ï¼š ç¬¬ä¸€æ­¥ï¼šæ‰¾è·¯æ ¹æ® bootstrap.scssé‡Œçš„å†…å®¹@import &quot;mixins&quot;;ï¼Œè¿›å…¥å½“å‰ç›®å½•ä¸‹çš„_mixins.scssï¼Œçœ‹åˆ°@import &quot;mixins/float&quot;;ï¼Œæ‰€ä»¥ç»§ç»­æ‰“å¼€mixins ç›®å½•ä¸‹çš„ _float.scssã€‚ ç¬¬äºŒæ­¥ï¼šå†…å®¹_float.scssæ‰€æœ‰å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617// stylelint-disable declaration-no-important@each $breakpoint in map-keys($grid-breakpoints) &#123; @include media-breakpoint-up($breakpoint) &#123; $infix: breakpoint-infix($breakpoint, $grid-breakpoints); .float#&#123;$infix&#125;-left &#123; float: left !important; &#125; .float#&#123;$infix&#125;-right &#123; float: right !important; &#125; .float#&#123;$infix&#125;-none &#123; float: none !important; &#125; &#125;&#125; æ¥ç€ï¼Œæœ‰ä¸‰ä¸ªåœ°æ–¹ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå¦‚map-keys()ï¼Œmedia-breakpoint-up()ï¼Œbreakpoint-infix()ã€‚ ç¬¬ä¸‰æ­¥ï¼šè§£æƒ‘ map-keys() è¿”å› map é‡Œé¢æ‰€æœ‰çš„ keyï¼š 12345678910111213141516171819202122232425262728293031323334$grid-breakpoints: ( xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px) !default;@each $breakpoint in map-keys($grid-breakpoints) &#123; .#&#123;$breakpoint&#125; &#123; color: red; &#125;&#125;// css.xs &#123; color: red;&#125;.sm &#123; color: red;&#125;.md &#123; color: red;&#125;.lg &#123; color: red;&#125;.xl &#123; color: red;&#125; èµ„æ–™ï¼šSass map è¯¦è§£ media-breakpoint-up()ï¼Œè‡ªå®šä¹‰å‡½æ•°ï¼Œä¸»è¦æ˜¯æ ¹æ®åª’ä½“æŸ¥è¯¢ç»™å‡ºä¸åŒçš„ç»“æœ 123456789101112// Media of at least the minimum breakpoint width. No query for the smallest breakpoint.// Makes the @content apply to the given breakpoint and wider.@mixin media-breakpoint-up($name, $breakpoints: $grid-breakpoints) &#123; $min: breakpoint-min($name, $breakpoints); @if $min &#123; @media (min-width: $min) &#123; @content; &#125; &#125; @else &#123; @content; &#125;&#125; è¿™é‡Œbreakpoint-min()ä¹Ÿæ˜¯ä¸ªå‡½æ•°ï¼š 12345678// Minimum breakpoint width. Null for the smallest (first) breakpoint.//// &gt;&gt; breakpoint-min(sm, (xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px))// 576px@function breakpoint-min($name, $breakpoints: $grid-breakpoints) &#123; $min: map-get($breakpoints, $name); @return if($min != 0, $min, null);&#125; è¿™é‡Œçš„map-getåŒ map-keysç”¨æ³•ï¼Œè¿”å› map é‡Œé¢æŒ‡å®šå¯ä»¥çš„ valueï¼š 1234567891011121314$min-num: breakpoint-min(sm, $grid-breakpoints);@media (min-width: $min-num) &#123; p &#123; color: #444; &#125;&#125;// css@media (min-width: 576px) &#123; p &#123; color: #444; &#125;&#125; @contentç”¨åœ¨mixiné‡Œé¢çš„ï¼Œå½“å®šä¹‰ä¸€ä¸ªmixinåï¼Œå¹¶ä¸”è®¾ç½®äº†@contentä¹‹åï¼Œã€@includeçš„æ—¶å€™å¯ä»¥ä¼ å…¥ç›¸åº”çš„å†…å®¹åˆ°mixiné‡Œé¢ï¼š 123456789101112131415161718$color: white;@mixin colors($color: blue) &#123; background-color: $color; @content; border-color: $color;&#125;.colors &#123; @include colors &#123; color: $color; &#125;&#125;// css.colors &#123; background-color: blue; color: white; border-color: blue;&#125; èµ„æ–™ï¼šsass è¯­æ³•ä¸­çš„@content breakpoint-infix()ï¼Œè‡ªå®šä¹‰å‡½æ•°ï¼š 12345678910// Returns a blank string if smallest breakpoint, otherwise returns the name with a dash in front.// Useful for making responsive utilities.//// &gt;&gt; breakpoint-infix(xs, (xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px))// \"\" (Returns a blank string)// &gt;&gt; breakpoint-infix(sm, (xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px))// \"-sm\"@function breakpoint-infix($name, $breakpoints: $grid-breakpoints) &#123; @return if(breakpoint-min($name, $breakpoints) == null, \"\", \"-#&#123;$name&#125;\");&#125; æ ¹æ®æ³¨é‡Šæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹ï¼š 123456789101112131415161718$min-value-sm: breakpoint-infix(sm, $grid-breakpoints);$min-value-xs: breakpoint-infix(xs, $grid-breakpoints);.float#&#123;$min-value-sm&#125;-left &#123; float: left;&#125;.float#&#123;$min-value-xs&#125;-left &#123; float: left;&#125;// css.float-sm-left &#123; float: left;&#125;.float-left &#123; float: left;&#125; æ•´åˆæœ€åï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰å…³äº float çš„å†…å®¹ç»„åˆåœ¨ä¸€èµ·ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243$grid-breakpoints: ( xs: 0, sm: 576px, md: 768px, lg: 992px, xl: 1200px) !default;@function breakpoint-min($name, $breakpoints: $grid-breakpoints) &#123; $min: map-get($breakpoints, $name); @return if($min != 0, $min, null);&#125;@function breakpoint-infix($name, $breakpoints: $grid-breakpoints) &#123; @return if(breakpoint-min($name, $breakpoints) == null, \"\", \"-#&#123;$name&#125;\");&#125;@mixin media-breakpoint-up($name, $breakpoints: $grid-breakpoints) &#123; $min: breakpoint-min($name, $breakpoints); @if $min &#123; @media (min-width: $min) &#123; @content; &#125; &#125; @else &#123; @content; &#125;&#125;@each $breakpoint in map-keys($grid-breakpoints) &#123; @include media-breakpoint-up($breakpoint) &#123; $infix: breakpoint-infix($breakpoint, $grid-breakpoints); .float#&#123;$infix&#125;-left &#123; float: left !important; &#125; .float#&#123;$infix&#125;-right &#123; float: right !important; &#125; .float#&#123;$infix&#125;-none &#123; float: none !important; &#125; &#125;&#125; è¿™æ ·ç›´æ¥å°±å¯ä»¥åœ¨ç¯å¢ƒé‡Œè·‘èµ·æ¥äº†ã€‚","categories":[{"name":"CSS","slug":"CSS","permalink":"https://www.yangtao.site/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://www.yangtao.site/tags/CSS/"},{"name":"SASS","slug":"SASS","permalink":"https://www.yangtao.site/tags/SASS/"}]},{"title":"å…³äº React çŠ¶æ€ç®¡ç†é‚£äº›äº‹","slug":"react-state","date":"2019-12-29T07:56:21.000Z","updated":"2020-01-02T12:39:35.162Z","comments":true,"path":"2019/12/29/react-state/","link":"","permalink":"https://www.yangtao.site/2019/12/29/react-state/","excerpt":"ç›®çš„ï¼šé‡‡ç”¨çŠ¶æ€ç®¡ç†çš„å¤šç§æ–¹å¼ï¼šå®ç°ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥åŠ ä¸€ï¼Œå‡ä¸€ï¼Œ\u001f ç½®é›¶ã€‚","text":"ç›®çš„ï¼šé‡‡ç”¨çŠ¶æ€ç®¡ç†çš„å¤šç§æ–¹å¼ï¼šå®ç°ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥åŠ ä¸€ï¼Œå‡ä¸€ï¼Œ\u001f ç½®é›¶ã€‚ React state1234567891011121314151617181920212223242526272829303132333435363738import React from \"react\";export default class Counter extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: 0 &#125;; &#125; handleClick(actions) &#123; switch (actions) &#123; case \"INCREASE\": return this.setState((state, props) =&gt; (&#123; value: ++state.value &#125;)); case \"DECREASE\": return this.setState((state, props) =&gt; (&#123; value: --state.value &#125;)); default: return this.setState(&#123; value: 0 &#125;); &#125; &#125; render() &#123; return ( &lt;div&gt; &lt;p&gt;&#123;this.state.value&#125;&lt;/p&gt; &lt;button onClick=&#123;() =&gt; this.handleClick(\"INCREASE\")&#125;&gt;+1&lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.handleClick(\"DECREASE\")&#125;&gt;-1&lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.handleClick(\"RESET\")&#125;&gt;0&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; FluxReduxç¬¬ä¸€æ­¥ï¼šåˆ›å»º reducer å¯ä»¥ä½¿ç”¨å•ç‹¬çš„ä¸€ä¸ª reducer,ä¹Ÿå¯ä»¥å°†å¤šä¸ª reducer åˆå¹¶ä¸ºä¸€ä¸ª reducerï¼Œå³ï¼šcombineReducers() action å‘å‡ºå‘½ä»¤åå°† state æ”¾å…¥ reucer åŠ å·¥å‡½æ•°ä¸­ï¼Œè¿”å›æ–°çš„ state,å¯¹ state è¿›è¡ŒåŠ å·¥å¤„ç† 12345678910const reducer = (state = &#123; counter: 0 &#125;, action) =&gt; &#123; switch (action.type) &#123; case \"INCREASE\": return &#123; counter: state.counter + 1 &#125;; case \"DECREASE\": return &#123; counter: state.counter - 1 &#125;; default: return state; &#125;&#125;; ç¬¬äºŒæ­¥ï¼šåˆ›å»º action ç”¨æˆ·æ˜¯æ¥è§¦ä¸åˆ° state çš„ï¼Œåªèƒ½æœ‰ view è§¦å‘ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ª action å¯ä»¥ç†è§£ä¸ºæŒ‡ä»¤ï¼Œéœ€è¦å‘å‡ºå¤šå°‘åŠ¨ä½œå°±æœ‰å¤šå°‘æŒ‡ä»¤ action æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå« type çš„å‚æ•°ï¼Œå®šä¹‰ action ç±»å‹ 1234const actions = &#123; increase: () =&gt; (&#123; type: \"INCREASE\" &#125;), decrease: () =&gt; (&#123; type: \"DECREASE\" &#125;)&#125;; ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºçš„ storeï¼Œä½¿ç”¨ createStore æ–¹æ³• store å¯ä»¥ç†è§£ä¸ºæœ‰å¤šä¸ªåŠ å·¥æœºå™¨çš„æ€»å·¥å‚ æä¾› subscribeï¼Œdispatchï¼ŒgetState è¿™äº›æ–¹æ³•ã€‚ 12345678const store = createStore(reducer);store.subscribe(() =&gt; console.log(store.getState()));store.dispatch(actions.increase()); // &#123;counter: 1&#125;store.dispatch(actions.increase()); // &#123;counter: 2&#125;store.dispatch(actions.increase()); // &#123;counter: 3&#125;store.dispatch(actions.decrease()); // &#123;counter: 2&#125; å…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import React from \"react\";import &#123; createStore &#125; from \"redux\";const reducer = (state = &#123; counter: 0 &#125;, action = &#123;&#125;) =&gt; &#123; const &#123; type &#125; = action; const &#123; counter &#125; = state; switch (type) &#123; case \"INCREASE\": return &#123; counter: counter + 1 &#125;; case \"DECREASE\": return &#123; counter: counter - 1 &#125;; default: return &#123; counter: 0 &#125;; &#125;&#125;;const store = createStore(reducer);export default class CounterRedux extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; counter: 0 &#125;; this.unsubscribe = null; &#125; componentDidMount() &#123; this.unsubscribe = store.subscribe(() =&gt; &#123; this.setState(&#123; counter: store.getState().counter &#125;); &#125;); &#125; componentWillUnmount() &#123; // å–æ¶ˆè®¢é˜… this.unsubscribe(); &#125; render() &#123; return ( &lt;div&gt; &lt;h1&gt;&#123;this.state.counter&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; store.dispatch(&#123; type: \"INCREASE\" &#125;)&#125;&gt;+1&lt;/button&gt; &lt;button onClick=&#123;() =&gt; store.dispatch(&#123; type: \"DECREASE\" &#125;)&#125;&gt;-1&lt;/button&gt; &lt;button onClick=&#123;() =&gt; store.dispatch(&#123; type: \"RESET\" &#125;)&#125;&gt;0&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; action å¯ä»¥å•ç‹¬å‡ºæ¥ï¼š 1234567const actions = &#123; increase: () =&gt; (&#123; type: \"INCREASE\" &#125;), decrease: () =&gt; (&#123; type: \"DECREASE\" &#125;), reset: () =&gt; (&#123; type: \"RESET\" &#125;)&#125;;// è§¦å‘&lt;button onClick=&#123;() =&gt; store.dispatch(actions.increase())&#125;&gt;+1&lt;/button&gt;; ä¸»è¦æ˜¯ä¸ºäº†å±•ç¤º redux çš„ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œå¹¶æ²¡æœ‰æŠŠçŠ¶æ€æŒ‚è½½åœ¨æœ€é¡¶å±‚ï¼Œè¯¦ç»†å®Œæ•´ç‰ˆå¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„ä»£ç ï¼šRedux Counter Exampleã€‚ Redux çš„å·¥ä½œæµç¨‹å›¾ï¼Œé˜®ä¸€å³°åšå®¢æ–‡ç« æ‘˜å½•: React-ReduxRedux æ˜¯ä¸€æ¬¾çŠ¶æ€ç®¡ç†åº“ï¼Œå¹¶ä¸”æä¾›äº† react-redux åº“æ¥ä¸ React äº²å¯†é…åˆï¼Œè¿™ä¸¤è€…çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š ç»§ç»­å®ç°è®¡æ•°å™¨ï¼Œå®Œæ•´ Demo å¯ä»¥çœ‹è¿™é‡Œã€‚ src ç›®å½•ä¸‹å¤§ä½“ç»“æ„ï¼š 123456789â”œâ”€â”€ actionsâ”‚ â””â”€â”€ counter.jsxâ”œâ”€â”€ componentsâ”‚ â””â”€â”€ app.jsxâ”œâ”€â”€ reducersâ”‚ â””â”€â”€ counter.jsxâ””â”€â”€ store â””â”€â”€ app.jsxâ”œâ”€â”€ index.jsx é¦–å…ˆï¼Œçœ‹å…¥å£æ–‡ä»¶ index.js: 12345678910111213141516import React from \"react\";import ReactDOM from \"react-dom\";import &#123; Provider &#125; from \"react-redux\";import &#123; createStore &#125; from \"redux\";import reducer from \"./reducers/counter.jsx\";import App from \"./store/app.jsx\";const store = createStore(reducer);ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById(\"root\")); Provider ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯ Context å®ç°çš„ï¼Œæä¾›ä¸€ä¸ªçŠ¶æ€ä¾›è·¨ç»„ä»¶ä½¿ç”¨ï¼Œåªéœ€è¦æŠŠ store ç»™ä»–ä¼ è¿‡å»ï¼Œæ‰€æœ‰çš„å­ç»„ä»¶å°±å¯ä»¥é€šè¿‡ props å±æ€§æ‹¿åˆ°çŠ¶æ€å€¼ã€‚ 123456789101112let Context = React.createContext();class Provider extends Component &#123; // å°†React-reduxä¸­çš„ProvideåŒ…è£…äº†reactæä¾›çš„APIç”Ÿæˆçš„Context.Provider //&lt;Provider store=&#123;xxxx&#125;&gt;&lt;/Provider&gt;ï¼Œå°†storeæŒ‚è½½åœ¨contexä¸Š render() &#123; return ( &lt;Context.Provider value=&#123;&#123; store: this.props.store &#125;&#125;&gt; &#123;this.props.children&#125; //å­ç»„ä»¶ &lt;/Context.Provider&gt; ); &#125;&#125; Reducer å‡½æ•°ï¼Œå®ƒæ¥å— Action å’Œå½“å‰ State ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Stateï¼Œå†…å®¹å’Œä¹‹å‰çš„å‡ ä¹å·®ä¸å¤šï¼š 1import reducer from \"./reducers/counter.jsx\"; 1234567891011121314// ./reducers/counter.jsxexport default function reducer(state = &#123; counter: 0 &#125;, action = &#123;&#125;) &#123; const &#123; counter &#125; = state; const &#123; type &#125; = action; switch (type) &#123; case \"INCREASE\": return &#123; counter: counter + 1 &#125;; case \"DECREASE\": return &#123; counter: counter - 1 &#125;; default: return &#123; counter: 0 &#125;; &#125;&#125; React-Redux çš„æ ¸å¿ƒä¹‹ä¸€ connect æ–¹æ³•ï¼Œç”¨äºä» UI ç»„ä»¶ç”Ÿæˆå®¹å™¨ç»„ä»¶ã€‚connect æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šmapStateToProps å’Œ mapDispatchToPropsã€‚å®ƒä»¬å®šä¹‰äº† UI ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ã€‚å‰è€…è´Ÿè´£è¾“å…¥é€»è¾‘ï¼Œå³å°† state æ˜ å°„åˆ° UI ç»„ä»¶çš„å‚æ•°ï¼ˆpropsï¼‰ï¼Œåè€…è´Ÿè´£è¾“å‡ºé€»è¾‘ï¼Œå³å°†ç”¨æˆ·å¯¹ UI ç»„ä»¶çš„æ“ä½œæ˜ å°„æˆ Actionã€‚ 1import App from \"./store/app.jsx\"; 1234567891011121314151617181920// ./store/app.jsximport &#123; connect &#125; from \"react-redux\";import App from \"./../components/app.jsx\";import &#123; increaseAction, decreaseAction, resetAction&#125; from \"./../actions/counter.jsx\";// mapStateToPropsç”¨æˆ·è‡ªå·±å®šä¹‰éœ€è¦çš„çŠ¶æ€const mapStateToProps = state =&gt; (&#123; counter: state.counter &#125;);const mapDispatchToProps = dispatch =&gt; (&#123; onIncreaseHandle: () =&gt; dispatch(increaseAction), onDecreaseHandle: () =&gt; dispatch(decreaseAction), onResetHandle: () =&gt; dispatch(resetAction)&#125;);export default connect(mapStateToProps, mapDispatchToProps)(App); Action çš„ type å±æ€§ï¼š 1234// ./../actions/counter.jsxexport const increaseAction = &#123; type: \"INCREASE\" &#125;;export const decreaseAction = &#123; type: \"DECREASE\" &#125;;export const resetAction = &#123; type: \"RESET\" &#125;; æ¥ç€ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ç†Ÿæ‚‰çš„ App ç»„ä»¶åº”è¯¥æ€ä¹ˆå†™ï¼š 1234567891011121314151617181920212223// import App from \"./../components/app.jsx\";import React from \"react\";class App extends React.Component &#123; render() &#123; let &#123; counter, onIncreaseHandle, onDecreaseHandle, onResetHandle &#125; = this.props; return ( &lt;div&gt; &lt;h1&gt;&#123;counter&#125;&lt;/h1&gt; &lt;button onClick=&#123;onIncreaseHandle&#125;&gt;+1&lt;/button&gt; &lt;button onClick=&#123;onDecreaseHandle&#125;&gt;-1&lt;/button&gt; &lt;button onClick=&#123;onResetHandle&#125;&gt;0&lt;/button&gt; &lt;/div&gt; ); &#125;&#125;export default App; å‰æœŸåšäº†è®¸å¤šå·¥ä½œï¼Œè¿™é‡Œå¦‚åŒä»çˆ¶ç»„ä»¶é‡Œè·å– props å±æ€§èˆ¬è·å–ã€è§¦å‘ç­‰è¡Œä¸ºï¼Œæ‰€æœ‰ store é‡Œçš„ state éƒ½é€šè¿‡ connect æ–¹æ³•ç»™å¤„ç†äº†ï¼š 1connect(mapStateToProps, mapDispatchToProps)(App); åˆ°è¿™é‡Œï¼Œè®¡æ•°å™¨åŸºæœ¬çš„åŠŸèƒ½éƒ½å¥½äº†ï¼Œæˆ‘çš„ Demoï¼Œé˜®ä¸€å³°è€å¸ˆçš„ Demoï¼Œä»¥åŠè®²è§£çš„æ–‡ç« ï¼ŒRedux å…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰ï¼šReact-Redux çš„ç”¨æ³•ï¼Œè®© react ç”¨èµ·æ¥æ›´å¾—å¿ƒåº”æ‰‹â€”â€”ï¼ˆreact-reduxï¼‰ã€‚ React Hookså‚è€ƒèµ„æ–™ Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸€ï¼‰ï¼šåŸºæœ¬ç”¨æ³• Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰ï¼šReact-Redux çš„ç”¨æ³• è®© react ç”¨èµ·æ¥æ›´å¾—å¿ƒåº”æ‰‹â€”â€”ï¼ˆreact-reduxï¼‰","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"react","slug":"react","permalink":"https://www.yangtao.site/tags/react/"}]},{"title":"JS å¼‚æ­¥å¤„ç†çš„å‡ ç§æ–¹å¼Â·è¯·æ±‚ç¯‡","slug":"async-method-2","date":"2019-12-29T07:49:41.000Z","updated":"2020-01-02T12:37:46.797Z","comments":true,"path":"2019/12/29/async-method-2/","link":"","permalink":"https://www.yangtao.site/2019/12/29/async-method-2/","excerpt":"","text":"å­¦ä¹ èµ„æ–™ ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Promise ES6 ç³»åˆ—ä¹‹å¼‚æ­¥å¤„ç†å®æˆ˜ ES6 ç³»åˆ— - å†´ç¾½çš„åšå®¢","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"ES6","slug":"ES6","permalink":"https://www.yangtao.site/tags/ES6/"}]},{"title":"JS å¼‚æ­¥å¤„ç†çš„å‡ ç§æ–¹å¼Â·çº¢ç¯ç¯‡","slug":"async-method-1","date":"2019-12-29T07:44:22.000Z","updated":"2020-01-02T12:36:53.975Z","comments":true,"path":"2019/12/29/async-method-1/","link":"","permalink":"https://www.yangtao.site/2019/12/29/async-method-1/","excerpt":"é¢˜ç›®ï¼šçº¢ç¯ä¸‰ç§’äº®ä¸€æ¬¡ï¼Œç»¿ç¯ä¸€ç§’äº®ä¸€æ¬¡ï¼Œé»„ç¯ä¸¤ç§’äº®ä¸€æ¬¡ï¼Œä¸æ–­äº¤æ›¿å¾ªç¯","text":"é¢˜ç›®ï¼šçº¢ç¯ä¸‰ç§’äº®ä¸€æ¬¡ï¼Œç»¿ç¯ä¸€ç§’äº®ä¸€æ¬¡ï¼Œé»„ç¯ä¸¤ç§’äº®ä¸€æ¬¡ï¼Œä¸æ–­äº¤æ›¿å¾ªç¯ å…ˆå®šä¹‰ä¸‹çº¢ç»¿ç¯ï¼š 123456789function red() &#123; console.log(\"red\");&#125;function green() &#123; console.log(\"green\");&#125;function yellow() &#123; console.log(\"yellow\");&#125; å¼‚æ­¥ç¼–ç¨‹çš„è¯­æ³•ç›®æ ‡ï¼Œå°±æ˜¯æ€æ ·è®©å®ƒæ›´åƒåŒæ­¥ç¼–ç¨‹,æœ‰ä»¥ä¸‹å‡ ç§ï¼š å›è°ƒå‡½æ•°å®ç° äº‹ä»¶ç›‘å¬ event å‘å¸ƒè®¢é˜… Publish/Subscribe Promise å’Œ Generator Async/await ä¸€ã€å›è°ƒå‡½æ•°è¿™æ˜¯æœ€å¸¸è§çš„ä¸€ç§æ–¹å¼ï¼ŒæŠŠå‡½æ•°ä½œä¸ºå‚æ•°é€å…¥ï¼Œç„¶åå›è°ƒã€‚ ç¬¬ä¸€ç‰ˆï¼šç®€å•æ˜äº† 123456789101112131415function step() &#123; console.log(\"wait for about 3 seconds...\"); setTimeout(() =&gt; &#123; red(); setTimeout(() =&gt; &#123; green(); setTimeout(() =&gt; &#123; yellow(); step(); &#125;, 2000); &#125;, 1000); &#125;, 3000);&#125;step(); ç¬¬äºŒç‰ˆï¼šå°è£…å®šæ—¶å™¨ 123456789101112131415161718192021var light = (timmer, cb) =&gt; &#123; setTimeout(() =&gt; &#123; cb(); &#125;, timmer);&#125;;function step(cb) &#123; light(3000, () =&gt; &#123; red(); light(1000, () =&gt; &#123; green(); light(2000, () =&gt; &#123; yellow(); step(); &#125;); &#125;); &#125;); typeof cb === \"function\" &amp;&amp; cb();&#125;step(() =&gt; console.log(\"wait for about 3 seconds...\")); äºŒã€äº‹ä»¶ç›‘å¬é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å¼ã€‚ä»»åŠ¡çš„æ‰§è¡Œä¸å–å†³äºä»£ç çš„é¡ºåºï¼Œè€Œå–å†³äºæŸä¸ªäº‹ä»¶æ˜¯å¦å‘ç”Ÿã€‚ ç¬¬ä¸€ç‰ˆï¼šç›‘å¬ä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”æ‰§è¡Œäº‹ä»¶é‡Œçš„å›è°ƒå‡½æ•° 12345678910111213141516// å¼•å…¥ Node events æ¨¡å—const events = require(\"events\");const emitter = new events.EventEmitter();// ç›‘å¬emitter.on(\"lightEvent\", str =&gt; console.log(str));// è§¦å‘emitter.emit(\"lightEvent\", \"red\");emitter.emit(\"lightEvent\", \"green\");emitter.emit(\"lightEvent\", \"yellow\");// è¾“å‡º// red// green// yellow ç¬¬äºŒç‰ˆï¼šåŠ ä¸ªé¡ºåºæ‰§è¡Œ 12345678910111213141516171819202122232425262728// å¼•å…¥ Node events æ¨¡å—const events = require(\"events\");const emitter = new events.EventEmitter();const lightHandler = (timmer, cb) =&gt; &#123; setTimeout(() =&gt; &#123; cb(); &#125;, timmer);&#125;;// ç›‘å¬emitter.on(\"lightEvent\", str =&gt; console.log(str));// è§¦å‘function step() &#123; lightHandler(3000, () =&gt; &#123; emitter.emit(\"lightEvent\", \"red\"); lightHandler(1000, () =&gt; &#123; emitter.emit(\"lightEvent\", \"green\"); lightHandler(2000, () =&gt; &#123; emitter.emit(\"lightEvent\", \"yellow\"); step(); &#125;); &#125;); &#125;);&#125;step(); ä¾æ—§æ˜¯å›è°ƒæ‰§è¡Œï¼Œæˆ‘ä»¬ç»§ç»­è¿œå¾å§ã€‚ ä¸‰ã€å‘å¸ƒ/è®¢é˜… â€œäº‹ä»¶â€ï¼Œå®Œå…¨å¯ä»¥ç†è§£æˆâ€ä¿¡å·â€ã€‚ æˆ‘ä»¬å‡å®šï¼Œå­˜åœ¨ä¸€ä¸ªâ€ä¿¡å·ä¸­å¿ƒâ€ï¼ŒæŸä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå°±å‘ä¿¡å·ä¸­å¿ƒâ€å‘å¸ƒâ€ï¼ˆpublishï¼‰ä¸€ä¸ªä¿¡å·ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥å‘ä¿¡å·ä¸­å¿ƒâ€è®¢é˜…â€ï¼ˆsubscribeï¼‰è¿™ä¸ªä¿¡å·ï¼Œä»è€ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™è‡ªå·±å¯ä»¥å¼€å§‹æ‰§è¡Œã€‚è¿™å°±å«åšâ€å‘å¸ƒ/è®¢é˜…æ¨¡å¼â€ï¼ˆpublish-subscribe patternï¼‰ï¼Œåˆç§°â€è§‚å¯Ÿè€…æ¨¡å¼â€ï¼ˆobserver patternï¼‰ã€‚ - é˜®ä¸€å³° è®¢é˜…è€…ï¼ˆSubscriberï¼‰æŠŠè‡ªå·±æƒ³è®¢é˜…çš„äº‹ä»¶æ³¨å†Œï¼ˆSubscribeï¼‰åˆ°è°ƒåº¦ä¸­å¿ƒï¼ˆEvent Channelï¼‰ï¼Œå½“å‘å¸ƒè€…ï¼ˆPublisherï¼‰å‘å¸ƒè¯¥äº‹ä»¶ï¼ˆPublish Eventï¼‰åˆ°è°ƒåº¦ä¸­å¿ƒï¼Œä¹Ÿå°±æ˜¯è¯¥äº‹ä»¶è§¦å‘æ—¶ï¼Œç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€è°ƒåº¦ï¼ˆFire Eventï¼‰è®¢é˜…è€…æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒçš„å¤„ç†ä»£ç ã€‚ ç¬¬ä¸€ç‰ˆï¼š 1234567891011121314151617181920212223242526272829const publisher = &#123; // ç¼“å­˜åˆ—è¡¨ lists: &#123;&#125;, // è®¢é˜… subscribe: function(event, handler) &#123; (this.lists[event] || (this.lists[event] = [])).push(handler); &#125;, // å‘å¸ƒ publish: function() &#123; const event = [].shift.call(arguments); const events = this.lists[event]; if (!events || events.length === 0) &#123; return false; &#125; events.forEach(item =&gt; &#123; item.apply(this, arguments); &#125;); &#125;&#125;;// è®¢é˜…publisher.subscribe(\"lightEvent\", red);publisher.subscribe(\"lightEvent\", green);publisher.subscribe(\"lightEvent\", yellow);// å‘å¸ƒpublisher.publish(\"lightEvent\"); ç¬¬äºŒç‰ˆï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465const publisher = &#123; // ç¼“å­˜åˆ—è¡¨ lists: &#123;&#125;, // è®¢é˜… subscribe: function(event, handler) &#123; (this.lists[event] || (this.lists[event] = [])).push(handler); &#125;, // å–æ¶ˆè®¢é˜… unsubscribe: function(event, handler) &#123; const events = this.lists[event]; if (!events) &#123; return false; &#125; if (!handler) &#123; events &amp;&amp; (events.length = 0); &#125; else &#123; events.forEach((item, i) =&gt; &#123; if (item === handler) &#123; events.splice(i, 1); &#125; &#125;); &#125; &#125;, // å‘å¸ƒ publish: function() &#123; const event = [].shift.call(arguments); const events = this.lists[event]; if (!events || events.length === 0) &#123; return false; &#125; events.forEach(item =&gt; &#123; item.apply(this, arguments); &#125;); &#125;&#125;;const lightHandler = (timmer, cb) =&gt; &#123; setTimeout(() =&gt; &#123; cb(); &#125;, timmer);&#125;;const colorHandler = color =&gt; console.log(color);// è®¢é˜…publisher.subscribe(\"redEvent\", colorHandler);publisher.subscribe(\"greenEvent\", colorHandler);publisher.subscribe(\"yellowEvent\", colorHandler);function step() &#123; lightHandler(3000, () =&gt; &#123; publisher.publish(\"redEvent\", \"red\"); lightHandler(1000, () =&gt; &#123; publisher.publish(\"greenEvent\", \"green\"); lightHandler(2000, () =&gt; &#123; publisher.publish(\"yellowEvent\", \"yellow\"); step(); &#125;); &#125;); &#125;);&#125;step(); ä¸‰ã€Promiseç›´æ¥ä¸Šä»£ç ï¼š 123456789101112131415161718192021222324252627var light = (timmer, cb) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; cb(); resolve(); &#125;, timmer); &#125;);&#125;;var step = () =&gt; &#123; Promise.resolve() .then(() =&gt; &#123; return light(3000, red); &#125;) .then(() =&gt; &#123; return light(1000, green); &#125;) .then(() =&gt; &#123; return light(2000, yellow); &#125;) .then(() =&gt; &#123; step(); &#125;) .catch(err =&gt; console.log(err));&#125;;step(); å››ã€GeneratorPromise çš„å†™æ³•å‡å°‘äº†å¥½å¤šå›è°ƒï¼Œä½†æ˜¯ä»æœ‰å›è°ƒçš„å­˜åœ¨ï¼Œè¿™æ¬¡å°è¯•ä½¿ç”¨ Generatorï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿé¿å…å›è°ƒã€‚ 12345678910111213141516171819202122232425262728293031const light = (timmer, cb) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; cb(); resolve(); &#125;, timmer); &#125;);&#125;;function* gen() &#123; yield light(3000, red); yield light(1000, green); yield light(3000, yellow);&#125;const iterator = gen();const step = (gen, iterator) =&gt; &#123; const s = iterator.next(); // è¿”å› &#123; value: Promise &#123; &lt;pending&gt; &#125;, done: false &#125; if (s.done) &#123; step(gen, gen()); &#125; else &#123; // value è¿”å› Promise å¯¹è±¡ s.value.then(() =&gt; &#123; step(gen, iterator); &#125;); &#125;&#125;;step(gen, iterator); äº”ã€Async/awaitæœ‰äº† Generator åšé“ºå«ï¼Œasync/await å°±æ¯”è¾ƒå®¹æ˜“ç†è§£äº†ï¼š 1234567891011121314151617const light = (timmer, cb) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; cb(); resolve(); &#125;, timmer); &#125;);&#125;;async function step() &#123; await light(3000, red); await light(1000, green); await light(2000, yellow); step();&#125;step(); åŒæ­¥å†™æ³•ï¼Œå®¹æ˜“ç†è§£ï¼Œå’Œæˆ‘ä»¬çš„çº¿æ€§æ€è€ƒæ–¹å¼ä¸€è‡´ï¼Œasync/awaitæ˜¯ ES2017 çš„æ–¹æ¡ˆã€‚ å­¦ä¹ èµ„æ–™ ä¸€é“å…³äº Promise åº”ç”¨çš„é¢è¯•é¢˜ ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Promise Javascript å¼‚æ­¥ç¼–ç¨‹çš„ 4 ç§æ–¹æ³• JavaScript | å¼‚æ­¥å¤„ç† nodejs äº‹ä»¶çš„ç›‘å¬ä¸äº‹ä»¶çš„è§¦å‘ JavaScript å‘å¸ƒ-è®¢é˜…æ¨¡å¼ JavaScript å®ç°ä¸ä½¿ç”¨å‘å¸ƒ/è®¢é˜…æ¨¡å¼è¯¦è§£","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://www.yangtao.site/tags/é¢è¯•/"},{"name":"ES6","slug":"ES6","permalink":"https://www.yangtao.site/tags/ES6/"}]},{"title":"æ¢ä¸€ä¸‹ NodeList å’Œ HTMLCollection","slug":"html-nodelist","date":"2019-12-03T10:09:36.000Z","updated":"2019-12-03T10:13:32.294Z","comments":true,"path":"2019/12/03/html-nodelist/","link":"","permalink":"https://www.yangtao.site/2019/12/03/html-nodelist/","excerpt":"ä¸»è¦åŒºåˆ«æ˜¯ï¼ŒNodeList å¯ä»¥åŒ…å«å„ç§ç±»å‹çš„èŠ‚ç‚¹ï¼ŒHTMLCollection åªèƒ½åŒ…å« HTML å…ƒç´ èŠ‚ç‚¹ã€‚","text":"ä¸»è¦åŒºåˆ«æ˜¯ï¼ŒNodeList å¯ä»¥åŒ…å«å„ç§ç±»å‹çš„èŠ‚ç‚¹ï¼ŒHTMLCollection åªèƒ½åŒ…å« HTML å…ƒç´ èŠ‚ç‚¹ã€‚ NodeList æ¥å£NodeList å®ä¾‹æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒçš„æˆå‘˜æ˜¯èŠ‚ç‚¹å¯¹è±¡ã€‚é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¯ä»¥å¾—åˆ° NodeList å®ä¾‹ã€‚ Node.childNodes document.querySelectorAll() ç­‰èŠ‚ç‚¹æœç´¢æ–¹æ³• NodeList å®ä¾‹å¾ˆåƒæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨ length å±æ€§å’Œ forEach æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå®ƒä¸æ˜¯æ•°ç»„ï¼Œä¸èƒ½ä½¿ç”¨ pop æˆ– push ä¹‹ç±»æ•°ç»„ç‰¹æœ‰çš„æ–¹æ³•ã€‚ å¦‚æœ NodeList å®ä¾‹è¦ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œå¯ä»¥å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ é™¤äº†ä½¿ç”¨ forEach æ–¹æ³•éå† NodeList å®ä¾‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ for å¾ªç¯ã€‚ NodeList.prototype.lengthï¼Œlength å±æ€§è¿”å› NodeList å®ä¾‹åŒ…å«çš„èŠ‚ç‚¹æ•°é‡ NodeList.prototype.forEach()ï¼Œéå† NodeList çš„æ‰€æœ‰æˆå‘˜ NodeList.prototype.item()ï¼Œitem æ–¹æ³•æ¥å—ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæˆå‘˜çš„ä½ç½®ï¼Œè¿”å›è¯¥ä½ç½®ä¸Šçš„æˆå‘˜ã€‚ ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ï¼Œéƒ½è¿”å›ä¸€ä¸ª ES6 çš„éå†å™¨å¯¹è±¡ï¼Œfor...of å¯è·å–æ¯ä¸€ä¸ªæˆå‘˜ä¿¡æ¯ï¼š NodeList.prototype.keys()ï¼Œè¿”å›é”®åçš„éå†å™¨ NodeList.prototype.values()ï¼Œè¿”å›é”®å€¼çš„éå†å™¨ NodeList.prototype.entries()ï¼Œè¿”å›çš„éå†å™¨ HTMLCollection æ¥å£HTMLCollection æ˜¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡çš„é›†åˆï¼Œåªèƒ½åŒ…å«å…ƒç´ èŠ‚ç‚¹ï¼ˆelementï¼‰ï¼Œä¸èƒ½åŒ…å«å…¶ä»–ç±»å‹çš„èŠ‚ç‚¹ã€‚ å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä½†æ˜¯ä¸ NodeList æ¥å£ä¸åŒï¼ŒHTMLCollection æ²¡æœ‰ forEach æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨ for å¾ªç¯éå†ã€‚ è¿”å› HTMLCollection å®ä¾‹çš„ï¼Œä¸»è¦æ˜¯ä¸€äº› Document å¯¹è±¡çš„é›†åˆå±æ€§ï¼Œæ¯”å¦‚ document.linksã€document.formsã€document.images ç­‰ã€‚ HTMLCollection.prototype.length HTMLCollection.prototype.item() HTMLCollection.prototype.namedItem()ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º id å±æ€§æˆ– name å±æ€§çš„å€¼ï¼Œè¿”å›å¯¹åº”çš„å…ƒç´ èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ™è¿”å› nullã€‚ å¯¹æ¯”å…±åŒç‚¹ï¼š ç±»æ•°ç»„å¯¹è±¡ï¼Œæœ‰ length å±æ€§ å…±åŒçš„æ–¹æ³•ï¼šitemï¼Œå¯ä»¥é€šè¿‡ item(index) æˆ–è€… item(id) æ¥è®¿é—®è¿”å›ç»“æœä¸­çš„å…ƒç´  å®æ—¶å˜åŠ¨çš„ï¼ˆliveï¼‰ï¼Œdocument ä¸Šçš„æ›´æ”¹ä¼šåæ˜ åˆ°ç›¸å…³å¯¹è±¡ä¸Šï¼ˆä¾‹å¤–ï¼šdocument.querySelectorAll è¿”å›çš„ NodeList ä¸æ˜¯å®æ—¶çš„ï¼‰ åŒºåˆ«ï¼š NodeList å¯ä»¥åŒ…å«ä»»ä½•èŠ‚ç‚¹ç±»å‹ï¼ŒHTMLCollection åªåŒ…å«å…ƒç´ èŠ‚ç‚¹ï¼ˆelementNodeï¼‰ï¼ŒelementNode å°±æ˜¯ HTML ä¸­çš„æ ‡ç­¾ HTMLCollection æ¯” NodeList å¤šä¸€é¡¹æ–¹æ³•ï¼šnamedItemï¼Œå¯ä»¥é€šè¿‡ä¼ é€’ id æˆ– name å±æ€§æ¥è·å–èŠ‚ç‚¹ä¿¡æ¯ å‚è€ƒèµ„æ–™ï¼š NodeList æ¥å£ï¼ŒHTMLCollection æ¥å£ HTMLCollection vs. NodeList","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/tags/Html/"}]},{"title":"å°† Hexo å’Œ Vuepress é™æ€èµ„æºæ¨é€è‡³ Ubuntu","slug":"ubuntu-aliyun","date":"2019-11-27T15:50:05.000Z","updated":"2019-11-27T15:51:26.920Z","comments":true,"path":"2019/11/27/ubuntu-aliyun/","link":"","permalink":"https://www.yangtao.site/2019/11/27/ubuntu-aliyun/","excerpt":"ç”±äºå·²ç»å¼€é€šçš„ Hexo å’Œ Vuepress åšå®¢ï¼Œéƒ½æŒ‚åœ¨ github çš„å…è´¹æœåŠ¡å™¨ä¸Šï¼ŒåŠ è½½é€Ÿåº¦ä¸å ªå¿ç¹ï¼Œæ‰€ä»¥æ‰“ç®—æŒ‚åœ¨é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä¸Šï¼Œè¿‡ç¨‹å¯ä»¥ç”¨ä¸¾æ­¥ç»´è‰°æ¥å½¢å®¹ã€‚","text":"ç”±äºå·²ç»å¼€é€šçš„ Hexo å’Œ Vuepress åšå®¢ï¼Œéƒ½æŒ‚åœ¨ github çš„å…è´¹æœåŠ¡å™¨ä¸Šï¼ŒåŠ è½½é€Ÿåº¦ä¸å ªå¿ç¹ï¼Œæ‰€ä»¥æ‰“ç®—æŒ‚åœ¨é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä¸Šï¼Œè¿‡ç¨‹å¯ä»¥ç”¨ä¸¾æ­¥ç»´è‰°æ¥å½¢å®¹ã€‚ ä½¿ç”¨ ssh è¿œç¨‹ç™»å½• Ubuntu å¸¸ç”¨å‘½ä»¤ï¼š 123456789101112131415# æ›´æ–°æºåˆ—è¡¨apt-get update# å®‰è£… SSHapt-get install openssh-server# æŸ¥çœ‹ SSH æœåŠ¡æ˜¯å¦å¯åŠ¨ps -e | grep ssh# åœæ­¢ã€é‡å¯service ssh stopservice ssh start# æŸ¥çœ‹ ipifconfig ä½¿ç”¨ ssh ç™»å½•ï¼š 1ssh root@47.101.33.81 ç”±äºä¹‹å‰æˆ‘è¿œç¨‹ç™»å½•è¿‡ CentOSï¼Œæ‰€ä»¥æ¢æˆ Ubuntu ä¹‹åï¼Œå†æ¬¡è¿œç¨‹ç™»å½•ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æ— æ³•è¿æ¥ä¿¡æ¯ï¼š 1234567891011121314~ â¯â¯â¯ ssh root@47.101.33.81@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that a host key has just been changed.The fingerprint for the ECDSA key sent by the remote host isSHA256:neXCznmpgVyF/0YSiDxOjD/8A1+4ND2D9+fZjUozbzc.Please contact your system administrator.Add correct host key in /Users/yangtao/.ssh/known_hosts to get rid of this message.Offending ECDSA key in /Users/yangtao/.ssh/known_hosts:5ECDSA host key for 47.101.33.81 has changed and you have requested strict checking.Host key verification failed. æ‰€ä»¥ï¼Œæ ¹æ®æç¤ºï¼Œæˆ‘å°±è¿›å…¥ç›®å½•ä¸‹ï¼Œåˆ é™¤äº†ä¹‹å‰ä¿ç•™çš„ä¿¡æ¯ï¼š 1~ â¯â¯â¯ vim /Users/yangtao/.ssh/known_hosts ç„¶åï¼Œä¿å­˜ï¼Œå†æ¬¡ç™»å½•ï¼Œå°±ä¼šé‡æ–°è®¾ç½®ï¼Œä¹Ÿå°±è¿œç¨‹ç™»å½•æˆåŠŸã€‚ åœ¨ Ubuntu 18.04 ä¸Šå®‰è£…å’Œé…ç½® Nginxå®‰è£… Nginxæˆ‘ä¹ æƒ¯ fishï¼Œå¯ä»¥é¢„è£…ä¸€ä¸‹ï¼š 1234apt install fishroot@istaotao:~# fishWelcome to fish, the friendly interactive shell æ³¨ï¼šå¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œéœ€è¦ sudoï¼Œå¦‚ï¼šsudo apt install fishã€‚ Nginx çš„è½¯ä»¶åŒ…åœ¨ Ubuntu é»˜è®¤è½¯ä»¶ä»“åº“ä¸­å¯ç”¨ã€‚ å®‰è£…éå¸¸ç®€å•ï¼Œåªéœ€é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 12apt updateapt install nginx æ£€æŸ¥ Nginx æœåŠ¡çš„çŠ¶æ€ï¼š 1systemctl status nginx æŸ¥çœ‹ç‰ˆæœ¬ï¼š 12root@istaotao ~# nginx -vnginx version: nginx/1.14.0 (Ubuntu) ç„¶åè®¿é—®å…¬ç½‘ ipï¼Œæˆ–è€…åŸŸåï¼Œå°±å¯ä»¥çœ‹åˆ°æ¬¢è¿ç•Œé¢ï¼Œå¦‚æœé•¿æ—¶é—´æ²¡æœ‰å“åº”ï¼Œè¯´æ˜ä½ çš„æœåŠ¡å™¨åº”è¯¥æ²¡æœ‰å¼€å¯ 80 ç«¯å£ã€‚ å‚è€ƒï¼šé˜¿é‡Œäº‘ ubuntu nginx æ— æ³•è®¿é—®ï¼Œæ±‚è§£ç­” ä½¿ç”¨ systemctl ç®¡ç† Nginx æœåŠ¡æ‚¨å¯ä»¥åƒä»»ä½•å…¶ä»– systemd å•ä½ä¸€æ ·ç®¡ç† Nginx æœåŠ¡ï¼š 1234567891011121314151617181920# è¦åœæ­¢NginxæœåŠ¡ï¼Œè¯·è¿è¡Œï¼šsystemctl stop nginx# è¦å†æ¬¡å¯åŠ¨ï¼Œè¯·é”®å…¥ï¼šsystemctl start nginx# é‡æ–°å¯åŠ¨NginxæœåŠ¡ï¼šsystemctl restart nginx# åœ¨è¿›è¡Œä¸€äº›é…ç½®æ›´æ”¹åé‡æ–°åŠ è½½NginxæœåŠ¡ï¼šsystemctl reload nginx# å¦‚æœä½ æƒ³ç¦ç”¨NginxæœåŠ¡åœ¨å¯åŠ¨æ—¶å¯åŠ¨ï¼šsystemctl disable nginx# å¹¶é‡æ–°å¯ç”¨å®ƒï¼šsystemctl enable nginx# æ£€æŸ¥WebæœåŠ¡å™¨æ˜¯å¦åœ¨è¿è¡Œsystemctl status nginx ä¹Ÿå¯ä»¥ä½¿ç”¨ service ç®¡ç† Nginx æœåŠ¡ï¼š 1234567891011# åœæ­¢NginxæœåŠ¡ï¼Œè¯·è¿è¡Œï¼šservice nginx stop# è¦å†æ¬¡å¯åŠ¨ï¼Œè¯·é”®å…¥ï¼šservice nginx start#é‡æ–°å¯åŠ¨NginxæœåŠ¡ï¼šservice nginx restart#åœ¨è¿›è¡Œä¸€äº›é…ç½®æ›´æ”¹åé‡æ–°åŠ è½½NginxæœåŠ¡ï¼šservice nginx reload å…¶ä»–å‘½ä»¤è·å¾—åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶çš„åˆ—è¡¨ï¼šufw app listï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼šufw status 123456root@istaotao ~# ufw app listAvailable applications: Nginx Full Nginx HTTP Nginx HTTPS OpenSSH Nginx æ–‡ä»¶å’Œç›®å½•è¯´æ˜nginx æœåŠ¡å™¨é…ç½®æ–‡ä»¶ï¼š /etc/nginx Nginx é…ç½®ç›®å½•ã€‚æ‰€æœ‰çš„ Nginx é…ç½®æ–‡ä»¶éƒ½é©»ç•™åœ¨è¿™é‡Œã€‚ /etc/nginx/nginx.conf ä¸»è¦çš„ Nginx é…ç½®æ–‡ä»¶ã€‚ è¿™å¯ä»¥ä¿®æ”¹ï¼Œä»¥æ›´æ”¹ Nginx å…¨å±€é…ç½®ã€‚ /etc/nginx/sites-available/ å¯å­˜å‚¨æ¯ä¸ªç«™ç‚¹æœåŠ¡å™¨å—çš„ç›®å½•ã€‚ é™¤éå°† Nginx é“¾æ¥åˆ°sites-enabledäº†sites-enabledç›®å½•ï¼Œå¦åˆ™ Nginx ä¸ä¼šä½¿ç”¨æ­¤ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ã€‚ é€šå¸¸ï¼Œæ‰€æœ‰æœåŠ¡å™¨å—é…ç½®éƒ½åœ¨æ­¤ç›®å½•ä¸­å®Œæˆï¼Œç„¶åé€šè¿‡é“¾æ¥åˆ°å…¶ä»–ç›®å½•å¯ç”¨ã€‚ /etc/nginx/sites-enabled/ å­˜å‚¨å¯ç”¨çš„æ¯ä¸ªç«™ç‚¹æœåŠ¡å™¨å—çš„ç›®å½•ã€‚ é€šå¸¸ï¼Œè¿™äº›æ˜¯é€šè¿‡é“¾æ¥åˆ° sites-available ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶åˆ›å»ºçš„ã€‚ /etc/nginx/snippets è¿™ä¸ªç›®å½•åŒ…å«å¯ä»¥åŒ…å«åœ¨ Nginx é…ç½®å…¶ä»–åœ°æ–¹çš„é…ç½®ç‰‡æ®µã€‚ å¯é‡å¤é…ç½®çš„ç‰‡æ®µå¯ä»¥é‡æ„ä¸ºç‰‡æ®µã€‚ nginx æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶ï¼š /var/log/nginx/access.log é™¤é Nginx é…ç½®ä¸ºå…¶ä»–æ–¹å¼ï¼Œå¦åˆ™æ¯ä¸ªå¯¹æ‚¨çš„ Web æœåŠ¡å™¨çš„è¯·æ±‚éƒ½ä¼šè®°å½•åœ¨æ­¤æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ /var/log/nginx/error.log ä»»ä½• Nginx é”™è¯¯éƒ½ä¼šè®°å½•åœ¨è¿™ä¸ªæ—¥å¿—ä¸­ã€‚ è™šæ‹Ÿç«™ç‚¹çš„è®¾ç½®Ubuntu 18.04 ä¸Šçš„ Nginx é»˜è®¤å¯ç”¨äº†ä¸€ä¸ªæœåŠ¡å™¨æ¨¡å—ï¼Œè¯¥æ¨¡å—è¢«é…ç½®ä¸ºåœ¨/var/www/htmlç›®å½•ä¸‹æä¾›æ–‡æ¡£å†…å®¹ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªè™šæ‹Ÿç½‘ç‚¹ã€‚ åˆ›å»ºexample.comç›®å½•ï¼Œä½¿ç”¨-pæ ‡å¿—åˆ›å»ºä»»ä½•å¿…éœ€çš„çˆ¶ç›®å½•ï¼š 1sudo mkdir -p /var/www/example.com/html ä½¿ç”¨\\$USER ç¯å¢ƒå˜é‡åˆ†é…ç›®å½•çš„æ‰€æœ‰æƒï¼š 1sudo chown -R $USER:$USER /var/www/example.com/html/ ä¿®æ”¹ç›®å½•çš„æƒé™ï¼š 1sudo chmod -R 755 /var/www/example.com/html/ åˆ›å»ºä¸€ä¸ª index.html é¡µé¢ï¼š 1/var/www/example.com/html/index.html å¦‚ï¼š 12345678&lt;html&gt; &lt;head&gt; &lt;title&gt;Welcome to Example.com!&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Success! The example.com server block is working!&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; åœ¨ä¸ç›´æ¥ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨/etc/nginx/sites-available/ä¸Šåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶example.comï¼Œå¹¶å°†å¦‚ä¸‹å†…å®¹å¤åˆ¶åˆ°example.comï¼š 12345678910111213server &#123; listen 80; listen [::]:80; root /var/www/example.com/html; index index.html index.htm index.nginx-debian.html; server_name example.com www.example.com; location / &#123; try_files $uri $uri/ =404; &#125;&#125; æ“ä½œæ–¹æ³•ï¼š 123cd /etc/nginx/sites-available/touch example.comvim example.com å¸¸è§„å¤åˆ¶å®Œæ¯•ä¹‹åï¼ŒæŒ‰:ä¹‹åï¼Œæ¥ç€æŒ‰wqï¼Œvim å°±å¯ä»¥ä¿å­˜é€€å‡ºäº†ã€‚ åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œè¿åˆ°é»˜è®¤å¯åŠ¨sites-enabledç›®å½•æ¥å¯ç”¨è¯¥æ–‡ä»¶ï¼Œè¯¥ç›®å½•æ˜¯ Nginx åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­è¯»å–çš„ï¼š 1sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/ ç°åœ¨å¯ç”¨ä¸¤ä¸ªæœåŠ¡å™¨æ¨¡å—å¹¶å°†å…¶é…ç½®ä¸ºåŸºäºlistenå’Œserver_nameæŒ‡ä»¤å“åº”è¯·æ±‚ï¼š example.com ï¼šå°†å“åº”example.comå’Œwww.example.comè¯·æ±‚ã€‚ default ï¼šå°†å“åº”ç«¯å£80ä¸Šä¸å…¶ä»–ä¸¤ä¸ªå—ä¸åŒ¹é…çš„ä»»ä½•è¯·æ±‚ã€‚ ä¸ºäº†é¿å…æ·»åŠ é¢å¤–çš„æœåŠ¡å™¨åç§°å¯èƒ½å¯¼è‡´çš„å“ˆå¸Œæ¡¶å†…å­˜é—®é¢˜ï¼Œæœ‰å¿…è¦è°ƒæ•´/etc/nginx/nginx.confæ–‡ä»¶ä¸­çš„å•ä¸ªå€¼ã€‚ ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š 1sudo vim /etc/nginx/nginx.conf æ‰¾åˆ°server_names_hash_bucket_size 64æŒ‡ä»¤å¹¶åˆ é™¤ # ç¬¦å·ä»¥å–æ¶ˆæ³¨é‡Šè¯¥è¡Œï¼š æ¥ä¸‹æ¥ï¼Œæµ‹è¯•ä»¥ç¡®ä¿æ‚¨çš„ Nginx æ–‡ä»¶ä¸­æ²¡æœ‰è¯­æ³•é”™è¯¯ï¼š 1234sudo nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful é‡å¯ nginxï¼š 1sudo systemctl restart nginx ç„¶åï¼Œéœ€è¦åœ¨æœ¬åœ° hosts æ–‡ä»¶æ·»åŠ å¯¹åº” hostï¼š 12# ip æ¢æˆè‡ªå·±çš„é˜¿é‡Œäº‘ ip47.101.33.81 www.example.com è¿™æ ·ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå°±å¯ä»¥é€šè¿‡ http://example.comæ¥è®¿é—®åˆšåˆšè®¾ç½®çš„å†…å®¹ï¼Œè€Œè®¿é—®http://47.101.33.81ï¼Œä¾æ—§æ˜¯é»˜è®¤çš„å†…å®¹ã€‚ hexo éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæ•´ä¸ªæµç¨‹å°±æ˜¯æœ¬åœ°å°† *.md æ¸²æŸ“æˆé™æ€æ–‡ä»¶ï¼Œç„¶å Git æ¨é€åˆ°æœåŠ¡å™¨çš„ repository,æœåŠ¡å™¨å†é€šè¿‡ git-hooks åŒæ­¥ç½‘ç«™æ ¹ç›®å½•ã€‚ æœåŠ¡å™¨é…ç½®ä¸»è¦ä½¿ç”¨ git hooks æ¥å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚ä»¥ä¸‹æ­¥éª¤ä¸ºå…¶ä»–åšå®¢å®Œæ•´å†…å®¹ï¼Œä½†æ˜¯æˆ‘æ˜¯ç›´æ¥åœ¨ root ä¸‹æ“ä½œçš„ï¼Œæ‰€ä»¥å…³äºæƒé™ç­‰é—®é¢˜ï¼Œæ˜¯ç›´æ¥ç•¥è¿‡çš„ï¼Œç­‰åæœŸç†Ÿæ‚‰äº†å†åŠ ä¸Šã€‚ ç¬¬ä¸€æ­¥å®‰è£… gitï¼š 1sudo apt-get install git ç¬¬äºŒæ­¥åˆ›å»ºä¸€ä¸ª git ç”¨æˆ·ï¼Œç”¨æ¥è¿è¡Œ git æœåŠ¡ï¼š 1sudo adduser git è™½è¯´ç°åœ¨çš„ä»“åº“åªæœ‰æˆ‘ä»¬è‡ªå·±åœ¨ä½¿ç”¨ï¼Œæ–°å»ºä¸€ä¸ª git ç”¨æˆ·æ˜¾å¾—ä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œä½†æ˜¯ä¸ºäº†å®‰å…¨èµ·è§ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨å•ç‹¬çš„ git ç”¨æˆ·æ¥ä¸“é—¨è¿è¡Œ git æœåŠ¡ã€‚ ç¬¬ä¸‰æ­¥åˆ›å»ºè¯ä¹¦ç™»å½•ï¼ŒæŠŠè‡ªå·±ç”µè„‘çš„å…¬é’¥ï¼Œä¹Ÿå°±æ˜¯ ~/.ssh/id_rsa.pub æ–‡ä»¶é‡Œçš„å†…å®¹æ·»åŠ åˆ°æœåŠ¡å™¨çš„ /home/git/.ssh/authorized_keys æ–‡ä»¶ä¸­ï¼Œæ·»åŠ å…¬é’¥ä¹‹åå¯ä»¥é˜²æ­¢æ¯æ¬¡ push éƒ½è¾“å…¥å¯†ç ã€‚ å¦‚æœä½ ä¹‹å‰æ²¡æœ‰ç”Ÿæˆè¿‡å…¬é’¥ï¼Œåˆ™å¯èƒ½å°±æ²¡æœ‰ id_rsa.pub æ–‡ä»¶ï¼Œå…·ä½“çš„ç”Ÿæˆæ–¹æ³•ï¼Œå¯ä»¥Generating a new SSH key and adding it to the ssh-agentã€‚ ç¬¬å››æ­¥åˆå§‹åŒ– Git ä»“åº“ï¼Œæˆ‘æ˜¯å°†å…¶æ”¾åœ¨ /var/repo/hexo.git ç›®å½•ä¸‹çš„ 123sudo mkdir /var/repocd /var/reposudo git init --bare hexo.git ä½¿ç”¨ --bare å‚æ•°ï¼ŒGit å°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è£¸ä»“åº“ä¸Šè¿›è¡Œæ“ä½œï¼Œå®ƒåªä¸ºå…±äº«è€Œå­˜åœ¨ã€‚ ç¬¬äº”æ­¥é…ç½® git hooksï¼Œå…³äº hooks çš„è¯¦æƒ…å†…å®¹å¯ä»¥è‡ªå®šä¹‰ Git - Git é’©å­ã€‚ æˆ‘ä»¬è¿™é‡Œè¦ä½¿ç”¨çš„æ˜¯ post-receive çš„ hookï¼Œè¿™ä¸ª hook ä¼šåœ¨æ•´ä¸ª git æ“ä½œè¿‡ç¨‹å®Œç»“ä»¥åè¢«è¿è¡Œã€‚ åœ¨ hexo.git/hooks ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª post-receive æ–‡ä»¶ï¼š 12cd /var/repo/blog.git/hooksvim post-receive åœ¨ post-receive æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š 12#!/bin/shgit --work-tree=/var/www/hexo --git-dir=/var/repo/hexo.git checkout -f æ³¨æ„ï¼Œ/var/www/hexo è¦æ¢æˆä½ è‡ªå·±çš„éƒ¨ç½²ç›®å½•ï¼Œä¸€èˆ¬å¯èƒ½éƒ½æ˜¯ /var/www/htmlã€‚ä¸Šé¢é‚£å¥ git å‘½ä»¤å¯ä»¥åœ¨æˆ‘ä»¬æ¯æ¬¡ push å®Œä¹‹åï¼ŒæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°åšå®¢çš„æœ€æ–°ç”ŸæˆçŠ¶æ€ã€‚è¿™æ ·ä¾¿å¯ä»¥å®Œæˆè¾¾åˆ°è‡ªåŠ¨éƒ¨ç½²çš„ç›®çš„äº†ã€‚ ä¸è¦å¿˜è®°è®¾ç½®è¿™ä¸ªæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™ï¼š 1chmod +x post-receive ç¬¬å…­æ­¥æ”¹å˜ hexo.git ç›®å½•çš„æ‹¥æœ‰è€…ä¸º git ç”¨æˆ·ï¼š 1sudo chown -R git:git blog.git ç¬¬ä¸ƒæ­¥ç¦ç”¨ git ç”¨æˆ·çš„ shell ç™»å½•æƒé™ã€‚ å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘ä»¬è¦è®© git ç”¨æˆ·ä¸èƒ½é€šè¿‡ shell ç™»å½•ã€‚å¯ä»¥ç¼–è¾‘ /etc/passwd æ¥å®ç°ï¼Œåœ¨ /etc/passwd ä¸­æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¸€è¡Œï¼š 1git:x:1001:1001:,,,:/home/git:/bin/bash å°†å…¶æ”¹ä¸ºï¼š 1git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell è¿™æ · git ç”¨æˆ·å¯ä»¥é€šè¿‡ ssh æ­£å¸¸ä½¿ç”¨ gitï¼Œä½†æ˜¯æ— æ³•ç™»å½• sehllã€‚ ç¬¬å…«æ­¥ä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ï¼š 12345678vim /etc/nginx/sites-enabled/default# ä¿®æ”¹é»˜è®¤ç›®å½•ä¸ºè‡ªå·±çš„ç›®å½•root /var/www/hexo/;# ä¿å­˜é€€å‡ºEsc:wq è‡³æ­¤ï¼ŒæœåŠ¡å™¨ç«¯çš„é…ç½®å°±å®Œæˆäº†ã€‚ æœ¬åœ°é…ç½®ä¿®æ”¹ Hexo åšå®¢ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.yml, å¦‚ä¸‹ä¿®æ”¹: 1234deploy: type: git repo: root@47.101.33.81:/var/repo/hexo.git branch: master repo æ ¼å¼ï¼šç”¨æˆ·å@åŸŸåæˆ– IP åœ°å€:/var/repo/hexo.gitï¼Œå¦‚ï¼š 12345678# root åŸŸåroot@istaotao.com:/var/repo/hexo.git# root iproot@47.101.33.81:/var/repo/hexo.git# git åŸŸågit@istaotao.com:/var/repo/hexo.git ç„¶åå°±æ˜¯ hexo çš„å¸¸è§„æ“ä½œäº†ï¼š 12345# æ¸…æ¥šç¼“å­˜hexo clean# æ„å»ºå¹¶éƒ¨ç½²hexo g -d å¯ä»¥å¤šéƒ¨ç½²å‡ æ¬¡ï¼Œç„¶åå» /var/www/hexo çœ‹æ˜¯å¦å·²ç»æœ‰å¯¹åº”å†…å®¹ï¼Œå¦‚æœæ¨é€å®Œä¹‹åï¼Œæç¤ºå·²æ— æ›´æ–°å†…å®¹å¯æäº¤ï¼Œå¯ä»¥æ”¹å†™ä¸œè¥¿ï¼Œé‡æ–°æ„å»ºéƒ¨ç½²ç­‰æ­¥éª¤ï¼Œå¤šè¯•å‡ æ¬¡ã€‚ åˆ°è¿™é‡Œï¼ŒåŸºæœ¬å®Œæˆ Hexo æ¨é€åˆ° ubuntu çš„ä»»åŠ¡, é€šè¿‡æœåŠ¡å™¨ IP æˆ–è€…åŸŸååº”è¯¥å°±å¯ä»¥çœ‹åˆ°åšå®¢çš„å†…å®¹äº†ã€‚ vuepress éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæœ‰äº†éƒ¨ç½² Hexo çš„ç»éªŒï¼Œå†éƒ¨ç½² vuepressï¼Œå°±ç®€å•å¤šäº†ã€‚ æˆ‘çš„æƒ³æ³•æ˜¯ï¼šhexo åšé¦–é¡µï¼Œvuepress åšå­é¡µå†…å®¹ï¼Œæ¯”å¦‚ï¼šhttp:yangtao.site/vuepressã€‚æ‰€ä»¥ï¼Œå»ºç«‹ git hooks å°±åº”è¯¥å¯ä»¥äº†ã€‚ æœåŠ¡ç«¯é…ç½®ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ï¼š 1vim /etc/nginx/sites-enabled/default æ‰¾åˆ° location / {ï¼Œç„¶ååœ¨å…¶åé¢ï¼Œè¾“å…¥ä¸€æ®µï¼š 123456789101112# æ‰¾åˆ°å¦‚ä¸‹location / &#123; # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. try_files $uri $uri/ =404;&#125;# è¾“å…¥å¦‚ä¸‹location /vuepress &#123; root /var/www/; try_files $uri $uri/ =404;&#125; ç„¶ååœ¨var/wwwä¸‹æ–°å»º vuepress ç›®å½•ï¼š 12cd /var/www/mkdir vuepress è¿™æ ·ï¼Œå¯¹ç”¨è¦è®¿é—®çš„ç›®å½•å·²ç»åˆ›å»ºå¥½äº†ã€‚ æ³¨ï¼šä»¥ä¸Šæ“ä½œéƒ½æ˜¯åœ¨ root æƒé™ä¸‹æ“ä½œçš„ï¼Œå¦‚æœæ˜¯å…¶ä»–ç”¨æˆ·ï¼Œè®°å¾—è¯¥åŠ  sudo çš„åŠ  sudoï¼Œè¯¥ä¿®æ”¹æ–‡ä»¶æƒé™å°±ä¿®æ”¹ã€‚ ç¬¬äºŒæ­¥ï¼šå»ºç«‹ git hooks å¦‚åŒå»ºç«‹ hexo.git ä¸€æ ·ï¼š åˆå§‹åŒ–ï¼š 12cd /var/repogit init --bare vuepress.git å»ºç«‹ post-receive: 12cd vuepress.git/hooks/touch post-receive å¹¶å†™å…¥ï¼š 12#!/bin/shgit --work-tree=/var/www/vuepress --git-dir=/var/repo/vuepress.git checkout -f è®¾ç½®è¿™ä¸ªæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™ï¼š 1chmod +x post-receive å¥½äº†ï¼ŒæœåŠ¡ç«¯çš„é…ç½®å·®ä¸å¤šå°±è¿™äº›ã€‚ æœ¬åœ°é…ç½®å…·ä½“çš„å¯ä»¥å‚è€ƒå®˜æ–¹éƒ¨ç½²æ–¹æ³•ã€‚ ç¬¬ä¸€æ­¥ï¼šæ ¹ç›®å½•ä¸‹åˆ›å»ºæ‰§è¡Œè„šæœ¬deploy.sh: 1234567891011121314151617181920212223242526#!/usr/bin/env sh# ç¡®ä¿è„šæœ¬æŠ›å‡ºé‡åˆ°çš„é”™è¯¯set -e# ç”Ÿæˆé™æ€æ–‡ä»¶npm run build# è¿›å…¥ç”Ÿæˆçš„æ–‡ä»¶å¤¹cd docs/.vuepress/dist# å¦‚æœæ˜¯å‘å¸ƒåˆ°è‡ªå®šä¹‰åŸŸå# echo 'www.example.com' &gt; CNAMEgit initgit add -Agit commit -m 'deploy'# å¦‚æœå‘å¸ƒåˆ° https://&lt;USERNAME&gt;.github.io# git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git master# å¦‚æœå‘å¸ƒåˆ° https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;# git push -f git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git master:gh-pagesgit push -f root@47.101.33.81:/var/repo/vuepress.git mastercd - ç¬¬äºŒæ­¥ï¼šä¿®æ”¹config.jsçš„åŸºå‡† url 123const config = &#123; base: \"/vuepress/\" // åŸºå‡† URL&#125;; è¿™æ ·ï¼Œè®¿é—® http://47.101.33.81/vuepressï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®,è¿™é‡Œéå¸¸å…³é”®ï¼Œå¦‚æœæ˜¯æ ¹ç›®å½•ï¼Œç›´æ¥å»æ‰ vuepressï¼Œé‡æ–°æ„å»ºéƒ¨ç½²ã€‚ ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²çº¿ä¸Š 123456sh deploy.sh# å¼€å§‹è‡ªåŠ¨æ„å»ºã€éƒ¨ç½²...# è¾“å…¥æœåŠ¡ç«¯å¯†ç ...# ...# success æ³¨æ„ï¼šå¯ä»¥å¤šéƒ¨ç½²å‡ æ¬¡ï¼Œè®¿é—®èµ„æºå¦‚æœ‰é—®é¢˜ï¼Œä¼°è®¡æ˜¯ç¬¬äºŒæ­¥å‡ºé—®é¢˜äº†ï¼Œå¯ä»¥æ’æŸ¥å“ªé‡Œå‡ºé”™äº†ã€‚ å¥½äº†ï¼Œæˆªæ­¢åˆ°ç°åœ¨ï¼Œè®¿é—®http://47.101.33.81ï¼Œè®¿é—®çš„æ˜¯ hexo çš„åšå®¢èµ„æºï¼Œè€Œè®¿é—®http://47.101.33.81/vuepressï¼Œè®¿é—®çš„æ˜¯ vuepress çš„åšå®¢èµ„æºã€‚ ä¸»è¦æ˜¯ nginx çš„é…ç½®æ–‡ä»¶ï¼Œä»¥åŠ git hooks çš„å»ºç«‹ï¼Œè¿˜æœ‰æœ¬åœ°éƒ¨ç½²æ–‡ä»¶çš„å»ºè®¾ï¼Œä¸€ä¸ªç®€å•çš„ä¸ªäººç½‘ç«™ç®—æ˜¯é¢¤é¢¤å·å·åœ°ç«™èµ·æ¥äº†ã€‚ èµ„æ–™å­¦ä¹ èµ„æ–™ åœ¨ Ubuntu Server ä¸‹æ­å»º LAMP ç¯å¢ƒ - è®©ä½ ç†è§£ LAMP ç¯å¢ƒå„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ä¸ä½œç”¨ï¼Œå¹¶èƒ½æŒæ¡ä»æ— åˆ°æœ‰çš„åœ¨ Ubuntu Server æ“ä½œç³»ç»Ÿä¸‹æ­å»º LAMP ç¯å¢ƒã€é…ç½®è™šæ‹Ÿä¸»æœºã€æ•°æ®åº“è¿œç¨‹ç»´æŠ¤ç­‰å¸¸è§çš„æœåŠ¡å™¨æ­å»ºç»´æŠ¤æŠ€èƒ½ ä¼˜é›…ç©è½¬ Vim - æœ¬è¯¾ç¨‹ç³»ç»Ÿæç‚¼ vim çš„ç²¾åã€é€šè¿‡æŠ›ç –å¼•ç‰æŠŠå®ƒå±•ç°åˆ°ä½ çš„é¢å‰ï¼Œæ›´èƒ½è®©ä½ çš„å·¥ä½œå¦‚è™æ·»ç¿¼ã€äº‹åŠåŠŸå€ã€‚ ç©è½¬ Vim ä»æ”¾å¼ƒåˆ°çˆ±ä¸é‡Šæ‰‹ - æœ¬è¯¾ç¨‹ä» vim æœ€åŸºç¡€çš„æ“ä½œå’Œæ¦‚å¿µå¼€å§‹è®²èµ·ï¼Œå¸¦é¢†å¤§å®¶å­¦ä¼šä½¿ç”¨å’Œé…ç½® vimï¼Œå®‰è£…å¼ºå¤§çš„ vim æ’ä»¶ï¼ŒçœŸæ­£æŒæ¡ç¼–è¾‘å™¨ä¹‹ç¥ vim çš„ä½¿ç”¨ã€‚ é¡¹ç›®ä¸Šçº¿æµç¨‹ - ä¸»è¦è®²è§£äº†ä¸€ä¸ªé¡¹ç›®æƒ³è¦å‘å¸ƒåˆ°å…¬ç½‘çš„æµç¨‹ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨çš„è´­ä¹°ã€ä»¥åŠåŸŸåçš„è´­ä¹°ï¼Œä»¥åŠéœ€è¦æ³¨æ„çš„äº‹é¡¹ã€‚ Linux è¾¾äººå…»æˆè®¡åˆ’ I - è¯¾ç¨‹ä»¥ CentOS æ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼Œä¸ºä½ å¸¦æ¥ Linux çš„ç®€ä»‹ã€ç³»ç»Ÿå®‰è£…å’Œå¸¸ç”¨å‘½ä»¤ç­‰å†…å®¹ã€‚è®©æ‚¨åœ¨è½»æ¾çš„æ°›å›´ä¸­æ„Ÿå—åˆ° Linux ä¹‹ç¾ã€‚ å‚è€ƒèµ„æ–™ Nginx ä½¿ç”¨åŠé…ç½® åœ¨ Ubuntu 18.04 ä¸Šå®‰è£…å’Œé…ç½® Nginx Ubuntu18.04 æ­å»º nginx æœåŠ¡å™¨ é˜¿é‡Œäº‘ Ubuntu 16.04 ç³»ç»Ÿä¸‹å®‰è£… Nginx Linux ç³»ç»Ÿä¸‹å¦‚ä½•æŸ¥çœ‹åŠä¿®æ”¹æ–‡ä»¶è¯»å†™æƒé™ vim åŸºæœ¬æ“ä½œ é˜¿é‡Œäº‘ ubuntu nginx æ— æ³•è®¿é—®ï¼Œæ±‚è§£ç­” Hexo ä¸ªäººåšå®¢éƒ¨ç½²åˆ° CentOS ä¸ªäººæœåŠ¡å™¨ Hexo éƒ¨ç½²åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š é€šè¿‡ Git å°† Hexo åšå®¢éƒ¨ç½²åˆ°æœåŠ¡å™¨ ä½¿ç”¨ Git Hook è‡ªåŠ¨éƒ¨ç½² Hexo åˆ°ä¸ªäºº VPS è¶…è¯¦ç»†åŠ¨æ‰‹æ­å»ºä¸€ä¸ª Vuepress ç«™ç‚¹åŠå¼€å¯ PWA ä¸è‡ªåŠ¨éƒ¨ç½²","categories":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"https://www.yangtao.site/categories/æœåŠ¡ç«¯/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://www.yangtao.site/tags/Ubuntu/"}]},{"title":"å­¦ä¹ å†´ç¾½çš„ JS æ·±å…¥ç³»åˆ—Â·ä¸‹ç¯‡","slug":"js-series-3","date":"2019-11-27T13:05:40.000Z","updated":"2019-11-27T13:08:12.537Z","comments":true,"path":"2019/11/27/js-series-3/","link":"","permalink":"https://www.yangtao.site/2019/11/27/js-series-3/","excerpt":"ä¸»è¦æ˜¯è®²è¿°äº†åˆ›å»ºå¯¹è±¡ã€ç»§æ‰¿çš„å¤šç§æ–¹å¼åŠå…¶å„è‡ªçš„ä¼˜ç¼ºç‚¹","text":"ä¸»è¦æ˜¯è®²è¿°äº†åˆ›å»ºå¯¹è±¡ã€ç»§æ‰¿çš„å¤šç§æ–¹å¼åŠå…¶å„è‡ªçš„ä¼˜ç¼ºç‚¹ åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹è¿™ç¯‡æ–‡ç« æ›´åƒæ˜¯ç¬”è®°ï¼Œå› ä¸ºã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹å†™å¾—çœŸæ˜¯å¤ªå¥½äº†ï¼ å·¥å‚æ¨¡å¼1234567891011function createPerson(name) &#123; var o = new Object(); o.name = name; o.getName = function() &#123; console.log(this.name); &#125;; return o;&#125;var person1 = createPerson(\"kevin\"); ç¼ºç‚¹ï¼šå¯¹è±¡æ— æ³•è¯†åˆ«ï¼Œå› ä¸ºæ‰€æœ‰çš„å®ä¾‹éƒ½æŒ‡å‘ä¸€ä¸ªåŸå‹ æ„é€ å‡½æ•°æ¨¡å¼12345678function Person(name) &#123; this.name = name; this.getName = function() &#123; console.log(this.name); &#125;;&#125;var person1 = new Person(\"kevin\"); ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥è¯†åˆ«ä¸ºä¸€ä¸ªç‰¹å®šçš„ç±»å‹ ç¼ºç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«åˆ›å»ºä¸€æ¬¡ æ„é€ å‡½æ•°æ¨¡å¼ä¼˜åŒ– 12345678910function Person(name) &#123; this.name = name; this.getName = getName;&#125;function getName() &#123; console.log(this.name);&#125;var person1 = new Person(\"kevin\"); ä¼˜ç‚¹ï¼šè§£å†³äº†æ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«é‡æ–°åˆ›å»ºçš„é—®é¢˜ ç¼ºç‚¹ï¼šå…¨å±€å‘½åå˜é‡å¤ªå¤š åŸå‹æ¨¡å¼12345678function Person(name) &#123;&#125;Person.prototype.name = \"keivn\";Person.prototype.getName = function() &#123; console.log(this.name);&#125;;var person1 = new Person(); ä¼˜ç‚¹ï¼šæ–¹æ³•ä¸ä¼šé‡æ–°åˆ›å»º ç¼ºç‚¹ï¼š1. æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½å…±äº«ï¼› 2. ä¸èƒ½åˆå§‹åŒ–å‚æ•°ï¼› åŸå‹æ¨¡å¼ä¼˜åŒ– 1 12345678910function Person(name) &#123;&#125;Person.prototype = &#123; name: \"kevin\", getName: function() &#123; console.log(this.name); &#125;&#125;;var person1 = new Person(); ä¼˜ç‚¹ï¼šå°è£…æ€§å¥½äº†ä¸€ç‚¹ ç¼ºç‚¹ï¼šé‡å†™äº†åŸå‹ï¼Œä¸¢å¤±äº† constructor å±æ€§ åŸå‹æ¨¡å¼ä¼˜åŒ– 2 1234567891011function Person(name) &#123;&#125;Person.prototype = &#123; constructor: Person, name: \"kevin\", getName: function() &#123; console.log(this.name); &#125;&#125;;var person1 = new Person(); ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥é€šè¿‡ constructor å±æ€§æ‰¾åˆ°æ‰€å±æ„é€ å‡½æ•° ç¼ºç‚¹ï¼šåŸå‹æ¨¡å¼è¯¥æœ‰çš„ç¼ºç‚¹è¿˜æ˜¯æœ‰ ç»„åˆæ¨¡å¼æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼åŒå‰‘åˆç’§ã€‚ 123456789101112function Person(name) &#123; this.name = name;&#125;Person.prototype = &#123; constructor: Person, getName: function() &#123; console.log(this.name); &#125;&#125;;var person1 = new Person(); ä¼˜ç‚¹ï¼šè¯¥å…±äº«çš„å…±äº«ï¼Œè¯¥ç§æœ‰çš„ç§æœ‰ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„æ–¹å¼ ç¼ºç‚¹ï¼šæœ‰çš„äººå°±æ˜¯å¸Œæœ›å…¨éƒ¨éƒ½å†™åœ¨ä¸€èµ·ï¼Œå³æ›´å¥½çš„å°è£…æ€§ åŠ¨æ€åŸå‹æ¨¡å¼ 12345678910function Person(name) &#123; this.name = name; if (typeof this.getName != \"function\") &#123; Person.prototype.getName = function() &#123; console.log(this.name); &#125;; &#125;&#125;var person1 = new Person(); æ³¨æ„ï¼šä½¿ç”¨åŠ¨æ€åŸå‹æ¨¡å¼æ—¶ï¼Œä¸èƒ½ç”¨å¯¹è±¡å­—é¢é‡é‡å†™åŸå‹ è§£é‡Šä¸‹ä¸ºä»€ä¹ˆï¼š 1234567891011121314151617181920function Person(name) &#123; this.name = name; if (typeof this.getName != \"function\") &#123; Person.prototype = &#123; constructor: Person, getName: function() &#123; console.log(this.name); &#125; &#125;; &#125;&#125;var person1 = new Person(\"kevin\");var person2 = new Person(\"daisy\");// æŠ¥é”™ å¹¶æ²¡æœ‰è¯¥æ–¹æ³•person1.getName();// æ³¨é‡Šæ‰ä¸Šé¢çš„ä»£ç ï¼Œè¿™å¥æ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚person2.getName(); ä¸ºäº†è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå‡è®¾å¼€å§‹æ‰§è¡Œvar person1 = new Person(&#39;kevin&#39;)ã€‚ å¦‚æœå¯¹ new å’Œ apply çš„åº•å±‚æ‰§è¡Œè¿‡ç¨‹ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¯ä»¥é˜…è¯»åº•éƒ¨ç›¸å…³é“¾æ¥ä¸­çš„æ–‡ç« ã€‚ æˆ‘ä»¬å›é¡¾ä¸‹ new çš„å®ç°æ­¥éª¤ï¼š é¦–å…ˆæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†å¯¹è±¡çš„åŸå‹æŒ‡å‘ Person.prototypeï¼Œç„¶å Person.apply(obj)è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ æ³¨æ„è¿™ä¸ªæ—¶å€™ï¼Œå›é¡¾ä¸‹ apply çš„å®ç°æ­¥éª¤ï¼Œä¼šæ‰§è¡Œ obj.Person æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæ‰§è¡Œ if è¯­å¥é‡Œçš„å†…å®¹ï¼Œæ³¨æ„æ„é€ å‡½æ•°çš„ prototype å±æ€§æŒ‡å‘äº†å®ä¾‹çš„åŸå‹ï¼Œä½¿ç”¨å­—é¢é‡æ–¹å¼ç›´æ¥è¦†ç›– Person.prototypeï¼Œå¹¶ä¸ä¼šæ›´æ”¹å®ä¾‹çš„åŸå‹çš„å€¼ï¼Œperson1 ä¾ç„¶æ˜¯æŒ‡å‘äº†ä»¥å‰çš„åŸå‹ï¼Œè€Œä¸æ˜¯ Person.prototypeã€‚è€Œä¹‹å‰çš„åŸå‹æ˜¯æ²¡æœ‰ getName æ–¹æ³•çš„ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ï¼ å¦‚æœä½ å°±æ˜¯æƒ³ç”¨å­—é¢é‡æ–¹å¼å†™ä»£ç ï¼Œå¯ä»¥å°è¯•ä¸‹è¿™ç§ï¼š 12345678910111213141516171819function Person(name) &#123; this.name = name; if (typeof this.getName != \"function\") &#123; Person.prototype = &#123; constructor: Person, getName: function() &#123; console.log(this.name); &#125; &#125;; return new Person(name); &#125;&#125;var person1 = new Person(\"kevin\");var person2 = new Person(\"daisy\");person1.getName(); // kevinperson2.getName(); // daisy å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼12345678910111213function Person(name) &#123; var o = new Object(); o.name = name; o.getName = function() &#123; console.log(this.name); &#125;; return o;&#125;var person1 = new Person(\"kevin\");console.log(person1 instanceof Person); // falseconsole.log(person1 instanceof Object); // true å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºåº”è¯¥è¿™æ ·è¯»ï¼šå¯„ç”Ÿ-æ„é€ å‡½æ•°-æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯„ç”Ÿåœ¨æ„é€ å‡½æ•°çš„ä¸€ç§æ–¹æ³•ã€‚ ä¹Ÿå°±æ˜¯è¯´æ‰“ç€æ„é€ å‡½æ•°çš„å¹Œå­æŒ‚ç¾Šå¤´å–ç‹—è‚‰ï¼Œä½ çœ‹åˆ›å»ºçš„å®ä¾‹ä½¿ç”¨ instanceof éƒ½æ— æ³•æŒ‡å‘æ„é€ å‡½æ•°ï¼ è¿™æ ·æ–¹æ³•å¯ä»¥åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä½¿ç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå…·æœ‰é¢å¤–æ–¹æ³•çš„ç‰¹æ®Šæ•°ç»„ï¼Œä½†æ˜¯åˆä¸æƒ³ç›´æ¥ä¿®æ”¹ Array æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š 123456789101112131415161718192021function SpecialArray() &#123; var values = new Array(); for (var i = 0, len = arguments.length; i &lt; len; i++) &#123; values.push(arguments[i]); &#125; values.toPipedString = function() &#123; return this.join(\"|\"); &#125;; return values;&#125;var colors = new SpecialArray(\"red\", \"blue\", \"green\");var colors2 = SpecialArray(\"red2\", \"blue2\", \"green2\");console.log(colors);console.log(colors.toPipedString()); // red|blue|greenconsole.log(colors2);console.log(colors2.toPipedString()); // red2|blue2|green2 ä½ ä¼šå‘ç°ï¼Œå…¶å®æ‰€è°“çš„å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼å°±æ˜¯æ¯”å·¥å‚æ¨¡å¼åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¤šä½¿ç”¨äº†ä¸€ä¸ª newï¼Œå®é™…ä¸Šä¸¤è€…çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ ä½†æ˜¯ä½œè€…å¯èƒ½æ˜¯å¸Œæœ›èƒ½åƒä½¿ç”¨æ™®é€š Array ä¸€æ ·ä½¿ç”¨ SpecialArrayï¼Œè™½ç„¶æŠŠ SpecialArray å½“æˆå‡½æ•°ä¹Ÿä¸€æ ·èƒ½ç”¨ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä½œè€…çš„æœ¬æ„ï¼Œä¹Ÿå˜å¾—ä¸ä¼˜é›…ã€‚ åœ¨å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œä¸è¦ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚ ä½†æ˜¯å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šé¢ä¾‹å­ä¸­çš„å¾ªç¯ï¼š 123for (var i = 0, len = arguments.length; i &lt; len; i++) &#123; values.push(arguments[i]);&#125; å¯ä»¥æ›¿æ¢æˆï¼š 1values.push.apply(values, arguments); ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼1234567891011121314151617function person(name) &#123; var o = new Object(); o.sayName = function() &#123; console.log(name); &#125;; return o;&#125;var person1 = person(\"kevin\");person1.sayName(); // kevinperson1.name = \"daisy\";person1.sayName(); // kevinconsole.log(person1.name); // daisy æ‰€è°“ç¨³å¦¥å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨ this çš„å¯¹è±¡ã€‚ ä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸¤ç‚¹ä¸åŒï¼š æ–°åˆ›å»ºçš„å®ä¾‹æ–¹æ³•ä¸å¼•ç”¨ this ä¸ä½¿ç”¨ new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•° ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›å®‰å…¨çš„ç¯å¢ƒä¸­ã€‚ ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ä¹Ÿè·Ÿå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œæ— æ³•è¯†åˆ«å¯¹è±¡æ‰€å±ç±»å‹ã€‚ åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹ ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹åŸå‹é“¾ç»§æ‰¿123456789101112function Parent() &#123; this.name = 'Yang';&#125;Parent.prototype.getName = function() &#123; return this.name;&#125;function Child() &#123; &#125;Child.prototype = new Parent();var myself = new Child();myself.getName(); // 'Yang' é—®é¢˜ï¼š å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº« åœ¨åˆ›å»º Child çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘Parentä¼ å‚ å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)12345678910function Parent(name) &#123; this.name = name;&#125;function Child(name) &#123; Parent.call(this, name);&#125;var myself1 = new Child('Yang');var myself2 = new Child('Wang');console.log(myself1.name) // 'Yang'console.log(myself2.name) // 'Wang' ä¼˜ç‚¹ï¼š é¿å…äº†å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº« å¯ä»¥åœ¨ Child ä¸­å‘ Parent ä¼ å‚ ç¼ºç‚¹ï¼š æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³• ç»„åˆç»§æ‰¿åŸå‹é“¾ç»§æ‰¿å’Œç»å…¸ç»§æ‰¿åŒå‰‘åˆç’§ã€‚ 12345678910111213141516171819202122232425262728function Parent(name) &#123; this.name = name; this.colors = ['red', 'blue', 'green'];&#125;Parent.prototype.getName = function() &#123; return this.name;&#125;function Child(name, age) &#123; Parent.call(this, name); this.age = age;&#125;Child.prototype = new Parent();Child.prototype.constructor = Child;var child1 = new Child('yang', 27);child1.colors.push('white');console.log(child1.name); // \"yang\"console.log(child1.age); // 27console.log(child1.colors); // [\"red\", \"blue\", \"green\", \"white\"]var child2 = new Child('ming', 20);console.log(child2.name); // \"ming\"console.log(child2.age); // 20console.log(child2.colors); // [\"red\", \"blue\", \"green\"]child2.getName(); // \"ming\" ä¼˜ç‚¹ï¼šèåˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹ï¼Œæ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ã€‚ åŸå‹å¼ç»§æ‰¿å°±æ˜¯ ES5 [Object.create](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create) çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚ 12345function createObj(proto) &#123; function F() &#123;&#125; F.prototype = proto; return new F();&#125; ç¼ºç‚¹ï¼šåŒ…å«å¼•ç”¨ç±»å‹çš„å±æ€§å€¼å§‹ç»ˆéƒ½ä¼šå…±äº«ç›¸åº”çš„å€¼ï¼Œè¿™ç‚¹è·ŸåŸå‹é“¾ç»§æ‰¿ä¸€æ ·ã€‚ å¯„ç”Ÿå¼ç»§æ‰¿åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§å½¢å¼æ¥åšå¢å¼ºå¯¹è±¡ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚ 1234567function createObj(o) &#123; var clone = Object.create(o); clone.sayName = function() &#123; console.log('hi'); &#125;; return clone;&#125; ç¼ºç‚¹ï¼šè·Ÿå€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸€æ ·ï¼Œæ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ã€‚ å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ç»„åˆç»§æ‰¿æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°ã€‚ è®¾ç½®å­ç±»å‹å®ä¾‹çš„åŸå‹çš„æ—¶å€™ï¼šChild.prototype = new Parent(); åˆ›å»ºå­ç±»å‹å®ä¾‹çš„æ—¶å€™ï¼šParent.call(this, name); 123456789101112function object(proto) &#123; function F() &#123;&#125; F.prototype = proto; return new F();&#125;function prototype(child, parent) &#123; var prototype = object(parent.prototype); child.prototype.constructor = child; child.prototype = prototype;&#125;prototype(Child, Parent); å¼•ç”¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­å¯¹å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„å¤¸èµå°±æ˜¯ï¼š è¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚ åŸæ–‡é“¾æ¥ï¼šJavaScriptæ·±å…¥ä¹‹ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å­¦ä¹ å†´ç¾½çš„ JS æ·±å…¥ç³»åˆ—Â·ä¸­ç¯‡","slug":"js-series-2","date":"2019-11-27T13:03:24.000Z","updated":"2019-12-02T14:11:48.889Z","comments":true,"path":"2019/11/27/js-series-2/","link":"","permalink":"https://www.yangtao.site/2019/11/27/js-series-2/","excerpt":"ä¸»è¦å®ç° callã€applyã€newã€bind ç­‰å®ç°æ€è·¯","text":"ä¸»è¦å®ç° callã€applyã€newã€bind ç­‰å®ç°æ€è·¯ call å’Œ apply çš„æ¨¡æ‹Ÿå®ç°callcall()åœ¨ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ this å€¼å’Œè‹¥å¹²ä¸ªæŒ‡å®šçš„å‚æ•°å€¼çš„å‰æä¸‹ï¼Œè°ƒç”¨æŸä¸ªå‡½æ•°æˆ–æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„è¯­æ³•å’Œä½œç”¨ä¸ apply() æ–¹æ³•ç±»ä¼¼ï¼Œåªæœ‰ä¸€ä¸ªåŒºåˆ«ï¼Œå°±æ˜¯ call() æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œè€Œ apply() æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„ã€‚ ä½¿ç”¨ call æ–¹æ³•è°ƒç”¨å‡½æ•°å¹¶ä¸”æŒ‡å®šä¸Šä¸‹æ–‡çš„ â€˜thisâ€™ 123456789var value = 1;var obj = &#123; value: 2&#125;;function foo() &#123; console.log(this.value);&#125;foo(); // 1foo.call(obj); // 2 ä½¿ç”¨ call æ–¹æ³•è°ƒç”¨çˆ¶æ„é€ å‡½æ•° 123456789function Person(name, age) &#123; this.name = name; this.age = age;&#125;function Tao(name, age, job) &#123; Person.call(this, name, age); this.job = job;&#125;var tao = new Tao(\"yangtao\", 27, \"Teacher\"); æ‰€ä»¥æˆ‘ä»¬æ¨¡æ‹Ÿçš„æ­¥éª¤å¯ä»¥åˆ†ä¸ºï¼š å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§ æ‰§è¡Œè¯¥å‡½æ•° åˆ é™¤è¯¥å‡½æ•° 123456789101112131415// ç±»ä¼¼äºï¼švar foo = &#123; value: 1, bar: function() &#123; return this.value; &#125;&#125;;foo.bar(); // 1// ç¬¬ä¸€æ­¥foo.fn = bar;// ç¬¬äºŒæ­¥foo.fn();// ç¬¬ä¸‰æ­¥delete foo.fn; ç¬¬ä¸€ç‰ˆï¼šç»‘å®š this 123456789101112131415161718192021222324Function.prototype.mycall = function(context) &#123; context.fn = this; context.fn(); delete context.fn;&#125;;// æµ‹è¯•ä¸€ä¸‹var foo = &#123; value: 1&#125;;function bar() &#123; console.log(this.value);&#125;bar.mycall(foo); // 1// å¦‚ä¸‹æ‰€ç¤ºvar foo = &#123; value: 1, bar: function() &#123; console.log(this.value); &#125;&#125;;foo.bar(); ç¬¬äºŒç‰ˆï¼šç»™å®šå‚æ•° 12345678910Function.prototype.mycall = function(context, name, age) &#123; context.fn = this; context.fn(); var args = []; for (var i = 1, l = arguments.length; i &lt; l; i++) &#123; args.push(\"arguments[\" + i + \"]\"); &#125; eval(\"context.fn(\" + args + \")\"); delete context.fn;&#125;; ç¬¬ä¸‰ç‰ˆï¼šä¼ å‚ä¸º null å’Œè¿”å›ç»“æœ 123456789101112131415Function.prototype.mycall = function(context) &#123; var context = context || window; //è·å–è°ƒç”¨callçš„å‡½æ•°ï¼Œç”¨thiså¯ä»¥è·å– context.fn = this; var args = []; // [\"arguments[1]\", \"arguments[2]\"] for (var i = 1, l = arguments.length; i &lt; l; i++) &#123; args.push(\"arguments[\" + i + \"]\"); &#125; // æŠŠä¼ ç»™callçš„å‚æ•°ä¼ é€’ç»™äº†context.fnå‡½æ•° // context.fn(args.join(',')); // context.fn(...args) var result = eval(\"context.fn(\" + args + \")\"); delete context.fn; return result;&#125;; ç¬¬å››ç‰ˆï¼šè€ƒè™‘ contextï¼Œä»¥åŠ context.fn çš„å¯èƒ½æ€§ 12345678910111213141516171819202122232425262728293031Function.prototype.mycall = function(context) &#123; // è¿™ä¸€æ­¥å¦‚æœä¸å¼ºåˆ¶æ˜¯ object ç±»å‹ï¼Œå¯ä»¥çœç•¥ if (typeof context != \"object\") &#123; throw new Error(\"Arguments error\"); &#125; var context = context || window; var args = [], reslut; if (\"fn\" in context &amp;&amp; context.hasOwnProperty(\"fn\")) &#123; var fn = context.fn; var fnFlag = true; &#125; context.fn = this; for (var i = 1, l = arguments.length; i &lt; l; i++) &#123; args.push(\"arguments[\" + i + \"]\"); &#125; result = eval(\"context.fn(\" + args + \")\"); if (fnFlag) &#123; context.fn = fn; &#125; else &#123; delete context.fn; &#125; return result;&#125;; applyapply()åŒcall()ï¼Œåªä¸è¿‡å°†å¤šä¸ªå‚æ•°å€¼ï¼Œä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥è€Œå·²ã€‚ ç”¨ apply å°†æ•°ç»„æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼š 1234var arr = [\"a\", \"b\"];var arr2 = [1, 2];arr.push.apply(arr, arr2);console.log(arr); // [\"a\", \"b\", 1, 2] ä½¿ç”¨ apply å’Œå†…ç½®å‡½æ•°ï¼š 1234567var nums = [1, 10, 3, 6, 2];var max = Math.max.apply(null, nums); // 10var min = Math.min.apply(null, nums); // 1// ES6 å†™æ³•ï¼švar max = Math.max(...nums); // 10var min = Math.min(...nums); // 1 12345678910111213141516171819Function.prototype.myapply = function(context, arr) &#123; var context = context || window; var reslut; context.fn = this; if (!arr) &#123; reslut = context.fn(); &#125; else &#123; var args = []; for (var i = 0, l = arr.length; i &lt; l; i++) &#123; args.push(\"arr[\" + i + \"]\"); &#125; eval(\"context.fn(\" + args + \")\"); &#125; delete context.fn; return reslut;&#125;; åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹ call å’Œ apply çš„æ¨¡æ‹Ÿå®ç° bind çš„æ¨¡æ‹Ÿå®ç° bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨ï¼Œbind()ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€ç³»åˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ï¼Œä½œä¸ºå®ƒçš„å‚æ•°ã€‚ â€” æ¥è‡ªäº MDN åˆ›å»ºç»‘å®šå‡½æ•° 1234567891011var value = 1;var obj = &#123; value: 2, getValue: function() &#123; return this.value; &#125;&#125;;var getV = obj.getValue;getV(); // 1var getV2 = obj.getValue.bind(obj);getV2(); // 2 é…åˆ setTimeout 12345678910111213var value = 1;function Fn() &#123; this.value = 2;&#125;Fn.prototype.getValue = function() &#123; // setTimeout(this.msg, 1000); // 1 setTimeout(this.msg.bind(this), 1000); //2&#125;;Fn.prototype.msg = function() &#123; console.log(\"value: \", this.value);&#125;;var myFn = new Fn();myFn.getValue(); ç”±æ­¤æˆ‘ä»¬å¯ä»¥é¦–å…ˆå¾—å‡º bind å‡½æ•°çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š è¿”å›ä¸€ä¸ªå‡½æ•° å¯ä»¥ä¼ å…¥å‚æ•° ç¬¬ä¸€ç‰ˆï¼šè¿”å›å‡½æ•° 1234567891011121314Function.prototype.mybind = function(context) &#123; var self = this; return function() &#123; return self.apply(context); &#125;;&#125;;var obj = &#123; value: 1&#125;;function foo() &#123; return this.value;&#125;var bindFoo = foo.mybind(obj);bindFoo(); //1 ç¬¬äºŒç‰ˆï¼šä¼ å‚ 1234567891011121314151617181920212223Function.prototype.mybind = function(context) &#123; var self = this; // è·å–é™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°çš„å‰©ä½™å‚æ•° var args = Array.prototype.slice.call(arguments, 1); return function() &#123; // è¿™é‡Œè·å–çš„æ˜¯è¿”å›å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•° var bindArgs = Array.prototype.slice.call(arguments); return self.apply(context, args.concat(bindArgs)); &#125;;&#125;;var obj = &#123; value: 1&#125;;function foo(name, age) &#123; console.log(this.value); console.log(name); console.log(age);&#125;var bindFoo = foo.mybind(obj, \"yang\");bindFoo(27);// 1// yang// 27 ç¬¬ä¸‰ç‰ˆï¼šæ„é€ å‡½æ•°æ•ˆæœ bind è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯:ä¸€ä¸ªç»‘å®šå‡½æ•°ä¹Ÿèƒ½ä½¿ç”¨ new æ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ï¼šè¿™ç§è¡Œä¸ºå°±åƒæŠŠåŸå‡½æ•°å½“æˆæ„é€ å™¨ã€‚æä¾›çš„ this å€¼è¢«å¿½ç•¥ï¼ŒåŒæ—¶è°ƒç”¨æ—¶çš„å‚æ•°è¢«æä¾›ç»™æ¨¡æ‹Ÿå‡½æ•°ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ bind è¿”å›çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œbind æ—¶æŒ‡å®šçš„ this å€¼ä¼šå¤±æ•ˆï¼Œä½†ä¼ å…¥çš„å‚æ•°ä¾ç„¶ç”Ÿæ•ˆã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹è¿”å›çš„å‡½æ•°çš„åŸå‹æ¥å®ç°ï¼š 123456789101112131415161718Function.prototype.mybind = function(context) &#123; var self = this; var args = Array.prototype.slice.call(arguments, 1); var fBound = function() &#123; var bindArgs = Array.prototype.slice.call(arguments); // å½“ä½œä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œthis æŒ‡å‘å®ä¾‹ï¼Œæ­¤æ—¶ç»“æœä¸º trueï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘è¯¥å®ä¾‹ï¼Œå¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼ // ä»¥ä¸Šé¢çš„æ˜¯ demo ä¸ºä¾‹ï¼Œå¦‚æœæ”¹æˆ `this instanceof fBound ? null : context`ï¼Œå®ä¾‹åªæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°† null æ”¹æˆ this ï¼Œå®ä¾‹ä¼šå…·æœ‰ habit å±æ€§ // å½“ä½œä¸ºæ™®é€šå‡½æ•°æ—¶ï¼Œthis æŒ‡å‘ windowï¼Œæ­¤æ—¶ç»“æœä¸º falseï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context return self.apply( this instanceof fBound ? this : context, args.concat(bindArgs) ); &#125;; // ä¿®æ”¹è¿”å›å‡½æ•°çš„ prototype ä¸ºç»‘å®šå‡½æ•°çš„ prototypeï¼Œå®ä¾‹å°±å¯ä»¥ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹ä¸­çš„å€¼ fBound.prototype = this.prototype; return fBound;&#125;; ä¼˜åŒ–ï¼š 1234567891011121314151617181920212223Function.prototype.mybind = function(context) &#123; if (typeof this !== \"function\") &#123; throw new Error( \"Function.prototype.bind - what is trying to be bound is not callable\" ); &#125; var self = this; var args = Array.prototype.slice.call(arguments, 1); var fNOP = function() &#123;&#125;; var fBound = function() &#123; var bindArgs = Array.prototype.slice.call(arguments); return self.apply( this instanceof fNOP ? this : context, args.concat(bindArgs) ); &#125;; fNOP.prototype = this.prototype; fBound.prototype = new fNOP(); return fBound;&#125;; é‚£åˆ«å¿˜äº†åšä¸ªå…¼å®¹ï¼š 123Function.prototype.bind = Function.prototype.bind || function () &#123; â€¦â€¦&#125;; åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹ bind çš„æ¨¡æ‹Ÿå®ç° new çš„æ¨¡æ‹Ÿå®ç°new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»å‹ä¹‹ä¸€ã€‚ 12345678910111213141516function Person(name, age) &#123; this.name = name; this.age = age; this.habit = \"Games\";&#125;Person.prototype.getName = function() &#123; console.log(\"I am \" + this.name);&#125;;var person1 = new Person(\"Yang\", \"27\");console.log(person1.name); // Yangconsole.log(person1.habit); // Gamesperson1.getName(); // I am Yang ç”±ä¸Šå¯çŸ¥ï¼Œå®ä¾‹ person1 å¯ä»¥ï¼š è®¿é—®åˆ° Person æ„é€ å‡½æ•°é‡Œçš„å±æ€§ è®¿é—®åˆ° Person.prototype ä¸­çš„å±æ€§ åˆæ­¥å®ç°åˆ†æï¼š å› ä¸º new çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æ¨¡æ‹Ÿå®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿè¦å»ºç«‹ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡ä¼šå…·æœ‰æ„é€ å‡½æ•°é‡Œçš„å±æ€§ã€‚ å®ä¾‹çš„ __proto__ å±æ€§ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„ prototypeï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºå»ºç«‹èµ·è¿™æ ·çš„å…³ç³»ï¼Œå®ä¾‹å¯ä»¥è®¿é—®åŸå‹ä¸Šçš„å±æ€§ã€‚ 1234567891011121314151617function objectFactory() &#123; // ç”¨new Object() çš„æ–¹å¼æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡ obj var obj = new Object(); // å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä¼ å…¥çš„æ„é€ å‡½æ•° // æ­¤å¤–å› ä¸º shift ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥ arguments ä¼šè¢«å»é™¤ç¬¬ä¸€ä¸ªå‚æ•° var Constructor = [].shift.call(arguments); // å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§ obj.__proto__ = Constructor.prototype; // ä½¿ç”¨ applyï¼Œæ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§ Constructor.apply(obj, arguments); // è¿”å› obj return obj;&#125; è¿”å›å€¼æ•ˆæœå®ç°éœ€è¦åˆ¤æ–­è¿”å›çš„å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬è¯¥è¿”å›ä»€ä¹ˆå°±è¿”å›ä»€ä¹ˆ 12345678910function objectFactory() &#123; var obj = new Object(); var Constructor = [].shift.call(arguments); obj.__proto__ = Constructor.prototype; var ret = Constructor.apply(obj, arguments); return typeof ret === \"object\" ? ret : obj;&#125; åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹ new çš„æ¨¡æ‹Ÿå®ç° ç±»æ•°ç»„å¯¹è±¡ä¸ argumentsç±»æ•°ç»„å¯¹è±¡ä»è¯»å†™ã€è·å–é•¿åº¦ã€éå†ä¸‰ä¸ªæ–¹é¢çœ‹ï¼Œå’Œæ•°ç»„è²Œä¼¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ï¼Œéœ€è¦å€ŸåŠ© call æˆ– applyï¼š 12345678910var likeArr = &#123; 0: \"a\", 1: \"b\", 2: \"c\", length: 3&#125;;Array.prototype.slice.call(likeArr, 0); // [\"a\", \"b\", \"c\"]Array.prototype.join.call(likeArr, \"&amp;\"); // \"a&amp;b&amp;c\"Array.prototype.map.call(likeArr, item =&gt; item.toUpperCase()); // [\"A\", \"B\", \"C\"] ç±»æ•°ç»„è½¬æ•°ç»„12345678// sliceArray.prototype.slice.call(likeArr);// ES6Array.from(likeArr);// applyArray.prototype.concat.apply([], likeArr);// spliceï¼Œä¼šæ”¹å˜ linkeArrArray.prototype.splice.call(likeArr, 0); ArgumentsArguments å¯¹è±¡åªå®šä¹‰åœ¨å‡½æ•°ä½“ä¸­ï¼ŒåŒ…æ‹¬äº†å‡½æ•°çš„å‚æ•°å’Œå…¶ä»–å±æ€§ã€‚åœ¨å‡½æ•°ä½“ä¸­ï¼Œarguments æŒ‡ä»£è¯¥å‡½æ•°çš„ Arguments å¯¹è±¡ã€‚ Arguments å¯¹è±¡çš„ length å±æ€§ï¼Œè¡¨ç¤ºå®å‚çš„é•¿åº¦ã€‚ Arguments å¯¹è±¡çš„ callee å±æ€§ï¼Œé€šè¿‡å®ƒå¯ä»¥è°ƒç”¨å‡½æ•°è‡ªèº«ã€‚ å°†å‚æ•°ä»ä¸€ä¸ªå‡½æ•°ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ï¼š 123456789// ä½¿ç”¨ apply å°† foo çš„å‚æ•°ä¼ é€’ç»™ barfunction foo() &#123; bar.apply(this, arguments);&#125;function bar(a, b, c) &#123; console.log(a, b, c);&#125;foo(1, 2, 3); ä½¿ç”¨ ES6 çš„...è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾è½¬æˆæ•°ç»„ã€‚ 12345function func(...arguments) &#123; console.log(arguments); // [1, 2, 3]&#125;func(1, 2, 3); arguments çš„åº”ç”¨å…¶å®å¾ˆå¤šï¼Œå¦‚æœè¦æ€»ç»“è¿™äº›åœºæ™¯çš„è¯ï¼Œæš‚æ—¶èƒ½æƒ³åˆ°çš„åŒ…æ‹¬ï¼š å‚æ•°ä¸å®šé•¿ å‡½æ•°æŸ¯é‡ŒåŒ– é€’å½’è°ƒç”¨ å‡½æ•°é‡è½½ åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹ç±»æ•°ç»„å¯¹è±¡ä¸ arguments","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å­¦ä¹ å†´ç¾½çš„ JS æ·±å…¥ç³»åˆ—Â·ä¸Šç¯‡","slug":"js-series-1","date":"2019-11-27T12:59:31.000Z","updated":"2020-04-01T05:39:11.433Z","comments":true,"path":"2019/11/27/js-series-1/","link":"","permalink":"https://www.yangtao.site/2019/11/27/js-series-1/","excerpt":"ä¸»è¦è®²è¿°ä»€ä¹ˆæ˜¯åŸå‹ï¼Œä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Œä»¥åŠåˆ†åˆ«æ€»ç»“æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸‰ä¸ªé‡è¦å±æ€§ï¼šå˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ã€thisï¼Œè¿˜æœ‰é—­åŒ…ç­‰éš¾ä»¥ç†è§£çš„çŸ¥è¯†ç‚¹ã€‚","text":"ä¸»è¦è®²è¿°ä»€ä¹ˆæ˜¯åŸå‹ï¼Œä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Œä»¥åŠåˆ†åˆ«æ€»ç»“æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸‰ä¸ªé‡è¦å±æ€§ï¼šå˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ã€thisï¼Œè¿˜æœ‰é—­åŒ…ç­‰éš¾ä»¥ç†è§£çš„çŸ¥è¯†ç‚¹ã€‚ ä»åŸå‹åˆ°åŸå‹é“¾å›¾ç¤ºæ€»ç»“prototypeï¼šæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸ºè°ƒç”¨è¯¥å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹ __proto__ï¼šæ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé™¤ nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ªå±æ€§ï¼š__proto__ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ constructorï¼šæ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•° Objectï¼šåŸå‹å¯¹è±¡æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œæœ€åObject.prototype.__proto__ = null åŸå‹é“¾ï¼šç”±ç›¸äº’å…³è”çš„åŸå‹(proto)ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ï¼Œå³å›¾ä¸­è“è‰²çš„è¿™æ¡çº¿ ä»£ç æ€»ç»“æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ 1234567function Person() &#123;&#125;Person.prototype.name = \"Jake\";var person1 = new Person();var person2 = new Person();person1.name; // 'Jake'person2.name; // 'Jake' æ¯ä¸€ä¸ª JavaScript å¯¹è±¡(é™¤äº† null )éƒ½å…·æœ‰çš„ä¸€ä¸ªå±æ€§ï¼Œå«protoï¼Œè¿™ä¸ªå±æ€§ä¼šæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ã€‚ æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼ŒæŒ‡å‘äº†è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹ person.proto 1person.__proto__ === Person.prototype; // true æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•° 1Person.prototype.constructor === Person; // true åŸå‹å¯¹è±¡å°±æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„ 1Person.prototype.__proto__ === Object.prototype; // true Object.prototype.proto çš„å€¼ä¸º nullï¼Œå³ Object.prototype æ²¡æœ‰åŸå‹ï¼Œç»ˆæ­¢æŸ¥æ‰¾ 1Object.prototype.__proto__; // null åŸæ–‡åœ°å€ï¼šJavaScript æ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸjavascript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸ(lexical scoping)ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š è¯æ³•ä½œç”¨åŸŸï¼Œå³é™æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº† åŠ¨æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š 123456789var scope = \"global scope\";function checkscope() &#123; var scope = \"local scope\"; function f() &#123; return scope; &#125; return f();&#125;checkscope(); // \"local scope\" 123456789var scope = \"global scope\";function checkscope() &#123; var scope = \"local scope\"; function f() &#123; return scope; &#125; return f;&#125;checkscope()(); // \"local scope\" å› ä¸º JavaScript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåŸºäºå‡½æ•°åˆ›å»ºçš„ä½ç½®ã€‚ è€Œå¼•ç”¨ã€ŠJavaScript æƒå¨æŒ‡å—ã€‹çš„å›ç­”å°±æ˜¯ï¼š JavaScript å‡½æ•°çš„æ‰§è¡Œç”¨åˆ°äº†ä½œç”¨åŸŸé“¾ï¼Œè¿™ä¸ªä½œç”¨åŸŸé“¾æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™åˆ›å»ºçš„ã€‚åµŒå¥—çš„å‡½æ•° f() å®šä¹‰åœ¨è¿™ä¸ªä½œç”¨åŸŸé“¾é‡Œï¼Œå…¶ä¸­çš„å˜é‡ scope ä¸€å®šæ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ç®¡ä½•æ—¶ä½•åœ°æ‰§è¡Œå‡½æ•° f()ï¼Œè¿™ç§ç»‘å®šåœ¨æ‰§è¡Œ f() æ—¶ä¾ç„¶æœ‰æ•ˆã€‚ åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆJavaScript çš„å¯æ‰§è¡Œä»£ç (executable code)çš„ç±»å‹æœ‰å“ªäº›ï¼š å…¨å±€ä»£ç  å‡½æ•°ä»£ç  eval ä»£ç  å‡½æ•°é‚£ä¹ˆå¤šï¼Œå¦‚ä½•ç®¡ç†åˆ›å»ºçš„é‚£ä¹ˆå¤šæ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ æ‰€ä»¥ JavaScript å¼•æ“åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution context stackï¼ŒECSï¼‰æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡(execution context)ï¼Œå¹¶ä¸”å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(Execution context stack, ESC) å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä¼šå°†å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡ºã€‚ å…¶å®ï¼Œè¿™é‡Œå°±ä¼šè”æƒ³åˆ° push pop æ ˆå †(åè¿›å…ˆå‡º-LIFO)ã€‚ æ¨¡æ‹Ÿæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼š 12345// æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ˜¯ä¸€ä¸ªæ•°ç»„ ECStackï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºç»“æŸçš„æ—¶å€™ï¼Œæ‰ä¼šè¢«æ¸…ç©ºECStack = [ // ç¨‹åºç»“æŸä¹‹å‰ï¼Œ ECStack æœ€åº•éƒ¨æ°¸è¿œæœ‰ä¸ª globalContext globalContext // å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡]; è¿è¡Œå¦‚ä¸‹ä»£ç ï¼š 12345678910111213function fun3() &#123; console.log(\"fun3\");&#125;function fun2() &#123; fun3();&#125;function fun1() &#123; fun2();&#125;fun1(); ä¼ªä»£ç æ¨¡æ‹Ÿæ‰§è¡Œï¼š(æ ¹æ® push pop åŸç†ï¼Œåè¿›å…ˆå‡º) 1234567ECStack.push(&lt;fun1&gt; functionContext); // å‹å…¥fun1ä¸Šä¸‹æ–‡ï¼Œå‘ç°äº† fun2 è¢«è°ƒç”¨ECStack.push(&lt;fun2&gt; functionContext); // ç»§ç»­å‹å…¥fun2ä¸Šä¸‹æ–‡ï¼Œå‘ç°äº† fun3 è¢«è°ƒç”¨ECStack.push(&lt;fun3&gt; functionContext); // ç»§ç»­å‹å…¥fun3ä¸Šä¸‹æ–‡ï¼Œå¹¶æ‰§è¡Œ fun3ECStack.pop(); // fun3 æ‰§è¡Œç»“æŸï¼Œå¹¶å¼¹å‡ºECStack.pop(); // fun2 æ‰§è¡Œç»“æŸï¼Œå¹¶å¼¹å‡ºECStack.pop(); // fun1 æ‰§è¡Œç»“æŸï¼Œå¹¶å¼¹å‡º// javascriptæ¥ç€æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œä½†æ˜¯ECStackåº•å±‚æ°¸è¿œæœ‰ä¸ªglobalContext åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ å˜é‡å¯¹è±¡1ã€å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šå…¨å±€å¯¹è±¡ 2ã€å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šåªåŒ…æ‹¬Argumentså¯¹è±¡ 3ã€è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼ 4ã€ä»£ç æ‰§è¡Œé˜¶æ®µï¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼ æ‰§è¡Œè¿‡ç¨‹æ‰§è¡Œä¸Šä¸‹æ–‡è¿‡ç¨‹å¯åˆ†ä¸ºï¼šè¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œä»£ç æ‰§è¡Œï¼ˆåˆ†æ-æ‰§è¡Œï¼‰ 123456789function foo(a) &#123; var b = 2; function c() &#123;&#125; var d = function() &#123;&#125;; b = 3;&#125;foo(1); è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡è¿‡ç¨‹ï¼š 12345678910AO = &#123; arguments: &#123; 0: 1, length: 1 &#125;, a: 1, b: undefined, c: reference function c() &#123;&#125;, d: undefined&#125; ä»£ç æ‰§è¡Œé˜¶æ®µï¼š 12345678910AO = &#123; arguments: &#123; 0: 1, length: 1 &#125;, a: 1, b: 3, c: reference function c() &#123;&#125;, d: reference to FunctionExpression \"d\"&#125; æ€»ç»“ï¼šæœªè¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹å‰ï¼Œå˜é‡å¯¹è±¡(VO)ä¸­çš„å±æ€§éƒ½ä¸èƒ½è®¿é—®ï¼ä½†æ˜¯è¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹åï¼Œå˜é‡å¯¹è±¡(VO)è½¬å˜ä¸ºäº†æ´»åŠ¨å¯¹è±¡(AO)ï¼Œé‡Œé¢çš„å±æ€§éƒ½èƒ½è¢«è®¿é—®äº†ï¼Œç„¶åå¼€å§‹è¿›è¡Œæ‰§è¡Œé˜¶æ®µçš„æ“ä½œã€‚å®ƒä»¬å…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤„äºæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒç”Ÿå‘½å‘¨æœŸã€‚ æœ€åï¼Œå‡½æ•°æ˜¯â€œç¬¬ä¸€ç­‰å…¬æ°‘â€ï¼Œè®°ä½è¿™ä¸ªï¼Œå˜é‡åç§°å’Œå‡½æ•°åç§°ç›¸åŒçš„å£°æ˜ï¼Œä¼˜å…ˆæ‰§è¡Œå‡½æ•°å£°æ˜ã€‚ åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹å˜é‡å¯¹è±¡ ä½œç”¨åŸŸå¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š å˜é‡å¯¹è±¡(Variable objectï¼ŒVO) ä½œç”¨åŸŸé“¾(Scope chain) this ä¸‹é¢è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªå‡½æ•°çš„åˆ›å»ºå’Œæ¿€æ´»ä¸¤ä¸ªæ—¶æœŸæ¥è®²è§£ä½œç”¨åŸŸé“¾æ˜¯å¦‚ä½•åˆ›å»ºå’Œå˜åŒ–çš„ã€‚ å‡½æ•°åˆ›å»ºç”±ä¸ŠèŠ‚å†…å®¹å¯çŸ¥ï¼šå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚ è¿™æ˜¯å› ä¸ºå‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ [[scope]]ï¼Œå½“å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œå°±ä¼šä¿å­˜æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡åˆ°å…¶ä¸­ï¼Œä½ å¯ä»¥ç†è§£ [[scope]] å°±æ˜¯æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ï¼Œä½†æ˜¯æ³¨æ„ï¼š[[scope]] å¹¶ä¸ä»£è¡¨å®Œæ•´çš„ä½œç”¨åŸŸé“¾ï¼ å¦‚ï¼š 123456789101112function foo() &#123; function bar() &#123;&#125;&#125;// å„è‡ªçš„ [[scope]]:foo.[[scope]] = [ globalContext.VO];bar.[[scope]] = [ fooContext.AO // ä¿å­˜çˆ¶å˜é‡ globalContext.VO] å‡½æ•°æ¿€æ´»å½“å‡½æ•°æ¿€æ´»æ—¶ï¼Œè¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œåˆ›å»º VO/AO åï¼Œå°±ä¼šå°†æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨é“¾çš„å‰ç«¯ã€‚ è¿™æ—¶å€™æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å‘½åä¸º Scopeï¼š 1Scope = [AO].concat([[Scope]]); è‡³æ­¤ï¼Œä½œç”¨åŸŸé“¾åˆ›å»ºå®Œæ¯•ã€‚ ç»¼åˆåˆ†æä»¥ä¸‹é¢çš„ä¾‹å­ä¸ºä¾‹ï¼Œç»“åˆç€ä¹‹å‰è®²çš„å˜é‡å¯¹è±¡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä½œç”¨åŸŸé“¾å’Œå˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š 123456var scope = \"global scope\";function checkscope() &#123; var scope2 = \"local scope\"; return scope2;&#125;checkscope(); æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š 1.checkscope å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° å†…éƒ¨å±æ€§[[scope]] 123checkscope.[[scope]] = [ globalContext.VO]; 2.æ‰§è¡Œ checkscope å‡½æ•°ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ 1ECStack = [checkscopeContext, globalContext]; 3.checkscope å‡½æ•°å¹¶ä¸ç«‹åˆ»æ‰§è¡Œï¼Œå¼€å§‹åšå‡†å¤‡å·¥ä½œï¼Œç¬¬ä¸€æ­¥ï¼šå¤åˆ¶å‡½æ•°[[scope]]å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾ 123checkscopeContext = &#123; Scope: checkscope.[[scope]],&#125; 4.ç¬¬äºŒæ­¥ï¼šç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œéšååˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼ŒåŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ 123456789checkscopeContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, scope2: undefined &#125;ï¼Œ Scope: checkscope.[[scope]],&#125; 5.ç¬¬ä¸‰æ­¥ï¼šå°†æ´»åŠ¨å¯¹è±¡å‹å…¥ checkscope ä½œç”¨åŸŸé“¾é¡¶ç«¯ 123456789checkscopeContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, scope2: undefined &#125;, Scope: [AO, [[Scope]]]&#125;; 6.å‡†å¤‡å·¥ä½œåšå®Œï¼Œå¼€å§‹æ‰§è¡Œå‡½æ•°ï¼Œéšç€å‡½æ•°çš„æ‰§è¡Œï¼Œä¿®æ”¹ AO çš„å±æ€§å€¼ 123456789checkscopeContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, scope2: \"local scope\" &#125;, Scope: [AO, [[Scope]]]&#125;; 7.æŸ¥æ‰¾åˆ° scope2 çš„å€¼ï¼Œè¿”å›åå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º 1ECStack = [globalContext]; åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹ä½œç”¨åŸŸé“¾ ä» ECMAScript è§„èŒƒè§£è¯» this ä½œè€…æ›°ï¼šåœ¨å†™æ–‡ç« ä¹‹åˆï¼Œæˆ‘å°±é¢ä¸´ç€è¿™äº›é—®é¢˜ï¼Œæœ€åè¿˜æ˜¯æ”¾å¼ƒä»å¤šä¸ªæƒ…å½¢ä¸‹ç»™å¤§å®¶è®²è§£ this æŒ‡å‘çš„æ€è·¯ï¼Œè€Œæ˜¯è¿½æ ¹æº¯æºçš„ä» ECMASciript è§„èŒƒè®²è§£ this çš„æŒ‡å‘ï¼Œå°½ç®¡ä»è¿™ä¸ªè§’åº¦å†™èµ·æ¥å’Œè¯»èµ·æ¥éƒ½æ¯”è¾ƒåƒåŠ›ï¼Œä½†æ˜¯ä¸€æ—¦å¤šè¯»å‡ éï¼Œæ˜ç™½åŸç†ï¼Œç»å¯¹ä¼šç»™ä½ ä¸€ä¸ªå…¨æ–°çš„è§†è§’çœ‹å¾… this ã€‚ 12345678910111213141516171819var value = 1;var foo = &#123; value: 2, bar: function() &#123; return this.value; &#125;&#125;;//ç¤ºä¾‹1console.log(foo.bar());//ç¤ºä¾‹2console.log(foo.bar());//ç¤ºä¾‹3console.log((foo.bar = foo.bar)());//ç¤ºä¾‹4console.log((false || foo.bar)());//ç¤ºä¾‹5console.log((foo.bar, foo.bar)()); ä½œè€…ä¸»è¦ä» ECMASciript è§„èŒƒè®²è§£ this çš„æŒ‡å‘ï¼Œè®²è§£äº†ç¤ºä¾‹ 3 ä¸­æ˜¯å¦‚ä½•è·å– this æŒ‡å‘çš„ï¼Œæ¯æ¬¡é˜…è¯»éƒ½ä¼šæœ‰ä¸åŒçš„æ”¶è·ï¼Œä¹Ÿæ­£å¦‚ä½œè€…æ‰€è¯´ï¼Œå¸Œæœ›èƒ½æ‰“å¼€ this æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚ åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹ä» ECMAScript è§„èŒƒè§£è¯» this è¡¥å……ä¸‹æˆ‘ä»¬ä½¿ç”¨åœºæ™¯ä¸‹çš„ this æŒ‡å‘ï¼Œå¦‚ï¼š 1234567var object = &#123;&#125;;var obj = &#123; a: 1, b: function() &#123; console.log(this); &#125;&#125;; ä½œä¸ºå¯¹è±¡è°ƒç”¨æ—¶ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡ obj.b(); ï¼Œthis æŒ‡å‘ obj ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œvar b = obj.b; b(); ï¼Œthis æŒ‡å‘å…¨å±€ window ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼Œ var b = new Fun(); ï¼Œthis æŒ‡å‘å½“å‰å®ä¾‹å¯¹è±¡ ä½œä¸º callã€apply è°ƒç”¨ï¼Œ obj.b.apply(object, []); ï¼Œthis æŒ‡å‘å½“å‰çš„ object ä½œä¸º bind è°ƒç”¨ï¼Œvar foo = obj.b.bind(object);foo()ï¼Œthis æ°¸ä¹…è¢«ç»‘å®šåˆ°äº† object ä½œä¸ºç®­å¤´å‡½æ•°ä½¿ç”¨ï¼Œthis ä¸å°é—­è¯æ³•ç¯å¢ƒçš„ this ä¿æŒä¸€è‡´ ä½œä¸ºDOM äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œthis æŒ‡å‘è§¦å‘äº‹ä»¶çš„å…ƒç´  åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœ this æ²¡æœ‰è¢«æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰å®šä¹‰ï¼Œé‚£å®ƒå°†ä¿æŒä¸º undefinedã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š å˜é‡å¯¹è±¡(Variable objectï¼ŒVO) ä½œç”¨åŸŸé“¾(Scope chain) this åˆ†æç¬¬ä¸€æ®µä»£ç 123456789var scope = \"global scope\";function checkscope() &#123; var scope = \"local scope\"; function f() &#123; return scope; &#125; return f();&#125;checkscope(); 1.æ‰§è¡Œå…¨å±€ä»£ç ï¼Œåˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå…¨å±€ä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ 1ECStack = [globalContext]; 2.å…¨å±€ä¸Šä¸‹æ–‡åˆå§‹åŒ– 12345globalContext = &#123; VO: [global], Scope: [globalContext.VO], this: globalContext.VO&#125;; åˆå§‹åŒ–çš„åŒæ—¶ï¼Œcheckscope å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ°å‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]] 1checkscope.[[scope]] = [globalContext.VO] 3.æ‰§è¡Œ checkscope å‡½æ•°ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ 1ECStack = [checkscope, globalContext]; 4.checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–ï¼š å¤åˆ¶å‡½æ•° [[scope]] å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾ï¼Œ ç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œ åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼Œå³åŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ï¼Œ å°†æ´»åŠ¨å¯¹è±¡å‹å…¥ checkscope ä½œç”¨åŸŸé“¾é¡¶ç«¯ã€‚ åŒæ—¶ f å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° f å‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]. 1234567891011checkscopeContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, scope: undefined, f: reference to function f()&#123;&#125; &#125;, Scope: [AO, globalContext.VO], this: undefined&#125; 5.æ‰§è¡Œ f å‡½æ•°ï¼Œåˆ›å»º f å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œf å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ 1ECStack = [fContext, checkscope, globalContext]; 6.f å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ– 123456789fContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125; &#125;, Scope: [AO, checkscopeContext.AO, globalContext.VO], this: undefined&#125;; 7.f å‡½æ•°æ‰§è¡Œï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ scope å€¼ï¼Œè¿”å› scope å€¼ï¼Œè¿™é‡Œä¹‹æ‰€ä»¥èƒ½å¤Ÿè®¿é—®åˆ°scope 8.f å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œf å‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º 9.checkscope å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œcheckscope æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º 1ECStack = [globalContext]; åˆ†æç¬¬äºŒæ®µä»£ç 123456789var scope = \"global scope\";function checkscope() &#123; var scope = \"local scope\"; function f() &#123; return scope; &#125; return f;&#125;checkscope()(); 1.æ‰§è¡Œå…¨å±€ä»£ç ï¼Œåˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå…¨å±€ä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå¹¶åˆå§‹åŒ–å…¨å±€ä¸Šä¸‹æ–‡ 123456ECStack = [globalContext];globalContext = &#123; VO: [global], Scope: [globalContext.VO], this: globalContext.VO&#125;; åˆå§‹åŒ–çš„åŒæ—¶ï¼Œcheckscope å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ°å‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]ï¼š 1checkscope.[[scope]] = [globalContext.VO]; 2.æ‰§è¡Œ checkscope å‡½æ•°ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå¹¶åˆå§‹åŒ–å‡½æ•°ä¸Šä¸‹æ–‡ 123456789101112ECStack = [checkscopeContext, globalContext];checkscopeContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, scope: undefined, f: reference to function f()&#123;&#125; &#125;, Scope: [AO, globalContext.VO], this: undefined&#125; åŒæ—¶ f å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° f å‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]ï¼š 1f.[[scope]] = [AO, checkscopeContext.AO, globalContext.VO]; 3.checkscope å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œcheckscope æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º 1ECStack = [globalContext]; 4.æ‰§è¡Œ f å‡½æ•°ï¼Œåˆ›å»º f å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå°†å…¶åˆå§‹åŒ– 12345678910ECStack = [fContext;, globalContext];fContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125; &#125;, Scope: [AO, checkscopeContext.AO, globalContext.VO], this: undefined&#125;; 5.f å‡½æ•°æ‰§è¡Œï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ scope å€¼ï¼Œè¿”å› scope å€¼ã€‚æ­£æ˜¯å› ä¸º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–æ—¶ï¼Œf å‡½æ•°åŒæ—¶è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° f å‡½æ•°çš„å†…éƒ¨å±æ€§[[scope]]ï¼Œæ‰€ä»¥å³ä½¿checkscopeå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¢«å¼¹å‡ºæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œä½†æ˜¯checkscopeContext.AO ä¾ç„¶å­˜åœ¨äº f å‡½æ•°ç»´æŠ¤çš„[scope]]ï¼š 123fContext = &#123; Scope: [AO, checkscopeContext.AO, globalContext.VO],&#125; æ‰€ä»¥ï¼Œé—­åŒ…çš„æ¦‚å¿µäº§ç”Ÿäº†ï¼Œå®šä¹‰ï¼š å³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œå®ƒä»ç„¶å­˜åœ¨ï¼ˆæ¯”å¦‚ï¼Œå†…éƒ¨å‡½æ•°ä»çˆ¶å‡½æ•°ä¸­è¿”å›ï¼‰ åœ¨ä»£ç ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡ 6.f å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œf å‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º 1ECStack = [globalContext]; åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡ é—­åŒ…MDN å¯¹é—­åŒ…çš„å®šä¹‰ä¸ºï¼š é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚ é‚£ä»€ä¹ˆæ˜¯è‡ªç”±å˜é‡å‘¢ï¼Ÿ è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‡½æ•°å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºé—­åŒ…å…±æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼š é—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡ ECMAScriptä¸­ï¼Œé—­åŒ…æŒ‡çš„æ˜¯ï¼š ä»ç†è®ºè§’åº¦ï¼šæ‰€æœ‰çš„å‡½æ•°ã€‚å› ä¸ºå®ƒä»¬éƒ½åœ¨åˆ›å»ºçš„æ—¶å€™å°±å°†ä¸Šå±‚ä¸Šä¸‹æ–‡çš„æ•°æ®ä¿å­˜èµ·æ¥äº†ã€‚å“ªæ€•æ˜¯ç®€å•çš„å…¨å±€å˜é‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå‡½æ•°ä¸­è®¿é—®å…¨å±€å˜é‡å°±ç›¸å½“äºæ˜¯åœ¨è®¿é—®è‡ªç”±å˜é‡ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨æœ€å¤–å±‚çš„ä½œç”¨åŸŸã€‚ ä»å®è·µè§’åº¦ï¼šä»¥ä¸‹å‡½æ•°æ‰ç®—æ˜¯é—­åŒ…ï¼š å³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œå®ƒä»ç„¶å­˜åœ¨ï¼ˆæ¯”å¦‚ï¼Œå†…éƒ¨å‡½æ•°ä»çˆ¶å‡½æ•°ä¸­è¿”å›ï¼‰ åœ¨ä»£ç ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡ é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚ è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚ é‚£ä¹ˆï¼Œé—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡ã€‚ çœ‹è¿™é“åˆ·é¢˜å¿…åˆ·ï¼Œé¢è¯•å¿…è€ƒçš„é—­åŒ…é¢˜ï¼š 1234567891011var data = [];for (var i = 0; i &lt; 3; i++) &#123; data[i] = function() &#123; console.log(i); &#125;;&#125;data[0]();data[1]();data[2](); æ‰§è¡Œdata[0]()ï¼Œdata[1]()ï¼Œdata[2]()æ—¶ï¼Œi=3,æ‰€ä»¥éƒ½æ‰“å° 3 è®©æˆ‘ä»¬æ”¹æˆé—­åŒ…çœ‹çœ‹ï¼š 123456789var data = [];for (var i = 0; i &lt; 3; i++) &#123; data[i] = (function(i) &#123; return function() &#123; console.log(i); &#125;; &#125;)(i);&#125; åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹é—­åŒ… å‚æ•°æŒ‰å€¼ä¼ é€’ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ â€” ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡-ç¬¬ä¸‰ç‰ˆã€‹ å³ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚ ä½†æ˜¯é€šä¿—åœ°ç†è§£ï¼Œå‚æ•°å¦‚æœæ˜¯åŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå‚æ•°å¦‚æœæ˜¯å¼•ç”¨ç±»å‹å°±æŒ‰å…±äº«ä¼ é€’ã€‚ å…±äº«ä¼ é€’æ˜¯æŒ‡ï¼Œåœ¨ä¼ é€’å¯¹è±¡çš„æ—¶å€™ï¼Œä¼ é€’å¯¹è±¡çš„å¼•ç”¨çš„å‰¯æœ¬ã€‚ ä¾‹å­ä¸€ï¼š 1234567var value = 1;function foo(v) &#123; v = 2; console.log(v); //2&#125;foo(value);console.log(value); // 1 å†…å­˜åˆ†å¸ƒå¦‚ä¸‹ï¼š æ”¹å˜å‰ï¼š \b æ ˆå†…å­˜ æ ˆå†…å­˜ å †å†…å­˜ value 1 v 1 æ”¹å˜åï¼š \b æ ˆå†…å­˜ æ ˆå†…å­˜ å †å†…å­˜ value 1 v 2 ä¾‹å­äºŒï¼š 123456789var obj = &#123; value: 1&#125;;function foo(o) &#123; o.value = 2; console.log(o.value); //2&#125;foo(obj);console.log(obj.value); // 2 å†…å­˜åˆ†å¸ƒå¦‚ä¸‹ï¼š æ”¹å˜å‰ï¼š \b æ ˆå†…å­˜ æ ˆå†…å­˜ å †å†…å­˜ objï¼Œo æŒ‡é’ˆåœ°å€ {value: 1} æ”¹å˜åï¼š \b æ ˆå†…å­˜ æ ˆå†…å­˜ å †å†…å­˜ objï¼Œo æŒ‡é’ˆåœ°å€ {value: 2} ä¾‹å­ä¸‰ï¼š 123456789var obj = &#123; value: 1&#125;;function foo(o) &#123; o = 2; console.log(o); //2&#125;foo(obj);console.log(obj.value); // 1 å†…å­˜åˆ†å¸ƒå¦‚ä¸‹ï¼š æ”¹å˜å‰ï¼š \b æ ˆå†…å­˜ æ ˆå†…å­˜ å †å†…å­˜ objï¼Œo æŒ‡é’ˆåœ°å€ {value: 1} æ”¹å˜åï¼š \b æ ˆå†…å­˜ æ ˆå†…å­˜ å †å†…å­˜ obj æŒ‡é’ˆåœ°å€ {value: 1} o 2 ä»¥ä¸Šè§£é‡Šæ¥è‡ªï¼šsunsl516 commented on 2 Jun 2017. åŸæ–‡é“¾æ¥ï¼šJavaScript æ·±å…¥ä¹‹å‚æ•°æŒ‰å€¼ä¼ é€’","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å¸¸è§çš„ web æ”»å‡»æ–¹å¼","slug":"web-safety","date":"2019-11-12T14:57:11.000Z","updated":"2019-12-03T10:22:15.596Z","comments":true,"path":"2019/11/12/web-safety/","link":"","permalink":"https://www.yangtao.site/2019/11/12/web-safety/","excerpt":"SQL æ³¨å…¥ SQL æ³¨å…¥ï¼ˆSQLiï¼‰æ˜¯ä¸€ç§æ³¨å…¥æ”»å‡»ï¼Œï¼Œå¯ä»¥æ‰§è¡Œæ¶æ„ SQL è¯­å¥ã€‚å®ƒé€šè¿‡å°†ä»»æ„ SQL ä»£ç æ’å…¥æ•°æ®åº“æŸ¥è¯¢ï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿå®Œå…¨æ§åˆ¶ Web åº”ç”¨ç¨‹åºåé¢çš„æ•°æ®åº“æœåŠ¡å™¨ã€‚","text":"SQL æ³¨å…¥ SQL æ³¨å…¥ï¼ˆSQLiï¼‰æ˜¯ä¸€ç§æ³¨å…¥æ”»å‡»ï¼Œï¼Œå¯ä»¥æ‰§è¡Œæ¶æ„ SQL è¯­å¥ã€‚å®ƒé€šè¿‡å°†ä»»æ„ SQL ä»£ç æ’å…¥æ•°æ®åº“æŸ¥è¯¢ï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿå®Œå…¨æ§åˆ¶ Web åº”ç”¨ç¨‹åºåé¢çš„æ•°æ®åº“æœåŠ¡å™¨ã€‚ çŠ¯ç½ªåˆ†å­å¯èƒ½ä¼šåˆ©ç”¨å®ƒæ¥æœªç»æˆæƒè®¿é—®ç”¨æˆ·çš„æ•æ„Ÿæ•°æ®ï¼šå®¢æˆ·ä¿¡æ¯ï¼Œä¸ªäººæ•°æ®ï¼Œå•†ä¸šæœºå¯†ï¼ŒçŸ¥è¯†äº§æƒç­‰ã€‚SQL æ³¨å…¥æ”»å‡»æ˜¯æœ€å¤è€ï¼Œæœ€æµè¡Œï¼Œæœ€å±é™©çš„ Web åº”ç”¨ç¨‹åºæ¼æ´ä¹‹ä¸€ã€‚ å¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Ÿ ä¸è¦ä½¿ç”¨åŠ¨æ€ SQLé¿å…å°†ç”¨æˆ·æä¾›çš„è¾“å…¥ç›´æ¥æ”¾å…¥ SQL è¯­å¥ä¸­ï¼›æœ€å¥½ä½¿ç”¨å‡†å¤‡å¥½çš„è¯­å¥å’Œå‚æ•°åŒ–æŸ¥è¯¢ï¼Œè¿™æ ·æ›´å®‰å…¨ã€‚ ä¸è¦å°†æ•æ„Ÿæ•°æ®ä¿ç•™åœ¨çº¯æ–‡æœ¬ä¸­åŠ å¯†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ç§æœ‰/æœºå¯†æ•°æ®ï¼›è¿™æ ·å¯ä»¥æä¾›äº†å¦ä¸€çº§ä¿æŠ¤ï¼Œä»¥é˜²æ”»å‡»è€…æˆåŠŸåœ°æ’å‡ºæ•æ„Ÿæ•°æ®ã€‚ é™åˆ¶æ•°æ®åº“æƒé™å’Œç‰¹æƒå°†æ•°æ®åº“ç”¨æˆ·çš„åŠŸèƒ½è®¾ç½®ä¸ºæœ€ä½è¦æ±‚ï¼›è¿™å°†é™åˆ¶æ”»å‡»è€…åœ¨è®¾æ³•è·å–è®¿é—®æƒé™æ—¶å¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚ é¿å…ç›´æ¥å‘ç”¨æˆ·æ˜¾ç¤ºæ•°æ®åº“é”™è¯¯æ”»å‡»è€…å¯ä»¥ä½¿ç”¨è¿™äº›é”™è¯¯æ¶ˆæ¯æ¥è·å–æœ‰å…³æ•°æ®åº“çš„ä¿¡æ¯ã€‚ å¯¹è®¿é—®æ•°æ®åº“çš„ Web åº”ç”¨ç¨‹åºä½¿ç”¨ Web åº”ç”¨ç¨‹åºé˜²ç«å¢™ï¼ˆWAFï¼‰è¿™ä¸ºé¢å‘ Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¿æŠ¤ï¼Œå®ƒå¯ä»¥å¸®åŠ©è¯†åˆ« SQL æ³¨å…¥å°è¯•ï¼›æ ¹æ®è®¾ç½®ï¼Œå®ƒè¿˜å¯ä»¥å¸®åŠ©é˜²æ­¢ SQL æ³¨å…¥å°è¯•åˆ°è¾¾åº”ç”¨ç¨‹åºï¼ˆä»¥åŠæ•°æ®åº“ï¼‰ã€‚ å®šæœŸæµ‹è¯•ä¸æ•°æ®åº“äº¤äº’çš„ Web åº”ç”¨ç¨‹åºè¿™æ ·åšå¯ä»¥å¸®åŠ©æ•è·å¯èƒ½å…è®¸ SQL æ³¨å…¥çš„æ–°é”™è¯¯æˆ–å›å½’ã€‚ å°†æ•°æ®åº“æ›´æ–°ä¸ºæœ€æ–°çš„å¯ç”¨ä¿®è¡¥ç¨‹åº åŸæ–‡ï¼šä»€ä¹ˆæ˜¯ SQL æ³¨å…¥ï¼Ÿå¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Ÿ æ¯”å¦‚ node åšå®¢é‡Œä½¿ç”¨ mysql.escape()æ¥é˜²æ­¢æ³¨å…¥ï¼š 12345const sql = ` select username, realname from users where username=$&#123;mysql.escape( username )&#125; and password=$&#123;mysql.escape(password)&#125;;`; XSS XSSï¼ˆCross Site Scriptï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰æ˜¯å‘ç½‘é¡µä¸­æ³¨å…¥æ¶æ„è„šæœ¬ï¼ˆCSS ä»£ç ã€JavaScript ä»£ç ç­‰ï¼‰ï¼Œç”¨æˆ·æµè§ˆç½‘é¡µæ—¶åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ‰§è¡Œæ¶æ„è„šæœ¬çš„ä¸€ç§æ”»å‡»æ–¹å¼ã€‚å¦‚ç›—å–ç”¨æˆ· cookieï¼Œç ´åé¡µé¢ç»“æ„ã€é‡å®šå‘åˆ°å…¶ä»–ç½‘ç«™ç­‰ã€‚ é˜²èŒƒ XSSï¼ˆæ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ï¼Œå¿…é¡»å¯¹è¾“å…¥çš„æ•°æ®ä½œè¿‡æ»¤å¤„ç†ï¼‰ä¸»è¦æœ‰ä¸¤æ–¹é¢ï¼š æ¶ˆæ¯’ï¼šå¯¹å±é™©å­—ç¬¦è¿›è¡Œè½¬ä¹‰ HttpOnlyï¼šé˜²èŒƒ XSS æ”»å‡»è€…çªƒå– Cookie æ•°æ® æ¯”å¦‚ node åšå®¢é‡Œï¼šæ–°å»ºæ–‡ç« çš„æ—¶å€™ï¼Œæ ‡é¢˜é‡Œè¾“å…¥&lt;script&gt;alert(&#39;æˆ‘æ˜¯ä¸€æ®µjsä»£ç &#39;)&lt;/script&gt;ï¼Œç„¶åç‚¹å‡»æäº¤ï¼Œå°±ä¼šç›´æ¥å¼¹å‡ºæ¥ã€‚ node ä½¿ç”¨ xssï¼š 1234const title = xss(blogData.title);// title// &amp;lt;script&amp;gt;alert('æˆ‘æ˜¯ä¸€æ®µjsä»£ç ')&amp;lt;/script&amp;gt; CSRF æ”»å‡» CSRF æ”»å‡»ï¼ˆCross Site Request Forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ˜¯æ”»å‡»è€…é€šè¿‡è·¨ç«™è¯·æ±‚ï¼Œä»¥åˆæ³•çš„ç”¨æˆ·èº«ä»½è¿›è¡Œéæ³•æ“ä½œï¼ˆå¦‚è½¬è´¦æˆ–å‘å¸–ç­‰ï¼‰ã€‚ è¿™é‡Œå…ˆè¯´ä¸€ä¸‹ï¼Œhttp æ˜¯æ— çŠ¶æ€çš„ã€‚æœåŠ¡å™¨ç«¯å’Œæµè§ˆå™¨ç«¯çš„èº«ä»½åˆ¤æ–­ä¸€èˆ¬æ˜¯é€šè¿‡ cookieã€‚ åç«¯ä¼šæ ¹æ®è¯·æ±‚è€…ä¼ é€’çš„ cookie ä¿¡æ¯åˆ¤æ–­è¯·æ±‚è€…çš„èº«ä»½ã€‚ æ”»å‡»è€…çš„è¯·æ±‚åªè¦æ˜¯å¸¦ä¸Šäº†ç›®æ ‡ç”¨æˆ·çš„ cookieï¼Œå°±å¯ä»¥åˆæ³•è¯·æ±‚ã€‚ è·¨ç«™ï¼šè¯·æ±‚æ¥æºå¾ˆå¯èƒ½æ¥è‡ªå…¶ä»–ç½‘ç«™ï¼Œä¹Ÿæœ‰å¯èƒ½æ¥è‡ªæœ¬ç«™ ä¼ªé€ ï¼šè¯·æ±‚å¹¶éç”¨æˆ·çš„æ„æ„¿ å®ç°ï¼šåˆ©ç”¨è·¨åŸŸæ ‡ç­¾ img iframe ç­‰åœ¨ b ç½‘ç«™å‘é€å¾€ a ç½‘ç«™ get è¯·æ±‚ï¼Œä¼šå¸¦ä¸Š a ç½‘ç«™çš„ cookieï¼Œç”±æ­¤å¯è§å¯¹äºæ•°æ®ä¿®æ”¹çš„è¯·æ±‚æœ€å¥½ä¸è¦ç”¨ getã€‚ å¦‚æœä½ åœ¨ a ç«™ç™»å½•äº†ï¼Œåˆè®¿é—®äº†æ¶æ„ç½‘ç«™ bï¼Œè€Œ b ä¸Šé¢æœ‰ä¸€ä¸ªæ¶æ„ img æ ‡ç­¾çš„ get è¯·æ±‚ï¼Œé‚£ä½ çš„æ•°æ®å¯èƒ½å°±è¢«åˆ é™¤äº†ã€‚ è€Œè·¨åŸŸçš„ ajax è¯·æ±‚å› ä¸ºåŒæºç­–ç•¥ï¼Œä¸ä¼šå¸¦ä¸Š cookieï¼Œä½†æ˜¯ä¹Ÿèƒ½è¯·æ±‚åˆ°ç»“æœï¼Œåç«¯ä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œä¸è¿‡å› ä¸ºæ²¡æœ‰æºå¸¦ cookie ä¿¡æ¯ï¼Œåç«¯æ‹¿ ä¸åˆ°ç™»å½•çŠ¶æ€ï¼Œå¾ˆå¤šæ“ä½œä¸ä¼šæˆåŠŸã€‚è·¨åŸŸè¯·æ±‚çš„ç»“æœä¹Ÿä¼šå‘åˆ°å®¢æˆ·ç«¯ï¼Œä¸è¿‡ç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæµè§ˆå™¨è¯»å–ä¸åˆ°è¿™ä¸ªå“åº”ç»“æœã€‚ ä¼ªé€  form è¡¨å•æäº¤ã€‚é‚£ä¹ˆï¼Œpost è¯·æ±‚å°±å®‰å…¨äº†å—ï¼Ÿform è¡¨å•æ˜¯è·¨åŸŸçš„ã€‚å¹¶ä¸”å¯ä»¥æäº¤ post è¯·æ±‚ã€‚æˆ‘ä»¬åœ¨ b ç½‘ç«™ä¼ªé€ ä¸€ä¸ª form è¡¨å•è‡ªåŠ¨æäº¤åˆ° a ç½‘ç«™ã€‚ é¢„é˜²ï¼šæœ€å¥½çš„åŠæ³•æ˜¯å¸¦ tokenï¼Œä»»ä½•è¯·æ±‚éƒ½å¸¦ä¸Š tokenï¼Œè¿™æ ·ä¼ªç«™å¯ä»¥å‘è¯·æ±‚ï¼Œä½†æ˜¯æ— æ³•æ‹¿åˆ° tokenï¼Œåç«¯æ”¶åˆ°çš„å°±ä¸å¸¦ token å°±å¯ä»¥åˆ¤å®šéæ³•äº†ã€‚ åŸæ–‡ï¼šå¸¸è§çš„ web æ”»å‡»æ–¹å¼åŠé¢„é˜² å¯†ç åŠ å¯† æ–‡æ¡£ï¼šcryptoï¼ˆåŠ å¯†ï¼‰ crypto æ¨¡å—æä¾›äº†åŠ å¯†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¹ OpenSSL çš„å“ˆå¸Œã€HMACã€åŠ å¯†ã€è§£å¯†ã€ç­¾åã€ä»¥åŠéªŒè¯åŠŸèƒ½çš„ä¸€æ•´å¥—å°è£…ã€‚ 12345678910const crypto = require(\"crypto\");const secret = \"abcdefg\";const hash = crypto .createHmac(\"sha256\", secret) .update(\"I love cupcakes\") .digest(\"hex\");console.log(hash);// æ‰“å°:// c0fa1bc00531bd78ef38c628449c5102aeabd49b5dc3a2a516ea6ea959d6658e MD5md5ï¼šä¸æ˜¯ä¸€ç§åŠ å¯†ç®—æ³•ï¼Œæ˜¯ç”¨æ¥åšæ–‡ä»¶æ ¡éªŒçš„ ä½œç”¨ï¼šè®©å¤§å®¹é‡ä¿¡æ¯åœ¨æ•°å­—ç­¾åè½¯ä»¶ç­¾ç½²ç§äººç§˜é’¥å‰è¢«â€å‹ç¼©â€æˆä¸€ç§ä¿å¯†æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸€ä¸ªä»»æ„é•¿åº¦çš„å­—èŠ‚ä¸²å˜æ¢æˆä¸€å®šé•¿åº¦çš„åå…­è¿›åˆ¶æ•°å­—ä¸²ï¼ˆ32ä¸ªå­—ç¬¦ï¼‰ 123456789101112131415const crypto = require('crypto')const SECRET_KEY = 'WJiol_8776#'// md5 åŠ å¯†function md5(content) &#123; return crypto.createHash('md5').update(content).digest('hex')&#125;// åŠ å¯†å‡½æ•°function genPassword(password) &#123; return md5(`password=$&#123;password&#125;&amp;key=$&#123;SECRET_KEY&#125;`)&#125;console.log(genPassword('123456'))// 4d4994bde299f6168c65f24c852897b7 HMACè¿›ä¸€æ­¥æå‡MD5åŠ å¯†å®‰å…¨æ€§ï¼šæ˜¯ä¸€ä¸ªâ€ç§˜é’¥â€ï¼Œå¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†ï¼Œå¹¶åšâ€ä¸¤æ¬¡æ•£åˆ—â€ï¼Œä½†ä½¿ç”¨å®ƒå¾—åˆ°çš„è¿˜æ˜¯32ä¸ªå­—ç¬¦ åˆ©ç”¨å“ˆå¸Œç®—æ³•ï¼Œä»¥ä¸€ä¸ªç§˜é’¥å’Œä¸€ä¸ªä¿¡æ¯ä¸ºè¾“å…¥ï¼Œç”Ÿæˆä¸€ä¸ªæ¶ˆæ¯æ‘˜è¦ä½œä¸ºè¾“å‡º 1234567891011const crypto = require('crypto')const SECRET_KEY = 'WJiol_8776#'// Hmac åŠ å¯†function hmac(content) &#123; return crypto.createHmac('md5', SECRET_KEY).update(content).digest('hex')&#125;console.log('hamc: ', hmac('123456'))// 7d37b577bcd2a492820846e475b933f9 å‚è€ƒèµ„æ–™ sql æ”»å‡» SQL æ³¨å…¥å’Œ XSS æ”»å‡» ä»€ä¹ˆæ˜¯ SQL æ³¨å…¥ï¼Ÿå¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Ÿ ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ SQL æ³¨å…¥æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ å¦‚ä½•é¢„é˜² SQL æ³¨å…¥å’Œ XSS æ”»å‡» - ä»£ç è®²è§£æ›´ç›´è§‚ å‰ç«¯åŠ å¯† JS åº“â€“CryptoJS ä½¿ç”¨æŒ‡å— nodeJSï¼šMD5åŠ å¯†","categories":[{"name":"Web","slug":"Web","permalink":"https://www.yangtao.site/categories/Web/"}],"tags":[{"name":"web","slug":"web","permalink":"https://www.yangtao.site/tags/web/"}]},{"title":"å½“å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬æ‰€å¯¼è‡´çš„â€œObjectå¤§æ¡ˆâ€","slug":"js-object","date":"2019-10-05T01:30:42.000Z","updated":"2019-11-11T07:46:05.525Z","comments":true,"path":"2019/10/05/js-object/","link":"","permalink":"https://www.yangtao.site/2019/10/05/js-object/","excerpt":"ç”¨ forEach æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬","text":"ç”¨ forEach æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬ ç”¨ forEach æ¥å¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬1234567891011121314151617181920// å¯¹è±¡å¤åˆ¶å‡½æ•°function copy(obj) &#123; var copy = Object.create(Object.getPrototypeOf(obj)); var propNames = Object.getOwnPropertyNames(obj); propNames.forEach(function(name) &#123; var desc = Object.getOwnPropertyDescriptor(obj, name); Object.defineProperty(copy, name, desc); &#125;); return copy;&#125;var copyObj1 = &#123; a: 1, b: 2&#125;;var copyObj2 = copy(copyObj1);console.log(copyObj2); // &#123; a: 1, b: 2 &#125;console.log(copyObj2 === copyObj1); // false Object.create Object.create(proto[, propertiesObject])æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„proto Object.getPrototypeOfObject.getOwnPropertyNamesObject.getOwnPropertyDescriptorObject.definePropertyæ€»ç»“123456789101112131415161718function copy(obj) &#123; // Object.create()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„__proto__ // Object.getPrototypeOf(object)æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼ˆå†…éƒ¨[[Prototype]]å±æ€§çš„å€¼ var copy = Object.create(Object.getPrototypeOf(obj)); // Object.getOwnPropertyNames(obj)æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬Symbolå€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„ var propNames = Object.getOwnPropertyNames(obj); propNames.forEach(function(name) &#123; // Object.getOwnPropertyDescriptor(obj, prop)æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡ä¸Šä¸€ä¸ªè‡ªæœ‰å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦ã€‚ // ï¼ˆè‡ªæœ‰å±æ€§æŒ‡çš„æ˜¯ç›´æ¥èµ‹äºˆè¯¥å¯¹è±¡çš„å±æ€§ï¼Œä¸éœ€è¦ä»åŸå‹é“¾ä¸Šè¿›è¡ŒæŸ¥æ‰¾çš„å±æ€§ï¼‰ var desc = Object.getOwnPropertyDescriptor(obj, name); // Object.defineProperty(obj, prop, descriptor)æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œ // æˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ Object.defineProperty(copy, name, desc); &#125;); return copy;&#125; èµ„æ–™ Array.prototype.forEach() æ˜¯å¦‚ä½•ä½¿ç”¨ ECMAScript 5 Object.* å…ƒå±æ€§ï¼ˆmeta property ï¼‰å‡½æ•°å·¥ä½œ forâ€¦of Array.prototype.some() Array.prototype.every() Object.create() Object.keys() Object.defineProperty() Object.getOwnPropertyDescriptor() Object.getOwnPropertyNames() Object.getPrototypeOf()","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"Git æäº¤çš„æ­£ç¡®å§¿åŠ¿ï¼šCommit message ç¼–å†™æŒ‡å—","slug":"git-commit","date":"2019-09-26T10:12:30.000Z","updated":"2019-11-13T03:57:43.331Z","comments":true,"path":"2019/09/26/git-commit/","link":"","permalink":"https://www.yangtao.site/2019/09/26/git-commit/","excerpt":"HeaderHeader éƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeï¼ˆå¿…éœ€ï¼‰ã€scopeï¼ˆå¯é€‰ï¼‰å’Œ subjectï¼ˆå¿…éœ€ï¼‰ featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰ fixï¼šä¿®è¡¥ bug docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰ styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰ testï¼šå¢åŠ æµ‹è¯• choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨","text":"HeaderHeader éƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeï¼ˆå¿…éœ€ï¼‰ã€scopeï¼ˆå¯é€‰ï¼‰å’Œ subjectï¼ˆå¿…éœ€ï¼‰ featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰ fixï¼šä¿®è¡¥ bug docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰ styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰ testï¼šå¢åŠ æµ‹è¯• choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ æäº¤ä¿¡æ¯è§„èŒƒæˆ‘ä»¬å¯¹é¡¹ç›®çš„ git æäº¤ä¿¡æ¯æ ¼å¼è¿›è¡Œç»Ÿä¸€æ ¼å¼çº¦å®šï¼Œæ¯æ¡æäº¤ä¿¡æ¯ç”± type+subject ç»„æˆï¼Œè¿™å°†æå‡é¡¹ç›®æ—¥å¿—çš„å¯è¯»æ€§ã€‚ type ç”¨äºè¡¨è¿°æ­¤æ¬¡æäº¤ä¿¡æ¯çš„æ„ä¹‰ï¼Œé¦–å†™å­—æ¯å¤§å†™ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºå¦‚ä¸‹ç±»å‹ï¼š Buildï¼šåŸºç¡€æ„å»ºç³»ç»Ÿæˆ–ä¾èµ–åº“çš„å˜åŒ– Ciï¼šCI æ„å»ºç³»ç»ŸåŠå…¶è„šæœ¬å˜åŒ– Docsï¼šæ–‡æ¡£å†…å®¹å˜åŒ– Featï¼šæ–°åŠŸèƒ½ Fixï¼šBug ä¿®å¤ Perfï¼šæ€§èƒ½ä¼˜åŒ– Refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ Bug çš„ä»£ç å˜åŠ¨ï¼‰ Styleï¼šæ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ Revertï¼šä»£ç å›æ»š Releaseï¼šç‰ˆæœ¬å‘å¸ƒ subject ç”¨äºç®€è¦æè¿°ä¿®æ”¹å˜æ›´çš„å†…å®¹ï¼Œå¦‚ Update code highlighting in readme.mdã€‚ å¥å°¾ä¸è¦ä½¿ç”¨ç¬¦å·ã€‚ ä½¿ç”¨ç°åœ¨æ—¶ã€ç¥ˆä½¿å¥è¯­æ°”ã€‚ æ ‡ç­¾è§„èŒƒä¸ºäº†æ–¹ä¾¿ç»´æŠ¤äººå‘˜å’Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°ä»–ä»¬æƒ³è¦æŸ¥çœ‹çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨â€œæ ‡ç­¾â€åŠŸèƒ½å¯¹ Pull requests å’Œ Issues è¿›è¡Œåˆ†ç±»ã€‚ å¦‚æœæ‚¨ä¸ç¡®å®šæŸä¸ªæ ‡ç­¾çš„å«ä¹‰ï¼Œæˆ–è€…ä¸çŸ¥é“å°†å“ªäº›æ ‡ç­¾åº”ç”¨äº PR æˆ– issueï¼Œåƒä¸‡åˆ«é”™è¿‡è¿™ä¸ªã€‚ Issue çš„æ ‡ç­¾ï¼š ç±»å‹ Bug: æ£€æµ‹åˆ°éœ€è¦è¿›è¡Œç¡®è®¤çš„ Bug Feature Request: æå‡ºäº†æ–°åŠŸèƒ½è¯·æ±‚çš„ Issue Question: æå‡ºç–‘é—®çš„ Issue Meta: è¡¨æ˜ä½¿ç”¨æ¡æ¬¾å˜æ›´çš„ Issue Support: è¢«æ ‡è®°ä¸ºæ”¯æŒè¯·æ±‚çš„ Issue Polls: å‘èµ·æŠ•ç¥¨çš„ Issue ç»“æœ Duplicate: é‡å¤æåŠçš„ Issue Irrelevant: ä¸ NexT ä¸»é¢˜æ— å…³çš„ Issue Expected Behavior: ä¸é¢„æœŸè¡Œä¸ºç›¸ç¬¦çš„ Issue Need More Info: éœ€è¦æ›´å¤šä¿¡æ¯çš„ Issue Need Verify: éœ€è¦å¼€å‘äººå‘˜æˆ–ç”¨æˆ·ç¡®è®¤ Bug æˆ–è§£å†³æ–¹æ³•çš„ Issue Verified: å·²ç»è¢«ç¡®è®¤çš„ Issue Can&#39;t Reproduce: æ— æ³•å¤ç°çš„ Issue Solved: å·²ç»è§£å†³çš„ Issue Stale: ç”±äºé•¿æœŸæ— äººå›åº”è¢«å°å­˜çš„ Issue Pull Request çš„æ ‡ç­¾ï¼š Breaking Change: äº§ç”Ÿé‡å¤§å˜åŠ¨çš„ Pull Request Bug Fix: ä¿®å¤ç›¸å…³ Bug çš„ Pull Request New Feature: æ·»åŠ äº†æ–°åŠŸèƒ½çš„ Pull Request Feature: ä¸ºç°æœ‰åŠŸèƒ½æä¾›é€‰é¡¹æˆ–åŠ æˆçš„ Pull Request i18n: æ›´æ–°äº†ç¿»è¯‘çš„ Pull Request Work in Progress: ä»åœ¨è¿›è¡Œæ”¹åŠ¨å’Œå®Œå–„çš„ Pull Request Skip Release: æ— éœ€åœ¨ Release Note ä¸­å±•ç°çš„ Pull Request ä¸¤è€…å…¼æœ‰ï¼š Roadmap: ä¸ NexT ä¸»é¢˜å‘å±•ç›¸å…³çš„ Issue æˆ–è€… Pull Request Help Wanted: éœ€è¦å¸®åŠ©çš„ Issue æˆ–è€… Pull Request Discussion: éœ€è¦è¿›è¡Œè®¨è®ºçš„ Issue æˆ–è€… Pull Request Improvement: éœ€è¦æ”¹è¿›çš„ Issue æˆ–è€…æ”¹è¿›äº† NexT ä¸»é¢˜çš„ Pull Request Performance: æå‡ºæ€§èƒ½é—®é¢˜çš„ Issue æˆ–è€…æé«˜äº† NexT ä¸»é¢˜æ€§èƒ½çš„ Pull Request Hexo: ä¸ Hexo å’Œ Hexo æ’ä»¶ç›¸å…³çš„ Issue æˆ–è€… Pull Request Template Engine: ä¸æ¨¡ç‰ˆå¼•æ“ç›¸å…³çš„ Issue æˆ–è€… Pull Request CSS: ä¸ NexT ä¸»é¢˜ CSS æ–‡ä»¶ç›¸å…³çš„ Issue æˆ–è€… Pull Request Fonts: ä¸ NexT ä¸»é¢˜å­—ä½“ç›¸å…³çš„ Issue æˆ–è€… Pull Request PJAX: ä¸ PJAX ç›¸å…³çš„ Issue æˆ–è€… Pull Request 3rd Party Plugin: ä¸ç¬¬ä¸‰æ–¹æ’ä»¶å’ŒæœåŠ¡ç›¸å…³çš„ Issue æˆ–è€… Pull Request Docs: ä¸æ–‡æ¡£è¯´æ˜ç›¸å…³çš„ Issue æˆ–è€… Pull Request Configurations: ä¸ NexT ä¸»é¢˜è®¾ç½®ç›¸å…³çš„ Issue æˆ–è€… Pull Request èµ„æ–™ Git æäº¤çš„æ­£ç¡®å§¿åŠ¿ï¼šCommit message ç¼–å†™æŒ‡å— Next ä¸»é¢˜è´¡çŒ®è§„èŒƒ","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.yangtao.site/tags/git/"}]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"web-speed","date":"2019-09-06T11:21:19.000Z","updated":"2019-12-03T10:21:19.040Z","comments":true,"path":"2019/09/06/web-speed/","link":"","permalink":"https://www.yangtao.site/2019/09/06/web-speed/","excerpt":"é‡å®šå‘ â†’ æ‹‰å–ç¼“å­˜ â†’DNS æŸ¥è¯¢ â†’ å»ºç«‹ TCP é“¾æ¥ â†’ å‘èµ·è¯·æ±‚ â†’ æ¥æ”¶å“åº” â†’ å¤„ç† HTML å…ƒç´  â†’ å…ƒç´ åŠ è½½å®Œæˆ","text":"é‡å®šå‘ â†’ æ‹‰å–ç¼“å­˜ â†’DNS æŸ¥è¯¢ â†’ å»ºç«‹ TCP é“¾æ¥ â†’ å‘èµ·è¯·æ±‚ â†’ æ¥æ”¶å“åº” â†’ å¤„ç† HTML å…ƒç´  â†’ å…ƒç´ åŠ è½½å®Œæˆ ç½‘ç»œä¼ è¾“æ€§èƒ½ä¼˜åŒ–æµè§ˆå™¨ç¼“å­˜ ç¼“å­˜ä¸€èˆ¬åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œä¸»è¦åŒºåˆ«æ˜¯ï¼šä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„æ—¶å€™ï¼Œæ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨éªŒè¯æœ¬åœ°ç¼“å­˜æ˜¯å¦ä¾æ—§æœ‰æ•ˆã€‚ å¼ºç¼“å­˜ä¸»è¦é€šè¿‡ http è¯·æ±‚å¤´ä¸­çš„ Cache-Control å’Œ Expire ä¸¤ä¸ªå­—æ®µæ§åˆ¶ ä¸€èˆ¬ï¼Œæˆ‘ä»¬ä¼šè®¾ç½® Cache-Control çš„å€¼ä¸ºâ€œpublic, max-age=xxxâ€ï¼Œè¡¨ç¤ºåœ¨ xxx ç§’å†…å†æ¬¡è®¿é—®è¯¥èµ„æºï¼Œå‡ä½¿ç”¨æœ¬åœ°çš„ç¼“å­˜ï¼Œä¸å†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚ åå•†ç¼“å­˜æ¯æ¬¡éƒ½å‘æœåŠ¡å™¨éªŒè¯ä¸€ä¸‹ç¼“å­˜çš„æœ‰æ•ˆæ€§ å‰ç«¯ç¼“å­˜æ–¹æ¡ˆ HTMLï¼šä½¿ç”¨åå•†ç¼“å­˜ CSS JS Imageï¼šä½¿ç”¨å¼ºç¼“å­˜ï¼Œæ–‡ä»¶åå¸¦ä¸Š hash å€¼ æµè§ˆå™¨é»˜è®¤çš„ç¼“å­˜æ˜¯æ”¾åœ¨å†…å­˜å†…çš„ï¼Œä½†æˆ‘ä»¬çŸ¥é“ï¼Œå†…å­˜é‡Œçš„ç¼“å­˜ä¼šå› ä¸ºè¿›ç¨‹çš„ç»“æŸæˆ–è€…è¯´æµè§ˆå™¨çš„å…³é—­è€Œè¢«æ¸…é™¤ï¼Œè€Œå­˜åœ¨ç¡¬ç›˜é‡Œçš„ç¼“å­˜æ‰èƒ½å¤Ÿè¢«é•¿æœŸä¿ç•™ä¸‹å»ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ network é¢æ¿ä¸­å„è¯·æ±‚çš„ size é¡¹é‡Œï¼Œä¼šçœ‹åˆ°ä¸¤ç§ä¸åŒçš„çŠ¶æ€ï¼šfrom memory cache å’Œ from disk cacheï¼Œå‰è€…æŒ‡ç¼“å­˜æ¥è‡ªå†…å­˜ï¼Œåè€…æŒ‡ç¼“å­˜æ¥è‡ªç¡¬ç›˜ã€‚è€Œæ§åˆ¶ç¼“å­˜å­˜æ”¾ä½ç½®çš„ï¼Œä¸æ˜¯åˆ«äººï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®çš„ Etag å­—æ®µã€‚åœ¨æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”åï¼Œä¼šæ£€æµ‹å“åº”å¤´éƒ¨ï¼ˆHeaderï¼‰ï¼Œå¦‚æœæœ‰ Etag å­—æ®µï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šå°†æœ¬æ¬¡ç¼“å­˜å†™å…¥ç¡¬ç›˜ä¸­ã€‚ èµ„æºæ‰“åŒ…å‹ç¼© ç½‘ç»œæ€§èƒ½ä¼˜åŒ–æªæ–½å½’ç»“ä¸ºä¸‰å¤§æ–¹é¢ï¼šå‡å°‘è¯·æ±‚æ•°ã€å‡å°è¯·æ±‚èµ„æºä½“ç§¯ã€æå‡ç½‘ç»œä¼ è¾“é€Ÿç‡ 1gulp grunt webpack parcel å›¾ç‰‡èµ„æºä¼˜åŒ– ä¸è¦åœ¨ HTML é‡Œç¼©æ”¾å›¾åƒ ä½¿ç”¨é›ªç¢§å›¾ï¼ˆCSS Spriteï¼‰- webpack-spritesmith ä½¿ç”¨å­—ä½“å›¾æ ‡ï¼ˆiconfontï¼‰- icomoon ä½¿ç”¨ WebP - å›¾ç‰‡å‹ç¼©ä½“ç§¯å¤§çº¦åªæœ‰ JPEG çš„ 2/3ï¼Œå¹¶èƒ½èŠ‚çœå¤§é‡çš„æœåŠ¡å™¨å¸¦å®½èµ„æºå’Œæ•°æ®ç©ºé—´ ç½‘ç»œä¼ è¾“æ€§èƒ½æ£€æµ‹å·¥å…· Page Speed | PageSpeed Insights ä½¿ç”¨ CDNé¡µé¢æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ï¼ˆwebkitï¼‰ ã€ŠWebkit æŠ€æœ¯å†…å¹•ã€‹ æµè§ˆå™¨çš„è§£é‡Šå™¨ï¼Œæ˜¯åŒ…æ‹¬åœ¨æ¸²æŸ“å¼•æ“å†…çš„ï¼Œæˆ‘ä»¬å¸¸è¯´çš„ Chromeï¼ˆç°åœ¨ä½¿ç”¨çš„æ˜¯ Blink å¼•æ“ï¼‰å’Œ Safari ä½¿ç”¨çš„ Webkit å¼•æ“ï¼ŒFirefox ä½¿ç”¨çš„ Gecko å¼•æ“ï¼ŒæŒ‡çš„å°±æ˜¯æ¸²æŸ“å¼•æ“ã€‚è€Œåœ¨æ¸²æŸ“å¼•æ“å†…ï¼Œè¿˜åŒ…æ‹¬ç€æˆ‘ä»¬çš„ HTML è§£é‡Šå™¨ï¼ˆæ¸²æŸ“æ—¶ç”¨äºæ„é€  DOM æ ‘ï¼‰ã€CSS è§£é‡Šå™¨ï¼ˆæ¸²æŸ“æ—¶ç”¨äºåˆæˆ CSS è§„åˆ™ï¼‰è¿˜æœ‰æˆ‘ä»¬çš„ JS è§£é‡Šå™¨ã€‚ä¸è¿‡åæ¥ï¼Œç”±äº JS çš„ä½¿ç”¨è¶Šæ¥è¶Šé‡è¦ï¼Œå·¥ä½œè¶Šæ¥è¶Šç¹æ‚ï¼Œæ‰€ä»¥ JS è§£é‡Šå™¨ä¹Ÿæ¸æ¸ç‹¬ç«‹å‡ºæ¥ï¼Œæˆä¸ºäº†å•ç‹¬çš„ JS å¼•æ“ï¼Œå°±åƒä¼—æ‰€å‘¨çŸ¥çš„ V8 å¼•æ“ï¼Œæˆ‘ä»¬ç»å¸¸æ¥è§¦çš„ Node.js ä¹Ÿæ˜¯ç”¨çš„å®ƒã€‚ DOM æ¸²æŸ“å±‚ä¸ GPU ç¡¬ä»¶åŠ é€Ÿ â‘  æµè§ˆå™¨ä¼šå…ˆè·å– DOM æ ‘å¹¶ä¾æ®æ ·å¼å°†å…¶åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„æ¸²æŸ“å±‚ â‘¡CPU å°†æ¯ä¸ªå±‚ç»˜åˆ¶è¿›ç»˜å›¾ä¸­ â‘¢ å°†ä½å›¾ä½œä¸ºçº¹ç†ä¸Šä¼ è‡³ GPUï¼ˆæ˜¾å¡ï¼‰ç»˜åˆ¶ â‘£GPU å°†æ‰€æœ‰çš„æ¸²æŸ“å±‚ç¼“å­˜ï¼ˆå¦‚æœä¸‹æ¬¡ä¸Šä¼ çš„æ¸²æŸ“å±‚æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒGPU å°±ä¸éœ€è¦å¯¹å…¶è¿›è¡Œé‡ç»˜ï¼‰å¹¶å¤åˆå¤šä¸ªæ¸²æŸ“å±‚æœ€ç»ˆå½¢æˆæˆ‘ä»¬çš„å›¾åƒ é‡æ’å’Œé‡ç»˜ä¸è®ºæ˜¯é‡æ’è¿˜æ˜¯é‡ç»˜ï¼Œéƒ½ä¼šé˜»å¡æµè§ˆå™¨ã€‚è¦æé«˜ç½‘é¡µæ€§èƒ½ï¼Œå°±è¦é™ä½é‡æ’å’Œé‡ç»˜çš„é¢‘ç‡å’Œæˆæœ¬ï¼Œè¿‘å¯èƒ½å°‘åœ°è§¦å‘é‡æ–°æ¸²æŸ“ã€‚ é‡æ’æ˜¯ç”± CPU å¤„ç†çš„ï¼Œè€Œé‡ç»˜æ˜¯ç”± GPU å¤„ç†çš„ï¼ŒCPU çš„å¤„ç†æ•ˆç‡è¿œä¸åŠ GPUï¼Œå¹¶ä¸”é‡æ’ä¸€å®šä¼šå¼•å‘é‡ç»˜ï¼Œè€Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘é‡æ’ã€‚æ‰€ä»¥åœ¨æ€§èƒ½ä¼˜åŒ–å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ›´åº”å½“ç€é‡å‡å°‘é‡æ’çš„å‘ç”Ÿã€‚ é‡æ’ reflowæ¸²æŸ“å±‚å†…çš„å…ƒç´ å¸ƒå±€å‘ç”Ÿä¿®æ”¹ï¼Œéƒ½ä¼šå¯¼è‡´é¡µé¢é‡å†™æ’åˆ—ã€‚ æ¯”å¦‚ï¼šçª—å£çš„å°ºå¯¸å‘ç”Ÿå˜åŒ–ã€åˆ é™¤æˆ–æ·»åŠ  DOM å…ƒç´ ï¼›ä¿®æ”¹äº†å½±å“å…ƒç´ ç›’å­å¤§å°çš„ css å±æ€§ï¼ˆwidth height paddingâ€¦ï¼‰ é‡ç»˜ repaintç»˜åˆ¶ï¼Œæ‰€æœ‰å¯¹å…ƒç´ çš„è§†è§‰è¡¨ç°å±æ€§çš„ä¿®æ”¹ï¼Œéƒ½ä¼šå¼•èµ·é‡ç»˜ã€‚ ä¼˜åŒ–ç­–ç•¥ CSS å±æ€§è¯»å†™åˆ†ç¦» é€šè¿‡åˆ‡æ¢ class æˆ–è€… style.csstext å±æ€§å»æ‰¹é‡æ“ä½œå…ƒç´ æ ·å¼ DOM å…ƒç´ ç¦»çº¿æ›´æ–° å°†æ²¡ç”¨çš„å…ƒç´ è®¾ä¸ºä¸å¯è§ï¼švisibility: hiddenï¼Œå‡å°‘é‡ç»˜çš„å‹åŠ› å‹ç¼© DOM çš„æ·±åº¦ï¼šå°‘ç”¨ DOM å®Œæˆé¡µé¢æ ·å¼ï¼Œå¤šä½¿ç”¨ä¼ªå…ƒç´ æˆ–è€… box-shadow å–ä»£ã€‚ å›¾ç‰‡åœ¨æ¸²æŸ“å‰æŒ‡å®šå¤§å°ï¼šå› ä¸º img å…ƒç´ æ˜¯å†…è”å…ƒç´ ï¼Œæ‰€ä»¥åœ¨åŠ è½½å›¾ç‰‡åä¼šæ”¹å˜å®½é«˜ï¼Œä¸¥é‡çš„æƒ…å†µä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢é‡æ’ï¼Œæ‰€ä»¥æœ€å¥½åœ¨æ¸²æŸ“å‰å°±æŒ‡å®šå…¶å¤§å°ï¼Œæˆ–è€…è®©å…¶è„±ç¦»æ–‡æ¡£æµã€‚ å¯¹é¡µé¢ä¸­å¯èƒ½å‘ç”Ÿå¤§é‡é‡æ’é‡ç»˜çš„å…ƒç´ å•ç‹¬è§¦å‘æ¸²æŸ“å±‚ï¼Œä½¿ç”¨ GPU åˆ†æ‹… CPU å‹åŠ›ã€‚ï¼ˆæ…é‡ï¼‰ JS é˜»å¡æ€§èƒ½è´Ÿè½½å‡è¡¡Node.js å¤„ç† IO å¯†é›†å‹è¯·æ±‚ Node.js : æˆ‘åªéœ€è¦ä¸€ä¸ªåº—å°äºŒ node çš„æ ¸å¿ƒæ˜¯äº‹ä»¶é©±åŠ¨ï¼Œé€šè¿‡ loop å»å¼‚æ­¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œç›¸å¯¹äºä¼ ç»Ÿçš„åç«¯æœåŠ¡ï¼Œä»–ä»¬éƒ½æ˜¯å°†ç”¨æˆ·çš„æ¯ä¸ªè¯·æ±‚åˆ†é…åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­è¿›è¡Œå¤„ç†ã€‚ äº‹ä»¶é©±åŠ¨çš„ä¼˜åŠ¿ï¼šåœ¨é«˜å¹¶å‘ IO æ—¶ï¼Œä¸ä¼šé€ æˆå µå¡ã€‚ Frond-End(Browser) Back-End(Java Server) pm2 å®ç° Node.jsâ€œå¤šçº¿ç¨‹â€ ä½¿ç”¨ Node.js çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿éƒ½æœ‰å“ªäº›ï¼Ÿ pm2ã€‚è¿™æ˜¯å®ƒçš„å®˜ç½‘ï¼špm2.keymetrics.io/ å®ƒæ˜¯ä¸€æ¬¾ node.js è¿›ç¨‹ç®¡ç†å™¨ï¼Œå…·ä½“çš„åŠŸèƒ½ï¼Œå°±æ˜¯èƒ½åœ¨ä½ çš„è®¡ç®—æœºé‡Œçš„æ¯ä¸€ä¸ªå†…æ ¸éƒ½å¯åŠ¨ä¸€ä¸ª node.js æœåŠ¡ã€‚ ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ç”µè„‘æˆ–è€…æœåŠ¡å™¨æ˜¯å¤šæ ¸å¤„ç†å™¨ï¼ˆç°åœ¨ä¹Ÿå°‘è§å•æ ¸äº†å§ï¼‰ï¼Œå®ƒå°±èƒ½å¯åŠ¨å¤šä¸ª node.js æœåŠ¡ï¼Œå¹¶ä¸”å®ƒèƒ½å¤Ÿè‡ªåŠ¨æ§åˆ¶è´Ÿè½½å‡è¡¡ï¼Œä¼šè‡ªåŠ¨å°†ç”¨æˆ·çš„è¯·æ±‚åˆ†å‘è‡³å‹åŠ›å°çš„æœåŠ¡è¿›ç¨‹ä¸Šå¤„ç†ã€‚ nginx æ­å»ºåå‘ä»£ç†èµ„æ–™ å‰ç«¯ç¼“å­˜æœ€ä½³å®è·µ ç½‘ç«™æ€§èƒ½ä¼˜åŒ–å®æˆ˜â€”â€”ä» 12.67s åˆ° 1.06s çš„æ•…äº‹ ä½ åº”è¯¥çŸ¥é“çš„å‰ç«¯â€”â€”ç¼“å­˜ ã€Šå¤§å‹ç½‘ç«™æ€§èƒ½ç›‘æµ‹ã€åˆ†æä¸ä¼˜åŒ–ã€‹ ã€åŸã€‘é›…è™å‰ç«¯ä¼˜åŒ–çš„ 35 æ¡å†›è§„","categories":[{"name":"Web","slug":"Web","permalink":"https://www.yangtao.site/categories/Web/"}],"tags":[{"name":"web","slug":"web","permalink":"https://www.yangtao.site/tags/web/"}]},{"title":"MacOSå¦‚ä½•ä½¿ç”¨ tree ç”Ÿæˆç›®å½•ç»“æ„","slug":"tool-tree","date":"2019-09-02T07:01:37.000Z","updated":"2019-11-11T07:09:18.291Z","comments":true,"path":"2019/09/02/tool-tree/","link":"","permalink":"https://www.yangtao.site/2019/09/02/tool-tree/","excerpt":"Homebrewå®‰è£…homebrewå®˜ç½‘ Homebrewä»‹ç»å’Œä½¿ç”¨","text":"Homebrewå®‰è£…homebrewå®˜ç½‘ Homebrewä»‹ç»å’Œä½¿ç”¨ æ ¹æ®å®˜ç½‘çš„æ–¹æ³•å®‰è£…1/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" æ¯”å¦‚æˆ‘çš„ï¼š123456789==&gt; This script will install:/usr/local/bin/brew/usr/local/share/doc/homebrew/usr/local/share/man/man1/brew.1/usr/local/share/zsh/site-functions/_brew/usr/local/etc/bash_completion.d/brew/usr/local/HomebrewPress RETURN to continue or any other key to abort ä¸€è·¯æŒ‰ç…§æç¤ºæ“ä½œå³å¯ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå°±å®‰è£…æˆåŠŸäº†:1234âœ ~ brew -vHomebrew 2.1.9Homebrew/homebrew-core (git revision c8ff; last commit 2019-08-01)Homebrew/homebrew-cask (git revision 04bff; last commit 2019-08-02) Tree å®‰è£…1brew install tree å¸¸ç”¨å‘½ä»¤ï¼š1234567891011121314151617181920# ä¸‹è½½brew install tree# æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶tree -a# åªæ˜¾ç¤ºæ–‡ä»¶å¤¹tree -d# æ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ï¼Œå¦‚ä¸‰çº§tree -L 3 # è¿‡æ»¤ï¼Œå¦‚é™¤node_modulesæ–‡ä»¶tree -I \"node_modules\"# è¾“å‡ºtree &gt; tree.md# Helptree --help æœ€åï¼Œæˆ‘çš„è¾“å‡ºï¼štree -I &quot;node_modules&quot; &gt; tree.mdæŸ¥çœ‹ tree.md çš„å†…å®¹å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839.â”œâ”€â”€ README.mdâ”œâ”€â”€ distâ”œâ”€â”€ package.jsonâ”œâ”€â”€ srcâ”‚ â”œâ”€â”€ app.scssâ”‚ â”œâ”€â”€ font-awesomeâ”‚ â”‚ â”œâ”€â”€ fontsâ”‚ â”‚ â”‚ â”œâ”€â”€ FontAwesome.otfâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.eotâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.svgâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.ttfâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.woffâ”‚ â”‚ â”‚ â””â”€â”€ fontawesome-webfont.woff2â”‚ â”‚ â””â”€â”€ scssâ”‚ â”‚ â”œâ”€â”€ _animated.scssâ”‚ â”‚ â”œâ”€â”€ _bordered-pulled.scssâ”‚ â”‚ â”œâ”€â”€ _core.scssâ”‚ â”‚ â”œâ”€â”€ _fixed-width.scssâ”‚ â”‚ â”œâ”€â”€ _icons.scssâ”‚ â”‚ â”œâ”€â”€ _larger.scssâ”‚ â”‚ â”œâ”€â”€ _list.scssâ”‚ â”‚ â”œâ”€â”€ _mixins.scssâ”‚ â”‚ â”œâ”€â”€ _path.scssâ”‚ â”‚ â”œâ”€â”€ _rotated-flipped.scssâ”‚ â”‚ â”œâ”€â”€ _screen-reader.scssâ”‚ â”‚ â”œâ”€â”€ _stacked.scssâ”‚ â”‚ â”œâ”€â”€ _variables.scssâ”‚ â”‚ â””â”€â”€ font-awesome.scssâ”‚ â”œâ”€â”€ index.htmlâ”‚ â”œâ”€â”€ index.jsâ”‚ â”œâ”€â”€ index.jsxâ”‚ â”œâ”€â”€ react.pngâ”‚ â””â”€â”€ style.cssâ”œâ”€â”€ tree.mdâ”œâ”€â”€ webpack.config.jsâ””â”€â”€ yarn.lock5 directories, 31 files treeå‘½ä»¤è¡Œå‚æ•° å‘½ä»¤è¡Œå‚æ•° å«ä¹‰ -a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ã€‚ -A ä½¿ç”¨ASNIç»˜å›¾å­—ç¬¦æ˜¾ç¤ºæ ‘çŠ¶å›¾è€Œéä»¥ASCIIå­—ç¬¦ç»„åˆã€‚ -C åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†å„ç§ç±»å‹ã€‚ -d æ˜¾ç¤ºç›®å½•åç§°è€Œéå†…å®¹ã€‚ -D åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹æ—¶é—´ã€‚ -f åœ¨æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ç›¸å¯¹è·¯å¾„åç§°ã€‚ -F åœ¨æœ«å°¾è¿½åŠ æè¿°æ€§å­—ç¬¦ï¼Œå¦‚ ls -F -g åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç¾¤ç»„è¯†åˆ«ç ã€‚ -i ä¸ä»¥é˜¶æ¢¯çŠ¶åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚ -I ä¸æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚ -l å¦‚é‡åˆ°æ€§è´¨ä¸ºç¬¦å·è¿æ¥çš„ç›®å½•ï¼Œç›´æ¥åˆ—å‡ºè¯¥è¿æ¥æ‰€æŒ‡å‘çš„åŸå§‹ç›®å½•ã€‚ -n ä¸åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ã€‚ -N ç›´æ¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼ŒåŒ…æ‹¬æ§åˆ¶å­—ç¬¦ã€‚ -p åˆ—å‡ºæƒé™æ ‡ç¤ºã€‚ -P åªæ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚ -q ç”¨â€?â€å·å–ä»£æ§åˆ¶å­—ç¬¦ï¼Œåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ã€‚ -s åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•å¤§å°ã€‚ -t ç”¨æ–‡ä»¶å’Œç›®å½•çš„æ›´æ”¹æ—¶é—´æ’åºã€‚ -u åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·è¯†åˆ«ç ã€‚ -x å°†èŒƒå›´å±€é™åœ¨ç°è¡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè‹¥æŒ‡å®šç›®å½•ä¸‹çš„æŸäº›å­ç›®å½•ï¼Œå…¶å­˜æ”¾äºå¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œåˆ™å°†è¯¥å­ç›®å½•äºˆä»¥æ’é™¤åœ¨å¯»æ‰¾èŒƒå›´å¤–ã€‚ å‚è€ƒèµ„æ–™ mac treeå‘½ä»¤ Macä½¿ç”¨treeç”Ÿæˆç›®å½•ç»“æ„","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://www.yangtao.site/tags/MacOS/"},{"name":"ç»ˆç«¯","slug":"ç»ˆç«¯","permalink":"https://www.yangtao.site/tags/ç»ˆç«¯/"}]},{"title":"å­¦ä¹  React çš„ä¸€äº›è®°å½•æ—¥å¿—","slug":"react-doc","date":"2019-08-24T10:15:52.000Z","updated":"2019-11-11T07:34:04.745Z","comments":true,"path":"2019/08/24/react-doc/","link":"","permalink":"https://www.yangtao.site/2019/08/24/react-doc/","excerpt":"å­¦ä¹  React çš„ä¸€äº›è®°å½•æ—¥å¿—","text":"å­¦ä¹  React çš„ä¸€äº›è®°å½•æ—¥å¿— Video Courseåˆçº§ åŸºäºå®ä¾‹çš„ react16 å‚»ç“œè¯¾ç¨‹ â€” ç”¨ä¸€ç³»åˆ—æœ‰è¶£çš„ã€ç®€æ´æ˜å¿«çš„å®ä¾‹ç”±æµ…å…¥æ·±çš„é˜è¿°äº† React çš„ç‰¹è‰²ï¼Œæ¦‚å¿µå’ŒåŸºæœ¬ä½¿ç”¨ react16.4 å¿«é€Ÿä¸Šæ‰‹ â€” é€šè¿‡ Todolist åŠŸèƒ½çš„å®ç°ï¼Œç»™å¤§å®¶è®²è§£äº† React ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼ ä¸­çº§ react 16 å®ç°è®¢å•åˆ—è¡¨åŠè¯„ä»·åŠŸèƒ½ â€” ä»‹ç»äº†ä»é¡¹ç›®åˆ›å»ºã€åˆ°ç»„ä»¶åˆ’åˆ†ã€å†åˆ°ç»„ä»¶åŠé¡µé¢é€»è¾‘å®ç°çš„å¼€å‘æµç¨‹ react ç»„ä»¶ â€” æ¯”è¾ƒè¯¦ç»†åœ°è®²è§£ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸ é«˜çº§ reactå“åº”ç”¨æˆ·è¾“å…¥ â€” å­¦ä¹ å¦‚ä½•è®©æ•°æ®é€»è¾‘ä¸ UI çš„ç»“åˆä½¿ç”¨ã€react çš„äº‹ä»¶å¤„ç†æœºåˆ¶ä»¥åŠ react å¯¹ DOM æ¨¡å‹çš„æ“ä½œ reactçŸ¥è¯†ç‚¹ç»¼åˆè¿ç”¨å®ä¾‹ â€” ç»¼åˆå®ä¾‹æ“ä½œ reacté«˜çº§æ•™ç¨‹ä¹‹é«˜é˜¶ç»„ä»¶ â€” é«˜é˜¶ç»„ä»¶çš„åº”ç”¨ï¼šä»£ç†å’Œç»§æ‰¿ Document React å®˜æ–¹æ–‡æ¡£ Ant Design of React â€” antd æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚ Ant Design Pro â€” æ˜¯ä¸€ä¸ªä¼ä¸šçº§ä¸­åå°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆ Ant Design Mobile of React â€” æ˜¯ Ant Design çš„ç§»åŠ¨è§„èŒƒçš„ React å®ç°ï¼ŒæœåŠ¡äºèš‚èšåŠå£ç¢‘æ— çº¿ä¸šåŠ¡ webpack å®˜æ–¹æ–‡æ¡£ React ä¸ webpack Learning Materials ã€Šreact å…¥é—¨æ•™ç¨‹ã€‹ ã€Šreact å…¥é—¨å®ä¾‹æ•™ç¨‹ã€‹ â€” é˜®ä¸€å³° ã€Štypescript çƒ­é—¨æ•™ç¨‹ã€‹ ã€Š6 å‘¨å­¦ä¹ è®¡åˆ’ï¼Œæ”»å…‹ javascript éš¾å…³(react/redux/es6 etc.)ã€‹ My Learningå…¥é—¨å­¦ä¹  React çš„å‡ ä¸ªä¾‹å­ Demo åœ°å€ï¼Œæˆ³æˆ‘ ReactDOM.render() Use Array in JSX ç»„ä»¶ this.props.children PropTypes è·å–çœŸå®çš„ DOM èŠ‚ç‚¹ this.state è¡¨å• ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ ä½¿ç”¨ Promise è·å– Github çš„æ•°æ® Todo List äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰ Nextjs â€” é…åˆ React æ‰“é€ é™æ€åŒ–å’ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨Nextjs Demo1: å­¦ä¹ å®˜æ–¹æ–‡æ¡£ 123cd nextjs/01-hello-nextnpm installnpm run dev My Project å­¦ä¹ ã€Œäº•å­—æ¸¸æˆã€ å­¦ä¹ ä½“éªŒ Ant Design of React","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"react","slug":"react","permalink":"https://www.yangtao.site/tags/react/"}]},{"title":"å…¥é—¨ Webpack@3 çš„é…ç½®è¿‡ç¨‹","slug":"webpack-v3","date":"2019-08-05T12:13:10.000Z","updated":"2019-11-11T07:33:17.062Z","comments":true,"path":"2019/08/05/webpack-v3/","link":"","permalink":"https://www.yangtao.site/2019/08/05/webpack-v3/","excerpt":"å…¥é—¨ Webpack@3 çš„é…ç½®è¿‡ç¨‹","text":"å…¥é—¨ Webpack@3 çš„é…ç½®è¿‡ç¨‹ Webpack webpack æŒ‡å— React çš„ Webpack é…ç½® PSï¼š æ–‡ç« ç»“å°¾æœ‰å®Œæ•´å®ä¾‹å¯åŠ¨æ–¹æ³•ï¼šGithubåœ°å€ æœ¬æ¬¡é…ç½®ç»ƒä¹ ä¸»è¦æ˜¯é’ˆå¯¹ webpack-v3ï¼Œåˆ‡æ¢åˆ†æ”¯è‡³ webpack@3-react ï¼Œæ¯ä¸€æ¬¡ Commitsï¼ŒåŸºæœ¬ä¸Šå¯¹åº”ç€ç›¸åº”çš„æ–‡ä»¶é…ç½®ï¼Œå¯ä»¥å¯¹ç…§ç€ç…ç…ã€‚ å¼€å§‹å®‰è£…é…ç½® Webpackå‡†å¤‡ç¯å¢ƒï¼š 12345678âœ happymmall git:(webpack@3-react) âœ— node -vv11.13.0âœ happymmall git:(webpack@3-react) âœ— npm -v6.10.1âœ happymmall git:(webpack@3-react) âœ— git --versiongit version 2.17.2 (Apple Git-113)âœ happymmall git:(webpack@3-react) âœ— yarn -v1.17.3 å®‰è£… yarn12345678910# homebrew å®‰è£…brew install yarn# npm/cnpm å®‰è£…npm install cnpm -gcnpm install yarn -g# æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸâœ ~ yarn --version1.17.3 å¸¸ç”¨å‘½ä»¤ï¼š 12345yarn init # åˆå§‹åŒ–yarn add [package] # æ·»åŠ ä¾èµ–åŒ…yarn add [package] --dev # æ·»åŠ åˆ° devDependenciesyarn remove [package] # åˆ é™¤ä¾èµ–åŒ…yarn install # å®‰è£…æ‰€æœ‰ä¾èµ–åŒ… å®‰è£… webpack@312yarn inityarn add webpack@3.10.0 --dev æ ¹ç›®å½•æ–°å»º webpack.config.js,å¹¶æ–°å»º src/index.js 12345678910111213// webpack.config.jsconst path = require(\"path\");module.exports = &#123; entry: \"./src/index.js\", output: &#123; path: path.resolve(__dirname, \"dist\"), filename: \"app.js\" &#125;&#125;;// index.jsconsole.log(\"Hello, world\"); è¿è¡Œï¼šnode_modules/.bin/webpack: 1234567âœ happymmall git:(webpack@3-react) âœ— node_modules/.bin/webpackHash: 62e68b9cc366c7b50ac6Version: webpack 3.10.0Time: 34ms Asset Size Chunks Chunk Namesapp.js 2.5 kB 0 [emitted] main [0] ./src/index.js 28 bytes &#123;0&#125; [built] æ‰“å¼€ dist/app.jsï¼Œæœç´¢ Hello: 123456/***/ (function(module, exports) &#123;console.log('Hello, world');/***/ &#125;)/******/ ]); ä¸€ä¸ªç®€å•çš„æ–‡ä»¶å°±æ­¤æ‰“åŒ…æˆåŠŸï¼Œå¼€å¿ƒå§â€¦ é…ç½® HMTL æ¨¡æ¿æ–‡æ¡£ï¼šHtmlWebpackPlugin ç®€åŒ–äº† HTML æ–‡ä»¶çš„åˆ›å»ºï¼Œä»¥ä¾¿ä¸ºä½ çš„ webpack åŒ…æä¾›æœåŠ¡ã€‚è¿™å¯¹äºåœ¨æ–‡ä»¶åä¸­åŒ…å«æ¯æ¬¡ä¼šéšç€ç¼–è¯‘è€Œå‘ç”Ÿå˜åŒ–å“ˆå¸Œçš„ webpack bundle å°¤å…¶æœ‰ç”¨ã€‚ å®‰è£… html-webpack-plugin 1yarn add html-webpack-plugin@2.30.1 --dev æ–°å»ºï¼šsrc/index.html, å¹¶åˆå§‹åŒ–ä¸€ä¸ª html å†…å®¹ï¼Œç„¶åé…ç½®ï¼š 123456789101112131415const path = require(\"path\");const HtmlWebpackPlugin = require(\"html-webpack-plugin\");module.exports = &#123; entry: \"./src/index.js\", output: &#123; path: path.resolve(__dirname, \"dist\"), filename: \"app.js\" &#125;, plugins: [ new HtmlWebpackPlugin(&#123; template: \"./src/index.html\" &#125;) ]&#125;; æ¥ç€è·‘ä¸€ä¸‹ï¼šnode_modules/.bin/webpackï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œdist ä¸‹ä¼šå‡ºç°ä¸€ä¸ª index.htmlï¼Œæ‰“å¼€æŸ¥çœ‹å°±ä¼šå‘ç°ï¼Œä¸ä»…æœ‰æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„å†…å®¹ï¼Œè¿˜æŠŠapp.jsä¹Ÿè‡ªåŠ¨å¼•å…¥äº†ï¼Œè¿™æ³¢æ“ä½œå¤Ÿå¯ä»¥ã€‚ Babel å¤„ç†è„šæœ¬æ–‡æ¡£ï¼šbabel-loader å®‰è£… babel 1yarn add babel-loader@7.1.2 babel-core@6.26.0 babel-preset-env@1.6.1 --dev è®¾ç½® config æ–‡ä»¶ï¼š 1234567891011121314module: &#123; rules: [ &#123; test: /\\.js$/, exclude: /(node_modules)/, // å¿½ç•¥æ­¤æ–‡ä»¶ use: &#123; loader: \"babel-loader\", options: &#123; presets: [\"env\"] &#125; &#125; &#125; ];&#125; ç„¶åä¿®æ”¹ src/index.js: 123456789101112class People &#123; constructor(name) &#123; this.name = \"people\"; &#125;&#125;class Man extends People &#123; constructor(name) &#123; super(name); this.age = 27; &#125;&#125; è¿è¡Œï¼šnode_modules/.bin/webpackï¼Œç„¶åå†å»dist/app.jsï¼Œå°±ä¼šå‘ç°å·²ç»è½¬è¯‘æˆåŠŸï¼š 1234567891011121314151617181920var People = function People(name) &#123; _classCallCheck(this, People); this.name = \"people\";&#125;;var Man = (function(_People) &#123; _inherits(Man, _People); function Man(name) &#123; _classCallCheck(this, Man); var _this = _possibleConstructorReturn( this, (Man.__proto__ || Object.getPrototypeOf(Man)).call(this, name) ); _this.age = 27; return _this; &#125; return Man;&#125;)(People); é…ç½® Reactå®‰è£…ï¼š 12yarn add babel-preset-react@6.24.1 --devyarn add react@16.2.0 react-dom@16.2.0 è®¾ç½®ï¼š 1234567891011121314151617module: &#123; rules: [ &#123; test: /\\.jsx$/, exclude: /(node_modules)/, use: &#123; loader: \"babel-loader\", options: &#123; presets: [\"env\", \"react\"] &#125; &#125; &#125; ];&#125;// è¿™æ—¶å€™çš„å…¥å£æ–‡ä»¶ä¹Ÿéœ€è¦æ›´æ”¹ä¸‹æµ‹è¯•entry: './src/index.jsx', ç„¶åä¿®æ”¹ src/index.js ä¸º src/index.jsx: 1234import React from \"react\";import ReactDOM from \"react-dom\";ReactDOM.render(&lt;h1&gt;Hello, React.&lt;/h1&gt;, document.getElementById(\"root\")); è¿è¡Œï¼šnode_modules/.bin/webpackï¼Œç„¶åå†å»dist/app.jsï¼ŒæŸ¥æ‰¾å¦‚ä¸‹ï¼š 1234567// ..._reactDom2.default.render( _react2.default.createElement(\"h1\", null, \"Hello, React.\"), document.getElementById(\"root\"));// ... é‚£ä¹ˆï¼Œè¡¨ç¤ºè§£æ .jsx æˆåŠŸã€‚ è§£æ CSSå®‰è£…ï¼š 1yarn add style-loader@0.19.1 css-loader@0.28.8 --dev è®¾ç½®ï¼š 1234&#123; test: /\\.css$/, use: ['style-loader', 'css-loader']&#125; åœ¨ index.jsx é‡Œæ·»åŠ ï¼šimport &#39;./style.css&#39;;ï¼Œåœ¨style.cssæ·»åŠ ä¸€äº›ï¼š 1234body &#123; color: red; font-size: 16px;&#125; æ¥ç€è·‘ä¸€ä¸‹ï¼šnode_modules/.bin/webpackï¼Œå†æ¥ç€å» dist ä¸‹çš„ app.js æ‰¾æ‰¾ï¼š 12// moduleexports.push([module.i, \"body &#123;\\n color: red;\\n font-size: 16px;\\n&#125;\", \"\"]); å—¯ï¼Œå·²ç»è¢«è§£æå¹¶æ·»åŠ åˆ° app.js æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å¤§é‡çš„ css æ–‡ä»¶ï¼Œå¹¶éœ€è¦ js è§£æï¼Œé‚£å°±éœ€è¦ä¸ªæ’ä»¶å•ç‹¬å¤„ç†ï¼šExtractTextWebpackPlugin: 1yarn add extract-text-webpack-plugin@3.0.2 --dev è®¾ç½®ï¼š 12345678910111213141516171819plugins: [ new HtmlWebpackPlugin(&#123; template: \"./src/index.html\" &#125;), // Add new ExtractTextWebpackPlugin(\"styles.css\"),],module: &#123; rules: [ // Add &#123; test: /\\.css$/, use: ExtractTextWebpackPlugin.extract(&#123; fallback: \"style-loader\", use: \"css-loader\" &#125;) &#125; ]&#125; ç„¶åè·‘ä¸€ä¸‹ï¼Œdist ä¸‹å°±ä¼šå‡ºç°æˆ‘ä»¬è®¾ç½®çš„ styles.css æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æ·»åŠ è‡³ index.html: 1&lt;link href=\"style.css\" rel=\"stylesheet\" /&gt; è§£æ scsså®‰è£…: sass-loader node-sass 1yarn add sass-loader@6.0.6 node-sass@4.7.2 --dev è®¾ç½®ï¼š 1234567&#123; test: /\\.scss$/, use: ExtractTextWebpackPlugin.extract(&#123; fallback: \"style-loader\", use: [\"css-loader\", \"sass-loader\"] &#125;)&#125; è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å» src ä¸‹æ–°å»ºä¸€ä¸ª app.scss: 12345body &#123; h1 &#123; color: blue; &#125;&#125; å¹¶ä¸”åœ¨ index.jsx ä¸­å¼•å…¥ï¼š 12import \"./style.css\";import \"./app.scss\"; æ¥ç€ï¼Œè·‘ä¸€ä¸‹çœ‹çœ‹ï¼Œåˆ·~çš„ä¸€å£°ï¼Œæ‰“å¼€ dist ä¸‹çš„ styles.cssï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æˆ‘ä»¬å¼•å…¥çš„å†…å®¹ï¼š 1234567body &#123; color: red; font-size: 16px;&#125;body h1 &#123; color: blue;&#125; æµ‹è¯•é€šè¿‡ï¼Œå®Œç¾ï¼ å¤„ç†å›¾ç‰‡èµ„æºå®‰è£…ï¼šurl-loader 1yarn add file-loader@1.1.6 url-loader@0.6.2 --dev è®¾ç½®ï¼š 1234567891011&#123; test: /\\.(png|jpg|gif)$/, use: [ &#123; loader: 'url-loader', options: &#123; limit: 8192 &#125; &#125; ]&#125; åŒæ ·çš„ src ä¸‹æ‰¾å¼ å›¾ç‰‡ï¼Œæµ‹è¯•ä¸‹æ˜¯å¦é€šè¿‡ï¼Œåœ¨ index.jsx é‡Œæ·»åŠ ï¼š 123456789import ImgSrc from \"./react.png\";ReactDOM.render( &lt;div&gt; &lt;h1&gt;Hello, React.&lt;/h1&gt; &lt;img src=&#123;ImgSrc&#125; alt=\"react\" /&gt; &lt;/div&gt;, document.getElementById(\"root\")); ç„¶åè·‘ä¸€ä¸‹ï¼Œå‘ç°ï¼šå¦‚æœå›¾ç‰‡å¤§äº limit çš„è®¾ç½®ï¼ˆ8kb=8192/1024kbï¼‰å°±ä¼šå‡ºç°åœ¨ dist ç›®å½•ä¸‹ï¼Œå¦åˆ™ä¼šä»¥ base64 æ ¼å¼ç›´æ¥å¼•å…¥ä½¿ç”¨ã€‚ å¤„ç† fonts å­—ä½“å…ˆä¸‹è½½ä¸ªFont Awesomeè¯•è¯•æ°´ï¼š 1yarn add font-awesome è®¾ç½®ï¼š 1234567891011&#123; test: /\\.(woff|woff2|eot|ttf|otf|svg)$/, use: [ &#123; loader: 'url-loader', options: &#123; limit: 8192 &#125; &#125; ]&#125; ç„¶åæŒ‰ç…§ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤æ¥è¯•æ°´ï¼š å¤åˆ¶ font-awesome/ ç›®å½•åˆ°ä½ çš„é¡¹ç›®ä¸­ åªä¿ç•™ fonts æ–‡ä»¶ å’Œ scss æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œå…¶ä»–å¯ä»¥åˆ é™¤ æœ€åå»ä½ çš„ä¸»æ–‡ä»¶ï¼šapp.scss æ·»åŠ å®ƒï¼š 12$fa-font-path: \"./font-awesome/fonts\";@import \"./font-awesome/scss/font-awesome.scss\"; æ¥ç€æˆ‘ä»¬è·‘ä¸€ä¸‹ï¼šnode_modules/.bin/webpackï¼Œdist ä¸‹ç¬é—´å°±ä¼šå‡ºç°ä¸€å †æ–‡ä»¶ï¼Œè¡¨ç¤ºæµ‹è¯•é€šè¿‡ã€‚ å…¬å…±æ¨¡å—CommonsChunkPluginæ’ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¯é€‰çš„ç”¨äºå»ºç«‹ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶(åˆç§°ä½œ chunk)çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…æ‹¬å¤šä¸ªå…¥å£ chunk çš„å…¬å…±æ¨¡å—ã€‚ å…ˆè®¿é—®ç¼“å­˜ä¸­çš„å…¬å…±ä»£ç ï¼ŒåŠ å¿«æµè§ˆå™¨çš„è®¿é—®é€Ÿåº¦ã€‚ è®¾ç½®ï¼š 123456const webpack = require(\"webpack\");// ...new webpack.optimize.CommonsChunkPlugin(&#123; name: 'commons', // å…¬å…± chunk çš„åç§° filename: 'js/base.js' // å…¬å…± chunk çš„æ–‡ä»¶å&#125;), ä½¿ç”¨ webpack-dev-serverwebpack-dev-server ä¸ºä½ æä¾›äº†ä¸€ä¸ªç®€å•çš„ web serverï¼Œå¹¶ä¸”å…·æœ‰ live reloading(å®æ—¶é‡æ–°åŠ è½½) åŠŸèƒ½ã€‚ å®‰è£…ï¼š 1yarn add webpack-dev-server@2.9.7 --dev ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ dev serverï¼Œä»ä»€ä¹ˆä½ç½®æŸ¥æ‰¾æ–‡ä»¶ï¼š 1234devServer: &#123; contentBase: './dist', port: 8082&#125; æ¥ç€å» package.jsoné‡Œæ·»åŠ ä¸€ä¸ªå¯ä»¥ç›´æ¥è¿è¡Œ dev server çš„ scriptï¼š 1234\"scripts\": &#123; \"start\": \"webpack-dev-server --open\", \"build\": \"webpack\"&#125;, è¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½å»è®¿é—® node_modules/.bin/webpack äº†ï¼Œç›´æ¥å¯åŠ¨ï¼š 1234# å¯åŠ¨ dev servernpm start# æ‰“åŒ…æ„å»ºnpm run build æ¸…ç† /dist æ–‡ä»¶å¤¹éœ€æ±‚ï¼šæ¯æ¬¡ build çš„æ—¶å€™ï¼Œå‘ç° /dist ä¸‹çš„æ–‡ä»¶ä¸€ç›´ä¼šå †ç Œï¼Œèƒ½ä¸èƒ½æ¯æ¬¡æ„å»ºçš„æ—¶å€™ï¼Œåªç”Ÿæˆé¡¹ç›®ä¸­çœŸæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶ï¼Ÿ æ–¹æ³•ï¼šåœ¨æ¯æ¬¡æ„å»ºå‰æ¸…ç† /dist æ–‡ä»¶å¤¹ï¼Œè¿™æ ·åªä¼šç”Ÿæˆç”¨åˆ°çš„æ–‡ä»¶ã€‚ ä½¿ç”¨ clean-webpack-plugin æ’ä»¶æ¥è¿›è¡Œæ¸…ç†: 1yarn add clean-webpack-plugin --dev è®¾ç½®ï¼š 123const &#123; CleanWebpackPlugin &#125; = require(\"clean-webpack-plugin\");new CleanWebpackPlugin(); æ¨¡å—çƒ­æ›¿æ¢ HMRéœ€æ±‚ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œå¯ä¸å¯ä»¥æ¯æ¬¡ä¿å­˜ä¹‹åï¼Œä¸ç”¨åˆ·æ–°æµè§ˆå™¨ï¼Œå°±è‡ªåŠ¨æ›´æ–°äº†å‘¢ï¼Ÿ æ–¹æ³•ï¼šæ¨¡å—çƒ­æ›¿æ¢(hot module replacement æˆ– HMR)ï¼Œåªæ›´æ–°æ”¹åŠ¨çš„æ–‡ä»¶ã€‚ è®¾ç½®ï¼š 12345678910const webpack = require(\"webpack\");plugins: [ new webpack.HotModuleReplacementPlugin()],devServer: &#123; contentBase: './dist', hot: true, // å¼€å¯ port: 8082&#125; è¿™æ ·ï¼Œé‡å¯æœåŠ¡ï¼Œç„¶åä¿®æ”¹ index.jsx æ–‡ä»¶ï¼Œå°±ä¼šå‘ç°è‡ªåŠ¨æ›´æ–°äº†ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„ F5 äº†â€¦ å¯åŠ¨ Serverwebpack-dev-middleware æ˜¯ä¸€ä¸ªå°è£…å™¨(wrapper)ï¼Œå®ƒå¯ä»¥æŠŠ webpack å¤„ç†è¿‡çš„æ–‡ä»¶å‘é€åˆ°ä¸€ä¸ª serverã€‚ å®‰è£…ï¼š 12yarn add webpack-dev-middleware@2.0.6 --devyarn add express --dev æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª server.js: 1234567891011121314151617181920const express = require(\"express\");const webpack = require(\"webpack\");const webpackDevMiddleware = require(\"webpack-dev-middleware\");const app = express();const config = require(\"./webpack.config.js\");const compiler = webpack(config);// å‘Šè¯‰ express ä½¿ç”¨ webpack-dev-middlewareï¼Œ// ä»¥åŠå°† webpack.config.js é…ç½®æ–‡ä»¶ä½œä¸ºåŸºç¡€é…ç½®app.use( webpackDevMiddleware(compiler, &#123; publicPath: config.output.publicPath &#125;));// ä½¿ç”¨é…ç½®æ–‡ä»¶çš„ç«¯å£å·app.listen(config.devServer.port, function() &#123; console.log(`Example app listening on port $&#123;config.devServer.port&#125;!\\n`);&#125;); æˆ‘ä»¬å°†ä¼šåœ¨ server è„šæœ¬ä½¿ç”¨ publicPathï¼Œä»¥ç¡®ä¿æ–‡ä»¶èµ„æºèƒ½å¤Ÿæ­£ç¡®åœ° serve åœ¨ http://localhost:8082 ä¸‹ï¼š 12345output: &#123; path: path.resolve(__dirname, \"dist\"), filename: \"app.js\", publicPath: '/'&#125;, æ¥ç€ï¼Œæ·»åŠ ä¸€ä¸ª npm scriptï¼š 1\"server\": \"node server.js\" è·‘ä¸€ä¸‹ï¼šnpm run serverï¼Œè®¿é—® http://localhost:8082/ï¼Œå®Œç¾è¿è¡Œã€‚ æœ€åçš„é…ç½®æ–‡ä»¶webpack.config.js: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374const path = require(\"path\");const webpack = require(\"webpack\");const HtmlWebpackPlugin = require(\"html-webpack-plugin\");const ExtractTextWebpackPlugin = require(\"extract-text-webpack-plugin\");const &#123; CleanWebpackPlugin &#125; = require(\"clean-webpack-plugin\");module.exports = &#123; entry: \"./src/index.jsx\", output: &#123; path: path.resolve(__dirname, \"dist\"), filename: \"app.js\", publicPath: \"/\" &#125;, devServer: &#123; contentBase: \"./dist\", hot: true, port: 8082 &#125;, plugins: [ new CleanWebpackPlugin(), new HtmlWebpackPlugin(&#123; template: \"./src/index.html\" &#125;), new ExtractTextWebpackPlugin(\"styles.css\"), new webpack.optimize.CommonsChunkPlugin(&#123; name: \"commons\", filename: \"js/base.js\" &#125;), new webpack.HotModuleReplacementPlugin() ], module: &#123; rules: [ &#123; test: /\\.(js|jsx)$/, exclude: /(node_modules)/, use: &#123; loader: \"babel-loader\", options: &#123; presets: [\"env\", \"react\"] &#125; &#125; &#125;, &#123; test: /\\.(sc|c)ss$/, use: ExtractTextWebpackPlugin.extract(&#123; fallback: \"style-loader\", use: [\"css-loader\", \"sass-loader\"] &#125;) &#125;, &#123; test: /\\.(png|jpg|gif)$/, use: [ &#123; loader: \"url-loader\", options: &#123; limit: 8192 &#125; &#125; ] &#125;, &#123; test: /\\.(woff|woff2|eot|ttf|otf|svg)$/, use: [ &#123; loader: \"url-loader\", options: &#123; limit: 8192 &#125; &#125; ] &#125; ] &#125;&#125;; é¡¹ç›®ç›®å½•ç»“æ„å…³äº tree çš„ä½¿ç”¨æ€»ç»“ï¼šMacOS å¦‚ä½•ä½¿ç”¨ tree ç”Ÿæˆç›®å½•ç»“æ„ å¸¸ç”¨å‘½ä»¤ï¼š 1234567891011121314151617181920212223# ä¸‹è½½brew install tree# æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶tree -a# åªæ˜¾ç¤ºæ–‡ä»¶å¤¹tree -d# æ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ï¼Œå¦‚ä¸‰çº§tree -L 3# è¿‡æ»¤ï¼Œå¦‚é™¤node_modulesæ–‡ä»¶tree -I \"node_modules\"# è¾“å‡ºtree &gt; tree.md# Helptree --help# æœ€åï¼Œæˆ‘çš„è¾“å‡ºï¼štree -I \"node_modules\" &gt; tree.md tree.md çš„å†…å®¹ä¸ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940.â”œâ”€â”€ README.mdâ”œâ”€â”€ distâ”œâ”€â”€ package.jsonâ”œâ”€â”€ server.jsâ”œâ”€â”€ srcâ”‚ â”œâ”€â”€ app.scssâ”‚ â”œâ”€â”€ font-awesomeâ”‚ â”‚ â”œâ”€â”€ fontsâ”‚ â”‚ â”‚ â”œâ”€â”€ FontAwesome.otfâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.eotâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.svgâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.ttfâ”‚ â”‚ â”‚ â”œâ”€â”€ fontawesome-webfont.woffâ”‚ â”‚ â”‚ â””â”€â”€ fontawesome-webfont.woff2â”‚ â”‚ â””â”€â”€ scssâ”‚ â”‚ â”œâ”€â”€ \\_animated.scssâ”‚ â”‚ â”œâ”€â”€ \\_bordered-pulled.scssâ”‚ â”‚ â”œâ”€â”€ \\_core.scssâ”‚ â”‚ â”œâ”€â”€ \\_fixed-width.scssâ”‚ â”‚ â”œâ”€â”€ \\_icons.scssâ”‚ â”‚ â”œâ”€â”€ \\_larger.scssâ”‚ â”‚ â”œâ”€â”€ \\_list.scssâ”‚ â”‚ â”œâ”€â”€ \\_mixins.scssâ”‚ â”‚ â”œâ”€â”€ \\_path.scssâ”‚ â”‚ â”œâ”€â”€ \\_rotated-flipped.scssâ”‚ â”‚ â”œâ”€â”€ \\_screen-reader.scssâ”‚ â”‚ â”œâ”€â”€ \\_stacked.scssâ”‚ â”‚ â”œâ”€â”€ \\_variables.scssâ”‚ â”‚ â””â”€â”€ font-awesome.scssâ”‚ â”œâ”€â”€ index.htmlâ”‚ â”œâ”€â”€ index.jsâ”‚ â”œâ”€â”€ index.jsxâ”‚ â”œâ”€â”€ react.pngâ”‚ â””â”€â”€ style.cssâ”œâ”€â”€ tree.mdâ”œâ”€â”€ webpack.config.jsâ””â”€â”€ yarn.lock5 directories, 32 files é¡¹ç›®å¯åŠ¨ é¡¹ç›®é‡Œçš„æ¯ä¸€æ¬¡ Commitsï¼ŒåŸºæœ¬ä¸Šå¯¹åº”ç€ç›¸åº”çš„æ–‡ä»¶é…ç½®ï¼Œå¯ä»¥å¯¹ç…§ç€ç…ç…ã€‚ å…‹éš†ä¸€ä»½é¡¹ç›® 1git clone https://github.com/yangtao2o/happymmall.git è¿›å…¥ç›®å½• 1cd happymmall åˆ‡æ¢åˆ†æ”¯è‡³ webpack@3-react 1âœ happymmall git:(master) git checkout webpack@3-react ä¸‹è½½ä¾èµ–åŒ… 1âœ happymmall git:(webpack@3-react) yarn install å¯åŠ¨ 1âœ happymmall git:(webpack@3-react) npm start","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://www.yangtao.site/tags/webpack/"}]},{"title":"å…¥é—¨å­¦ä¹  React ä¸€äº›å®ä¾‹","slug":"react-demo","date":"2019-08-02T01:10:59.000Z","updated":"2019-11-11T07:26:35.177Z","comments":true,"path":"2019/08/02/react-demo/","link":"","permalink":"https://www.yangtao.site/2019/08/02/react-demo/","excerpt":"è¿™æ˜¯å‡ ä¸ªå…¥é—¨å­¦ä¹  React çš„å° Demoï¼Œå¸®åŠ©è‡ªå·±å­¦ä¹ äº†è§£ React çš„è¿è¡Œæœºåˆ¶ï¼Œç»“åˆ Reactå®˜æ–¹æ–‡æ¡£ï¼Œä¼šæ›´ä½³å™¢â€¦","text":"è¿™æ˜¯å‡ ä¸ªå…¥é—¨å­¦ä¹  React çš„å° Demoï¼Œå¸®åŠ©è‡ªå·±å­¦ä¹ äº†è§£ React çš„è¿è¡Œæœºåˆ¶ï¼Œç»“åˆ Reactå®˜æ–¹æ–‡æ¡£ï¼Œä¼šæ›´ä½³å™¢â€¦ DEMO ç›®å½• ReactDOM.render() Use Array in JSX ç»„ä»¶ this.props.children PropTypes è·å–çœŸå®çš„ DOM èŠ‚ç‚¹ this.state è¡¨å• ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ ä½¿ç”¨ Promise è·å– Github çš„æ•°æ® Todo List äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰ å¼•å…¥èµ„æº With babel-standalone 123456789&lt;div id=\"output\"&gt;&lt;/div&gt;&lt;!-- Load Babel --&gt;&lt;!-- v6 &lt;script src=\"https://unpkg.com/babel-standalone@6/babel.min.js\"&gt;&lt;/script&gt; --&gt;&lt;script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"&gt;&lt;/script&gt;&lt;!-- Your custom script here --&gt;&lt;script type=\"text/babel\"&gt;const getMessage = () =&gt; \"Hello World\";document.getElementById('output').innerHTML = getMessage();&lt;/script&gt; Demo01: ReactDOM.render()Demo / Source åˆå§‹åŒ–å’±å…ˆ Hello ä¸€ä¸‹ï¼Œä½¿ç”¨ jsx è¯­æ³•ï¼Œç¢°åˆ°ä»£ç å—ä½¿ç”¨ï¼ˆ{ }ï¼‰åŒ…èµ·æ¥ï¼Œç¢°åˆ° html æ ‡ç­¾ï¼Œå°±ä½¿ç”¨ï¼ˆ&lt; /&gt;ï¼‰: 123456789var names = [\"AAA\", \"BBB\", \"CCC\"];ReactDOM.render( &lt;div&gt; &#123;names.map(function(name) &#123; return &lt;h2&gt;Hello, &#123;name&#125;!&lt;/h2&gt;; &#125;)&#125; &lt;/div&gt;, document.getElementById(\"example\")); Demo02: Use Array in JSXDemo / Source å¦‚æœ JavaScript çš„å˜é‡æ˜¯ä¸ªæ•°ç»„ï¼Œä¼šå±•å¼€è¿™ä¸ªæ•°ç»„çš„æ‰€æœ‰é¡¹. 12var arr = [&lt;h1 key=\"h1\"&gt;Hello,&lt;/h1&gt;, &lt;h2 key=\"h2\"&gt;React is awesome!&lt;/h2&gt;];ReactDOM.render(&lt;div&gt;&#123;arr&#125;&lt;/div&gt;, document.getElementById(\"example\")); Demo03: ç»„ä»¶Demo / Source å˜é‡ HelloMsg æ˜¯ä¸€ä¸ªç»„ä»¶ç±»ã€‚æ¨¡æ¿æ’å…¥ æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ HelloMsg çš„ä¸€ä¸ªå®ä¾‹ã€‚æ‰€æœ‰ç»„ä»¶ç±»éƒ½å¿…é¡»æœ‰è‡ªå·±çš„ render æ–¹æ³•ï¼Œç”¨äºè¾“å‡ºç»„ä»¶ã€‚ 123456789class HelloMsg extends React.Component &#123; render() &#123; return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;; &#125;&#125;ReactDOM.render( &lt;HelloMsg name=\"Dataozi\" /&gt;, document.getElementById(\"example\")); Demo04: this.props.childrenDemo / Source this.props å¯¹è±¡çš„å±æ€§ä¸ç»„ä»¶çš„å±æ€§ä¸€ä¸€å¯¹åº”ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå°±æ˜¯ this.props.children å±æ€§ã€‚ ps: æ³¨æ„å¤§å°å†™ React.Childrenã€React.Component 12345678910111213141516171819class NotesList extends React.Component &#123; render() &#123; return ( &lt;ol&gt; &#123;React.Children.map(this.props.children, function(child) &#123; return &lt;li&gt;&#123;child&#125;&lt;/li&gt;; &#125;)&#125; &lt;/ol&gt; ); &#125;&#125;ReactDOM.render( &lt;NotesList&gt; &lt;span&gt;Hello&lt;/span&gt; &lt;span&gt;World&lt;/span&gt; &lt;span&gt;React&lt;/span&gt; &lt;/NotesList&gt;, document.getElementById(\"example\")); Demo05: PropTypesDemo / Source ä½¿ç”¨ PropTypes è¿›è¡Œç±»å‹æ£€æŸ¥ React å†…ç½®äº†ä¸€äº›ç±»å‹æ£€æŸ¥çš„åŠŸèƒ½ã€‚è¦åœ¨ç»„ä»¶çš„ props ä¸Šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä½ åªéœ€é…ç½®ç‰¹å®šçš„ propTypes å±æ€§: 12345678910111213141516171819202122var data = &#123; tilte: \"Hello\", age: 19, isStudent: true&#125;;class MyTitle extends React.Component &#123; static propTypes = &#123; tilte: PropTypes.string, age: PropTypes.number, isStudent: PropTypes.bool &#125;; render() &#123; return ( &lt;div&gt; &lt;h1&gt;&#123;this.props.data.tilte&#125;&lt;/h1&gt; &lt;h2&gt;&#123;this.props.data.age&#125;&lt;/h2&gt; &lt;h3&gt;&#123;this.props.data.isStudent ? \"Yes\" : \"No\"&#125;&lt;/h3&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;MyTitle data=&#123;data&#125; /&gt;, document.getElementById(\"root\")); è¿˜å¯ä»¥é€šè¿‡é…ç½®ç‰¹å®šçš„ defaultProps å±æ€§æ¥å®šä¹‰ props çš„é»˜è®¤å€¼ï¼š 1234567891011class DefaultTitle extends React.Component &#123; render() &#123; return &lt;h4&gt;&#123;this.props.title&#125;&lt;/h4&gt;; &#125;&#125;//æŒ‡å®š props çš„é»˜è®¤å€¼ï¼šDefaultTitle.defaultProps = &#123; title: \"Hello React!\"&#125;;ReactDOM.render(&lt;DefaultTitle /&gt;, document.getElementById(\"root2\")); Demo06: è·å–çœŸå®çš„ DOM èŠ‚ç‚¹Demo / Source Refs and the DOM Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ ã€‚ åˆ›å»º Refs: Refs æ˜¯ç”±React.createRef()åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§é™„åŠ åˆ° React å…ƒç´ ï¼ˆæ¯”å¦‚ inputï¼‰ è®¿é—® Refs: å½“ ref è¢«ä¼ é€’ç»™ render ä¸­çš„å…ƒç´ æ—¶ï¼Œå¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥åœ¨ ref çš„ current å±æ€§ä¸­è¢«è®¿é—®ï¼Œthis.myTextFocus.current.focus(); ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å®ä¾‹ ç»„ä»¶ MyComponent çš„å­èŠ‚ç‚¹æœ‰ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†ï¼Œç”¨äºè·å–ç”¨æˆ·çš„è¾“å…¥ã€‚è¿™æ—¶å°±å¿…é¡»è·å–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œè™šæ‹Ÿ DOM æ˜¯æ‹¿ä¸åˆ°ç”¨æˆ·è¾“å…¥çš„ã€‚ 123456789101112131415161718192021222324class MyComponent extends React.Component &#123; constructor(props) &#123; super(props); // åˆ›å»ºä¸€ä¸ª ref æ¥å­˜å‚¨ myTextFocus çš„ DOM å…ƒç´  this.myTextFocus = React.createRef(); this.handerClick = this.handerClick.bind(this); &#125; handerClick() &#123; // ç›´æ¥ä½¿ç”¨åŸç”Ÿ API ä½¿ text è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹ // é€šè¿‡ \"current\" æ¥è®¿é—® DOM èŠ‚ç‚¹ this.myTextFocus.current.focus(); &#125; render() &#123; // å‘Šè¯‰ React æˆ‘ä»¬æƒ³æŠŠ &lt;input&gt; ref å…³è”åˆ° // æ„é€ å™¨é‡Œåˆ›å»ºçš„ `myTextFocus` ä¸Š return ( &lt;div&gt; &lt;input type=\"text\" ref=&#123;this.myTextFocus&#125; /&gt; &lt;input type=\"button\" value=\"ç‚¹å‡»èšç„¦\" onClick=&#123;this.handerClick&#125; /&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;MyComponent /&gt;, document.getElementById(\"root\")); Demo07: this.stateDemo / Source State &amp; ç”Ÿå‘½å‘¨æœŸ å­¦ä¹ å¦‚ä½•å°è£…çœŸæ­£å¯å¤ç”¨çš„ Clock ç»„ä»¶ã€‚å®ƒå°†è®¾ç½®è‡ªå·±çš„è®¡æ—¶å™¨å¹¶æ¯ç§’æ›´æ–°ä¸€æ¬¡ã€‚ 1234567891011121314151617181920212223242526272829303132class Clock extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; date: new Date() &#125;; //ä¸º this.state èµ‹åˆå€¼ &#125; componentDidMount() &#123; // Clockåˆæ¬¡è¢«æ¸²æŸ“åˆ°DOMæ—¶ï¼Œä¸º\u001få…¶æŒ‚è½½ä¸€ä¸ªè®¡æ—¶å™¨ this.timerID = setInterval(() =&gt; this.tick(), 1000); &#125; componentWillUnmount() &#123; // Clockè¢«åˆ é™¤æ—¶ï¼Œå¸è½½å…¶è®¡æ—¶å™¨ clearInterval(this.timerID); &#125; tick() &#123; // ä½¿ç”¨ this.setState() æ¥æ—¶åˆ»æ›´æ–°ç»„ä»¶ state this.setState(&#123; date: new Date() &#125;); &#125; render() &#123; return ( &lt;div&gt; &lt;h1&gt;Hello, React!&lt;/h1&gt; &lt;h2&gt;ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´ï¼š&#123;this.state.date.toLocaleTimeString()&#125;&lt;/h2&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;Clock /&gt;, document.getElementById(\"root\")); Demo08: è¡¨å•Demo / Source è¡¨å• å—æ§ç»„ä»¶ï¼šæ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œï¼Œè¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚ å³ï¼šè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536class NameForm extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; // å”¯ä¸€æ•°æ®æº value: \"\" &#125;; this.handleChange = this.handleChange.bind(this); this.handleSubmit = this.handleSubmit.bind(this); &#125; handleChange(event) &#123; this.setState(&#123; value: event.target.value // æ˜¾ç¤ºçš„å€¼å°†éšç€ç”¨æˆ·è¾“å…¥è€Œæ›´æ–° &#125;); &#125; handleSubmit(event) &#123; if (this.state.value) &#123; alert(\"æ¥å—åˆ°çš„nameå€¼æ˜¯ï¼š\" + this.state.value); &#125; event.preventDefault(); &#125; render() &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;input type=\"text\" value=&#123;this.state.value&#125; onChange=&#123;this.handleChange&#125; /&gt; &lt;input type=\"submit\" value=\"æäº¤\" /&gt; &lt;/form&gt; ); &#125;&#125;ReactDOM.render(&lt;NameForm /&gt;, document.getElementById(\"root\")); éå—æ§ç»„ä»¶ï¼šè¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ï¼Œå³ä½¿ç”¨ ref æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ® Demo / Source 123456789101112131415161718192021class NameForm extends React.Component &#123; constructor(props) &#123; super(props); this.input = React.createRef(); this.handleSubmit = this.handleSubmit.bind(this); &#125; handleSubmit(event) &#123; alert(\"æ¥å—åˆ°çš„nameå€¼æ˜¯ï¼š\" + this.input.current.value); event.preventDefault(); &#125; render() &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;input type=\"text\" ref=&#123;this.input&#125; /&gt; &lt;input type=\"submit\" value=\"æäº¤\" /&gt; &lt;/form&gt; ); &#125;&#125;ReactDOM.render(&lt;NameForm /&gt;, document.getElementById(\"root\")); Demo09: ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸDemo / Source ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ ç”Ÿå‘½å‘¨æœŸå›¾è°±é€ŸæŸ¥è¡¨ React çš„ç”Ÿå‘½å‘¨æœŸ â€” Ant Design è¯­é›€ ä¸»è¦è·¯çº¿é¡ºåºï¼šæŒ‚è½½ - æ›´æ–° - å¸è½½ - é”™è¯¯å¤„ç† æŒ‚è½½ å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨å¦‚ä¸‹ï¼š consctructor() â€” React ç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œä¸åˆå§‹åŒ– state æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦ static getDerivedStateFromProps() â€” ä¸å¸¸ç”¨ render() â€” å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œå¹¶ä¸”åº”è¯¥æ˜¯çº¯å‡½æ•° componentDidMount() â€” ä¾èµ–äº DOM èŠ‚ç‚¹çš„åˆå§‹åŒ–åº”è¯¥åœ¨è¿™é‡Œ æ›´æ–° å½“ç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘æ›´æ–°ï¼š static getDerivedStateFromProps() shouldComponentUpdate() render() getSnapshotBeforeUpdate() â€” ä¸å¸¸ç”¨ componentDidUpdate() â€” åœ¨æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨ å¸è½½ å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ï¼š componentWillUnmount() â€” ä¼šåœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨ é”™è¯¯å¤„ç† å½“æ¸²æŸ“è¿‡ç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œæˆ–å­ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯æ—¶ï¼š static getDerivedStateFromError() componentDidCatch() è¿‡æœŸçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š UNSAFE_componentWillMount() â€” æŒ‚è½½å‰è°ƒç”¨ï¼Œç›®å‰ä½¿ç”¨ constructor()åˆå§‹åŒ– state UNSAFE_componentWillReceiveProps() UNSAFE_componentWillUpdate() 12345678910111213141516171819202122232425262728293031323334353637383940class Hello extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; fontSize: 12, opacity: 0.01 &#125;; &#125; componentDidMount() &#123; this.timerID = setInterval(() =&gt; &#123; let opacity = this.state.opacity; let fontSize = this.state.fontSize; opacity += 0.02; fontSize += 1; if (opacity &gt;= 1) &#123; opacity = 0.01; &#125; if (fontSize &gt;= 63) &#123; fontSize = 12; &#125; this.setState(&#123; fontSize, opacity &#125;); &#125;, 100); &#125; componentWillUnmount() &#123; clearInterval(this.timerID); &#125; render() &#123; return ( &lt;h1 style=&#123;&#123; opacity: this.state.opacity, fontSize: this.state.fontSize &#125;&#125; &gt; Hello, &#123;this.props.name&#125; &lt;/h1&gt; ); &#125;&#125;ReactDOM.render(&lt;Hello name=\"React\" /&gt;, document.getElementById(\"root\")); Demo10: ä½¿ç”¨ Promise è·å– Github çš„æ•°æ®Demo / Source 12345678ReactDOM.render( &lt;ReportList promise=&#123;$.getJSON( \"https://api.github.com/search/repositories?q=javascript&amp;sort=stars\" )&#125; /&gt;, document.getElementById(\"root\")); ä» Github çš„ API æŠ“å–æ•°æ®ï¼Œç„¶åå°† Promise å¯¹è±¡ä½œä¸ºå±æ€§ï¼Œä¼ ç»™ ReportList ç»„ä»¶ã€‚ å¦‚æœ Promise å¯¹è±¡æ­£åœ¨æŠ“å–æ•°æ®ï¼ˆpending çŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºâ€loadingâ€¦â€ï¼› å¦‚æœ Promise å¯¹è±¡æŠ¥é”™ï¼ˆrejected çŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ï¼› å¦‚æœ Promise å¯¹è±¡æŠ“å–æ•°æ®æˆåŠŸï¼ˆfulfilled çŠ¶æ€ï¼‰ï¼Œç»„ä»¶æ˜¾ç¤ºè·å–çš„æ•°æ®ã€‚ åœ¨è¿™é‡ŒæŸ¥çœ‹å®Œæ•´ Demo/æºç  â€” è°·æ­Œæµè§ˆå™¨æœ‰æ—¶å€™ä¼šæŠ¥è·¨åŸŸçš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç«ç‹ç­‰æµè§ˆå™¨è¯•çœ‹ æ¥ä¸‹æ¥æ¥å‡ ä¸ªæ··åˆå®æˆ˜å§Demo11: Todo ListDemo / Source React todo list ä¸»è¦ç»ƒä¹ ä½¿ç”¨ props å’Œ stateï¼Œä½¿ç”¨ state ä¿å­˜ç°æœ‰çš„å¾…åŠäº‹é¡¹åˆ—è¡¨åŠç”¨æˆ·çš„ä¸€äº›æ“ä½œï¼ˆåˆ é™¤ã€å®Œæˆï¼‰ç­‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class TodoApp extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; items: [] &#125;; this.addItem = this.addItem.bind(this); this.deleteItem = this.deleteItem.bind(this); this.doneItem = this.doneItem.bind(this); &#125; addItem(item) &#123; const newItem = &#123; text: item.text, id: Date.now(), done: false &#125;; this.setState(&#123; items: this.state.items.concat(newItem) &#125;); &#125; deleteItem(index) &#123; this.state.items.splice(index, 1); this.setState(&#123; items: this.state.items &#125;); &#125; doneItem(index) &#123; const items = this.state.items; const todo = items[index]; items.splice(index, 1); todo.done = !todo.done; todo.done ? items.unshift(todo) : items.push(todo); this.setState(&#123; items &#125;); &#125; render() &#123; return ( &lt;div className=\"container\"&gt; &lt;h1&gt;TODO&lt;/h1&gt; &lt;TodoList items=&#123;this.state.items&#125; deleteClick=&#123;this.deleteItem&#125; doneClick=&#123;this.doneItem&#125; /&gt; &lt;TodoForm addItem=&#123;this.addItem&#125; items=&#123;this.state.items&#125; /&gt; &lt;/div&gt; ); &#125;&#125; Demo12: äº•å­—æ£‹ï¼ˆTic Tac Toeï¼‰Demo / Source Tic Tac Toe äº•å­—æ£‹æ¸¸æˆæ•™ç¨‹æ–‡æ¡£ React çš„äº•å­—è¿‡ä¸‰å…³ tic-tac-toe(ä¸‰è¿æ£‹)æ¸¸æˆçš„åŠŸèƒ½ èƒ½å¤Ÿåˆ¤å®šç©å®¶ä½•æ—¶è·èƒœ èƒ½å¤Ÿè®°å½•æ¸¸æˆè¿›ç¨‹ å…è®¸ç©å®¶æŸ¥çœ‹æ¸¸æˆçš„å†å²è®°å½•ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ä»»æ„ä¸€ä¸ªå†å²ç‰ˆæœ¬çš„æ¸¸æˆæ£‹ç›˜çŠ¶æ€ åœ¨æ¸¸æˆå†å²è®°å½•åˆ—è¡¨æ˜¾ç¤ºæ¯ä¸€æ­¥æ£‹çš„åæ ‡ï¼Œæ ¼å¼ä¸º (åˆ—å·, è¡Œå·) åœ¨å†å²è®°å½•åˆ—è¡¨ä¸­åŠ ç²—æ˜¾ç¤ºå½“å‰é€‰æ‹©çš„é¡¹ç›® å½“æ— äººè·èƒœæ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªå¹³å±€çš„æ¶ˆæ¯ ä½¿ç”¨ä¸¤ä¸ªå¾ªç¯æ¥æ¸²æŸ“å‡ºæ£‹ç›˜çš„æ ¼å­ï¼Œè€Œä¸æ˜¯åœ¨ä»£ç é‡Œå†™æ­»ï¼ˆhardcodeï¼‰ æ·»åŠ ä¸€ä¸ªå¯ä»¥å‡åºæˆ–é™åºæ˜¾ç¤ºå†å²è®°å½•çš„æŒ‰é’® æ¯å½“æœ‰äººè·èƒœæ—¶ï¼Œé«˜äº®æ˜¾ç¤ºè¿æˆä¸€çº¿çš„ 3 é¢—æ£‹å­ å­¦ä¹ èµ„æ–™ React å…¥é—¨å®ä¾‹æ•™ç¨‹ â€” é˜®ä¸€å³° react-demos","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"react","slug":"react","permalink":"https://www.yangtao.site/tags/react/"}]},{"title":"Nodejs æ—¥å¸¸æ‚è®°","slug":"node-learning","date":"2019-07-10T12:30:38.000Z","updated":"2019-11-11T06:55:33.178Z","comments":true,"path":"2019/07/10/node-learning/","link":"","permalink":"https://www.yangtao.site/2019/07/10/node-learning/","excerpt":"Node.jsÂ® is a JavaScript runtime built on Chrome&#39;s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. Node.jsâ€™ package ecosystem, npm, is the largest ecosystem of open source libraries in the world.","text":"Node.jsÂ® is a JavaScript runtime built on Chrome&#39;s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. Node.jsâ€™ package ecosystem, npm, is the largest ecosystem of open source libraries in the world. å­¦ä¹ ä¹¦ç±|è§†é¢‘ èœé¸Ÿæ•™ç¨‹ - æ–‡æ¡£ 7-days-nodejs - æ–‡ç«  ã€ŠNode.js åŒ…æ•™ä¸åŒ…ä¼šã€‹ â€“ æ–‡ç«  ã€Šäº†ä¸èµ·çš„ Node.jsï¼šå°† JavaScript è¿›è¡Œåˆ°åº•ã€‹- ä¹¦ç± ã€Šæ–°æ—¶æœŸçš„ Node.js å…¥é—¨ã€‹- ä¹¦ç± Node.js ä»é›¶å¼€å‘ Web Server åšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡ - è§†é¢‘ å­¦ä¹ èµ„æ–™ Node.js å…¥é—¨ Node.js å®˜æ–¹æ–‡æ¡£ CNodeï¼šNode.js ä¸“ä¸šä¸­æ–‡ç¤¾åŒº ã€å…¨æ–‡ã€‘ç‹¼å”ï¼šå¦‚ä½•æ­£ç¡®çš„å­¦ä¹  Node.js Express-4.x å®˜æ–¹æŒ‡å— react å…¨å®¶æ¡¶+express å®æˆ˜ä¸ªäººåšå®¢ç³»åˆ—æ•™ç¨‹ è¯¦è§£å¦‚ä½•ä»é›¶å¼€å§‹æ­å»º Express+Vue å¼€å‘ç¯å¢ƒ vue é¡¹ç›®-å‰ç«¯ Vue åå° express ã€å®æˆ˜ã€‘ç”¨ express+MongoDB æ­å»ºä¸€ä¸ªå®Œæ•´çš„å‰ç«¯é¡¹ç›® åŸºäº Vue+express çš„åšå®¢é¡¹ç›® Promise Node.js æœ€æ–°æŠ€æœ¯æ ˆä¹‹ Promise ç¯‡ - 2015 ç†è§£ Promise çš„å·¥ä½œåŸç† JavaScript Promise è¿·ä½ ä¹¦ï¼ˆä¸­æ–‡ç‰ˆï¼‰ å‘¨è¾¹å¤§å’– wesome-nodejs @justjavac å¤§ç¥çš„å…è´¹çš„è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç± ã€çŸ¥ä¹ Liveã€‘ç‹¼å”ï¼šå¦‚ä½•æ­£ç¡®çš„å­¦ä¹  Node.js å­¦ä¹ æ—¥å¿— Http Tcp Connect Event Express-init Express-spider Express-spider-more npm package ç§¯ç´¯ Node ç›¸å…³ ç½‘ç«™åˆå§‹åŒ–ï¼Œå®ç° GET å’Œ POST çš„ Ajax è¯·æ±‚ ç™»å½•æ¨¡å— ä¸Šä¼ å›¾ç‰‡æ¨¡å— node-blog-express-koa2 node-express-mongodb node-express-spider","categories":[],"tags":[]},{"title":"ä½¿ç”¨ superagent ä¸ cheerio å®Œæˆç®€å•çˆ¬è™«","slug":"node-express-spider","date":"2019-07-06T06:38:13.000Z","updated":"2019-11-11T06:51:44.246Z","comments":true,"path":"2019/07/06/node-express-spider/","link":"","permalink":"https://www.yangtao.site/2019/07/06/node-express-spider/","excerpt":"çˆ¬ä¸€ä¸‹ CNode ä¸“ä¸šä¸­æ–‡ç¤¾åŒº","text":"çˆ¬ä¸€ä¸‹ CNode ä¸“ä¸šä¸­æ–‡ç¤¾åŒº 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647const express = require(\"express\");const superagent = require(\"superagent\");const cheerio = require(\"cheerio\");const app = express();const PORT = process.env.PORT || 8000;const URL = \"https://cnodejs.org\";/** * å½“åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:8000/ æ—¶ï¼Œè¾“å‡º CNode(https://cnodejs.org/ ) ç¤¾åŒºé¦–é¡µçš„æ‰€æœ‰å¸–å­æ ‡é¢˜å’Œé“¾æ¥ï¼Œä»¥ json çš„å½¢å¼ã€‚ */app.get(\"/\", (req, res, next) =&gt; &#123; // ä½¿ç”¨ superagent è·å– url superagent.get(URL, (err, sres) =&gt; &#123; if (err) &#123; return next(err); &#125; const $ = cheerio.load(sres.text); const items = []; const $target = $(\"#topic_list .topic_title\"); let itemsHtml = \"\"; $target.each((i, item) =&gt; &#123; let $this = $(item); items.push(&#123; title: $this.attr(\"title\"), url: URL + $this.attr(\"href\") &#125;); &#125;); console.log(\"items---&gt;\", items); // ä»¥ JSON æ ¼å¼æ‰“å° if (items) &#123; $(items).each((i, item) =&gt; &#123; itemsHtml += `&lt;li&gt;&lt;a href=\"$&#123;item.url&#125;\" title=\"$&#123;item.title&#125;\"&gt;$&#123;item.title&#125;&lt;/a&gt;&lt;/li&gt;`; &#125;); itemsHtml = `&lt;ol id=\"listItem\"&gt;$&#123;itemsHtml&#125;&lt;/ol&gt;`; &#125; else &#123; itemsHtml = `&lt;p&gt;æš‚æ—¶è¿˜è·å–ä¸åˆ°æ•°æ®...&lt;/p&gt;`; &#125; res.send(itemsHtml); &#125;);&#125;);app.listen(PORT, (req, res) =&gt; &#123; console.log(\"App is listening at port \" + PORT);&#125;); å¹¶å‘è¯·æ±‚å¤„ç†è¾“å‡º CNode ç¤¾åŒºé¦–é¡µçš„æ‰€æœ‰ä¸»é¢˜çš„æ ‡é¢˜ï¼Œé“¾æ¥å’Œç¬¬ä¸€æ¡è¯„è®ºï¼Œä»¥ json çš„æ ¼å¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990const express = require(\"express\");const superagent = require(\"superagent\");const cheerio = require(\"cheerio\");const morgan = require(\"morgan\");const async = require(\"async\");const app = express();const PORT = process.env.PORT || 8000;const URL = \"https://cnodejs.org\";app.set(\"view engine\", \"ejs\");app.use(morgan(\"dev\"));app.use(express.json());/** * æ§åˆ¶å¹¶å‘è¯·æ±‚ */app.get(\"/\", (req, res, next) =&gt; &#123; console.log(\"loading...\"); console.log(`æ­£åœ¨è¯·æ±‚$&#123;URL&#125;`); superagent.get(URL).end((err, sres) =&gt; &#123; if (err) &#123; return console.error(err); &#125; const topicUrls = []; const $ = cheerio.load(sres.text); let concurrencyCount = 0; const fetchUrl = (url, callback) =&gt; &#123; let getItem = &#123;&#125;; superagent.get(url).end((err, sres) =&gt; &#123; if (err) &#123; return new Error(err); &#125; const $ = cheerio.load(sres.text); concurrencyCount++; getItem = &#123; href: url, title: $(\".topic_full_title\") .text() .replace(/[\\r\\n]/g, \"\"), comment: $(\".reply_content\") .eq(0) .text() .replace(/[\\ \\r\\n]/g, \"\") &#125;; console.log( `\\r\\næ­£åœ¨è¯·æ±‚ç¬¬ $&#123;concurrencyCount&#125; æ¡çš„æ•°æ®data:\\r\\n$&#123;[ JSON.stringify(getItem) ]&#125;` ); callback(null, getItem); &#125;); &#125;; $(\"#topic_list .topic_title\").each(function(idx, element) &#123; const $element = $(element); const href = URL + $element.attr(\"href\"); console.log(`æ­£åœ¨è·å–ç¬¬ $&#123;idx + 1&#125; æ¡åˆ—è¡¨çš„urlï¼š$&#123;href&#125;`); topicUrls.push(href); &#125;); if (topicUrls.length &lt; 1) return; console.log(`\\r\\nå¼€å§‹å¹¶å‘è¯·æ±‚...\\r\\n`); async.mapLimit( topicUrls, 3, (url, callback) =&gt; &#123; console.time(\"delay\"); fetchUrl(url, callback); console.timeEnd(\"delay\"); &#125;, (err, results) =&gt; &#123; console.log(\"\\rè·å–åˆ°çš„æ•°æ®: \\r\\n\", results); res.json(results); &#125; ); &#125;);&#125;);app.listen(PORT, (req, res) =&gt; &#123; console.log(\"App is listening at port \" + PORT);&#125;); ä¼˜åŒ–ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102const express = require(\"express\");const superagent = require(\"superagent\");const cheerio = require(\"cheerio\");const morgan = require(\"morgan\");const async = require(\"async\");const app = express();const PORT = process.env.PORT || 3000;const URL = \"https://cnodejs.org\";const ALLNUMS = 20;const TIEMS = 2;app.set(\"view engine\", \"ejs\");app.use(morgan(\"dev\"));app.use(express.json());/** * æ§åˆ¶å¹¶å‘è¯·æ±‚ */app.get(\"/\", (req, res, next) =&gt; &#123; console.log(\"loading...\"); console.log(`æ­£åœ¨è¯·æ±‚$&#123;URL&#125;`); const getHomePageUrls = new Promise((resolve, reject) =&gt; &#123; superagent.get(URL).end((err, sres) =&gt; &#123; if (err) &#123; return reject(err); &#125; const topicUrls = []; const $ = cheerio.load(sres.text); $(\"#topic_list .topic_title\").each(function(idx, element) &#123; const $element = $(element); const href = URL + $element.attr(\"href\"); console.log(`æ­£åœ¨è·å–ç¬¬ $&#123;idx + 1&#125; æ¡åˆ—è¡¨çš„urlï¼š$&#123;href&#125;`); topicUrls.push(href); &#125;); if (topicUrls.length &gt; 0) &#123; resolve(topicUrls.slice(0, ALLNUMS)); &#125; &#125;); &#125;); let concurrencyCount = 0; const fetchUrl = (url, callback) =&gt; &#123; let getItem = &#123;&#125;; superagent.get(url).end((err, sres) =&gt; &#123; if (err) &#123; return new Error(err); &#125; const $ = cheerio.load(sres.text); concurrencyCount++; getItem = &#123; href: url, title: $(\".topic_full_title\") .text() .replace(/[\\ \\r\\n]/g, \"\"), comment: $(\".reply_content\") .eq(0) .text() .replace(/[\\ \\r\\n]/g, \"\") &#125;; console.log( `\\r\\næ­£åœ¨è¯·æ±‚ç¬¬ $&#123;concurrencyCount&#125; æ¡çš„æ•°æ®data:\\r\\n$&#123;[ JSON.stringify(getItem) ]&#125;` ); callback(null, getItem); &#125;); &#125;; Promise.race([getHomePageUrls]) .then(itemUrls =&gt; &#123; console.log(`\\r\\nå¼€å§‹å¹¶å‘ $&#123;TIEMS&#125; æ¬¡è¯·æ±‚...\\r\\n`); async.mapLimit( itemUrls, TIEMS, (url, callback) =&gt; &#123; console.time(\"delay\"); fetchUrl(url, callback); console.timeEnd(\"delay\"); &#125;, (err, results) =&gt; &#123; console.log(\"\\rè·å–åˆ°çš„æ•°æ®: \\r\\n\", results); res.json(results); &#125; ); &#125;) .catch(err =&gt; console.error(err));&#125;);app.listen(PORT, (req, res) =&gt; &#123; console.log(\"App is listening at port \" + PORT);&#125;);","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"Nodejsç³»åˆ—ä¹‹Events","slug":"node-events","date":"2019-06-25T12:11:58.000Z","updated":"2019-11-11T06:52:24.259Z","comments":true,"path":"2019/06/25/node-events/","link":"","permalink":"https://www.yangtao.site/2019/06/25/node-events/","excerpt":"Node.js äº‹ä»¶å¾ªç¯Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚","text":"Node.js äº‹ä»¶å¾ªç¯Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚ Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚ Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚ Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°. EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚onå’Œemitã€‚ on å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œemit å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ 12345678910111213141516171819const events = require('events')// åˆ›å»º eventEmitter å¯¹è±¡const eventEmitter = new events.EventEmitter()// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åºeventEmitter.on('connection', () =&gt; &#123; console.log('å»ºç«‹è¿æ¥...') // è§¦å‘ dataReceived äº‹ä»¶ eventEmitter.emit('dataReceived')&#125;)// ç»‘å®š dataReceived äº‹ä»¶å¤„ç†ç¨‹åºeventEmitter.on('dataReceived', () =&gt; &#123; console.log('æ¥æ”¶æ•°æ®ä¸­...')&#125;)// è§¦å‘ connection äº‹ä»¶eventEmitter.emit('connection')console.log(\"æ•°æ®æ¥æ”¶å®Œæ¯•ï¼\"); 1234âœ node 02-event.jså»ºç«‹è¿æ¥...æ¥æ”¶æ•°æ®ä¸­...æ•°æ®æ¥æ”¶å®Œæ¯•ï¼ EventEmitter ç±»å†™æ³•ï¼š 12345678910const EventEmitter = require('events');// class ç»§æ‰¿class MyEmitter extends EventEmitter &#123;&#125;// å®ä¾‹åŒ–const myEmitter = new MyEmitter();myEmitter.on('event', () =&gt; &#123; console.log('è§¦å‘äº‹ä»¶');&#125;);myEmitter.emit('event'); EventEmitter ç±»Node.js æ‰€æœ‰çš„å¼‚æ­¥ I/O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚ Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚ EventEmitter ç±»ç”± events æ¨¡å—å®šä¹‰ï¼š 12const EventEmitter = require('events');const myEmitter = new EventEmitter(); EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚ å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚ å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚ 1234567891011121314151617181920const EventEmitter = require('events');const myEmitter = new EventEmitter();// ç¬¬ä¸€ä¸ªç›‘å¬å™¨ã€‚myEmitter.on('event', function firstListener() &#123; console.log('ç¬¬ä¸€ä¸ªç›‘å¬å™¨');&#125;);// ç¬¬äºŒä¸ªç›‘å¬å™¨ã€‚myEmitter.on('event', function secondListener(arg1, arg2) &#123; console.log(`ç¬¬äºŒä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° $&#123;arg1&#125;ã€$&#123;arg2&#125;`);&#125;);// ç¬¬ä¸‰ä¸ªç›‘å¬å™¨myEmitter.on('event', function thirdListener(...args) &#123; const parameters = args.join(', '); console.log(`ç¬¬ä¸‰ä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° $&#123;parameters&#125;`);&#125;);console.log(myEmitter.listeners('event'));myEmitter.emit('event', 1, 2, 3, 4, 5); myEmitter ä¸ºäº‹ä»¶ event æ³¨å†Œäº†ä¸‰ä¸ªä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘ event äº‹ä»¶ï¼Œè¾“å‡ºï¼š 123ç¬¬ä¸€ä¸ªç›‘å¬å™¨ç¬¬äºŒä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° 1ã€2ç¬¬ä¸‰ä¸ªç›‘å¬å™¨ä¸­çš„äº‹ä»¶æœ‰å‚æ•° 1, 2, 3, 4, 5 EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œåˆäº†ç»‘å®šäº‹ä»¶å‡½æ•°çš„onå’Œè§¦å‘äº‹ä»¶å‡½æ•°çš„emitï¼Œè¿˜æœ‰å¦‚ä¸‹ä¸€äº›å±æ€§ï¼š addListener(event, listener)ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ï¼Œemitter.on(eventName, listener) çš„åˆ«åã€‚ once(event, listener)ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨ï¼Œå³ ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨ removeListener(event, listener)ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨ removeAllListeners([event])ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ï¼Œ å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ setMaxListeners(n)é»˜è®¤æƒ…å†µä¸‹ï¼Œ EventEmitters å¦‚æœä½ æ·»åŠ çš„ç›‘å¬å™¨è¶…è¿‡ 10 ä¸ªå°±ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ã€‚ setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ã€‚ listeners(event)è¿”å›åä¸º eventName çš„äº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„çš„å‰¯æœ¬ on(event, listener)ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•° off(eventName, listener)removeListener() çš„åˆ«å emit(event, [arg1], [arg2], [â€¦])æŒ‰ç›‘å¬å™¨çš„é¡ºåºæ‰§è¡Œæ‰§è¡Œæ¯ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› false listenerCount(eventName)è¿”å›æ­£åœ¨ç›‘å¬çš„åä¸º eventName çš„äº‹ä»¶çš„ç›‘å¬å™¨çš„æ•°é‡ ç»ƒä¹ ä¸‹ï¼š 123456789101112131415161718192021222324252627const EventEmitter = require('events')const myEmitter = new EventEmitter()const listener1 = () =&gt; &#123; console.log('ç›‘å¬å™¨1å¯åŠ¨')&#125;const listener2 = () =&gt; &#123; console.log('ç›‘å¬å™¨2å¯åŠ¨')&#125;myEmitter.on('event', listener1)myEmitter.on('event', listener2)let listeners = myEmitter.listenerCount('event')console.log(`ç°åœ¨æœ‰$&#123;listeners&#125;ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶`)myEmitter.emit('event')myEmitter.off('event', listener1)console.log('ç›‘å¬å™¨1å·²è¢«ç§»é™¤')myEmitter.emit('event')listeners = myEmitter.listenerCount('event')console.log(`ç°åœ¨æœ‰ $&#123;listeners&#125; ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶`)console.log('End!') è¾“å‡ºï¼š 12345678[nodemon] starting `node 04-event.js`ç°åœ¨æœ‰2ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶ç›‘å¬å™¨1å¯åŠ¨ç›‘å¬å™¨2å¯åŠ¨ç›‘å¬å™¨1å·²è¢«ç§»é™¤ç›‘å¬å™¨2å¯åŠ¨ç°åœ¨æœ‰ 1 ä¸ªç›‘å¬å™¨æ­£åœ¨ç›‘å¬äº‹ä»¶End! é”™è¯¯äº‹ä»¶å½“ EventEmitter å®ä¾‹å‡ºé”™æ—¶ï¼Œåº”è¯¥è§¦å‘ â€˜errorâ€™ äº‹ä»¶ã€‚ è¿™äº›åœ¨ Node.js ä¸­è¢«è§†ä¸ºç‰¹æ®Šæƒ…å†µã€‚ 123456const EventEmitter = require('events');class MyEmitter extends EventEmitter &#123;&#125;const myEmitter = new MyEmitter();myEmitter.emit('error', new Error('é”™è¯¯ä¿¡æ¯')); å¦‚æœæ²¡æœ‰ä¸º â€˜errorâ€™ äº‹ä»¶æ³¨å†Œç›‘å¬å™¨ï¼Œåˆ™å½“ â€˜errorâ€™ äº‹ä»¶è§¦å‘æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€æ‰“å°å †æ ˆè·Ÿè¸ªã€å¹¶é€€å‡º Node.js è¿›ç¨‹ã€‚ æ‰€ä»¥æœ€ä½³å®è·µæ˜¯ï¼Œåº”è¯¥å§‹ç»ˆä¸º â€˜errorâ€™ äº‹ä»¶æ³¨å†Œç›‘å¬å™¨ï¼š 123456const myEmitter = new MyEmitter();myEmitter.on('error', (err) =&gt; &#123; console.error('é”™è¯¯ä¿¡æ¯');&#125;);myEmitter.emit('error', new Error('é”™è¯¯'));// æ‰“å°: é”™è¯¯ä¿¡æ¯ Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„åˆ›å»ºä¸€ä¸ª input.txt ,æ–‡ä»¶å†…å®¹å¦‚ï¼šwww.runoob.com 12345678910111213141516171819const fs = require('fs')// é˜»å¡// åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œå®Œç¨‹åºconst getData = fs.readFileSync('test/input.txt')console.log(getData.toString())console.log('é˜»å¡ç¨‹åºè¿è¡Œç»“æŸ')// éé˜»å¡// ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½fs.readFile('test/input.txt', (err, data) =&gt; &#123; if(err) &#123; return console.error(err) &#125; console.log(data.toString())&#125;)console.log('éé˜»å¡ç¨‹åºè¿è¡Œç»“æŸ') å¦‚æœæ²¡å‘ç”Ÿé”™è¯¯ï¼ŒreadFileSync æˆ–è€… readFile è·³è¿‡ err å¯¹è±¡çš„è¾“å‡ºï¼Œæ–‡ä»¶å†…å®¹å°±é€šè¿‡å›è°ƒå‡½æ•°è¾“å‡ºï¼š 1234www.runoob.comé˜»å¡ç¨‹åºè¿è¡Œç»“æŸéé˜»å¡ç¨‹åºè¿è¡Œç»“æŸwww.runoob.com æ¥ä¸‹æ¥æˆ‘ä»¬åˆ é™¤ input.txt æ–‡ä»¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š 1&#123; [Error: ENOENT: no such file or directory, open 'input.txt'] errno: -2, code: 'ENOENT', syscall: 'open', path: 'input.txt' &#125; å­¦ä¹ èµ„æ–™ èœé¸Ÿæ•™ç¨‹ä¹‹ Node.js å­¦ä¹  å®˜æ–¹æ–‡æ¡£ä¹‹ eventsï¼ˆäº‹ä»¶è§¦å‘å™¨ï¼‰","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"Nodejsç³»åˆ—ä¹‹HTTP","slug":"node-http","date":"2019-06-14T11:10:40.000Z","updated":"2019-11-11T06:51:25.375Z","comments":true,"path":"2019/06/14/node-http/","link":"","permalink":"https://www.yangtao.site/2019/06/14/node-http/","excerpt":"è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ç§ Web åè®®ï¼Œå±äº TCP ä¸Šå±‚çš„åè®®ã€‚ HTTP æ¨¡å—å¼ Node çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸»è¦æä¾›äº†ä¸€ç³»åˆ—ç”¨äºç½‘ç»œä¼ è¾“çš„ APIã€‚","text":"è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ç§ Web åè®®ï¼Œå±äº TCP ä¸Šå±‚çš„åè®®ã€‚ HTTP æ¨¡å—å¼ Node çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¸»è¦æä¾›äº†ä¸€ç³»åˆ—ç”¨äºç½‘ç»œä¼ è¾“çš„ APIã€‚ HTTP æ¶ˆæ¯å¤´å¦‚ä¸‹æ‰€ç¤º(é”®æ˜¯å°å†™çš„ï¼Œå€¼ä¸èƒ½è¢«ä¿®æ”¹)ï¼š 1234567&#123; \"content-length\": \"123\", \"content-type\": \"text/plain\", \"connection\": \"keep-alive\", \"host\": \"mysite.com\", \"accept\": \"*/*\"&#125; åˆ›å»º HTTP æœåŠ¡å™¨ä½¿ç”¨ NodeJS å†…ç½®çš„ http æ¨¡å—ç®€å•å®ç°ä¸€ä¸ª HTTP æœåŠ¡å™¨: 12345678const http = require(\"http\");http .createServer((request, response) =&gt; &#123; response.writeHead(200, &#123; \"Content-Type\": \"text/plain\" &#125;); response.end(\"Hello World!\"); &#125;) .listen(3000); ä»¥ä¸Šç¨‹åºåˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨å¹¶ç›‘å¬ 3000 ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥ç«¯å£http://127.0.0.1:3000/å°±èƒ½å¤Ÿçœ‹åˆ°æ•ˆæœã€‚ ä½¿ç”¨ createServer åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª http.server ç±»çš„å®ä¾‹ã€‚ createServer æ–¹æ³•åŒ…å«äº†ä¸€ä¸ªåŒ¿åçš„å›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•° requestï¼Œresponseï¼Œå®ƒä»¬æ˜¯ IncomingMessage å’Œ ServerResponse çš„å®ä¾‹ã€‚ åˆ†åˆ«è¡¨ç¤º HTTP çš„ request å’Œ response å¯¹è±¡ï¼Œå½“æœåŠ¡å™¨åˆ›å»ºå®Œæˆåï¼ŒNode è¿›ç¨‹å¼€å§‹å¾ªç¯ç›‘å¬ 3000 ç«¯å£ã€‚ http.server ç±»å®šä¹‰äº†ä¸€ç³»åˆ—çš„äº‹ä»¶ï¼Œå¦‚ connection å’Œ request äº‹ä»¶ã€‚ å¤„ç† HTTP è¯·æ±‚methodï¼ŒURL å’Œ headerNode å°†ç›¸å…³çš„ä¿¡æ¯å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ˆrequestï¼‰ä¸­ï¼Œè¯¥å¯¹è±¡æ˜¯ IncomingMessage çš„å®ä¾‹ã€‚ è·å– methodã€URLï¼š 12const method = req.method;const url = req.url; æ¯”å¦‚è®¿é—®http://127.0.0.1:8000/index.html?name=taoï¼Œå°±ä¼šè¾“å‡ºï¼š 1234&#123; \"method\": \"GET\", \"url\": \"/index.html?name=tao\"&#125; URL çš„å€¼ä¸ºå»é™¤ç½‘ç«™æœåŠ¡å™¨åœ°å€ä¹‹å¤–çš„å®Œæ•´å€¼ã€‚ headerè·å– HTTP header ä¿¡æ¯ï¼š 12const headers = req.headers;const userAgent = headers[\"user-agent\"]; è¾“å‡ºï¼š 12345678910111213&#123; \"headers\": &#123; \"host\": \"127.0.0.1:8000\", \"user-agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:68.0) Gecko/20100101 Firefox/68.0\", \"accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\", \"accept-language\": \"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2\", \"accept-encoding\": \"gzip, deflate\", \"connection\": \"keep-alive\", \"upgrade-insecure-requests\": \"1\", \"cache-control\": \"max-age=0\" &#125;, \"userAgent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:68.0) Gecko/20100101 Firefox/68.0\"&#125; header æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå¯ä»¥å¯¹å±æ€§åè¿›è¡Œå•ç‹¬ç´¢å¼•ã€‚ request bodyNode ä½¿ç”¨ stream å¤„ç† HTTP çš„è¯·æ±‚ä½“ï¼Œå¹¶ä¸”æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ï¼šdata å’Œ endã€‚ è·å–å®Œæ•´çš„ HTTP å†…å®¹ä½“ï¼š 123456789let body = [];request.on(\"data\", chunk =&gt; &#123; body.push(chunk);&#125;);request.on(\"end\", () =&gt; &#123; body = Buffer.concat(body).toString();&#125;); Response å¯¹è±¡get/post è¯·æ±‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬æ¥ç»„ç»‡ä¸€ä¸ªç®€æ˜“çš„ getã€post è¯·æ±‚å®ä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940const http = require(\"http\");const querystring = require(\"querystring\");http .createServer((req, res) =&gt; &#123; const method = req.method; const url = req.url; const path = url.split(\"?\")[0]; const query = querystring.parse(url.split(\"?\")[1]); const headers = req.headers; const userAgent = headers[\"user-agent\"]; const resData = &#123; method, url, path, query, headers, userAgent &#125;; res.setHeader(\"Content-type\", \"application/json\"); if (method === \"GET\") &#123; res.end(JSON.stringify(resData)); &#125; if (method === \"POST\") &#123; let postData = []; req.on(\"data\", chunk =&gt; &#123; postData.push(chunk); &#125;); req.on(\"end\", () =&gt; &#123; resData.postData = Buffer.concat(postData).toString(); res.end(JSON.stringify(resData)); &#125;); &#125; &#125;) .listen(8000); æ¯”å¦‚POSTè¯·æ±‚ http://127.0.0.1:8000/api/blog?ip=2ï¼Œç„¶åä½¿ç”¨ Postman å·¥å…·æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š 123456789101112131415161718192021&#123; \"method\": \"POST\", \"url\": \"/api/blog?ip=2\", \"path\": \"/api/blog\", \"query\": &#123; \"ip\": \"2\" &#125;, \"headers\": &#123; \"content-type\": \"application/json\", \"cache-control\": \"no-cache\", \"postman-token\": \"9e6cb382-8551-4a3f-b352-0581bb377cbc\", \"user-agent\": \"PostmanRuntime/7.6.0\", \"accept\": \"*/*\", \"host\": \"127.0.0.1:8000\", \"accept-encoding\": \"gzip, deflate\", \"content-length\": \"62\", \"connection\": \"keep-alive\" &#125;, \"userAgent\": \"PostmanRuntime/7.6.0\", \"postData\": \"&#123;\\n\\t\\\"title\\\": \\\"ä½ è¯´ä»€ä¹ˆ\\\",\\n\\t\\\"content\\\": \\\"æˆ‘çŸ¥é“ä½ çŸ¥é“\\\"\\n&#125;\"&#125; httphttp æ¨¡å—æä¾›ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š ä½œä¸ºæœåŠ¡ç«¯ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œç›‘å¬ HTTP å®¢æˆ·ç«¯è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚ ä½œä¸ºå®¢æˆ·ç«¯ä½¿ç”¨æ—¶ï¼Œå‘èµ·ä¸€ä¸ª HTTP å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å“åº”ã€‚ ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨123456789101112131415161718192021222324252627282930313233343536373839404142const http = require(\"http\");const qs = require(\"querystring\");http .createServer(function(req, res) &#123; if (\"/\" == req.url) &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); res.end( [ '&lt;form method=\"POST\" action=\"/url\"&gt;', \"&lt;h1&gt;My Form&lt;/h1&gt;\", \"&lt;fieldset&gt;\", \"&lt;label&gt;Personal information&lt;/label&gt;\", \"&lt;p&gt;What is your name?&lt;/p&gt;\", '&lt;input type=\"text\" name=\"name\" /&gt;', \"&lt;p&gt;&lt;button&gt;Submit&lt;/button&gt;&lt;/p&gt;\", \"&lt;/fieldset&gt;\", \"&lt;/form&gt;\" ].join(\"\") ); &#125; else if (\"/url\" == req.url &amp;&amp; \"POST\" == req.method) &#123; var body = \"\"; req.on(\"data\", function(chunk) &#123; body += chunk; &#125;); req.on(\"end\", function() &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); res.end( \"&lt;p&gt;Content-type: \" + req.headers[\"content-type\"] + \"&lt;/p&gt;\" + \"&lt;p&gt;Data: \" + qs.parse(body).name + \"&lt;/p&gt;\" ); &#125;); &#125; else &#123; res.writeHead(404); res.end(\"Not Found.\"); &#125; &#125;) .listen(3000); ä¸€ä¸ª Twitter Web å®¢æˆ·ç«¯åˆ›å»ºæœåŠ¡å™¨ï¼šapp.js 12345678910111213141516const http = require(\"http\");const qs = require(\"querystring\");http .createServer(function(req, res) &#123; var body = \"\"; req.on(\"data\", function(chunk) &#123; body += chunk; &#125;); req.on(\"end\", function() &#123; res.writeHead(200); res.end(\"Done\"); console.log(\"\\n got name \\033[90m\" + qs.parse(body).name + \"\\033[39m\\n\"); &#125;); &#125;) .listen(3000); åˆ›å»ºå®¢æˆ·ç«¯ï¼šclient.js 123456789101112131415161718192021222324252627282930313233const http = require(\"http\");const qs = require(\"querystring\");function send(theName) &#123; http .request( &#123; host: \"127.0.0.1\", port: 3000, url: \"/\", method: \"POST\" &#125;, function(res) &#123; var body = \"\"; res.setEncoding(\"utf8\"); res.on(\"data\", function(chunk) &#123; body += chunk; &#125;); res.on(\"end\", function() &#123; console.log(\"\\n \\033[90m request complete! \\033[39m\"); process.stdout.write(\"\\n your name: \"); &#125;); &#125; ) .end(qs.stringify(&#123; name: theName &#125;));&#125;process.stdout.write(\"\\n your name: \");process.stdin.resume();process.stdin.setEncoding(\"utf-8\");process.stdin.on(\"data\", function(name) &#123; send(name.replace(\"\\n\", \"\"));&#125;); å¯åŠ¨node app.jsï¼Œå†å¯åŠ¨node client.js HTTPSHTTPS æ˜¯åŸºäº TLS/SSL çš„ HTTP åè®®ã€‚åœ¨ Node.js ä¸­ï¼Œä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—å®ç°ã€‚ HTTPS æ¨¡å—ä¸ HTTP æ¨¡å—æä¸ºç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº HTTPS æ¨¡å—éœ€è¦é¢å¤–å¤„ç† SSL è¯ä¹¦ã€‚ 1234567891011121314const https = require(\"https\");const fs = require(\"fs\");const options = &#123; key: fs.readFileSync(\"test/fixtures/keys/agent2-key.pem\"), cert: fs.readFileSync(\"test/fixtures/keys/agent2-cert.pem\")&#125;;https .createServer(options, (req, res) =&gt; &#123; res.writeHead(200); res.end(\"hello world\\n\"); &#125;) .listen(8000); URLå¤„ç† HTTP è¯·æ±‚æ—¶ url æ¨¡å—ä½¿ç”¨ç‡è¶…é«˜ï¼Œå› ä¸ºè¯¥æ¨¡å—å…è®¸è§£æ URLã€ç”Ÿæˆ URLï¼Œä»¥åŠæ‹¼æ¥ URLã€‚ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå®Œæ•´çš„ URL çš„å„ç»„æˆéƒ¨åˆ†ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š 1234567891011121314&gt; require('url').parse('http://user:pass@host.com:8080/p/a/t/h?query=string#hash');Url &#123; protocol: 'http:', slashes: true, auth: 'user:pass', host: 'host.com:8080', port: '8080', hostname: 'host.com', hash: '#hash', search: '?query=string', query: 'query=string', pathname: '/p/a/t/h', path: '/p/a/t/h?query=string', href: 'http://user:pass@host.com:8080/p/a/t/h?query=string#hash'&#125; å½“ç„¶ï¼Œä¸å®Œæ•´çš„ urlï¼Œä¹Ÿå¯ä»¥è§£æï¼š 123456789101112131415const http = require(\"http\");const url = require(\"url\");http .createServer((request, response) =&gt; &#123; let body = []; const tmp = request.url; // /foo/bar?a=b response.writeHead(200, &#123; \"Content-Type\": \"text/plain\" &#125;); console.log(\"url-parse\", url.parse(tmp)); response.end(\"Hello World\"); &#125;) .listen(8000); 1234567891011121314&#123; \"protocol\": null, \"slashes\": null, \"auth\": null, \"host\": null, \"port\": null, \"hostname\": null, \"hash\": null, \"search\": \"?a=b\", \"query\": \"a=b\", \"pathname\": \"/foo/bar\", \"path\": \"/foo/bar?a=b\", \"href\": \"/foo/bar?a=b\"&#125; format æ–¹æ³•å…è®¸å°†ä¸€ä¸ª URL å¯¹è±¡è½¬æ¢ä¸º URL å­—ç¬¦ä¸² 12345678const urlFormat = url.format(&#123; protocol: \"http:\", host: \"www.example.com\", pathname: \"/p/a/t/h\", search: \"query=string\"&#125;);console.log(&#123; urlFormat &#125;); // &#123; urlFormat: 'http://www.example.com/p/a/t/h?query=string' &#125; Query Stringquerystring æ¨¡å—ç”¨äºå®ç° URL å‚æ•°å­—ç¬¦ä¸²ä¸å‚æ•°å¯¹è±¡çš„äº’ç›¸è½¬æ¢ 12345querystring.parse(\"foo=bar&amp;baz=qux&amp;baz=quux&amp;corge\");// &#123; foo: 'bar', baz: [ 'qux', 'quux' ], corge: '' &#125;querystring.stringify(&#123; foo: \"bar\", baz: [\"qux\", \"quux\"], corge: \"\" &#125;);// 'foo=bar&amp;baz=qux&amp;baz=quux&amp;corge=' Zlibzlib æ¨¡å—æä¾›äº†æ•°æ®å‹ç¼©å’Œè§£å‹çš„åŠŸèƒ½ã€‚å½“æˆ‘ä»¬å¤„ç† HTTP è¯·æ±‚å’Œå“åº”æ—¶ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—ã€‚ Netnet æ¨¡å—å¯ç”¨äºåˆ›å»º Socket æœåŠ¡å™¨æˆ– Socket å®¢æˆ·ç«¯ã€‚ ç”±äº Socket åœ¨å‰ç«¯é¢†åŸŸçš„ä½¿ç”¨èŒƒå›´è¿˜ä¸æ˜¯å¾ˆå¹¿ï¼Œè¿™é‡Œå…ˆä¸æ¶‰åŠåˆ° WebSocket çš„ä»‹ç»ï¼Œä»…ä»…ç®€å•æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ä» Socket å±‚é¢æ¥å®ç° HTTP è¯·æ±‚å’Œå“åº”ã€‚ é—®é¢˜è§£ç­”ä½¿ç”¨ NodeJS æ“ä½œç½‘ç»œï¼Œç‰¹åˆ«æ˜¯æ“ä½œ HTTP è¯·æ±‚å’Œå“åº”æ—¶ä¼šé‡åˆ°ä¸€äº›æƒŠå–œï¼Œè¿™é‡Œå¯¹ä¸€äº›å¸¸è§é—®é¢˜åšè§£ç­”ã€‚ ä¸ºä»€ä¹ˆé€šè¿‡ headers å¯¹è±¡è®¿é—®åˆ°çš„ HTTP è¯·æ±‚å¤´æˆ–å“åº”å¤´å­—æ®µä¸æ˜¯é©¼å³°çš„ï¼Ÿ ä»è§„èŒƒä¸Šè®²ï¼ŒHTTP è¯·æ±‚å¤´å’Œå“åº”å¤´å­—æ®µéƒ½åº”è¯¥æ˜¯é©¼å³°çš„ã€‚ä½†ç°å®æ˜¯æ®‹é…·çš„ï¼Œä¸æ˜¯æ¯ä¸ª HTTP æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ç¨‹åºéƒ½ä¸¥æ ¼éµå¾ªè§„èŒƒï¼Œæ‰€ä»¥ NodeJS åœ¨å¤„ç†ä»åˆ«çš„å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯æ”¶åˆ°çš„å¤´å­—æ®µæ—¶ï¼Œéƒ½ç»Ÿä¸€åœ°è½¬æ¢ä¸ºäº†å°å†™å­—æ¯æ ¼å¼ï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼æ¥è®¿é—®å¤´å­—æ®µï¼Œä¾‹å¦‚headers[&#39;content-length&#39;]ã€‚ ä¸ºä»€ä¹ˆ http æ¨¡å—åˆ›å»ºçš„ HTTP æœåŠ¡å™¨è¿”å›çš„å“åº”æ˜¯ chunked ä¼ è¾“æ–¹å¼çš„ï¼Ÿ å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨.writeHeadæ–¹æ³•å†™å…¥å“åº”å¤´åï¼Œå…è®¸ä½¿ç”¨.writeæ–¹æ³•å†™å…¥ä»»æ„é•¿åº¦çš„å“åº”ä½“æ•°æ®ï¼Œå¹¶ä½¿ç”¨.endæ–¹æ³•ç»“æŸä¸€ä¸ªå“åº”ã€‚ç”±äºå“åº”ä½“æ•°æ®é•¿åº¦ä¸ç¡®å®šï¼Œå› æ­¤ NodeJS è‡ªåŠ¨åœ¨å“åº”å¤´é‡Œæ·»åŠ äº†Transfer-Encoding: chunkedå­—æ®µï¼Œå¹¶é‡‡ç”¨ chunked ä¼ è¾“æ–¹å¼ã€‚ä½†æ˜¯å½“å“åº”ä½“æ•°æ®é•¿åº¦ç¡®å®šæ—¶ï¼Œå¯ä½¿ç”¨.writeHeadæ–¹æ³•åœ¨å“åº”å¤´é‡ŒåŠ ä¸ŠContent-Lengthå­—æ®µï¼Œè¿™æ ·åšä¹‹å NodeJS å°±ä¸ä¼šè‡ªåŠ¨æ·»åŠ Transfer-Encodingå­—æ®µå’Œä½¿ç”¨ chunked ä¼ è¾“æ–¹å¼ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨ http æ¨¡å—å‘èµ· HTTP å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‘ç”Ÿ socket hang up é”™è¯¯ï¼Ÿ ç­”ï¼š å‘èµ·å®¢æˆ·ç«¯ HTTP è¯·æ±‚å‰éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ã€‚http æ¨¡å—æä¾›äº†ä¸€ä¸ªå…¨å±€å®¢æˆ·ç«¯http.globalAgentï¼Œå¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨.requestæˆ–.getæ–¹æ³•æ—¶ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºå®¢æˆ·ç«¯ã€‚ä½†æ˜¯å…¨å±€å®¢æˆ·ç«¯é»˜è®¤åªå…è®¸ 5 ä¸ªå¹¶å‘ Socket è¿æ¥ï¼Œå½“æŸä¸€ä¸ªæ—¶åˆ» HTTP å®¢æˆ·ç«¯è¯·æ±‚åˆ›å»ºè¿‡å¤šï¼Œè¶…è¿‡è¿™ä¸ªæ•°å­—æ—¶ï¼Œå°±ä¼šå‘ç”Ÿsocket hang upé”™è¯¯ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡http.globalAgent.maxSocketså±æ€§æŠŠè¿™ä¸ªæ•°å­—æ”¹å¤§äº›å³å¯ã€‚å¦å¤–ï¼Œhttps æ¨¡å—é‡åˆ°è¿™ä¸ªé—®é¢˜æ—¶ä¹Ÿä¸€æ ·é€šè¿‡https.globalAgent.maxSocketså±æ€§æ¥å¤„ç†ã€‚ å­¦ä¹ èµ„æ–™ 7-days-nodejs - æ–‡ç«  ã€Šäº†ä¸èµ·çš„ Node.jsï¼šå°† JavaScript è¿›è¡Œåˆ°åº•ã€‹- ä¹¦ç± ã€Šæ–°æ—¶æœŸçš„ Node.js å…¥é—¨ã€‹- ä¹¦ç± Node.js ä»é›¶å¼€å‘ Web Server åšå®¢é¡¹ç›® å‰ç«¯æ™‹å‡å…¨æ ˆå·¥ç¨‹å¸ˆå¿…å¤‡ - è§†é¢‘ httpï¼ˆHTTPï¼‰ - å®˜æ–¹æ–‡æ¡£","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"Nodejsç³»åˆ—ä¹‹TCP","slug":"node-tcp","date":"2019-06-12T11:37:08.000Z","updated":"2019-11-11T06:47:58.625Z","comments":true,"path":"2019/06/12/node-tcp/","link":"","permalink":"https://www.yangtao.site/2019/06/12/node-tcp/","excerpt":"å®šä¹‰ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰æ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„åè®®ï¼Œä¿è¯äº†ä¸¤å°è®¡ç®—æœºä¹‹é—´æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œé¡ºåºã€‚ Node HTTP æœåŠ¡å™¨æ˜¯æ„å»ºäº Node TCP æœåŠ¡å™¨ä¹‹ä¸Šçš„ã€‚","text":"å®šä¹‰ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰æ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„åè®®ï¼Œä¿è¯äº†ä¸¤å°è®¡ç®—æœºä¹‹é—´æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œé¡ºåºã€‚ Node HTTP æœåŠ¡å™¨æ˜¯æ„å»ºäº Node TCP æœåŠ¡å™¨ä¹‹ä¸Šçš„ã€‚ TCP çš„ç‰¹æ€§ï¼š é¢å‘è¿æ¥çš„é€šä¿¡å’Œä¿è¯é¡ºåºçš„ä¼ é€’ é¢å‘å­—èŠ‚ - ASCIIã€Unicode å¯é æ€§ æµæ§åˆ¶ æ‹¥å µæ§åˆ¶ - Qos Socket æ˜¯å¯¹ TCP åè®®çš„ä¸€ç§å°è£…æ–¹å¼ï¼ŒSocketæœ¬èº«ä¸æ˜¯åè®®ï¼Œè€Œæ˜¯ä¸€ä¸ªç¼–ç¨‹æ¥å£ã€‚ telnetå…è®¸åœ¨ç»ˆç«¯æ‰‹åŠ¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥æœåŠ¡ç«¯ä½¿ç”¨ Node.js å†™ä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬ 3000 ç«¯å£ï¼Œç„¶å node app.js è¿è¡Œä¸‹æ˜¯å¦æ­£ç¡®1234require('http').createServer(function(req, res) &#123; res.writeHead(200); res.end('Hello world');&#125;).listen(3000) TCPè¿æ¥ä½¿ç”¨telnet 127.0.0.1 3000å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œç„¶åè¾“å…¥GET / HTTP/1.1ï¼Œå›è½¦ä¸¤æ¬¡ï¼Œç„¶åæœåŠ¡å™¨ç«¯å°±å‡ºç°äº†å“åº”ï¼š1234567891011121314151617~ telnet 127.0.0.1 3000Trying 127.0.0.1...Connected to localhost.Escape character is '^]'.GET / HTTP/1.1HTTP/1.1 200 OKDate: Sun, 15 Sep 2019 06:20:43 GMTConnection: keep-aliveTransfer-Encoding: chunkedbHello world0Connection closed by foreign host. æ€»ç»“ï¼š æˆåŠŸå»ºç«‹äº†ä¸€ä¸ª TCP è¿æ¥ åˆ›å»ºäº†ä¸€ä¸ªHTTPè¯·æ±‚ æ¥æ”¶åˆ°ä¸€ä¸ªHTTPå“åº” åˆ°è¾¾çš„æ•°æ®å’Œåœ¨Node.jsä¸­å†™çš„ä¸€æ · åŸºäºTCPçš„èŠå¤©ç¨‹åº1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253const net = require('net')let count = 0, users = &#123;&#125;const server = net.createServer(function(conn) &#123; let nickname; conn.setEncoding('utf8') conn.write( '\\n &gt; æ¬¢è¿è®¿é—® \\033[92mNode-Chat\\033[39m!' + '\\n &gt; ' + count + 'ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥' + '\\n &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼š' ) count++ conn.on('data', function(data) &#123; data = data.replace('\\r\\n', '') console.log(data); if(!nickname) &#123; if(users[data]) &#123; conn.write('\\033[93m&gt; æ˜µç§°å·²è¢«ä½¿ç”¨ï¼Œè¯·é‡è¯•ï¼š\\033[39m '); return; &#125; else &#123; nickname = data users[nickname] = conn console.log('users: ', conn) broadcast('\\033[90m &gt; ' + nickname + ' ä¸Šçº¿äº†\\033[39m\\n'); &#125; &#125; else &#123; broadcast('\\033[96m &gt; ' + nickname + ':\\033[39m ' + data + '\\n', true); &#125; &#125;) conn.on('close', function() &#123; count-- delete users[nickname] broadcast('\\033[90m &gt; ' + nickname + ' ä¸‹çº¿äº†\\033[39m\\n'); &#125;) // å‘æ¯ä¸€ä¸ªç”¨æˆ·å‘é€ä¿¡æ¯ function broadcast (msg, exceptMyself) &#123; for (let i in users) &#123; if(!exceptMyself || i != nickname) &#123; users[i].write(msg) &#125; &#125; &#125;&#125;)server.listen(3000, function() &#123; console.log('\\033[96m server listening on *: 3000\\033[39m')&#125;) å•ç‹¬è¿è¡Œï¼štelnet 127.0.0.1 3000ï¼Œæ¯”å¦‚ï¼š 1234567891011121314151617181920212223242526272829~ telnet 127.0.0.1 3000Trying 127.0.0.1...Connected to localhost.Escape character is '^]'. &gt; æ¬¢è¿è®¿é—® Node-Chat! &gt; 0ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥ &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼šXiaoMing &gt; XiaoMing ä¸Šçº¿äº†Hi &gt; HanMeimei ä¸Šçº¿äº† &gt; HanMeimei: Hello &gt; LiSi ä¸Šçº¿äº† &gt; LiSi: Ni hao ma?# ç¬¬äºŒä½ç”¨æˆ· &gt; æ¬¢è¿è®¿é—® Node-Chat! &gt; 1ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥ &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼šHanMeimei &gt; HanMeimei ä¸Šçº¿äº†Hello# ç¬¬ä¸‰ä½ç”¨æˆ· &gt; æ¬¢è¿è®¿é—® Node-Chat! &gt; 2ä¸ªå…¶ä»–ç”¨æˆ·å·²è¿æ¥ &gt; è¯·è¾“å…¥ä½ çš„ç”¨æˆ·åå¹¶å›è½¦ï¼šLiSi &gt; LiSi ä¸Šçº¿äº†Ni hao ma?","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"Nodejsç³»åˆ—ä¹‹Connect","slug":"node-connect","date":"2019-06-11T06:28:31.000Z","updated":"2019-11-11T06:41:52.056Z","comments":true,"path":"2019/06/11/node-connect/","link":"","permalink":"https://www.yangtao.site/2019/06/11/node-connect/","excerpt":"Connect æ˜¯ä¸€ä¸ªåŸºäº HTTP æœåŠ¡å™¨çš„å·¥å…·é›†ï¼Œæˆä¸ºä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰ã€‚ ä¸­é—´ä»¶ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„ JavaScript å‡½æ•°ã€‚é™¤äº†å¤„ç† req å’Œ res å¯¹è±¡ä¹‹å¤–ï¼Œè¿˜æ¥å—ä¸€ä¸ª next å‡½æ•°æ¥åšæµæ§åˆ¶ã€‚","text":"Connect æ˜¯ä¸€ä¸ªåŸºäº HTTP æœåŠ¡å™¨çš„å·¥å…·é›†ï¼Œæˆä¸ºä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰ã€‚ ä¸­é—´ä»¶ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„ JavaScript å‡½æ•°ã€‚é™¤äº†å¤„ç† req å’Œ res å¯¹è±¡ä¹‹å¤–ï¼Œè¿˜æ¥å—ä¸€ä¸ª next å‡½æ•°æ¥åšæµæ§åˆ¶ã€‚ ä¸€ä¸ªç®€å•çš„ç½‘ç«™åˆå§‹åŒ–ï¼š 1234567891011121314151617var http = require(\"http\");var connect = require(\"connect\");var serveStatic = require(\"serve-static\");var path = require(\"path\");var app = connect();app.use(serveStatic(path.join(__dirname, \"public-optimized\")));app.use(serveStatic(path.join(__dirname, \"public\")));// respond to all requestsapp.use(function(req, res) &#123; res.end(\"Hello from Connect!\\n\");&#125;);//create node.js http server and listen on porthttp.createServer(app).listen(3000); ä¸­é—´ä»¶çš„ä½¿ç”¨ï¼Œæ¨¡æ‹Ÿç™»å½•ç™»å‡ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687var http = require(\"http\");var connect = require(\"connect\");var morgan = require(\"morgan\");var bodyParser = require(\"body-parser\");var cookieParser = require(\"cookie-parser\");var session = require(\"express-session\");var users = require(\"./config/users.json\");var app = connect();// loggerapp.use(morgan(\"dev\"));// parse an HTML body into a stringapp.use(bodyParser());app.use(cookieParser());app.use( session(&#123; secret: \"my site secret\" &#125;));app.use(function(req, res, next) &#123; if (\"/\" == req.url &amp;&amp; req.session.logged_in) &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); res.end( `Welcome back, &lt;b&gt;$&#123;req.session.name&#125;&lt;/b&gt;&lt;a href=\"/logout\"&gt;Logout&lt;/a&gt;` ); &#125; else &#123; next(); &#125;&#125;);app.use(function(req, res, next) &#123; if (\"/\" == req.url &amp;&amp; \"GET\" == req.method) &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); res.end( [ '&lt;form method=\"POST\" action=\"/login\"&gt;', \"&lt;h1&gt;Login&lt;/h1&gt;\", \"&lt;fieldset&gt;\", \"&lt;label&gt;Please log in&lt;/label&gt;\", 'Username: &lt;input type=\"text\" name=\"user\" /&gt;&lt;br&gt;', 'Password: &lt;input type=\"password\" name=\"password\" /&gt;', \"&lt;p&gt;&lt;button&gt;Submit&lt;/button&gt;&lt;/p&gt;\", \"&lt;/fieldset&gt;\", \"&lt;/form&gt;\" ].join(\"\") ); &#125; else &#123; next(); &#125;&#125;);app.use(function(req, res, next) &#123; if (\"/login\" == req.url &amp;&amp; \"POST\" == req.method) &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); if ( !users[req.body.user] || req.body.password != users[req.body.user].password ) &#123; res.end('Bad username/password&lt;br&gt;&lt;a href=\"/\"&gt;Back&lt;/a&gt;'); &#125; else &#123; req.session.logged_in = true; req.session.name = users[req.body.user].name; res.end(\"Success!\"); &#125; &#125; else &#123; next(); &#125;&#125;);app.use(function(req, res, next) &#123; if (\"/logout\" == req.url) &#123; req.session.logged_in = false; res.writeHead(200); res.end(\"Logged out!\"); &#125; else &#123; next(); &#125;&#125;);//create node.js http server and listen on porthttp.createServer(app).listen(3000);","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"jsè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å•ä¾‹æ¨¡å¼","slug":"mode-å•ä¾‹æ¨¡å¼","date":"2019-05-03T13:24:26.000Z","updated":"2019-05-03T13:27:02.350Z","comments":true,"path":"2019/05/03/mode-å•ä¾‹æ¨¡å¼/","link":"","permalink":"https://www.yangtao.site/2019/05/03/mode-å•ä¾‹æ¨¡å¼/","excerpt":"ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹","text":"ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼ç”¨ä¸€ä¸ªå˜é‡æ ‡å¿—å½“å‰æ˜¯å¦å·²ç»ä¸ºæŸä¸ªç±»å‹åˆ›å»ºè¿‡å¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸‹æ¬¡ç›´æ¥è¿”å›ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡ã€‚ 1234567891011121314151617181920var Singleton = function (name) &#123; this.name = name; this.instance = null;&#125;Singleton.prototype.getName = function () &#123; console.log(this.name);&#125;Singleton.getInstance = function (name) &#123; if (!this.instance) &#123; this.instance = new Singleton(name); &#125; return this.instance;&#125;var a = Singleton.getInstance('Tony1');var b = Singleton.getInstance('Tony2');console.log(a === b); // true é€šè¿‡ Singleton.getInstanceæ¥è·å– Singleton ç±»çš„å”¯ä¸€å¯¹è±¡ï¼Œé‡Œè¾¹ä½¿ç”¨äº† new æ¥è·å–ï¼Œå¯¼è‡´äº†è¿™ä¸ªç±»çš„â€œä¸é€æ˜æ€§â€ã€‚ é€æ˜çš„å•ä¾‹æ¨¡å¼åˆ›å»ºä¸€ä¸ªâ€œé€æ˜â€çš„å•ä¾‹ç±»ï¼Œå°±æ˜¯è®©æˆ‘ä»¬ä»è¿™ä¸ªç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å¯ä»¥å’Œä½¿ç”¨å…¶ä»–æ™®é€šç±»ä¸€æ ·ï¼švar aa = new CreateDiv(&#39;Sisi1&#39;); 1234567891011121314151617181920212223242526var CreateDiv = (function () &#123; var instance; var CreateDiv = function (html) &#123; if (instance) &#123; return instance; &#125; this.html = html; this.init(); return instance = this; &#125;; CreateDiv.prototype.init = function () &#123; var div = document.createElement('div'); div.innerHTML = this.html; document.body.appendChild(div); &#125;; return CreateDiv;&#125;)();var aa = new CreateDiv('Sisi1');var bb = new CreateDiv('Sisi2');console.log(aa === bb); // true ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼ŒCreateDiv çš„æ„é€ å‡½æ•°è´Ÿè´£äº†ä¸¤ä»¶äº‹ï¼šåˆ›å»ºå¯¹è±¡å’Œæ‰§è¡Œåˆå§‹åŒ– init æ–¹æ³•ï¼ŒåŠä¿è¯åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼š 12345678var CreateDiv = function (html) &#123; if (instance) &#123; return instance; &#125; this.html = html; this.init(); return instance = this;&#125;; ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºå¾ˆå¤šçš„divï¼Œè¿™é‡Œçš„ return instance = this; å°±éœ€è¦åˆ æ‰ã€‚ ç”¨ä»£ç†å®ç°å•ä¾‹æ¨¡å¼è¿™æ—¶å€™ï¼Œä¸ºäº†é¿å…ä¸Šé¢ä¸èƒ½å¤ç”¨çš„å°´å°¬ï¼Œé€šè¿‡å¼•å…¥ä»£ç†ç±»çš„æ–¹å¼ï¼ŒæŠŠè´Ÿè´£ç®¡ç†å•ä¾‹çš„é€»è¾‘ç§»äº¤è‡³ä»£ç†ç±»ProxySingletonCreateDivï¼Œè¿™æ ·CreateDivåªæ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ã€‚ 12345678910111213141516171819202122232425var CreateDiv = function (html) &#123; this.html = html; this.init();&#125;;CreateDiv.prototype.init = function () &#123; var div = document.createElement('div'); div.innerHTML = this.html; document.body.appendChild(div);&#125;var ProxySingletonCreateDiv = (function () &#123; var instance; return function (html) &#123; if (!instance) &#123; instance = new CreateDiv(html); &#125; return instance; &#125;&#125;)();var aa = new ProxySingletonCreateDiv('Tony1');var bb = new ProxySingletonCreateDiv('Tony2');console.log(aa === bb); // true JavaScript ä¸­çš„å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ï¼šç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®ã€‚ ä½¿ç”¨å‘½åç©ºé—´ å¯¹è±¡å­—é¢é‡çš„æ–¹å¼: 12345678910var namespace1 = &#123; a: function() &#123; console.log(1); &#125;, b: function() &#123; console.log(2); &#125;&#125;namespace1.a(); //1 æŠŠaå’Œbéƒ½å®šä¹‰ä¸º namespace1 çš„å±æ€§ï¼Œå‡å°‘äº†å˜é‡å’Œå…¨å±€ä½œç”¨åŸŸæ‰“äº¤é“çš„æœºä¼šï¼Œè¿˜å¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå‘½åç©ºé—´ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344var MyApp = &#123;&#125;;MyApp.namespace = function (name) &#123; var parts = name.split('.'); var current = MyApp; for (var i in parts) &#123; if (!current[parts[i]]) &#123; current[parts[i]] = &#123;&#125;; &#125; current = current[parts[i]]; &#125;&#125;MyApp.namespace('event');MyApp.namespace('dom.style');console.log(MyApp);// ç›¸å½“äºï¼švar MyApp = &#123; event: &#123;&#125;, dom: &#123; style: &#123;&#125; &#125;&#125;``` 2. ä½¿ç”¨é—­åŒ…å°è£…ç§æœ‰å˜é‡ä½¿ç”¨ä¸‹åˆ’çº¿çº¦å®šç§æœ‰å˜é‡ _name å’Œ _ageã€‚```jsvar user = (function () &#123; var _name = 'Seven'; var _age = 27; return &#123; getUserInfo: function () &#123; return _name + '-' + _age; &#125; &#125;&#125;)();console.log(user.getUserInfo()) // Seven-27 æƒ°æ€§å•ä¾‹å®—æ—¨ï¼šåœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»ºå¯¹è±¡ï¼ï¼ï¼ æ —å­ï¼šQQçš„ç™»å½•æµ®çª— ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šé¡µé¢åŠ è½½å®Œæˆçš„æ—¶å€™ä¾¿åˆ›å»ºå¥½æµ®çª—ã€‚ 1234567891011var loginLayer = (function () &#123; var div = document.createElement('div'); div.innerHTML = 'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'; div.style.display = 'none'; document.body.appendChild(div); return div;&#125;)();document.getElementById('loginBtn').addEventListener('click', function () &#123; loginLayer.style.display = 'block';&#125;); ä½†æ˜¯ï¼Œä¸ç®¡æˆ‘ä»¬ç™»å½•ä¸å¦ï¼Œéƒ½ä¼šåˆ›å»ºæ‚¬æµ®çª—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸ºï¼šåœ¨ç‚¹å‡»ç™»å½•çš„æ—¶å€™å†åˆ›å»ºæ‚¬æµ®çª—ã€‚ 123456789101112var createLoginLayer = function () &#123; var div = document.createElement('div'); div.innerHTML = 'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'; div.style.display = 'none'; document.body.appendChild(div); return div;&#125;;document.getElementById('loginBtn').addEventListener('click', function () &#123; var loginLayer = createLoginLayer(); loginLayer.style.display = 'block';&#125;); è¿™æ—¶å€™ï¼Œè™½ç„¶è¾¾åˆ°äº†æƒ°æ€§çš„ç›®çš„ï¼Œå´å¤±å»äº†å•ä¾‹çš„æ•ˆæœï¼Œæ¯æ¬¡ç‚¹å‡»ç™»å½•ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‚¬æµ®çª—ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡æ¥åˆ¤æ–­æ˜¯å¦å·²ç»åˆ›å»ºè¿‡æ‚¬æµ®çª—ï¼š 1234567891011121314151617var createLoginLayer = (function () &#123; var div; return function () &#123; if (!div) &#123; // åˆ¤æ–­æ˜¯å¦å·²åˆ›å»º div = document.createElement('div'); div.innerHTML = 'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'; div.style.display = 'none'; document.body.appendChild(div); &#125; return div; &#125;&#125;)();document.getElementById('loginBtn').addEventListener('click', function () &#123; var loginLayer = createLoginLayer(); loginLayer.style.display = 'block';&#125;); é€šç”¨çš„æƒ°æ€§å•ä¾‹è™½ç„¶ä¸Šé¢çš„æ‚¬æµ®æ¡†æ˜¯ä¸€ä¸ªå¯ç”¨çš„æƒ°æ€§å•ä¾‹ï¼Œä½†æ˜¯ä»ç„¶è¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºå…¶ä»–çš„æ ‡ç­¾ï¼Œå°±éœ€è¦æŠŠåˆ›å»ºæ‚¬æµ®çª—çš„å‡½æ•°å¤åˆ¶ä¸€ä»½ï¼Œå†ä¿®ä¿®æ”¹æ”¹ï¼Œæ— æ³•åšåˆ°å¤ç”¨ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸å˜çš„éƒ¨åˆ†éš”ç¦»å‡ºæ¥ï¼Œè¿›è¡ŒæŠ½è±¡ï¼Œæ— è®ºåˆ›å»ºä»€ä¹ˆæ ‡ç­¾ï¼Œéƒ½æ˜¯ä¸€æ ·çš„é€»è¾‘ï¼š 1234var obj;if(!obj) &#123; obj = xxx;&#125; æ¥ç€ï¼Œç»§ç»­ï¼š 123456789101112131415161718192021var getSingle = function (fn) &#123; var result; return function () &#123; return result || (result = fn.apply(this, arguments)); &#125;&#125;var createLoginLayer = function () &#123; var div = document.createElement('div'); div.innerHTML = 'æˆ‘æ˜¯ä¸€ä¸ªå°å°çš„æ‚¬æµ®æ¡†'; div.style.display = 'none'; document.body.appendChild(div); return div;&#125;var createSingleLoginLayer = getSingle(createLoginLayer);document.getElementById('loginBtn').addEventListener('click', function () &#123; var loginLayer = createSingleLoginLayer(); loginLayer.style.display = 'block';&#125;); è¿™æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºå…¶ä»–æ ‡ç­¾å°±åªéœ€è¦å…³ç³»å¦‚ä½•åˆ›å»ºè¯¥æ ‡ç­¾å°±å¯ä»¥ï¼š 123456789101112var createIframe = function () &#123; var iframe = document.createElement('iframe'); iframe.src = 'https://baidu.com'; document.body.appendChild(iframe); return iframe;&#125;var createSingleIframe = getSingle(createIframe);document.getElementById('loginBtn2').addEventListener('click', function () &#123; createSingleIframe();&#125;); å°ç»“å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§ç®€å•å´éå¸¸å¸¸ç”¨çš„æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯æƒ°æ€§å•ä¾‹æŠ€æœ¯ï¼Œåœ¨åˆé€‚çš„æ—¶å€™æ‰åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”åªåˆ›å»ºå”¯ä¸€çš„ä¸€ä¸ªã€‚ åˆ›å»ºå¯¹è±¡ å’Œ ç®¡ç†å•ä¾‹ çš„èŒè´£è¢«åˆ†å¸ƒåœ¨ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä¸¤ä¸ªæ–¹æ³•ç»„åˆèµ·æ¥æ‰å…·æœ‰å•ä¾‹æ¨¡å¼çš„å¨åŠ›ã€‚ å­¦ä¹ èµ„æ–™ï¼š ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹ç¬¬ 4 ç«  å‘å¸ƒï¼š æ˜é‡‘ã€Šjsè®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹å•ä¾‹æ¨¡å¼ã€‹","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://www.yangtao.site/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"jQueryæ’ä»¶å†™æ³•å°ç»“ä¹‹é‡å†™è½®æ’­å›¾åŠŸèƒ½","slug":"plugin-slide-photo","date":"2019-05-03T13:19:29.000Z","updated":"2019-11-13T05:45:07.770Z","comments":true,"path":"2019/05/03/plugin-slide-photo/","link":"","permalink":"https://www.yangtao.site/2019/05/03/plugin-slide-photo/","excerpt":"æœ€è¿‘åœ¨ç»´æŠ¤è€ç½‘ç«™çš„æ—¶å€™ï¼Œå‘ç°ä¸€äº›jQueryåº“çš„ä½¿ç”¨æœ‰äº›è‡ƒè‚¿ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†è‡ªå®šä¹‰çš„jsæ–‡ä»¶å¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€å˜é‡ï¼Œæ‰€ä»¥æƒ³ç€é‡å†™ä¸‹ï¼Œè™½ç„¶jQueryçš„è¾‰ç…Œæ—¶ä»£å·²ç»è¿‡å»äº†ï¼Œä½†æ˜¯ä»–çš„æ€æƒ³ï¼Œä¾æ—§ç¿çƒ‚ï¼ˆæ»šå»ç»´æŠ¤å»ï¼‰","text":"æœ€è¿‘åœ¨ç»´æŠ¤è€ç½‘ç«™çš„æ—¶å€™ï¼Œå‘ç°ä¸€äº›jQueryåº“çš„ä½¿ç”¨æœ‰äº›è‡ƒè‚¿ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†è‡ªå®šä¹‰çš„jsæ–‡ä»¶å¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€å˜é‡ï¼Œæ‰€ä»¥æƒ³ç€é‡å†™ä¸‹ï¼Œè™½ç„¶jQueryçš„è¾‰ç…Œæ—¶ä»£å·²ç»è¿‡å»äº†ï¼Œä½†æ˜¯ä»–çš„æ€æƒ³ï¼Œä¾æ—§ç¿çƒ‚ï¼ˆæ»šå»ç»´æŠ¤å»ï¼‰ å…ˆä¸¾ä¸ªæ —å­123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566;(function($) &#123; var methods = &#123; init: function(options) &#123; // å¯è‡ªå®šä¹‰æ‰©å±•é¡¹ options = $.extend( true, &#123;&#125;, $.fn.myPlugin.defaults, options ); console.log('options', options, this) return this; &#125;, getName: function() &#123; console.log('Name is ', $.fn.myPlugin.defaults.name, '.') &#125;, getAge: function() &#123; console.log('Age is ', $.fn.myPlugin.defaults.age, '.') &#125;, show: function()&#123; return this.each(function()&#123; this.style.display == \"none\" &amp;&amp; (this.style.display = '') if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\") this.style.display = defaultDisplay(this.nodeName) &#125;) &#125;, hide: function() &#123; return this.css(\"display\", \"none\") &#125; &#125;; // å‘½åç©ºé—´æœ€å¥½åªæœ‰ä¸€ä¸ª $.fn.myPlugin = function(method) &#123; // æ–¹æ³•è°ƒç”¨ï¼Œå¯æ»¡è¶³ä¸‰ç§æƒ…å†µï¼š1. method, 2. init, 3. error if(methods[method]) &#123; return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)); //å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„ &#125; else if(typeof method === 'object' || !method) &#123; // å¦‚æœæ²¡æœ‰å‚æ•°æˆ–è€…å‚æ•° return methods.init.apply(this, arguments); &#125; else &#123; $.error('Method' + method + 'does not exist on jQuery.myPlugin.'); &#125; &#125; $.fn.myPlugin.defaults = &#123; 'name': 'zhangsan', 'age': '20' &#125;;&#125;)(jQuery)/* --- æµ‹è¯• --- */// åˆå§‹åŒ–init$('#testPara').myPlugin()// ä¿®æ”¹å‚æ•°$('#testPara').myPlugin(&#123; 'name': 'wuwang', 'age': '27'&#125;)// è°ƒå–æ–¹æ³•$('#testPara').myPlugin('hide')$('#testPara').myPlugin('show') ç®€å•æ˜“æ‡‚ï¼Œä½†æ˜¯äº”è„ä¿±å…¨ï¼Œæ¥ä¸‹æ¥ç®€å•è¯´æ˜ï¼š æå®šå¤æ‚å‚æ•°åˆ—è¡¨é¦–å…ˆï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼ å‚å¦‚ä¸‹ï¼š 123function foo(a1, a2, a3, a4) &#123; &#125;foo(1, 2, 3, 4) é‚£å¦‚æœä¸ä¼ å‚å‘ï¼Ÿ 1foo(1, null, 3, 4) å°±éœ€è¦å¦‚ä¸Šä½¿ç”¨ null æ¥ç«™ä½ï¼Œå‚æ•°å¤šäº†ï¼Œä¿è¯ä½ æ™•ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ å¯é€‰å“ˆå¸Œå‚æ•°ï¼ˆoptions hashï¼‰ï¼Œå¦‚ï¼š12345foo(1, null, null, 4)// æ”¹æˆfoo(1, &#123; a4: 4&#125;) æ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨ jQuery çš„ $.extend() å·¥å…·å‡½æ•°åˆå¹¶å¯é€‰å‚æ•°ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ï¼š1234567function foo (a1, options) &#123; var settings = $.extend(&#123; a2: value2, a3: value3, a4: value4 &#125;, options || &#123;&#125; );&#125; æœ€åï¼Œå°±æœ‰äº†æ —å­ä¸­å½¢æ€ï¼š 123456var settings = $.extend( true, // æ˜¯å¦ä¸ºæ·±æ‹·è´ &#123;&#125;, // ä½¿ç”¨æºå…ƒç´ å±æ€§æ¥æ‰©å±•ç›®æ ‡å¯¹è±¡ $.fn.myPlugin.defaults, // é»˜è®¤çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå°†å±æ€§æ·»åŠ åˆ° targetï¼ˆå³&#123;&#125;ï¼‰ ç›®æ ‡å¯¹è±¡ä¸­ options // å¤šä¸ªæºåä¼šè¦†ç›–å‰é¢åŒåçš„å±æ€§); è¿™æ ·ï¼Œå°±å†ä¹Ÿä¸ä¼šçº ç»“å‚æ•°çš„ä¸ä¼ æˆ–è€…å¤šä¸ªå ä½ä¼ å‚ï¼ŒæŒºå¥½ã€‚ å®é™…æ“ä½œä¸‹ï¼šå…ˆçœ‹ä¸€ä¸ªå¤šä¸ªå‚æ•°çš„ï¼š 12345$('#btn').myPlugin(&#123; 'mynewname': 'lisi', 'mynewage': 22&#125;)// æ‰“å°settingsï¼š &#123;name: \"zhangsan\", age: \"20\", mynewname: \"lisi\", mynewage: 22&#125; å†çœ‹ä¸€ä¸ªï¼š123456$('#btn').myPlugin(&#123; 'name': 'lisi', 'mynewage': 22&#125;)// &#123;name: \"lisi\", age: \"20\", mynewage: 22&#125; ä¸€çœ‹å°±æ‡‚ï¼Œæœ‰åˆ™è¦†ç›–ï¼Œæ— åˆ™æ·»åŠ ï¼Œå®Œç¾ã€‚ ç»Ÿä¸€å‘½åç©ºé—´ç”±äºæ˜¯jQueryæ’ä»¶ï¼Œéƒ½æŒ‚è½½åœ¨ jQuery å¯¹è±¡ä¸‹ï¼Œæ‰€ä»¥æ°å½“å‘½åç©ºé—´çš„æ’ä»¶å°½å¯èƒ½ä¸ä¸å…¶ä»–æ’ä»¶å†²çªï¼Œç”šè‡³æ˜¯ jQuery çš„æ ¸å¿ƒåº“æ–¹æ³•ã€‚ æ¯”å¦‚ï¼š12345(function($) &#123; var defaults = &#123;&#125; // å®šä¹‰é»˜è®¤é¡¹ var methods = &#123;&#125; // å®šä¹‰æ–¹æ³• $.fn.myPlugin = function(method) &#123;&#125; // å®šä¹‰ myPlugin å‘½åç©ºé—´å¹¶èµ‹å€¼ä¸€ä¸ªåŒ¿åå‡½æ•°&#125;(jQuery) å…è®¸å…¬å¼€è®¿é—®é»˜è®¤è®¾ç½®ä¸ºäº†æ›´åŠ çš„å®šåˆ¶åŒ–ï¼Œæˆ‘ä»¬éœ€è¦æš´éœ²é»˜è®¤çš„è®¾ç½®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¿®æ”¹è®¾ç½®äº†ã€‚ é¦–å…ˆä¿®æ”¹ defaults å˜é‡ï¼Œä¸ºäº†æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œï¼Œéœ€è¦æŠŠå®ƒèµ‹å€¼ç»™ $.fn å±æ€§ã€‚å¹¶ä¸”ä¸ºäº†ç»Ÿä¸€å‘½åç©ºé—´åŸåˆ™ï¼Œéœ€è¦æŠŠå®ƒä½œä¸º myPlugin çš„å±æ€§ï¼Œå¦‚ï¼š1234$.fn.myPlugin.defaults = &#123; 'name': 'zhangsan', 'age': '20'&#125;; æ¥ç€ï¼Œå½“ä½¿ç”¨é»˜è®¤å€¼æ¥åˆå¹¶å‚æ•°é€‰é¡¹æ—¶ï¼Œåœ¨é¡¹ç›®ä¸­åªå‡ºç°ä¸€æ¬¡ï¼Œå³åœ¨ init() æ–¹æ³•é‡Œï¼Œå¦‚ï¼š1234567891011var methods = &#123; init: function(options) &#123; // å¯è‡ªå®šä¹‰æ‰©å±•é¡¹ options = $.extend( true, &#123;&#125;, $.fn.myPlugin.defaults, options ); &#125;&#125; è¿™æ ·ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨é‡Œç›´æ¥æµ‹è¯•ï¼š123456// è·å–$.fn.myPlugin.defaults.name // zhangsan// ä¿®æ”¹$.fn.myPlugin.defaults.name = 'wangwu'// \"wangwu\" ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§ä½¿ç”¨ return this ï¼Œå¯ä»¥ç»´æŠ¤é“¾å¼è°ƒç”¨æ€§ã€‚ Array.prototype.slice.call()Array.prototype.slice.call(arguments)èƒ½å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„ ï¼ˆarguments.toArray().slice()ï¼‰ 12var a=&#123;length:2,0:'first',1:'second'&#125;;Array.prototype.slice.call(a); //Array [ \"first\", \"second\" ] å†ä¸¾ä¸ªæ —å­é¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨è½®æ’­å›¾ï¼Œæˆ‘ä»¬å°±åœ¨å‰äººçš„åŸºç¡€ä¸Šï¼Œæ¨¡ä»¿ä¸€ä¸‹å§ï¼ˆä½ å°±è¯´æ˜¯æŠ„çš„ä¸å°±è¡Œäº†éº½ï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111;(function ($) &#123; function showPhoto(options, index) &#123; var $photoElement = $(options.photoElement); if (!$photoElement.is(':animated')) &#123; $photoElement.animate(&#123; opacity: 0.5 &#125;, 0).attr( 'src', options.transformer(options.$thumbnails[index].src) ).animate(&#123; opacity: 1 &#125;, 800); options.current = index; &#125; &#125; var methods = &#123; init: function (options) &#123; options = $.extend( true, &#123;&#125;, $.fn.slidePhoto.defaults, options, &#123; current: 0, // åˆå§‹å€¼ä¸º0 $thumbnails: this.filter('img'), //é€‰å‡ºæ‰€æœ‰çš„å›¾ç‰‡ delay: options.delay &gt;= 1000 ? options.delay : 1000, &#125; ); // ç‚¹å‡»å›¾ç‰‡ï¼Œåˆ‡æ¢å¯¹åº”å¤§å›¾ options.$thumbnails.click(function () &#123; showPhoto(options, options.$thumbnails.index(this)); &#125;); // æ˜¾ç¤ºä¸‹ä¸€å¼  $(options.nextControl + ', ' + options.photoElement).click(function () &#123; var index = (options.current + 1) % options.$thumbnails.length; // å–æ¨¡ showPhoto(options, index); &#125;); // æ˜¾ç¤ºä¸Šä¸€å¼  $(options.previousControl).click(function () &#123; var index = options.current === 0 ? options.$thumbnails.length - 1 : options.current - 1; showPhoto(options, index); &#125;); // æ˜¾ç¤ºç¬¬ä¸€å¼  $(options.firstControl).click(function () &#123; showPhoto(options, 0); &#125;).triggerHandler('click'); // ä¸»è¦æ˜¯åˆå§‹æ—¶è§¦å‘ï¼Œè§¦å‘è¢«é€‰å…ƒç´ ä¸ŠæŒ‡å®šçš„äº‹ä»¶ï¼Œè¿”å›äº‹ä»¶å¤„ç†å‡½æ•°çš„è¿”å›å€¼ // æ˜¾ç¤ºæœ€åä¸€å¼  $(options.lastControl).click(function () &#123; showPhoto(options, options.$thumbnails.length - 1); &#125;) // è‡ªåŠ¨æ’­æ”¾ var tick; function autoPlay() &#123; tick = window.setInterval( function () &#123; $(options.nextControl).triggerHandler('click') &#125;, options.delay); &#125; // é¼ æ ‡ç§»å…¥ç§»å‡ºçŠ¶æ€ function mouserStatus(obj) &#123; $(obj).mouseenter(function () &#123; if (tick) &#123; window.clearInterval(tick); &#125; &#125;).mouseleave(autoPlay); &#125; if (options.autoPlayControl) &#123; autoPlay(); &#125; // é¼ æ ‡æ»‘åŠ¨æš‚åœã€æ’­æ”¾ mouserStatus(options.photoElement); mouserStatus(options.$thumbnails); return this; &#125; &#125;; $.fn.slidePhoto = function (method) &#123; if (methods[method]) &#123; return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)); &#125; else if ($.type(method) === 'object') &#123; return methods.init.apply(this, arguments); &#125; else &#123; $.error('Method ' + method + ' does not exist on jQuery.slidePhoto'); &#125; &#125;; $.fn.slidePhoto.defaults = &#123; photoElement: 'img.photomatic-photo', // å¤§å›¾æ˜¾ç¤º transformer: function (name) &#123; return name.replace('thumbnail', 'photo'); // å°†'thumbnail' æ›¿æ¢ä¸º 'photo'ï¼Œå³æœ€ç»ˆè¿”å›å¤§å›¾çš„srcå±æ€§å€¼ &#125;, nextControl: null, // ä¸‹ä¸€å¼  previousControl: null, // å‰ä¸€å¼  firstControl: null, // ç¬¬ä¸€å¼  lastControl: null, // æœ€åä¸€å¼  autoPlayControl: false, delay: 3000 // å»¶æ—¶ &#125;;&#125;)(jQuery) ç”¨æ³•ï¼š123456789$('#thumbnails-pane img').slidePhoto(&#123; photoElement: '#photo-display', previousControl: '#previous-button', nextControl: '#next-button', firstControl: '#first-button', lastControl: '#last-button', autoPlayControl: true, delay: 3000 &#125;); å‚è€ƒï¼š ã€ŠjQueryå®æˆ˜ ç¬¬ä¸‰ç‰ˆã€‹","categories":[{"name":"å·¥å…·åº“","slug":"å·¥å…·åº“","permalink":"https://www.yangtao.site/categories/å·¥å…·åº“/"}],"tags":[{"name":"jsæ’ä»¶","slug":"jsæ’ä»¶","permalink":"https://www.yangtao.site/tags/jsæ’ä»¶/"}]},{"title":"åˆæ¢ thisã€call å’Œ apply","slug":"js-this-apply-call","date":"2019-05-03T13:16:03.000Z","updated":"2019-05-03T13:22:55.761Z","comments":true,"path":"2019/05/03/js-this-apply-call/","link":"","permalink":"https://www.yangtao.site/2019/05/03/js-this-apply-call/","excerpt":"this JavaScript ä¸­ this æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡","text":"this JavaScript ä¸­ this æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ this çš„æŒ‡å‘ ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ this æŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¦‚ï¼š 123456789var obj = &#123; a: 1, getA: function() &#123; console.log(this === obj); // true console.log(this.a); // 1 &#125;&#125;;obj.getA(); ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ å½“å‡½æ•°ä¸ä½œä¸ºå¯¹è±¡çš„å±æ€§è¢«è°ƒç”¨æ—¶ï¼Œæ™®é€šå‡½æ•°çš„ this æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œæµè§ˆå™¨é‡Œå°±æ˜¯ window å¯¹è±¡ã€‚ 12345678910var name = \"globalName\";var obj = &#123; name: \"tyang\", getName: function() &#123; return this.name; &#125;&#125;;var getName = obj.getName;console.log(obj.getName()); // tyangconsole.log(getName()); // globalName obj.getName() ä½œä¸º obj å¯¹è±¡çš„å±æ€§è¢«è°ƒç”¨ï¼Œthis æŒ‡å‘ obj å¯¹è±¡; getName() ä½¿ç”¨å˜é‡ getName å¼•ç”¨ obj.getNameï¼Œæ­¤æ—¶æ˜¯å‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œthis æŒ‡å‘å…¨å±€ window; åœ¨ä¸¥æ ¼æ¨¡å¼ï¼Œæƒ…å†µæœ‰æ‰€ä¸åŒï¼šthis ä¸ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œè€Œæ˜¯ undefinedï¼š 123456function func() &#123; \"use strict\"; console.log(this); // undefined&#125;func(); å½“å‡½æ•°ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthis ç­‰äºé‚£ä¸ªå¯¹è±¡ã€‚ä¸è¿‡ï¼ŒåŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œå› æ­¤å…¶ this å¯¹è±¡é€šå¸¸æŒ‡å‘ windowã€‚ 1234567891011121314var gName = \"The window\";var gObject = &#123; gName: \"My object\", getName: function() &#123; return function() &#123; // è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•° return this.gName; &#125;; &#125;&#125;;console.log(gObject.getName()()); // 'The window'var getNameFunc = gObject.getName();console.log(getNameFunc()); // 'The window' åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å¯¹è±¡ gNameï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³• getName()ï¼Œ è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°è¿”å› this.nameã€‚å› æ­¤è°ƒç”¨ gObject.getName()() ä¼šç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² &#39;The window&#39;ã€‚ ä¸ºä»€ä¹ˆåŒ¿åå‡½æ•°æ²¡æœ‰å–å¾—åŒ…å«ä½œç”¨åŸŸçš„ this å¯¹è±¡å‘¢ï¼Ÿ æ¯ä¸ªå‡½æ•°å†è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å–å¾—ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼šthis å’Œ argumentsï¼Œå†…éƒ¨å‡½æ•°åœ¨æœç´¢è¿™ä¸¤ä¸ªå˜é‡æ—¶ï¼Œåªä¼šæœç´¢åˆ°å…¶æ´»åŠ¨å¯¹è±¡ä¸ºæ­¢ï¼Œå› æ­¤æ°¸è¿œä¸å¯èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­çš„è¿™ä¸¤ä¸ªå˜é‡ã€‚ æ‰€ä»¥ï¼Œå¯ä»¥åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­è®¾ç½®ä¸€ä¸ªå˜é‡æ¥ä¿å­˜ this å¯¹è±¡ï¼š 123456789101112var gName = \"The window\";var gObject = &#123; gName: \"My object\", getName: function() &#123; var that = this; // å°† this å¯¹è±¡èµ‹å€¼ç»™ that å˜é‡ return function() &#123; return that.gName; // that å¼•ç”¨ç€ gObject &#125;; &#125;&#125;;console.log(gObject.getName()()); // 'My object' å½“ç„¶ï¼Œarguments å¯¹è±¡ä¹Ÿå¯ä»¥å¦‚æ­¤ä½¿ç”¨ï¼šå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°å¦ä¸€ä¸ªé—­åŒ…èƒ½å¤Ÿè®¿é—®çš„å˜é‡ä¸­ã€‚ æ„é€ å™¨è°ƒç”¨ å½“ä½¿ç”¨ new è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ„é€ å™¨é‡Œçš„ this æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚ï¼š 12345var MyClass = function() &#123; this.name = \"Lisi\";&#125;;var nameObj = new MyClass();console.log(nameObj.name); // Lisi ä½†æ˜¯ï¼Œå½“æ˜¾å¼è¿”å›ä¸€ä¸ª object ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œé‚£æœ€ç»ˆä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯ä¹‹å‰çš„ thisï¼š 123456789var MyClass = function() &#123; this.name = \"Lisi\"; return &#123; // å¦‚æœè¿™é‡Œä¸ä¼šçƒ¦ object ç±»å‹çš„æ•°æ®ï¼Œå¦‚ï¼šreturn 'wangwu'ï¼Œå°±ä¸ä¼šè¿”å›æ˜¾å¼å¯¹è±¡ name: \"wangwu\" &#125;;&#125;;var nameObj = new MyClass();console.log(nameObj.name); // wangwu Function.prototype.call æˆ– Function.prototype.apply è°ƒç”¨ call å’Œ apply å¯ä»¥åŠ¨æ€åœ°æ”¹å˜ä¼ å…¥å‡½æ•°çš„ thisï¼š 12345678var personObj = &#123; name: \"ytao\", age: \"22\"&#125;;function person() &#123; return this.name + this.age;&#125;console.log(person.call(personObj)); // ytao22 ä¸¢å¤±çš„ thisæˆ‘ä»¬ä¸€èˆ¬ä¼šé‡å†™è¿™ä¸ªè·å– id çš„æ–¹æ³•ï¼š 12345var getId = function(id) &#123; return document.getElementById(id);&#125;;getId(\"divBox\"); é‚£å¯ä¸å¯ä»¥è¿™æ ·å‘¢ï¼š 12getId2 = document.getElementById;getId2(\"divBox\"); // Uncaught TypeError: Illegal invocation ç»“æœç›´æ¥æŠ¥é”™ï¼Œå½“ getElementById æ–¹æ³•ä½œä¸º document å¯¹è±¡çš„å±æ€§è¢«è°ƒç”¨æ—¶ï¼Œ æ–¹æ³•å†…éƒ¨çš„ this æ˜¯æŒ‡å‘ document çš„ã€‚å¦‚æœ getId2(&#39;divBox&#39;)ï¼Œç›¸å½“äºæ˜¯æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘çš„æ˜¯ windowã€‚ æ‰€ä»¥ï¼ŒæŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¨¡æ‹Ÿä¸€ä¸‹å®ƒçš„å®ç°ï¼š 12345678document.getElementById = (function(func) &#123; return function() &#123; return func.apply(document, arguments); &#125;;&#125;)(document.getElementById);getId3 = document.getElementById;getId3(\"divBox\"); call å’Œ apply fun.apply(thisArg, [argsArray]) fun.call(thisArg, arg1, arg2, â€¦) åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œcall å’Œ apply æ–¹æ³•å°¤ä¸ºæœ‰ç”¨ï¼Œä¸¤è€…ç”¨æ³•ä¸€è‡´ï¼Œåªæ˜¯ä¼ å‚çš„å½¢å¼ä¸Šæœ‰æ‰€åŒºåˆ«è€Œå·²ã€‚ åŒºåˆ«apply() æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†… this å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œapply() æ–¹æ³•å°†è¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ call() æ–¹æ³•çš„ä½œç”¨å’Œ apply() æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«å°±æ˜¯ call()æ–¹æ³•æ¥å—çš„æ˜¯å‚æ•°åˆ—è¡¨ï¼Œè€Œ apply()æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ã€‚ Functionâ€‹.prototypeâ€‹.apply() Functionâ€‹.prototypeâ€‹.call() ç¬¬ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œå‡½æ•°ä½“å†…çš„ this ä¼šæŒ‡å‘é»˜è®¤çš„å®¿ä¸»å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¾ç„¶æ˜¯ nullã€‚ 12345678910var applyFunc = function(a, b, c) &#123; console.log(this === window);&#125;;applyFunc.apply(null, [1, 2, 3]); // truevar applyFunc = function(a, b, c) &#123; \"use strict\"; console.log(this === null);&#125;;applyFunc.apply(null, [1, 2, 3]); // true ç”¨é€” æ”¹å˜ this æŒ‡å‘ å‡å¦‚åœ¨ä¸€ä¸ªç‚¹å‡»äº‹ä»¶å‡½æ•°ä¸­æœ‰ä¸€ä¸ªå†…éƒ¨å‡½æ•° funcï¼Œå½“ç‚¹å‡»äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š 1234567document.getElementById(\"divBox\").onclick = function() &#123; console.log(this.id); // divBox var func = function() &#123; console.log(this.id); // undefinedï¼Œè¿™é‡Œçš„ this æŒ‡å‘äº† window &#125;; func();&#125;; è¿™æ—¶ï¼Œæˆ‘ä»¬ç”¨ call() æ¥æ”¹å˜ä¸€ä¸‹ï¼š 1234567document.getElementById(\"divBox\").onclick = function() &#123; console.log(this.id); // divBox var func = function() &#123; console.log(this.id); // divBox &#125;; func.call(this);&#125;; æ¨¡æ‹Ÿ bind æ–¹æ³• function.bind(thisArg[, arg1[, arg2[, â€¦]]]) bind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨æ—¶è®¾ç½® this å…³é”®å­—ä¸ºæä¾›çš„å€¼ã€‚å¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œå°†ç»™å®šå‚æ•°åˆ—è¡¨ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°åºåˆ—çš„å‰è‹¥å¹²é¡¹ã€‚ 1234567891011121314151617Function.prototype.bind = function(context) &#123; var self = this; // ä¿å­˜åŸå‡½æ•° return function() &#123; // è¿”å›æ–°å‡½æ•° return self.apply(context, arguments); // å°†ä¼ å…¥çš„ context å½“åšæ–°å‡½æ•°ä½“å†…çš„ this &#125;;&#125;;var bindObj = &#123; name: \"tyang\"&#125;;var bindFunc = function() &#123; console.log(this.name); // tyang&#125;.bind(bindObj);bindFunc(); è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Function.prototype.bindå®ç°ï¼Œself.apply(context, arguments)æ‰æ˜¯æ‰§è¡ŒåŸæ¥çš„ bindFunc å‡½æ•°ï¼Œå¹¶ä¸”æŒ‡å®š context å¯¹è±¡ä¸º bindFunc å‡½æ•°ä½“å†…çš„ thisã€‚ æˆ‘ä»¬å†ç»§ç»­ä¿®æ”¹ä¸‹ï¼Œä½¿ä¹‹å¯ä»¥é¢„å…ˆæ·»åŠ ä¸€äº›å‚æ•°ï¼š 123456789101112131415161718192021Function.prototype.bind = function() &#123; var self = this, context = [].shift.call(arguments), // è·å–å‚æ•°ä¸­ç¬¬ä¸€ä¸ªä¸ºç»‘å®šçš„thisä¸Šä¸‹æ–‡ args = [].slice.call(arguments); // å°†å‰©ä½™çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„ // è¿”å›æ–°å‡½æ•° return function() &#123; return self.apply(context, [].concat.call(args, [].slice.call(arguments))); //arguments ä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œå³ä¼ å…¥çš„ 3ï¼Œ4 &#125;;&#125;;var bindObj = &#123; name: \"lisisi\"&#125;;var bindFunc = function(a, b, c, d) &#123; console.log(this.name); // lisisi console.log([a, b, c, d]); // [1, 2, 3, 4]&#125;.bind(bindObj, 1, 2);bindFunc(3, 4); self.apply(context, [].concat.call(args, [].slice.call(arguments)));ï¼Œæ‰§è¡Œæ–°å‡½æ•°çš„æ—¶å€™ï¼Œä¼šæŠŠä¹‹å‰ä¼ å…¥çš„ context ä½œä¸º thisï¼Œ[].slice.call(arguments)å°†æ–°å‡½æ•°ä¼ å…¥çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„ï¼Œå¹¶ä½œä¸º[].concat.call(args)çš„ç»™å®šå‚æ•°ï¼Œç»„åˆä¸¤æ¬¡ï¼Œä½œä¸ºæ–°å‡½æ•°æœ€ç»ˆçš„å‚æ•°ã€‚ å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³• ç¬¬ä¸€ç§ï¼Œâ€å€Ÿç”¨æ„é€ å‡½æ•°â€œå®ç°ä¸€äº›ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š 1234567891011var A = function(name) &#123; this.name = name;&#125;;var B = function() &#123; A.apply(this, arguments);&#125;;B.prototype.getName = function() &#123; return this.name;&#125;;var bbb = new B(\"Yangtao\");console.log(bbb.getName()); //Yangtao ç¬¬äºŒç§ï¼Œç»™ç±»æ•°ç»„å¯¹è±¡ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š 1234(function() &#123; Array.prototype.push.call(arguments, 3); console.log(arguments); // [1, 2, 3]&#125;)(1, 2); å†æ¯”å¦‚ä¹‹å‰ç”¨åˆ°çš„ï¼ŒæŠŠ arguments è½¬æˆçœŸæ­£çš„æ•°ç»„çš„æ—¶å€™å¯ä»¥å€Ÿç”¨ Array.prototype.slice.call(arguments)ï¼Œæƒ³æˆªå»å¤´ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå€Ÿç”¨Array.prototype.shift.call(arguments) è™½ç„¶æˆ‘ä»¬å¯ä»¥æŠŠâ€ä»»æ„â€œå¯¹è±¡ä¼ å…¥ Array.prototype.push: 1234var aObj = &#123;&#125;;Array.prototype.push.call(aObj, \"first\");console.log(aObj.length); // 1console.log(aObj[0]); // first ä½†æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿå¾—æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š å¯¹è±¡æœ¬èº«è¦å¯ä»¥å­˜å–å±æ€§ å¯¹è±¡çš„ length å±æ€§å¯è¯»å†™ å¦‚æœæ˜¯å…¶ä»–ç±»å‹ï¼Œæ¯”å¦‚ numberï¼Œæ— æ³•å­˜å–ï¼›æ¯”å¦‚å‡½æ•°ï¼Œlength å±æ€§ä¸å¯å†™ï¼Œä½¿ç”¨ call æˆ– apply å°±ä¼šæŠ¥é”™ï¼š 12345678var num = 1;Array.prototype.push.call(num, \"2\");console.log(num.length); // undefinedconsole.log(num[0]); // undefinedvar funcObj = function() &#123;&#125;;Array.prototype.push.call(funcObj, \"3\");console.log(funcObj.length); // Uncaught TypeError: Cannot assign to read only property 'length' of function 'function () &#123;&#125;' å­¦ä¹ èµ„æ–™ï¼š ã€ŠJavaScript é«˜ç¨‹ 3ã€‹ç¬¬ä¸ƒç«  ã€ŠJavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ Â· æ›¾æ¢ã€‹ç¬¬ 2 ç«  å‘å¸ƒï¼š æ˜é‡‘ã€Šåˆæ¢ thisã€call å’Œ applyã€‹","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"åˆæ¢ JavaScript çš„å˜é‡","slug":"js-var","date":"2019-02-25T08:12:34.000Z","updated":"2019-02-27T11:04:59.199Z","comments":true,"path":"2019/02/25/js-var/","link":"","permalink":"https://www.yangtao.site/2019/02/25/js-var/","excerpt":"åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼","text":"åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼ ECMAScriptå˜é‡ä¸€èˆ¬æœ‰ä¸¤ç§æ•°æ®ç±»å‹çš„å€¼ï¼šåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚ åŸºæœ¬ç±»å‹ï¼š ç®€å•çš„æ•°æ®æ®µï¼šUndefined, Null, Boolean, Number, String å¼•ç”¨ç±»å‹ï¼šå¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ï¼› 1. åŠ¨æ€çš„å±æ€§å®šä¹‰ä¸¤è€…çš„å€¼ï¼šåˆ›å»ºä¸€ä¸ªå˜é‡å¹¶ä¸ºå…¶å˜é‡èµ‹å€¼ï¼› æ‰§è¡Œä¸¤è€…çš„å€¼ï¼š å¼•ç”¨ç±»å‹ï¼šå¯ä»¥æ·»åŠ ã€åˆ é™¤å±æ€§å’Œæ–¹æ³•ï¼› åŸºæœ¬ç±»å‹ï¼šä¸èƒ½æ·»åŠ ã€åˆ é™¤å±æ€§å’Œæ–¹æ³•ï¼› æ¯”å¦‚ï¼šå¼•ç”¨ç±»å‹ aï¼Œå¯ä»¥æ·»åŠ å±æ€§ name age1234var a = new Object();a.name = \"æ¨å­é¾™\";a.age = 24;console.log(a.name); //æ¨å­é¾™ åŸºæœ¬ç±»å‹ name æ— æ³•æ·»åŠ å±æ€§ age123var name = \"æ¨å­é¾™\";name.age = 24;console.log(name.age); //undefined ä»£ç ä¸­å¯çŸ¥ï¼šåªèƒ½ç»™å¼•ç”¨ç±»å‹å€¼åŠ¨æ€åœ°æ·»åŠ å±æ€§ï¼Œä»¥ä¾¿å°†æ¥ä½¿ç”¨ã€‚ 2. èµ‹å€¼å˜é‡å€¼ä»ä¸€ä¸ªå˜é‡å‘å¦ä¸€ä¸ªå˜é‡å¤åˆ¶åŸºæœ¬ç±»å‹å€¼å’Œå¼•ç”¨ç±»å‹å€¼æ—¶ï¼š åŸºæœ¬ç±»å‹ï¼šåœ¨å˜é‡å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å€¼ï¼Œå¹¶å°†å…¶å€¼å¤åˆ¶ç»™æ–°å˜é‡åˆ†é…çš„ä½ç½®ä¸Šï¼›ï¼ˆå®Œå…¨ç‹¬ç«‹çš„ä¸¤ä¸ªå˜é‡ï¼‰ä¾‹å¦‚ï¼š 123var a = 111;var b = a;console.log(b); //111 ä»£ç ä¸­å¯çŸ¥ï¼šå˜é‡bçš„å€¼åªæ˜¯å˜é‡açš„å€¼çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸¤è€…çš„å€¼111æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ å¼•ç”¨ç±»å‹ï¼šå°†å­˜å‚¨åœ¨å˜é‡å¯¹è±¡ä¸­çš„å€¼å¤åˆ¶ä¸€ä»½æ”¾åˆ°ä¸ºæ–°å˜é‡åˆ†é…çš„ç©ºé—´ä¸­ï¼›ï¼ˆå¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡çš„ä¸¤ä¸ªå˜é‡ï¼‰ å¼•ç”¨ç±»å‹çš„å€¼çš„å‰¯æœ¬å®é™…æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å­˜å‚¨åœ¨å †ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚ä¾‹å¦‚ï¼š1234var obj1 = new Object;var obj2 = obj1;obj1.name = \"æ¨å­é¾™\";console.log(obj2,name); // Object &#123; name=\"æ¨å­é¾™\"&#125; æ¨å­é¾™ ä»£ç ä¸­å¯çŸ¥ï¼šobj1å’Œobj2éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡Objectï¼›æ‰€ä»¥ï¼Œä¸ºobj1æ·»åŠ çš„nameå±æ€§ï¼Œé€šè¿‡obj2ä¹Ÿå¯ä»¥è®¿é—®çš„åˆ°ã€‚ 3. ä¼ é€’å‚æ•°æˆ‘ä»¬éƒ½çŸ¥é“åŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼è®¿é—®çš„ï¼Œå› ä¸ºå¯ä»¥è®¿é—®ä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼ã€‚æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ åŸºæœ¬ç±»å‹ï¼šåŸºæœ¬ç±»å‹å€¼çš„ä¼ é€’å¦‚åŒåŸºæœ¬ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼›åœ¨å‘å‚æ•°ä¼ é€’å€¼ï¼Œè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆå‘½åå‚æ•°ï¼‰ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¸ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚ ä¾‹å¦‚ï¼š 12345678function fn(num) &#123; num += 10; return num;&#125;var a = 10;var result = fn(a);console.log(result); //20console.log(a); //10 ä»£ç ä¸­å¯çŸ¥ï¼šå‚æ•°numå’Œå˜é‡aäº’ä¸ç›¸è¯†ï¼Œåªæ˜¯æœ‰ç€ç›¸åŒçš„å€¼è€Œå·²ï¼Œç”¨å®Œä¹‹åï¼Œä½ è¿˜æ˜¯ä½ ï¼Œæˆ‘è¿˜æ˜¯æˆ‘ï¼Œäº’ä¸å¹²æ”¿ã€‚ å¼•ç”¨ç±»å‹ï¼šå¼•ç”¨ç±»å‹çš„ä¼ é€’å¦‚åŒå¼•ç”¨ç±»å‹å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼›åœ¨å‘å‚æ•°ä¼ é€’å€¼æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå€¼åœ¨å†…å­˜ä¸­çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚ ä¾‹å¦‚ï¼š123456function fn(obj) &#123; obj.name = 'æ¨å­é¾™';&#125;var person = new Object();fn(person);console.log(person.name); //æ¨å­é¾™ ä»£ç ä¸­å¯çŸ¥ï¼šåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå‚æ•°objå’Œå˜é‡personå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡Objectï¼Œæ‰€ä»¥ï¼Œä½ ä¸åŠ¨æˆ‘ä¹Ÿä¸åŠ¨ï¼Œä½ åŠ¨æˆ‘ä¹ŸåŠ¨ï¼Œä½ ä¸­æœ‰æˆ‘ï¼Œæˆ‘ä¸­æœ‰ä½ ï¼Œæƒ…ä¹‰ç»µç»µï¼Œç»ä¹…ä¸æ¯â€¦â€¦ ä¹Ÿå°±æ˜¯è¯´ï¼šå³ä½¿å˜é‡personæ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œä½†æ˜¯å‚æ•°objï¼ˆæƒ³è±¡æˆå±€éƒ¨å˜é‡ï¼‰è¿˜æ˜¯ä¼šæŒ‰å¼•ç”¨æ¥è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ã€‚ è®¿é—®å˜é‡æœ‰æŒ‰å€¼å’ŒæŒ‰å¼•ç”¨ä¸¤ç§æ–¹å¼ï¼Œå‚æ•°åªèƒ½æŒ‰å€¼ä¼ é€’ã€‚ 4. æ£€æµ‹ç±»å‹ åŸºæœ¬ç±»å‹ï¼štypeof å¼•ç”¨ç±»å‹ï¼šinstanceofï¼ˆå¯¹è±¡æˆ–nullï¼‰ ä¾‹å¦‚ï¼š 1234567891011121314151617var a = 'Yang Zilong';var b = 24;var c = '';var d = true;var e;var g = undefined;var f = null; // æ¯”è¾ƒç‰¹æ®Švar h = new Object();console.log(typeof a); //stringconsole.log(typeof b); //number console.log(typeof c); //stringconsole.log(typeof d); //booleanconsole.log(typeof e); //undefinedconsole.log(typeof g); //undefinedconsole.log(typeof f); //objectconsole.log(typeof h); //object æ‰€ç”¨å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯Objectçš„å®ä¾‹ã€‚ å¦‚ä¸‹ï¼š12345678var person = new Object();var num = [1,2, 3];var pattern = /.at/i;console.log(person instanceof Object); //trueconsole.log(num instanceof Object); //trueconsole.log(num instanceof Array); //trueconsole.log(pattern instanceof Object); //trueconsole.log(pattern instanceof RegExp); //true ä½¿ç”¨instanceofæ£€æµ‹åŸºæœ¬ç±»å‹ï¼Œä¼šè¿”å›falseï¼ŒåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ã€‚ å‚è€ƒèµ„æ–™ï¼šã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ç¬¬å››ç«  åŒæ­¥äºï¼š æ˜é‡‘ã€æ…•è¯¾ç½‘","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"åˆæ¢JavaScriptä¹‹Prototype","slug":"js-prototype","date":"2019-02-25T07:21:42.000Z","updated":"2019-05-03T13:17:45.798Z","comments":true,"path":"2019/02/25/js-prototype/","link":"","permalink":"https://www.yangtao.site/2019/02/25/js-prototype/","excerpt":"Array.prototypeæ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œä¸ç®¡æ˜¯ä½ è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯å‡½æ•°å†…ç½®çš„ã€‚ 123var fn = function() &#123;&#125;console.log(fn.prototype) // &#123;constructor: Æ’&#125;console.log(fn.prototype.constructor === fn) // true","text":"Array.prototypeæ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œä¸ç®¡æ˜¯ä½ è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯å‡½æ•°å†…ç½®çš„ã€‚ 123var fn = function() &#123;&#125;console.log(fn.prototype) // &#123;constructor: Æ’&#125;console.log(fn.prototype.constructor === fn) // true è¿™é‡Œçš„ fn.prototype æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„ constructor å±æ€§åˆæŒ‡å›äº†è¯¥å‡½æ•°æœ¬èº« fnã€‚ å³æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª consctructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°ï¼Œæ¯”å¦‚ï¼š 1Array === Array.prototype.constructor //true æˆ‘ä»¬æ¥ç€çœ‹ï¼š 1console.log(Array.prototype) // [constructor: Æ’, concat: Æ’, copyWithin: Æ’, fill: Æ’, find: Æ’, â€¦] è¿™é‡Œï¼Œé™¤äº† constructor å±æ€§ï¼Œè¿˜æœ‰å…¶ä»–å†…ç½®çš„å±æ€§ï¼Œå³æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ“ä½œæ•°ç»„çš„æ–¹æ³•ã€‚ __proto__(éšå¼åŸå‹)æ‰€æœ‰é€šè¿‡å‡½æ•° new ï¼ˆæ„é€ å‡½æ•°ï¼‰å‡ºæ¥çš„ä¸œè¥¿ï¼Œéƒ½æœ‰ä¸€ä¸ª __proto__ æŒ‡å‘è¯¥å‡½æ•°çš„ prototypeï¼Œæ¯”å¦‚ï¼š 123var arr = new Array()arr.__proto__ === Array.prototype // trueArray === Array.prototype.constructor //true è¯´ç™½äº†ï¼Œé€šè¿‡æ„é€ å‡½æ•° new å‡ºæ¥çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„__proto__å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆå³Array.prototypeï¼‰ï¼Œæ‰€ä»¥ï¼Œè¯¥å‡½æ•°ä¸æ„é€ å‡½æ•°ä¹‹é—´æ²¡æœ‰ä»€ä¹ˆå…³è”ï¼Œæ˜¯é€šè¿‡ åŸå‹å¯¹è±¡ äº§ç”Ÿäº†è”ç³»ï¼Œè¿™ä¹Ÿå°±æ˜¯åŸå‹é“¾ç»§æ‰¿çš„é›å½¢å§ã€‚ ä¸¾ä¸ªå…³äºç»§æ‰¿ extends çš„ä¾‹å­ï¼š 12345678910111213141516function Animal() &#123; this.eat = function() &#123; console.log('Animal eat') &#125;&#125;function Dog() &#123; this.bark = function() &#123; console.log('Dog bark') &#125;&#125;// ç»‘å®šåŸå‹ï¼Œå®ç°ç»§æ‰¿Dog.prototype = new Animal()var dog = new Dog()dog.eat() // Animal eatdog.bark() // Dog bark ä¸Šé¢çœ‹æ˜ç™½äº†ï¼Œé‚£ä¹ˆES6çš„ç»§æ‰¿æˆ‘ä»¬ä¹Ÿå°±å¯ä»¥æ˜ç™½åŸç†äº†ï¼Œå³ class Dog extends Animal ç›¸å½“äº Dog.prototype = new Animal() 123456789101112131415161718192021class Animal &#123; constructor(name) &#123; this.name = name &#125; eat() &#123; console.log('Animal eat!' + this.name) &#125;&#125;class Dog extends Animal &#123; constructor(name) &#123; super(name) this.name = name &#125; bark() &#123; console.log('Dog bark!' + this.name) &#125;&#125;const dog = new Dog('å“ˆå£«å¥‡')dog.eat()dog.bark() æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¸…æ¥šä¸ºä»€ä¹ˆèƒ½è¿™æ ·ï¼š å½“æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆæ•°ç»„ï¼‰çš„æŸä¸ªåŠŸèƒ½æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«å…·æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç›´æ¥è°ƒç”¨ï¼Œæ²¡æœ‰çš„è¯ï¼Œé‚£å°±å»è‡ªèº«çš„__proto__å±æ€§ä¸­å»æ‰¾ 12345678910var obj = &#123; myfn: function() &#123; console.log('myfn') &#125;&#125;obj.myfn() // 'myfn'obj.hasOwnProperty('myfn') //trueobj.toString() // \"[object Object]\"obj.hasOwnProperty('toString') // falseobj.__proto__.hasOwnProperty('toString') // true hasOwnProperty()å°±å¯ä»¥å¾—å‡ºè¿™ä¸ªå±æ€§æ˜¯å¦æ˜¯å±äºè¯¥å¯¹è±¡æœ¬èº«çš„å±æ€§: myfn æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼Œobj.hasOwnProperty(&#39;myfn&#39;)ä¸º true toString() æˆ‘ä»¬ä¸æ˜¯è‡ªå®šä¹‰çš„ï¼Œå´å¯ä»¥ä½¿ç”¨ï¼ŒæŸ¥ä¸€ä¸‹æ˜¯å¦å±äºè‡ªå®šä¹‰å±æ€§ï¼Œobj.hasOwnProperty(&#39;toString&#39;)ï¼Œç­”æ¡ˆä¸ºfalse æ—¢ç„¶ä¸å±äºè‡ªå®šä¹‰å±æ€§ï¼Œé‚£å°±å»è‡ªèº«çš„__proto__å»æ‰¾ï¼Œç„¶åå»åŸå‹å¯¹è±¡ä¸ŠæŸ¥ä¸€ä¸‹ï¼Œobj.__proto__.hasOwnProperty(&#39;toString&#39;)ï¼Œå“¦ï¼ŒåŸæ¥åœ¨è¿™å„¿ åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°Array.prototype.concatï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„[].concatï¼Œ[]ï¼Œå› ä¸º[].__proto__ === Array.prototype __proto__æ˜¯å¯ä¿®æ”¹çš„æ¯”å¦‚ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªaddClass()æ–¹æ³•ï¼š123456var arr = [1,2,3];arr.__proto__.addClass = function () &#123; console.log(123);&#125;arr.push(4);arr.addClass(); // 123 ä½†æ˜¯ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œå¦‚ä¸‹é‡å†™ä¹‹åï¼Œå°±æ²¡æœ‰äº†è¯¸å¦‚ pushã€concatç­‰æ–¹æ³•ï¼š 123456arr.__proto__ = &#123; addClass: function () &#123; console.log(123); &#125;&#125;;arr.push(3) //Uncaught TypeError: arr.push is not a function Object.prototypeçš„åŸå‹ä¸‡ç‰©çš†å¯¹è±¡ï¼Œåˆ°æœ€åä¾æ—§æ˜¯å¯¹è±¡ï¼Œæœ€åè¿™ä¸ªä¸œä¸œæ˜¯ä¸ªå•¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š123456789101112131415161718// æ„é€ å‡½æ•° Personfunction Person() &#123;&#125;// å®ä¾‹å¯¹è±¡ myfnï¼Œå®ƒçš„ éšå¼åŸå‹ æŒ‡å‘äº†å…¶æ„é€ å‡½æ•°çš„ åŸå‹å¯¹è±¡var myfn = new Person()myfn.__proto__ === Person.prototype //true// é‚£æ„é€ å‡½æ•° Person çš„ éšå¼åŸå‹åˆæŒ‡å‘äº†è°å‘¢Person.prototype.__proto__ === Object.prototype //true// Functionå‘Function.prototype.__proto__ === Object.prototype //true// è¿™ä¸ªå‘¢var fn = function() &#123;&#125;fn.prototype.__proto__ === Object.prototype //trueObject.prototype.__proto__ === null //truetypeof null //\"object\" æ€»ç»“ï¼š æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºå‡ºæ¥çš„å®ä¾‹ï¼ˆå¦‚myfnï¼‰çš„åŸå‹ï¼ˆå¦‚myfn.__proto__ï¼‰,å³ï¼šmyfn.__proto__ === Person.prototype æ‰€æœ‰çš„å¯¹è±¡ï¼ˆé™¤nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ª__proto__å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ï¼Œæ¯”å¦‚ï¼šmyfn.__proto__ === Person.prototype åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ ¹æ®ä¸Šæ¡ï¼Œé‚£åŸå‹çš„åŸå‹ï¼Œå°±æ˜¯Object.prototype æœ€åçš„nullå¯¹è±¡ï¼Œå¯ä»¥å½“åšæ˜¯ ä»€ä¹ˆéƒ½æ²¡æœ‰ ç›—ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å°±æ›´åŠ æ¸…æ¥šäº†ï¼ˆè“è‰²è¿™æ¡è¡¨ç¤ºçš„æ˜¯åŸå‹é“¾ï¼‰ PS: å…³äºåŸå‹å¯¹è±¡è¿™ä¸€å—æœ¬æ¥å°±å¾ˆç»•ï¼Œè‡ªå·±çœ‹æ‡‚äº†ä¸ä¸€å®šå°±çœŸçš„æ‡‚äº†ï¼Œè‡ªå·±æ¢³ç†çš„æ—¶å€™è¿˜æ˜¯æ¼æ´ç™¾å‡ºï¼Œè€Œä¸”è¿˜ä¹±ï¼Œå°±ç®—ç°åœ¨æˆ‘æ¢³ç†äº†ä¸€éï¼Œè¿‡äº›æ—¥å­ï¼Œæˆ‘è¦æ˜¯ä¸å†ç»§ç»­ç¿»é˜…ï¼Œåº”è¯¥åˆè®²ä¸é€šäº†ï¼Œä¸‹é¢çš„èµ„æ–™å¾ˆè¯¦ç»†ï¼Œåœ¨æˆ‘å­¦ä¹ çš„è¿‡ç¨‹ä¸­æä¾›äº†å¾ˆå¤§çš„å¸®åŠ©ï¼Œåœ¨æ­¤æ„Ÿè°¢ä½œè€…ä»¬ï¼ å‚è€ƒèµ„æ–™ï¼š jsåŸå‹é“¾åŸºç¡€ JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ æ·±å…¥ç†è§£javascriptåŸå‹å’Œé—­åŒ…ï¼ˆ3ï¼‰â€”â€”prototypeåŸå‹ åŒæ­¥äº æ˜é‡‘ ã€QDfuns","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"Debounce å’Œ Throttle","slug":"debounce-throttle","date":"2019-02-24T15:49:33.000Z","updated":"2019-02-24T15:56:22.845Z","comments":true,"path":"2019/02/24/debounce-throttle/","link":"","permalink":"https://www.yangtao.site/2019/02/24/debounce-throttle/","excerpt":"åŸæ–‡åœ°å€ï¼šDebounce å’Œ Throttle çš„åŸç†åŠå®ç°","text":"åŸæ–‡åœ°å€ï¼šDebounce å’Œ Throttle çš„åŸç†åŠå®ç° é˜²æŠ–å’ŒèŠ‚æµé˜²æŠ–å¦‚è¾“å…¥æ¡†æ—¶ï¼Œåªåœ¨æœ€åæäº¤çš„æ—¶å€™æ ¡éªŒï¼Œå³ï¼šå°†å¤šæ¬¡é«˜é¢‘ç‡æ“ä½œä¼˜åŒ–ä¸ºåªåœ¨æœ€åä¸€æ¬¡æ‰§è¡Œ æ€è·¯ï¼šæ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨æ–¹æ³• 1234567891011121314151617181920212223function debounce(fn, wait, immediate) &#123; let timer = null; console.log('in'); return function() &#123; let context = this; let args = arguments; if(immediate &amp;&amp; !timer) &#123; fn.apply(context, args) &#125; if(timer) clearTimeout(timer) timer = setTimeout(() =&gt; &#123; console.log('timer') fn.apply(context, args) &#125;, wait); &#125;&#125;function test() &#123; console.log('è¢«è§¦å‘äº†');&#125;document.getElementById('btn').onfocus = debounce(test, 1000) èŠ‚æµé™ä½é¢‘ç‡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´åæ‰§è¡Œä¸€æ¬¡ï¼Œå°†é«˜é¢‘ç‡æ“ä½œä¼˜åŒ–ä¸ºä½é¢‘ç‡æ“ä½œï¼Œå¦‚æ»šåŠ¨æ¡äº‹ä»¶ï¼Œresizeäº‹ä»¶ æ€è·¯ï¼šæ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶éƒ½åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ç­‰å¾…æ‰§è¡Œçš„å»¶æ—¶å‡½æ•°12345678910111213141516171819202122function throtte(fn, wait, immediate) &#123; let timer = null let callNow = immediate return function() &#123; let args = arguments let context = this if(callNow) &#123; fn.apply(context, args) callNow = false &#125; if(!timer) &#123; timer = setTimeout(() =&gt; &#123; fn.apply(context, args) timer = null &#125;, wait); &#125; &#125;&#125;window.addEventListener('resize', throtte(test, 1000))","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"åˆæ¢Classã€ç»§æ‰¿ã€Promise åŠ ES6 å¸¸ç”¨åŠŸèƒ½","slug":"es6-class","date":"2019-02-24T15:36:51.000Z","updated":"2019-03-13T14:01:13.870Z","comments":true,"path":"2019/02/24/es6-class/","link":"","permalink":"https://www.yangtao.site/2019/02/24/es6-class/","excerpt":"Class - è¯­æ³•ç³– Class åœ¨è¯­æ³•ä¸Šæ›´è´´åˆé¢å‘å¯¹è±¡çš„å†™æ³• Class å®ç°ç»§æ‰¿æ›´åŠ æ˜“è¯»ã€æ˜“ç†è§£ æ›´æ˜“äºå†™ java ç­‰åç«¯è¯­è¨€çš„ä½¿ç”¨ æœ¬è´¨è¿˜æ˜¯è¯­æ³•ç³–ï¼Œä½¿ç”¨ prototype","text":"Class - è¯­æ³•ç³– Class åœ¨è¯­æ³•ä¸Šæ›´è´´åˆé¢å‘å¯¹è±¡çš„å†™æ³• Class å®ç°ç»§æ‰¿æ›´åŠ æ˜“è¯»ã€æ˜“ç†è§£ æ›´æ˜“äºå†™ java ç­‰åç«¯è¯­è¨€çš„ä½¿ç”¨ æœ¬è´¨è¿˜æ˜¯è¯­æ³•ç³–ï¼Œä½¿ç”¨ prototype ES5ä¸­çš„å†™æ³•è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡Object.getPrototypeOf(m2) åˆ¤æ–­å®ä¾‹ä¸æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æ˜¯å¦æœ‰å…³ç³»MathHandle2.prototype.isPrototypeOf(m2)12345678910111213141516function MathHandle2(x, y) &#123; this.x = x this.y = y&#125;MathHandle2.prototype.add = function () &#123; return this.x + this.y&#125;var m2 = new MathHandle2(1,3)console.log(m2.add())console.log(m2.__proto__ === MathHandle2.prototype) //true// è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡Object.getPrototypeOf()console.log(Object.getPrototypeOf(m2) === MathHandle2.prototype) //true// åˆ¤æ–­å®ä¾‹ä¸æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æ˜¯å¦æœ‰å…³ç³»isPrototypeOf()console.log(MathHandle2.prototype.isPrototypeOf(m2)) //true ES6ä¸­çš„å†™æ³•å¯¹è±¡å®ä¾‹çš„éšå¼åŸå‹ï¼ˆå±æ€§ï¼‰æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡m.__proto__ === MathHandle.prototype æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡çš„constructorå±æ€§æŒ‡å›äº†æ„é€ å‡½æ•°æœ¬èº«MathHandle.prototype.constructor === MathHandle12345678910111213141516171819class MathHandle &#123; // æ„é€ å‡½æ•° constructor(x, y) &#123; this.x = x this.y = y &#125; add() &#123; return this.x + this.y &#125;&#125;const m = new MathHandle(1, 3)console.log(m.add()) //4// å¯¹è±¡å®ä¾‹çš„éšå¼åŸå‹ï¼ˆå±æ€§ï¼‰æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡console.log(m.__proto__ === MathHandle.prototype) //true// æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡çš„constructorå±æ€§æŒ‡å›äº†æ„é€ å‡½æ•°æœ¬èº«console.log(MathHandle.prototype.constructor === MathHandle) //true ç»§æ‰¿prototype123456789101112131415function Animal() &#123; this.eat = function() &#123; console.log('Animal eat') &#125;&#125;function Dog() &#123; this.bark = function() &#123; console.log('Dog bark') &#125;&#125;// ç»‘å®šåŸå‹ï¼Œå®ç°ç»§æ‰¿Dog.prototype = new Animal()var hashiqi = new Dog()hashiqi.eat() // Animal eathashiqi.bark() // Dog bark extends123456789101112131415161718192021class Animal &#123; constructor(name) &#123; this.name = name &#125; eat() &#123; console.log('Animal eat!' + this.name) &#125;&#125;class Dog extends Animal &#123; constructor(name) &#123; super(name) this.name = name &#125; bark() &#123; console.log('Dog bark!' + this.name) &#125;&#125;const hashiqi = new Dog('å“ˆå£«å¥‡')hashiqi.eat()hashiqi.bark() Promise new Promise å®ä¾‹ï¼Œè€Œä¸”è¦ return new Promise æ—¶è¦ä¼ å…¥å‡½æ•°ï¼Œå‡½æ•°æœ‰ resolveã€reject ä¸¤ä¸ªå‡½æ•° æˆåŠŸæ—¶æ‰§è¡Œ resolve()ï¼Œå¤±è´¥æ—¶æ‰§è¡Œ reject() then ç›‘å¬ç»“æœ 12345678910111213141516171819202122232425262728293031323334353637383940function loadImg(src) &#123; var promise = new Promise(function(resolve, reject) &#123; var img = document.createElement('img') img.onload = function() &#123; resolve(img) &#125; img.onerror = function() &#123; reject() &#125; img.src = src &#125;) return promise&#125; var src1 = 'https://img3.mukewang.com/5c611772085966af06000338-240-135.jpg' var src2 = 'https://img2.mukewang.com/5c6b7cff08d6895906000338-240-135.jpg' var result1 = loadImg(src1) var result2 = loadImg(src2) result1.then(function(img) &#123; console.log('ç¬¬ä¸€å¼ å›¾ç‰‡', img.src) return result2 //ä¸²è”æ“ä½œ &#125;).then(function(img) &#123; console.log('ç¬¬äºŒå¼ å›¾ç‰‡', img.src) &#125;).catch(function(ex) &#123; // ç»Ÿä¸€æ•è·é”™è¯¯ä¿¡æ¯ console.log(ex) &#125;) // Promise.all æ¥å—ä¸€ä¸ª promise å¯¹è±¡çš„æ•°ç»„ï¼Œå¾…å…¨éƒ¨å®Œæˆä¹‹åï¼Œç»Ÿä¸€æ‰§è¡Œ success var result3 = loadImg(src1) var result4 = loadImg(src2) Promise.all([result3, result4]).then(function(data) &#123; console.log(data) &#125;) // Promise.race æ¥å—ä¸€ä¸ªåŒ…å«å¤šä¸ª promise å¯¹è±¡çš„æ•°ç»„ï¼Œåªè¦æœ‰ä¸€ä¸ªå®Œæˆï¼Œå°±æ‰§è¡Œ success Promise.race([result3,result4]).then(function(data) &#123; console.log('race:', data) &#125;) ES6å¸¸ç”¨åŠŸèƒ½ let const å¤šè¡Œå­—ç¬¦ä¸²ã€æ¨¡æ¿å˜é‡ è§£æ„èµ‹å€¼ å—çº§ä½œç”¨åŸŸ å‡½æ•°é»˜è®¤å‚æ•° ç®­å¤´å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293// let constlet i = 10;i = 20; // Uncaught SyntaxError: Identifier 'i' has already been declaredconst j = 100j = 20 // Uncaught TypeError: Assignment to constant variable.// å¤šè¡Œå­—ç¬¦ä¸²ã€æ¨¡æ¿å˜é‡const name = 'yangtao', age = 27;const html = ` &lt;div&gt; &lt;p&gt;$&#123;name&#125;&lt;/p&gt; &lt;p&gt;$&#123;age&#125;&lt;/p&gt; &lt;/div&gt;`;// ç»“æ„èµ‹å€¼const obj = &#123;a: 100, b: 200&#125;const &#123;a, b&#125; = obj// ç­‰åŒäºï¼ˆå¯¹è±¡æŒ‰ç…§å±æ€§ï¼‰var obj = &#123;a: 100, b: 200&#125;var a = obj.a, b = obj.b;const arr = ['xxx', 'yyy', 'zzz']const [x, z] = arr// ç­‰åŒäº(æ•°ç»„æŒ‰ç…§ç´¢å¼•)var arr = ['xxx', 'yyy', 'zzz']var x = arr[0], z = arr[1];// å—çº§ä½œç”¨åŸŸconst myObj = &#123;a: 1, b: 2&#125;for(let item in obj) &#123; console.log(item)&#125;console.log(item)// ç­‰åŒäºvar myObj = &#123; a: 1, b: 2 &#125;;for (var _item in obj) &#123; console.log(_item);&#125;console.log(item);// å‡½æ•°å‚æ•°function num(a,b=0) &#123;&#125;// ç­‰åŒäºfunction num2(a) &#123; var b = arguments.length &gt; 1 &amp;&amp; arguments[1] !== undefined ? arguments[1] : 0;&#125;// ç®­å¤´å‡½æ•°const myarr = [1,3,4]myarr.map(item =&gt; item + 1)myarr.map((item, index) =&gt; console.log(item, index))// ç­‰åŒäºvar myarr = [1, 3, 4];myarr.map(function (item) &#123; return item + 1;&#125;);myarr.map(function (item, index) &#123; return console.log(item, index);&#125;);// thisæŒ‡å‘å¾ˆè¯¡å¼‚function fn() &#123; console.log('real', this) // real &#123;a: 10&#125; var arr = [1,2,3]; arr.map(function(item) &#123; console.log(this) // window &#125;)&#125;fn.call(&#123;a: 10&#125;)// ä½¿ç”¨ç®­å¤´å‡½æ•°ä¿®æ”¹function fn() &#123; console.log('real', this) // real &#123;a: 10&#125; var arr = [1,2,3]; arr.map(item =&gt; console.log(this)) // &#123;a: 10&#125;&#125;fn.call(&#123;a: 10&#125;)// ç­‰åŒäºfunction fn() &#123; var _this = this; console.log('real', this); // real &#123;a: 10&#125; var arr = [1, 2, 3]; arr.map(function (item) &#123; return console.log(_this); &#125;); // &#123;a: 10&#125;&#125;fn.call(&#123; a: 10 &#125;); å…³äº JS ä¼—å¤šæ¨¡å—åŒ–æ ‡å‡† æ²¡æœ‰æ¨¡å—åŒ– AMDæˆä¸ºæ ‡å‡†ï¼Œrequire.js(ä¹Ÿæœ‰CMD) å‰ç«¯æ‰“åŒ…å·¥å…·ï¼Œæ˜¯node.jsæ¨¡å—åŒ–å¯ä»¥è¢«ä½¿ç”¨ ES6å‡ºç°ï¼Œæƒ³ç»Ÿä¸€ç°åœ¨æ‰€æœ‰æ¨¡å—åŒ–æ ‡å‡† nodejsç§¯ææ”¯æŒï¼Œæµè§ˆå™¨å°šæœªç»Ÿä¸€ æ¨¡å—åŒ– è¯­æ³•ï¼šimport export(æ³¨æ„æœ‰æ— default) ç¯å¢ƒï¼šbabelç¼–è¯‘ ES6 è¯­æ³•ï¼Œæ¨¡å—åŒ–å¯ç”¨ webpack å’Œ rollup æ‰©å±•ï¼šå¯¹æ¨¡å—åŒ–æ ‡å‡†ç»Ÿä¸€çš„æœŸå¾… Rollup rollup åŠŸèƒ½å•ä¸€ï¼Œwebpack åŠŸèƒ½å¼ºå¤§ å‚è€ƒè®¾è®¡åŸåˆ™å’Œã€ŠLinux/Unixè®¾è®¡æ€æƒ³ã€‹ å·¥å…·è¦å°½é‡åŠŸèƒ½å•ä¸€ï¼Œå¯é›†æˆï¼Œå¯æ‰©å±• gulp + rollup","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"es6","slug":"es6","permalink":"https://www.yangtao.site/tags/es6/"}]},{"title":"è¯´ä¸€è¯´å¸¸è§çš„è¯·æ±‚å¤´å’Œç›¸åº”å¤´éƒ½æœ‰ä»€ä¹ˆå‘¢","slug":"header-response","date":"2019-02-20T11:51:25.000Z","updated":"2019-03-13T14:02:19.596Z","comments":true,"path":"2019/02/20/header-response/","link":"","permalink":"https://www.yangtao.site/2019/02/20/header-response/","excerpt":"1.è¯·æ±‚(å®¢æˆ·ç«¯-&gt;æœåŠ¡ç«¯[request])","text":"1.è¯·æ±‚(å®¢æˆ·ç«¯-&gt;æœåŠ¡ç«¯[request]) GET(è¯·æ±‚çš„æ–¹å¼) /newcoder/hello.html(è¯·æ±‚çš„ç›®æ ‡èµ„æº) HTTP/1.1(è¯·æ±‚é‡‡ç”¨çš„åè®®å’Œç‰ˆæœ¬å·) Accept: */*(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„èµ„æºç±»å‹) Accept-Language: en-us(å®¢æˆ·ç«¯æ¥æ”¶çš„è¯­è¨€ç±»å‹) Connection: Keep-Alive(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³») Host: localhost:8080(è¿æ¥çš„ç›®æ ‡ä¸»æœºå’Œç«¯å£å·) Referer: http://localhost/links.asp(å‘Šè¯‰æœåŠ¡å™¨æˆ‘æ¥è‡ªäºå“ªé‡Œ) User-Agent: Mozilla/4.0(å®¢æˆ·ç«¯ç‰ˆæœ¬å·çš„åå­—) Accept-Encoding: gzip, deflate(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„å‹ç¼©æ•°æ®çš„ç±»å‹) If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT(ç¼“å­˜æ—¶é—´) Cookie(å®¢æˆ·ç«¯æš‚å­˜æœåŠ¡ç«¯çš„ä¿¡æ¯) Date: Tue, 11 Jul 2000 18:23:51 GMT(å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯çš„æ—¶é—´) 2.å“åº”(æœåŠ¡ç«¯-&gt;å®¢æˆ·ç«¯[response]) HTTP/1.1(å“åº”é‡‡ç”¨çš„åè®®å’Œç‰ˆæœ¬å·) 200(çŠ¶æ€ç ) OK(æè¿°ä¿¡æ¯) Location: http://www.baidu.com(æœåŠ¡ç«¯éœ€è¦å®¢æˆ·ç«¯è®¿é—®çš„é¡µé¢è·¯å¾„) Server:apache tomcat(æœåŠ¡ç«¯çš„WebæœåŠ¡ç«¯å) Content-Encoding: gzip(æœåŠ¡ç«¯èƒ½å¤Ÿå‘é€å‹ç¼©ç¼–ç ç±»å‹) Content-Length: 80(æœåŠ¡ç«¯å‘é€çš„å‹ç¼©æ•°æ®çš„é•¿åº¦) Content-Language: zh-cn(æœåŠ¡ç«¯å‘é€çš„è¯­è¨€ç±»å‹) Content-Type: text/html; charset=GB2312(æœåŠ¡ç«¯å‘é€çš„ç±»å‹åŠé‡‡ç”¨çš„ç¼–ç æ–¹å¼) Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT(æœåŠ¡ç«¯å¯¹è¯¥èµ„æºæœ€åä¿®æ”¹çš„æ—¶é—´) Refresh: 1;url=http://www.it315.org(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯1ç§’é’Ÿåï¼Œåˆ·æ–°ï¼Œç„¶åè®¿é—®æŒ‡å®šçš„é¡µé¢è·¯å¾„) Content-Disposition: attachment; filename=aaa.zip(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯ä»¥ä¸‹è½½æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€è¯¥æ–‡ä»¶) Transfer-Encoding: chunked(åˆ†å—ä¼ é€’æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼‰ Set-Cookie:SS=Q0=5Lb_nQ; path=/search(æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯çš„æš‚å­˜æ•°æ®) Expires: -1//3ç§(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®) Cache-Control: no-cache(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®) Pragma: no-cache(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®) Connection: close(1.0)/(1.1)Keep-Alive(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³») Date: Tue, 11 Jul 2000 18:23:51 GMT(æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„æ—¶é—´) åœ¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œå¸¦ä¸ŠAccess-Control-Allow-Originå¤´ä¿¡æ¯ï¼Œè§£å†³è·¨åŸŸçš„ä¸€ç§æ–¹æ³•ã€‚ åŸæ–‡åœ°å€ï¼šä¼ é€é—¨","categories":[{"name":"ç½‘ç»œçŸ¥è¯†","slug":"ç½‘ç»œçŸ¥è¯†","permalink":"https://www.yangtao.site/categories/ç½‘ç»œçŸ¥è¯†/"}],"tags":[{"name":"http","slug":"http","permalink":"https://www.yangtao.site/tags/http/"}]},{"title":"å…³äºé—­åŒ…çš„ä¸€é“é¢è¯•é¢˜","slug":"js-closure","date":"2019-02-19T09:57:37.000Z","updated":"2019-11-13T05:45:15.478Z","comments":true,"path":"2019/02/19/js-closure/","link":"","permalink":"https://www.yangtao.site/2019/02/19/js-closure/","excerpt":"åŸæ–‡åœ°å€ï¼šä¾æ¬¡ç‚¹å‡» 4 ä¸ª li æ ‡ç­¾ï¼Œå“ªä¸€ä¸ªé€‰é¡¹æ˜¯æ­£ç¡®çš„è¿è¡Œç»“æœ","text":"åŸæ–‡åœ°å€ï¼šä¾æ¬¡ç‚¹å‡» 4 ä¸ª li æ ‡ç­¾ï¼Œå“ªä¸€ä¸ªé€‰é¡¹æ˜¯æ­£ç¡®çš„è¿è¡Œç»“æœ é¢˜ç›®ç°æœ‰å¦‚ä¸‹ html ç»“æ„ï¼š 123456&lt;ul&gt; &lt;li&gt;click me&lt;/li&gt; &lt;li&gt;click me&lt;/li&gt; &lt;li&gt;click me&lt;/li&gt; &lt;li&gt;click me&lt;/li&gt;&lt;/ul&gt; ä¾æ¬¡ç‚¹å‡» 4 ä¸ª li æ ‡ç­¾ï¼Œè¿è¡Œç»“æœæ˜¯ä»€ä¹ˆ 1234567var elements = document.getElementsByTagName(\"li\");var length = elements.length;for (var i = 0; i &lt; length; i++) &#123; elements[i].onclick = function() &#123; alert(i); &#125;;&#125; å›ç­”ï¼ˆä¾æ¬¡å¼¹å‡º 4ï¼Œ4ï¼Œ4ï¼Œ4ï¼‰ä»¥ä¸‹æ˜¯æˆ‘å½“æ—¶åœ¨ç‰›å®¢ç½‘å›ç­”æ—¶ä»ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¹¦ä¸­æŠ„çš„ï¼š è¿™æ˜¯ç”±äºä½œç”¨åŸŸé“¾çš„è¿™ç§é…ç½®æœºåˆ¶å¼•å‡ºçš„ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå³é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡çš„æœ€åä¸€ä¸ªå€¼ã€‚é—­åŒ…æ‰€ä¿å­˜çš„æ˜¯æ•´ä¸ªå˜é‡å¯¹è±¡ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰¹æ®Šçš„å˜é‡ã€‚ è¿™é‡Œçš„é—­åŒ…å‡½æ•°elements[i].onclick=function(){alert(i);}çš„ä½œç”¨åŸŸé“¾ä¸­ä¿å­˜ç€é—­åŒ…çš„æ´»åŠ¨å¯¹è±¡ï¼ˆè¿™é‡Œä¸ºç©ºï¼‰å’Œå…¨å±€å˜é‡å¯¹è±¡ï¼ˆä¸»è¦æ˜¯ iï¼‰,æ‰€ä»¥ï¼Œå®ƒä»¬å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå˜é‡ iï¼›å½“ç‚¹å‡»å®Œæˆåï¼Œå˜é‡ i=4,ä¹Ÿå°±æ˜¯æ¯ä¸ªå†…éƒ¨å‡½æ•° i çš„å€¼éƒ½æ˜¯ 4ï¼› å¯ä»¥é€šè¿‡åˆ›å»ºå¦ä¸€ä¸ªåŒ¿åå‡½æ•°å¼ºåˆ¶è®©é—­åŒ…çš„è¡Œä¸ºç¬¦åˆé¢„æœŸï¼š 1234567891011window.onload = function() &#123; var elements = document.getElementsByTagName(\"li\"); var length = elements.length; for (var i = 0; i &lt; length; i++) &#123; elements[i].onclick = (function(num) &#123; return function() &#123; alert(num); &#125;; &#125;)(i); &#125;&#125;; åœ¨è°ƒç”¨åŒ¿åå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼ å…¥å˜é‡ iï¼Œç”±äºå‚æ•°æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œæ‰€ä»¥å°±ä¼šå°†å˜é‡ i çš„å½“å‰å€¼å¤åˆ¶ç»™å‚æ•° numã€‚è€Œè¿™ä¸ªåŒ¿åå‡½æ•°å†…éƒ¨ï¼Œåˆåˆ›å»ºå¹¶ alert äº†ä¸€ä¸ªè®¿é—® num çš„é—­åŒ…ã€‚è¿™æ ·ï¼Œæ¯ä¸€æ¬¡ç‚¹å‡»éƒ½æœ‰ num å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå› æ­¤å¯ä»¥è¿”å›å„è‡ªä¸åŒçš„æ•°å€¼ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"Expressã€Koa åˆå§‹åŒ–","slug":"node-express","date":"2019-02-16T16:36:20.000Z","updated":"2019-11-27T13:23:25.735Z","comments":true,"path":"2019/02/17/node-express/","link":"","permalink":"https://www.yangtao.site/2019/02/17/node-express/","excerpt":"å¯¹æ¯”ä¸€ä¸‹ express å’Œ koa çš„å…¥å£æ–‡ä»¶","text":"å¯¹æ¯”ä¸€ä¸‹ express å’Œ koa çš„å…¥å£æ–‡ä»¶ express åˆå§‹åŒ–12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849var createError = require(\"http-errors\");var express = require(\"express\");var path = require(\"path\");var cookieParser = require(\"cookie-parser\");var logger = require(\"morgan\");// åŠ è½½è·¯ç”±æ§åˆ¶var indexRouter = require(\"./routes/index\");var usersRouter = require(\"./routes/users\");// åˆ›å»ºå®ä¾‹var app = express();// åˆ›å»º ejs æ¨¡æ¿å¼•æ“å³æ¨¡æ¿æ–‡ä»¶ä½ç½®app.set(\"views\", path.join(__dirname, \"views\"));app.set(\"view engine\", \"ejs\");// å®šä¹‰æ—¥å¿—å’Œè¾“å‡ºçº§åˆ«app.use(logger(\"dev\"));// JSON è§£æä¸­é—´ä»¶app.use(express.json());// application/x-www-form-urlencodeè¯·æ±‚è§£æä¸­é—´ä»¶app.use(express.urlencoded(&#123; extended: false &#125;));// å®šä¹‰cookieè§£æå™¨app.use(cookieParser());// HTTP ä¼ªé€ ä¸­é—´ä»¶app.use(express.methodOverride());// å®šä¹‰é™æ€æ–‡ä»¶ç›®å½•app.use(express.static(path.join(__dirname, \"public\")));// åŒ¹é…è·¯å¾„å’Œè·¯ç”±app.use(\"/\", indexRouter);// 404 é”™è¯¯å¤„ç†app.use(function(req, res, next) &#123; next(createError(404));&#125;);// 500 é”™è¯¯å¤„ç†åŠé”™è¯¯å †æ ˆè·Ÿè¸ªapp.use(function(err, req, res, next) &#123; // set locals, only providing error in development res.locals.message = err.message; res.locals.error = req.app.get(\"env\") === \"development\" ? err : &#123;&#125;; // render the error page res.status(err.status || 500); res.render(\"error\");&#125;);module.exports = app; Koa åˆå§‹åŒ–123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354const Koa = require(\"koa\");const app = new Koa();const views = require(\"koa-views\");const json = require(\"koa-json\");const onerror = require(\"koa-onerror\");const bodyparser = require(\"koa-bodyparser\");const logger = require(\"koa-logger\");const index = require(\"./routes/index\");const users = require(\"./routes/users\");const ENV = app.env;// error handleronerror(app);// middlewaresapp.use( bodyparser(&#123; enableTypes: [\"json\", \"form\", \"text\"] &#125;));app.use(json());app.use(logger(\"dev\"));app.use(require(\"koa-static\")(__dirname + \"/public\"));app.use( views(__dirname + \"/views\", &#123; extension: \"pug\" &#125;));// loggerapp.use(async (ctx, next) =&gt; &#123; const start = new Date(); await next(); const ms = new Date() - start; console.log(`$&#123;ctx.method&#125; $&#123;ctx.url&#125; - $&#123;ms&#125;ms`);&#125;);// routesapp.use(index.routes(), index.allowedMethods());// app.use(users.routes(), users.allowedMethods())app.use(user.routes(), index.allowedMethods());app.use(blog.routes(), index.allowedMethods());// error-handlingapp.on(\"error\", (err, ctx) =&gt; &#123; console.error(\"server error\", err, ctx);&#125;);module.exports = app; å®ä¾‹ç›®å½• ç½‘ç«™åˆå§‹åŒ–ï¼Œå®ç° GET å’Œ POST çš„ Ajax è¯·æ±‚ ç™»å½•æ¨¡å— ä¸Šä¼ å›¾ç‰‡æ¨¡å— åŸæ–‡åœ°å€ï¼šNode.js+Express+MongoDB å»ºç«™å®ä¾‹","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"Vueç»å…¸å®ä¾‹ ToDoList","slug":"vue-todolist","date":"2019-02-16T16:25:43.000Z","updated":"2019-03-13T14:06:15.971Z","comments":true,"path":"2019/02/17/vue-todolist/","link":"","permalink":"https://www.yangtao.site/2019/02/17/vue-todolist/","excerpt":"ä½¿ç”¨webpackæ„å»ºä¸€ä¸ªvueçš„ç®€æ˜“å¼€å‘ç¯å¢ƒå¹¶æ·»åŠ ä¸€ä¸ªTodo demo ToDoListä¼ é€é—¨ï¼šDemo &amp;&amp; Github","text":"ä½¿ç”¨webpackæ„å»ºä¸€ä¸ªvueçš„ç®€æ˜“å¼€å‘ç¯å¢ƒå¹¶æ·»åŠ ä¸€ä¸ªTodo demo ToDoListä¼ é€é—¨ï¼šDemo &amp;&amp; Github ä¸‹è½½ï¼š1git clone https://github.com/yangtao2o/todo.git ä¸‹è½½ä¾èµ–ï¼š1npm install æœ¬åœ°è¿è¡Œï¼š1npm run dev è®¿é—®åœ°å€ï¼šhttp://localhost:8000 ç”Ÿäº§è¿è¡Œï¼š1npm run build","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://www.yangtao.site/tags/vue/"}]},{"title":"ã€ŠVue.jså®æˆ˜ã€‹ä¹‹å‰ç«¯è·¯ç”±ä¸vue-router","slug":"vue-router","date":"2019-02-04T03:23:17.000Z","updated":"2019-03-13T14:06:11.395Z","comments":true,"path":"2019/02/04/vue-router/","link":"","permalink":"https://www.yangtao.site/2019/02/04/vue-router/","excerpt":"å‰ç«¯è·¯ç”±ä¸ vue-router","text":"å‰ç«¯è·¯ç”±ä¸ vue-router ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”± æ¯æ¬¡ GET æˆ–è€… POST è¯·æ±‚åœ¨æœåŠ¡ç«¯æœ‰ä¸€ä¸ªä¸“é—¨çš„æ­£åˆ™é…ç½®åˆ—è¡¨ï¼Œç„¶ååŒ¹é…åˆ°å…·ä½“çš„ä¸€æ¡è·¯å¾„åï¼Œåˆ†å‘åˆ°ä¸åŒçš„ Controllerï¼Œè¿›è¡Œå„ç§æ“ä½œï¼Œæœ€ç»ˆå°† html æˆ–æ•°æ®è¿”å›ç»™å‰ç«¯ï¼Œè¿™å°±å®Œæˆäº†ä¸€æ¬¡ IOã€‚ å‰ç«¯è·¯ç”±çš„å®ç°\bæœ‰ä¸¤ç§ï¼š URLçš„hashï¼Œå³é”šç‚¹ï¼ˆ#ï¼‰ï¼Œjs é€šè¿‡ hashChange äº‹ä»¶ç›‘å¬ url çš„å˜åŒ– HTML5 çš„ History æ¨¡å¼ ä¼˜ç‚¹ï¼š é¡µé¢æŒä¹…æ€§ï¼Œå¦‚éŸ³ä¹ç½‘ç«™ å‰åç«¯å½»åº•åˆ†ç¦»ï¼Œå¦‚ Angular çš„ ngRouterï¼Œ\bReact çš„ ReactRouterï¼Œè¿˜æœ‰ Vue çš„ vue-router éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼š é¡µé¢çš„æ‹”æ’æ€§ é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ å†…å­˜ç®¡ç†ç­‰ vue-router åŸºæœ¬ç”¨æ³•1234567# æ–°å»ºç›®å½• router# å®‰è£… vue-routernpm i -S vue-router# index.jsæ·»åŠ import VueRouter from 'vue-router';Vue.use(VueRouter); åœ¨ç›®å½• \brouter æ–°å»º views ç›®å½•ï¼Œæ¥ç€æ–°å»º about.vueã€ index.vueã€ user.vueç­‰ 123456789101112131415161718192021222324252627282930// index.jsconst Routers = [ &#123; path: '/index', component: (resolve) =&gt; require(['../router/views/index.vue'], resolve) &#125;, &#123; path: '/about', component: (resolve) =&gt; require(['../router/views/about.vue'], resolve) &#125;, &#123; path: '*', redirect: '../index' // 404æŒ‡å‘é¦–é¡µ &#125;];const RouterConfig = &#123; // ä½¿ç”¨HTML5çš„historyè·¯ç”±æ¨¡å¼ mode: 'history', routes: Routers&#125;const router = new VueRouter(RouterConfig);document.body.appendChild(root);new Vue(&#123; router: router, render: h =&gt; h(App)&#125;).$mount(root); è·¯ç”±æ¨¡å¼é€šè¿‡HTML5çš„Historyè·¯ç”±æ¨¡å¼ï¼Œé€šè¿‡ â€˜/â€™è®¾ç½®è·¯å¾„ã€‚ä¿®æ”¹package.json:123\"scripts\": &#123; \"dev\": \"webpack-dev-server --config webpack.config.js --mode=development --history-api-fallback\"&#125;, å¢åŠ äº† --history-api-fallbackï¼Œæ‰€æœ‰çš„è·¯ç”±éƒ½æŒ‡å‘index.htmlã€‚ ç„¶ååœ¨æ ¹å®ä¾‹App.vueä¸­æ·»åŠ &lt;router-view&gt;&lt;/router-view&gt; è·³è½¬vue-router æœ‰ä¸¤ç§è·³è½¬é¡µé¢çš„æ–¹å¼ï¼š &lt;router-link&gt;ç»„ä»¶ï¼Œä¼šæ¸²æŸ“æˆ\b &lt;a&gt; æ ‡ç­¾ï¼Œå¦‚ï¼š&lt;router-link to=&quot;/about&quot;&gt;è·³è½¬åˆ° about&lt;/router-link&gt; tag : tag=&quot;li&quot; æ ‡ç­¾ä¼šè¢«æ¸²æŸ“æˆæŒ‡å®šçš„ &lt;li&gt; replace : æ— å†å²è®°å½• active-class ä½¿ç”¨routerå®ä¾‹ï¼š $router æ–¹æ³•ï¼Œå¦‚ï¼šthis.$router.push(&#39;/index&#39;); replace : this.$router.replace(&#39;/index&#39;); go : this.$router.go(-1);é«˜çº§ç”¨æ³• é—®é¢˜ï¼šå¦‚ä½•åœ¨SPAé¡¹ç›®ä¸­ï¼Œä¿®æ”¹ç½‘é¡µçš„æ ‡é¢˜ï¼Ÿ ä¸€èˆ¬æˆ‘ä»¬æ˜¯é€šè¿‡window.document.title = &#39;æ ‡é¢˜&#39;æ¥ä¿®æ”¹ï¼Œä½†æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜ã€‚ vue-router æä¾›äº†å¯¼èˆªé’©å­ beforeEach() å’Œ afterEach()ï¼Œå®ƒä»¬ä¼šåœ¨è·¯ç”±å³å°†æ”¹å˜å‰å’Œæ”¹å˜åè§¦å‘ã€‚ è¿™æ ·å°±è§£å†³äº†é¡µé¢ä¼—å¤šï¼Œç»´æŠ¤éº»çƒ¦çš„é—®é¢˜ã€‚ï¼ˆmountedé’©å­ï¼‰ 123456789101112131415router.beforeEach((to, from, next) =&gt; &#123; // ä»è·¯ç”±å¯¹è±¡ to é‡Œè·å– meta ä¿¡æ¯ window.document.title = to.meta.title; // åˆ¤æ–­é¡µé¢æ˜¯å¦ç™»å½• if(window.localStorage.getItem('token')) &#123; next(); &#125; else &#123; next('/login'); &#125;&#125;);router.afterEach((to, from, next) =&gt; &#123; // é¡µé¢è·³è½¬å›æ¥æ»šåŠ¨æ¡é»˜è®¤\båœ¨é¡¶ç«¯ window.scroll(0, 0);&#125;) çŠ¶æ€ç®¡ç†ä¸ VuexçŠ¶æ€ç®¡ç†ä¸ä½¿ç”¨åœºæ™¯ç»„ä»¶çš„åŸºæœ¬è¿è¡Œæ¨¡å¼ï¼šä¸€ä¸ªç»„ä»¶åˆ†ä¸ºæ•°æ®å’Œè§†å›¾ï¼Œæ•°æ®æ›´æ–°æ—¶ï¼Œè§†å›¾ä¹Ÿè·Ÿç€æ›´æ–°â€¦è§†å›¾ä¸­åˆå¯ä»¥ç»‘å®šä¸€äº›äº‹ä»¶ï¼Œå®ƒä»¬è§¦å‘methodsé‡ŒæŒ‡å®šçš„æ–¹æ³•ï¼Œä»è€Œå¯ä»¥æ”¹å˜æ•°æ®ã€æ›´æ–°è§†å›¾ã€‚ å¦‚æœéœ€è¦è·¨ç»„ä»¶å…±äº«æ•°æ®çš„éœ€æ±‚ï¼Œé‚£å°±éœ€è¦å€ŸåŠ© Vuex æ¥ç®¡ç†ç»„ä»¶çŠ¶æ€ã€‚ Vuex åŸºæœ¬ç”¨æ³•1npm i -S vuex é«˜çº§ç”¨æ³•å®æˆ˜ï¼šä¸­å¤®äº‹ä»¶æ€»çº¿æ’ä»¶ vue-bus(loadingâ€¦) ç»ƒä¹ åœ°å€","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"vue-router","slug":"vue-router","permalink":"https://www.yangtao.site/tags/vue-router/"}]},{"title":"ã€ŠVue.jså®æˆ˜ã€‹ä¹‹ä½¿ç”¨webpack","slug":"vue-webpack","date":"2019-02-04T03:22:59.000Z","updated":"2019-03-13T14:00:11.210Z","comments":true,"path":"2019/02/04/vue-webpack/","link":"","permalink":"https://www.yangtao.site/2019/02/04/vue-webpack/","excerpt":"ä½¿ç”¨ webpack","text":"ä½¿ç”¨ webpack å‰ç«¯å·¥ç¨‹åŒ–ä¸webpackå‰ç«¯å·¥ç¨‹åŒ–ä¸»è¦è§£å†³çš„é—®é¢˜ï¼š JavaScriptã€css ä»£ç çš„åˆå¹¶ä¸å‹ç¼© CSS é¢„å¤„ç†ï¼šLessã€Sassã€Stylus çš„ç¼–è¯‘ ç”Ÿæˆé›ªç¢§å›¾ ES6 -&gt; ES5 æ¨¡å—åŒ–ç­‰ webpack çš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯å•é¡µé¢å¯Œåº”ç”¨ï¼ˆSPAï¼‰ï¼Œå°†ä¸€äº›è¯¸å¦‚ï¼štypescriptã€lessã€jpgã€vueç­‰æ ¼å¼çš„æ–‡ä»¶é€šè¿‡ç‰¹å®šçš„åŠ è½½å™¨ï¼ˆLoaderï¼‰ç¼–è¯‘åï¼Œæœ€ç»ˆç»Ÿä¸€ç”Ÿæˆ .jsã€.cssã€.pngç­‰é™æ€èµ„æºæ–‡ä»¶ã€‚ å¦‚ä½•æ–‡ä»¶éƒ½å¯ç§°ä¸ºæ˜¯ä¸€ä¸ªæ¨¡å—ã€‚webpackå°±æ˜¯å¤„ç†æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æŠŠä»–ä»¬è¿›è¡Œæ‰“åŒ…ã€‚ webpack åŸºç¡€é…ç½®å®‰è£… webpack ä¸ webpack-dev-serveråˆå§‹åŒ–12npm init # æŒ‰ç…§æç¤ºä¸€æ­¥æ­¥å¾€ä¸‹èµ° æœ¬åœ°å±€éƒ¨å®‰è£… webpack:ï¼ˆä¹¦ä¸­æ˜¯v2ï¼Œæˆ‘çš„\béœ€è¦ä¸‹è½½è„šæ‰‹æ¶ -cliï¼‰1234567npm install webpack --save-devnpm i -D webpack-cli# ä¼šå¤šå‡ºä¸‹é¢ä¸€é¡¹â€œ\"devDependencies\": &#123; \"webpack\": \"^4.28.4\"&#125; å®‰è£… webpack-dev-serverï¼Œå¯ä»¥å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ã€çƒ­æ›´æ–°ã€æ¥å£ä»£ç†ç­‰1npm install webpack-dev-server --save-dev æœ€ç»ˆçš„ package.json æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829&#123; \"name\": \"vue-webpack-iview\", \"version\": \"1.0.0\", \"description\": \"å­¦ä¹ ã€ŠVue.jså®æˆ˜ã€‹ä¹‹è¿›é˜¶ç¯‡\", \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\" &#125;, \"repository\": &#123; \"type\": \"git\", \"url\": \"git+https://github.com/yangtao2o/vue-webpack-iview.git\" &#125;, \"keywords\": [ \"vue\", \"webpack\", \"iview\" ], \"author\": \"yangtao\", \"license\": \"ISC\", \"bugs\": &#123; \"url\": \"https://github.com/yangtao2o/vue-webpack-iview/issues\" &#125;, \"homepage\": \"https://github.com/yangtao2o/vue-webpack-iview#readme\", \"devDependencies\": &#123; \"webpack\": \"^4.28.4\", \"webpack-cli\": \"^3.2.1\", \"webpack-dev-server\": \"^3.1.14\" &#125;&#125; å°±æ˜¯ä¸€ä¸ª js æ–‡ä»¶è€Œå·²åˆ›å»º webpack.config.jsï¼Œå¹¶åˆå§‹åŒ–ï¼š 12345var config = &#123;&#125;module.exports = config; æ¥ç€ï¼Œåœ¨ package.json é‡Œé…ç½®å¯åŠ¨é¡¹ï¼š 123456789\"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\", \"dev\": \"webpack-dev-server --open --config webpack.config.js --mode=development\"&#125;// --openï¼šä¼šåœ¨å¯åŠ¨æœåŠ¡æ—¶è‡ªåŠ¨\bæ‰“å¼€æµè§ˆå™¨// --configï¼šæŒ‡å‘ webpack-dev-server è¯»å–çš„é…ç½®æ–‡ä»¶è·¯å¾„// --host --portï¼šå¯é…ç½® IP å’Œç«¯å£ï¼Œå¦‚ï¼š--host 172.172.172.1 --port 8888// --mode=developmentï¼šéœ€è¦è¯´æ˜æ˜¯ä»€ä¹ˆç¯å¢ƒï¼Œä¸ç„¶ä¼šæ˜¾ç¤ºè­¦å‘Š webpack çš„å…¥å£\bï¼ˆEntryï¼‰å’Œå‡ºå£ï¼ˆOutputï¼‰ï¼Œé‡ä¸­ä¹‹é‡ï¼Œæ–°å»º main.jsï¼Œå¹¶åœ¨ webpack.config.js ä¸­è¿›è¡Œ\b\bå…¥å£å’Œè¾“å‡ºçš„é…ç½®ï¼š123456789101112var config = &#123; entry: &#123; main: &apos;./main&apos; // å…¥å£æ–‡ä»¶ä¸º main.js &#125;, output: &#123; path: path.join(__dirname, &apos;./dist&apos;), // è¾“å‡ºç›®å½• publicPath: &apos;./dist&apos;, //æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„ç›®å½• filename: &apos;main.js&apos; // æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§° &#125;&#125;module.exports = config; ç„¶åï¼šnpm run devï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€é¡µé¢äº†ã€‚ é€æ­¥å®Œå–„é…ç½®æ–‡ä»¶webpack å¯¹äºä¸åŒçš„\bæ¨¡å—éœ€è¦ä¸åŒçš„åŠ è½½å™¨æ¥å¤„ç†ï¼Œé€šè¿‡å®‰è£…ä¸åŒçš„åŠ è½½å™¨ï¼Œå°±å¯ä»¥å¯¹å„ç§åç¼€åçš„æ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚ å¦‚å¤„ç† .css æ–‡ä»¶ï¼š123456789101112131415161718# cssnpm install css-loader --save-devnpm install style-loader --save-dev# rules å±æ€§ä¸­å¯ä»¥æŒ‡å®šä¸€ç³»åˆ—çš„ loaders# æ¯ä¸€ä¸ª loader éƒ½å¿…é¡»åŒ…å« test å’Œ use # \bå¤„ç†åä¸º .css çš„æ–‡ä»¶æ—¶ï¼Œå…ˆé€šè¿‡ css-loader è½¬æ¢ï¼Œå†é€šè¿‡ style-loader è½¬æ¢ï¼Œç„¶åç»§ç»­æ‰“åŒ…module: &#123; rules: [ &#123; test: '/\\.css$/', use: [ 'style-loader', 'css-loader' ] &#125; ]&#125; åœ¨å®é™…çš„ä¸šåŠ¡ä¸­ï¼Œéœ€è¦ä½¿ç”¨æ’ä»¶ extract-text-webpack-plugin æŠŠå„å¤„çš„cssæ–‡ä»¶æå–å‡ºæ¥ã€‚ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª main.css æ–‡ä»¶ï¼Œæœ€ç»ˆåœ¨ index.html é‡ŒåŠ è½½å®ƒã€‚ 1npm install extract-text-webpack-plugin@next --save-dev config12345678910111213141516var ExtractTextPlugin = require('extract-text-webpack-plugin');module: &#123; rules: [ &#123; test: '/\\.css$/', use: ExtractTextPlugin.extract(&#123; use: 'css-loader', fallback: 'style-loader' &#125;) &#125; ]&#125;,plugins: [ new ExtractTextPlugin('main.css'),] å•æ–‡ä»¶ç»„ä»¶ä¸ vue-loaderå®‰è£…åŠ è½½å™¨ï¼š123456npm install --save-dev vue vue-loader vue-style-loadernpm install --save-dev vue-template-compilernpm install --save-dev vue-hot-reload-apinpm i -D babel babel-loadernpm i -D @babel/corenpm i -D @babel/preset-env é…ç½®ï¼šBabel-loaderã€Vue-loader ç»“åˆè‡ªå·±é…ç½®çš„è¿‡ç¨‹ä¸­å…³äºç‰ˆæœ¬å†²çªçš„è§£å†³åŠæ³•å‚è€ƒï¼šwebpack4é…ç½®vueç¯å¢ƒå’Œä¸€äº›å°å‘ ä¸»è¦ä¿®æ”¹ï¼š index.js(ä¹‹å‰çš„ main.jsï¼Œç›®å½•ä¹Ÿæ”¾åœ¨äº†/src/ä¸‹) 1234567import Vue from 'vue';import App from './App.vue';const root = document.createElement('div');document.body.appendChild(root);new Vue(&#123; render: h =&gt; h(App)&#125;).$mount(root); App.vue 12345678910111213141516171819&lt;template&gt; &lt;div&gt; Hello &#123;&#123; name &#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data() &#123; return &#123; name: 'Vue.js' &#125; &#125; &#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; package.js 12345678910111213141516171819202122\"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\", \"dev\": \"webpack-dev-server --config webpack.config.js --mode=development\", \"build\": \"webpack --progress --hide-modules --mode=production\"&#125;,\"devDependencies\": &#123; \"@babel/core\": \"^7.2.2\", \"@babel/preset-env\": \"^7.2.3\", \"babel\": \"^6.23.0\", \"babel-loader\": \"^8.0.5\", \"css-loader\": \"^2.1.0\", \"extract-text-webpack-plugin\": \"^4.0.0-beta.0\", \"style-loader\": \"^0.23.1\", \"vue\": \"^2.5.22\", \"vue-hot-reload-api\": \"^2.3.1\", \"vue-loader\": \"^15.5.1\", \"vue-style-loader\": \"^4.1.2\", \"vue-template-compiler\": \"^2.5.22\", \"webpack\": \"^4.28.4\", \"webpack-cli\": \"^3.2.1\", \"webpack-dev-server\": \"^3.1.14\"&#125;, webpack.config.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344const path = require('path');const VueLoaderPlugin = require('vue-loader/lib/plugin');const ExtractTextPlugin = require('extract-text-webpack-plugin');module.exports = &#123; entry: path.join(__dirname, './src/index.js'), output: &#123; path: path.join(__dirname, './dist'), // è¾“å‡ºç›®å½• publicPath: '/dist', //æŒ‡å®šèµ„æºæ–‡ä»¶å¼•ç”¨çš„ç›®å½• filename: 'main.js' // æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§° &#125;, module: &#123; rules: [ &#123; test: /\\.vue$/, loader: 'vue-loader', options: &#123; loaders: &#123; css: ExtractTextPlugin.extract(&#123; use: 'css-loader', fallback: 'vue-style-loader' &#125;) &#125; &#125; &#125;, &#123; test: /\\.js$/, loader: 'babel-loader', exclude: /node_modules/ &#125;, &#123; test: /\\.css$/, use: ExtractTextPlugin.extract(&#123; use: 'css-loader', fallback: 'style-loader' &#125;) &#125; ] &#125;, plugins: [ new VueLoaderPlugin(), new ExtractTextPlugin('main.css'), ]&#125; .babelrc 1234&#123; \"presets\": [\"@babel/preset-env\"], \"plugins\": [\"@babel/plugin-transform-runtime\"]&#125; index.html 123456...&lt;link rel=\"stylesheet\" href=\"./dist/main.css\"&gt;...&lt;body&gt; &lt;script src=\"./dist/main.js\"&gt;&lt;/script&gt;&lt;/body&gt; ç”¨äºç”Ÿäº§ç¯å¢ƒ(loadingâ€¦) ç»ƒä¹ åœ°å€","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://www.yangtao.site/tags/vue/"},{"name":"webpack","slug":"webpack","permalink":"https://www.yangtao.site/tags/webpack/"}]},{"title":"é¡µé¢æ»‘åŠ¨æ—¶çš„åŠ¨ç”»æ’ä»¶ WOW.js","slug":"plugin-wow","date":"2019-02-04T03:16:42.000Z","updated":"2019-12-03T10:19:12.420Z","comments":true,"path":"2019/02/04/plugin-wow/","link":"","permalink":"https://www.yangtao.site/2019/02/04/plugin-wow/","excerpt":"å½“åˆæ¬¡åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œéœ€è¦ä¸€äº›åŠ¨ç”»æ¸å…¥ï¼Œå¹¶ä¸”å½“æ»‘åŠ¨åˆ°å½“å‰å†…å®¹æ—¶ä¹Ÿä¼šå‡ºç°åŠ¨ç”»ï¼Œä¹‹åå°±æ¢å¤æ­£å¸¸ï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº† WOW.jsã€‚","text":"å½“åˆæ¬¡åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œéœ€è¦ä¸€äº›åŠ¨ç”»æ¸å…¥ï¼Œå¹¶ä¸”å½“æ»‘åŠ¨åˆ°å½“å‰å†…å®¹æ—¶ä¹Ÿä¼šå‡ºç°åŠ¨ç”»ï¼Œä¹‹åå°±æ¢å¤æ­£å¸¸ï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº† WOW.jsã€‚ æ¯”å¦‚ï¼šRT-Thread å†æ¯”å¦‚è®¾è®¡å¸ˆå¿…å¤‡ï¼šsketchapp WOW.jsæ–‡æ¡£ï¼šWOW Animate.cssæ¨¡æ‹Ÿï¼šAnimate animate.css åŒ…å«äº†ä¸€ç»„ç‚«é…·ã€æœ‰è¶£ã€è·¨æµè§ˆå™¨çš„åŠ¨ç”»ï¼Œå¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ã€‚ CDN12345&lt;link href=\"https://cdn.bootcss.com/animate.css/3.7.0/animate.min.css\" rel=\"stylesheet\"/&gt;&lt;script src=\"https://cdn.bootcss.com/wow/1.1.2/wow.min.js\"&gt;&lt;/script&gt; ç”¨æ³•æ–‡æ¡£ï¼šSetup WOW.js 12345678```html&lt;div class=&quot;wow bounceInUp&quot; data-wow-duration=&quot;2s&quot; data-wow-delay=&quot;5s&quot;&gt; Content to Reveal Here&lt;/div&gt;&lt;script&gt; new WOW().init();&lt;/script&gt; psï¼šåˆå§‹åŠ è½½é¡µé¢çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°å†…å®¹å†åŠ¨ç”»æ¸²æŸ“ï¼Œæ‰€ä»¥ç›´æ¥è®¾ç½®ï¼š 123.wow &#123; visibility: hidden;&#125;","categories":[{"name":"CSS","slug":"CSS","permalink":"https://www.yangtao.site/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://www.yangtao.site/tags/CSS/"}]},{"title":"npm run æŠ¥é”™ï¼šgetaddrinfo ENOTFOUND localhost","slug":"localhost","date":"2019-01-13T03:42:37.000Z","updated":"2019-03-13T14:04:16.158Z","comments":true,"path":"2019/01/13/localhost/","link":"","permalink":"https://www.yangtao.site/2019/01/13/localhost/","excerpt":"å®‰è£… Angular çš„æ—¶å€™ï¼Œå¯åŠ¨ ng serve --openï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š","text":"å®‰è£… Angular çš„æ—¶å€™ï¼Œå¯åŠ¨ ng serve --openï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š12345âœ my-app git:(master) ng servegetaddrinfo ENOTFOUND localhostError: getaddrinfo ENOTFOUND localhost at errnoException (dns.js:50:10) at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:92:26) æŸ¥äº†ä¸€ä¸‹è‡ªå·±çš„hostsï¼ŒåŸæ¥æˆ‘æŠŠé»˜è®¤çš„hostç»™å…³æ‰äº†ï¼Œé‡æ–°å¯åŠ¨å³å¯ï¼š 123127.0.0.1 localhost255.255.255.255 broadcasthost::1 localhost é‡æ–° ng serve --openï¼Œç„¶åï¼šâ„¹ ï½¢wdmï½£: Compiled successfully.","categories":[{"name":"å‰ç«¯æ¡†æ¶","slug":"å‰ç«¯æ¡†æ¶","permalink":"https://www.yangtao.site/categories/å‰ç«¯æ¡†æ¶/"}],"tags":[{"name":"æŠ¥é”™","slug":"æŠ¥é”™","permalink":"https://www.yangtao.site/tags/æŠ¥é”™/"},{"name":"Angular","slug":"Angular","permalink":"https://www.yangtao.site/tags/Angular/"}]},{"title":"Windowsä¸‹Node.js å¤šç‰ˆæœ¬ç®¡ç†å™¨-Gnvm","slug":"tool-gnvm","date":"2018-12-21T13:40:59.000Z","updated":"2019-11-11T07:37:52.772Z","comments":true,"path":"2018/12/21/tool-gnvm/","link":"","permalink":"https://www.yangtao.site/2018/12/21/tool-gnvm/","excerpt":"æˆ‘ä»¬åœ¨å¹³æ—¶çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦æŒ‡å®š Node çš„ç‰ˆæœ¬ï¼Œæ‰€æœ‰ç‰ˆæœ¬æ§åˆ¶ç®¡ç†ï¼Œå°±å¾ˆæœ‰å¿…è¦ï¼Œéœ€è¦å“ªä¸ªåˆ‡å“ªä¸ªã€‚","text":"æˆ‘ä»¬åœ¨å¹³æ—¶çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦æŒ‡å®š Node çš„ç‰ˆæœ¬ï¼Œæ‰€æœ‰ç‰ˆæœ¬æ§åˆ¶ç®¡ç†ï¼Œå°±å¾ˆæœ‰å¿…è¦ï¼Œéœ€è¦å“ªä¸ªåˆ‡å“ªä¸ªã€‚ MacOSä¸»è¦æœ‰ n å’Œ nvm,å…·ä½“å¯ä»¥è‡ªè¡Œç™¾åº¦ï¼ŒæŸ¥ä¹‹ï¼Œç”¨ä¹‹ 123456789sudo npm install -g n# ç›´æ¥è¾“å…¥ n ,ç„¶åå›è½¦ï¼Œå¯ä¸Šä¸‹é€‰æ‹©ç‰ˆæœ¬# å®‰è£…æœ€æ–°ç‰ˆ/ç¨³å®šç‰ˆn latest/stable# åˆ é™¤n rm 8.11.3 ä¸»è¦å®‰åˆ© Windowsä¸‹çš„ gnvmå®˜æ–¹åœ°å€ï¼šGNVM - Node.js å¤šç‰ˆæœ¬ç®¡ç†å™¨ ä¸‹è½½12# ä½¿ç”¨ git bashï¼Œå…¶å®ƒä¸‹è½½æ–¹å¼å¦‚ goã€curlç­‰å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£git clone git@github.com:Kenshin/gnvm-bin.git å®‰è£…å°†è§£å‹åçš„ gnvm.exe ä¿å­˜åˆ° node.js æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚ï¼š1C:\\Program Files\\nodejs éªŒè¯ç®¡ç†å‘˜èº«ä»½è¿›å…¥ cmdï¼Œè¾“å…¥ gnvm version1234C:\\WINDOWS\\system32&gt;gnvm versionCurrent version 0.2.0 64 bit.Copyright (C) 2014-2016 Kenshin Wang &lt;kenshin@ksria.com&gt;See https://github.com/kenshin/gnvm for more information. é…ç½®12345678C:\\WINDOWS\\system32&gt;gnvm configWaring: config file C:\\Program Files\\nodejs\\\\.gnvmrc is not exist.Notice: Config file C:\\Program Files\\nodejs\\\\.gnvmrc create success.Notice: config file path C:\\Program Files\\nodejs\\\\.gnvmrcgnvm config registry is http://nodejs.org/dist/gnvm config noderoot is C:\\Program Files\\nodejs\\gnvm config globalversion is 10.14.2-x86gnvm config latestversion is unknown æŸ¥è¯¢éœ€è¦ä¸‹è½½çš„ node ç‰ˆæœ¬123456789101112131415161718192021222324252627282930313233343536C:\\WINDOWS\\system32&gt;gnvm search 8.*.*Search Node.js version rules [8.*.*] from http://nodejs.org/dist/index.json, please wait.+--------------------------------------------------+| No. date node ver exec npm ver |+--------------------------------------------------+ 1 2018-12-18 8.14.1 x86 x64 6.4.1 2 2018-11-27 8.14.0 x86 x64 6.4.1 3 2018-11-20 8.13.0 x86 x64 6.4.1 4 2018-09-10 8.12.0 x86 x64 6.4.1 5 2018-08-15 8.11.4 x86 x64 5.6.0 6 2018-06-12 8.11.3 x86 x64 5.6.0 7 2018-05-15 8.11.2 x86 x64 5.6.0 8 2018-03-29 8.11.1 x86 x64 5.6.0 9 2018-03-28 8.11.0 x86 x64 5.6.0 10 2018-03-06 8.10.0 x86 x64 5.6.0 11 2018-01-02 8.9.4 x86 x64 5.6.0 12 2017-12-07 8.9.3 x86 x64 5.5.1 13 2017-12-05 8.9.2 x86 x64 5.5.1 14 2017-11-07 8.9.1 x86 x64 5.5.1 15 2017-10-31 8.9.0 x86 x64 5.5.1 16 2017-10-25 8.8.1 x86 x64 5.4.2 17 2017-10-24 8.8.0 x86 x64 5.4.2 18 2017-10-11 8.7.0 x86 x64 5.4.2 19 2017-09-26 8.6.0 x86 x64 5.3.0 20 2017-09-12 8.5.0 x86 x64 5.3.0 21 2017-08-15 8.4.0 x86 x64 5.3.0 22 2017-08-08 8.3.0 x86 x64 5.3.0 23 2017-07-20 8.2.1 x86 x64 5.3.0 24 2017-07-19 8.2.0 x86 x64 5.3.0 25 2017-07-11 8.1.4 x86 x64 5.0.3 26 2017-06-29 8.1.3 x86 x64 5.0.3 27 2017-06-15 8.1.2 x86 x64 5.0.3 28 2017-06-13 8.1.1 x86 x64 5.0.3 29 2017-06-08 8.1.0 x86 x64 5.0.3 30 2017-05-30 8.0.0 x86 x64 5.0.0+--------------------------------------------------+ ä¸‹è½½å¸®åŠ©æ–‡æ¡£12345C:\\WINDOWS\\system32&gt;gnvm help node-versionShow and fix [global] [latest] Node.js version e.g. :gnvm node-version :Show Node.js global and latest version, and fix it.gnvm node-version latest :Show Node.js latest version, and fix it.gnvm node-version global :Show Node.js global version, and fix it. ä¸‹è½½node1C:\\WINDOWS\\system32&gt;gnvm install 8.11.3 --global æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬åˆ—è¡¨12345C:\\WINDOWS\\system32&gt;gnvm lsNotice: gnvm.exe root is C:\\Program Files\\nodejs\\\\v10.14.2 -- x86v8.11.2v8.11.3 -- global ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬12C:\\WINDOWS\\system32&gt;gnvm use 8.11.3Set success, global Node.js version is 8.11.3. æŸ¥çœ‹å½“å‰Nodeç‰ˆæœ¬12C:\\WINDOWS\\system32&gt;node -vv8.11.3 åŸºæœ¬ä¸Šå¯ä»¥è§£å†³ç‰ˆæœ¬åˆ‡æ¢é—®é¢˜ï¼Œè¯¦æƒ…å¯æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"},{"name":"gnvm","slug":"gnvm","permalink":"https://www.yangtao.site/tags/gnvm/"}]},{"title":"é€šä¿—ç‚¹ç†è§£Nodejsçš„éé˜»å¡åŠäº‹ä»¶é©±åŠ¨","slug":"node-event-io","date":"2018-12-18T15:58:41.000Z","updated":"2019-11-13T05:41:20.874Z","comments":true,"path":"2018/12/18/node-event-io/","link":"","permalink":"https://www.yangtao.site/2018/12/18/node-event-io/","excerpt":"node.jsæ˜¯ä»€ä¹ˆ node.jsæ˜¯ä»€ä¹ˆï¼Ÿ è¿™æ˜¯ä¸€ç§é€šè¿‡JavaScriptè¯­è¨€å¼€å‘webæœåŠ¡ç«¯çš„ä¸œè¥¿ ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨node.jsï¼Ÿ node.jsæœ‰éé˜»å¡ï¼Œäº‹ä»¶é©±åŠ¨I/Oç­‰ç‰¹æ€§ï¼Œä»è€Œè®©é«˜å¹¶å‘ï¼ˆhigh concurrencyï¼‰åœ¨çš„è½®è¯¢ï¼ˆPollingï¼‰å’Œcometæ„å»ºçš„åº”ç”¨ä¸­æˆä¸ºå¯èƒ½ã€‚","text":"node.jsæ˜¯ä»€ä¹ˆ node.jsæ˜¯ä»€ä¹ˆï¼Ÿ è¿™æ˜¯ä¸€ç§é€šè¿‡JavaScriptè¯­è¨€å¼€å‘webæœåŠ¡ç«¯çš„ä¸œè¥¿ ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨node.jsï¼Ÿ node.jsæœ‰éé˜»å¡ï¼Œäº‹ä»¶é©±åŠ¨I/Oç­‰ç‰¹æ€§ï¼Œä»è€Œè®©é«˜å¹¶å‘ï¼ˆhigh concurrencyï¼‰åœ¨çš„è½®è¯¢ï¼ˆPollingï¼‰å’Œcometæ„å»ºçš„åº”ç”¨ä¸­æˆä¸ºå¯èƒ½ã€‚ HTTPè¯·æ±‚ æµè§ˆå™¨ç»™ç½‘ç«™å‘è¯·æ±‚çš„è¿‡ç¨‹ä¸€ç›´æ²¡æ€ä¹ˆå˜è¿‡ã€‚ å½“æµè§ˆå™¨ç»™ç½‘ç«™å‘äº†è¯·æ±‚ã€‚æœåŠ¡å™¨æ”¶åˆ°äº†è¯·æ±‚ï¼Œç„¶åå¼€å§‹æœå¯»è¢«è¯·æ±‚çš„èµ„æºã€‚å¦‚æœæœ‰éœ€è¦ï¼ŒæœåŠ¡å™¨è¿˜ä¼šæŸ¥è¯¢ä¸€ä¸‹æ•°æ®åº“ï¼Œæœ€åæŠŠå“åº”ç»“æœä¼ å›æµè§ˆå™¨ã€‚ ä¸è¿‡ï¼Œåœ¨ä¼ ç»Ÿçš„webæœåŠ¡å™¨ä¸­ï¼ˆæ¯”å¦‚Apacheï¼‰ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè®©æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚ åæ¥æœ‰äº†Ajaxã€‚æœ‰äº†Ajaxï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡éƒ½è¯·æ±‚ä¸€ä¸ªå®Œæ•´çš„æ–°é¡µé¢äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæ¯æ¬¡åªè¯·æ±‚éœ€è¦çš„éƒ¨åˆ†é¡µé¢ä¿¡æ¯å°±å¯ä»¥äº†ã€‚ è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªè¿›æ­¥ã€‚ é•¿è½®è¯¢ä½†æ˜¯æ¯”å¦‚ä½ è¦å»ºä¸€ä¸ªFriendFeedè¿™æ ·çš„ç¤¾äº¤ç½‘ç«™ï¼ˆç±»ä¼¼äººäººç½‘é‚£æ ·çš„åˆ·æœ‹å‹æ–°é²œäº‹çš„ç½‘ç«™ï¼‰ï¼Œä½ çš„å¥½å‹ä¼šéšæ—¶çš„æ¨é€æ–°çš„çŠ¶æ€ï¼Œç„¶åä½ çš„æ–°é²œäº‹ä¼šå®æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚ è¦è¾¾æˆè¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦è®©ç”¨æˆ·ä¸€ç›´ä¸æœåŠ¡å™¨ä¿æŒä¸€ä¸ªæœ‰æ•ˆè¿æ¥ã€‚ç›®å‰æœ€ç®€å•çš„å®ç°æ–¹æ³•ï¼Œå°±æ˜¯è®©ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒé•¿è½®è¯¢ï¼ˆlong pollingï¼‰ã€‚ HTTPè¯·æ±‚ä¸æ˜¯æŒç»­çš„è¿æ¥ï¼Œä½ è¯·æ±‚ä¸€æ¬¡ï¼ŒæœåŠ¡å™¨å“åº”ä¸€æ¬¡ï¼Œç„¶åå°±å®Œäº†ã€‚ é•¿è½®è¯¢æ˜¯ä¸€ç§åˆ©ç”¨HTTPæ¨¡æ‹ŸæŒç»­è¿æ¥çš„æŠ€å·§ã€‚å…·ä½“æ¥è¯´ï¼Œåªè¦é¡µé¢è½½å…¥äº†ï¼Œä¸ç®¡ä½ éœ€ä¸éœ€è¦æœåŠ¡å™¨ç»™ä½ å“åº”ä¿¡æ¯ï¼Œä½ éƒ½ä¼šç»™æœåŠ¡å™¨å‘ä¸€ä¸ªAjaxè¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ä¸åŒäºä¸€èˆ¬çš„Ajaxè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸ä¼šç›´æ¥ç»™ä½ è¿”å›ä¿¡æ¯ï¼Œè€Œæ˜¯å®ƒè¦ç­‰ç€ï¼Œç›´åˆ°æœåŠ¡å™¨è§‰å¾—è¯¥ç»™ä½ å‘ä¿¡æ¯äº†ï¼Œå®ƒæ‰ä¼šå“åº”ã€‚ æ¯”å¦‚ï¼Œä½ çš„å¥½å‹å‘äº†ä¸€æ¡æ–°é²œäº‹ï¼ŒæœåŠ¡å™¨å°±ä¼šæŠŠè¿™ä¸ªæ–°é²œäº‹å½“åšå“åº”å‘ç»™ä½ çš„æµè§ˆå™¨ï¼Œç„¶åä½ çš„æµè§ˆå™¨å°±åˆ·æ–°é¡µé¢äº†ã€‚æµè§ˆå™¨æ”¶åˆ°å“åº”åˆ·æ–°å®Œä¹‹åï¼Œå†å‘é€ä¸€æ¡æ–°çš„è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¯·æ±‚ä¾ç„¶ä¸ä¼šç«‹å³è¢«å“åº”ã€‚ äºæ˜¯å°±å¼€å§‹é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚ åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è®©æµè§ˆå™¨å§‹ç»ˆä¿æŒç­‰å¾…å“åº”çš„çŠ¶æ€ã€‚è™½ç„¶ä»¥ä¸Šè¿‡ç¨‹ä¾ç„¶åªæœ‰éæŒç»­çš„Httpå‚ä¸ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºäº†ä¸€ä¸ªçœ‹ä¼¼æŒç»­çš„è¿æ¥çŠ¶æ€ã€‚ Apacheæˆ‘ä»¬å†çœ‹ä¼ ç»Ÿçš„æœåŠ¡å™¨ï¼ˆæ¯”å¦‚Apacheï¼‰ã€‚ æ¯æ¬¡ä¸€ä¸ªæ–°ç”¨æˆ·è¿åˆ°ä½ çš„ç½‘ç«™ä¸Šï¼Œä½ çš„æœåŠ¡å™¨å°±å¾—å¼€ä¸€ä¸ªè¿æ¥ã€‚æ¯ä¸ªè¿æ¥éƒ½éœ€è¦å ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯é—²ç€çš„ï¼ˆæ¯”å¦‚ç­‰ç€ä½ å¥½å‹å‘æ–°é²œäº‹ï¼Œç­‰å¥½å‹å‘å®Œæ‰ç»™ç”¨æˆ·å“åº”ä¿¡æ¯ã€‚æˆ–è€…ç­‰ç€æ•°æ®åº“è¿”å›æŸ¥è¯¢ç»“æœä»€ä¹ˆçš„ï¼‰ã€‚ è™½ç„¶è¿™äº›è¿›ç¨‹é—²ç€ï¼Œä½†æ˜¯ç…§æ ·å ç”¨å†…å­˜ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœç”¨æˆ·è¿æ¥æ•°çš„å¢é•¿åˆ°ä¸€å®šè§„æ¨¡ï¼Œä½ æœåŠ¡å™¨æ²¡å‡†å°±è¦è€—å…‰å†…å­˜ç›´æ¥ç˜«äº†ã€‚ éé˜»å¡å’Œäº‹ä»¶é©±åŠ¨è¿™ç§æƒ…å†µæ€ä¹ˆè§£å†³ï¼Ÿ è§£å†³æ–¹æ³•å°±æ˜¯åˆšæ‰ä¸Šè¾¹è¯´çš„ï¼šéé˜»å¡å’Œäº‹ä»¶é©±åŠ¨ã€‚ è¿™äº›æ¦‚å¿µåœ¨æˆ‘ä»¬è°ˆçš„è¿™ä¸ªæƒ…æ™¯é‡Œé¢å…¶å®æ²¡é‚£ä¹ˆéš¾ç†è§£ã€‚ ä½ æŠŠéé˜»å¡çš„æœåŠ¡å™¨æƒ³è±¡æˆä¸€ä¸ªloopå¾ªç¯ï¼Œè¿™ä¸ªloopä¼šä¸€ç›´è·‘ä¸‹å»ã€‚ ä¸€ä¸ªæ–°è¯·æ±‚æ¥äº†ï¼Œè¿™ä¸ªloopå°±æ¥äº†è¿™ä¸ªè¯·æ±‚ï¼ŒæŠŠè¿™ä¸ªè¯·æ±‚ä¼ ç»™å…¶ä»–çš„è¿›ç¨‹ï¼ˆæ¯”å¦‚ä¼ ç»™ä¸€ä¸ªææ•°æ®åº“æŸ¥è¯¢çš„è¿›ç¨‹ï¼‰ï¼Œç„¶åå“åº”ä¸€ä¸ªå›è°ƒï¼ˆcallbackï¼‰ã€‚ å®Œäº‹äº†è¿™loopå°±æ¥ç€è·‘ï¼Œæ¥å…¶ä»–çš„è¯·æ±‚ã€‚ è¿™æ ·ä¸‹æ¥ã€‚æœåŠ¡å™¨å°±ä¸ä¼šåƒä¹‹å‰é‚£æ ·å‚»ç­‰ç€æ•°æ®åº“è¿”å›ç»“æœäº†ã€‚ å¦‚æœæ•°æ®åº“æŠŠç»“æœè¿”å›æ¥äº†ï¼Œloopå°±æŠŠç»“æœä¼ å›ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæ¥ç€ç»§ç»­è·‘ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œä½ çš„æœåŠ¡å™¨çš„è¿›ç¨‹å°±ä¸ä¼šé—²ç€ç­‰ç€ã€‚ ä»è€Œåœ¨ç†è®ºä¸Šè¯´ï¼ŒåŒä¸€æ—¶åˆ»çš„æ•°æ®åº“æŸ¥è¯¢æ•°é‡ï¼Œä»¥åŠç”¨æˆ·çš„è¯·æ±‚æ•°é‡å°±æ²¡æœ‰é™åˆ¶äº†ã€‚æœåŠ¡å™¨åªåœ¨ç”¨æˆ·é‚£è¾¹æœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™æ‰å“åº”ï¼Œè¿™å°±æ˜¯äº‹ä»¶é©±åŠ¨ã€‚ FriendFeedæ˜¯ç”¨åŸºäºPythonçš„éé˜»å¡æ¡†æ¶Tornado (çŸ¥ä¹ä¹Ÿç”¨äº†è¿™ä¸ªæ¡†æ¶) æ¥å®ç°ä¸Šé¢è¯´çš„æ–°é²œäº‹åŠŸèƒ½çš„ã€‚ä¸è¿‡ï¼ŒNode.jså°±æ¯”å‰è€…æ›´å¦™äº†ã€‚ å†çœ‹Node.jsNode.jsçš„åº”ç”¨æ˜¯é€šè¿‡javascriptå¼€å‘çš„ï¼Œç„¶åç›´æ¥åœ¨Googleçš„å˜æ€V8å¼•æ“ä¸Šè·‘ã€‚ ç”¨äº†Node.jsï¼Œä½ å°±ä¸ç”¨æ‹…å¿ƒç”¨æˆ·ç«¯çš„è¯·æ±‚ä¼šåœ¨æœåŠ¡å™¨é‡Œè·‘äº†ä¸€æ®µèƒ½å¤Ÿé€ æˆé˜»å¡çš„ä»£ç äº†ã€‚ å› ä¸ºjavascriptæœ¬èº«å°±æ˜¯äº‹ä»¶é©±åŠ¨çš„è„šæœ¬è¯­è¨€ã€‚ ä½ å›æƒ³ä¸€ä¸‹ï¼Œåœ¨ç»™å‰ç«¯å†™javascriptçš„æ—¶å€™ï¼Œæ›´å¤šæ—¶å€™ä½ éƒ½æ˜¯åœ¨æäº‹ä»¶å¤„ç†å’Œå›è°ƒå‡½æ•°ã€‚ javascriptæœ¬èº«å°±æ˜¯ç»™äº‹ä»¶å¤„ç†é‡èº«å®šåˆ¶çš„è¯­è¨€ã€‚ Node.jsè¿˜æ˜¯å¤„äºåˆæœŸé˜¶æ®µã€‚å¦‚æœä½ æƒ³å¼€å‘ä¸€ä¸ªåŸºäºNode.jsçš„åº”ç”¨ï¼Œä½ åº”è¯¥ä¼šéœ€è¦å†™ä¸€äº›å¾ˆåº•å±‚ä»£ç ã€‚ ä½†æ˜¯ä¸‹ä¸€ä»£æµè§ˆå™¨å¾ˆå¿«å°±è¦é‡‡ç”¨WebSocketæŠ€æœ¯äº†ï¼Œä»è€Œé•¿è½®è¯¢ä¹Ÿä¼šæ¶ˆå¤±ã€‚ åœ¨Webå¼€å‘é‡Œï¼ŒNode.jsè¿™ç§ç±»å‹çš„æŠ€æœ¯åªä¼šå˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚ è‹±æ–‡åŸæ–‡ï¼šNode.js is the New Black ä¸­æ–‡åŸæ–‡ï¼šNode.jsæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ","categories":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/categories/Nodejs/"}],"tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"git push æŠ¥é”™ä¹‹ Permission to userA.git denied to userB","slug":"git-push-error","date":"2018-12-17T14:47:00.000Z","updated":"2019-11-13T05:37:55.606Z","comments":true,"path":"2018/12/17/git-push-error/","link":"","permalink":"https://www.yangtao.site/2018/12/17/git-push-error/","excerpt":"æŠ¥é”™ä¿¡æ¯ï¼š123âœ git-command git:(master) git pushremote: Permission to xxx.git denied to zguii.fatal: unable to access 'https://github.com/xxx.git/': The requested URL returned error: 403","text":"æŠ¥é”™ä¿¡æ¯ï¼š123âœ git-command git:(master) git pushremote: Permission to xxx.git denied to zguii.fatal: unable to access 'https://github.com/xxx.git/': The requested URL returned error: 403 è§£å†³è¿‡ç¨‹åŸå› ä¹‹å‰æˆ‘æœ‰ç™»å½•è¿‡å…¶ä»–è´¦å·ï¼Œå¦‚zguiiï¼Œå¹¶è¿›è¡Œäº†ä¸€ç³»åˆ—æ“ä½œï¼Œåæ¥æˆ‘è¦ä½¿ç”¨è‡ªå·±çš„è´¦å·çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸Šçš„æŠ¥é”™ä¿¡æ¯ã€‚ åˆšå¼€å§‹å«Œéº»çƒ¦ï¼Œæˆ‘ä½¿ç”¨å®¢æˆ·ç«¯å‘å¸ƒæ“ä½œï¼Œæ­£å¸¸ï¼Œåæ¥ï¼Œå¤šæ¬¡ä½¿ç”¨ git bashï¼Œå°±å¾ˆç—›è‹¦äº†ï¼Œç´¢æ€§å°±æ”¹ä¸€ä¸‹ã€‚ æ€è·¯æ—¢ç„¶æ˜¯ç”¨æˆ·æƒé™è¢«å ç”¨äº†ï¼Œè€Œä¸”æˆ‘ä¹Ÿä¸éœ€è¦é‚£ä¸ªç”¨æˆ·äº†ï¼Œé‚£å°±åˆ é™¤å§ã€‚ è¿‡ç¨‹123456789101112131415161718192021222324# é‡æ–°åˆ›å»ºæ–‡ä»¶ï¼Œæš‚æ—¶è®¾ç½®å¯†ç ä¸ºç©ºï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿ `id_rsa`ã€`id_rsa.pub`ï¼Œï¼ˆæœ‰å¯èƒ½ä¼šäº§ç”Ÿ config ï¼Œä½†æœ‰å¯èƒ½æ˜¯ç©ºæ–‡ä»¶ï¼‰ssh-keygen -t rsa -C \"yangtaobanner@foxmail.com\"âœ git-command git:(master) ssh-keygen -t rsa -C \"yangtaobanner@foxmail.com\"Generating public/private rsa key pair.Enter file in which to save the key (/Users/yangtao/.ssh/id_rsa): /Users/yangtao/.ssh/id_rsa already exists.Overwrite (y/n)? yEnter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /Users/yangtao/.ssh/id_rsa.Your public key has been saved in /Users/yangtao/.ssh/id_rsa.pub.The key fingerprint is:# å¤åˆ¶ `id_rsa.pub` é‡Œçš„æ‰€æœ‰å†…å®¹ï¼Œå°†æ­¤ç²˜è´´åˆ°ä½ è¦æ–°å»ºçš„ `SSH key`é‡Œ# æŸ¥çœ‹é…ç½®git config --listgit config --list --global# æµ‹è¯•æ˜¯å¦å¯ä»¥è¿æ¥ssh -T git@github.comHi yangtao2o! You've successfully authenticated, but GitHub does not provide shell access. è®¾ç½®å®Œæ¯•ï¼Œå†æ¬¡ git pushï¼Œé¢â€¦ä¾æ—§æŠ¥é”™â€¦æƒ³åˆ°å¯èƒ½æ˜¯ç¼“å­˜ï¼Œå¥½å§ï¼Œæ¸…ï¼å‘ƒå‘ƒâ€¦ä¾ç„¶å¦‚æ­¤â€¦ å¥½å¤šåˆ†é’Ÿä¹‹åï¼Œå¿½ç„¶æƒ³èµ·è¿˜èƒ½è®¿é—®é»˜è®¤è´¦æˆ·ï¼Œè¯´æ˜è´¦æˆ·ä¾ç„¶å­˜åœ¨ï¼Œç¬¨ï¼ ç„¶åï¼Œæˆ‘å°±å»é’¥åŒ™ä¸²æŸ¥çœ‹äº†ä¸€ä¸‹ github.comï¼Œæˆ‘å»ï¼Œè¿˜çœŸæ˜¯å²¿ç„¶ä¸åŠ¨åœ°èººåœ¨é‚£å„¿â€¦ æ¶ç‹ ç‹ åœ°åˆ ä¹‹ï¼ï¼ï¼ ç„¶åï¼Œgit pushï¼Œè¾“å…¥ç”¨æˆ·ã€å¯†ç ï¼Œç†¬è¿‡å‡ ç§’ï¼Œåˆ·åˆ·åˆ·ï¼Œçœ‹åˆ°äº†ä¹…è¿çš„ Done å…¶å®ï¼Œå½’æ ¹ç»“åº•ï¼Œå¦‚æœGitè®¾ç½®é‡Œçš„è´¦æˆ·æ˜¯ä½ è‡ªå·±çš„ï¼Œåªè¦åˆ é™¤é’¥åŒ™ä¸²è´¦æˆ·å°±è¡Œï¼Œæˆ‘ç«Ÿç„¶èµ°äº†è¿™ä¹ˆä¹…çš„å¼¯è·¯ï¼Œè„šå¾ˆç–¼ï¼Œå“¦ä¸ï¼Œè„‘ç“œå­ç–¼ï¼ PSï¼šMacOS éšè—æ–‡ä»¶å¼€å¯å¿«æ·é”®ï¼š1command + ^ + . windowsè§£å†³æ–¹æ³•è§£å†³ github push failed ï¼ˆremote: Permission to userA/repo.git denied to userB.ï¼‰ âœ ä¸»è¦æ˜¯åˆ é™¤ä¹‹å‰çš„ç”¨æˆ·ï¼Œå¦‚æˆ‘çš„ä¹‹å‰çš„è´¦æˆ·æ˜¯ zguii MacOSè§£å†³æ–¹æ³•macä¸‹é…ç½®å¤šä¸ªgitè´¦å·å¹¶è¿›è¡Œè´¦å·åˆ‡æ¢ è§£å†³gitæœ¬åœ°å¤šssh keyçš„é—®é¢˜ å¤šä¸ª SSH KEY çš„ç®¡ç†","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.yangtao.site/tags/git/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/tags/å¼€å‘å·¥å…·/"}]},{"title":"Git å¸¸ç”¨å‘½ä»¤ç»ƒä¹ ","slug":"git-command","date":"2018-12-14T14:45:16.000Z","updated":"2019-11-13T05:38:21.295Z","comments":true,"path":"2018/12/14/git-command/","link":"","permalink":"https://www.yangtao.site/2018/12/14/git-command/","excerpt":"ä½¿ç”¨ git bash çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†å¸¸ç”¨çš„é‚£å‡ æ¡ï¼Œå…¶å®ƒçš„æ€»éœ€è¦æŸ¥æ‰¾æ‰‹å†Œï¼Œç´¢æ€§è·Ÿç€å¤§ç‰›æ€»ç»“çš„æ–‡ç« èµ°ä¸€éå§ å‰è¨€ Workspace: å·¥ä½œåŒº Index / Stage: æš‚å­˜åŒº Repository: ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ Remote: è¿œç¨‹ä»“åº“","text":"ä½¿ç”¨ git bash çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†å¸¸ç”¨çš„é‚£å‡ æ¡ï¼Œå…¶å®ƒçš„æ€»éœ€è¦æŸ¥æ‰¾æ‰‹å†Œï¼Œç´¢æ€§è·Ÿç€å¤§ç‰›æ€»ç»“çš„æ–‡ç« èµ°ä¸€éå§ å‰è¨€ Workspace: å·¥ä½œåŒº Index / Stage: æš‚å­˜åŒº Repository: ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ Remote: è¿œç¨‹ä»“åº“ æ–°å»º12345678# åœ¨å½“å‰ç›®å½• git-command ä¸‹æ–°å»º Git ä»£ç åº“ï¼Œï¼ˆä¼šç”Ÿæˆ .git æ–‡ä»¶ï¼‰git init# æ–°å»ºç›®å½• git-command å¹¶å°†å…¶åˆå§‹åŒ–ä¸º Git ä»£ç åº“git init git-command# ä»çº¿ä¸Šè·å–ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ä»£ç git clone https://github.com/yangtao2o/git-command.git é…ç½®Gitçš„è®¾ç½®æ–‡ä»¶ä¸º .gitconfig ï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚ 12345678# æ˜¾ç¤ºé…ç½®ä¿¡æ¯git config --list# ä¿®æ”¹git config --globalgit config --global user.name \"yangtao\"git config --global user.email \"xxx@.qq.com\" å¢åŠ ã€åˆ é™¤æ–‡ä»¶123456789101112131415161718192021# æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºgit add index.html# æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•git add assets# æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºgit add .# æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤# å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤git add -p# åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶å°†è¿™æ¬¡åˆ é™¤åŠ å…¥æš‚å­˜åŒºgit rm [file1] [file2] ...# åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒºgit rm --cached [file]# ä¿®æ”¹æ–‡ä»¶åï¼Œå¹¶æ”¾å…¥æš‚å­˜åŒºgit mv index.html index-new.html ä»£ç æäº¤123456789101112131415161718# æš‚å­˜åŒºæäº¤åˆ°ä»“åº“åŒº ( -m (msg) )git commit -m \"My first commit\"# æŒ‡å®šæ–‡ä»¶æäº¤git commit [file1] [file2] ... -m [message]# æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡ commit ä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒºgit commit -a# æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰çš„ diff ä¿¡æ¯git commit -v# ä½¿ç”¨ä¸€æ¬¡æ–°çš„ commit ï¼Œæäº¤ä¸Šä¸€æ¬¡æäº¤# å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡ commit çš„æäº¤ä¿¡æ¯git commit --amend -m \"new commit\"# é‡åšä¸Šä¸€æ¬¡ commit ï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–git commit --amend [file1] [file2] ... åˆ†æ”¯123456789101112131415161718192021222324252627282930313233343536373839404142# åˆ—å‡ºæ‰€æœ‰çš„æœ¬åœ°åˆ†æ”¯git branch# åˆ—å‡ºæ‰€æœ‰çš„è¿œç¨‹åˆ†æ”¯ ( -r (remotes))git branch -r# åˆ—å‡ºæ‰€æœ‰çš„æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯git branch -a# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯git branch primary# æ–°å»ºï¼Œå¹¶åˆ‡æ¢è‡³ è¯¥åˆ†æ”¯git checkout -b primary-yt# æ–°å»ºï¼ŒæŒ‡å‘æŒ‡å®š commitgit branch [branch] [commitID]# æ–°å»ºï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»git branch --track [branch] [remote-branch]# åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒºgit checkout [branch-name]# åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯git checkout -# å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´git branch --set-upstream [branch] [remote-branch]# åˆå¹¶æŒ‡å®šåˆ†æ”¯ master-yt åˆ°å½“å‰åˆ†æ”¯ mastergit merge master-yt# é€‰æ‹©ä¸€ä¸ª\b commitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯git cherry-pick [commitid]# åˆ é™¤åˆ†æ”¯git branch -d master-ytt# åˆ é™¤è¿œç¨‹åˆ†æ”¯git push origin --delete [branch-name]git branch -dr [remote/branch] æ ‡ç­¾12# åˆ—å‡ºæ ‡ç­¾git tag æŸ¥çœ‹ä¿¡æ¯12345# æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶git status# æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²git log å‚è€ƒç›®å½• Git å¸¸ç”¨å‘½ä»¤ Gitæ•™ç¨‹ - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ ç»ƒä¹  Demo","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.yangtao.site/tags/git/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/tags/å¼€å‘å·¥å…·/"}]},{"title":"å°ç‰‡æ®µä»£ç ç®€æ±‡ä¹‹CSSç¯‡","slug":"code-css","date":"2018-12-09T13:20:11.000Z","updated":"2019-12-03T10:18:39.394Z","comments":true,"path":"2018/12/09/code-css/","link":"","permalink":"https://www.yangtao.site/2018/12/09/code-css/","excerpt":"æ€»ç»“åœ¨å¹³æ—¶å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ï¼Œå¤§æ¦‚å¾ˆé•¿ä¸€æ®µæ—¶é—´å°±ä¼šæ¥è¿™ä¹ˆä¸€æ¬¡ï¼Œå°ç‰‡æ®µå‰§åœº.","text":"æ€»ç»“åœ¨å¹³æ—¶å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ï¼Œå¤§æ¦‚å¾ˆé•¿ä¸€æ®µæ—¶é—´å°±ä¼šæ¥è¿™ä¹ˆä¸€æ¬¡ï¼Œå°ç‰‡æ®µå‰§åœº. é¡µé¢å¸ƒå±€ å¹²è´§!å„ç§å¸¸è§å¸ƒå±€å®ç°+çŸ¥åç½‘ç«™å®ä¾‹åˆ†æ CSS çµæ„Ÿ - è¿™é‡Œå¯ä»¥è®©ä½ å¯»æ‰¾åˆ°ä½¿ç”¨æˆ–è€…æ˜¯å­¦ä¹  CSS çš„çµæ„Ÿï¼Œä»¥åˆ†ç±»çš„å½¢å¼ï¼Œå±•ç¤ºä¸åŒ CSS å±æ€§æˆ–è€…ä¸åŒçš„è¯¾é¢˜ä½¿ç”¨ CSS æ¥è§£å†³çš„å„ç§æ–¹æ³•ã€‚ white-space | word-break | word-wrap å½»åº•ææ‡‚ word-breakã€word-wrapã€white-space white-spaceæ§åˆ¶ç©ºç™½å­—ç¬¦çš„æ˜¾ç¤ºï¼ŒåŒæ—¶è¿˜èƒ½æ§åˆ¶æ˜¯å¦è‡ªåŠ¨æ¢è¡Œã€‚å®ƒæœ‰äº”ä¸ªå€¼ï¼šnormal | nowrap | pre | pre-wrap | pre-line word-breakæ§åˆ¶å•è¯å¦‚ä½•è¢«æ‹†åˆ†æ¢è¡Œã€‚å®ƒæœ‰ä¸‰ä¸ªå€¼ï¼šnormal | break-all | keep-all word-wrapï¼ˆoverflow-wrapï¼‰æ§åˆ¶é•¿åº¦è¶…è¿‡ä¸€è¡Œçš„å•è¯æ˜¯å¦è¢«æ‹†åˆ†æ¢è¡Œï¼Œæ˜¯ word-break çš„è¡¥å……ï¼Œå®ƒæœ‰ä¸¤ä¸ªå€¼ï¼šnormal | break-word å…¼å®¹ Windowsã€Mac çš„ font-family123font-family: Helvetica Neue For Number, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, PingFang SC, \"PingFangSC-Light\", \"Microsoft yahei\", Arial, Helvetica, sans-serif; å…³äº ios ä¸‹çš„ input è¾“å…¥æ¡†å…‰æ ‡ä¸Šç§»çš„é—®é¢˜ ä¸€èˆ¬å¤–æ¡†è®¾ç½®é«˜åº¦ä¸ºauto,å–æ¶ˆæ‰line-height,input æœ¬èº«è®¾ç½®å­—å·å¤§å°ï¼Œä½¿ç”¨ padding æ’‘å¼€ï¼Œå–æ¶ˆâ€™heightã€line-heightâ€™ ä¸‹æ‹‰æ¡†ç®­å¤´é‡å†™12345678910111213/* --ieæ¸…é™¤--*/select::-ms-expand &#123; display: none;&#125;/* --ç«ç‹ã€è°·æ­Œæ¸…é™¤--*/select &#123; appearance: none; -moz-appearance: none; -webkit-appearance: none; padding-right: 30px !important; background: #fafafb url(\"/select-logo.png\") 98% 50% no-repeat !important;&#125; ç”¨ CSS å†™ä¸‰è§’å½¢ç®­å¤´12345678910111213141516171819202122232425262728.wx-wper-con &#123; position: absolute; left: 0; top: 40px; width: 158px; height: auto; background-color: #fff; border: 1px solid #e9e9e9; padding: 0px 5px; text-align: center; z-index: 100; box-shadow: 0 0 6px -2px #aaa;&#125;.wx-wper-con:before,.wx-wper-con:after &#123; position: absolute; top: -9.5px; right: 20px; display: inline-block; border-right: 8px solid transparent; border-bottom: 8px solid #dadada; border-left: 8px solid transparent; content: \"\";&#125;.wx-wper-con:after &#123; top: -8.5px; border-bottom: 8px solid #fff;&#125; border è¾¹æ¡†æ¸å˜+åœ†è§’123456789101112131415161718192021.border-test &#123; width: 200px; height: 200px; position: relative; border: 4px solid transparent; background-color: #fff; border-top-right-radius: 50px; background-clip: padding-box;&#125;.border-test::after &#123; content: \"\"; display: block; position: absolute; top: -4px; right: -4px; bottom: -4px; left: -4px; border-top-right-radius: 50px; background: linear-gradient(155deg, red, blue); z-index: -1;&#125; æ–‡å­—ä¸¤ç«¯å¯¹é½12text-align: justify;text-align-last: justify; æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™1text-transform: uppercase; text-transform è¿™æ˜¯ CSS2 ä¸­çš„å±æ€§ï¼Œå‚æ•°æœ‰ capitalize | uppercase | lowercase | none å‚æ•°ä»‹ç»ï¼š noneï¼š é»˜è®¤ã€‚å®šä¹‰å¸¦æœ‰å°å†™å­—æ¯å’Œå¤§å†™å­—æ¯çš„æ ‡å‡†çš„æ–‡æœ¬ã€‚ capitalizeï¼š æ–‡æœ¬ä¸­çš„æ¯ä¸ªå•è¯ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚ uppercaseï¼š å®šä¹‰ä»…æœ‰å¤§å†™å­—æ¯ã€‚ lowercaseï¼š å®šä¹‰æ— å¤§å†™å­—æ¯ï¼Œä»…æœ‰å°å†™å­—æ¯ã€‚ å•é€‰é«˜äº®åŸæ–‡ 123456789.input:checked + .colors &#123; border-color: #e63838; color: #e63838;&#125;&lt;div class=\"single-check\"&gt; &lt;input class=\"input\" type=\"radio\" name=\"colors\" value=\"1\"&gt; &lt;div class=\"colors\"&gt;å¤©ç©ºä¹‹å¢ƒ&lt;/div&gt;&lt;/div&gt; ~ é€‰æ‹©å™¨ï¼šæŸ¥æ‰¾æŸä¸ªå…ƒç´ åé¢çš„æ‰€æœ‰å…„å¼Ÿå…ƒç´  + é€‰æ‹©å™¨ï¼šæŸ¥æ‰¾æŸä¸ªå…ƒç´ åé¢ç´§é‚»çš„å…„å¼Ÿå…ƒç´  å¤šåˆ—ç­‰é«˜é—®é¢˜ padding + marginï¼šæ¯åˆ—è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„padding-bottomï¼Œç„¶åé€šè¿‡å–è´Ÿå€¼çš„ margin-bottomï¼Œç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼šå¦‚ä¸‹æ–¹æ— æ³•çœ‹åˆ°åœ†è§’ï¼Œæ— æ³•çœ‹åˆ° border-bottom ç­‰ display: table display: flex 1px æ–¹æ¡ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354.min-device-pixel-ratio(@scale2, @scale3) &#123; @media screen and (min-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2) &#123; transform: @scale2; &#125; @media screen and (min-device-pixel-ratio: 3), (-webkit-min-device-pixel-ratio: 3) &#123; transform: @scale3; &#125;&#125;.border-1px(@color: #DDD, @radius: 2px, @style: solid) &#123; &amp;::before &#123; content: \"\"; pointer-events: none; display: block; position: absolute; left: 0; top: 0; transform-origin: 0 0; border: 1px @style @color; border-radius: @radius; box-sizing: border-box; width: 100%; height: 100%; @media screen and (min-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2) &#123; width: 200%; height: 200%; border-radius: @radius * 2; transform: scale(0.5); &#125; @media screen and (min-device-pixel-ratio: 3), (-webkit-min-device-pixel-ratio: 3) &#123; width: 300%; height: 300%; border-radius: @radius * 3; transform: scale(0.33); &#125; &#125;&#125;.border-top-1px(@color: #DDD, @style: solid) &#123; &amp;::before &#123; content: \"\"; position: absolute; left: 0; top: 0; width: 100%; border-top: 1px @style @color; transform-origin: 0 0; .min-device-pixel-ratio(scaleY(0.5), scaleY(0.33)); &#125;&#125; åŸæ–‡ css ä¹‹ flex å’Œ gridflex flex - CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰| MDN Aligning Items in a Flex Container Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ - é˜®ä¸€å³° Flex å¸ƒå±€æ•™ç¨‹ï¼šå®ä¾‹ç¯‡ - é˜®ä¸€å³° 30 åˆ†é’Ÿå½»åº•å¼„æ‡‚ flex å¸ƒå±€ â€” å¯ä»¥ç›´æ¥è¯»è¿™ç¯‡æ€»ç»“æ–‡ç« ï¼Œè®²çš„å¾ˆè¯¦ç»† A Complete Guide to Flexbox â€” æ¯”è¾ƒç”ŸåŠ¨å½¢è±¡ï¼Œè‡ªèº«ç½‘ç«™å°±å¾ˆå¥½çœ‹ grid Bootstrap 4 çš„å¸ƒå±€åœ¨ä½¿ç”¨ grid CSS Grid ç½‘æ ¼å¸ƒå±€æ•™ç¨‹ - é˜®ä¸€å³° ä½¿ç”¨ flex è¿˜æ˜¯ grid æœ€å…¨ï½ Grid vs Flex å­¦ä¹ èµ„æ–™ ã€å‰ç«¯è¯å…¸ã€‘11 ä¸ª CSS çŸ¥è¯†æ­é… 11 ä¸ª JS ç‰¹æ€§ ï¼ˆå®ç”¨åˆé›†ï¼‰ web å‰ç«¯é¢è¯•ä¸­ 10 ä¸ªå…³äº css é«˜é¢‘é¢è¯•é¢˜,ä½ éƒ½ä¼šå—?","categories":[{"name":"CSS","slug":"CSS","permalink":"https://www.yangtao.site/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://www.yangtao.site/tags/CSS/"}]},{"title":"å°ç‰‡æ®µä»£ç ç®€æ±‡ä¹‹JSç¯‡","slug":"code-js","date":"2018-12-07T15:41:03.000Z","updated":"2019-11-13T05:40:42.789Z","comments":true,"path":"2018/12/07/code-js/","link":"","permalink":"https://www.yangtao.site/2018/12/07/code-js/","excerpt":"æ€»ç»“åœ¨å¹³æ—¶å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ï¼Œå¤§æ¦‚å¾ˆé•¿ä¸€æ®µæ—¶é—´å°±ä¼šæ¥è¿™ä¹ˆä¸€æ¬¡ï¼Œå°ç‰‡æ®µå‰§åœºã€‚ Show Time:","text":"æ€»ç»“åœ¨å¹³æ—¶å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ï¼Œå¤§æ¦‚å¾ˆé•¿ä¸€æ®µæ—¶é—´å°±ä¼šæ¥è¿™ä¹ˆä¸€æ¬¡ï¼Œå°ç‰‡æ®µå‰§åœºã€‚ Show Time: å¤šè¡Œæ–‡æœ¬æˆªå–clamp.js12345678910111213&lt;script src = \"https://cdn.bootcss.com/Clamp.js/0.5.1/clamp.min.js\" &gt;&lt;/script&gt;clampFunc(\"obj-content-header\", 2);function clampFunc(className, clampNum) &#123; var $module = $(\".\" + className); clampNum = clampNum ? clampNum : 1; $.each($module, function (i, index) &#123; $clamp($(this).get(0), &#123; clamp: clampNum &#125;); &#125;);&#125; åˆ¤æ–­æœ¬åœ°æ˜¯å¦å­˜åœ¨jqueryå†™æ³•12345&lt;script type=\"text/javascript\"&gt; if (typeof jQuery == 'undefined') &#123; document.write(unescape(\"%3Cscript src='https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js' type='text/javascript'%3E%3C/script%3E\")); &#125;&lt;/script&gt; æˆªæµå‡½æ•° AND èŠ‚æµå‡½æ•°1234567891011121314151617181920212223242526272829303132333435363738394041/** æˆªæµå‡½æ•° **//** * fn æ‰§è¡Œå‡½æ•° * context ç»‘å®šä¸Šä¸‹æ–‡ * timeout å»¶æ—¶æ•°å€¼ **/let debounce = function(fn, context, timeout) &#123; let timer; // ä½¿ç”¨é—­åŒ…å°†å†…å®¹ä¼ é€’å‡ºå» return function() &#123; if(timer) &#123; clearTimeout(timer); &#125; else &#123; timer = setTimeout(function() &#123; fn.apply(context, arguments); &#125;, timeout); &#125; &#125;&#125;/** èŠ‚æµå‡½æ•° **/var throttle = function(fn, delay, mustRunDelay) &#123; var timer = null; var t_start; return function() &#123; var context = this; var args = arguments; var t_curr = +new Date(); clearTimeout(timer); // åˆå§‹åŒ– if(!t_start) &#123; t_start = t_curr; &#125; // è¶…æ—¶åˆ¤æ–­ if(t_curr - t_start &gt;= mustRunDelay) &#123; fn.apply(context, args); t_start = t_curr; &#125; else &#123; &#125; &#125;&#125; forå¾ªç¯æ·»åŠ ç‚¹å‡»äº‹ä»¶123456789var elems = document.getElementsByTagName('a');for (var i = 0, l = elems.length; i &lt; l; i++) &#123; (function(index) &#123; elems[index].addEventListener('click', function(e) &#123; e.preventDefault(); console.log(index); &#125;, 'false'); &#125;)(i);&#125; åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦å¼€å¯æœ¬åœ°cookie1234567891011var nd = new Date();nd.setSeconds(nd.getSeconds() + 60);document.cookie = \"cookietest=1; expires=\" + nd.toGMTString();var cookiesEnabled = document.cookie.indexOf(\"cookietest=\") != -1;if (!cookiesEnabled) &#123; //æ²¡æœ‰å¯ç”¨cookie alert(\"æ²¡æœ‰å¯ç”¨cookie \");&#125; else &#123; //å·²ç»å¯ç”¨cookie alert(\"å·²ç»å¯ç”¨cookie \");&#125; è§£å†³åŒçº§å…ƒç´ é¼ æ ‡ç§»å…¥ç§»å‡ºæ•ˆæœ123456&lt;a class=\"member-card-item\" id=\"memberCard\" href=\"#\"&gt;&lt;/a&gt;&lt;div class=\"member-card-wper\" id=\"memberProfile\"&gt; &lt;i class=\"drop-icon\"&gt;&lt;/i&gt; &lt;span class=\"card-item\"&gt;&lt;/span&gt; &lt;span class=\"card-item\"&gt;&lt;/span&gt;&lt;/div&gt; 1234567891011121314151617181920var cardTimer = null;var $mCard = $('#rightNav .wx-wper');var $mProfile = $('#rightNav .wx-outer');$mCard.get(0).onmouseover = $mProfile.get(0).onmouseover = function() &#123; clearCardTime();&#125;$mCard.get(0).onmouseout = $mProfile.get(0).onmouseout = function() &#123; cardTime();&#125;function cardTime() &#123; cardTimer = setTimeout(function() &#123; $mProfile.hide(); &#125;, 400);&#125;function clearCardTime() &#123; clearTimeout(cardTimer); $mProfile.show();&#125; placeholderæ ·å¼å…¼å®¹&amp;&amp;å±æ€§IEå…¼å®¹1234567.common-form-control::-webkit-input-placeholder,.common-form-control::-moz-placeholder,.common-form-control:-ms-input-placeholder,.common-form-control::placeholder &#123; color: #9b9b9b; opacity: 1;&#125; 1234567891011121314151617181920212223;(function($) &#123; $.fn.placeholder = function(options) &#123; var opts = $.extend(&#123;&#125;, $.fn.placeholder.defaults, options); var isIE = document.all ? true : false; return this.each(function() &#123; var _this = this, placeholderValue = _this.getAttribute(\"placeholder\"); //ç¼“å­˜é»˜è®¤çš„placeholderå€¼ if (isIE) &#123; _this.setAttribute(\"value\", placeholderValue); _this.onfocus = function() &#123; $.trim(_this.value) == placeholderValue ? _this.value = \"\" : ''; &#125;; _this.onblur = function() &#123; $.trim(_this.value) == \"\" ? _this.value = placeholderValue : ''; &#125;; &#125; &#125;); &#125;;&#125;)(jQuery);&lt;script type=\"text/javascript\"&gt; $(\"input\").placeholder();&lt;/script&gt; è¿”å›é¡¶éƒ¨å‡½æ•°1234567891011121314151617181920212223242526272829303132// è¿”å›é¡¶éƒ¨function gotoTop(acceleration,stime) &#123; acceleration = acceleration || 0.1; stime = stime || 10; var x1 = 0; var y1 = 0; var x2 = 0; var y2 = 0; var x3 = 0; var y3 = 0; if (document.documentElement) &#123; x1 = document.documentElement.scrollLeft || 0; y1 = document.documentElement.scrollTop || 0; &#125; if (document.body) &#123; x2 = document.body.scrollLeft || 0; y2 = document.body.scrollTop || 0; &#125; var x3 = window.scrollX || 0; var y3 = window.scrollY || 0; var x = Math.max(x1, Math.max(x2, x3)); var y = Math.max(y1, Math.max(y2, y3)); var speeding = 1 + acceleration; window.scrollTo(Math.floor(x / speeding), Math.floor(y / speeding)); if(x &gt; 0 || y &gt; 0) &#123; var run = \"gotoTop(\" + acceleration + \", \" + stime + \")\"; window.setTimeout(run, stime); &#125;&#125; æ»šåŠ¨ç›‘å¬å‚ç›´è”åŠ¨12345678910111213141516171819202122232425262728$(window).scroll(function (event) &#123; var i = 0, sTop = $(this).scrollTop(), windowH = $(window).height() / 2, pos = parseFloat($('#area3').offset().top) / 2, pos1 = $('#area3').offset().top - windowH, pos2 = $('#area4').offset().top - windowH, pos3 = $('#area5').offset().top - windowH, pos4 = $('#area6').offset().top - windowH $target = $('#navList').parent().parent(); if (sTop &gt;= pos) &#123; $target.show(); &#125; else &#123; $target.hide(); &#125; if (sTop &gt;= pos4) &#123; i = 3; &#125; else if (sTop &gt;= pos3) &#123; i = 2; &#125; else if (sTop &gt;= pos2) &#123; i = 1; &#125; else &#123; i = 0; &#125; $('#navList li').eq(i).addClass('active').siblings().removeClass('active');&#125;); å³ä¾§æµ®åŠ¨å¯¼èˆªå¹³æ»‘åˆ‡æ¢1234567891011$(\"#navList a\").click(function () &#123; var href = $(this).attr(\"href\"); var pos = $(href).offset().top - 48; $(this).parent().addClass('active').siblings().removeClass('active'); if (!$(\"body\").is(\":animated\")) &#123; $(\"html,body\").animate(&#123; scrollTop: pos &#125;, 600); &#125; return false;&#125;); åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºIEï¼ˆåŒ…æ‹¬IE11ï¼‰123456789function isIE() &#123; if (!!window.ActiveXObject || \"ActiveXObject\" in window) &#123; alert(\"is IE\"); return true; &#125; else &#123; alert(\"is not IE\"); return false; &#125;&#125; åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦ä¸ºç§»åŠ¨ç«¯123456var isMobile = false;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)) &#123; isMobile = true;&#125; else &#123; isMobile = false;&#125; å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´123456789101112131415161718function getMyDate(str) &#123; var oDate = new Date(str), oYear = oDate.getFullYear(), oMonth = oDate.getMonth() + 1, oDay = oDate.getDate(), oHour = oDate.getHours(), oMin = oDate.getMinutes(), oSen = oDate.getSeconds(), oTime = oYear + '-' + getzf(oMonth) + '-' + getzf(oDay) + ' ' + getzf(oHour) + ':' + getzf(oMin) + ':' + getzf(oSen); //æœ€åæ‹¼æ¥æ—¶é—´ return oTime;&#125;;function getzf(num) &#123; if (parseInt(num) &lt; 10) &#123; num = '0' + num; &#125; return num;&#125; Nodeå®ç°JavaScriptæ¨¡å—çš„åŸç†ç®€å•ä»‹ç»åŸæ–‡123456789101112131415161718192021222324252627/** Nodeå®ç°JavaScriptæ¨¡å—çš„ä¸€ä¸ªç®€å•çš„åŸç†ä»‹ç» * Nodeåˆ©ç”¨JavaScriptçš„å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ï¼Œè½»è€Œæ˜“ä¸¾åœ°å®ç°äº†æ¨¡å—çš„éš”ç¦» * å˜é‡moduleæ˜¯Nodeåœ¨åŠ è½½jsæ–‡ä»¶å‰å‡†å¤‡çš„ä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶ä¼ å…¥åŠ è½½å‡½æ•° **/(function() &#123; var s = &apos;Hello&apos;; //è¯»å–Hello.jsä»£ç  var name = &apos;Taotao&apos;; console.log(&apos;Hell0 &apos; + name + &apos;!&apos;);&#125;)();// å‡†å¤‡moduleå¯¹è±¡var module = &#123; id: &apos;hello&apos;, exports: &#123;&#125;&#125;;var load = function(module) &#123; //è¯»å–Hello.jsä»£ç  function greet(module) &#123; console.log(&apos;Hell0 &apos; + name + &apos;!&apos;); &#125; module.exports = greet; return module.exports;&#125;var exported = load(module);//ä¿å­˜save(module, exported); NodejsåŸºæœ¬æ¨¡å—fsNode.jså†…ç½®çš„fsæ¨¡å—å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼Œè´Ÿè´£è¯»å†™æ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354'use strict';var fs = require(\"fs\");// å¼‚æ­¥è¯»æ–‡ä»¶fs.readFile('test1.txt', 'utf-8', function(err, data) &#123; if (err) &#123; console.log(err); &#125; else &#123; console.log(data); &#125;&#125;);// å¼‚æ­¥å†™æ–‡ä»¶var writeData = 'Hello,Node.js';fs.writeFile('test1.txt', writeData, function(err) &#123; if (err) &#123; console.log(err); &#125; else &#123; console.log('OK!'); &#125;&#125;);// åŒæ­¥è¯»æ–‡ä»¶try &#123; var data = fs.readFileSync('test1.txt', 'utf-8'); console.log(data);&#125; catch (err) &#123; console.log(err);&#125;// åŒæ­¥è¯»æ–‡ä»¶try &#123; fs.writeFileSync('test1.txt', writeData); console.log(\"OK!\");&#125; catch (err) &#123; console.log(err);&#125;// å¼‚æ­¥è¯»å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯fs.stat('test1.txt', function(err, stat) &#123; if (err) &#123; console.log(err); &#125; else &#123; console.log('isFile: ' + stat.isFile()); // æ˜¯å¦æ˜¯æ–‡ä»¶ console.log('isDirectory: ' + stat.isDirectory()); // æ˜¯å¦æ˜¯ç›®å½• if (stat.isFile()) &#123; console.log('size: ' + stat.size); // æ–‡ä»¶å¤§å° console.log('birth time: ' + stat.birthtime); // åˆ›å»ºæ—¶é—´ï¼ŒDateå¯¹è±¡ console.log('modifier time: ' + stat.mtime); // ä¿®æ”¹æ—¶é—´ï¼ŒDateå¯¹è±¡ &#125; &#125;&#125;);// åŒæ­¥è¯»å–æ–‡ä»¶ statSync() NodejsåŸºæœ¬æ¨¡å—httpå»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ä¹‹Nodeä¸­çš„Http1234567891011121314151617181920212223242526272829303132333435363738'use strict';// å¯¼å…¥httpæ¨¡å—var fs = require('fs'), url = require('url'), path = require('path'), http = require('http');// ä»å‘½ä»¤è¡Œå‚æ•°è·å–rootç›®å½•ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•ï¼švar root = path.resolve(process.argv[2] || '.');console.log('Static root dir: ' + root);// åˆ›å»ºhttp servervar server = http.createServer(function(request, response) &#123; // è·å¾—URLçš„path var pathname = url.parse(request.url).pathname; // è·å¾—å¯¹åº”çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ var filepath = path.join(root, pathname); // è·å–æ–‡ä»¶çŠ¶æ€ fs.stat(filepath, function(err, stats) &#123; if(!err &amp;&amp; stats.isFile()) &#123; console.log('200 ' + request.url); response.writeHead(200); // å°†æ–‡ä»¶æµå¯¼å‘response fs.createReadStream(filepath).pipe(response); &#125; else &#123; console.log('404 ' + request.url); response.writeHead(404); response.end('404 Not Found'); &#125; &#125;);&#125;);// è®©æœåŠ¡å™¨ç›‘å¬8080ç«¯å£server.listen(8080);console.log('Server is running at http:127.0.0.1:8080/');","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"è‡ªå®šä¹‰å•é€‰æ¡†ã€å¤é€‰æ¡†æ ·å¼","slug":"style-checkout-radio","date":"2018-12-07T15:36:33.000Z","updated":"2019-11-13T05:39:07.212Z","comments":true,"path":"2018/12/07/style-checkout-radio/","link":"","permalink":"https://www.yangtao.site/2018/12/07/style-checkout-radio/","excerpt":"å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†å…¼å®¹IEä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œæˆ‘ä»¬é‡å†™å•é€‰æ¡†ã€å¤é€‰æ¡†ç­‰çš„æ ·å¼ï¼Œå°±éœ€è¦å€ŸåŠ© js æ¥å®ç°ã€‚","text":"å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†å…¼å®¹IEä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œæˆ‘ä»¬é‡å†™å•é€‰æ¡†ã€å¤é€‰æ¡†ç­‰çš„æ ·å¼ï¼Œå°±éœ€è¦å€ŸåŠ© js æ¥å®ç°ã€‚Javascript 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// é‡å†™å¤šé€‰æ¡†,å•é€‰æ¡†æ ·å¼;(function ($) &#123; $.fn.hcheckbox = function (options) &#123; $(':checkbox+label', this).each(function () &#123; $(this).addClass('disabled'); if ($(this).prev().is(':disabled') == false) &#123; if ($(this).prev().is(':checked')) $(this).addClass(\"checked\"); &#125; else &#123; $(this).addClass('disabled'); return false; &#125; &#125;).click(function (event) &#123; var ischeckbox = $(this).prev().is(':checked'); if (!ischeckbox) &#123; $(this).addClass(\"checked\"); $(this).prev().checked = true; &#125; else &#123; $(this).removeClass('checked'); $(this).prev().checked = false; &#125; event.stopPropagation(); &#125;).prev().hide(); &#125; $.fn.hradio = function (options) &#123; var self = this; return $(':radio+label', this).each(function () &#123; $(this).addClass('hRadio'); if ($(this).prev().is(\"checked\")) $(this).addClass('hRadio-Checked'); &#125;).click(function (event) &#123; $(this).parent().siblings().find(':radio+label').removeClass(\"hRadio-Checked\"); if (!$(this).prev().is(':checked')) &#123; $(this).addClass(\"hRadio-Checked\"); $(this).prev()[0].checked = true; &#125; event.stopPropagation(); &#125;).prev().hide(); &#125;&#125;)(jQuery)$(function() &#123; $('.checkbox').hcheckbox(); $('.radio-wper').hradio();&#125;); Style123456789101112131415161718192021222324252627282930313233343536.checkbox input,.radio-wper input &#123; display: none;&#125;.checkbox label,.radio-wper label &#123; padding-left: 22px; position: relative;&#125;.checkbox .disabled:before,.checkbox .checked:before,.radio-wper .hRadio:before,.radio-wper .hRadio-Checked:before &#123; content: \"\"; display: inline-block; width: 14px; height: 14px; position: absolute; top: 3px; left: 0; background-position: 0 0; background-repeat: no-repeat; background-size: 100% 100%;&#125;.checkbox .disabled:before &#123; background-image: url('../../images/activities/adi2018/check-01.png');&#125;.checkbox .checked:before &#123; background-image: url('../../images/activities/adi2018/check-02.png');&#125;.radio-wper .hRadio:before &#123; background-image: url('../../images/activities/adi2018/radio-01.png');&#125;.radio-wper .hRadio-Checked:before &#123; background-image: url('../../images/activities/adi2018/radio-02.png');&#125;","categories":[{"name":"å·¥å…·åº“","slug":"å·¥å…·åº“","permalink":"https://www.yangtao.site/categories/å·¥å…·åº“/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å®ç°æ–‡å­—çš„æ— ç¼æ»šåŠ¨ã€é—´æ­‡æ€§å‘ä¸Šç¿»æ»š","slug":"plugin-scroll","date":"2018-11-29T12:53:31.000Z","updated":"2019-11-13T05:41:43.968Z","comments":true,"path":"2018/11/29/plugin-scroll/","link":"","permalink":"https://www.yangtao.site/2018/11/29/plugin-scroll/","excerpt":"æ–‡å­—å‘ä¸Šæ»šåŠ¨åˆ†ä¸ºï¼šæ— ç¼æ»šåŠ¨ã€é—´æ­‡æ€§æ»šåŠ¨","text":"æ–‡å­—å‘ä¸Šæ»šåŠ¨åˆ†ä¸ºï¼šæ— ç¼æ»šåŠ¨ã€é—´æ­‡æ€§æ»šåŠ¨ é—´æ­‡æ€§æ»šåŠ¨ä½¿ç”¨jQueryçš„ animateä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‘ä¸Šç¿»æ»šä¸€è¡Œå†…å®¹ï¼Œå³ä¸€ä¸ª&lt;li&gt;&lt;/li&gt;ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸€è¡Œæœ‰å¤šä¸ªliæ ‡ç­¾ï¼Œè¦ä½¿ç”¨å¸¸è§çš„æ’ä»¶å°±ä¼šå‡ºç°é—®é¢˜äº†â€¦ æ‰€ä»¥è‡ªå·±æ”¹å§æ”¹å§ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859(function ($) &#123; $.fn.myScroll = function(options) &#123; var init = &#123; items: 1, //ä¸€è¡Œæœ‰å‡ é¡¹å†…å®¹ speed: 3000, //æ»šåŠ¨é€Ÿåº¦ moveHeight: 22 // è¡Œé«˜ &#125;; var intId = []; var opts = $.extend(&#123;&#125;, init, options); function moveUp(obj) &#123; obj.animate(&#123; marginTop: '-' + opts.moveHeight + 'px' &#125;, 1000, function() &#123; var $this = $(this); $this.find('li').slice(0, opts.items).appendTo($this); $this.css('margin-top', 0); &#125;) &#125; this.each(function(i) &#123; var sh = opts.moveHeight, speed = opts.speed, items = opts.items, $this = $(this); intId[i] = setInterval(timerEvent, speed); $this.hover(function() &#123; clearInterval(intId[i]); &#125;, function() &#123; intId[i] = setInterval(timerEvent, speed); &#125;); var len = $this.find('li').length; if(len &gt; items &amp;&amp; len &lt;= items * 2) &#123; $this.html($this.html() + $this.html()); &#125; function timerEvent() &#123; var len = $this.find('li').length; if(len &gt; items &amp;&amp; len &lt;= items * 2) &#123; len /= 2; &#125; if(len &lt;= items) &#123; clearInterval(intId[i]); &#125; else &#123; moveUp($this, sh); &#125; &#125; &#125;); &#125;&#125;)(jQuery);$('#scrollLists').myScroll(&#123; items: 3, speed: 3000, moveHeight: 22&#125;); ä»¥ä¸‹çš„éƒ½æ˜¯å•è¡Œå†…å®¹ç¿»æ»šï¼Œæ¬è¿‡æ¥è®°å½•ä¸‹ï¼š ä½¿ç”¨JavaScript1234567891011121314151617function Scroll() &#123;&#125;Scroll.prototype.upScroll = function (dom, _h, interval) &#123; var dom = document.getElementById(dom); var timer = setTimeout(function () &#123; var _field = dom.children[0]; _field.style.marginTop = _h; clearTimeout(timer); &#125;, 1000) setInterval(function () &#123; var _field = dom.children[0]; _field.style.marginTop = \"0px\"; dom.appendChild(_field); var _field = dom.children[0] _field.style.marginTop = _h; &#125;, interval)&#125;var myScroll = new Scroll(); ç”¨æ³•ï¼š12345678/* * demo çˆ¶å®¹å™¨(ul)çš„id * -36px å­å…ƒç´ liçš„é«˜åº¦ * 3000 æ»šåŠ¨é—´éš”æ—¶é—´ * æ¯æ¬¡æ»šåŠ¨æŒç»­æ—¶é—´å¯åˆ°cssæ–‡ä»¶ä¸­ä¿®æ”¹ * ï¼ˆæ‰¾ä¸åˆ°åŸæ–‡äº†-.-ï¼‰ */myScroll.upScroll(\"demo\",\"-36px\",3000); æ— ç¼æ»šåŠ¨ä¸‹è½½åœ°å€ï¼šç®€å•çš„jQueryæ— ç¼å‘ä¸Šæ»šåŠ¨æ•ˆæœ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758(function ($) &#123; $.fn.myScroll = function (options) &#123; //é»˜è®¤é…ç½® var defaults = &#123; speed: 40, //æ»šåŠ¨é€Ÿåº¦,å€¼è¶Šå¤§é€Ÿåº¦è¶Šæ…¢ rowHeight: 24 //æ¯è¡Œçš„é«˜åº¦ &#125;; var opts = $.extend(&#123;&#125;, defaults, options), intId = []; function marquee(obj, step) &#123; obj.find(\"ul\").animate(&#123; marginTop: '-=1' &#125;, 0, function () &#123; var s = Math.abs(parseInt($(this).css(\"margin-top\"))); if (s &gt;= step) &#123; $(this).find(\"li\").slice(0, 1).appendTo($(this)); $(this).css(\"margin-top\", 0); &#125; &#125;); &#125; this.each(function (i) &#123; var sh = opts[\"rowHeight\"], speed = opts[\"speed\"], _this = $(this); intId[i] = setInterval(function () &#123; if (_this.find(\"ul\").height() &lt;= _this.height()) &#123; clearInterval(intId[i]); &#125; else &#123; marquee(_this, sh); &#125; &#125;, speed); _this.hover(function () &#123; clearInterval(intId[i]); &#125;, function () &#123; intId[i] = setInterval(function () &#123; if (_this.find(\"ul\").height() &lt;= _this.height()) &#123; clearInterval(intId[i]); &#125; else &#123; marquee(_this, sh); &#125; &#125;, speed); &#125;); &#125;); &#125;&#125;)(jQuery);$(function()&#123; $('.myscroll').myScroll(&#123; speed: 40, //æ•°å€¼è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šæ…¢ rowHeight: 26 //liçš„é«˜åº¦ &#125;);&#125;);","categories":[{"name":"å·¥å…·åº“","slug":"å·¥å…·åº“","permalink":"https://www.yangtao.site/categories/å·¥å…·åº“/"}],"tags":[{"name":"jsæ’ä»¶","slug":"jsæ’ä»¶","permalink":"https://www.yangtao.site/tags/jsæ’ä»¶/"}]},{"title":"ä¹å®«æ ¼æŠ½å¥–","slug":"plugin-lottery","date":"2018-11-27T15:11:54.000Z","updated":"2019-11-13T05:42:29.984Z","comments":true,"path":"2018/11/27/plugin-lottery/","link":"","permalink":"https://www.yangtao.site/2018/11/27/plugin-lottery/","excerpt":"ä¹å®«æ ¼æŠ½å¥–è®°å½•ï¼š","text":"ä¹å®«æ ¼æŠ½å¥–è®°å½•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173// ä¹å®«æ ¼æŠ½å¥–var click=false;var luck=&#123; index: 0, //å½“å‰è½¬åŠ¨åˆ°å“ªä¸ªä½ç½®ï¼Œèµ·ç‚¹ä½ç½® count: 0, //æ€»å…±æœ‰å¤šå°‘ä¸ªä½ç½® timer: 0, //setTimeoutçš„IDï¼Œç”¨clearTimeoutæ¸…é™¤ speed: 30, //åˆå§‹è½¬åŠ¨é€Ÿåº¦ times: 0, //è½¬åŠ¨æ¬¡æ•° cycle: 70, //è½¬åŠ¨åŸºæœ¬æ¬¡æ•°ï¼šå³è‡³å°‘éœ€è¦è½¬åŠ¨å¤šå°‘æ¬¡å†è¿›å…¥æŠ½å¥–ç¯èŠ‚ prize: -1, //ä¸­å¥–ä½ç½® init:function(id)&#123; if ($(\"#\"+id).find(\".luck-unit\").length&gt;0) &#123; $luck = $(\"#\"+id); $units = $luck.find(\".luck-unit\"); this.obj = $luck; this.count = $units.length; // $luck.find(\".luck-unit-\"+this.index).addClass(\"active\"); &#125;; &#125;, roll:function()&#123; var index = this.index; var count = this.count; var luck = this.obj; $(luck).find(\".luck-unit-\"+index).removeClass(\"active\"); index += 1; if (index&gt;count-1) &#123; index = 0; &#125;; $(luck).find(\".luck-unit-\"+index).addClass(\"active\"); this.index=index; return false; &#125;, stop:function(index)&#123; this.prize=index; return false; &#125;&#125;;function roll(which)&#123; luck.times += 1; luck.roll(); if (luck.times &gt; luck.cycle+10 &amp;&amp; luck.prize==luck.index) &#123; var title = ''; var content = ''; var desc = ''; var prize = ''; // æœ€ç»ˆåœä¸‹æ¥çš„ä½ç½® // åˆå§‹åŒ– clearTimeout(luck.timer); luck.prize=-1; luck.times=0; click=false; switch(which) &#123; case 0: prize = 'å°ç±³é¼ æ ‡'; break; case 1: prize = 'å›ºæ€ç¡¬ç›˜'; break; case 2: prize = 'ä¹æ‰£ä¿æ¸©æ¯'; break; case 3: prize = 'äº¬ä¸œåˆ¸'; break; case 4: prize = 'è°¢è°¢å‚ä¸'; break; case 5: prize = 'ä¸‡ç”¨è¡¨'; break; case 6: prize = 'æ‘©å°”å§è¯¾ç¨‹æŠ˜æ‰£åˆ¸'; break; case 7: prize = 'å°ç±³è€³æœº'; break; &#125; if(which == 4) &#123; title = 'è°¢è°¢å‚ä¸'; content = 'å†æ¥å†å‰' desc = 'è¯·æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…ï¼Œè·å–æ›´å¤šæŠ½å¥–èµ„æ ¼'; &#125; else &#123; title = 'æ­å–œæ‚¨'; content = 'è·å¾— &lt;span class=\"blue\"&gt;'+ prize +'&lt;/span&gt;'; if(which == 6) &#123; desc = 'è¯·è‡³æ‚¨çš„â€ä¸ªäººä¸­å¿ƒâ€œæŸ¥æ”¶'; &#125; else &#123; desc = 'å¥–å“å°†äºæ´»åŠ¨ç»“æŸåç»Ÿä¸€å‘é€'; &#125; &#125; // å±•ç¤ºä¸­å¥–çŠ¶æ€ setTimeout(function() &#123; modalShow(title,content,desc); &#125;, 800); &#125; else &#123; if (luck.times&lt;luck.cycle) &#123; luck.speed -= 10; &#125; else if (luck.times==luck.cycle) &#123; // æœ€ç»ˆä¸­å¥–ä½ç½®çš„ç´¢å¼• luck.prize = which; &#125; else &#123; if (luck.times &gt; luck.cycle+10 &amp;&amp; ((luck.prize==0 &amp;&amp; luck.index==7) || luck.prize==luck.index+1)) &#123; luck.speed += 110; &#125; else &#123; luck.speed += 20; &#125; &#125; if (luck.speed&lt;40) &#123; luck.speed=40; &#125; luck.timer = setTimeout(function() &#123; roll(which); &#125;,luck.speed); &#125; return false;&#125;$(function() &#123; // Lottery init luck.init('luckArea'); $(\"#startBtn\").click(function()&#123; if(click) &#123; return false; &#125;else&#123; click=true; luck.speed=100; $.get(\"http://www.moore8.com/campaign/lotteryAct\", function (data) &#123; var data = $.parseJSON(data); console.log('data:', data); if(data.code == 1) &#123; var which = data.type; // è°ƒå–æŠ½å¥–å¹¶ä¼ å€¼ roll(which); &#125; else &#123; if(data.msg == 'è¯·å…ˆç™»å½•ï¼') &#123; loginFunc('course_gift'); &#125; else &#123; var desc = 'è¯·æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…ï¼Œè·å–æ›´å¤šæŠ½å¥–èµ„æ ¼'; modalShow('å¯¹ä¸èµ·', data.msg, desc); &#125; click = false; &#125; &#125;); return false; &#125; &#125;);&#125;)function modalShow(title, body, desc) &#123; var title = title || 'æ¸©é¦¨æç¤º'; var body = body || ''; var desc = desc || ''; $('#mTitle').html(title); $('#mBody').html(body); $('#mDesc').html(desc); $('#myModal').modal('show');&#125;function loginFunc(id) &#123; var href = window.location.href; var id = id ? \"%23\" + id : ''; window.location.href = \"/login/?referer=\" + href + id;&#125;","categories":[{"name":"å·¥å…·åº“","slug":"å·¥å…·åº“","permalink":"https://www.yangtao.site/categories/å·¥å…·åº“/"}],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://www.yangtao.site/tags/jQuery/"}]},{"title":"æ´»åŠ¨ä¹‹æ•´ç‚¹ç§’æ€åŠŸèƒ½ä¼˜åŒ–","slug":"feat-sale","date":"2018-11-27T15:00:44.000Z","updated":"2019-11-13T05:39:42.740Z","comments":true,"path":"2018/11/27/feat-sale/","link":"","permalink":"https://www.yangtao.site/2018/11/27/feat-sale/","excerpt":"æ•´ç‚¹ç§’æ€åŠŸèƒ½æ€»ç»“ï¼š","text":"æ•´ç‚¹ç§’æ€åŠŸèƒ½æ€»ç»“ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205var starttime1 = \"2018/11/14 14:00\", endtime1 = \"2018/11/15 14:00\", starttime7 = \"2018/11/19 14:00\", endtime7 = \"2018/11/20 14:00\", // ä¸­ 5~8 ç»„ï¼ˆçœç•¥ï¼‰ // ä¸‹ 9~12 ç»„ï¼ˆçœç•¥ï¼‰ starttime22 = \"2018/11/29 14:00\", endtime22 = \"2018/11/30 14:00\", starttime23 = \"2018/12/14 14:00\", endtime23 = \"2018/12/15 14:00\";/** * è·å– æ•´ç‚¹ç§’æ€çŠ¶æ€ */var getShopStatus = function () &#123; var statuShop = []; $.ajax(&#123; url: '//www.eeboard.com/wp-content/themes/eeboard/api/eeboardsix.php?act=shop_detail', dataType: 'json', cache: false, async: false, type: \"GET\", success: function (data) &#123; var arr8 = data.data.eight; // æ•´ç‚¹ç§’æ€çŠ¶æ€ if (!arr8) &#123; arr8 = [false, false, false, false, false, false, false, false, false, false, false, false] &#125; var d1over = arr8[0], d2over = arr8[1], d3over = arr8[2], d4over = arr8[3], d5over = arr8[4], d6over = arr8[5], d7over = arr8[6], d8over = arr8[7], d9over = arr8[8], d10over = arr8[9], d11over = arr8[10], d12over = arr8[11]; statuShop = [ d1over, d1over, d2over, d2over, d3over, d3over, d4over, d5over, d5over, d6over, d6over, d7over, d7over, d8over, d8over, d9over, d9over, d10over, d10over, d11over, d11over, d12over, d12over ]; return statuShop; &#125;, error: function (error) &#123; // console.log('å•†åŸæ¥å£æŠ¥é”™---'); // console.log(error); &#125; &#125;); return statuShop;&#125;var shopStatusArr = getShopStatus();/** * æ—¶é—´çŠ¶æ€å‡½æ•° */function timeStatus(start, end) &#123; var status = 'load', nowTime = parseFloat(new Date().getTime()), startTime = parseFloat((new Date(start)).getTime()), endTime = parseFloat((new Date(end)).getTime()), lastStartTime = parseFloat(startTime - nowTime), lastEndTime = parseFloat(endTime - nowTime); // æœªå¼€å§‹ if (lastStartTime &gt; 0) &#123; return status = 'load'; &#125; else if (lastStartTime &lt;= 0 &amp;&amp; lastEndTime &gt; 0) &#123; // è¿›è¡Œä¸­ return status = 'start'; &#125; else if (lastEndTime &lt;= 0) &#123; // å·²ç»“æŸ return status = 'end'; &#125;&#125;/** * å„ä¸ªæ—¶é—´æ®µçŠ¶æ€åˆ‡æ¢å‡½æ•° */function isTimeStartEvent() &#123; var timer; var timersArr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]; // åˆ¤æ–­æ—¶é—´çŠ¶æ€ $.each(timersArr, function (i, item) &#123; var start = eval('starttime' + item); var end = eval('endtime' + item); var status = timeStatus(start, end); switchCaseEvent(item, status); &#125;);&#125;/* * ç§’æ€æ—¶é—´ç›‘æ§ï¼šåˆ¤æ–­æ—¶é—´æ®µå‡½æ•° */function intervalStartEvent(start, end) &#123; var bigTimer; var isClear = false; var status = timeStatus(start, end); // æ—¶é—´æˆªæ­¢ï¼Œæ¸…é™¤å®šæ—¶å™¨ if (status === 'end') &#123; isClear = true; &#125; if (isClear) &#123; clearTimeout(bigTimer); &#125; else &#123; bigTimer = setTimeout('intervalStartEvent(starttime1, endtime23);', 1000); &#125; // ç›‘æ§æ—¶é—´æ®µå‡½æ•° isTimeStartEvent();&#125;/** * æç¤ºåŠbuttonçŠ¶æ€åˆ‡æ¢å‡½æ•° */function switchCaseEvent(item, type) &#123; item = item || 1; type = type || 'end'; switch (item) &#123; case 1: case 2: startAndEndEvent($('#qiangbtn1'), item, type); break; case 3: case 4: startAndEndEvent($('#qiangbtn2'), item, type); break; case 5: case 6: startAndEndEvent($('#qiangbtn3'), item, type); break; case 7: startAndEndEvent($('#qiangbtn4'), item, type); break; case 8: case 9: startAndEndEvent($('#qiangbtn5'), item, type); break; case 10: case 11: startAndEndEvent($('#qiangbtn6'), item, type); break; case 12: case 13: startAndEndEvent($('#qiangbtn7'), item, type); break; case 14: case 15: startAndEndEvent($('#qiangbtn8'), item, type); break; case 16: case 17: startAndEndEvent($('#qiangbtn9'), item, type); break; case 18: case 19: startAndEndEvent($('#qiangbtn10'), item, type); break; case 20: case 21: startAndEndEvent($('#qiangbtn11'), item, type); break; case 22: case 23: startAndEndEvent($('#qiangbtn12'), item, type); break; default: break; &#125;&#125;/** * æ–‡å­—çŠ¶æ€åˆ‡æ¢å‡½æ•° */function startAndEndEvent(obj, item, type) &#123; if (!obj) return; if (type === 'start') &#123; var status = shopStatusArr[item - 1]; if (status) &#123; $('#qiang-time0' + item).text('å¼€å§‹ç§’æ€'); obj.removeClass('unclick').text('å¼€å§‹ç§’æ€'); &#125; else &#123; $('#qiang-time0' + item).text('å·²æŠ¢å…‰').css('color', '#9b9b9b'); obj.addClass('unclick unclick-over').text('å·²æŠ¢å…‰'); &#125; return false; &#125; else if (type === 'end') &#123; $('#qiang-time0' + item).text('å·²æŠ¢å…‰').css('color', '#9b9b9b'); obj.addClass('unclick unclick-time').text('å·²æŠ¢å…‰'); &#125; else &#123; $('#qiang-time0' + item).text('å³å°†å¼€å§‹'); // ä¸¤å¯¹æ—¶é—´æ®µå¯¹åº”åŒä¸€ä¸ªæŒ‰é’®ï¼Œåˆ¤æ–­æœ¬æ®µæ—¶é—´æ˜¯å¦æˆªæ­¢ï¼Œå†å¼€å¯å¦ä¸€æ®µæ—¶é—´çš„çŠ¶æ€ if (obj.hasClass('unclick-time')) &#123; obj.removeClass('unclick').text('å³å°†å¼€å§‹'); &#125; &#125;&#125;","categories":[{"name":"å·¥å…·åº“","slug":"å·¥å…·åº“","permalink":"https://www.yangtao.site/categories/å·¥å…·åº“/"}],"tags":[{"name":"jsåŠŸèƒ½","slug":"jsåŠŸèƒ½","permalink":"https://www.yangtao.site/tags/jsåŠŸèƒ½/"}]},{"title":"è®¾ç½®Cookie","slug":"web-cookie","date":"2018-11-03T15:41:22.000Z","updated":"2019-11-13T05:41:53.067Z","comments":true,"path":"2018/11/03/web-cookie/","link":"","permalink":"https://www.yangtao.site/2018/11/03/web-cookie/","excerpt":"è®¾ç½®Cookieæ€»ç»“","text":"è®¾ç½®Cookieæ€»ç»“ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// æ”¶è—åŠŸèƒ½ function addFavorite() &#123; var title = 'æ„æ³•åŠå¯¼ä½“STM32/STM8æŠ€æœ¯ç¤¾åŒº - æä¾›æœ€æ–°çš„STèµ„è®¯å’ŒæŠ€æœ¯äº¤æµ'; var URL = 'http://www.stmcu.org.cn/'; // IE10 if(document.all) &#123; window.external.addFavorite(URL, title); &#125; else &#123; alert('æ‰‹åŠ¨ Ctrl+D å¯ä»¥æ”¶è—æˆ‘ä»¬çš„ç½‘ç«™å“¦'); &#125; &#125; // è®¾ç½®cookieï¼ŒåŒä¸€åŸŸåéƒ½å¯è·å– function setCookie(name, value, exdays) &#123; var exdays = exdays || 1024; var d = new Date(); d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000)); document.cookie = name + \"=\" + escape(value) + \";path=/;expires=\" + d.toGMTString(); &#125; // è¯»å–cookiesï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è®¾ç½®çš„name function getCookie(name) &#123; var name = name + \"=\"; var ca = document.cookie.split(';'); for (var i = 0; i &lt; ca.length; i++) &#123; var c = ca[i].trim(); if (c.indexOf(name) == 0) &#123; return c.substring(name.length, c.length); &#125; &#125; return \"\"; &#125; function checkCookie() &#123; var user = getCookie(\"msgCookie\"); var width = window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth; if(width &gt;= 1080) &#123; if (user != \"\") &#123; msgHide(); &#125; else &#123; msgShow(); &#125; &#125; &#125; // å…³é—­æ—¶è®¾ç½®cookie function closeModal() &#123; msgHide(); setCookie(\"msgCookie\", 'msgCookie'); &#125; function msgHide() &#123; document.getElementById('newsTipsModal').style.display = 'none'; &#125; function msgShow() &#123; document.getElementById('newsTipsModal').style.display = 'block'; &#125; // init checkCookie();","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"jsåŠŸèƒ½","slug":"jsåŠŸèƒ½","permalink":"https://www.yangtao.site/tags/jsåŠŸèƒ½/"}]},{"title":"å­¦ä¹ JavaScriptæ·±å…¥ç³»åˆ—ç®€è¦æ€»ç»“","slug":"js-learn-prototype","date":"2018-10-31T15:07:42.000Z","updated":"2019-11-13T05:40:14.632Z","comments":true,"path":"2018/10/31/js-learn-prototype/","link":"","permalink":"https://www.yangtao.site/2018/10/31/js-learn-prototype/","excerpt":"å­¦ä¹ JavaScriptæ·±å…¥ç³»åˆ—ç®€è¦æ€»ç»“","text":"å­¦ä¹ JavaScriptæ·±å…¥ç³»åˆ—ç®€è¦æ€»ç»“ ä»åŸå‹åˆ°åŸå‹é“¾åŸæ–‡åœ°å€ï¼šJavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸ºè°ƒç”¨è¯¥å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹ æ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé™¤nullï¼‰éƒ½å…·æœ‰ä¸€ä¸ªå±æ€§ï¼š__proto__ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ æ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•° åŸå‹å¯¹è±¡æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œæœ€åObject.prototype.__proto__ = null è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸåŸæ–‡é“¾æ¥ï¼šJavaScriptæ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ javascripté‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸ(lexical scoping)ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š è¯æ³•ä½œç”¨åŸŸï¼Œå³é™æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº† åŠ¨æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®š æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡(execution context)ï¼Œå¹¶ä¸”å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(Execution context stack, ESC) å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä¼šå°†å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º å˜é‡å¯¹è±¡1ã€å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šå…¨å±€å¯¹è±¡ 2ã€å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–ï¼šåªåŒ…æ‹¬Argumentså¯¹è±¡ 3ã€è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼ 4ã€ä»£ç æ‰§è¡Œé˜¶æ®µï¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼ æ€»ç»“ï¼šæœªè¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹å‰ï¼Œå˜é‡å¯¹è±¡(VO)ä¸­çš„å±æ€§éƒ½ä¸èƒ½è®¿é—®ï¼ä½†æ˜¯è¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹åï¼Œå˜é‡å¯¹è±¡(VO)è½¬å˜ä¸ºäº†æ´»åŠ¨å¯¹è±¡(AO)ï¼Œé‡Œé¢çš„å±æ€§éƒ½èƒ½è¢«è®¿é—®äº†ï¼Œç„¶åå¼€å§‹è¿›è¡Œæ‰§è¡Œé˜¶æ®µçš„æ“ä½œã€‚å®ƒä»¬å…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤„äºæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒç”Ÿå‘½å‘¨æœŸã€‚ æœ€åï¼Œå‡½æ•°æ˜¯â€œç¬¬ä¸€ç­‰å…¬æ°‘â€ï¼Œè®°ä½è¿™ä¸ªï¼Œå˜é‡åç§°å’Œå‡½æ•°åç§°ç›¸åŒçš„å£°æ˜ï¼Œä¼˜å…ˆæ‰§è¡Œå‡½æ•°å£°æ˜ ä½œç”¨åŸŸä»ECMAScriptè§„èŒƒè§£è¯»thisæ‰§è¡Œä¸Šä¸‹æ–‡é—­åŒ…é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚ è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚ é‚£ä¹ˆï¼Œé—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡ã€‚ å‚æ•°æŒ‰å€¼ä¼ é€’ECMAScriptä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ å³ï¼ŒæŠŠå‡½æ•°å¤–éƒ¨çš„å€¼å¤åˆ¶ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°ï¼Œå°±å’ŒæŠŠå€¼ä»ä¸€ä¸ªå˜é‡å¤åˆ¶ç»™å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚ å‚æ•°å¦‚æœæ˜¯åŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹æŒ‰å…±äº«ä¼ é€’ã€‚ å…±äº«ä¼ é€’æ˜¯æŒ‡ï¼Œåœ¨ä¼ é€’å¯¹è±¡çš„æ—¶å€™ï¼Œä¼ é€’å¯¹è±¡çš„å¼•ç”¨çš„å‰¯æœ¬ã€‚ callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°call()åœ¨ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œè‹¥å¹²ä¸ªæŒ‡å®šçš„å‚æ•°å€¼çš„å‰æä¸‹ï¼Œè°ƒç”¨æŸä¸ªå‡½æ•°æˆ–æ–¹æ³•ã€‚ 12345678910111213Function.prototype.mycall = function(context) &#123; var context = context || window; //è·å–è°ƒç”¨callçš„å‡½æ•°ï¼Œç”¨thiså¯ä»¥è·å– context.fn = this; var args = []; for (var i = 1, l = arguments.length; i &lt; l; i++) &#123; args.push('arguments[' + i + ']'); &#125; // æŠŠä¼ ç»™callçš„å‚æ•°ä¼ é€’ç»™äº†context.fnå‡½æ•° var result = eval('context.fn(' + args + ')'); delete context.fn; return result;&#125; apply()åŒcall()ï¼Œåªä¸è¿‡å°†å¤šä¸ªå‚æ•°å€¼ï¼Œä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥è€Œå·²ã€‚ 12345678910111213141516Function.prototype.myapply = function(context, arr) &#123; var context = Object(context) || window; context.fn = this; var result; if (!arr) &#123; result = context.fn(); &#125; else &#123; var args = []; for (var index = 0; index &lt; arr.length; index++) &#123; args.push('arr[' + index + ']'); &#125; result = eval('context.fn(' + args + ')'); &#125; delete context.fn; return result;&#125; bindçš„æ¨¡æ‹Ÿå®ç°bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨ï¼Œbind()ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„thisï¼Œä¹‹åçš„ä¸€ç³»åˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ï¼Œä½œä¸ºå®ƒçš„å‚æ•°ã€‚ newçš„æ¨¡æ‹Ÿå®ç°newè¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»å‹ä¹‹ä¸€ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å†´ç¾½çš„åšå®¢ä¹‹JavaScriptã€ES6ç³»åˆ—é›†é”¦","slug":"blog-01","date":"2018-10-26T13:45:29.000Z","updated":"2018-10-26T13:55:43.484Z","comments":true,"path":"2018/10/26/blog-01/","link":"","permalink":"https://www.yangtao.site/2018/10/26/blog-01/","excerpt":"JavaScriptæ·±å…¥ç³»åˆ— 15 ç¯‡å·²å®Œç»“JavaScriptä¸“é¢˜ç³»åˆ— 20 ç¯‡å·²å®Œç»“underscore ç³»åˆ— 8 ç¯‡å·²å®Œç»“","text":"JavaScriptæ·±å…¥ç³»åˆ— 15 ç¯‡å·²å®Œç»“JavaScriptä¸“é¢˜ç³»åˆ— 20 ç¯‡å·²å®Œç»“underscore ç³»åˆ— 8 ç¯‡å·²å®Œç»“ å†´ç¾½çš„åšå®¢ä¸“æ  æ˜é‡‘ä¸»é¡µ segmentfaultä¸»é¡µ çŸ¥ä¹ æ·±å…¥ç³»åˆ—ç›®å½• JavaScirptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ JavaScriptæ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ JavaScriptæ·±å…¥ä¹‹å˜é‡å¯¹è±¡ JavaScriptæ·±å…¥ä¹‹ä½œç”¨åŸŸé“¾ JavaScriptæ·±å…¥ä¹‹ä»ECMAScriptè§„èŒƒè§£è¯»this JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡ JavaScriptæ·±å…¥ä¹‹é—­åŒ… JavaScriptæ·±å…¥ä¹‹å‚æ•°æŒ‰å€¼ä¼ é€’ JavaScriptæ·±å…¥ä¹‹callå’Œapplyçš„æ¨¡æ‹Ÿå®ç° JavaScriptæ·±å…¥ä¹‹bindçš„æ¨¡æ‹Ÿå®ç° JavaScriptæ·±å…¥ä¹‹newçš„æ¨¡æ‹Ÿå®ç° JavaScriptæ·±å…¥ä¹‹ç±»æ•°ç»„å¯¹è±¡ä¸arguments JavaScriptæ·±å…¥ä¹‹åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹ JavaScriptæ·±å…¥ä¹‹ç»§æ‰¿çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹ JavaScriptæ·±å…¥ç³»åˆ—15ç¯‡æ­£å¼å®Œç»“ï¼ ä¸“é¢˜ç³»åˆ—ç›®å½• JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦é˜²æŠ– JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦èŠ‚æµ JavaScriptä¸“é¢˜ä¹‹æ•°ç»„å»é‡ JavaScriptä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸Š) JavaScriptä¸“é¢˜ä¹‹ç±»å‹åˆ¤æ–­(ä¸‹) JavaScriptä¸“é¢˜ä¹‹æ·±æµ…æ‹·è´ JavaScriptä¸“é¢˜ä¹‹ä»é›¶å®ç°jQueryçš„extend JavaScriptä¸“é¢˜ä¹‹å¦‚ä½•æ±‚æ•°ç»„çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ JavaScriptä¸“é¢˜ä¹‹æ•°ç»„æ‰å¹³åŒ– JavaScriptä¸“é¢˜ä¹‹å­¦underscoreåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æŒ‡å®šå…ƒç´  JavaScriptä¸“é¢˜ä¹‹jQueryé€šç”¨éå†æ–¹æ³•eachçš„å®ç° JavaScriptä¸“é¢˜ä¹‹å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ JavaScriptä¸“é¢˜ä¹‹å‡½æ•°æŸ¯é‡ŒåŒ– JavaScriptä¸“é¢˜ä¹‹åå‡½æ•° JavaScriptä¸“é¢˜ä¹‹æƒ°æ€§å‡½æ•° JavaScriptä¸“é¢˜ä¹‹å‡½æ•°ç»„åˆ JavaScriptä¸“é¢˜ä¹‹å‡½æ•°è®°å¿† JavaScriptä¸“é¢˜ä¹‹é€’å½’ JavaScriptä¸“é¢˜ä¹‹ä¹±åº JavaScriptä¸“é¢˜ä¹‹è§£è¯» v8 æ’åºæºç  JavaScriptä¸“é¢˜ç³»åˆ—20ç¯‡æ­£å¼å®Œç»“ï¼ underscore ç³»åˆ—ç›®å½• underscore ç³»åˆ—ä¹‹å¦‚ä½•å†™è‡ªå·±çš„ underscore underscore ç³»åˆ—ä¹‹é“¾å¼è°ƒç”¨ underscore ç³»åˆ—ä¹‹å†…éƒ¨å‡½æ•° cb å’Œ optimizeCb underscore ç³»åˆ—ä¹‹å†…éƒ¨å‡½æ•° restArgs underscore ç³»åˆ—ä¹‹é˜²å†²çªä¸ Utility Functions underscore ç³»åˆ—ä¹‹å®ç°ä¸€ä¸ªæ¨¡æ¿å¼•æ“(ä¸Š) underscore ç³»åˆ—ä¹‹å®ç°ä¸€ä¸ªæ¨¡æ¿å¼•æ“(ä¸‹) underscore ç³»åˆ—ä¹‹å­—ç¬¦å®ä½“ä¸ _.escape underscore çš„æºç è¯¥å¦‚ä½•é˜…è¯»ï¼Ÿ ES6 ç³»åˆ—ç›®å½• ES6 ç³»åˆ—ä¹‹ let å’Œ const ES6 ç³»åˆ—ä¹‹æ¨¡æ¿å­—ç¬¦ä¸² ES6 ç³»åˆ—ä¹‹ç®­å¤´å‡½æ•° ES6 ç³»åˆ—ä¹‹æ¨¡æ‹Ÿå®ç° Symbol ç±»å‹ ES6 ç³»åˆ—ä¹‹è¿­ä»£å™¨ä¸ for of ES6 ç³»åˆ—ä¹‹æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Set æ•°æ®ç»“æ„ ES6 ç³»åˆ—ä¹‹ WeakMap ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Promise ES6 ç³»åˆ—ä¹‹ Generator çš„è‡ªåŠ¨æ‰§è¡Œ ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Async å‹æƒ…é“¾æ¥ å¦‚ä½•è½»æ¾æ‹¿åˆ°æ·˜å®å‰ç«¯ offer","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://www.yangtao.site/tags/Blog/"}]},{"title":"Purl.js-JSè·å–åœ°å€æ ä¿¡æ¯ç”¨ä¾‹æµ‹è¯•","slug":"js-purl","date":"2018-09-23T08:01:16.000Z","updated":"2018-09-23T08:47:02.159Z","comments":true,"path":"2018/09/23/js-purl/","link":"","permalink":"https://www.yangtao.site/2018/09/23/js-purl/","excerpt":"Purl.jså¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¥è·å–åœ°å€æ çš„ä¸€äº›ä¿¡æ¯ï¼Œ å¯ä»¥ä½¿ç”¨åŸç”Ÿjsï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨jQuery Purl.jså®˜æ–¹æ–‡æ¡£","text":"Purl.jså¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¥è·å–åœ°å€æ çš„ä¸€äº›ä¿¡æ¯ï¼Œ å¯ä»¥ä½¿ç”¨åŸç”Ÿjsï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨jQuery Purl.jså®˜æ–¹æ–‡æ¡£ Attributes Info source The whole url being parsed protocol eg. http, https, file, etc host eg. www.mydomain.com, localhost etc port eg. 80 relative The relative path to the file including the querystring (eg. /folder/dir/index.html?item=value) path The path to the file (eg. /folder/dir/index.html) directory The directory part of the path (eg. /folder/dir/) file The basename of the file eg. index.html query The entire query string if it exists, eg. item=value&amp;item2=value2 fragment or anchor The entire string after the # symbol åˆå§‹åŒ–ï¼š123456789101112131415161718192021222324252627var url;var myurl;$(\"#clickBtn\").find('button').click(function(e) &#123; var res, resInfo; myurl = $(\"#urlArea\").val(); // å¦‚æœmyurlä¸ºç©ºï¼Œåˆ™ä¼šè·å–å½“å‰é¡µé¢çš„url url = purl(myurl); $(\"#urlArea\").val(myurl); res = $(this).text(); resInfo = getUrlInfo(url, res); $(\"#inputRes\").val(resInfo);&#125;);function getUrlInfo(url, res) &#123; if (res === 'param') &#123; return url.param(); &#125; else if (res === 'segment') &#123; return url.segment(); &#125; else &#123; return url.attr(res); &#125;&#125; è¿è¡Œè¯•è¯•çœ‹ï¼š codepenå®Œæ•´ä»£ç  æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š è®°å½•åœ¨QDfuns: Purl.js-ä½¿ç”¨JSè·å–URLä¿¡æ¯","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"jsæ’ä»¶","slug":"jsæ’ä»¶","permalink":"https://www.yangtao.site/tags/jsæ’ä»¶/"}]},{"title":"HTML5 Canvas å›¾å½¢ç»˜åˆ¶","slug":"canvas-01","date":"2018-09-23T07:18:46.000Z","updated":"2019-12-03T10:17:27.750Z","comments":true,"path":"2018/09/23/canvas-01/","link":"","permalink":"https://www.yangtao.site/2018/09/23/canvas-01/","excerpt":"canvas å…ƒç´ å¹¶é Canvas ä¸­æœ€å¼ºå¤§çš„éƒ¨åˆ†ï¼ŒçœŸæ­£çš„å…³é”®éƒ¨åˆ†æ˜¯ 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œè¿™æ˜¯ä½ çœŸæ­£ç»˜åˆ¶å›¾å½¢çš„åœ°æ–¹ã€‚canvas å…ƒç´ çš„ç”¨é€”åªæ˜¯ä½œä¸º 2D æ¸²æŸ“ä¸Šä¸‹æ–‡çš„åŒ…è£…å™¨ï¼Œå®ƒåŒ…å«ç»˜å›¾å’Œå›¾å½¢æ“ä½œæ‰€éœ€è¦çš„å…¨éƒ¨æ–¹æ³•å’Œä¸°å¯ŒåŠŸèƒ½ã€‚ç†è§£è¿™ä¸€ç‚¹æ˜¯å¾ˆé‡è¦çš„ï¼Œå¼ºè°ƒä¸€ä¸‹ï¼šç»˜å›¾æ˜¯åœ¨ 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨ canvas å…ƒç´ ä¸­è¿›è¡Œã€‚å¯ä»¥é€šè¿‡ canvas å…ƒç´ è®¿é—®å’Œæ˜¾ç¤º 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚ã€å¼•å…¥åŸæ–‡ã€‘","text":"canvas å…ƒç´ å¹¶é Canvas ä¸­æœ€å¼ºå¤§çš„éƒ¨åˆ†ï¼ŒçœŸæ­£çš„å…³é”®éƒ¨åˆ†æ˜¯ 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œè¿™æ˜¯ä½ çœŸæ­£ç»˜åˆ¶å›¾å½¢çš„åœ°æ–¹ã€‚canvas å…ƒç´ çš„ç”¨é€”åªæ˜¯ä½œä¸º 2D æ¸²æŸ“ä¸Šä¸‹æ–‡çš„åŒ…è£…å™¨ï¼Œå®ƒåŒ…å«ç»˜å›¾å’Œå›¾å½¢æ“ä½œæ‰€éœ€è¦çš„å…¨éƒ¨æ–¹æ³•å’Œä¸°å¯ŒåŠŸèƒ½ã€‚ç†è§£è¿™ä¸€ç‚¹æ˜¯å¾ˆé‡è¦çš„ï¼Œå¼ºè°ƒä¸€ä¸‹ï¼šç»˜å›¾æ˜¯åœ¨ 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨ canvas å…ƒç´ ä¸­è¿›è¡Œã€‚å¯ä»¥é€šè¿‡ canvas å…ƒç´ è®¿é—®å’Œæ˜¾ç¤º 2D æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚ã€å¼•å…¥åŸæ–‡ã€‘ ç¤ºä¾‹HTML5 Canvas ç²‰å°˜æ€ç²’å­å¼•åŠ›æ•ˆåº” æ–‡ç« HTML5 Canvas å›¾å½¢ç»˜åˆ¶ åˆçº§ HTML5 Canvas å›¾å½¢ç»˜åˆ¶ ä¸­çº§ HTML5 è·Ÿéšé¼ æ ‡ç§»åŠ¨çš„é›ªèŠ±åŠ¨ç”» HTML5 Canvas å¾ˆé…·ç‚«çš„ç²‰å°˜æ€ç²’å­å¼•åŠ›æ•ˆåº”å®è·µ HTML5 å¾ˆé…·ç‚«çš„ç‚¹çº¿ç²’å­ç‰¹æ•ˆï¼Œä½ ä¸è¯•ä¸€ä¸‹ï¼Ÿ","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Canvas","slug":"Canvas","permalink":"https://www.yangtao.site/tags/Canvas/"}]},{"title":"ã€è½¬ã€‘é«˜æ•ˆå­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§","slug":"js-learn","date":"2018-09-22T15:44:53.000Z","updated":"2018-09-22T16:09:58.900Z","comments":true,"path":"2018/09/22/js-learn/","link":"","permalink":"https://www.yangtao.site/2018/09/22/js-learn/","excerpt":"åˆå§‹æ•´ç†äºæ…•è¯¾ç½‘æ‰‹è®°é«˜æ•ˆå­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§","text":"åˆå§‹æ•´ç†äºæ…•è¯¾ç½‘æ‰‹è®°é«˜æ•ˆå­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§ æ›´å¿«å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§ å½“äººä»¬è¯•å›¾å­¦ä¹ JavaScriptæˆ–å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ—¶å€™ï¼Œä»–ä»¬é€šå¸¸ä¼šé‡åˆ°å¦‚ä¸‹æŒ‘æˆ˜ã€‚ 1234567891. ä¸€äº›æ¦‚å¿µè®©ä»–ä»¬æ„Ÿåˆ°å›°æƒ‘ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä¹‹å‰å­¦è¿‡å…¶ä»–ç±»å‹çš„è¯­è¨€ã€‚2. å¾ˆéš¾æ‰¾åˆ°å­¦ä¹ çš„æ—¶é—´ï¼ˆæˆ–è€…åŠ¨åŠ›ï¼‰å»å­¦ä¹ ã€‚3. ä½ å¾ˆå®¹æ˜“å¿˜æ‰ä¹‹å‰å­¦åˆ°çš„ä¸œè¥¿ã€‚4. JavaScriptå·¥å…·å¤ªå¤šå¹¶ä¸”ç»å¸¸æ›´æ–°ï¼Œä»¥è‡³äºå¾ˆéš¾æ‰¾åˆ°å­¦ä¹ çš„åˆ‡å…¥ç‚¹ã€‚5. ... å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›éš¾é¢˜æœ€ç»ˆèƒ½å¤Ÿè¢«å…‹æœã€‚åœ¨è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°†å±•ç¤ºå…­ä¸ªèƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¿«ã€æ›´å¼€å¿ƒã€æ›´é«˜æ•ˆåœ°å­¦ä¹ JavaScriptçš„å…­ä¸ªæ€ç»´æŠ€å·§ã€‚ 1ã€ä¸è¦è®©å¯¹æœªæ¥çš„å¿§è™‘å¹²æ‰°ä½ ç°åœ¨çš„å­¦ä¹  æœ‰äº›JavaScriptåˆå­¦è€…ä¼šé—®åˆšå¼€å§‹è¦å­¦ä¹ å“ªç§æ¡†æ¶ï¼Œä½†æ˜¯å¦‚æœä½ è¿˜æ²¡èƒ½ç†Ÿç»ƒä½¿ç”¨åŸç”ŸJavaScriptï¼Œä½ å°±ä¸åº”è¯¥é—®è¿™ç§é—®é¢˜ã€‚å› ä¸ºä½ ä¼šèŠ±å¾ˆå¤šæ—¶é—´ç ”ç©¶å„ç§æ¡†æ¶è€Œå¾—ä¸åˆ°è¿›æ­¥ã€‚ èµ°å‡ºè¿™ä¸ªé™·é˜±çš„ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ¶å®šä¸€ä¸ªå­¦ä¹ è·¯å¾„å›¾ã€‚ä¾‹å¦‚ï¼Œè¦æˆä¸ºå‰ç«¯å¼€å‘ï¼Œä½ çš„è·¯å¾„å›¾å¯èƒ½æ˜¯ä¸‹å›¾ã€‚åœ¨å°†æ¥ä½ èƒ½å¤Ÿä½¿ç”¨HTMLå’ŒCSSåˆ¶ä½œåŠ¨æ€é¡µé¢ã€‚ 2ã€ä¸è¦è®©è‡ªä¿¡éª—ä½ è¿›å…¥æŒç»­é—å¿˜çš„é™·é˜±å¿«é€Ÿç†è§£ä¸€ä¸ªæ¦‚å¿µä¼šæ˜¯JavaScriptè¿›æ­¥çš„æœ€å¤§é˜»ç¢ï¼Œä¸‹é¢æˆ‘å°†è§£é‡Šã€‚ å½“ä½ é‡åˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè€Œä½ å¥½åƒç†è§£äº†ï¼Œä½ å¾ˆå¯èƒ½æŠ‘åˆ¶ä¸ä½å†…å¿ƒè·³åˆ°ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„å†²åŠ¨ã€‚ ç°å®å¯èƒ½æ˜¯ä½ ä¼šç†è§£ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹ç„¶åç»§ç»­è·³åˆ°ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚ ä½†æ˜¯ï¼Œå¾ˆå¿«ä½ ä¼šåˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨è¿™ä¸ªèŠ‚ç‚¹ä½ å‘ç°è‡ªå·±å·²ç»å¿˜äº†å‰é¢æ‰€å­¦ï¼Œäºæ˜¯ä½ éœ€è¦å›è¿‡å¤´å¤ä¹ ï¼Œä½ å¿«é€ŸçŸäº†ä¸€ä¸‹ä¹‹å‰æ‰€å­¦ç„¶ååˆç»§ç»­å­¦ä¹ æ–°çš„çŸ¥è¯†ã€‚ ä½†æ˜¯ç°åœ¨ï¼Œä½ å¿˜è®°äº†å…¶ä»–ä¸œè¥¿ã€‚ ä½ ä¸€ç›´é‡å¤è¿™ç§ç»§ç»­-å›é¡¾-ç»§ç»­-å›é¡¾æ¨¡å¼ç›´åˆ°ä½ å‘ç°è‡ªå·±å®Œå…¨è¿·å¤±ã€‚ ä½ å¼€å§‹æ²®ä¸§ï¼Œæƒ³è¦ä¼‘æ¯ï¼Œç„¶åå½“ä½ å¼€å§‹é‡æŒ¯æ——é¼“ï¼Œå´å‘ç°è‡ªå·±å·²ç»å¿˜æ‰æ‰€æœ‰ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªåº”å¯¹ä¸Šè¿°é—®é¢˜çš„æ–¹æ³•ï¼š ä¸€æ¬¡åªå­¦ä¸€æ ·ä¸œè¥¿ï¼› åšç»ƒä¹ â€”â€”å®é™…å°±æ˜¯æ•²ä»£ç ï¼› å½“ä½ å­¦ä¹ ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œä½ è¦å°†å®ƒå®è·µå‡ºæ¥ï¼Œç»ƒä¹ å®ƒï¼Œä¸å®ƒå’Œå–„ç›¸å¤„ï¼Œç”šè‡³èƒ½å¤Ÿå°†å®ƒä¸å…¶ä»–æ¦‚å¿µè”ç³»åˆ°ä¸€èµ·ã€‚ å½“ä½ å­¦ä¹ ä¸€ä¸ªç¤ºä¾‹ï¼Œæœ€é‡è¦çš„æ˜¯ä½ è¦è‡ªå·±å°†ä»£ç æ•²å‡ºæ¥ï¼Œè¿™æ ·èƒ½å¸®åŠ©ä½ å¸æ”¶å®ƒã€‚å¦å¤–ï¼Œä¸€æ¬¡åªå­¦ä¸€ä¸ªä¸œè¥¿èƒ½å¤Ÿå¸®åŠ©ä½ å·©å›ºæ‰€å­¦ï¼Œå› ä¸ºè®°å¿†æ›´å°‘çš„ä¸œè¥¿æ›´å®¹æ˜“ã€‚ è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥è²Œä¼¼æ¯”é˜…è¯»ç„¶åå¿«é€Ÿè·³åˆ°ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒæ‰€èŠ±çš„æ—¶é—´æ›´å°‘ï¼Œå› ä¸ºè¿™æ ·ä½ å°±ä¸éœ€è¦é¢‘ç¹å¤ä¹ ä¹‹å‰æ‰€å­¦ã€‚æˆ‘åœ¨å¥½å‡ ä¸ªåœºåˆåæ‰è‰°éš¾çš„é¢†æ‚Ÿåˆ°è¿™ä¸ªé“ç†ã€‚ 3ã€ä½¿ç”¨æ­£ç¡®çš„æ€ç»´æ–¹å¼ç»ƒä¹ å¾ˆå¤šäººè®¤ä¸ºæ•²ä»£ç æ˜¯çƒ¦äººçš„é‡å¤æ€§å·¥ä½œï¼Œæ‰€ä»¥ä»–ä»¬é€šå¸¸ä¼šè·³è¿‡è¿™ä¸ªæ­¥éª¤è¯•ç€å¯»æ‰¾æ·å¾„ã€‚å¦‚æœä½ è¯•å›¾ä¸ºJavaScriptç»ƒä¹ å¯»æ‰¾æ·å¾„ï¼Œä½ å°†ä¼šä¸ºæ­¤èŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚ ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•æ‰èƒ½ä½¿å¾—æ•²ä»£ç æ›´åŠ çš„æœ‰è¶£ï¼Œä½¿å¾—æˆ‘ä»¬æ„¿æ„å»æ•²ä»£ç å‘¢ï¼Ÿ è¯•ç€æ”¹å˜ä¸ºä¸‹é¢çš„æ€ç»´æ¨¡å¼ï¼š å¦‚æœä½ åˆšå­¦äº†ä¸€ä¸ªJavaScriptæ¦‚å¿µï¼Œç„¶è€Œä½ è¢«å‘ŠçŸ¥ä¸èƒ½ä½¿ç”¨å®ƒï¼Œå¯¹æ­¤ä½ æ„Ÿè§‰å¦‚ä½•ï¼Ÿä¸ªäººæ¥è¯´æˆ‘ä¼šæ„Ÿåˆ°æœ‰ç‚¹æ¼ç«ï¼Œç‰¹åˆ«æ˜¯ä¸ºäº†å¼„æ‡‚å®ƒæˆ‘èŠ±è´¹äº†å®è´µçš„æ—¶é—´ã€‚è¿™å°±åƒæ˜¯ä¸€ä¸ªå°å­©å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ç©å…·ï¼Œä½†å´è¢«é™åˆ¶ä¸èƒ½ç©å®ƒã€‚ å½“ä½ å­¦ä¹ JavaScriptçš„æ–°çŸ¥è¯†ï¼Œè¯•ç€å°†è¿™ä¸ªçŸ¥è¯†ç‚¹è§†ä½œä¸€ä¸ªæ–°ç©å…·ï¼Œä¾‹å¦‚æ–°è½¦ã€ä¸€åŒæ–°é‹ã€æˆ–ä»»ä½•ä½ è§‰å¾—å€¼å¾—æœ‰è¶£çš„ä¸œè¥¿ã€‚ç„¶åï¼Œä¸è¦æŠŠæ•²ä»£ç å½“æˆå·¥ä½œï¼Œå°†æ•²ä»£ç è§†ä½œä½ æ­£åœ¨ç©æ¸¸æˆã€‚ä½ æ­£åœ¨ä½¿ç”¨åˆšå­¦çš„æŠ€èƒ½åšä¸€äº›å¾ˆé…·çš„äº‹æƒ…ã€‚ç»™è‡ªå·±æƒŠå–œï¼ŒæŠŠæˆæœå±•ç¤ºç»™ä½ çš„æœ‹å‹ã€‚ å¸¦ç€æ¸¸æˆçš„æ€ç»´æ¨¡å¼ä½ å°†å­¦å¾—æ›´å¿«ï¼Œå°†è®°å¿†çš„æ›´ç‰¢ï¼ŒåŒæ—¶ä½ å°†ä½“ä¼šåˆ°æ›´å¤šä¹è¶£ã€‚ 4ã€ä½¿ç”¨FacebookæŠ€å·§ä¸ºç¼–ç¨‹è…¾æ—¶é—´ äººä»¬é‡åˆ°çš„ä¸€ä¸ªæ™®éé—®é¢˜æ˜¯ï¼Œä»–ä»¬é€šå¸¸æ‰¾ä¸åˆ°æ—¶é—´å»æ•²ä»£ç ã€‚é€šå¸¸ï¼Œè¿™äº›äººä¼šèŠ±å¥½å‡ ä¸ªå°æ—¶æµè§ˆä¾‹å¦‚Facebookã€YouTubeã€Wikipediaæˆ–è€…Redditè¿™æ ·çš„ç½‘ç«™ã€‚æ— è®ºä½ æ˜¯å¦ç¬¦åˆä¸Šè¿°æè¿°ï¼Œæˆ‘ä»¬éƒ½èƒ½ä»ä¸­å­¦åˆ°ä¸€äº›ä¸œè¥¿ã€‚ æˆ‘å½“ç„¶æœ‰æ—¶é—´åªæµè§ˆFacebookä¸€ä¼šå„¿ï¼Œä½†é€šå¸¸æˆ‘ä¼šåœ¨ä¸Šé¢å¾…å¥½å‡ ä¸ªå°æ—¶æµè§ˆå¾€è¿”ã€‚è¿™æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿæˆ‘è®¤ä¸ºåŸå› åœ¨äºï¼Œåˆšå¼€å§‹æˆ‘å¹¶æ²¡æ‰“ç®—èŠ±åœ¨è¿™ä¸Šé¢èŠ±è´¹é‚£ä¹ˆå¤šæ—¶é—´ã€‚å¼€å§‹è¡ŒåŠ¨æ˜¯åšä¸€ä»¶äº‹æƒ…æœ€å›°éš¾çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥å°†ç›®æ ‡è®¾å®šçš„è¶³å¤Ÿå°èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è¿›å…¥çŠ¶æ€ã€‚å¦‚æœæœ‰äººé—®æˆ‘æ˜¯ä¸æ˜¯æ‰“ç®—èŠ±å‡ ä¸ªå°æ—¶æµè§ˆFacebookï¼Œæˆ‘ä¼šå›ç­”ä¸ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰æ—¶é—´ã€‚ç„¶è€Œï¼Œå¯¹äºä»…ä»…å°è¯•ä¸€ä¸‹æˆ‘æ˜¯èƒ½å¤Ÿæ¥å—çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘èƒ½å¤Ÿæ²‰æµ¸å…¶ä¸­çš„æ–¹æ³•ã€‚ å¥½æ¶ˆæ¯æ˜¯ï¼Œä½ èƒ½å¤Ÿå¯¹æ•²ä»£ç è¿ç”¨åŒæ ·çš„å¿ƒç†æŠ€å·§ã€‚ ä¸è¦è®¡åˆ’èŠ±å‡ ä¸ªå°æ—¶æ•²ä»£ç ï¼Œå› ä¸ºä½ ä¼šå‘ç°è‡ªå·±æ²¡æœ‰æ—¶é—´ã€‚ ç›¸åçš„ï¼Œå‘Šè¯‰è‡ªå·±åªæ•²ä¸‰åˆ†é’Ÿä»£ç ã€‚è¿™æ ·ä½ å°±ä¸éœ€è¦ä¸ºå¯»æ‰¾æ•²ä»£ç çš„æ—¶é—´çƒ¦å¿ƒã€‚ 5ã€æ€è€ƒçš„æ›´æ…¢ä½ å°†å­¦å¾—æ›´å¿« è¿™ä¸€æ¡å¬èµ·æ¥è¿åç›´è§‰ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘å°†ç”¨ä¸€ä¸ªæ•…äº‹æ¥è§£é‡Šã€‚ æˆ‘çš„ä¸€ä¸ªæœ‹å‹åˆä¸€æ¬¡å¯¹JavaScriptçš„ä¸€ä¸ªç‰¹æ€§æ„Ÿåˆ°å›°æƒ‘ã€‚æˆ‘è®©ä»–å°†ä»–çŸ¥é“çš„è§£é‡Šç»™æˆ‘å¬ï¼Œç„¶åå‘Šè¯‰æˆ‘å“ªå„¿è®©ä»–å›°æƒ‘ã€‚å½“å®ƒå‘æˆ‘è§£é‡Šä»£ç ï¼Œæˆ‘å‘ç°ä»–åœ¨è·³æ­¥ã€‚ â€œç­‰ä¼šå„¿ï¼â€æˆ‘è¯´é“ã€‚â€œæ…¢æ…¢æ¥ï¼Œç„¶åå°†è¿™äº›ä¸€æ­¥æ­¥è§£é‡Šç»™æˆ‘å¬ã€‚â€ æˆ‘çš„æœ‹å‹ç›´æ¥å°†æ•´ä¸ªä»£ç çš„åŠŸèƒ½æ€»ç»“ç»™æˆ‘å¬ã€‚ æˆ‘å†æ¬¡è®©ä»–æš‚åœã€‚â€œä½ è¿˜æ˜¯åœ¨è·³æ­¥ã€‚å†è§£é‡Šä¸€æ¬¡ï¼Œè¿™æ¬¡æˆ‘éœ€è¦ä½ ä¸€æ­¥æ­¥å°†æ¯ä¸€è¡Œä»£ç å‘ç”Ÿäº†ä»€ä¹ˆè§£é‡Šç»™æˆ‘å¬ã€‚â€ è¿™ä¸€æ¬¡ï¼Œæˆ‘çš„æœ‹å‹èƒ½å¤Ÿæ›´å¥½çš„è§£é‡Šä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚å…³é”®åœ¨äºä»–èŠ±æ—¶é—´å»ç†è§£æ¯ä¸€è¡Œä»£ç è€Œä¸æ˜¯è¯•å›¾ä¸€ä¸‹ç†è§£æ‰€æœ‰ã€‚ åœ¨ä¸Šè¿°è¿™ç§æ¡ˆä¾‹ä¸­ï¼Œæ€è€ƒçš„æ›´æ…¢å®é™…ä¸Šè®©ä½ å­¦å¾—æ›´å¿«ã€‚ 6ã€åœ¨å†™å¤æ‚ä»£ç å‰å…ˆç”¨ç®€å•è¯­è¨€å†™ä¸‹ å¦‚æœä½ è¦å†™çš„ä»£ç æ˜¯å¤æ‚å¹¶ä¸”ä¸å¸¸è§çš„ï¼Œå…ˆç”¨ç®€å•è¯­è¨€å°†ä»£ç å†™ä¸‹ã€‚è¿™æ ·ï¼Œä½ èƒ½å¤Ÿä½ èƒ½å¤Ÿåœ¨çœŸæ­£å†™ä¹‹å‰çŸ¥é“è‡ªå·±è¦åšä»€ä¹ˆã€‚ä¸‹é¢æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„ä¸¤ä¸ªå¥½å¤„ï¼š ä½ å°†æ›´å®¹æ˜“æ›´å¿«é€Ÿçš„å†™ä»£ç ï¼Œå› ä¸ºä½ ä¸éœ€è¦æ—¶åˆ»åœä¸‹æ¥æ€è€ƒè‡ªå·±å°†è¦æ€ä¹ˆåšã€‚ ç”±äºä½ çŸ¥é“ä»£ç è¦å¹²ä»€ä¹ˆï¼Œèƒ½å¤Ÿæ›´å¥½çš„æ’é™¤é”™è¯¯ã€‚ æ€»ç»“ æˆ‘ä»¬å·²ç»è®²äº†å¥½å‡ ä¸ªæ›´å¿«é€Ÿå­¦ä¹ JavaScriptçš„æ–¹æ³•ï¼Œä½†æ˜¯ä½ ä¹Ÿèƒ½å°†ä¸Šè¿°æ–¹æ³•è¿ç”¨äºå­¦ä¹ å…¶ä»–ä¸œè¥¿ã€‚ä¸‹é¢æ˜¯ä¸Šè¿°æ–¹æ³•çš„æ¦‚æ‹¬ï¼š 1234567ï¼ˆ1ï¼‰ã€ä¸è¦å†æƒ³å°†è¦å­¦ä»€ä¹ˆï¼Œæ²‰æµ¸äºç°åœ¨ï¼›ï¼ˆ2ï¼‰ã€é€šè¿‡æŠŠæ–°æŠ€èƒ½å½“åšç©å…·ä½¿å¾—ç»ƒä¹ æ›´æœ‰è¶£ï¼›ï¼ˆ3ï¼‰ã€å°±åƒæµè§ˆFacebookã€YouTubeä¹‹ç±»çš„ç½‘ç«™ä¸€æ ·ï¼Œåœ¨æ•²ä»£ç å‰å‘Šè¯‰è‡ªå·±åªæ•²å‡ åˆ†é’Ÿï¼Œè¿™æ ·ä½ å°±æ‹¥æœ‰äº†æ•²ä»£ç çš„æ—¶é—´ï¼›ï¼ˆ4ï¼‰ã€æ…¢ä¸‹æ¥ï¼Œå°æ­¥å‘å‰ï¼Œä½ å°†å­¦å¾—æ›´å¿«ã€‚ æœ¬æ–‡è½¬è½½è‡ªï¼šä¼—æˆç¿»è¯‘ è¯‘è€…ï¼šRyan é“¾æ¥ï¼šhttp://www.zcfy.cc/article/436","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"ä»é›¶åˆ¶ä½œedmé‚®ä»¶ï¼Œéœ€è¦äº†è§£çš„ä¸€äº›è§„åˆ™","slug":"edm-01","date":"2018-09-19T02:12:00.000Z","updated":"2019-12-03T10:15:30.082Z","comments":true,"path":"2018/09/19/edm-01/","link":"","permalink":"https://www.yangtao.site/2018/09/19/edm-01/","excerpt":"å› ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯é¢„è§ˆçª—å£é€šå¸¸åªæ˜¯ä¸€å°éƒ¨åˆ†å±å¹•å®½åº¦ï¼Œä½ æœ€å¥½ä¸Šä½ çš„ç”µå­é‚®ä»¶çš„å®½åº¦è®¾è®¡åœ¨å¤§çº¦600pxã€‚æ²¡æœ‰äººå–œæ¬¢æ°´å¹³æ»šåŠ¨æ¡","text":"å› ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯é¢„è§ˆçª—å£é€šå¸¸åªæ˜¯ä¸€å°éƒ¨åˆ†å±å¹•å®½åº¦ï¼Œä½ æœ€å¥½ä¸Šä½ çš„ç”µå­é‚®ä»¶çš„å®½åº¦è®¾è®¡åœ¨å¤§çº¦600pxã€‚æ²¡æœ‰äººå–œæ¬¢æ°´å¹³æ»šåŠ¨æ¡ ä¸€ã€åˆè§table &lt;table&gt; æ ‡ç­¾å®šä¹‰ HTML è¡¨æ ¼ ç®€å•çš„ HTML è¡¨æ ¼ç”± table å…ƒç´ ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª trã€th æˆ– td å…ƒç´ ç»„æˆ tr(table row) å…ƒç´ å®šä¹‰è¡¨æ ¼è¡Œï¼Œth(table head) å…ƒç´ å®šä¹‰è¡¨å¤´ï¼Œtd(table data) å…ƒç´ å®šä¹‰è¡¨æ ¼å•å…ƒ æ›´å¤æ‚çš„ HTML è¡¨æ ¼ä¹Ÿå¯èƒ½åŒ…æ‹¬ captionã€colã€colgroupã€theadã€tfoot ä»¥åŠ tbody å…ƒç´  HTML table æ ‡ç­¾ tableå±æ€§ border â€” è§„å®šè¡¨æ ¼è¾¹æ¡†çš„å®½åº¦ align â€” è§„å®šè¡¨æ ¼ç›¸å¯¹å‘¨å›´å…ƒç´ çš„å¯¹é½æ–¹å¼ (left,center,right) valign â€” å‚ç›´ï¼Œé»˜è®¤æ˜¯valign=&quot;middle&quot;ï¼Œä½†æ˜¯ä¼šä¿®æ”¹ä¸ºvalign=&quot;top&quot; cellspacing â€” è§„å®šå•å…ƒæ ¼ä¹‹é—´çš„ç©ºé—´ cellpadding â€” è§„å®šå•å…ƒè¾¹æ²¿ä¸å…¶å†…å®¹ä¹‹é—´çš„ç©ºç™½ width â€” è§„å®šè¡¨æ ¼çš„å®½åº¦ height â€” è§„å®šè¡¨æ ¼çš„é«˜åº¦ background â€” èƒŒæ™¯å›¾åƒ bgcolor â€” èƒŒæ™¯é¢œè‰² 1234567&lt;table border=\"1\" width=\"600\" align=\"center\" bgcolor=\"#cccccc\" cellspacing=\"10\" cellpadding=\"20\"&gt;&lt;tr&gt; &lt;td&gt;è¯­æ–‡&lt;/td&gt; &lt;td&gt;æ•°å­¦&lt;/td&gt; &lt;td&gt;è‹±è¯­&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; style widthã€height font-family font-size font-weight color line-height border background-color background-image vertical-align æ ‡ç­¾è¡Œå†…å…ƒç´  &lt;a href=&quot;http://www.eefocus.com&quot; target=&quot;_blank&quot;&gt; &lt;img src=&quot;http://baidu.com/hao123.png&quot; alt=&quot;hao123å›¾ç‰‡&quot;&gt; &lt;span&gt;æˆ‘ä¹Ÿå¯ä»¥æ˜¯ä¸€æ®µè¯ï¼Œåªæ˜¯æ²¡æ³•è‡ªä¸»è®¾ç½®å®½åº¦è€Œå·²&lt;/span&gt; å—çº§å…ƒç´  &lt;p&gt;æˆ‘æ˜¯ä¸€æ®µè¯...&lt;/p&gt; äºŒã€äº†è§£åŸºæœ¬æ ¼å¼Area-1 HTML ç¼–ç æ ¼å¼ï¼šutf-8 é¡µé¢å°½é‡ä¿æŒå®½ï¼ˆ600px~800pxï¼‰ã€é«˜ï¼ˆ1024pxï¼‰ï¼Œæ•´ä½“é‚®ä»¶ä¸è¦å¤ªå¤§ï¼Œæ¯”å¦‚15kï¼ˆå„ä¸ªé‚®ç®±ä¸åŒï¼‰å·¦å³ï¼Œä¸ç„¶å¾ˆå®¹æ˜“èµ°åƒåœ¾é‚®ç®± æ ·å¼ä½¿ç”¨è¡Œé—´æ ·å¼ï¼Œå¦‚ï¼š&lt;td style=&quot;font-family:Arial, Helvetica, sans-serif;font-size:12px;color:#000000;&quot; &gt;æ–‡å­—&lt;/td&gt;å…¶ä»–çš„æ–¹å¼ä¼šè¢«æ— è§† Area-2 font-family å±æ€§ä¸èƒ½ä¸ºç©º ä½¿ç”¨&lt;table&gt;å¸ƒå±€ï¼Œå±…ä¸­æ˜¾ç¤ºä½¿ç”¨align=&quot;center ä¸ä½¿ç”¨ table ä»¥å¤–çš„ bodyã€metaå’Œhtmlä¹‹ç±»çš„æ ‡ç­¾ï¼Œéƒ¨åˆ†é‚®ç®±ç³»ç»Ÿä¼šæŠŠè¿™äº›è¿‡æ»¤æ‰ ä¸ä½¿ç”¨ flashã€javaã€javascriptã€framesã€iframeã€activeX ä»¥åŠ dhtml ä¸è¦å‡ºç°onmouseoverã€onmouseoutï¼Œå³ä½¿è®¾å®šäº†ï¼Œä¹Ÿä¼šè¢«è¿‡æ»¤æ‰ Area-3 åŒºåŸŸä¸åŒºåŸŸä¹‹é—´çš„ä¸Šä¸‹ã€å·¦å³ä¹‹é—´çš„ç©ºç™½é—´éš™ï¼Œä½¿ç”¨æ ‡å‡†çš„&lt;td width=15&gt;&amp;nbsp;&lt;/td&gt;æˆ–&lt;td height=&quot;15&quot;&gt;&amp;nbsp;&lt;/td&gt;ï¼Œä¸è¦ä½¿ç”¨padding=&quot;15px&quot; â€” é˜²æ­¢å„ä¸ªé‚®ç®±çš„è§£æä¸åŒ å›¾ç‰‡ å›¾ç‰‡çš„æ¯ä¸ªå±æ€§éƒ½è¦å®šä¹‰å®Œæ•´ï¼Œå¦‚ï¼š&lt;img src=&quot;http://www.eefocus.com/logo.png&quot; style=&quot;vertical-align:top;display:block;&quot; width=&quot;210&quot; height=&quot;100&quot; alt=&quot;logo&quot;/&gt; å®šä¹‰style=&quot;vertical-align:top;&quot; â€” é˜²æ­¢å›¾ç‰‡ä¹‹é—´ä¼šæœ‰ç¼éš™ã€å˜å½¢ç­‰æ˜¾ç¤ºå¼‚å¸¸çš„æƒ…å†µ å®šä¹‰display:block â€” è§£å†³Outlookç”µå­é‚®ä»¶å®¢æˆ·ä¸­å›¾ç‰‡åº•éƒ¨å¢åŠ ç©ºç™½é—´è·çš„é—®é¢˜ é™åˆ¶æ¯å¼ å›¾ç‰‡çš„å¤§å°width=&quot;200 height=&quot;200&quot;æˆ–è€…style=&quot;width:200px;height:200px;&quot; æ·»åŠ æ¯å¼ å›¾ç‰‡altå±æ€§ï¼Œå¦‚ï¼šalt=&quot;æˆ‘æ˜¯å¹²å•¥çš„&quot; â€” é˜²æ­¢å›¾ç‰‡æ— æ³•åŠ è½½ï¼Œä¹Ÿå¯ä»¥çŸ¥æ™“è¿™æ˜¯åšä»€ä¹ˆçš„ å›¾ç‰‡æ ¼å¼ä½¿ç”¨jpgã€pngï¼Œå°½é‡ä¸è¦ä½¿ç”¨gif åœ°å€ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆä»¥http/httpså¼€å¤´çš„ï¼‰ å°½é‡ä¸ä½¿ç”¨èƒŒæ™¯å›¾ç‰‡background-imageï¼ˆOutlookä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼šbgColor=&quot;f3f3f3&quot;ï¼‰ï¼Œç›´æ¥ä½¿ç”¨å›¾ç‰‡&lt;img src=&quot;&quot;&gt; ä¸ºäº†ä¿æŒå„ä¸ªé‚®ç®±çš„ä¸€è‡´æ€§ï¼Œå°½é‡ä½¿ç”¨å›¾ç‰‡ï¼Œå¤§å›¾å¯æ‹†åˆ†æˆå‡ å¼ å°å›¾æ‹¼æ¥ï¼Œæ¯å¼ å›¾ç‰‡ä¸è¦å¤ªå¤§ï¼ˆ15Kä»¥å†…ï¼‰ é“¾æ¥ åœ°å€ç»å¯¹è·¯å¾„ï¼š&lt;a href=&quot;http://www.eefocus.com&quot;&gt;Logo Plus&lt;/a&gt; åœ°å€ä¸å¯è¿‡é•¿ï¼ˆè¶…è¿‡255ä¸ªå­—ç¬¦ï¼‰ï¼Œå°½é‡ç®€çŸ­ æ•°é‡å°½é‡ä¸è¶…è¿‡10ä¸ª åœ°å€ä¸è¦ä½¿ç”¨ç‰¹æ®Šç¬¦å·ï¼Œé¿å…è§£æé”™è¯¯ æ–‡å­—ä¸­å‡ºç°é“¾æ¥åœ°å€ï¼Œè¢«å±è”½çš„é£é™©æ¯”è¾ƒé«˜ï¼Œä¸€èˆ¬æ˜¯æ–‡å­—+é“¾æ¥ã€å›¾ç‰‡+é“¾æ¥ ä¸è¦ä½¿ç”¨åœ°å›¾åŠŸèƒ½é“¾æ¥ï¼Œå¾ˆå®¹æ˜“è¢«åˆ’åˆ†ä¸ºåƒåœ¾é‚®ç®± ä¸ºé¿å…ç”¨æˆ·æ”¶åˆ°çš„é‚®ä»¶å›¾ç‰‡æ— æ³•æµè§ˆï¼Œè¯·åˆ¶ä½œä¸€ä»½å’Œé‚®ä»¶å†…å®¹ä¸€æ ·çš„web é¡µé¢ï¼Œç„¶ååœ¨é‚®ä»¶é¡¶éƒ¨å†™ä¸€å¥è¯ï¼šâ€œå¦‚æœæ‚¨æ— æ³•æŸ¥çœ‹é‚®ä»¶å†…å®¹ï¼Œè¯·ç‚¹å‡»è¿™é‡Œâ€ï¼Œ é“¾æ¥åˆ°æ”¾æœ‰åŒæ ·å†…å®¹çš„webé¡µé¢ Outlooké‚®ç®±è§„åˆ™ å†…æ•›å…ƒç´ çš„paddingæ— æ•ˆã€vertical-alignä¸èƒ½è¢«è¯†åˆ«ï¼Œå¯å®šä¹‰åœ¨td åˆ«æƒ³ç€ç»§æ‰¿çš„äº‹å„¿ï¼ŒæŸä¸€å—çš„æ ·å¼éƒ½å•ç‹¬è®¾ç½®ï¼Œæ¯”å¦‚é“¾æ¥æ ·å¼ï¼Œæ–‡å­—æ ·å¼ç­‰ pæ ‡ç­¾çš„widthä¸èµ·ä½œç”¨ï¼Œå¯å®šä¹‰åœ¨td pæ ‡ç­¾çš„å­—ä½“é¢œè‰²ä¼šè¢«è¦†ç›–ï¼Œå¯å•ç‹¬ä½¿ç”¨è¯¸å¦‚spanç­‰é‡æ–°è®¾ç½®å­—ä½“é¢œè‰²ï¼Œæˆ–è€…ä½¿ç”¨styleå®šä¹‰åœ¨td å½“è®¾ç½® &lt;img align=&quot;left&quot; /&gt; æˆ– &lt;img align=&quot;right&quot; /&gt;æ—¶ï¼Œå›¾ç‰‡ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œåœ¨å…¶çˆ¶å…ƒç´ è®¾ç½®äº† margin æˆ– padding çš„è¯ï¼Œéƒ½æ— æ³•ä½¿å…¶ä¸‹ç§»ï¼Œå·¦ç§»æˆ–å³ç§» line-heighté»˜è®¤ä¸º1.6 #FFFFFFå…³äºé¢œè‰²å€¼ï¼Œä½¿ç”¨å…­ä½å¹¶ä¸”å¤§å†™ï¼Œä½¿ç”¨ç®€å†™åœ¨outlookä¸‹è¢«å¿½ç•¥ï¼ˆå¾ˆç¥å¥‡ï¼‰ å…³äºé“¾æ¥ï¼Œå¯ä»¥å•ç‹¬è®¾ç½®ï¼š123456789101112131415161718&lt;style&gt; a:link, a:visited &#123; color: white; text-decoration: none; &#125; a:hover, a:active &#123; text-decoration: none; color: white; &#125; a:focus &#123; text-decoration: none; color: white; &#125; &lt;/style&gt; Tips é¿å…ä½¿ç”¨margin paddingç­‰å±æ€§ï¼Œå®šä¹‰å®½é«˜çš„å±æ€§æ”¾åœ¨tdï¼Œå®šä¹‰æ ·å¼æ”¾åœ¨pæˆ–è€…spanç­‰æ ‡ç­¾å†… ä¸€èˆ¬è€Œè¨€ï¼ŒæŒ‡å®šè¡¨æ ¼å•å…ƒæ ¼å®½åº¦è¦æ¯”æŒ‡å®šè¡¨æ ¼è‡ªèº«å®½åº¦è¦å¥½ ä½¿ç”¨bgcoloræ¥æ›¿æ‰¾style=â€background:â€,åœ¨ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä¸­HTMLå±æ€§è¦æ¯”CSSæ ·å¼æ›´å¥½ï¼Œä½†æ˜¯ä¼˜å…ˆç­‰çº§ä¾æ—§æ˜¯ï¼šcssæ ·å¼&gt;htmlå±æ€§ æ–°æµªé‚®ç®±ä¼šå¿½ç•¥æ‰cellpaddingï¼Œä¸€èˆ¬è®¾ç½®ä¸º0ä¸‰ã€æ‚Ÿé“é‚®ä»¶è®¾è®¡ ç”µå­é‚®ä»¶çš„è®¾è®¡è¿‡ç¨‹æ˜¯éå¸¸çº ç»“çš„ï¼Œä¸ºäº†ç¾è¿˜å¾—è€ƒè™‘åˆ¶ä½œè¿‡ç¨‹çš„ç…ç†¬ä¿æŒç®€å• å½“è®¾è®¡ä¸€ä¸ªHTMLç”µå­é‚®ä»¶æ—¶ï¼Œè¯·è®°ä½ä¿æŒç®€å•ï¼Œç¼–ç çš„æ—¶å€™è€ƒè™‘åšæŒä¸¤åˆ—å¸ƒå±€ï¼Œè¿™æ ·èƒ½ä¸ºæ‚¨çœå»å¾ˆå¤šéº»çƒ¦çš„äº‹æƒ…å‡å°‘å›¾åƒçš„ä½¿ç”¨ç”šè‡³é¿å…ä½¿ç”¨ è®°ä½ä½ çš„è®¾è®¡ä¸èƒ½å¤ªèŠ±å“¨ï¼Œå› ä¸ºOutlookä¸æ”¯æŒèƒŒæ™¯å›¾åƒçª„å±æœ€å¥½ å› ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯é¢„è§ˆçª—å£é€šå¸¸åªæ˜¯ä¸€å°éƒ¨åˆ†å±å¹•å®½åº¦ï¼Œä½ æœ€å¥½ä¸Šä½ çš„ç”µå­é‚®ä»¶çš„å®½åº¦è®¾è®¡åœ¨å¤§çº¦600pxã€‚æ²¡æœ‰äººå–œæ¬¢æ°´å¹³æ»šåŠ¨æ¡ä¿æŒä¸€è‡´ è®°ä½ï¼Œæˆ‘ä»¬ä½¿ç”¨å›ºå®šçš„å…ƒç´ å±æ€§cellpaddingå’Œcellspacingè®¾ç½®å•å…ƒæ ¼çš„è¾¹è·å’Œå•å…ƒæ ¼çš„é—´è·ã€‚è¿™æ ·ä¿æŒå…ƒç´ ä¹‹é—´çš„é—´è·ä¸€è‡´æ€§æ˜¯æ­£ç¡®çš„ä¸è°¨æ…çš„ èŠ‚é€‰è‡ªï¼šå¼€å§‹åˆ¶ä½œHTML Email ä¹‹é‚®ä»¶è®¾è®¡ é‚®ä»¶åˆ¶ä½œ ç”µå­é‚®ä»¶çš„åˆ¶ä½œè¿‡ç¨‹æ˜¯éå¸¸ç…ç†¬çš„ï¼Œä¸€ä¸å°å¿ƒå°±ä¹±äº†ã€ä¹±äº†ã€‚é‚®ä»¶æµ‹è¯• ç”µå­é‚®ä»¶çš„æµ‹è¯•è¿‡ç¨‹æ˜¯éå¸¸ç—›è‹¦çš„ï¼Œä¹Ÿæ˜¯æœ€è®©äººå¥”æºƒçš„ï¼Œå› ä¸ºä½ å¾ˆæœ‰å¯èƒ½æ‹†äº†è¥¿å¢™è¡¥ä¸œå¢™ æœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•é‚®ä»¶ï¼šæ•ˆæœå›¾","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"EDM","slug":"EDM","permalink":"https://www.yangtao.site/tags/EDM/"}]},{"title":"Mac ç»ˆç«¯ç®€æ˜“å­¦ä¹ æ€»ç»“","slug":"macos-bash","date":"2018-08-13T01:07:38.000Z","updated":"2019-11-11T07:05:39.901Z","comments":true,"path":"2018/08/13/macos-bash/","link":"","permalink":"https://www.yangtao.site/2018/08/13/macos-bash/","excerpt":"ä¸€ã€ç›®å½•åŸºæœ¬æ“ä½œ1. pwd â€” è·å–å½“å‰æ‰€åœ¨è·¯å¾„123yangtaodeMacBook-Pro:test yangtao$ pwd/Users/yangtao/Desktop/æ–‡ä»¶åˆ›å»º/test","text":"ä¸€ã€ç›®å½•åŸºæœ¬æ“ä½œ1. pwd â€” è·å–å½“å‰æ‰€åœ¨è·¯å¾„123yangtaodeMacBook-Pro:test yangtao$ pwd/Users/yangtao/Desktop/æ–‡ä»¶åˆ›å»º/test 2. ls â€” åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ ls -l â€” ç”¨é•¿æ ¼å¼åˆ—å‡ºæ¥ ls -a â€” åˆ—å‡ºæ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰ ls -al â€” ä»¥é•¿æ ¼å¼åˆ—å‡ºæ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰ 3. cd â€” ç›®å½•é—´çš„åˆ‡æ¢å¯ä»¥ä½¿ç”¨tabé”®è¡¥å…¨ç›®å½•åç§°ï¼Œå°†æ–‡ä»¶æ‹–å…¥ç»ˆç«¯ï¼Œå¯ä»¥æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„ç›®å½• cd â€” (æ— å‚æ•°)è¿”å› home ç›®å½• cd ~ â€” è¿”å› home ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨cd ~/Musicå¿«é€Ÿåˆ°è¾¾è¯¥ç›®å½•ï¼Œä½¿ç”¨cd ~Guest/è¿›å…¥ Guest ç”¨æˆ·çš„ home ç›®å½• cd - â€” è¿”å›ä¸Šä¸€æ¬¡æ“ä½œçš„ç›®å½•ï¼Œå¯ä¸å½“å‰ç›®å½•è¿›è¡Œåˆ‡æ¢ cd .. â€” è¿”å›ä¸Šä¸€å±‚ç›®å½•ï¼Œ..è¡¨ç¤ºä¸Šä¸€å±‚ç›®å½•ï¼Œè€Œ.è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œå¦‚./Musicï¼Œè¡¨ç¤ºå½“å‰ç›®å½•ä¸‹çš„ Music æ–‡ä»¶ 4. mkdir æ–‡ä»¶å â€” ï¼ˆmake dirï¼‰æ–°å»ºæ–‡ä»¶å¤¹5. rmdir æ–‡ä»¶å â€” ï¼ˆremove dirï¼‰åˆ é™¤æ–‡ä»¶å¤¹å¦‚æœæ–‡ä»¶å¤¹å†…ä¸ä¸ºç©ºï¼Œåˆ™æ— æ³•ç”¨ rmdir åˆ é™¤æ–‡ä»¶å¤¹ 6. rm æ–‡ä»¶å â€” ï¼ˆremove dirï¼‰åˆ é™¤æ–‡ä»¶æ³¨æ„ï¼šç”¨rmåˆ é™¤æ‰çš„æ–‡ä»¶æ˜¯æ— æ³•ä»å›æ”¶ç«™ä¸­æ‰¾å›çš„ï¼è€Œä¸”ä¸èƒ½ä½¿ç”¨ rm æ¥åˆ é™¤æ–‡ä»¶å¤¹ 7. mv åŸæ–‡ä»¶ ç›®æ ‡ç›®å½•/æ–°æ–‡ä»¶å â€” ç§»åŠ¨æŠŠæ–‡ä»¶ä»ä¸€ä¸ªåœ°æ–¹ç§»åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œä½†æ˜¯å½“æ²¡æœ‰ç»™å‡ºå¦å¤–ä¸€ä¸ªç›®å½•æ—¶ï¼Œç§»åŠ¨çš„ç°è±¡å°±æ˜¯ä¸ºå…¶æ›´æ”¹äº†åå­— 8. cp å¸¦ç›®å½•æ–‡ä»¶ ç›®æ ‡ç›®å½• â€” å¤åˆ¶ç²˜è´´9. man å‘½ä»¤ â€” æŸ¥çœ‹ä½¿ç”¨æ‰‹å†Œ10. touch â€” åˆ›å»ºæ–‡ä»¶11. cat â€” æŸ¥çœ‹æ–‡ä»¶å†…å®¹äºŒã€å†å²æ“ä½œ1. å‘ä¸Šï¼ˆå‘ä¸‹ï¼‰ç®­å¤´æŸ¥çœ‹ä¸Šä¸€ä¸ªï¼ˆä¸‹ä¸€ä¸ªï¼‰å‘½ä»¤ï¼Œå¯ä»¥ä¸€ç›´å‘å‰æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡çš„å‘½ä»¤ 2. !l â€” æ‰¾å‡ºä¸ä½ æœ€è¿‘ä¸€æ¬¡çš„ l å¼€å¤´çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œ3. history â€” æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡å‘½ä»¤çš„å†å²è®°å½•ä¸‰ã€è¿›ç¨‹ç®¡ç†æ“ä½œ1. ps â€” æŸ¥çœ‹å½“å‰ç»ˆç«¯è¿è¡Œçš„ç¨‹åº1234yangtaodeMacBook-Pro:test yangtao$ ps PID TTY TIME CMD19083 ttys000 0:00.40 -bash 2. ps ax â€”åˆ—å‡ºè¿™å°ç”µè„‘æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰ç¨‹åº12345620008 ?? S 0:00.12 /System/Library/Frameworks/QuickLook.framework/Resources/quicklookd.app/Contents/MacOS/quicklookd19082 s000 Ss 0:00.02 login -pf yangtao19083 s000 S 0:00.40 -bash20079 s000 R+ 0:00.00 ps axyangtaodeMacBook-Pro:test yangtao$ 3. top â€” æ˜¾ç¤ºè¿™å°è®¡ç®—æœºä¸Šæœ‰å“ªäº›è¿›ç¨‹ï¼Œæ˜¾ç¤ºå†…å­˜ã€CPUã€è´Ÿè½½ç­‰1234PID COMMAND %CPU TIME #TH #WQ #PORT MEM PURG CMPRS PGRP PPID STATE BOOSTS %CPU_ME %CPU_OTHRS UID FAULTS COW20088 top 4.1 00:00.99 1/1 0 23 6724K 0B 0B 20088 19083 running *0[1] 0.00000 0.00000 0 7185+ 10520087 AGSService 0.0 00:00.03 2 1 36 1716K 0B 0B 20087 1 sleeping *0[1] 0.00000 0.00000 0 3076 4. kill [PID] â€” ç»“æŸæŒ‡å®šè¿›ç¨‹ ID çš„è¿›ç¨‹å…·ä½“åšæ³•ï¼š å…ˆä½¿ç”¨ top å‘½ä»¤æŸ¥çœ‹æƒ³è¦ç»“æŸè¿›ç¨‹çš„ PIDï¼Œç„¶åä½¿ç”¨å‘½ä»¤kill [PID] Tipsï¼š å¦‚æœé‡åˆ°æ— æ³•æ€æ‰çš„è¿›ç¨‹ï¼Œè¾“å…¥å‘½ä»¤sudo kill -9 [PID] (ä¼ªè£…è¶…çº§ç®¡ç†å‘˜ï¼Œå¼ºè¿«æ€æ‰è¯¥è¿›ç¨‹)ï¼Œæ¥ç€è¾“å…¥è‡ªå·±ç”¨æˆ·çš„å¯†ç ï¼ˆå‰ææ˜¯è‡ªå·±è¿™ä¸ªç”¨æˆ·å…·æœ‰ sudo çš„èµ„æ ¼ï¼‰ å››ã€ä¸‡èƒ½çš„ grep æ“ä½œ1. grep 800 log.txt â€” ä» log.txt ä¸­æ‰¾å‡º 800 ä½ç½®çš„æ•°æ®2. grep -n 800 log.txt â€” ä» log.txt ä¸­æ‰¾å‡º 800 ä½ç½®çš„æ•°æ®,å¹¶åœ¨å‰é¢åŠ ä¸Šè¡Œå·3. grep (-n) Hello * (æ˜¯å¦åŠ ä¸Šè¡Œå·) â€” ä»å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ‰¾å‡ºå‡ºç°è¿‡ Hello çš„æ–‡ä»¶4. ls /usr/bin | grep ls â€” æŸ¥çœ‹/usr/bin ç›®å½•ä¸‹é¢å¸¦ ls çš„ç›®å½•5. ls /usr/bin | grep ls | wc â€” è®¡ç®—å‡ºå•è¯çš„æ•°é‡1234yangtaodeMacBook-Pro:test yangtao$ ls /usr/bin | grep ls | wc 16 16 124# 16è¡Œ 16ä¸ªå•è¯ 124ä¸ªå­—ç¬¦ äº”ã€ç¯å¢ƒå˜é‡æ“ä½œ1. set | grep PATH â€” æŸ¥çœ‹ç¯å¢ƒå˜é‡123yangtaodeMacBook-Pro:~ yangtao$ set | grep PATHPATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin 2. set | grep PATH â€” å°†å…¶ä»–æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆæœ¬æœºç”¨æˆ·ä¸‹é¢çš„ bin ç›®å½•ï¼‰æ·»åŠ åˆ° PATHè¿™æ ·åšåªæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å½“å‰ç»ˆç«¯ï¼Œæ˜¯å¯ä»¥ç›´æ¥ç”Ÿæ•ˆçš„ï¼Œä½†æ˜¯å½“ä½ å…³é—­åï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ä¸è¢«ä¿å­˜çš„ã€‚ åœ¨/etc/profileè¿™ä¸ªæ–‡ä»¶æ˜¯ä»»ä½•äººæ‰“å¼€ç»ˆç«¯éƒ½ä¼šæ‰§è¡Œçš„ï¼Œæ˜¯ç³»ç»Ÿçº§çš„ profileã€‚ å¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰è‡ªå·±çš„ profileï¼Œå¯ä»¥åœ¨è‡ªå·±çš„å®¶ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å‘½åä¸ºï¼š.profileï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šåœ¨ä½ æ‰“å¼€ç»ˆç«¯æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚ æˆ‘ä»¬å°†åˆšåˆšçš„å‘½ä»¤ 2 è¾“å…¥å…¶ä¸­ï¼Œç„¶åä¿å­˜é€€å‡ºï¼ˆvim ä¸‹ä½¿ç”¨:wqï¼‰è¿™æ ·çš„è¯ï¼Œåœ¨æˆ‘ä»¬åˆšåˆšå·²ç»ç™»å½•çš„ç»ˆç«¯é‡Œé¢å®ƒè¿˜æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œå‡å¦‚ä½ å¸Œæœ›å®ƒå¯ä»¥ç«‹åˆ»ç”Ÿæ•ˆï¼Œä½ å¯ä»¥ä½¿ç”¨sourceå‘½ä»¤ã€‚ 3. source â€” ä¾‹å¦‚ï¼šsource .profileä½¿ Shell è¯»å…¥æŒ‡å®šçš„ Shell ç¨‹åºæ–‡ä»¶å¹¶ä¾æ¬¡æ‰§è¡Œæ–‡ä»¶ä¸­çš„æ‰€æœ‰è¯­å¥ï¼Œé€šå¸¸ç”¨äºé‡æ–°æ‰§è¡Œåˆšä¿®æ”¹çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸å¿…æ³¨é”€å¹¶é‡æ–°ç™»å½• å…­ã€ç½‘ç»œé…ç½®æ“ä½œ1. ifconfig â€” åˆ—å‡ºæœ¬æœºæ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡ä»¥åŠå…¶ä¸Šé¢çš„é…ç½®ï¼Œä¸»è¦æŒ‡çš„æ˜¯ ip åœ°å€å’Œ mac åœ°å€æˆ‘çš„è¿çš„æ˜¯ en5ï¼Œå®ƒçš„çŠ¶æ€æ—¶ activeï¼ˆæœ€åä¸€è¡Œï¼‰ï¼ŒåŸæ–‡æ˜¯ en4 1234567en5: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500 ether ac:de:48:00:11:22 inet6 fe80::aede:48ff:fe00:1122%en5 prefixlen 64 scopeid 0x7 nd6 options=201&lt;PERFORMNUD,DAD&gt; media: autoselect status: active å…¶ä»–ç”¨æ³•ï¼š ifconfig en4 down/up â€” å…³é—­ï¼ˆæˆ–æ‰“å¼€ï¼‰æŸä¸ªç½‘ç»œæ¥å£ï¼Œæ¯”å¦‚ en4,ä¸€èˆ¬éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥éœ€è¦åœ¨å‰é¢åŠ  sudo å‘½ä»¤ sudo ifconfig en4 add 10.10.10.12 netmask 255.255.255.0 â€” ç»™ en4 åŠ å…¥åˆ«çš„ç½‘æ®µ sudo ifconfig en4 delete 10.10.10.12 â€” ç»™ en4 åˆ é™¤æŒ‡å®šç½‘æ®µ 12345678# ä¸´æ—¶ä¿®æ”¹MACåœ°å€ifconfig en0 down // å…³é—­ç½‘å¡è®¾å¤‡ï¼ˆè¿™é‡Œå‡è®¾æ˜¯en0ï¼‰ifconfig en0 hw ether [MACåœ°å€] // ä¿®æ”¹MACåœ°å€ifconfig en0 up // é‡å¯ç½‘å¡# ä¸´æ—¶ä¿®æ”¹å†…ç½‘ipåœ°å€ifconfig en0 downifconfig en0 192.168.169.245 netmask 255.255.255.0 2. ping â€” æ£€æµ‹ç½‘ç»œæ˜¯å¦æ˜¯è¿é€šçŠ¶æ€3. netstat â€” æ˜¾ç¤ºå„ç§ç½‘ç»œç›¸å…³ä¿¡æ¯å…¶ä»–ç”¨æ³•ï¼š netstat -l â€” åˆ—å‡ºæœ¬æœºè¿›è¡Œç›‘å¬çš„ç«¯å£ netstat -lt â€” åªåˆ—å‡º tcp çš„è¿æ¥ï¼ŒåŒç†åœ¨ l åé¢è·Ÿä¸Š u çš„è¯ï¼Œå°†ä¼šåˆ—å‡ºå„ç§ udp çš„ç›‘å¬ç«¯å£ netstat -s â€” æŸ¥çœ‹ç»Ÿè®¡æ•°æ® netstat -p â€” åˆ—å‡ºè¿›ç¨‹ä¿¡æ¯ï¼Œä½ å¯ä»¥äº†è§£æ˜¯å“ªä¸€ä¸ªç¨‹åºåœ¨å“ªä¸€ä¸ªç«¯å£ä¸Šåšäº›ä»€ä¹ˆäº‹æƒ… netstat -pc â€” ä¼šæ˜¾ç¤ºå‡ºå®æ—¶æ›´æ–°çš„è¿›ç¨‹ä¿¡æ¯ netstat -r â€” æŸ¥çœ‹è·¯ç”±è¡¨ netstat -i â€” æŸ¥çœ‹æ¥å£ä¿¡æ¯ è¯¦æƒ…å‚è€ƒMac ç»ˆç«¯å­¦ä¹ ç³»åˆ—","categories":[{"name":"ç³»ç»Ÿ","slug":"ç³»ç»Ÿ","permalink":"https://www.yangtao.site/categories/ç³»ç»Ÿ/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://www.yangtao.site/tags/MacOS/"},{"name":"ç»ˆç«¯","slug":"ç»ˆç«¯","permalink":"https://www.yangtao.site/tags/ç»ˆç«¯/"}]},{"title":"Gitä¹‹æœ¬åœ°æ‹‰å–Githubä»£ç ã€ä¿®æ”¹è¿œç¨‹URL","slug":"git-revert","date":"2018-08-09T12:11:45.000Z","updated":"2019-11-11T07:45:44.419Z","comments":true,"path":"2018/08/09/git-revert/","link":"","permalink":"https://www.yangtao.site/2018/08/09/git-revert/","excerpt":"","text":"12345Workspaceï¼šå·¥ä½œåŒºIndex / Stageï¼šæš‚å­˜åŒºRepositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰Remoteï¼šè¿œç¨‹ä»“åº“ è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨git åšå®¢æ¨èï¼š å¦‚ä½•ä½¿ç”¨Gitä¸Šä¼ é¡¹ç›®ä»£ç åˆ°github Gitè¿œç¨‹æ“ä½œè¯¦è§£â€”é˜®ä¸€å³° å¸¸ç”¨ Git å‘½ä»¤æ¸…å•â€”é˜®ä¸€å³° æœ¬åœ°æ‹‰å–ä»“åº“ä»£ç  â€” clone1git clone https://github.com/yangtao2o/yangtao2o.github.io.git ä¿®æ”¹è¿œç¨‹URL â€” remote123456git remote -v # æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œä»“åº“åç§°git remote show origin # æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ä»“åº“çŠ¶æ€git remote add origin https://github.com/yangtao2o/yangtao2o.github.io.git # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€git remote set-url origin https://github.com/..io.git # è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€(ç”¨äºä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€)git remote rename &lt;old name&gt; &lt;new name&gt; # ä¿®æ”¹è¿œç¨‹ä¸»æœºçš„åç§°git remote rm &lt;repository&gt; # åˆ é™¤è¿œç¨‹ä»“åº“ ä»£ç å›æ»š å¦‚æœæ˜¯åœ¨workspaceï¼Œæœªgit pushï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¼šæ¸…ç©ºå·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤çš„å†…å®¹ 12git reset --hard HEAD # å…¨éƒ¨æ’¤é”€git checkout -- hello.html # åªæ¢å¤hello.htmlæ–‡ä»¶ å¦‚æœå·²æäº¤ï¼Œä½¿ç”¨git revertï¼Œä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ¥å›æ»šè¦ä½ è¦å›æ»šçš„ä½ç½® 1git revert HEAD å‚è€ƒï¼šGitçš„æ’¤æ¶ˆæ“ä½œ - é‡ç½®, ç­¾å‡º å’Œ æ’¤æ¶ˆ ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›é—®é¢˜ git pullæ—¶fatal:refusing to merge unrelated histories git pull --allow-unrelated-histories originä¸€èˆ¬æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ä»£ç åº“ï¼Œæ‰€ä»¥å¯ä»¥åšä»»ä½•çš„git pull or git pushï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¼•å…¥äº†ä»–äººçš„ä»£ç åº“ï¼Œå°±æˆäº†upstreamï¼Œåªèƒ½git fetchï¼Œé€šè¿‡forkåˆ°è‡ªå·±çš„ä»“åº“é‡Œï¼Œå¦‚åŒorigin å…³äºforkã€originã€upstreamã€cloneä¹‹é—´çš„å…³ç³»åšæ–‡æ¨èï¼š GitHubå…³äºforkã€originã€upstreamã€cloneçš„è—•æ–­ä¸è¿ git submoduleä½¿ç”¨ä»¥åŠæ³¨æ„äº‹é¡¹","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"git","slug":"git","permalink":"https://www.yangtao.site/tags/git/"}]},{"title":"macOSå®‰è£…homebrewæŠ¥é”™ LibreSSL SSL_read SSL_ERROR_SYSCALL errno 54","slug":"macos-brew","date":"2018-08-05T08:55:14.000Z","updated":"2019-03-13T14:05:04.601Z","comments":true,"path":"2018/08/05/macos-brew/","link":"","permalink":"https://www.yangtao.site/2018/08/05/macos-brew/","excerpt":"LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54","text":"LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54 # å®‰è£…12curl \"https://nodejs.org/dist/latest/node-$&#123;VERSION:-$(wget -qO- https://nodejs.org/dist/latest/ | sed -nE 's|.*&gt;node-(.*)\\.pkg&lt;/a&gt;.*|\\1|p')&#125;.pkg\" &gt; \"$HOME/Downloads/node-latest.pkg\" &amp;&amp; sudo installer -store -pkg \"$HOME/Downloads/node-latest.pkg\" -target \"/\" # æŠ¥é”™123456==&gt; Tapping homebrew/coreCloning into '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core'...fatal: unable to access 'https://github.com/Homebrew/homebrew-core/': LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54Error: Failure while executing; `git clone https://github.com/Homebrew/homebrew-core /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1` exited with 128.Error: Failure while executing; `/usr/local/bin/brew tap homebrew/core` exited with 1. # è§£å†³ï¼š æ‰§è¡Œä¸‹é¢è¿™å¥å‘½ä»¤ï¼Œæ›´æ¢ä¸ºä¸­ç§‘é™¢çš„é•œåƒï¼š 12git clone git://mirrors.ustc.edu.cn/homebrew-core.git/ /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1 æŠŠhomebrew-coreçš„é•œåƒåœ°å€ä¹Ÿè®¾ä¸ºä¸­ç§‘é™¢çš„å›½å†…é•œåƒ 12345678cd \"$(brew --repo)\" git remote set-url origin https://mirrors.ustc.edu.cn/brew.gitcd \"$(brew --repo)/Library/Taps/homebrew/homebrew-core\" git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git æ›´æ–° 1brew update ä½¿ç”¨ 1brew install node å‚è€ƒ æŠ¥é”™è§£å†³ï¼šmacOS High Sierra10.13.3å®‰è£…homebrewæŠ¥é”™LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54è§£å†³æ–¹æ³• Macå®‰è£…ï¼Œç®€å•å®ç”¨ï¼Œå¸è½½homebrewè¯¦ç»†æ•™ç¨‹","categories":[{"name":"ç³»ç»Ÿ","slug":"ç³»ç»Ÿ","permalink":"https://www.yangtao.site/categories/ç³»ç»Ÿ/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://www.yangtao.site/tags/MacOS/"},{"name":"Homebrew","slug":"Homebrew","permalink":"https://www.yangtao.site/tags/Homebrew/"}]},{"title":"macOSä¸‹nodeç‰ˆæœ¬ç®¡ç†ä¸‹è½½æ–°ç‰ˆæœ¬æ—¶ä¸­æ–­è¿”å›Segmentation fault 11","slug":"macos-node","date":"2018-08-05T08:52:58.000Z","updated":"2019-11-11T07:03:42.714Z","comments":true,"path":"2018/08/05/macos-node/","link":"","permalink":"https://www.yangtao.site/2018/08/05/macos-node/","excerpt":"å‰è®°ï¼šå®‰è£… node çš„æ—¶å€™å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘éœ€è¦æŒ‡å®šæŸä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥å®‰è£…äº† n æ¨¡å—ï¼Œæ¥è¿›è¡Œç‰ˆæœ¬åˆ‡æ¢ï¼Œä½†æ˜¯é€”ä¸­å‘ç”Ÿäº†æŠ¥é”™ï¼šSegmentation faultï¼š11ï¼Œå¯¼è‡´ npm å‘½ä»¤æ— æ³•ä½¿ç”¨ï¼Œç”±äºä½¿ç”¨çš„ macOSï¼Œå¤§å®¶éƒ½æ¨è HomeBrewï¼Œäºæ˜¯è¿æ»šå¸¦çˆ¬åœ°ä»ä¸€ä¸ªå‘è·³åˆ°å¦ä¸€ä¸ªå‘ï¼Œå¥½ç–¼å•Šâ€¦","text":"å‰è®°ï¼šå®‰è£… node çš„æ—¶å€™å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘éœ€è¦æŒ‡å®šæŸä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥å®‰è£…äº† n æ¨¡å—ï¼Œæ¥è¿›è¡Œç‰ˆæœ¬åˆ‡æ¢ï¼Œä½†æ˜¯é€”ä¸­å‘ç”Ÿäº†æŠ¥é”™ï¼šSegmentation faultï¼š11ï¼Œå¯¼è‡´ npm å‘½ä»¤æ— æ³•ä½¿ç”¨ï¼Œç”±äºä½¿ç”¨çš„ macOSï¼Œå¤§å®¶éƒ½æ¨è HomeBrewï¼Œäºæ˜¯è¿æ»šå¸¦çˆ¬åœ°ä»ä¸€ä¸ªå‘è·³åˆ°å¦ä¸€ä¸ªå‘ï¼Œå¥½ç–¼å•Šâ€¦ n æ¨¡å— é¦–å…ˆ n æ¨¡å—ä¸æ”¯æŒ Windowsï¼ï¼ï¼ å®‰è£…ï¼šsudo npm install -g n å‚è€ƒï¼šnode ç‰ˆæœ¬æ›´æ–°çš„ç®€ä¾¿æ–¹æ³•â€”â€”ç¥å¥‡çš„ n æ¨¡å— ç‰ˆæœ¬åˆ‡æ¢ï¼šnï¼Œç„¶åä¸Šä¸‹åˆ‡æ¢ï¼Œåœ†ç‚¹åœ¨å“ªå„¿å°±æ˜¯å“ªä¸ªï¼Œä½†æ˜¯é—®é¢˜ä¸¤ä¸ªæˆ–è€…å¤šä¸ªéƒ½æ˜¯ç°è‰²ï¼Œå³æ²¡æœ‰åœ†ç‚¹ï¼Œæ€ä¹ˆåŠï¼Ÿ è¿™æ—¶ï¼Œåˆ‡å›å»ä½¿ç”¨node -vå°±ä¼šæŠ¥é”™ï¼šSegmentation fault: 11 ï¼Œå½“ç„¶ï¼Œnpm ç›´æ¥npm: command not found è§£å†³ï¼šsudo n 8.1.3 å‚è€ƒï¼šn æ¨¡å—ç®¡ç† node ç‰ˆæœ¬é‡åˆ°çš„é—®é¢˜ ä½†æ˜¯åˆ‡æ¢åˆ° 8.11.3ï¼Œé—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œæ‰€ä»¥åˆ é™¤ï¼šsudo n rm 8.11.3 å¸è½½ npmï¼šsudo npm uninstall npm -gï¼Œç„¶åå» node å®˜ç½‘é‡æ–°ä¸‹è½½8.11.3LTSï¼Œå®‰è£…æˆåŠŸï¼Œä½†æ˜¯ä½¿ç”¨n listï¼Œå¹¶æœªæŸ¥çœ‹åˆ°æ­¤ç‰ˆæœ¬ äºæ˜¯ï¼Œé‡æ–°å†èµ°ä¸€éï¼šsudo n 8.11.3ï¼ŒæˆåŠŸã€‚","categories":[{"name":"ç³»ç»Ÿ","slug":"ç³»ç»Ÿ","permalink":"https://www.yangtao.site/categories/ç³»ç»Ÿ/"}],"tags":[{"name":"MacOS","slug":"MacOS","permalink":"https://www.yangtao.site/tags/MacOS/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://www.yangtao.site/tags/Nodejs/"}]},{"title":"JavaScriptç®—æ³•åˆçº§ç»ƒä¹ ","slug":"js-algo-1","date":"2018-08-01T07:43:10.000Z","updated":"2019-11-13T05:44:15.640Z","comments":true,"path":"2018/08/01/js-algo-1/","link":"","permalink":"https://www.yangtao.site/2018/08/01/js-algo-1/","excerpt":"# éœ€è¦å®šä¹‰ä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ•°12345function ourFunction(ourMin, ourMax) &#123; return Math.floor(Math.random() * (ourMax - ourMin + 1)) + ourMin;&#125;ourFunction(1, 9);","text":"# éœ€è¦å®šä¹‰ä¸€ä¸ªæœ€å°å€¼å’Œä¸€ä¸ªæœ€å¤§å€¼ä¹‹é—´çš„éšæœºæ•°12345function ourFunction(ourMin, ourMax) &#123; return Math.floor(Math.random() * (ourMax - ourMin + 1)) + ourMin;&#125;ourFunction(1, 9); # è®¡ç®—ä¸€ä¸ªæ•´æ•°çš„é˜¶ä¹˜12345678910function factorialize(num) &#123; // è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ if(num &lt;= 1) &#123; return 1; &#125; else &#123; return num *= factorialize(num - 1); &#125;&#125;factorialize(5); # æ¥ä¸€æ®µå›æ–‡ JavaScriptç®—æ³•ç»ƒä¹ ï¼š JavaScriptä¸­å›æ–‡(Palindromes)å¤„ç† 123456789101112131415161718192021222324252627//æ–¹æ³•ä¸€function palindrome(str) &#123; // è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ var re = /[\\W_]/g; var lowRegStr = str.toLowerCase().replace(re, ''); var reveRegStr = lowRegStr.split('').reverse().join(''); return lowRegStr == reveRegStr;&#125;palindrome(\"eye\");//æ–¹æ³•äºŒfunction palindrome(str) &#123; // è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ var re = /[\\W_]/g; var lowRegStr = str.toLowerCase().replace(re, ''); for(var i=0, l=lowRegStr.length; i&lt;l/2; i++) &#123; if(lowRegStr[i] != lowRegStr[l - 1 -i]) &#123; return false; &#125; &#125; return true;&#125;palindrome(\"eye\"); # åœ¨å¥å­ä¸­æ‰¾å‡ºæœ€é•¿çš„å•è¯ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚ js æ•°ç»„æ’åºå’Œç®—æ³•æ’åº 12345678910111213function findLongestWord(str) &#123; var strArr = str = str.split(' '); var newArr = []; for(var i=0;i&lt;strArr.length; i++) &#123; newArr.push(strArr[i].length); &#125; newArr.sort(function(a, b) &#123; return b - a; &#125;); return newArr[0];&#125;findLongestWord(\"What if we try a super-long word such as otorhinolaryngology\"); # ç¡®ä¿å­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯é¦–å­—æ¯éƒ½å¤§å†™ï¼Œå…¶ä½™éƒ¨åˆ†å°å†™ã€‚12345678910111213141516function titleCase(str) &#123; var strArr = str.split(' '); var newStrArr = []; var newStr = ''; for(var i=0; i&lt;strArr.length; i++) &#123; newStr = strArr[i][0].toUpperCase(); newStr += strArr[i].substr(1).toLowerCase(); newStrArr.push(newStr); &#125; newStrArr = newStrArr.join(' '); return newStrArr;&#125;titleCase(\"I'm a little tea pot\"); # æ‰¾å‡ºå¤šä¸ªæ•°ç»„ä¸­çš„æœ€å¤§æ•°12345678910111213function largestOfFour(arr) &#123; var newArr = []; var num = []; for(var i=0; i&lt;arr.length; i++) &#123; num = arr[i].sort(function(a, b) &#123; return b - a; &#125;); newArr.push(num[0]); &#125; return newArr;&#125;largestOfFour([[4, 5, 1, 3], [13, 27, 18, 26], [32, 35, 37, 39], [1000, 1001, 857, 1]]); # åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²(str)æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²(target)ç»“å°¾ã€‚123456789101112function confirmEnding(str, target) &#123; var len = target.length; if(str.substr(-len) == target) &#123; return true; &#125; else &#123; return false; &#125; &#125;confirmEnding(\"He has to give me a new name\", \"name\");confirmEnding(\"Bastian\", \"n\"); # é‡å¤ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸² numæ¬¡ï¼Œå¦‚æœnumæ˜¯ä¸€ä¸ªè´Ÿæ•°åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚12345678910111213141516function repeat(str, num) &#123; // è¯·æŠŠä½ çš„ä»£ç å†™åœ¨è¿™é‡Œ var newArr = []; var newStr = ''; if(num &lt; 0) &#123; newStr = ''; &#125; else &#123; for(var i=0; i&lt;num; i++) &#123; newArr.push(str); &#125; newStr = newArr.join(''); &#125; return newStr;&#125;repeat(\"abc\", 4); # å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿â€¦ å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦æ¯”æŒ‡å®šçš„å‚æ•°numé•¿ï¼Œåˆ™æŠŠå¤šä½™çš„éƒ¨åˆ†ç”¨â€¦æ¥è¡¨ç¤ºã€‚åˆ‡è®°ï¼Œæ’å…¥åˆ°å­—ç¬¦ä¸²å°¾éƒ¨çš„ä¸‰ä¸ªç‚¹å·ä¹Ÿä¼šè®¡å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŒ‡å®šçš„å‚æ•°numå°äºæˆ–ç­‰äº3ï¼Œåˆ™æ·»åŠ çš„ä¸‰ä¸ªç‚¹å·ä¸ä¼šè®¡å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ 12345678910111213function truncate(str, num) &#123; var newStr=''; if(num &gt;= str.length) &#123; newStr = str.slice(0); &#125; else if(num &gt; 3) &#123; newStr = str.slice(0, num-3) + '...'; &#125; else &#123; newStr = str.slice(0, num) + '...'; &#125; return newStr;&#125;truncate(\"A-tisket a-tasket A green and yellow basket\", 11); # æŠŠä¸€ä¸ªæ•°ç»„arræŒ‰ç…§æŒ‡å®šçš„æ•°ç»„å¤§å°sizeåˆ†å‰²æˆè‹¥å¹²ä¸ªæ•°ç»„å—ã€‚ jså°†ä¸€ä½æ•°ç»„åˆ†å‰²æˆæ¯ä¸‰ä¸ªä¸€ç»„ 123456789function chunk(arr, size) &#123; var newArr = []; for(var i=0; i&lt;arr.length; i+=size) &#123; newArr.push(arr.slice(i, i+size)); &#125; return newArr;&#125;chunk([\"a\", \"b\", \"c\", \"d\"], 2); # è¿”å›ä¸€ä¸ªæ•°ç»„è¢«æˆªæ–­nä¸ªå…ƒç´ åè¿˜å‰©ä½™çš„å…ƒç´ ï¼Œæˆªæ–­ä»ç´¢å¼•0å¼€å§‹ã€‚123456function slasher(arr, howMany) &#123; arr.splice(0, howMany); return arr;&#125;slasher([1, 2, 3], 2); # å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ åŒ…å«äº†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„æ‰€æœ‰å­—ç¬¦ï¼Œå‡½æ•°è¿”å›trueã€‚123456789101112function mutation(arr) &#123; var str1 = arr[0].toLowerCase(); var str2 = arr[1].toLowerCase(); for(var i=0; i&lt;str2.length; i++) &#123; if(str1.indexOf(str2[i]) == -1) &#123; return false; &#125; &#125; return true;&#125;mutation([\"hello\", \"hey\"]); # åˆ é™¤æ•°ç»„ä¸­çš„æ‰€æœ‰å‡å€¼ã€‚1234567891011function bouncer(arr) &#123; var newArr = []; newArr = arr.filter(function(val) &#123; if(val !== (undefined &amp;&amp; null &amp;&amp; \"\" &amp;&amp; NaN &amp;&amp; false &amp;&amp; 0)) &#123; return val; &#125; &#125;); return newArr;&#125;bouncer([7, \"ate\", \"\", false, 9]); # æ•°ç»„æ’åºå¹¶æ‰¾å‡ºå…ƒç´ ç´¢å¼•ï¼Œå…ˆç»™æ•°ç»„æ’åºï¼Œç„¶åæ‰¾åˆ°æŒ‡å®šçš„å€¼åœ¨æ•°ç»„çš„ä½ç½®ï¼Œæœ€åè¿”å›ä½ç½®å¯¹åº”çš„ç´¢å¼•ã€‚123456789function where(arr, num) &#123; arr.push(num); arr.sort(function(a, b) &#123; return a-b; &#125;); return arr.indexOf(num);&#125;where([40, 60], 50); # å®ç°ä¸€ä¸ªæ‘§æ¯(destroyer)å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…æ‘§æ¯çš„æ•°ç»„ï¼Œå…¶ä½™çš„å‚æ•°æ˜¯å¾…æ‘§æ¯çš„å€¼ã€‚ FCCâ€“Seek and Destroyï¼ˆæ‘§æ¯æ•°ç»„ï¼‰ Seek and Destroy(ç®—æ³•) 12345678910111213function destroyer(arr) &#123; var newArr = []; var arg = arguments; for(var i=1; i&lt;arg.length; i++) &#123; newArr.push(arg[i]); &#125; arr = arr.filter(function(val) &#123; return newArr.indexOf(val) &lt; 0; &#125;); return arr;&#125;destroyer([1, 2, 3, 1, 2, 3], 2, 3); å‘è¡¨äºæ…•è¯¾ç½‘æ‰‹è®° é¢˜ç›®æ¥è‡ªï¼š FreeCodeCamp BasicAlgorithmScriptingå‚è€ƒèµ„æ–™ï¼š JavaScriptæ ‡å‡†åº“","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"JavaScriptç®—æ³•","slug":"JavaScriptç®—æ³•","permalink":"https://www.yangtao.site/tags/JavaScriptç®—æ³•/"}]},{"title":"GithubæŠ¥é”™fatal unable to access No such file or directory","slug":"github-01","date":"2018-07-30T11:21:43.000Z","updated":"2019-03-13T14:01:42.357Z","comments":true,"path":"2018/07/30/github-01/","link":"","permalink":"https://www.yangtao.site/2018/07/30/github-01/","excerpt":"ä¹‹å‰æœ‰å®‰è£…è¿‡githubæ—§ç‰ˆï¼Œä¸€ç›´æ­£å¸¸ï¼Œåæ¥æ›´æ–°äº†æ–°ç‰ˆï¼Œä½†æ˜¯git pullçš„æ—¶å€™å¦‚æœ‰å¦‚ä¸‹æŠ¥é”™ï¼š","text":"ä¹‹å‰æœ‰å®‰è£…è¿‡githubæ—§ç‰ˆï¼Œä¸€ç›´æ­£å¸¸ï¼Œåæ¥æ›´æ–°äº†æ–°ç‰ˆï¼Œä½†æ˜¯git pullçš„æ—¶å€™å¦‚æœ‰å¦‚ä¸‹æŠ¥é”™ï¼š 1fatal: unable to access 'https://github.com/eefocus/deploy.git/': schannel: failed to open CA file 'C:/Users/Administrator/AppData/Local/GitHubDesktop/app-1.2.3/resources/app/git/mingw64/bin/curl-ca-bundle.crt': No such file or directory æ‰¾åˆ°C:\\ProgramData\\Git\\configï¼Œæ‰“å¼€ï¼Œä¿®æ”¹sslCAinfoï¼ˆè·¯å¾„å¾—çœ‹è‡ªå·±æ–‡ä»¶ç›¸å¯¹åº”çš„ä½ç½®ï¼‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021[core] symlinks = true autocrlf = true fscache = true[color] diff = auto status = auto branch = auto interactive = true[pack][help] format = html[https] sslCAinfo = C:/Users/Administrator/AppData/Local/GitHubDesktop/app-1.2.6/resources/app/git/mingw64/ssl/certs/curl-ca-bundle.crt[sendemail] smtpserver = /bin/msmtp.exe[diff &quot;astextplain&quot;] textconv = astextplain[rebase] autosquash = true é‡ç‚¹æç¤ºï¼šé»˜è®¤çš„æ˜¯[http]ï¼Œå¦‚æœæœ‰å¿…è¦ä½ éœ€è¦æ”¹æˆ[https] å¦‚æœæ‰¾ä¸åˆ°C:\\ProgramDataæ–‡ä»¶ï¼ˆæˆ‘çš„æ˜¯win10ï¼‰ï¼Œåœ¨æŸ¥çœ‹ä¸‹å°†éšè—çš„é¡¹ç›®æ‰“ä¸ªå‹¾ å‚è€ƒï¼šGitHub DesktopæŠ¥é”™fatal: unable to access â€˜https://github.comâ€¦â€¦: schannel: failed to open CA file â€˜C:/Usersâ€¦â€¦bundle.crtâ€™: No such file or directoryçš„è§£å†³åŠæ³•","categories":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/categories/å¼€å‘å·¥å…·/"}],"tags":[{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://www.yangtao.site/tags/å¼€å‘å·¥å…·/"},{"name":"github","slug":"github","permalink":"https://www.yangtao.site/tags/github/"}]},{"title":"å‰ç«¯å­¦ä¹ èµ„æ–™å³¡è°·","slug":"dev-data","date":"2018-07-06T07:12:00.000Z","updated":"2019-12-03T10:24:08.258Z","comments":true,"path":"2018/07/06/dev-data/","link":"","permalink":"https://www.yangtao.site/2018/07/06/dev-data/","excerpt":"æ•´ç† 2017-2018 çš„å‰ç«¯å­¦ä¹ èµ„æ–™","text":"æ•´ç† 2017-2018 çš„å‰ç«¯å­¦ä¹ èµ„æ–™ å­¦ä¹ èµ„æ–™ç«™ç½‘ç«™ (2017)ä¸ªäººåˆ†äº«â€“web å‰ç«¯å­¦ä¹ èµ„æºåˆ†äº« å­¦ä¹  Web å¼€å‘ Web å¼€å‘è€…æŒ‡å— æ•™ç¨‹ W3school W3C WebGL ä¸­æ–‡ç½‘ JavaScript ECMAScript 6 å…¥é—¨ JavaScript æ€ä¹ˆå­¦ JavaScriptï¼Ÿ 10 ä¸ªæœ€ä½³çš„ JavaScript é£æ ¼æŒ‡å— æ¡†æ¶ã€åº“ å‰ç«¯æ¡†æ¶ã€èµ„æ–™æ±‡é›† Lodashâ€” æ˜¯ä¸€ä¸ªä¸€è‡´æ€§ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½çš„ JavaScript å®ç”¨å·¥å…·åº“ã€‚ Headroom.jsâ€” ä¸ºé¡µé¢é¡¶éƒ¨å¤šç•™äº›ç©ºé—´ã€‚åœ¨ä¸éœ€è¦é¡µå¤´æ—¶å°†å…¶éšè—ã€‚ iCheckâ€”å¢å¼ºå¤é€‰æ¡†å’Œå•é€‰æŒ‰é’® Three.jsâ€” æ˜¯ JavaScript ç¼–å†™çš„ WebGL ç¬¬ä¸‰æ–¹åº“ã€‚æä¾›äº†éå¸¸å¤šçš„ 3D æ˜¾ç¤ºåŠŸèƒ½ã€‚ å¼€å‘å·¥å…· é«˜è´¨é‡çš„ Git ä¸­æ–‡æ•™ç¨‹â€”è¯¥ Wiki çš„ç¼–è€…éå¸¸è®¤çœŸç»†è‡´åœ°æ€»ç»“å’Œç¿»è¯‘äº†è®¸å¤š Github çŸ¥è¯†å’ŒæŠ€å·§ å¦‚ä½•é«˜æ•ˆåˆ©ç”¨ GitHub Git - ç®€æ˜“æŒ‡å— å…¨é¢ç†è§£ Git Gruntâ€”é¡¹ç›®æ„å»ºå·¥å…· Gulpâ€”ç”¨è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·å¢å¼ºä½ çš„å·¥ä½œæµç¨‹ï¼ Webpackâ€”å‰ç«¯èµ„æºæ¨¡å—åŒ–ç®¡ç†å’Œæ‰“åŒ…å·¥å…· å…¥é—¨ Webpackï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº† åšå®¢ å¼ é‘«æ—­ å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—ä¹‹ JavaScript ç½‘ç»œ HTTPS å·¥ä½œåŸç†å’Œ TCP æ¡æ‰‹æœºåˆ¶ å¿«é€ŸæŸ¥æ‰¾åŒº æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦ å­¦ä¹ ä¹¦ç± JavaScript ç»å…¸å®ä¾‹ æ…•è¯¾ç½‘æ‰‹è®°å½’çº³ã€ŠJavaScript ç»å…¸å®ä¾‹ã€‹ä¹‹ JS ä¸åªæ˜¯ç®€å•çš„æ„ä»¶å— FreeCodeCamp æ…•è¯¾ç½‘å‘å¸ƒæ‰‹è®° JavaScript ç®—æ³•åˆçº§ç»ƒä¹  ä¸ªäººæ‰‹è®°é›†é”¦ æ…•è¯¾ç½‘æ‰‹è®° å‰ç«¯ç½‘ç¬”è®°","categories":[{"name":"Web","slug":"Web","permalink":"https://www.yangtao.site/categories/Web/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://www.yangtao.site/tags/å‰ç«¯/"},{"name":"å‰ç«¯å­¦ä¹ èµ„æ–™","slug":"å‰ç«¯å­¦ä¹ èµ„æ–™","permalink":"https://www.yangtao.site/tags/å‰ç«¯å­¦ä¹ èµ„æ–™/"}]},{"title":"Hexoå¸¸ç”¨å‘½ä»¤é›†åˆ","slug":"hexo-order","date":"2018-07-06T06:59:59.000Z","updated":"2019-03-13T14:02:49.550Z","comments":true,"path":"2018/07/06/hexo-order/","link":"","permalink":"https://www.yangtao.site/2018/07/06/hexo-order/","excerpt":"ç®€å†™ hexo n â€œæˆ‘çš„åšå®¢â€ hexo new â€œæˆ‘çš„åšå®¢â€ #æ–°å»ºæ–‡ç«  hexo p hexo publish hexo g hexo generate #ç”Ÿæˆ hexo s hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆ hexo d hexo deploy #éƒ¨ç½²","text":"ç®€å†™ hexo n â€œæˆ‘çš„åšå®¢â€ hexo new â€œæˆ‘çš„åšå®¢â€ #æ–°å»ºæ–‡ç«  hexo p hexo publish hexo g hexo generate #ç”Ÿæˆ hexo s hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆ hexo d hexo deploy #éƒ¨ç½² æœåŠ¡å™¨ hexo server #Hexo ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚ hexo server -s #é™æ€æ¨¡å¼ hexo server -p 5000 #æ›´æ”¹ç«¯å£ hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IP hexo clean #æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤ hexo g #ç”Ÿæˆé™æ€ç½‘é¡µ hexo d #å¼€å§‹éƒ¨ç½² ç›‘è§†æ–‡ä»¶å˜åŠ¨ hexo generate #ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶å¿«é€Ÿè€Œä¸”ç®€å• hexo generate â€“watch #ç›‘è§†æ–‡ä»¶å˜åŠ¨ å®Œæˆåéƒ¨ç½²ï¼ˆä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼‰ è‰ç¨¿ hexo generate â€“deploy hexo publish [layout] hexo deploy â€“generate â€¦ hexo deploy -g â€¦ hexo server -g â€¦ æ¨¡ç‰ˆ hexo new â€œpostNameâ€ #æ–°å»ºæ–‡ç«  hexo new page â€œpageNameâ€ #æ–°å»ºé¡µé¢ hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½• hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œâ€™ctrl + câ€™å…³é—­serverï¼‰ hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub hexo new [layout] .. hexo new photo â€œMy Galleryâ€ .. hexo new â€œHello Worldâ€ â€“lang tw .. å‚è€ƒ :Hexoå¸¸ç”¨å‘½ä»¤ç¬”è®°","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://www.yangtao.site/categories/åšå®¢/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.yangtao.site/tags/Hexo/"}]},{"title":"å…³äºä½¿ç”¨Hexoä¸»é¢˜Yiliaä¸­ç¢°åˆ°çš„é—®é¢˜ä¸€äºŒ","slug":"hexo-yilia","date":"2018-04-08T14:11:24.000Z","updated":"2019-11-13T05:48:01.946Z","comments":true,"path":"2018/04/08/hexo-yilia/","link":"","permalink":"https://www.yangtao.site/2018/04/08/hexo-yilia/","excerpt":"å…³äºä½¿ç”¨ä¸»é¢˜ Yiliaçš„ä¸€äº›é—®é¢˜çš„é›†åˆåœ°ï¼šIssues é¦–æ¨ï¼šä»é›¶å¼€å§‹åˆ¶ä½œ Hexo ä¸»é¢˜","text":"å…³äºä½¿ç”¨ä¸»é¢˜ Yiliaçš„ä¸€äº›é—®é¢˜çš„é›†åˆåœ°ï¼šIssues é¦–æ¨ï¼šä»é›¶å¼€å§‹åˆ¶ä½œ Hexo ä¸»é¢˜ Q1ï¼šä¸»é¡µå¦‚ä½•æˆªå–æ–‡æœ¬é•¿åº¦ï¼Ÿ åœ¨éœ€è¦æˆªæ–­çš„ä½ç½®ä½¿ç”¨ &lt;!-- More --&gt; å³å¯ Q2ï¼šå¦‚ä½•è®¾ç½®å¤šä¸ªæ ‡ç­¾ï¼Ÿ tags: [Hexo,Theme]ï¼Œå‚è€ƒæ­¤å¤„ Q3ï¼šæ›´æ¢ä¸»é¢˜çš„æ—¶å€™æŠ¥é”™ ä¸€èˆ¬æ˜¯ç”±äºä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„ key: valueå‰åå‡ºç°äº†ç©ºæ ¼ï¼Œæˆ–è€…ä¹‹é—´æ²¡æœ‰ç©ºæ ¼å¯¼è‡´çš„ Q4ï¼šå¦‚ä½•åˆ›å»º about ç­‰é¡µé¢ï¼Ÿå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰é¡µé¢ï¼Ÿ hexo new page &quot;about&quot; å‚è€ƒ_ hexo çš„ Next åˆ›å»º tags _ Hexo è‡ªå®šä¹‰é¡µé¢çš„æ–¹æ³• å…¶ä»– é€‰æ‹© faviconï¼šeasyicon","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://www.yangtao.site/categories/åšå®¢/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.yangtao.site/tags/Hexo/"}]},{"title":"ä½¿ç”¨Hexo+Githubæ­å»ºè‡ªå·±çš„ä¸ªäººç½‘ç«™","slug":"hexo","date":"2018-04-08T14:03:05.000Z","updated":"2019-03-13T14:03:00.821Z","comments":true,"path":"2018/04/08/hexo/","link":"","permalink":"https://www.yangtao.site/2018/04/08/hexo/","excerpt":"Hexo å®˜æ–¹æ–‡æ¡£","text":"Hexo å®˜æ–¹æ–‡æ¡£ å°†çº¯æ–‡æœ¬è½¬åŒ–ä¸ºé™æ€ç½‘ç«™å’Œåšå®¢æ¡†æ¶ï¼šjekyll å‚è€ƒç½‘ç«™ å¿«é€Ÿä½æˆæœ¬çš„æ­å»ºä¸€ä¸ªé©¬é©¬è™è™çš„åšå®¢ Hux Blogä¸€ç”Ÿæƒ³åšæµªæ¼«æå®¢ æ•™ä½ å®šåˆ¶Hexoçš„landscapeæ‰“é€ è‡ªå·±çš„ä¸»é¢˜ ã€å®ç”¨æŠ€èƒ½ã€‘ä½¿ç”¨github+Hexoäººäººéƒ½èƒ½æ‹¥æœ‰ä¸€ä¸ªåšå®¢ GitHub+Hexo æ­å»ºä¸ªäººç½‘ç«™è¯¦ç»†æ•™ç¨‹ ä½¿ç”¨github page + hexo3.0 æ­å»ºä¸ªäººåšå®¢ï¼ŒåŠ ç»‘å®šåŸŸåã€‚ ã€å¾ˆè¯¦ç»†ã€‘hexoä»é›¶å¼€å§‹åˆ°æ­å»ºå®Œæ•´ ä¸»é¢˜æ¨è åˆé›†ï¼šThemes|Hexo Hexoåšå®¢ä¸»é¢˜æ¨è hexo-theme-yilia Yelee â€”â€” ç®€è€Œä¸å‡ Hexo åŒæ åšå®¢ä¸»é¢˜ Material Theme Haojen â€˜s Blog Anisina ä¸­æ–‡ä½¿ç”¨æ•™ç¨‹ DaraW Hacker laughing http://www.ccblog.win/ Hacker åŠ è½½é€Ÿåº¦å¿«åˆ—è¡¨é¡µï¼šA simple &amp; beautiful &amp; fast theme for Hexo åå‘Vueï¼šVexo è®¾è®¡ç±»ï¼šMic_Theme é…·ç‚«ç±»ï¼š hexo-theme-ochuunn Archer æ‰å¹³åŒ–ç±»ï¼šA simple &amp; beautiful &amp; fast theme for Hexo hexo-theme-skapp ç®€æ´ã€æ˜äº† hexo-theme-huxblog A plain theme for Hexo â€” æ¯”è¾ƒä¸ªæ€§åŒ– DARAW hexo-theme-gandalfr Even å¡ç‰‡å¼ï¼šMaterial Xåšå®¢ MOxFIVE é—®é¢˜ hexo+Github Pageæ­å»ºçš„åšå®¢æ— æ³•åŠ è½½æ ·å¼è¡¨ï¼Ÿ hexo githubpage åˆå§‹åŒ– å¹¶è§£å†³åŒæ­¥é™æ€é¡µé¢é—®é¢˜ Changing a remoteâ€™s URL","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://www.yangtao.site/categories/åšå®¢/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.yangtao.site/tags/Hexo/"}]},{"title":"å­¦ä¹ ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹ä¹‹ç¬¬3ç« ","slug":"js-chapter-3","date":"2018-04-08T13:47:57.000Z","updated":"2018-09-22T10:37:49.126Z","comments":true,"path":"2018/04/08/js-chapter-3/","link":"","permalink":"https://www.yangtao.site/2018/04/08/js-chapter-3/","excerpt":"ç¬¬3ç«  JavaScriptçš„æ„å»ºå—","text":"ç¬¬3ç«  JavaScriptçš„æ„å»ºå— 3ç§åŸºæœ¬çš„åˆ›å»ºå‡½æ•°æ–¹å¼ï¼š å£°æ˜å¼å‡½æ•° åŒ¿åå‡½æ•°æˆ–å‡½æ•°æ„é€ å‡½æ•° å‡½æ•°å­—é¢å€¼æˆ–å‡½æ•°è¡¨è¾¾å¼ 3.1 æ”¾ç½®å‡½æ•°å¹¶æå‡ å£°æ˜å¼å‡½æ•°ï¼Œå¯ä»¥æ”¾ç½®åœ¨ä»£ç ä¸­çš„ä»»ä½•ä½ç½®ï¼›å‡½æ•°è¡¨è¾¾å¼ï¼Œå¿…é¡»å°†å…¶æ”¾ç½®åœ¨ä½¿ç”¨å‡½æ•°çš„ä½ç½®ä¹‹å‰ 12345678910111213141516171819// åœ¨å£°æ˜ä¸€ä¸ªå˜é‡ä¹‹å‰æ‰“å°aconsole.log('a', a); //undefinedvar a;// åœ¨å£°æ˜ä¸€ä¸ªå˜é‡å¹¶èµ‹å€¼console.log('aa', aa); //undefinedvar aa = 1;// å£°æ˜å˜é‡å‘ç”Ÿäº†æå‡ï¼Œä½†æ˜¯èµ‹å€¼å¹¶æ²¡æœ‰ï¼Œèµ‹å€¼æ˜¯åœ¨ç›¸åº”çš„ä½ç½®å‘ç”Ÿçš„// å£°æ˜å¼å‡½æ•°ï¼Œåœ¨è®¿é—®è¯¥å‡½æ•°ä¹‹å‰ï¼Œæå‡å°†ç¡®ä¿æŠŠå‡½æ•°å£°æ˜ç§»åŠ¨åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨console.log(mytest()); //successfunction mytest() &#123; return 'success';&#125;// ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼å°±ä¼šæŠ¥é”™ï¼Œå˜é‡å¯èƒ½å£°æ˜äº†ï¼Œä½†æ²¡æœ‰å®ä¾‹åŒ–ï¼Œä½†æ˜¯ä½ çš„ä»£ç è¯•å›¾å°†è¿™ä¸ªå˜é‡å½“åšä¸€ä¸ªå‡½æ•°å¯¹å¾…console.log(mytest2()); //TypeError: mytest2 is not a functionvar mytest2 = function() &#123; return 'success2';&#125; 3.2 æŠŠä¸€ä¸ªå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°123456function otherFunction(x, y, z) &#123; x(y, z);&#125;// å¯ä»¥åƒä¼ é€’ä¸€ä¸ªå‘½åçš„å˜é‡ä¸€æ ·ï¼Œå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°var param = function func(a1, a2) &#123; alert(a1 + \" \" + a2); &#125;;otherFunction(param, \"Hello\", \"World\"); å‡½æ•°å¼ç¼–ç¨‹å’ŒJavaScript é«˜é˜¶å‡½æ•°ï¼š ä¸€ä¸ªå‡½æ•°æ¥å—å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä¸¤è€…éƒ½å…·å¤‡ å‡½æ•°å¼ç¼–ç¨‹ï¼š å¯¹åº”ç”¨ç¨‹åºå¤æ‚æ€§è¿›è¡ŒæŠ½è±¡çš„ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨æ•´é½ã€å¹²å‡€çš„å‡½æ•°è°ƒç”¨æ›¿ä»£äº†å¤æ‚çš„å¾ªç¯å’Œæ¡ä»¶è¯­å¥ï¼ˆä»£ç å¯è¯»æ€§é«˜ï¼‰ æ¯”å¦‚ï¼šå°†æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—ç›¸åŠ  12345678910111213// forå¾ªç¯ç›¸åŠ var nums = [1, 34, 3, 15, 4, 18];var sum = 0;for(var i = 0; i &lt; nums.length; i++) &#123; sum += nums[i];&#125;console.log('sum', sum); //75var nums2 = [1, 34, 3, 15, 4, 18];var sum2 = nums2.reduce(function(n1, n2) &#123; return n1 + n2;&#125;);console.log('sum2', sum2); //75 arr.reduce([callback, initialValue]) æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆä¸ºä¸€ä¸ªå€¼ã€‚ 3.3 å®ç°é€’å½’ç®—æ³• æƒ³è¦å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒé€’å½’åœ°éå†ä¸€ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªåå‘çš„æ•°ç»„å­—ç¬¦ä¸² ç¼ºç‚¹ï¼šé€’å½’å¾ˆæ¶ˆè€—å†…å­˜ 1234567891011121314151617181920212223242526272829// é˜¶ä¹˜function factorial(n) &#123; return n == 1 ? n : n * factorial(n - 1);&#125;console.log('é˜¶ä¹˜', factorial(4)); // 24// æ–æ³¢é‚£å¥‘var fibonacci = function(n) &#123; return n &lt; 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);&#125;console.log('æ–æ³¢é‚£å¥‘', fibonacci(10)); //55// ä½¿ç”¨ä¸€ä¸ªé€’å½’å‡½æ•°å­—é¢å€¼æ¥åè½¬æ•°ç»„å…ƒç´ ï¼Œä»æœ€å¤§é•¿åº¦å¼€å§‹ï¼Œæ¯æ¬¡è¿­ä»£éƒ½å°†è¿™ä¸ªå€¼è‡ªå‡// å½“ä¸º 0 æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²var reverseArrary = function(x, index, str) &#123; return index == 0 ? str : reverseArrary(x, --index, (str += \" \" + x[index]));&#125;var arr = ['apple', 'orange', 'peach', 'lime'];var str = reverseArrary(arr, arr.length, \"\");console.log('str', str); //lime peach orange apple// å¦‚æœè¦åè¿‡æ¥ï¼ŒæŒ‰ç…§é¡ºåºæŠŠæ•°ç»„è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²var orderArray = function(x, i, str) &#123; return i == x.length - 1 ? str : orderArray(x, ++i, (str += x[i] + \" \"));&#125;var numArr = [1, 2, 3, 4];var numStr = orderArray(numArr, -1, \"\");console.log('numStr', numStr); //1 2 3 4 3.4 ä½¿ç”¨ä¸€ä¸ªå®šæ—¶å™¨å’Œå›è°ƒé˜²æ­¢ä»£ç é˜»å¡ åœ¨ç¨‹åºçš„è¾“å‡ºä¸­ï¼Œ3ä¸ªå¤–å›´çš„ console.log() ç«‹å³è¢«å¤„ç†äº† é˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªäº‹ä»¶æ˜¯ç¬¬ä¸€ä¸ª noBlock() å‡½æ•°è°ƒç”¨ï¼Œå…¶ä¸­åˆè°ƒç”¨äº† factorial() ï¼Œè®°å½•äº†å…¶è¿è¡Œæ—¶å€™çš„æ´»åŠ¨ï¼Œæœ€åè·Ÿç€å›è°ƒå‡½æ•°çš„è°ƒç”¨ ç¬¬äºŒæ¬¡åŒæ ·åœ°è°ƒç”¨äº† callBack() ç¬¬ä¸‰æ¬¡è°ƒç”¨ callBack() çš„æ—¶å€™ï¼Œå›è°ƒå‡½æ•°ä¸­çš„è°ƒç”¨é’ˆå¯¹ç¬¬ä¸€æ¬¡ callBack() ï¼Œå¹¶ä½¿ç”¨äº†ç¬¬ä¸€æ¬¡å‡½æ•°è°ƒç”¨çš„æœ€ç»ˆç»“æœï¼š6 12345678910111213141516171819202122232425262728293031&lt;script type=\"text/javascript\"&gt;function factorial(n) &#123; console.log('n', n); return n == 1 ? 1 : n * factorial(n - 1);&#125;function noBlock(n, callback) &#123; setTimeout(function() &#123; var val = factorial(n); if(callback &amp;&amp; typeof callback == 'function') &#123; callback(val); &#125; &#125;, 0);&#125;console.log('Top of the morning to you');noBlock(3, function(n) &#123; console.log('first call ends width ' + n); noBlock(n, function(m) &#123; console.log('final result is ' + m); &#125;);&#125;);var tst = 0;for(var i = 0; i &lt; 10; i++) &#123; tst += i;&#125;console.log('value of tst is ' + tst);noBlock(4, function(n) &#123; console.log('end result is ' + n);&#125;);console.log('not doing too much');&lt;/script&gt; å¾…ç»­~","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"JavaScriptç»å…¸å®ä¾‹","slug":"JavaScriptç»å…¸å®ä¾‹","permalink":"https://www.yangtao.site/tags/JavaScriptç»å…¸å®ä¾‹/"}]},{"title":"å­¦ä¹ ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹ä¹‹ç¬¬2ç« ","slug":"js-chapter-2","date":"2018-04-08T13:46:50.000Z","updated":"2018-09-22T10:38:21.062Z","comments":true,"path":"2018/04/08/js-chapter-2/","link":"","permalink":"https://www.yangtao.site/2018/04/08/js-chapter-2/","excerpt":"ç¬¬2ç«  JavaScriptæ•°ç»„","text":"ç¬¬2ç«  JavaScriptæ•°ç»„ 2.1 åœ¨æ•°ç»„ä¸­æœç´¢ indexOf()ã€lastIndexOf() 12345var animals = new Array('dog', 'cat', 'seal', 'elephant', 'walrus', 'lion');var index = animals.indexOf('cat');var index2 = animals.lastIndexOf('lion');console.log('i',index); //1console.log('i2',index2); //5 findIndex() æ–¹æ³•è¿”å›ä¼ å…¥ä¸€ä¸ªæµ‹è¯•æ¡ä»¶ï¼ˆå‡½æ•°ï¼‰ç¬¦åˆæ¡ä»¶çš„æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®ã€‚ 12345var nums = [2, 4, 199, 80, 400, 30, 90];var over = nums.findIndex(function(ele) &#123; return (ele &gt;= 100);&#125;);console.log('nums',nums[over]); //199 2.2 ç”¨concat()å’Œapply()å°†ä¸€ä¸ªäºŒç»´æ•°ç»„æ‰å¹³åŒ– concat() æ–¹æ³•ç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜ç°æœ‰çš„æ•°ç»„ï¼Œè€Œä»…ä»…ä¼šè¿”å›è¢«è¿æ¥æ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ arrayObject.concat(arrayX,arrayX,......,arrayX) 1234567var fruitarray = [];fruitarray[0] = ['stranwberry', 'orange'];fruitarray[1] = ['lime', 'peach', 'banana'];fruitarray[2] = ['tangerine', 'apricot'];console.log('array',fruitarray.concat());var newArray = fruitarray.concat.apply([], fruitarray);console.log(newArray); apply()ä¸call()çš„åŒºåˆ« å¦‚ä½•ç†è§£å’Œç†Ÿç»ƒè¿ç”¨jsä¸­çš„callåŠapplyï¼Ÿ obj.call(thisObj, arg1, arg2, ...); obj.apply(thisObj, [arg1, arg2, ...]); call() &amp; apply()ï¼ŒåŠ¨æ€æ”¹å˜this 1234567891011function add(a, b) &#123; console.log('add', this);&#125;function sum(a, b) &#123; console.log('sum', this);&#125;add(1, 2); //Windowsum(1, 2); //Windowadd.call(sum, 1, 2); //sum(a, b)sum.call(add, 1, 2); //add(a ,b) argumentsè£…æ¢ä¸ºæ•°ç»„, è¿”å›çš„æ˜¯æ•°ç»„ï¼Œä½†æ˜¯argumentsæœ¬èº«ä¿æŒä¸å˜ 12var arg = [].slice.call(arguments);// [].slice.call(document.getElementsByTagName('li')); å€Ÿç”¨åˆ«äººçš„æ–¹æ³• 1234567891011var foo = &#123; name: 'jack', showName: function() &#123; console.log('this name:',this.name); &#125;&#125;var bar = &#123; name: 'rose'&#125;foo.showName(); //jackfoo.showName.call(bar); //rose å®ç°ç»§æ‰¿ 1234var Student = function(name, age, high) &#123; Person.call(this, name, age); this.high = high;&#125; å°è£…å¯¹è±¡ä¿è¯thisçš„æŒ‡å‘ 1234var _this = this;_this.$box.on('mousedown', function()) &#123; return _this.fndown.apply(_this);&#125; 2.3 åˆ é™¤æˆ–æ›¿æ¢æ•°ç»„å…ƒç´  splice() æ–¹æ³•ä¸ slice() æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œsplice() æ–¹æ³•ä¼šç›´æ¥å¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹ã€‚ 123456789101112131415161718var animals = new Array('dog', 'cat', 'rabbit', 'pig', 'apple');// ä»æ•°ç»„åˆ é™¤å…ƒç´ animals.splice(animals.indexOf('apple'), 1);console.log(animals); // [\"dog\", \"cat\", \"rabbit\", \"pig\"]// æ›¿æ¢animals.splice(animals.indexOf('pig'), 1, 'monkey');console.log(animals); //[\"dog\", \"cat\", \"rabbit\", \"monkey\"]// ä½¿ç”¨å¾ªç¯å’Œåˆ†å‰²æ¥æ›¿æ¢å’Œåˆ é™¤å…ƒç´ var charSets = [\"ab\", \"bb\", \"cd\", \"ab\", \"cc\", \"ab\", \"dd\", \"ab\"];while(charSets.indexOf('ab') != -1) &#123; charSets.splice(charSets.indexOf('ab'), 1, '**');&#125;console.log(charSets); //[\"**\", \"bb\", \"cd\", \"**\", \"cc\", \"**\", \"dd\", \"**\"]while(charSets.indexOf('**') != -1) &#123; charSets.splice(charSets.indexOf('**'), 1);&#125;console.log(charSets); //[\"bb\", \"cd\", \"cc\", \"dd\"] 2.4 æå–ä¸€ä¸ªæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ† ä¸æ›´æ”¹åŸæ•°ç»„ï¼Œä½¿ç”¨slice() 1234var animals = new Array('dog', 'cat', 'rabbit', 'pig', 'apple');var newAnimals = animals.slice(1, 2);console.log(animals); //[\"dog\", \"cat\", \"rabbit\", \"pig\", \"apple\"]console.log(newAnimals); //[\"cat\"] 2.5 å¯¹æ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•° Array.prototype.forEach() 12345var charSets = [\"ab\", \"bb\", \"cd\", \"ab\", \"cc\", \"ab\", \"dd\", \"ab\"];charSets.forEach(function(element, index, array) &#123; if(element == 'ab') array[index] = '**';&#125;);console.log(charSets); //[\"**\", \"bb\", \"cd\", \"**\", \"cc\", \"**\", \"dd\", \"**\"] 2.6 ä½¿ç”¨forEach()å’Œcall()éå†querySelectorAll()çš„ç»“æœ querySelectorAll() å¯ä»¥å°†forEach()å¼ºåˆ¶å’Œä¸€ä¸ªNodeListä¸€èµ·ä½¿ç”¨ 1234var cells = document.querySelectorAll('td + td');[].forEach.call(cells, function(cell) &#123; sum += parseFloat(cell.firstChild.data);&#125;); 2.7 å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ å°†ä¸€ä¸ªåè¿›åˆ¶çš„æ•°ç»„è½¬åŒ–ä¸ºæ–°çš„ç­‰ä»·çš„åå…­è¿›åˆ¶æ•°ç»„ map()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚ ä¸forEach()ä¸åŒï¼Œä¸ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œä½†æ˜¯å¿…é¡»è¿”å›ä¸€ä¸ªå€¼ 123456var decArray = [23, 3, 24, 45, 500, 9, 70];var hexArray = decArray.map(function(ele) &#123; return ele.toString(16);&#125;);console.log(decArray); //[23, 3, 24, 45, 500, 9, 70]console.log(hexArray); //[\"17\", \"3\", \"18\", \"2d\", \"1f4\", \"9\", \"46\"] 2.8 åˆ›å»ºä¸€ä¸ªè¿‡æ»¤åçš„æ•°ç»„ filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚ 12345var charSet = ['**', 'bb', 'cc', '**', 'cd'];var newArray = charSet.filter(function(element, index, array) &#123; return element != \"**\";&#125;);console.log(newArray); //[\"bb\", \"cc\", \"cd\"] 2.9 éªŒè¯æ•°ç»„å†…å®¹ ä½¿ç”¨Array every()æ–¹æ³•æ¥æ£€æŸ¥æ¯ä¸ªå…ƒç´ æ˜¯å¦ç¬¦åˆç»™å®šçš„æ¡ä»¶ some() æ–¹æ³•ç¡®ä¿è‡³å°‘æŸäº›å…ƒç´ ç¬¦åˆè¯¥æ¡ä»¶ åŒºåˆ«ï¼ševery()æ–¹æ³•åªè¦å‡½æ•°è¿”å›ä¸€ä¸ªfalseå€¼ï¼Œå¤„ç†å°±ä¼šç»“æŸï¼Œè€Œsome()æ–¹æ³•ä¼šç»§ç»­æµ‹è¯•æ¯ä¸ªå…ƒç´ ï¼Œç›´è‡³è¿”å›trueï¼Œæ­¤æ—¶ï¼Œä¸å†éªŒè¯å…¶ä»–å…ƒç´ ï¼Œå³å¯è¿”å›ture 123456789101112131415function testValue(element, index, array) &#123; var testExp = /^[a-zA-Z]+$/; return testExp.test(element);&#125;var elemSet = ['**', 123, 'adv', '-', 45, 'AAA'];var result = elemSet.every(testValue);var result2 = elemSet.some(testValue);console.log(result); //falseconsole.log(result2); //truevar elemSet2 = ['aaa', 'animals', 'vvv'];result = elemSet2.every(testValue);result2 = elemSet2.some(testValue);console.log(result); //trueconsole.log(result2); //true 2.10 ä½¿ç”¨ä¸€ä¸ªå…³è”æ•°ç»„æ¥å­˜å‚¨è¡¨å•å…ƒç´ åå’Œå€¼ keys() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Arrayè¿­ä»£å™¨ï¼Œå®ƒåŒ…å«æ•°ç»„ä¸­æ¯ä¸ªç´¢å¼•çš„é”®ã€‚ 12345678var elemArray = &#123;&#125;;var elem = document.forms[0].elements[0];elemArray[elem.id] = elem.value;var elemArray = &#123;name: 'yt', age:25&#125;;Object.keys(elemArray).forEach(function(key) &#123; var value = elemArray[key]; console.log(value);&#125;); å¾…ç»­~","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"JavaScriptç»å…¸å®ä¾‹","slug":"JavaScriptç»å…¸å®ä¾‹","permalink":"https://www.yangtao.site/tags/JavaScriptç»å…¸å®ä¾‹/"}]},{"title":"å­¦ä¹ ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹ä¹‹ç¬¬1ç« ","slug":"js-chapter-1","date":"2018-04-08T12:47:23.000Z","updated":"2018-09-22T10:38:16.147Z","comments":true,"path":"2018/04/08/js-chapter-1/","link":"","permalink":"https://www.yangtao.site/2018/04/08/js-chapter-1/","excerpt":"ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹å„èŠ‚ä¸­çš„å®Œæ•´ä»£ç è§£å†³äº†å¸¸è§çš„ç¼–ç¨‹é—®é¢˜ï¼Œå¹¶ä¸”ç»™å‡ºäº†åœ¨ä»»ä½•æµè§ˆå™¨ä¸­æ„å»ºWebåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚åªéœ€è¦å°†è¿™äº›ä»£ç ç¤ºä¾‹å¤åˆ¶å¹¶ç²˜è´´åˆ°ä½ è‡ªå·±çš„é¡¹ç›®ä¸­å°±è¡Œäº†ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆå·¥ä½œï¼Œå¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦ä¹ JavaScriptçš„å¾ˆå¤šçŸ¥è¯†ã€‚ ç¬¬1ç«  JavaScriptä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—1.1 JavaScriptå¯¹è±¡ã€åŸºæœ¬ç±»å‹å’Œå­—é¢å€¼ä¹‹é—´çš„åŒºåˆ« 5ç§åŸºæœ¬ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”å€¼ã€nullã€undefinedï¼Œæœ‰3ä¸ªæœ‰å¯¹åº”çš„æ„é€ æ–¹æ³•å¯¹è±¡:stringã€Numberã€Boolean åŸºæœ¬ç±»å‹å˜é‡ä¸¥æ ¼ç­‰äºå­—é¢å€¼ï¼Œè€Œå¯¹è±¡å®ä¾‹åˆ™ä¸ä¼šï¼Œå› ä¸ºåŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼æ¥æ¯”è¾ƒçš„ï¼Œè€Œå€¼æ˜¯å­—é¢å€¼ 1234var num1 = 123;var num2 = new Number(123);console.log(typeof num1); //number console.log(typeof num2); //object","text":"ã€ŠJavaScriptç»å…¸å®ä¾‹ã€‹å„èŠ‚ä¸­çš„å®Œæ•´ä»£ç è§£å†³äº†å¸¸è§çš„ç¼–ç¨‹é—®é¢˜ï¼Œå¹¶ä¸”ç»™å‡ºäº†åœ¨ä»»ä½•æµè§ˆå™¨ä¸­æ„å»ºWebåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚åªéœ€è¦å°†è¿™äº›ä»£ç ç¤ºä¾‹å¤åˆ¶å¹¶ç²˜è´´åˆ°ä½ è‡ªå·±çš„é¡¹ç›®ä¸­å°±è¡Œäº†ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆå·¥ä½œï¼Œå¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦ä¹ JavaScriptçš„å¾ˆå¤šçŸ¥è¯†ã€‚ ç¬¬1ç«  JavaScriptä¸åªæ˜¯ç®€å•çš„æ„ä»¶å—1.1 JavaScriptå¯¹è±¡ã€åŸºæœ¬ç±»å‹å’Œå­—é¢å€¼ä¹‹é—´çš„åŒºåˆ« 5ç§åŸºæœ¬ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”å€¼ã€nullã€undefinedï¼Œæœ‰3ä¸ªæœ‰å¯¹åº”çš„æ„é€ æ–¹æ³•å¯¹è±¡:stringã€Numberã€Boolean åŸºæœ¬ç±»å‹å˜é‡ä¸¥æ ¼ç­‰äºå­—é¢å€¼ï¼Œè€Œå¯¹è±¡å®ä¾‹åˆ™ä¸ä¼šï¼Œå› ä¸ºåŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼æ¥æ¯”è¾ƒçš„ï¼Œè€Œå€¼æ˜¯å­—é¢å€¼ 1234var num1 = 123;var num2 = new Number(123);console.log(typeof num1); //number console.log(typeof num2); //object 1.2 ä»å­—ç¬¦ä¸²æå–ä¸€ä¸ªåˆ—è¡¨ æå–ä¹‹å‰ï¼šThis is a list of items: cherries, limes, oranges, apples. æå–ä¹‹åï¼š[&#39;cherries&#39;,&#39;limes&#39;,&#39;oranges&#39;,&#39;apples&#39;] indexOf() æ–¹æ³•å¯è¿”å›æŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚ substring() æ–¹æ³•ç”¨äºæå–å­—ç¬¦ä¸²ä¸­ä»‹äºä¸¤ä¸ªæŒ‡å®šä¸‹æ ‡ä¹‹é—´çš„å­—ç¬¦ã€‚ split() æ–¹æ³•ç”¨äºæŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚ 123456789101112var sentence = 'This is one sentence. This is a sentence with a list of items: cherries, oranges, apples, bananas. That was the list of items.';var start = sentence.indexOf(':');var end = sentence.indexOf('.', start+1);var listStr = sentence.substring(start+1, end);var fruits = listStr.split(',');console.log(fruits); //[\" cherries\", \" oranges\", \" apples\", \" bananas\"]//å–å‡ºç©ºæ ¼ç­‰fruits.forEach(function(elmnt,indx,arry) &#123; arry[indx] = elmnt.trim();&#125;);console.log(fruits); //[\"cherries\", \"oranges\", \"apples\", \"bananas\"] 1.3 æ£€æŸ¥ä¸€ä¸ªå­˜åœ¨çš„ã€éç©ºçš„å­—ç¬¦ä¸² æƒ³è¦éªŒè¯ä¸€ä¸ªå˜é‡å·²ç»å®šä¹‰äº†ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å®ƒä¸ä¸ºç©º 1if(typeof unknowVariable === 'string' &amp;&amp; unknowVariable.length &gt; 0) &#123;...&#125; 1.4 æ’å…¥ç‰¹æ®Šå­—ç¬¦ æƒ³è¦å‘å­—ç¬¦ä¸²ä¸­æ’å…¥ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¢è¡Œ è½¬ä¹‰åºåˆ—éƒ½ä»¥ä¸€ä¸ªåæ–œæ  å¼€å§‹ï¼ˆ\\ï¼‰ 1.5 ä½¿ç”¨æ–°å­—ç¬¦ä¸²æ›¿æ¢æ¨¡å¼ ä½¿ç”¨Stringå¯¹è±¡çš„replaceæ–¹æ³•å’Œä¸€ä¸ª æ­£åˆ™è¡¨è¾¾å¼ replace() æ–¹æ³•ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œæˆ–æ›¿æ¢ä¸€ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚ æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦ å­—ç¬¦ åŒ¹é… ä¾‹å­ ^ åŒ¹é…è¾“å…¥çš„å¼€å¤´ /^This/ åŒ¹é…This isâ€¦ $ åŒ¹é…è¾“å…¥çš„ç»“æŸ /end$/ åŒ¹é…This is the end * åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡ /se*/ åŒ¹é…s seeeeæˆ–se ? åŒ¹é…0æ¬¡æˆ–1æ¬¡ /ap?/ åŒ¹é…apple and and + åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡ /ap+/ åŒ¹é…apple ä½†æ˜¯ä¸åŒ¹é…and {n} ä¸¥æ ¼åŒ¹é…næ¬¡ /ap{2}/ ä¸¥æ ¼åŒ¹é…apple ä½†æ˜¯ä¸åŒ¹é…apie {n,} åŒ¹é…næ¬¡æˆ–å¤šæ¬¡ /ap{2,}/ åŒ¹é…appleä¸­çš„pï¼Œä½†æ˜¯ä¸åŒ¹é…apieä¸­çš„p {n,m} è‡³å°‘åŒ¹é…næ¬¡ï¼Œä¹‹å¤šåŒ¹é…mé™¤æ¢è¡Œä»¥å¤–çš„ä»»ä½•å­—ç¬¦ /ap{2,4}/ åŒ¹é…appppppleä¸­çš„4ä¸ªp/a.e/ åŒ¹é…apeå’Œaxe [â€¦] æ–¹æ‹¬å·ä¸­çš„ä»»ä½•å­—ç¬¦ /a[px]e/ åŒ¹é…ape axe ä½†æ˜¯ä¸åŒ¹é…apxe [^â€¦] é™¤äº†æ–¹æ‹¬å·ä»¥å¤–çš„ä»»ä½•å­—ç¬¦ /a[^px]/ åŒ¹é…ale ä½†æ˜¯ä¸åŒ¹é…ape axe \\b åŒ¹é…å•è¯è¾¹ç•Œ /\\bno/ åŒ¹é…nonoä¸­çš„ç¬¬ä¸€ä¸ªno \\B åŒ¹é…éå•è¯è¾¹ç•Œ /\\Bno/ åŒ¹é…nonoä¸­çš„ç¬¬äºŒä¸ªno \\d æ•°å­—0åˆ°9 /\\d{3}/ åŒ¹é…Now in 123 ä¸­çš„123 \\D åŒ¹é…ä»»ä½•éæ•°å­—å­—ç¬¦ /\\D{2,4}/ åŒ¹é…Now in 123 ä¸­çš„Now in \\w åŒ¹é…ä»»ä½•å•è¯å­—ç¬¦ï¼ˆå­—æ¯ã€æ•°ç»„å’Œä¸‹åˆ’çº¿ /\\w/ åŒ¹é…javaScriptä¸­çš„j \\W åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ï¼ˆéå­—æ¯ã€æ•°ç»„å’Œä¸‹åˆ’çº¿ï¼‰ /\\W/ åŒ¹é…100%ä¸­çš„% \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œ \\s ä¸€ä¸ªå•ä¸ªçš„ç©ºç™½å­—ç¬¦ \\S ä¸€ä¸ªå•ä¸ªçš„éç©ºç™½å­—ç¬¦ \\t ä¸€ä¸ªåˆ¶è¡¨ç¬¦ (x) æ•è·æ‹¬å· è®°ä½åŒ¹é…çš„å­—ç¬¦ 1234var searchString = \"Now is the time, this is the tame\";var re = /t\\w&#123;2&#125;e/g;var replacement = searchString.replace(re, 'place');console.log(replacement); //Now is the place, this is the place 1.6 æ‰¾åˆ°å¹¶çªå‡ºæ˜¾ç¤ºä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹ RegExp exec() æ–¹æ³•ç”¨äºæ£€ç´¢å­—ç¬¦ä¸²ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é… RegExpObject.exec(string) è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾åŒ¹é…çš„ç»“æœã€‚å¦‚æœæœªæ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›å€¼ä¸º null 1234567891011121314151617var searchString2 = \"Now is the time and this is the time and that is the time\";var parttern = /t\\w*e/g; //\\w åŒ¹é…ä»»ä½•å•è¯å­—ç¬¦var matchArray;var str = \"\";//ç”¨regexp execæ£€æŸ¥æ¨¡å¼ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå¤„ç†å®ƒwhile((matchArray = parttern.exec(searchString2)) != null) &#123; str += \"at \" + matchArray.index + \" we found \" + matchArray[0] + \"\\n\";&#125;console.log(str);// at 7 we found the// at 11 we found time// at 28 we found the// at 32 we found time// at 49 we found the// at 53 we found time 12345678910111213141516171819202122232425262728293031323334//å®ä¾‹1-1document.getElementById(\"searchSubmit\").onclick = function() &#123; //è·å–æ¨¡å¼ var pattern = document.getElementById(\"pattern\").value; var re = new RegExp(pattern, \"g\"); //è·å–å­—ç¬¦ä¸² var searchString = document.getElementById(\"inComing\").value; var matchArray; var resultString = \"&lt;pre&gt;\"; var first = 0; var last = 0; //æ‰¾åˆ°æ¯ä¸€ä¸ªåŒ¹é… while((matchArray = re.exec(searchString)) != null) &#123; last = matchArray.index; //è·å–æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå°†å…¶è¿æ¥èµ·æ¥ resultString += searchString.substring(first, last); //ä½¿ç”¨classï¼Œæ·»åŠ åŒ¹é…çš„å­—ç¬¦ä¸² resultString += '&lt;span class=\"found\"&gt;' + matchArray[0] + '&lt;/span&gt;'; first = re.lastIndex; &#125; //å®Œæˆå­—ç¬¦ä¸² resultString += searchString.substring(first, searchString.length); resultString += \"&lt;/pre&gt;\"; //æ’å…¥é¡µé¢ document.getElementById(\"searchResult\").innerHTML = resultString;&#125; 1.7 ä½¿ç”¨æ•è·åœ†æ‹¬å·äº¤æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å•è¯ äº¤æ¢åç§°ï¼Œè®©å§“æ°å…ˆå‡ºç° è§£å†³ï¼šä½¿ç”¨æ•è·åœ†æ‹¬å·å’Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°å¹¶è®°ä½ä»–ä»¬çš„åå­—ï¼Œç„¶åäº’æ¢ä»–ä»¬ replace() æ–¹æ³•ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œæˆ–æ›¿æ¢ä¸€ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚ å­—ç¬¦ æ›¿æ¢æ–‡æœ¬ $1ã€$2ã€â€¦ã€$99 ä¸ regexp ä¸­çš„ç¬¬ 1 åˆ°ç¬¬ 99 ä¸ªå­è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬ã€‚ $&amp; ä¸ regexp ç›¸åŒ¹é…çš„å­ä¸²ã€‚ $` ä½äºåŒ¹é…å­ä¸²å·¦ä¾§çš„æ–‡æœ¬ã€‚ $â€™ ä½äºåŒ¹é…å­ä¸²å³ä¾§çš„æ–‡æœ¬ã€‚ $$ å…è®¸æ›¿æ¢ä¸­æœ‰ä¸€ä¸ªå­—é¢å€¼ç¾å…ƒç¬¦å·($) $n æ’å…¥ä½¿ç”¨RegExpçš„ç¬¬næ¬¡æ•è·åœ†æ‹¬å·çš„å€¼ 1234var myName = \"Tao Yang\";var nameRe = /^(\\w+)\\s(\\w+)$/;var myNewName = myName.replace(nameRe, \"$2 $1\");console.log(myNewName); //Yang Tao 1.8 ä½¿ç”¨å‘½åå®ä½“æ¥æ›¿ä»£HTMLæ ‡ç­¾ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŠŠå°–æ‹¬å·(&lt;&gt;)è½¬æ¢ä¸ºå‘½åçš„å®ä½“ï¼š&lt;å’Œ&gt; 1234var pieceOfHtml = \"&lt;p&gt;This is a &lt;span&gt;paragraph&lt;/span&gt;&lt;/p&gt;\";pieceOfHtml = pieceOfHtml.replace(/&lt;/g, \"&amp;lt;\");pieceOfHtml = pieceOfHtml.replace(/&gt;/g, \"&amp;gt;\");console.log(pieceOfHtml); //&amp;lt;p&amp;gt;This is a &amp;lt;span&amp;gt;paragraph&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt; 1.9 ISO 8610æ ¼å¼çš„æ—¥æœŸè½¬æ¢ä¸ºDateå¯¹è±¡å¯æ¥å—çš„ä¸€ç§å½¢å¼123456789var dtstr = \"2014-3-04T19:35:32Z\";dtstr = dtstr.replace(/\\D/g, \" \");console.log(dtstr); //2014 3 04 19 35 32var dtcomps = dtstr.split(\" \");//åœ¨åŸºäº1çš„ISO 8610æœˆä»½å’ŒåŸºäº0çš„æ—¥æœŸæ ¼å¼ä¹‹é—´è½¬æ¢dtcomps[1]--;var convdt = new Date(Date.UTC.apply(null, dtcomps));console.log(convdt.toString()); //Wed Mar 05 2014 03:35:32 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) 1.10 ä½¿ç”¨å¸¦æœ‰å®šæ—¶å™¨çš„å‡½æ•°é—­åŒ… ä½¿ç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä½œä¸ºsetInterval()æˆ–setTimeout()æ–¹æ³•è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•° 123456789101112131415var intervalId = null;document.getElementById(\"redbox\").addEventListener('click', startBox, false);function startBox() &#123; if(intervalId == null) &#123; var x = 100; intervalId = setInterval(function() &#123; x += 5; var left = x + \"px\"; document.getElementById(\"redbox\").style.left = left; &#125;, 500); &#125; else &#123; clearInterval(intervalId); intervalId = null; &#125;&#125; 1.11 è®°å½•ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´æ¶ˆè€—çš„æ—¶é—´ åœ¨ç¬¬ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªDateå¯¹è±¡ï¼Œå½“ç¬¬äºŒä¸ªæ—¶é—´å‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Dateå¯¹è±¡ï¼Œå¹¶ä¸”ä»ç¬¬äºŒä¸ªå¯¹è±¡ä¸­å‡å»ç¬¬ä¸€ä¸ªå¯¹è±¡ã€‚ä¸¤è€…ä¹‹é—´çš„å·®ä»¥æ¯«ç§’è¡¨ç¤ºçš„ï¼Œè¦è½¬æ¢ä¸ºç§’ï¼Œå°±é™¤ä»¥1000 ä¸¤ä¸ªæ—¥æœŸå¯ä»¥ç›¸å‡ï¼Œä½†æ˜¯ç›¸åŠ å°±æˆäº†æ‹¼æ¥å­—ç¬¦ä¸² 12345678910var firstDate = new Date();setTimeout(function() &#123; doEvent(firstDate);&#125;, 25000);function doEvent() &#123; var secondDate = new Date(); var diff = secondDate - firstDate; console.log(diff); //25001&#125; 1.12 åè¿›åˆ¶æ•°è½¬åŒ–ä¸ºåå…­è¿›åˆ¶å€¼ ä½¿ç”¨Numberå¯¹è±¡çš„ toString() æ–¹æ³• 12var num = 255;console.log(num.toString(16)); //ff 1.13 æƒ³è¦å°†è¡¨ä¸­ä¸€åˆ—çš„æ‰€æœ‰æ•°å­—åŠ å’Œ éå†è¡¨ä¸­åŒ…å«äº†æ•°å­—å€¼çš„åˆ—ï¼Œå°†å…¶è½¬æ¢ä¸ºæ•°å­—ï¼Œå¹¶åŠ å’Œ querySelector() æ–¹æ³•è¿”å›æ–‡æ¡£ä¸­åŒ¹é…æŒ‡å®š CSS é€‰æ‹©å™¨çš„ä¸€ä¸ªå…ƒç´  å¦‚æœä½ éœ€è¦è¿”å›æ‰€æœ‰çš„å…ƒç´ ï¼Œè¯·ä½¿ç”¨ querySelectorAll() æ–¹æ³•æ›¿ä»£ å…¨å±€å‡½æ•° parseInt() å’Œ parseFloat() éƒ½æŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­— 123456var sum = 0;//ä½¿ç”¨querySelectorAllæ‰¾åˆ°ç¬¬äºŒåˆ—çš„æ‰€æœ‰å•å…ƒæ ¼var cells = document.querySelectorAll(\"td:nth-of-type(2)\");for(var i=0, l=cells.length; i&lt;l; i++) &#123; sum += parseFloat(cells[i].firstChild.data);&#125; 1.14 åœ¨è§’åº¦å’Œå¼§åº¦ä¹‹é—´è½¬æ¢ å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦ 1var radians = degrees * (Math.PI / 180); å°†å¼§åº¦è½¬åŒ–ä¸ºè§’åº¦ 1var degrees = radians * (180 / Math.PI); 1.15 æ‰¾åˆ°é¡µé¢å…ƒç´ å¯å®¹çº³çš„ä¸€ä¸ªåœ†çš„åŠå¾„å’Œåœ†å¿ƒ Math.min(x,y)æ–¹æ³•å¯è¿”å›æŒ‡å®šçš„æ•°å­—ä¸­å¸¦æœ‰æœ€ä½å€¼çš„æ•°å­—ã€‚ æ±‚å‡ºå®½åº¦å’Œé«˜åº¦ä¸­è¾ƒå°çš„ä¸€ä¸ªï¼Œç”¨å…¶é™¤ä»¥2å¾—åˆ°åŠå¾„ 1var circleRadius = Math.min(elemengWidth, elemengHeight) / 2; ç»™æŒ‡å®šé¡µé¢å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ï¼Œé€šè¿‡å°†äºŒè€…éƒ½é™¤ä»¥2æ¥æ‰¾åˆ°å…¶ä¸­å¿ƒç‚¹ 12var x = elemengWidth / 2;var y = elemengHeight / 2; Window.getComputedStyle()æ–¹æ³•ç»™å‡ºåº”ç”¨æ´»åŠ¨æ ·å¼è¡¨åçš„å…ƒç´ çš„æ‰€æœ‰CSSå±æ€§çš„å€¼ï¼Œå¹¶è§£æè¿™äº›å€¼å¯èƒ½åŒ…å«çš„ä»»ä½•åŸºæœ¬è®¡ç®—ã€‚ getComputedStyle() 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;å°†ä¸€ä¸ªSVGåœ†æ”¾å…¥åˆ°ä¸€ä¸ªdivå…ƒç´ ä¸­&lt;/title&gt; &lt;style type=\"text/css\"&gt; #elem &#123; width: 100%; height: 500px; border: 1px solid #ddd; background-color: #ddd; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=\"elem\"&gt; &lt;svg width=\"100%\" height=\"100%\"&gt; &lt;circle id=\"circ\" width=\"10\" height=\"10\" r=\"10\" fill=\"#f90\"&gt; &lt;/svg&gt; &lt;/div&gt; &lt;script type=\"text/javascript\"&gt; window.onload = window.onresize = function() &#123; var box = document.getElementById(\"elem\"); var style = window.getComputedStyle(box, null); var width = parseInt(style.getPropertyValue(\"width\")); var height = parseInt(style.getPropertyValue(\"height\")); console.log('w', width, 'h', height); var x = width / 2; var y = height / 2; var circleRadius = Math.min(width, height) / 2; var circ = document.getElementById(\"circ\"); circ.setAttribute(\"r\", circleRadius); circ.setAttribute(\"cx\", x); circ.setAttribute(\"cy\", y); console.log('r', circleRadius, ' cx', x, ' cy', y); &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 1.16 è®¡ç®—åœ†å¼§çš„é•¿åº¦ ç»™å®šäº†ä¸€ä¸ªåœ†çš„åŠå¾„åŠåœ†å¼§è§’çš„è§’åº¦å€¼ï¼Œæ±‚è¯¥åœ†å¼§çš„é•¿åº¦ ä½¿ç”¨Math.PIæŠŠè§’åº¦è½¬æ¢ä¸ºå¼§åº¦ï¼Œå¹¶åœ¨å…¬å¼ä¸­ä½¿ç”¨è¯¥ç»“æœæ¥æ±‚å¾—åœ†å¼§çš„é•¿åº¦ 12var radians = degrees * (Math.PI / 180);var arclength = radians * radians; å¾…ç»­~","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"},{"name":"JavaScriptç»å…¸å®ä¾‹","slug":"JavaScriptç»å…¸å®ä¾‹","permalink":"https://www.yangtao.site/tags/JavaScriptç»å…¸å®ä¾‹/"}]},{"title":"jQueryå·¥å…·å‡½æ•°æ“ä½œDOM","slug":"practice-jquery-dom","date":"2017-05-21T12:57:24.000Z","updated":"2020-03-18T07:28:39.944Z","comments":true,"path":"2017/05/21/practice-jquery-dom/","link":"","permalink":"https://www.yangtao.site/2017/05/21/practice-jquery-dom/","excerpt":"jQuery å®æˆ˜ã€‹ï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ç¬¬ä¹ç« å­¦ä¹ æ€»ç»“","text":"jQuery å®æˆ˜ã€‹ï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ç¬¬ä¹ç« å­¦ä¹ æ€»ç»“ è¿‡æ»¤æ•°ç»„$.grep(array,callback[,invert]) invert ä¸º true,åˆ™å›è°ƒå‡½æ•°çš„å€¼æ˜¯ falseï¼Œå¯¼è‡´å€¼è¢«æ”¶é›†ï¼› invert ä¸º false,åˆ™å›è°ƒå‡½æ•°çš„å€¼æ˜¯ trueï¼Œå¯¼è‡´å€¼æ•°æ®æ”¶é›†ï¼› åˆå§‹å…ƒç´ ä¸å˜ï¼› 123456789101112131415161718192021var originalArray = [0, 34, 32, 1, 1, 23, 3214, 342, 1, 43, 56, 5, 8, 9, 0, 75];var bigNum1 = $.grep( originalArray, function(value) &#123; return value &gt; 10; &#125;, false);var bigNum2 = $.grep( originalArray, function(value) &#123; return value &gt; 10; &#125;, true);console.log(\"bigNum1\", bigNum1);console.log(\"bigNum2\", bigNum2);console.log(\"originalArray\", originalArray); è½¬æ¢æ•°ç»„$.map(collection, callback) collection[Array | Object] callback(Function) æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰å€¼å’Œåˆå§‹æ•°ç»„å€¼çš„ç´¢å¼•ï¼›å¦‚æœä¼ é€’çš„æ˜¯å¯¹è±¡ï¼Œåˆ™ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§çš„å½“å‰å€¼ï¼› 12345678910111213141516171819202122232425var oneBased = $.map([1, 2, 3, 0, 4], function(value) &#123; return value + 1;&#125;);console.log(\"oneBased\", oneBased);//å°†æ”¶é›†åˆ°çš„ä¿å­˜å­—ç¬¦ä¸²çš„æ•°ç»„æå–é‡Œé¢çš„æ•°å€¼ï¼Œå¦‚è‹¥æ˜¯ï¼Œåˆ™æå–ï¼Œå¦‚è‹¥ä¸æ˜¯ï¼Œåˆ™å¿½ç•¥ï¼›var strings = [\"1\", \"2\", \"3\", \"a\", \"b\", \"4\"];var values1 = $.map(strings, function(value) &#123; var result = new Number(value); return isNaN(result) ? null : result;&#125;);var values2 = $.map(strings, function(value) &#123; return isNaN(value) ? null : value;&#125;);console.log(\"values1\", values1);console.log(\"values2\", values2);//å¤„ç†ä»è½¬æ¢å‡½æ•°é‡Œè¿”å›çš„æ•°ç»„ï¼Œå¹¶å­˜å…¥ç»“æœæ•°ç»„ä¸­var characters = $.map([\"hello\", \"world\"], function(value) &#123; return value.split(\"\");&#125;);console.log(\"characters\", characters); $.inArray $.inArray(value, array[, fromIndex])ç¡®å®šä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªç‰¹å®šçš„å€¼ï¼Œæˆ–è€…ä½ç½® fromIndex(Number) æ•°ç»„ä¸­å¼€å§‹æŸ¥è¯¢çš„ä½ç½®ï¼›é»˜è®¤ 0 è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå‡ºç°å€¼å¾—ä½ç½®ç´¢å¼•ï¼Œæ²¡æœ‰è¿”å›-1 12345var index1 = $.inArray(2, [1, 2, 3, 4]);var index2 = $.inArray(3, [1, 2, 3, 4], 3);console.log(\"index1\", index1); //index 1console.log(\"index2\", index2); //index -1(æœªæ‰¾åˆ°) $.makeArray(object) â€“ æŠŠç±»æ•°ç»„å¯¹è±¡è½¬æ¢ä¸º JavaScript æ•°ç»„ $.merge(array1, array2) â€“ åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªæ•°ç»„è¢«ä¿®æ”¹åä½œä¸ºç»“æœè¿”å› æ‰©å±•å¯¹è±¡$.extend([deep,] target, [source1, source2,...,sourceN]) é€šè¿‡ä¼ é€’çš„å¯¹è±¡å±æ€§æ¥æ‰©å±• target å¯¹è±¡ï¼›æ‰©å±•åçš„å¯¹è±¡å¯ä½œä¸ºè¿”å›å€¼ deep(Boolean) å¿½ç•¥æˆ–è€…ä¸º falseï¼Œä½¿ç”¨æµ…æ‹·è´æ‰©å±•ï¼›trueï¼Œåˆ™ä½¿ç”¨æ·±æ‹·è´æ‰©å±• target(Object) ä½¿ç”¨æºå…ƒç´ å±æ€§æ¥æ‰©å±•ç›®æ ‡å¯¹è±¡ source1...(Object) ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¯¹è±¡,å±æ€§ä¼šæ·»åŠ åˆ° target ç›®æ ‡å¯¹è±¡ä¸­ 123456789101112131415161718192021//$.extend()å‡½æ•°åˆå¹¶äº†å¤šä¸ªæºå¯¹è±¡çš„å±æ€§ä¸åŒ…å«é‡å¤å€¼ï¼Œè€Œä¸”æŒ‰ç…§é¡ºåºæ’åºvar target = &#123; a: 1, b: 2, c: 3 &#125;;var source1 = &#123; c: 4, d: 5, e: 6 &#125;;var source2 = &#123; c: 8, e: 10, f: 9 &#125;;$.extend(target, source1, source2);console.log(\"target(after)\", target);//ä¼ é€’ç©ºå¯¹è±¡ä½œä¸ºç›®æ ‡var newObject = $.extend(&#123;&#125;, source1, source2);console.log(\"newObject\", newObject);//æ·±æ‹·è´var target1 = &#123; a: 1, b: 2 &#125;;var source11 = &#123; b: &#123; foo: \"bar\" &#125;, c: 3 &#125;;var source22 = &#123; b: &#123; oof: \"rab\" &#125;, d: 4 &#125;;$.extend(true, target1, source11, source22);console.log(\"target1\", target1); åºåˆ—åŒ–å‚æ•°$.param(params[, traditional]) åºåˆ—åŒ–ä¸ºé€‚å½“çš„å­—ç¬¦ä¸²ä¼ é€’ä¿¡æ¯ï¼Œä¾¿äºä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²æäº¤è¯·æ±‚ params(Array|jQuery|Object) traditional(Boolean) æ˜¯å¦æ‰§è¡Œä¼ ç»Ÿçš„å½±å­åºåˆ—åŒ– 12345678&lt;form action=\"\"&gt; &lt;lable for=\"name\"&gt;Name:&lt;/lable&gt; &lt;input id=\"name\" name=\"name\" value=\"YangTao\" /&gt; &lt;lable for=\"surname\"&gt;Surname:&lt;/lable&gt; &lt;input id=\"surname\" name=\"surname\" value=\"Bluth\" /&gt; &lt;lable for=\"address\"&gt;Address:&lt;/lable&gt; &lt;input id=\"address\" name=\"address\" value=\"Fake street 1, Beijing, China\" /&gt;&lt;/form&gt; 12var formResult = $.param($(\"input\"));console.log(\"formResult\", formResult); æµ‹è¯•å¯¹è±¡ $.isArray(param) param æ˜¯ JavaScript æ•°ç»„ï¼Œè¿”å› true,å¦åˆ™è¿”å› false $.isFunction(param) param æ˜¯å‡½æ•°ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false $.isNumeric(param) param æ˜¯æ•°å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false $.isWindow(param) param è¡¨ç¤º window å¯¹è±¡ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false $.isEmptyObject(param) param æ˜¯ JavaScript å¯¹è±¡ï¼Œä¸åŒ…å«å±æ€§ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false $.isPlainObject(param) param è¡¨ç¤ºç”¨ via{} æˆ–è€… new Object()åˆ›å»ºçš„ JavaScript å¯¹è±¡ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false $.isXMLDoc(param) param è¡¨ç¤º XML æ–‡æ¡£æˆ– XML èŠ‚ç‚¹ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false æŸ¥çœ‹å€¼çš„ç±»å‹ $.type(param) è§£æå‡½æ•° $.paramJSON(json) $.paramXML(xml) $.paramHTML(html[,context][,keepScripts]) æµ‹è¯•åŒ…å« $.contains(container, contained) æµ‹è¯•å…ƒç´ æ˜¯å¦åŒ…å«åœ¨ DOM å±‚çš„å¦ä¸€ä¸ªå…ƒç´ ä¸­","categories":[{"name":"å·¥å…·åº“","slug":"å·¥å…·åº“","permalink":"https://www.yangtao.site/categories/å·¥å…·åº“/"}],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://www.yangtao.site/tags/jQuery/"}]},{"title":"embedåµŒå…¥å¤šä¸ªä¼˜é…·è§†é¢‘å¹¶è‡ªåŠ¨æ’­æ”¾","slug":"practice-video-embed","date":"2017-01-22T05:41:48.000Z","updated":"2020-03-18T07:14:26.239Z","comments":true,"path":"2017/01/22/practice-video-embed/","link":"","permalink":"https://www.yangtao.site/2017/01/22/practice-video-embed/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• å…³äº embed æ ‡ç­¾ç‰¹ç‚¹ï¼š å¤šä¸ªè§†é¢‘é€‰æ‹©ï¼› å¼¹å‡ºæ¨¡æ€æ¡†ï¼Œä¸èƒ½ä¸Šä¸‹æ»‘åŠ¨ï¼› è§†é¢‘è‡ªå¸¦å¯å…¨å±ï¼› è§†é¢‘è‡ªåŠ¨æ’­æ”¾ï¼› å…¼å®¹ IEï¼ŒIE ä¼šæœ‰æ’­æ”¾æ®‹ç•™ï¼Œæ‰€ä»¥è®©å…¶åˆ·æ–°é¡µé¢ï¼› å…¶ä»–æµè§ˆå™¨ï¼šç«ç‹ï¼Œè°·æ­Œï¼Œedgeï¼Œsafari ç­‰ï¼› é¦–å…ˆï¼Œå…ˆçœ‹ä¸€ä¸‹åµŒå…¥ç½‘é¡µä¸­ä¼˜é…·è§†é¢‘çš„å®Œæ•´ä»£ç ï¼ˆç›´æ¥ä»ä¼˜é…·åˆ†äº«å¾—åˆ°çš„ HTML ä»£ç ï¼‰ï¼š 12345678910&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;head&gt;&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;&lt;title&gt;embed&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;embed src='http://player.youku.com/player.php/sid/XMjQ4MDg2MTc2MA==/v.swf' allowFullScreen='true' quality='high' width='480' height='400' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'&gt;&lt;/embed&gt;&lt;/body&gt;&lt;/html&gt; ä»£ç ä¸­ï¼Œ&lt;embed&gt;çš„ç›¸å…³å±æ€§ï¼š src â€” æŒ‡å‘èµ„æºï¼› quality=&#39;high&#39; â€” è§†é¢‘çš„é»˜è®¤æ¸…æ™°åº¦ï¼Œä¸€èˆ¬ä¸º high; width,height â€” è§†é¢‘çš„å®½ã€é«˜åº¦ï¼› align=&#39;middle&#39; â€” è§†é¢‘çš„ä½ç½®ï¼› allowFullScreen=&#39;true&#39; â€” æ˜¯å¦è¿è¡Œå…¨å±è§‚çœ‹ï¼Œé»˜è®¤ true; type=&#39;application/x-shockwave-flash&#39; â€” å„ä¸ªæµè§ˆå™¨æ”¯æŒæƒ…å†µï¼› allowScriptAccess=&#39;always&#39; â€” ç‰¹æ®Šå±æ€§ï¼Œç”¨äºç¡®ä¿ Flash å½±ç‰‡å¯èƒ½ç‰¹å®šäºæŸä¸ªç‰ˆæœ¬çš„ Flashï¼› å¸¸ç”¨çš„åŸºæœ¬å±æ€§å°±è¿™äº›äº†ï¼Œä¸è¿‡ï¼Œè¿™ä¸ªåµŒå…¥çš„è§†é¢‘ï¼Œé»˜è®¤æ˜¯ä¸è‡ªåŠ¨æ’­æ”¾ï¼Œä¸‹é¢æ¥çœ‹çœ‹è‡ªåŠ¨æ’­æ”¾çš„è®¾ç½®ä»£ç ï¼š 1234567891011&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;head&gt;&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;&lt;title&gt;embed&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;embed src='http://player.youku.com/player.php/sid/XMjQ4MDg2MTc2MA==/v.swf?VideoIDS=XMjQ4MDg2MTc2MA==&amp;isAutoPlay=true&amp;isShowRelatedVideo=false&amp;showAd=0' allowFullScreen='true' quality='high' width='480' height='400' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'&gt;&lt;/embed&gt;&lt;/body&gt;&lt;/html&gt; è¿™äº›å±æ€§ä¸€çœ‹å°±æ˜ç™½ï¼š isAutoPlay=true â€” æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼› isShowRelatedVideo=false â€” æ˜¯å¦å±•ç¤ºç›¸å…³è§†é¢‘ï¼› å¥½äº†ï¼Œembed çš„å¸¸ç”¨å±æ€§ä»‹ç»å®Œæ¯•ï¼Œæ¥ä¸‹æ¥å’±ä»¬ä¸€èµ·çœ‹çœ‹å¦‚ä½•è·Ÿæ¢è§†é¢‘çš„é“¾æ¥ï¼š ç¬¬ä¸€æ­¥ç”±äºæ˜¯å¤šä¸ªè§†é¢‘å±•ç¤ºï¼Œæ‰€ä»¥å¤åˆ¶å¤šä¸ª data-item å€¼ï¼š 12345678910111213141516171819202122&lt;ul id=\"videoList\"&gt; &lt;li data-item=\"1\"&gt; &lt;button type=\"button\" name=\"video01\"&gt;è§†é¢‘01&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;li data-item=\"2\"&gt; &lt;button type=\"button\" name=\"video02\"&gt;è§†é¢‘02&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;li data-item=\"3\"&gt; &lt;button type=\"button\" name=\"video03\"&gt;è§†é¢‘03&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;li data-item=\"4\"&gt; &lt;button type=\"button\" name=\"video04\"&gt;è§†é¢‘04&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt;&lt;/ul&gt; ç¬¬äºŒæ­¥æ¨¡æ€æ¡†è®¾ç½®ï¼Œå¹¶ä¸”è®¾ç½®è§†é¢‘å…³é—­æŒ‰é’®ï¼Œï¼ˆè¿™é‡Œæ²¡æœ‰ç›´æ¥å°† embed çš„å†…å®¹å†™å…¥åœ¨é¡µé¢ä¸Šï¼Œé˜²æ­¢æœ‰äº›æµè§ˆå™¨ç›´æ¥è·³è¿‡ js ä»£ç ï¼‰ 123456&lt;!--é®ç½©å±‚--&gt;&lt;div id=\"mask\"&gt;&lt;/div&gt;&lt;!--è§†é¢‘åŒº--&gt;&lt;div id=\"videoModal\"&gt; &lt;div id=\"closeBtn\"&gt;&lt;a&gt;x&lt;/a&gt;&lt;/div&gt;&lt;/div&gt; ç¬¬ä¸‰æ­¥ä½¿ç”¨ jquery è·å–åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦æ˜¯éœ€è¦ç‚¹å‡»çš„å¯¹è±¡ï¼š 123456789101112131415161718var embedEle;var videoID = \"\";var videoSrc;var videoModal = $(\"#videoModal\");var $targetEle = $(\"#videoList\").find(\"li\");//ç‚¹å‡»è§†é¢‘ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯buttonï¼Œæ’é™¤å…¶ä»–å†…å®¹$targetEle.click(function(e) &#123; var dataItem = $(this).attr(\"data-item\"); var $para1 = $(this).find(\"p\")[0]; var $para2 = $(this).find(\"p\")[1]; if (e.target == $para1 || e.target == $para2) &#123; return; &#125; else &#123; videoID = isWhichSrc(dataItem); videoFunc(videoID); return false; &#125;&#125;); æ ¹æ®data-itemçš„å€¼ï¼Œè·å–ç‚¹å‡»çš„data-itemï¼Œå¹¶æ‰§è¡ŒisWhichSrc(num)å‡½æ•°,å¹¶å°†è·å–åˆ°çš„è§†é¢‘é“¾æ¥èµ‹å€¼ç»™videoID = isWhichSrc(dataItem);ï¼š 12345678910111213141516//æ ¹æ®å¾—åˆ°çš„data-itemå€¼åˆ¤æ–­ç›¸å¯¹åº”çš„è§†é¢‘IDvar isWhichSrc = function(num) &#123; if (num == 1) &#123; videoID = \"XMjQ4MDg2MTc2MA\"; &#125; if (num == 2) &#123; videoID = \"XMTY0OTYzNTU0NA\"; &#125; if (num == 3) &#123; videoID = \"XMTQyMDExNjA4NA\"; &#125; if (num == 4) &#123; videoID = \"XMTc2MDAxOTIwOA\"; &#125; return videoID;&#125;; ç„¶åå°†æ­¤å€¼ä¼ å…¥ç»™videoFunc(videoid)ï¼›è¯¥å‡½æ•°ä¸­ï¼Œåˆ›å»ºembedå¹¶æ·»åŠ åˆ°é¡µé¢ä¸Šï¼š 123456789101112131415161718//æ ¹æ®è§†é¢‘IDèµ‹å€¼è§†é¢‘é“¾æ¥function videoFunc(videoid) &#123; videoSrc = \"http://player.youku.com/player.php/sid/\" + videoid + \"==/v.swf?VideoIDS=\" + videoid + \"==&amp;isAutoPlay=true&amp;isShowRelatedVideo=false&amp;showAd=0\"; embedEle = \"&lt;embed src='\" + videoSrc + \"' allowFullScreen='true' quality='high' width='610' height='460' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'&gt;&lt;/embed&gt;\"; //å°†è·å¾—çš„embedæ ‡ç­¾æ·»åŠ è¿›å» videoModal.append(embedEle); $(\"#videoModal\").slideDown(600); showMask();&#125; æœ€åå°±æ˜¯å…³äºé®ç½©å±‚çš„å‡½æ•°ï¼š 1234567891011121314function showMask() &#123; $(\"body\").css(\"overflow\", \"hidden\"); $(\"#mask\") .css(&#123; height: $(document).height(), width: $(document).width() &#125;) .slideDown(600);&#125;function hideMask() &#123; $(\"#mask\").slideUp(600); bodyShow();&#125;function bodyShow() &#123; $(\"body\").css(\"overflow\", \"auto\");&#125; å®Œæ•´æ —å­123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;youku-video-embed&lt;/title&gt; &lt;/head&gt; &lt;script type=\"text/javascript\" src=\"http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js\" &gt;&lt;/script&gt; &lt;style type=\"text/css\"&gt; * &#123; margin: 0; padding: 0; &#125; /*é®ç½©å±‚*/ #mask &#123; position: fixed; top: 0; left: 0; opacity: 0.8; filter: alpha(opacity=80); background-color: #000; z-index: 99; &#125; /*è§†é¢‘*/ #closeBtn &#123; float: right; padding-right: 5px; width: 14px; height: 20px; line-height: 20px; &#125; #closeBtn a &#123; font-size: 18px; font-weight: bold; cursor: pointer; color: #666; &#125; #closeBtn a:hover &#123; color: #fff; text-decoration: none; &#125; #videoModal &#123; display: none; position: fixed; top: 10%; left: 50%; margin-left: -305px; width: 610px; height: 480px; background-color: #000; z-index: 100; &#125; /*æŒ‰é’®*/ .wrapper &#123; margin: 0 auto; width: 100%; max-width: 1140px; text-align: center; &#125; h3 &#123; margin-top: 20px; color: #b403b7; &#125; ul &#123; overflow: hidden; &#125; ul li &#123; float: left; list-style-type: none; margin: 10px 20px; &#125; p &#123; font-size: 14px; font-family: \"å¾®è½¯é›…é»‘\"; color: #999; &#125; .wrapper button &#123; margin-top: 50px; width: 200px; height: 200px; cursor: pointer; border-radius: 8px; color: #666; &#125; .wrapper button:hover &#123; opacity: 0.8; filter: alpha(opacity=80); &#125; &lt;/style&gt; &lt;body&gt; &lt;!--é®ç½©å±‚--&gt; &lt;div id=\"mask\"&gt;&lt;/div&gt; &lt;!--è§†é¢‘åŒº--&gt; &lt;div id=\"videoModal\"&gt; &lt;div id=\"closeBtn\"&gt;&lt;a&gt;x&lt;/a&gt;&lt;/div&gt; &lt;/div&gt; &lt;!--æŒ‰é’®--&gt; &lt;div class=\"wrapper\"&gt; &lt;h3&gt;embedé“¾æ¥ä¼˜é…·è§†é¢‘è‡ªåŠ¨æ’­æ”¾&lt;/h3&gt; &lt;ul id=\"videoList\"&gt; &lt;li data-item=\"1\"&gt; &lt;button type=\"button\" name=\"video01\"&gt;è§†é¢‘01&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;li data-item=\"2\"&gt; &lt;button type=\"button\" name=\"video02\"&gt;è§†é¢‘02&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;li data-item=\"3\"&gt; &lt;button type=\"button\" name=\"video03\"&gt;è§†é¢‘03&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;li data-item=\"4\"&gt; &lt;button type=\"button\" name=\"video04\"&gt;è§†é¢‘04&lt;/button&gt; &lt;p&gt;è§†é¢‘ç®€ä»‹&lt;/p&gt; &lt;p&gt;è§†é¢‘æè¿°è§†é¢‘æè¿°è§†é¢‘æè¿°&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;!--js--&gt; &lt;script&gt; var embedEle; var videoID = \"\"; var videoSrc; var videoModal = $(\"#videoModal\"); var $targetEle = $(\"#videoList\").find(\"li\"); //ç‚¹å‡»è§†é¢‘ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯buttonï¼Œæ’é™¤å…¶ä»–å†…å®¹ $targetEle.click(function(e) &#123; var dataItem = $(this).attr(\"data-item\"); var $para1 = $(this).find(\"p\")[0]; var $para2 = $(this).find(\"p\")[1]; if (e.target == $para1 || e.target == $para2) &#123; return; &#125; else &#123; videoID = isWhichSrc(dataItem); videoFunc(videoID); return false; &#125; &#125;); //å…³é—­ $(\"#closeBtn\").click(function() &#123; videoModal .slideUp(600) .find(\"embed\") .remove(); //å…¼å®¹IEï¼Œè®©å…¶åˆ·æ–°é¡µé¢ï¼Œå¯¹å…¶ä»–æµè§ˆå™¨æ— æ•ˆ document.execCommand(\"Refresh\"); hideMask(); return false; &#125;); //æ ¹æ®å¾—åˆ°çš„data-itemå€¼åˆ¤æ–­ç›¸å¯¹åº”çš„è§†é¢‘ID var isWhichSrc = function(num) &#123; if (num == 1) &#123; videoID = \"XMjQ4MDg2MTc2MA\"; &#125; if (num == 2) &#123; videoID = \"XMTY0OTYzNTU0NA\"; &#125; if (num == 3) &#123; videoID = \"XMTQyMDExNjA4NA\"; &#125; if (num == 4) &#123; videoID = \"XMTc2MDAxOTIwOA\"; &#125; return videoID; &#125;; //æ ¹æ®è§†é¢‘IDèµ‹å€¼è§†é¢‘é“¾æ¥ function videoFunc(videoid) &#123; videoSrc = \"http://player.youku.com/player.php/sid/\" + videoid + \"==/v.swf?VideoIDS=\" + videoid + \"==&amp;isAutoPlay=true&amp;isShowRelatedVideo=false&amp;showAd=0\"; embedEle = \"&lt;embed src='\" + videoSrc + \"' allowFullScreen='true' quality='high' width='610' height='460' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'&gt;&lt;/embed&gt;\"; //å°†è·å¾—çš„embedæ ‡ç­¾æ·»åŠ è¿›å» videoModal.append(embedEle); $(\"#videoModal\").slideDown(600); showMask(); &#125; //é®ç½©å±‚éƒ¨åˆ† function showMask() &#123; $(\"body\").css(\"overflow\", \"hidden\"); $(\"#mask\") .css(&#123; height: $(document).height(), width: $(document).width() &#125;) .slideDown(600); &#125; function hideMask() &#123; $(\"#mask\").slideUp(600); bodyShow(); &#125; function bodyShow() &#123; $(\"body\").css(\"overflow\", \"auto\"); &#125; &lt;/script&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/tags/Html/"}]},{"title":"åˆè¯†JavaScriptçš„è§£æä¸æ‰§è¡Œè¿‡ç¨‹","slug":"practice-compiler","date":"2016-09-16T14:56:30.000Z","updated":"2020-03-18T07:04:21.652Z","comments":true,"path":"2016/09/16/practice-compiler/","link":"","permalink":"https://www.yangtao.site/2016/09/16/practice-compiler/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• å…¨å±€é¢„å¤„ç†å…ˆæ‰«æå‡½æ•°å£°æ˜ï¼Œå†æ‰«æå˜é‡å£°æ˜ï¼š å‡½æ•°ï¼šç”¨å£°æ˜çš„æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼› å˜é‡ï¼šç”¨ var å®šä¹‰çš„å˜é‡ï¼›åˆå§‹åŒ–ä¸º undefinedï¼› å¦‚æœå‡ºç°å‘½åå†²çª æ—¶ï¼š å‡½æ•°å£°æ˜ï¼šè¦†ç›–ï¼› å˜é‡å£°æ˜ï¼šå¿½ç•¥ï¼› 12345678f(); //fffg(); //TypeError: g is not a functionfunction f() &#123; console.log(\"fff\");&#125;var g = function() &#123; console.log(\"ggg\");&#125;; f()å‡½æ•°æ˜¯å£°æ˜æ–¹å¼åˆ›å»ºçš„å‡½æ•°ï¼Œg()æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼Œå…¨å±€é¢„å¤„ç†æ—¶è¯æ³•ç¯å¢ƒä¸­ï¼Œåªèƒ½æ˜¯ç”¨å£°æ˜çš„æ–¹å¼åˆ›å»ºçš„å‡½æ•°ã€‚ å› æ­¤ï¼Œå…¨å±€é¢„å¤„ç†æ—¶ g()ä»è¯­ä¹‰ä¸Šçœ‹ï¼Œåº”è¯¥æ˜¯å‡½æ•°ï¼Œä½†æ˜¯ç”±äº g()æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼Œä¸ä¼šåœ¨è¯æ³•ç¯å¢ƒä¸­ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶ä¼šæŠ¥é”™ã€‚ 1234console.log(a); // undefinedconsole.log(b); //ReferenceError: b is not definedvar a = 1;b = 2; åŒç†ï¼Œè¯æ³•ç¯å¢ƒä¸­åªæœ‰ç”¨ var å®šä¹‰çš„å˜é‡ã€‚ 123456789101112alert(f); //function f()&#123;alert('567');&#125;var f = 1;function f() &#123; alert(\"123\");&#125;var f = 2;function f() &#123; alert(\"567\");&#125;var f = function() &#123; alert(\"890\");&#125;; å‘½åå†²çªæ—¶ï¼Œå‡½æ•°å…·æœ‰â€œä¼˜å…ˆæƒâ€ï¼Œå˜é‡ä¼šç›´æ¥è¢«å¿½ç•¥ï¼Œè€Œå‡½æ•°ä¼šè¢«è¦†ç›–ã€‚ å…¨å±€æ‰§è¡Œè¿‡ç¨‹1234567891011121314alert(a); //undefinedalert(b); //ReferenceError: b is not definedalert(f); //function f() &#123;console.log('f');&#125;alert(g); //undefinedvar a = 1;b = 2;alert(b); //2function f() &#123; console.log(\"f\");&#125;var g = function() &#123; console.log(\"g\");&#125;;alert(g); //function () &#123;console.log('g');&#125; ä¸ºäº†åˆ†ææ–¹ä¾¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯æ³•ç¯å¢ƒï¼š 1LexicalEnvironment &#123;&#125; === windowï¼› å…¨å±€é¢„å¤„ç†æ—¶ï¼š 1234567window &#123; //å…ˆæ‰«æå‡½æ•°å£°æ˜ï¼š f: æŒ‡å‘å‡½æ•°, //å†æ‰«é¢å˜é‡å£°æ˜ï¼š a: undefined, g: undefined&#125; å…¨å±€æ‰§è¡Œæ—¶ï¼š 123456window &#123; f: æŒ‡å‘å‡½æ•°, a: 1, b: 2, g: æŒ‡å‘å‡½æ•°&#125; å‡½æ•°é¢„å¤„ç†é˜¶æ®µ æ¯è°ƒç”¨ä¸€æ¬¡ï¼Œäº§ç”Ÿä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼ˆæˆ–æ‰§è¡Œä¸Šä¸‹æ–‡Execution Contextï¼‰ï¼› å…ˆä¼ å…¥å‡½æ•°çš„å‚æ•°ï¼Œè‹¥å‚æ•°å€¼ä¸ºç©ºï¼Œåˆå§‹åŒ–undefinedï¼› ç„¶åæ˜¯å†…éƒ¨å‡½æ•°å£°æ˜ï¼Œè‹¥å‘ç”Ÿå‘½åå†²çªï¼Œä¼šè¦†ç›–ï¼› æ¥ç€å°±æ˜¯å†…éƒ¨varå˜é‡å£°æ˜ï¼Œè‹¥å‘ç”Ÿå‘½åå†²çªï¼Œä¼šå¿½ç•¥ï¼› å‡½æ•°æ‰§è¡Œé˜¶æ®µ ç»™é¢„å¤„ç†é˜¶æ®µçš„æˆå‘˜èµ‹å€¼ï¼› æ—  var å£°æ˜çš„å˜é‡ï¼Œä¼šæˆä¸ºå…¨å±€æˆå‘˜ï¼› 1234567function f(a, b) &#123; alert(a); //1 alert(b); //funciton b()&#123;&#125; var a = 100; function b() &#123;&#125;&#125;f(1, 2); VOï¼ˆVariable Objectï¼‰â€”â€”&gt; å˜é‡å¯¹è±¡ å‡½æ•°ä¸­çš„æ¿€æ´»å¯¹è±¡ï¼šVOï¼ˆfunctionContextï¼‰=== AO; 1234AO(f) &#123; a: 1, //å˜é‡å‘½åå†²çªï¼Œå¿½ç•¥ b: æŒ‡å‘å‡½æ•°, //å‡½æ•°å‘½åå†²çªï¼Œè¦†ç›–&#125; ä¾‹å¦‚ï¼š 1234567891011121314151617function test(a, b) &#123; alert(a); //10 alert(b); //undefined alert(c); //undefined alert(d); //function d()&#123;&#125; alert(e); //undefined //alert(x); //ReferenceError: x is not defined var c = 10; alert(c); //10 function d() &#123;&#125; var e = function _e() &#123;&#125;; alert(e); //function _e()&#123;&#125; (function x() &#123;&#125;); b = 20; alert(b); //20&#125;test(10); å‡½æ•°é¢„å¤„ç†æ—¶ï¼š 12345678910111213AOï¼ˆtestï¼‰ &#123; //å‚æ•°ï¼š a: 10, b: undefined, //å‡½æ•°å£°æ˜ï¼š d: æŒ‡å‘å‡½æ•°ï¼Œ //å˜é‡å£°æ˜ï¼š c: undefined, e: undefined&#125; å‡½æ•°æ‰§è¡Œæ—¶ï¼š 1234567AOï¼ˆtestï¼‰ &#123; a: 10, b: 20, d: æŒ‡å‘å‡½æ•°ï¼Œ c: 10, e: æŒ‡å‘å‡½æ•°&#125;","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"åˆè¯†JavaScriptçš„å¯¹è±¡å±æ€§ç±»å‹","slug":"practice-object-attribute","date":"2016-09-14T15:22:22.000Z","updated":"2020-03-18T04:07:25.178Z","comments":true,"path":"2016/09/14/practice-object-attribute/","link":"","permalink":"https://www.yangtao.site/2016/09/14/practice-object-attribute/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• ä½•ä¸ºå¯¹è±¡ç®€å•ç‚¹è¯´ï¼Œå¯¹è±¡åŒ…å«å±æ€§æˆ–æ–¹æ³•ï¼Œè€Œå¯¹è±¡çš„æ¯ä¸ªå±æ€§æˆ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªåå­—åˆéƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚ æ‰€ä»¥ï¼Œå¯¹è±¡å°±æ˜¯ä¸€ç»„åå€¼å¯¹ï¼ˆé”®å€¼å¯¹ï¼‰ï¼Œå…¶ä¸­å€¼å¯ä»¥æ˜¯æ•°æ®æˆ–å‡½æ•°ã€‚ æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯åŸºäºä¸€ä¸ªå¼•ç”¨ç±»å‹åˆ›å»ºçš„ï¼Œè¿™ä¸ªå¼•ç”¨ç±»å‹å¯ä»¥æ˜¯åŸç”Ÿç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰ç±»å‹ã€‚ åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡åˆ›å»ºä¸€ä¸ª Object çš„å®ä¾‹ï¼š 12345678varperson = new Object();person.name = \"Bob\";person.age = 24;person.job = \"Teacher\";person.sayName = function() &#123; alert(this.name);&#125;; ç”¨å¯¹è±¡å­—é¢é‡é‡æ–°åˆ›å»ºå¯¹è±¡ï¼š 123456789var person = &#123; name: \"Bob\", age: 24, job: \"Teacher\", sayName: function() &#123; alert(this.name); &#125;&#125;; ç”¨ä¸¤ç§æ–¹å¼åˆ›å»ºçš„ person å¯¹è±¡éƒ½æœ‰ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚ å±æ€§ç±»å‹å±æ€§ç±»å‹åˆ†ä¸ºæ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§ã€‚ æ•°æ®å±æ€§æœ‰ 4 ä¸ªç‰¹æ€§ï¼š [[Configurable]] [[Enumerable]] [[Writable]] [[Value]] è®¿é—®å™¨å±æ€§ä¹Ÿæœ‰ 4 ä¸ªç‰¹æ€§ï¼Œä¸åŒ…å«æ•°æ®å€¼ï¼ŒåŒ…å«ä¸€å¯¹å„¿ getter å’Œ setter å‡½æ•°ï¼š [[Configurable]] [[Enumerable]] [[Get]] [[Set]] ä¿®æ”¹å±æ€§é»˜è®¤çš„ç‰¹æ€§Object.defineProperty()æ–¹æ³•ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼› å±æ€§çš„åå­—ï¼› ä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡ï¼› æ•°æ®å±æ€§ä¾‹å­ï¼š 12345678910var person = &#123;&#125;ï¼›Object.defineProperty(person, \"name\", &#123; writeable: false, configurable: false, value: \"Bob\"&#125;);alert(person.name); //\"Bob\"person.name = \"Mike\";alert(person.name); //\"Bob\" ä¾‹å­ä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸º name çš„å±æ€§ï¼Œç”±äº writable è®¾ç½®ä¸º false,name çš„å€¼æ˜¯â€œåªè¯»â€çš„ï¼Œä¸å¯ä¿®æ”¹ï¼› æŠŠ configurable è®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºä¸èƒ½ä»å¯¹è±¡ä¸­åˆ é™¤ï¼ˆdeleteï¼‰å±æ€§ï¼Œè€Œä¸”ï¼Œä¸€æ—¦æŠŠå±æ€§å®šä¹‰ä¸ºä¸å¯é…ç½®çš„ï¼Œå†æ¬¡è°ƒç”¨ Object.defineProperty()æ–¹æ³•ä¿®æ”¹ writable ä¹‹å¤–çš„ç‰¹æ€§ï¼Œä¼šå¯¼è‡´é”™è¯¯ã€‚ åœ¨è°ƒç”¨Object.defineProperty()æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œconfigurableã€ enumerableã€ writableç‰¹æ€§çš„é»˜è®¤å€¼éƒ½æ˜¯false; å¦‚æœä¸è°ƒç”¨Object.defineProperty()æ–¹æ³•æ—¶ï¼Œå³ç›´æ¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰çš„å±æ€§ï¼Œä»–ä»¬çš„configurable enumerable writableç‰¹æ€§çš„é»˜è®¤å€¼éƒ½æ˜¯trueï¼Œvalueç‰¹æ€§ä¸ºæŒ‡å®šçš„å€¼ï¼ˆé»˜è®¤å€¼ä¸ºundefinedï¼‰ï¼› getter setter æ–¹æ³•ï¼š 123456789101112131415var person = &#123; name: \"Bob\", job: \"Teacher\", get age() &#123; return new Date().getFullYear() - 1992; &#125;, set age(val) &#123; alert(\"Age can't be set to \" + val); &#125;&#125;;alert(person.age); //24person.age = 100; //Age can't be set to 100alert(person.age); //still 24 ä»¥ä¸Šä»£ç åˆ›å»ºäº†ä¸€ä¸ª person å¯¹è±¡ï¼Œå¹¶å®šä¹‰äº†ä¸¤ä¸ªé»˜è®¤çš„å±æ€§ï¼šname å’Œ job,è€Œä¸”åŒ…å«æœ‰ä¸€ä¸ª getter å‡½æ•°å’Œä¸€ä¸ª setter å‡½æ•°ã€‚ getter å‡½æ•°è¿”å› age çš„å€¼ï¼› setter å‡½æ•°è¿”å›è®¾ç½® age çš„å€¼ valï¼› å®šä¹‰å¤šä¸ªå±æ€§ï¼šObject.defineProperties()æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå¯¹è±¡å‚æ•°ï¼š ç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯è¦æ·»åŠ å’Œä¿®æ”¹å…¶å±æ€§çš„å¯¹è±¡ï¼› ç¬¬äºŒä¸ªå¯¹è±¡çš„å±æ€§ä¸ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸­è¯æ·»åŠ æˆ–ä¿®æ”¹çš„å±æ€§ä¸€ä¸€å¯¹åº”ã€‚ 12345678910111213141516171819202122232425262728var book = &#123;&#125;;Object.defineProperties(book, &#123; _year: &#123; writable: true, value: 2016 &#125;, edition: &#123; writable: true, value: 1 &#125;, year: &#123; get: function() &#123; return this._year; &#125;, set: function(val) &#123; if (val &gt; 2016) &#123; this._year = val; this.edition += val - 2016; &#125; &#125; &#125;&#125;);console.log(book.year); //2016console.log(book.edition); //1book.year = 2018;console.log(book.edition); //3 ä»¥ä¸Šä»£ç åœ¨ book å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸¤ä¸ªæ•°æ®å±æ€§ï¼ˆ_year å’Œ editionï¼‰å’Œä¸€ä¸ªè®¿é—®å™¨å±æ€§ï¼ˆyearï¼‰ã€‚ è¯»å–å±æ€§çš„ç‰¹æ€§Object.getOwnPropertyDescriptor()æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼› è¦è¯»å–å…¶æè¿°ç¬¦çš„å±æ€§åç§°ã€‚ è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š æ•°æ®å±æ€§ï¼Œå¯¹è±¡çš„å±æ€§æœ‰configurable ã€enumerableã€ writableã€valueï¼› è®¿é—®å™¨å±æ€§ï¼Œå¯¹è±¡çš„å±æ€§æœ‰configurable ã€enumerableã€ getã€setã€‚ 1234567891011121314151617181920212223242526272829303132var book = &#123;&#125;;Object.defineProperties(book, &#123; _year: &#123; value: 2016 &#125;, edition: &#123; value: 1 &#125;, year: &#123; get: function() &#123; return this._year; &#125;, set: function(val) &#123; if (val &gt; 2016) &#123; this._year = val; this.edition += val - 2016; &#125; &#125; &#125;&#125;);var descriptor = Object.getOwnPropertyDescriptor(book, \"_year\");console.log(descriptor.value); //2016console.log(descriptor.configurable); //falseconsole.log(typeof descriptor.get); //undefinedvar descriptor = Object.getOwnPropertyDescriptor(book, \"year\");console.log(descriptor.value); //undefinedconsole.log(descriptor.enumerable); //falseconsole.log(typeof descriptor.get); //function æ•°æ®å±æ€§_yearï¼Œvalue ç­‰äºæœ€åˆçš„å€¼ï¼Œconfigurable æ˜¯ falseï¼Œè€Œ get ç­‰äº undefinedï¼› è®¿é—®å™¨å±æ€§ yearï¼Œvalue ç­‰äº undefinedï¼Œenumerable æ˜¯ falseï¼Œè€Œ get æ˜¯ä¸€ä¸ªæŒ‡å‘ getter å‡½æ•°çš„æŒ‡é’ˆã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"åˆè¯†JavaScriptçš„é¢å‘å¯¹è±¡","slug":"practice-object","date":"2016-08-21T09:23:22.000Z","updated":"2020-03-18T03:59:34.204Z","comments":true,"path":"2016/08/21/practice-object/","link":"","permalink":"https://www.yangtao.site/2016/08/21/practice-object/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• é¦–å…ˆï¼Œé¢å‘å¯¹è±¡æ˜¯ä»€ä¹ˆ æµ…æ˜¾åœ°è¯´ï¼Œé¢å‘å¯¹è±¡å°±æ˜¯åªå…³æ³¨å¯¹è±¡æä¾›çš„åŠŸèƒ½ï¼Œä¸åœ¨ä¹å…¶å†…éƒ¨çš„å…·ä½“ç»†èŠ‚ï¼› æ¯”å¦‚ï¼Œç”µè§†æœºï¼Œæˆ‘ä»¬çŸ¥é“æ€ä¹ˆæ‰“å¼€ã€å…³é—­ã€è°ƒå°ï¼Œä½†ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä¸çŸ¥é“å®ƒåˆ°åº•æ˜¯å¦‚ä½•æ‰“å¼€ã€å…³é—­ã€è°ƒå°çš„ã€‚ å†æ¯”å¦‚ï¼Œé»‘åŒ£å­ï¼› é¢å‘å¯¹è±¡æ˜¯ä¸€ç§é€šç”¨æ€æƒ³ï¼Œå¹¶éåªæœ‰ç¼–ç¨‹ä¸­æ‰ä½¿ç”¨ï¼Œä»»ä½•äº‹æƒ…éƒ½å¯ä»¥æ‰¾åˆ°å®ƒçš„å½±å­ã€‚ OOP çš„ç‰¹ç‚¹ é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹ç‚¹ï¼š 1. æŠ½è±¡â€”æŠ“ä½æ ¸å¿ƒé—®é¢˜ï¼› 2. å°è£…â€”åªè€ƒè™‘åŠŸèƒ½ä½¿ç”¨ï¼Œä¸è€ƒè™‘å†…éƒ¨å®ç°ï¼› 3. ç»§æ‰¿â€”ä»å·²æœ‰çš„å¯¹è±¡ä¸Šï¼Œç»§æ‰¿å‡ºæ–°çš„å¯¹è±¡ï¼› åŸå‹ å®šä¹‰å°±ä¸ç²˜è´´äº†ï¼Œé€šä¿—æ»´è¯´ï¼Œprototype ç±»ä¼¼äºæˆ‘ä»¬ css ä¸­çš„ classï¼› æ¯”å¦‚ï¼Œæˆ‘ä»¬ç»™å¤šä¸ª div æ·»åŠ ç›¸åŒçš„å±æ€§æ—¶ï¼Œå°±ä¼šä½¿ç”¨ classï¼›åŒæ ·çš„ï¼Œä½¿ç”¨ prototype å°±æ˜¯éœ€è¦æ·»åŠ å¤šä¸ªæ–¹æ³•ï¼š 123456CreatePerson.prototype.showName = function() &#123; console.log(\"æˆ‘æ˜¯\" + this.name);&#125;;CreatePerson.prototype.showQQ = function() &#123; console.log(\"æˆ‘çš„qqå·æ˜¯ï¼š\" + this.qq);&#125;; ä»£ç ä¸­ï¼Œä¸€ä¸ªäººçš„åå­—å’Œ QQ å·ï¼Œå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„å‡½æ•°æ¥è§£å†³ï¼Œè‹¥ä¸¤ä¸ªï¼Œåä¸ªçš„å°±éº»çƒ¦äº†ï¼Œå› æ­¤ä½¿ç”¨åŸå‹prototypeå¯ä»¥å¾ˆå¥½åœ°è§£å†³å‡½æ•°é‡å¤å¯¼è‡´çš„èµ„æºæµªè´¹ã€‚ ç±»å’Œå¯¹è±¡çš„å…³ç³» å¯¹è±¡ï¼Œç”±æ–¹æ³•å’Œå±æ€§ç»„æˆï¼› ç±»ï¼Œæ¯”å¦‚æ•°ç»„ Arrayï¼› 1var arr = new Array(1, 2, 3, 4); å…¶ä¸­ arr æ˜¯å¯¹è±¡ï¼ŒArray æ˜¯ç±»ï¼› æˆ‘ä»¬å¯ä»¥æŠŠç±»çœ‹åšæ˜¯åˆ¶ä½œäº§å“çš„ç£¨å…·ï¼Œè€Œå¯¹è±¡å°±æ˜¯ç”±æ¨¡å…·åˆ¶ä½œå‡ºæ¥çš„äº§å“ã€‚ ç±» â€” æ¨¡å…·ï¼› å¯¹è±¡ â€” äº§å“ï¼› ä»£ç ï¼šé¢å‘è¿‡ç¨‹1234567891011121314151617181920212223function createPerson(name, qq) &#123; // åŠ newä¹‹åï¼Œç³»ç»Ÿå·å·ç»™åŠ äº†var this=new Object(); // var person1 = new Object(); this.name = name; this.qq = qq; this.showName = function() &#123; console.log(\"æˆ‘æ˜¯\" + this.name); &#125;; this.showQQ = function() &#123; console.log(\"æˆ‘çš„QQå·æ˜¯\" + this.qq); &#125;; // åŠ newåè¿™é‡Œåˆå·å·åœ°æ‰§è¡Œreturn this; // return person1;&#125;var person1 = new createPerson(\"æ¨å­é¾™\", \"33441524\");var person2 = new createPerson(\"ç‹å¾·å½ª\", \"66111314\");person1.showName();person1.showQQ();person2.showName();person2.showQQ();console.log(person1.showName == person2.showName); ä»¥ä¸Šä»£ç æ˜¯ç”±å·¥å‚æ–¹å¼åˆ›å»º; ç”¨æ„é€ å‡½æ•°function createPerson(name, qq) {}åˆ›å»ºä¸€ä¸ªç±»ï¼› è°ƒç”¨å‡½æ•°ä½¿ç”¨å…³é”®å­— newï¼švar person1 = new createPerson();è¿™æ—¶ç³»ç»Ÿå°±æ˜¯æ›¿ä½ åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½å¯¹è±¡var this=new Object();å¹¶ä¸”è¿˜æ›¿ä½ è¿”å›äº†è¿™ä¸ªå¯¹è±¡return this; å·¥å‚æ–¹å¼çš„é—®é¢˜ï¼šå‡½æ•°é‡å¤ä½¿ç”¨å¯¼è‡´èµ„æºæµªè´¹ï¼› 1console.log(person1.showName == person2.showName); //false ä»£ç ï¼šé¢å‘å¯¹è±¡1234567891011121314151617181920function CreatePerson(name, qq) &#123; this.name = name; this.qq = qq;&#125;CreatePerson.prototype.showName = function() &#123; console.log(\"æˆ‘æ˜¯\" + this.name);&#125;CreatePerson.prototype.showQQ = function() &#123; console.log(\"æˆ‘çš„qqå·æ˜¯ï¼š\" + this.qq);&#125;var person1 =new CreatePerson(\"ç‹å¾·å½ª\", 330441338);var person2 =new CreatePerson(\"æ¨å­é¾™\", 369898363);person1.showName();person1.showQQ();person2.showName();person2.showQQ();console.log(person1.showName == person2.showName)ï¼› é¢å‘å¯¹è±¡ ä½¿ç”¨æ„é€ å‡½æ•°åŠ å±æ€§ï¼› ä½¿ç”¨åŸå‹åŠ æ–¹æ³•ï¼›è¿™æ—¶console.log(person1.showName == person2.showName)ï¼›ï¼Œä¼šæ˜¯trueï¼Œå› ä¸º person1 å’Œ person2 éƒ½æ¥è‡ªåŒä¸ªåŸå‹:CreatePerson.prototype.showName()ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://www.yangtao.site/tags/JavaScript/"}]},{"title":"å®è·µ|JSåŒ€é€Ÿè¿åŠ¨å’Œç¼“å†²è¿åŠ¨","slug":"practice-speed-move","date":"2016-08-09T07:24:22.000Z","updated":"2020-03-18T03:41:04.462Z","comments":true,"path":"2016/08/09/practice-speed-move/","link":"","permalink":"https://www.yangtao.site/2016/08/09/practice-speed-move/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•ï¼šæœ‰ä»£ç æœ‰æ€»ç»“çš„ JS åŒ€é€Ÿè¿åŠ¨å’Œç¼“å†²è¿åŠ¨å­¦ä¹ æŠ¥å‘Š","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•ï¼šæœ‰ä»£ç æœ‰æ€»ç»“çš„ JS åŒ€é€Ÿè¿åŠ¨å’Œç¼“å†²è¿åŠ¨å­¦ä¹ æŠ¥å‘Š JS åŒ€é€Ÿè¿åŠ¨çš„å­¦ä¹ æ€»ç»“åŒ€é€Ÿè¿åŠ¨è¦ç‚¹ ç‚¹å‡»â€œå¼€å§‹â€ï¼Œç‰©ä½“å‘å³åŒ€é€Ÿè¿åŠ¨ 600 ä¸ªåƒç´ ï¼›ç‚¹å‡»â€œè¿”å›â€ï¼Œç‰©ä½“åŒ€é€Ÿå›åˆ°åˆå§‹ä½ç½®ï¼› css æ ·å¼è¡¨ä¸­ï¼Œè®¾ç½®ç»å¯¹å®šä½ï¼› JS ä»£ç ä¸­ï¼š åˆå§‹åŒ–å®šæ—¶å™¨ï¼štimer=null; å¼€å§‹è¿åŠ¨æ—¶ï¼Œå…³é—­å·²æœ‰çš„å®šæ—¶å™¨:clearInterval(timer);ï¼›å¦åˆ™ä½ è¿ç»­ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œç‰©ä½“ä¼šå› ä¸ºå®šæ—¶å™¨çš„æ¯æ¬¡å¼€å¯ä½†æ²¡æœ‰æ¸…é™¤æ¯æ¬¡çš„å¼€å¯ï¼Œä¼šå¯¼è‡´ä¸€å¡ä¸€å¡çš„è¿åŠ¨ï¼› è®¾ç½® speedï¼Œæ ¹æ®ç›®æ ‡å€¼å’Œ offsetLeft ä¹‹å·®æ¥åˆ¤æ–­æ­£è´Ÿï¼› ä½¿ç”¨ if()åˆ¤æ–­ï¼ŒæŠŠè¿åŠ¨å’Œåœæ­¢éš”å¼€ï¼› 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;åŒ€é€Ÿè¿åŠ¨&lt;/title&gt; &lt;style type=\"text/css\"&gt; #div1 &#123; width: 300px; height: 100px; border: 5px inset #890; background-color: #588; text-align: center; position: absolute; /*è®¾ç½®ç»å¯¹å®šä½*/ left: 0; box-shadow: 10px 9px 12px #599; &#125; #div1 p &#123; font-family: \"æ–°å®‹ä½“\"; font-size: 30px; color: white; margin-top: 14px; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var oBtn1 = document.getElementById(\"btn1\"); var oBtn2 = document.getElementById(\"btn2\"); var oDiv = document.getElementById(\"div1\"); var oPar = document.getElementById(\"par1\"); oBtn1.onclick = function() &#123; startMove(600); oPar.innerHTML = \"ç‚¹å‡»è¿”å›ï¼Œæˆ‘ä¼šå›åˆ°èµ·ç‚¹\"; &#125;; oBtn2.onclick = function() &#123; startMove(0); oPar.innerHTML = \"ç‚¹å‡»å¼€å§‹,æˆ‘å°†åŒ€é€Ÿè¿åŠ¨\"; &#125;; &#125;; var timer = null; function startMove(iTarget) &#123; var oDiv = document.getElementById(\"div1\"); //å¼€å§‹è¿åŠ¨å‰ï¼Œæ¸…é™¤å®šæ—¶å™¨ clearInterval(timer); timer = setInterval(function() &#123; //è®¾ç½®speedçš„åˆå§‹å€¼ä¸º0,å¹¶ä¸”æ ¹æ®ç›®æ ‡å€¼åˆ¤æ–­æ­£è´Ÿ var speed = 0; if (oDiv.offsetLeft &gt; iTarget) &#123; speed = -10; &#125; else &#123; speed = 10; &#125; //ç”¨ifå’Œelseéš”å¼€è¿åŠ¨å’Œåœæ­¢ if (oDiv.offsetLeft == iTarget) &#123; //æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ¸…é™¤å®šæ—¶å™¨ clearInterval(timer); &#125; else &#123; oDiv.style.left = oDiv.offsetLeft + speed + \"px\"; &#125; &#125;, 30); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input id=\"btn1\" type=\"button\" value=\"å¼€å§‹\" /&gt; &lt;input id=\"btn2\" type=\"button\" value=\"è¿”å›\" /&gt;&lt;br /&gt; &lt;div id=\"div1\"&gt; &lt;p id=\"par1\"&gt;ç‚¹å‡»å¼€å§‹,æˆ‘å°†åŒ€é€Ÿè¿åŠ¨&lt;/p&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; å…³äº speed çš„ Bug ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¾ç½® speed ä¸ºå¶æ•°ï¼Œå¦‚ä¸Šæ‰€ç¤ºä»£ç ï¼Œä¼šå¦‚æœŸåˆ°è¾¾ç›®æ ‡ç‚¹ï¼› è‹¥ speed ä¸ºå¥‡æ•°å‘¢ï¼Ÿ è®¾ speed=7ï¼Œç›®æ ‡ç‚¹ä¸º 100ï¼Œä» 0 å¼€å§‹åŒ€é€Ÿè¿åŠ¨ï¼Œç»è¿‡ 14 æ¬¡çš„é€’åŠ ï¼Œåˆ°è¾¾ 98 å¤„ï¼Œè¿™æ—¶ï¼Œé—®é¢˜å‡ºç°äº†ï¼šè‹¥å†é€’åŠ  7ï¼Œå°±ä¼šè¶…è¿‡ç›®æ ‡ç‚¹ 100ï¼Œè‹¥ä¸é€’åŠ ï¼Œå°±ä¼šè¾¾ä¸åˆ°ç›®æ ‡ç‚¹ï¼›æ‰€ä»¥ï¼Œå¼€å§‹å‰åå¡é¡¿ã€‚ å¦‚ä½•è§£å†³å‘¢ï¼Ÿ ä½¿ç”¨ Math.abs(); speed æœ‰å¯èƒ½ä¸ºæ­£ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸ºè´Ÿï¼Œæˆ‘ä»¬ä½¿ç”¨ç»å¯¹å€¼ï¼Œè®©ç›®æ ‡å’Œç‰©ä½“ä¹‹é—´çš„è·ç¦»&lt;=7,å³ï¼šMath.abs(iTarget-ele.offsetLeft) &lt;= 7 è¿™æ—¶ä¸ç®¡æ€ä¹ˆæ ·ï¼Œéƒ½æ˜¯ä¸è¶³ 7 ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¨å·§åœ°è®¤ä¸ºå®ƒå·²ç» åˆ°è¾¾ç›®æ ‡ç‚¹äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥æ¸…é™¤å®šæ—¶å™¨ï¼›ä½ å†è¯•è¯•çœ‹ï¼Œå°±ä¸ä¼šæ™ƒåŠ¨äº†ï¼Œä¸è¿‡è¿˜æ²¡è¾¾åˆ°ç›®æ ‡ç‚¹ã€‚ ä¸ºäº†ç²¾å‡†åœ°è¾¾åˆ°ç›®æ ‡ç‚¹ï¼Œæˆ‘ä»¬å°±è®¤ä¸º left ç›´æ¥åˆ°è¾¾ç›®æ ‡ç‚¹ï¼Œå³ï¼šele.style.left = iTarget + &quot;px&quot;; æœ€åï¼šåªæœ‰åŒ€é€Ÿè¿åŠ¨æ‰ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼›ç¼“å†²è¿åŠ¨æ²¡æœ‰ï¼Œå› ä¸ºå®ƒçš„ speed æ˜¯ä¸€ç›´éšä¹‹å˜åŒ–ï¼Œè¶Šæ¥è¶Šå°ï¼Œç›´åˆ°åˆ°è¾¾ç›®æ ‡ç‚¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;åŒ€é€Ÿè¿åŠ¨ä¹‹speed&lt;/title&gt; &lt;style type=\"text/css\"&gt; #div1 &#123; width: 150px; height: 200px; background-color: #880; margin-top: 35px; position: absolute; left: 0; &#125; #div1 p &#123; font-size: 24px; color: #fff; text-align: center; line-height: 200px; margin-top: 0; &#125; #div2, #div3 &#123; width: 0; height: 300px; border: 1px solid #000; position: absolute; left: 300px; &#125; #div3 &#123; left: 600px; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var btn_1 = document.getElementById(\"btn1\"); var btn_2 = document.getElementById(\"btn2\"); var btn_3 = document.getElementById(\"btn3\"); btn_1.onclick = function() &#123; startMove(600); &#125;; btn_2.onclick = function() &#123; startMove(300); &#125;; btn_3.onclick = function() &#123; startMove(0); &#125;; &#125;; var timer = null; function startMove(iTarget) &#123; var ele = document.getElementById(\"div1\"); clearInterval(timer); timer = setInterval(function() &#123; var speed = 0; if (iTarget &gt; ele.offsetLeft) &#123; speed = 7; &#125; else &#123; speed = -7; &#125; if (Math.abs(iTarget - ele.offsetLeft) &lt;= 7) &#123; clearInterval(timer); ele.style.left = iTarget + \"px\"; &#125; else &#123; ele.style.left = ele.offsetLeft + speed + \"px\"; &#125; &#125;, 30); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=\"button\" id=\"btn1\" value=\"600px\" /&gt; &lt;input type=\"button\" id=\"btn2\" value=\"300px\" /&gt; &lt;input type=\"button\" id=\"btn3\" value=\"0px\" /&gt; &lt;div id=\"div1\"&gt; &lt;p&gt;æˆ‘æ˜¯åŒ€é€Ÿè¿åŠ¨&lt;/p&gt; &lt;/div&gt; &lt;div id=\"div2\"&gt;&lt;/div&gt; &lt;div id=\"div3\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; åŒ€é€Ÿè¿åŠ¨ä¹‹åˆ†äº«æ  å½“é¼ æ ‡ç»è¿‡â€œåˆ†äº«â€æ—¶ï¼Œä¼šå¼¹å‡ºæ•´ä¸ªåˆ†äº«æ ï¼›é¼ æ ‡ç¦»å¼€æ—¶ï¼Œåˆä¼šæ¢å¤åˆ°åˆå§‹çŠ¶æ€ï¼› css æ ·å¼è¡¨ä¸­ï¼šè®¾ç½®ç»å¯¹å®šä½ï¼Œå¹¶è®¾ç½® left ä¹‹ä¸º-150pxï¼Œéšè—åˆ†äº«æ ï¼› 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;!DOCTYPE html&gt;&lt;body&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;åˆ†äº«æ &lt;/title&gt; &lt;style type=\"text/css\"&gt; * &#123; margin: 0px; padding: 0px; background-color: #ccc; &#125; #div1 &#123; width: 150px; height: 300px; background-color: #f60; position: absolute; top: 100px; left: -150px; &#125; #div1 span &#123; width: 30px; height: 54px; padding-top: 6px; background-color: #c38; color: white; text-align: center; position: absolute; right: -30px; top: 120px; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var oDiv = document.getElementById(\"div1\"); oDiv.onmouseover = function() &#123; startMove(0); &#125;; oDiv.onmouseout = function() &#123; startMove(-150); &#125;; &#125;; var timer = null; function startMove(iTarget) &#123; var oDiv = document.getElementById(\"div1\"); clearInterval(timer); timer = setInterval(function() &#123; //offsetLeft:æ ¹æ®å®šä½çš„å·¦è¾¹è·ï¼Œæ‰€ä»¥è¦è®¾ç½®divçš„ç»å¯¹å®šä½ var speed = 0; if (oDiv.offsetLeft &gt; iTarget) &#123; speed = -10; &#125; else &#123; speed = 10; &#125; if (oDiv.offsetLeft == iTarget) &#123; clearInterval(timer); &#125; else &#123; oDiv.style.left = oDiv.offsetLeft + speed + \"px\"; &#125; &#125;, 30); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"div1\"&gt; &lt;span&gt;åˆ†äº«&lt;/span&gt; &lt;/div&gt; &lt;/body&gt;&lt;/body&gt; åŒ€é€Ÿè¿åŠ¨ä¹‹æ·¡å…¥æ·¡å‡º æ‰€è°“æ·¡å…¥æ·¡å‡ºï¼Œå°±æ˜¯å½“é¼ æ ‡ç§»åˆ°ç›®æ ‡æ—¶ï¼Œç›®æ ‡çš„é€æ˜åº¦ä¼šåŒ€é€Ÿæ¢å¤åˆ° 100%ï¼Œåä¹‹ï¼Œé€æ˜åº¦ä¼šè¿”å›åˆ°åˆå§‹å€¼ï¼› css æ ·å¼è¡¨ä¸­ï¼Œé€æ˜åº¦çš„è®¾ç½®è€ƒè™‘æµè§ˆå™¨å…¼å®¹ï¼š IEï¼šfilter: alpha(opacity:30); å…¶å®ƒï¼šopacity: 0.3; è¿™é‡Œå¯ä¸å…³ offset ä»€ä¹ˆäº‹ï¼Œé‚£æ€ä¹ˆåŠå‘¢? å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå˜é‡ï¼Œå¹¶èµ‹å€¼ç»™å®ƒï¼Œæ¯”å¦‚ï¼švar alpha=30ï¼› ç„¶åï¼Œå°† speed çš„å€¼é€’åŠ ç»™å®ƒï¼šalpha = alpha + speed; è¿™æ ·ï¼Œåªæ˜¯å°†æ¯æ¬¡çš„ speed å€¼èµ‹ç»™å˜é‡ alphaï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å®šæ—¶å™¨æ¥åŒ€é€Ÿæ”¹å˜é€æ˜åº¦ã€‚ ç”±äºå…¼å®¹é—®é¢˜ï¼Œæˆ‘ä»¬åˆ†å¼€å¤„ç†ï¼š oDiv.style.filter = &quot;alpha(opacity:&#39; + alpha + &#39;)&quot;; oDiv.style.opacity = alpha/100;(å› ä¸ºåˆå§‹å€¼æ˜¯ 30) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;æ·¡å…¥æ·¡å‡º&lt;/title&gt; &lt;style type=\"text/css\"&gt; #div1 &#123; width: 300px; height: 150px; background-color: #880; filter: alpha(opacity: 30); opacity: 0.3; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var oDiv = document.getElementById(\"div1\"); oDiv.onmouseover = function() &#123; getChange(100); &#125;; oDiv.onmouseout = function() &#123; getChange(30); &#125;; &#125;; var alpha = 30; var timer = null; function getChange(iTarget) &#123; var oDiv = document.getElementById(\"div1\"); clearInterval(timer); timer = setInterval(function() &#123; var speed = 0; if (alpha &lt; iTarget) &#123; speed = 10; &#125; else &#123; speed = -10; &#125; if (alpha == iTarget) &#123; clearInterval(timer); &#125; else &#123; alpha += speed; oDiv.style.filter = \"alpha(opacity:' + alpha + ')\"; oDiv.style.opacity = alpha / 100; &#125; &#125;, 30); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"div1\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; JS ç¼“å†²è¿åŠ¨çš„å­¦ä¹ æ€»ç»“ç¼“å†²è¿åŠ¨çš„è¦ç‚¹ é¡¾åæ€ä¹‰ï¼Œæ‰€è°“ç¼“å†²ï¼Œå°±æ˜¯è¯´é€Ÿåº¦ä¸åŒï¼›åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œè·ç¦»è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šå¤§ï¼›è·ç¦»è¶Šå°ï¼Œé€Ÿåº¦ä¹Ÿå°±è¶Šå°ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦æ”¹å˜ speedï¼Œå°±åŸºæœ¬ä¸Š OKã€‚ é¦–å…ˆï¼Œé€šè¿‡å¾—åˆ°ä½ç§»é‡ï¼Œå†é™¤ä»¥ä¸€ä¸ªæ•°å€¼ï¼Œå°±å¯ä»¥æ”¹å˜é€Ÿåº¦ï¼švar speed = (iTarget - ele.offsetLeft)/10; ç„¶åï¼Œå› ä¸ºæ˜¯å˜é€Ÿï¼Œæ‰€ä»¥æœ‰å¯èƒ½å‡ºç°å°æ•°ï¼Œä¸è¶³ä»¥è¾¾åˆ°ç›®æ ‡å€¼ï¼›è¿™æ—¶ï¼Œé€šè¿‡ Math å¯¹è±¡ï¼Œå¯ä»¥ä½¿ speed å–æ•´ï¼Œè§£å†³ä¸è¶³ 1 ä¸ªåƒç´ çš„é—®é¢˜ï¼š å½“ speed&gt;0 æ—¶ï¼Œç‰©ä½“ä»å·¦å¾€å³è¿åŠ¨ï¼Œç¦»ç›®æ ‡å€¼è¿˜å·®ä¸è¶³ 1pxï¼Œæ‰€ä»¥æˆ‘ä»¬å°† speed å‘ä¸Šå–æ•´ï¼ŒMath.ceil(speed); å½“ speed&lt;0 æ—¶ï¼Œåä¹‹ï¼Œç¦»ç›®æ ‡å€¼è¿˜å·®ä¸è¶³-1px,ç”±äºæ˜¯è´Ÿæ•°ï¼Œæˆ‘ä»¬å‘ä¸‹å–æ•´ï¼Œæ¯”å¦‚-0.9ï¼Œé€šè¿‡ Math.floor(-0.9)ï¼Œå¾—å‡º-1ï¼› æ‰€ä»¥ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶èµ‹å€¼ç»™ speedï¼šspeed = speed&gt;0 ? Math.ceil(speed) : Math.floor(speed); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;ç¼“å†²è¿åŠ¨&lt;/title&gt; &lt;style type=\"text/css\"&gt; #div1 &#123; width: 150px; height: 200px; background-color: #880; margin-top: 35px; position: absolute; left: 0; &#125; #div1 p &#123; font-size: 24px; color: #fff; text-align: center; line-height: 200px; margin-top: 0; &#125; #div2, #div3 &#123; width: 0; height: 300px; border: 1px solid #000; position: absolute; left: 300px; &#125; #div3 &#123; left: 600px; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var btn_1 = document.getElementById(\"btn1\"); var btn_2 = document.getElementById(\"btn2\"); var btn_3 = document.getElementById(\"btn3\"); btn_1.onclick = function() &#123; startMove(600); &#125;; btn_2.onclick = function() &#123; startMove(300); &#125;; btn_3.onclick = function() &#123; startMove(0); &#125;; &#125;; var timer = null; function startMove(iTarget) &#123; var ele = document.getElementById(\"div1\"); clearInterval(timer); timer = setInterval(function() &#123; //é€šè¿‡ä½ç§»é‡é™¤ä»¥10ï¼Œä½¿speedå˜é€Ÿï¼Œä»¥è‡´å®ç°å‡é€Ÿã€åœæ­¢ã€‚ var speed = (iTarget - ele.offsetLeft) / 10; //å–æ•´ï¼Œè§£å†³æœ€åä¸è¶³1pxçš„ä½ç§»é‡è¢«å¿½ç•¥çš„é—®é¢˜ã€‚ speed = speed &gt; 0 ? Math.ceil(speed) : Math.floor(speed); if (ele.offsetLeft == iTarget) &#123; clearInterval(timer); &#125; else &#123; ele.style.left = ele.offsetLeft + speed + \"px\"; &#125; &#125;, 30); &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=\"button\" id=\"btn1\" value=\"600px\" /&gt; &lt;input type=\"button\" id=\"btn2\" value=\"300px\" /&gt; &lt;input type=\"button\" id=\"btn3\" value=\"0px\" /&gt; &lt;div id=\"div1\"&gt; &lt;p&gt;æˆ‘æ˜¯ç¼“å†²è¿åŠ¨&lt;/p&gt; &lt;/div&gt; &lt;div id=\"div2\"&gt;&lt;/div&gt; &lt;div id=\"div3\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/tags/Html/"}]},{"title":"å®è·µ|åˆ¶ä½œä¸€ä¸ªç®€æ˜“æ•°ç æ—¶é’Ÿ","slug":"practice-easy-clock","date":"2016-08-04T14:51:12.000Z","updated":"2020-03-18T03:25:19.661Z","comments":true,"path":"2016/08/04/practice-easy-clock/","link":"","permalink":"https://www.yangtao.site/2016/08/04/practice-easy-clock/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• å‰è¨€æ­£å¸¸æ˜¾ç¤ºæ—¶é—´çš„æ—¶åˆ†ç§’ï¼Œå½“é¼ æ ‡ç§»ä¸Šå»çš„æ—¶å€™ï¼Œåˆ‡æ¢æˆå¹´æœˆæ—¥ çº¿ä¸Šæ¼”ç¤ºã€æˆ³æˆ‘ã€‘ ä¸»è¦ç‰¹è‰² ç®€æ´ é‡‘å±è‰²å½© setInterval()â€“&gt;å®šæ—¶å™¨ è¿ç”¨äº‹ä»¶ onmouseover()å’Œ onmouseout()ï¼Œä½¿æ—¶é—´ä¸æ—¥æœŸä¹‹é—´è‡ªå¦‚åˆ‡æ¢ ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œè¿˜æœ›å¤§å®¶ä¸€èµ·ä¿®æ”¹ï¼Œä½¿ä¹‹æ›´åŠ å®Œå–„ ä¸€äº›é—®é¢˜å„ä¸ªæµè§ˆå™¨çš„æ˜¾ç¤ºä¸æ˜¯å¾ˆç†æƒ³ï¼Œæˆ‘å·²ç»æƒ³å°½å„ç§åŠæ³•ï¼Œä½¿ä¹‹å¹³ç¨³å±•ç°ï¼› ç«ç‹â€“&gt;è¿›è¡Œäº‹ä»¶åˆ‡æ¢æ—¶ï¼Œæµ®åº¦æ¯”è¾ƒå¤§ï¼› è°·æ­Œâ€“&gt;å®Œç¾è¿è¡Œ(å»æ‰æŸäº›æ ·å¼ï¼‰ï¼› IEâ€“&gt;é™¤äº†æœ€æ–°çš„ï¼Œå…¶ä»–çš„ä¸æ•¢å¤šæƒ³ï¼› æ—¶åˆ†ç§’12345678910111213141516171819window.onload = function() &#123; var imgs = document.getElementsByTagName(\"img\"); function checkTime(x) &#123; if (x &lt; 10) return \"0\" + x; else return \"\" + x; &#125; function oShowTime() &#123; var oDate = new Date(); var oHou = oDate.getHours(); var oMin = oDate.getMinutes(); var oSec = oDate.getSeconds(); var str = checkTime(oHou) + checkTime(oMin) + checkTime(oSec); for (var i = 0; i &lt; imgs.length; i++) &#123; imgs[i].src = \"images/\" + str[i] + \".JPG\"; &#125; &#125; setInterval(oShowTime, 1000); oShowTime();&#125;; æ—¶é—´ä¸æ—¥æœŸäº‹ä»¶åˆ‡æ¢1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162window.onload = function() &#123; var oDiv = document.getElementById(\"div1\"); var imgs = document.getElementsByTagName(\"img\"); var timer = null; /*åˆ¤æ–­è·å–åˆ°çš„æ•°å­—æ˜¯å¦å°äº10*/ function checkTime(x) &#123; if (x &lt; 10) return \"0\" + x; else return \"\" + x; &#125; /*é¼ æ ‡ç‚¹å‡»äº‹ä»¶*/ oDiv.onmouseover = function() &#123; clearInterval(timer); fnDate(); &#125;; oDiv.onmouseout = function() &#123; clearInterval(timer); fnTime(); &#125;; /*è·å–çš„æ—¥æœŸå‡½æ•°*/ function fnDate() &#123; function oShowDate() &#123; var oDate = new Date(); var oYea = oDate.getFullYear(); oYea = oYea.toString(); var oMon = oDate.getMonth() + 1; var oDay = oDate.getDay(); var str = oYea.substr(2, 2) + checkTime(oMon) + checkTime(oDay); var aPar = document.getElementsByTagName(\"p\"); for (var i = 0; i &lt; imgs.length; i++) &#123; imgs[i].src = \"images/\" + str[i] + \".JPG\"; &#125; for (var j = 0; j &lt; aPar.length; j++) &#123; aPar[j].innerHTML = \"-\"; &#125; &#125; timer = setInterval(oShowDate, 1000); oShowDate(); &#125; /*è·å–çš„æ—¶é—´å‡½æ•°*/ function fnTime() &#123; function oShowTime() &#123; var oDate = new Date(); var oHou = oDate.getHours(); var oMin = oDate.getMinutes(); var oSec = oDate.getSeconds(); var str = checkTime(oHou) + checkTime(oMin) + checkTime(oSec); var aPar = document.getElementsByTagName(\"p\"); for (var i = 0; i &lt; imgs.length; i++) &#123; imgs[i].src = \"images/\" + str[i] + \".JPG\"; &#125; for (var j = 0; j &lt; aPar.length; j++) &#123; aPar[j].innerHTML = \":\"; &#125; &#125; timer = setInterval(oShowTime, 1000); oShowTime(); &#125; fnTime();&#125;; æ ·å¼è®¾ç½®1234567891011121314151617181920212223242526272829303132body &#123; background-color: #333; font-size: 80px;&#125;#div1 &#123; width: 600px; height: 180px; border: 40px solid #999; border-radius: 60px; box-shadow: 10px 14px 12px #777; margin: 150px auto; background-color: #fff;&#125;.div2 &#123; width: 580px; height: 160px; margin: 15px 5px; padding-left: 9px; /*è°·æ­Œæµè§ˆå™¨ä¸ç”¨è®¾ç½®*/&#125;img &#123; width: 60px; height: 110px; float: left; margin: 20px 10px;&#125;p &#123; float: left; color: #555; height: 110px; line-height: 110px; margin: 12px 5px;&#125; å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;æ•°ç é’Ÿè¡¨&lt;/title&gt; &lt;style type=\"text/css\"&gt; body &#123; background-color: #333; font-size: 80px; &#125; #div1 &#123; width: 600px; height: 180px; border: 40px solid #999; border-radius: 60px; box-shadow: 10px 14px 12px #777; margin: 150px auto; background-color: #fff; &#125; .div2 &#123; width: 580px; height: 160px; margin: 15px 5px; padding-left: 9px; /*è°·æ­Œæµè§ˆå™¨ä¸ç”¨è®¾ç½®*/ &#125; img &#123; width: 60px; height: 110px; float: left; margin: 20px 10px; &#125; p &#123; float: left; color: #555; height: 110px; line-height: 110px; margin: 12px 5px; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var oDiv = document.getElementById(\"div1\"); var imgs = document.getElementsByTagName(\"img\"); var timer = null; /*åˆ¤æ–­è·å–åˆ°çš„æ•°å­—æ˜¯å¦å°äº10*/ function checkTime(x) &#123; if (x &lt; 10) return \"0\" + x; else return \"\" + x; &#125; /*é¼ æ ‡ç‚¹å‡»äº‹ä»¶*/ oDiv.onmouseover = function() &#123; clearInterval(timer); fnDate(); &#125;; oDiv.onmouseout = function() &#123; clearInterval(timer); fnTime(); &#125;; /*è·å–çš„æ—¥æœŸå‡½æ•°*/ function fnDate() &#123; function oShowDate() &#123; var oDate = new Date(); var oYea = oDate.getFullYear(); oYea = oYea.toString(); var oMon = oDate.getMonth() + 1; var oDay = oDate.getDay(); var str = oYea.substr(2, 2) + checkTime(oMon) + checkTime(oDay); var aPar = document.getElementsByTagName(\"p\"); for (var i = 0; i &lt; imgs.length; i++) &#123; imgs[i].src = \"images/\" + str[i] + \".JPG\"; &#125; for (var j = 0; j &lt; aPar.length; j++) &#123; aPar[j].innerHTML = \"-\"; &#125; &#125; timer = setInterval(oShowDate, 1000); oShowDate(); &#125; /*è·å–çš„æ—¶é—´å‡½æ•°*/ function fnTime() &#123; function oShowTime() &#123; var oDate = new Date(); var oHou = oDate.getHours(); var oMin = oDate.getMinutes(); var oSec = oDate.getSeconds(); var str = checkTime(oHou) + checkTime(oMin) + checkTime(oSec); var aPar = document.getElementsByTagName(\"p\"); for (var i = 0; i &lt; imgs.length; i++) &#123; imgs[i].src = \"images/\" + str[i] + \".JPG\"; &#125; for (var j = 0; j &lt; aPar.length; j++) &#123; aPar[j].innerHTML = \":\"; &#125; &#125; timer = setInterval(oShowTime, 1000); oShowTime(); &#125; fnTime(); &#125;; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"div1\"&gt; &lt;div class=\"div2\"&gt; &lt;img src=\"images/0.JPG\" /&gt; &lt;img src=\"images/0.JPG\" /&gt; &lt;p&gt;:&lt;/p&gt; &lt;img src=\"images/0.JPG\" /&gt; &lt;img src=\"images/0.JPG\" /&gt; &lt;p&gt;:&lt;/p&gt; &lt;img src=\"images/0.JPG\" /&gt; &lt;img src=\"images/0.JPG\" /&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/tags/Html/"}]},{"title":"å®è·µ|æ•™ä½ åˆ¶ä½œç®€æ˜“å»¶æ—¶æç¤ºæ¡†","slug":"practice-easy-tooltip","date":"2016-08-04T04:49:10.000Z","updated":"2020-03-18T03:18:41.516Z","comments":true,"path":"2016/08/04/practice-easy-tooltip/","link":"","permalink":"https://www.yangtao.site/2016/08/04/practice-easy-tooltip/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• åŠ¨æ€æ•ˆæœå›¾ ç¬¬ä¸€æ­¥åˆ†åˆ«ä½¿ç”¨ç‚¹å‡»äº‹ä»¶ onmouseover å’Œ onmouseout,æ¥è®¾ç½® oDiv2 çš„å±æ€§ï¼Œä½¿ä¹‹æ˜¾ç¤ºæˆ–éšè—ï¼› 12345678var oDiv1 = document.getElementById(\"div1\");var oDiv2 = document.getElementById(\"div2\");oDiv1.onmouseover = function() &#123; oDiv2.style.display = \"block\";&#125;;oDiv1.onmouseout = function() &#123; oDiv2.style.display = \"none\";&#125;; ç¬¬äºŒæ­¥è®¾ç½® oDiv2 å»¶æ—¶ 1 ç§’åå†æ¶ˆå¤±ï¼Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªå˜é‡ timer æŠŠå®ƒå­˜èµ·æ¥; 123456var timer = null;oDiv1.onmouseout = function() &#123; timer = setTimeout(function() &#123; oDiv2.style.display = \"none\"; &#125;, 1000);&#125;; ç¬¬ä¸‰æ­¥å½“é¼ æ ‡ç§»åˆ° oDiv2 çš„æ—¶å€™ï¼Œç”±äºå»¶æ—¶ä¸€ç§’åä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥è¿™æ—¶è¦æ¸…é™¤å®šæ—¶å™¨ï¼› 123oDiv2.onmouseover = function() &#123; clearTimeout(timer);&#125;; ç¬¬å››æ­¥å½“é¼ æ ‡ç¦»å¼€ oDiv2 çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ oDiv1 å’Œ oDiv2 ä¹‹é—´æ¥æ¥å›å›å¾˜å¾Šæ—¶ï¼Œä¼šæœ‰ä¸€ç¬é—´çš„é¢‘é—ªï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä¹Ÿè¦è®¾ç½®å½“é¼ æ ‡ç¦»å¼€ oDiv2 æ—¶æ¥ä¸ªå®šæ—¶å™¨ï¼› 12345oDiv2.onmouseout = function() &#123; timer = setTimeout(function() &#123; oDiv2.style.display = \"none\"; &#125;, 1000);&#125;; ç¬¬äº”æ­¥å½“é¼ æ ‡ä» oDiv2 ç§»åŠ¨åˆ° oDiv1 çš„æ—¶å€™ï¼Œç”±äº oDiv2 çš„ onmouseout å®šæ—¶å™¨æ²¡æœ‰æ¸…é™¤ï¼Œæ‰€ä»¥è¿‡ä¸€ç§’åï¼ŒoDiv2 è¿˜æ˜¯ä¼šæ¶ˆå¤±ï¼›è¿™é‡Œï¼Œæˆ‘ä»¬å°±æ¸…é™¤å®šæ—¶å™¨ï¼ˆå½“ oDiv2 ç§»åŠ¨åˆ° oDiv1 æ—¶ï¼Œä½¿ oDiv2 ä¸Šçš„å®šæ—¶å™¨è§£é™¤ï¼‰ï¼š 1234oDiv1.onmouseover = function() &#123; clearTimeout(timer); oDiv2.style.display = \"block\";&#125;; æœ€åå½“ä»£ç ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•ä½¿ä¹‹ç®€åŒ–ï¼Œè¿™æ ·å°±ä¸ä¼šæ˜¾å¾—å†—ä½™ï¼› åœ¨ JS ä¸­ï¼Œå…è®¸æˆ‘ä»¬è¿™æ ·åšï¼ša=b=c=1;æ‰€ä»¥ï¼Œè§‚å¯Ÿä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ä»£ç ï¼š 123456789oDiv1.onmouseover = oDiv2.onmouseover = function() &#123; clearTimeout(timer); oDiv2.style.display = \"block\";&#125;;oDiv1.onmouseout = oDiv2.onmouseout = function() &#123; timer = setTimeout(function() &#123; oDiv2.style.display = \"none\"; &#125;, 1000);&#125;; å…¶å®ï¼Œæƒ³é€šåˆ¶ä½œçš„æ­¥éª¤ï¼Œå†™ä»£ç æ‰ä¼šè¡Œäº‘æµæ°´ã€‚ å®Œæ•´ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;å»¶æ—¶æç¤º&lt;/title&gt; &lt;style type=\"text/css\"&gt; body &#123; background-color: #fc9; &#125; #div1, #div2 &#123; margin: 10px; float: left; color: #fff; text-align: center; border: 3px solid #eee; &#125; #div1 &#123; width: 100px; height: 100px; background-color: #f60; font-size: 20px; padding-top: 10px; &#125; #div2 &#123; width: 300px; height: 250px; background-color: #599; font-size: large; line-height: 48px; padding-top: 10px; display: none; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var oDiv1 = document.getElementById(\"div1\"); var oDiv2 = document.getElementById(\"div2\"); var timer = null; oDiv1.onmouseover = oDiv2.onmouseover = function() &#123; clearTimeout(timer); oDiv2.style.display = \"block\"; &#125;; oDiv1.onmouseout = oDiv2.onmouseout = function() &#123; timer = setTimeout(function() &#123; oDiv2.style.display = \"none\"; &#125;, 1000); &#125;; &#125;; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"div1\"&gt; ç™»å²³é˜³æ¥¼ &lt;p&gt;æœç”«&lt;/p&gt; &lt;/div&gt; &lt;div id=\"div2\"&gt; æ˜”é—»æ´åº­æ°´ï¼Œä»Šä¸Šå²³é˜³æ¥¼ã€‚&lt;br /&gt; å´æ¥šä¸œå—å¼ï¼Œä¹¾å¤æ—¥å¤œæµ®ã€‚&lt;br /&gt; äº²æœ‹æ— ä¸€å­—ï¼Œè€ç—…æœ‰å­¤èˆŸã€‚&lt;br /&gt; æˆé©¬å…³å±±åŒ—ï¼Œå‡­è½©æ¶•æ³—æµã€‚ &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; æ•ˆæœå›¾","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/tags/Html/"}]},{"title":"å®è·µ|å­¦ä¹ åˆ¶ä½œä¸€ä¸ªç®€æ˜“æ—¥å†","slug":"practice-easy-calendar","date":"2016-08-03T10:16:21.000Z","updated":"2020-03-18T03:05:55.725Z","comments":true,"path":"2016/08/03/practice-easy-calendar/","link":"","permalink":"https://www.yangtao.site/2016/08/03/practice-easy-calendar/","excerpt":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½•","text":"æ•´ç†å…¥å‘å­¦ä¹ è®°å½• åŠ¨æ€æ•ˆæœå›¾ GIF å›¾ç‰‡ å…ˆå†™ html çš„ body éƒ¨åˆ†ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;div id=\"tabs\" class=\"calender\"&gt; &lt;ul&gt; &lt;li class=\"active\"&gt; &lt;h2&gt;1&lt;/h2&gt; &lt;p&gt;JAN&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;2&lt;/h2&gt; &lt;p&gt;FER&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;3&lt;/h2&gt; &lt;p&gt;MAR&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;4&lt;/h2&gt; &lt;p&gt;APR&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;5&lt;/h2&gt; &lt;p&gt;MAY&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;6&lt;/h2&gt; &lt;p&gt;JUN&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;7&lt;/h2&gt; &lt;p&gt;JUL&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;8&lt;/h2&gt; &lt;p&gt;AUG&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;9&lt;/h2&gt; &lt;p&gt;SEP&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;10&lt;/h2&gt; &lt;p&gt;OCT&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;11&lt;/h2&gt; &lt;p&gt;NOV&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;12&lt;/h2&gt; &lt;p&gt;DEC&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=\"text\"&gt; &lt;h2&gt;1æœˆæ´»åŠ¨&lt;/h2&gt; &lt;h4&gt;ä¸€æœˆå°å¯’æ¥å¤§å¯’&lt;/h4&gt; &lt;/div&gt;&lt;/div&gt; è®¾ç½® css æ ·å¼12345678910111213141516171819202122232425262728293031323334353637body &#123; background-color: #890;&#125;#tabs &#123; border: 10px solid #ccc; margin: 50px auto; width: 340px; background-color: #ddd; text-align: center;&#125;#tabs ul li &#123; float: left; list-style-type: none; width: 70px; height: 65px; border: 4px solid #588; margin: 5px; background-color: #222; color: white; line-height: 8px;&#125;/*** cssæ ·å¼è®¾ç½®ä¸.activeæœ‰å†²çªæ—¶ï¼Œ** ä¼˜å…ˆçº§id&gt;class** ç»†åŒ–é€‰æ‹©ç¬¦*/#tabs .active &#123; color: #c66; background-color: #fff;&#125;.text &#123; clear: both; margin: 10px 40px; background-color: #eee; padding: 2px; line-height: 14px;&#125; javascript ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738window.onload = function() &#123; var array = [ \"ä¸€æœˆå°å¯’æ¥å¤§å¯’\", \"äºŒæœˆç«‹æ˜¥é›¨æ°´è¿\", \"æƒŠè›°æ˜¥åˆ†åœ¨ä¸‰æœˆ\", \"æ¸…æ˜è°·é›¨å››æœˆå¤©\", \"äº”æœˆç«‹å¤å’Œå°æ»¡\", \"å…­æœˆèŠ’ç§å¤è‡³è¿\", \"ä¸ƒæœˆå¤§æš‘å’Œå°æš‘\", \"ç«‹ç§‹å¤„æš‘å…«æœˆé—´\", \"ä¹æœˆç™½éœ²æ¥ç§‹åˆ†\", \"å¯’éœ²éœœé™åæœˆå…¨\", \"ç«‹å†¬å°é›ªåä¸€æœˆ\", \"å¤§é›ªå†¬è‡³è¿æ–°å¹´\" ]; // è¿™é‡Œå®šä¹‰oDiv.get...æ˜¯ä¸ºäº†å®šä¹‰classNameä½œç”¨å¯¹è±¡æ˜¯idä¸ºtabsä¸‹çš„æ‰€æœ‰divæ–‡æœ¬ var oDiv = document.getElementById(\"tabs\"); var aLi = oDiv.getElementsByTagName(\"li\"); var oTxt = oDiv.getElementsByTagName(\"div\")[0]; for (var i = 0; i &lt; aLi.length; i++) &#123; // å®šä¹‰ä¸€ä¸ªindexå±æ€§å¯¹aLiè¿›è¡Œç¼–å· aLi[i].index = i; aLi[i].onmouseover = function() &#123; // è¿™é‡Œæ˜¯ç›¸å¯¹äºæœªè¢«ç‚¹å‡»çš„éƒ¨åˆ†çš„æ ·å¼ for (var i = 0; i &lt; aLi.length; i++) &#123; aLi[i].className = \"\"; &#125; this.className = \"active\"; // é€šè¿‡ä¹‹å‰çš„indexç¼–å·ç»‘å®šæŒ‡å®šçš„divæ–‡æœ¬ oTxt.innerHTML = \"&lt;h2&gt;\" + (this.index + 1) + \"æœˆæ´»åŠ¨&lt;/h2&gt;&lt;h4&gt;\" + array[this.index] + \"&lt;/h4&gt;\"; &#125;; &#125;&#125;; å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;title&gt;ç®€æ˜“æ—¥å†&lt;/title&gt; &lt;style type=\"text/css\"&gt; body &#123; background-color: #890; &#125; #tabs &#123; border: 10px solid #ccc; margin: 50px auto; width: 340px; background-color: #ddd; text-align: center; &#125; #tabs ul li &#123; float: left; list-style-type: none; width: 70px; height: 65px; border: 4px solid #588; margin: 5px; background-color: #222; color: white; line-height: 8px; &#125; #tabs .active &#123; color: #c66; background-color: #fff; &#125; .text &#123; clear: both; margin: 10px 40px; background-color: #eee; padding: 2px; line-height: 14px; &#125; &lt;/style&gt; &lt;script type=\"text/javascript\"&gt; window.onload = function() &#123; var array = [ \"ä¸€æœˆå°å¯’æ¥å¤§å¯’\", \"äºŒæœˆç«‹æ˜¥é›¨æ°´è¿\", \"æƒŠè›°æ˜¥åˆ†åœ¨ä¸‰æœˆ\", \"æ¸…æ˜è°·é›¨å››æœˆå¤©\", \"äº”æœˆç«‹å¤å’Œå°æ»¡\", \"å…­æœˆèŠ’ç§å¤è‡³è¿\", \"ä¸ƒæœˆå¤§æš‘å’Œå°æš‘\", \"ç«‹ç§‹å¤„æš‘å…«æœˆé—´\", \"ä¹æœˆç™½éœ²æ¥ç§‹åˆ†\", \"å¯’éœ²éœœé™åæœˆå…¨\", \"ç«‹å†¬å°é›ªåä¸€æœˆ\", \"å¤§é›ªå†¬è‡³è¿æ–°å¹´\" ]; var oDiv = document.getElementById(\"tabs\"); var aLi = oDiv.getElementsByTagName(\"li\"); var oTxt = oDiv.getElementsByTagName(\"div\")[0]; for (var i = 0; i &lt; aLi.length; i++) &#123; aLi[i].index = i; aLi[i].onmouseover = function() &#123; for (var i = 0; i &lt; aLi.length; i++) &#123; aLi[i].className = \"\"; &#125; this.className = \"active\"; oTxt.innerHTML = \"&lt;h2&gt;\" + (this.index + 1) + \"æœˆæ´»åŠ¨&lt;/h2&gt;&lt;h4&gt;\" + array[this.index] + \"&lt;/h4&gt;\"; &#125;; &#125; &#125;; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"tabs\" class=\"calender\"&gt; &lt;ul&gt; &lt;li class=\"active\"&gt; &lt;h2&gt;1&lt;/h2&gt; &lt;p&gt;JAN&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;2&lt;/h2&gt; &lt;p&gt;FER&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;3&lt;/h2&gt; &lt;p&gt;MAR&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;4&lt;/h2&gt; &lt;p&gt;APR&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;5&lt;/h2&gt; &lt;p&gt;MAY&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;6&lt;/h2&gt; &lt;p&gt;JUN&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;7&lt;/h2&gt; &lt;p&gt;JUL&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;8&lt;/h2&gt; &lt;p&gt;AUG&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;9&lt;/h2&gt; &lt;p&gt;SEP&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;10&lt;/h2&gt; &lt;p&gt;OCT&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;11&lt;/h2&gt; &lt;p&gt;NOV&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;h2&gt;12&lt;/h2&gt; &lt;p&gt;DEC&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=\"text\"&gt; &lt;h2&gt;1æœˆæ´»åŠ¨&lt;/h2&gt; &lt;h4&gt;ä¸€æœˆå°å¯’æ¥å¤§å¯’&lt;/h4&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/categories/Html/"}],"tags":[{"name":"Html","slug":"Html","permalink":"https://www.yangtao.site/tags/Html/"}]}]}